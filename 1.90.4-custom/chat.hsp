#deffunc clientguide int
	locvar_clientguide_j = 0
	repeat 5
		locvar_clientguide_p = gdata(GDATA_QUEST_POOL + cnt)
		if ( qdata(QDATA_STATUS, locvar_clientguide_p) == QUEST_STATE_ONGOING ) {
			if ( gdata(GDATA_LEVEL) == 1 ) {
				locvar_clientguide_i = -1
				if ( qdata(QDATA_EXIST, locvar_clientguide_p) == QUEST_TYPE_COLLECT ) {
					if ( qdata(QDATA_MAP, locvar_clientguide_p) == gdata(GDATA_AREA) ) {
						locvar_clientguide_i = qdata(QDATA_DEST_CLIENT, locvar_clientguide_p)
					}
				}
				if ( qdata(QDATA_EXIST, locvar_clientguide_p) == QUEST_TYPE_DELIVER ) {
					if ( qdata(QDATA_MAP, qdata(QDATA_DEST_CLIENT, locvar_clientguide_p)) == gdata(GDATA_AREA) ) {
						locvar_clientguide_i = qdata(QDATA_CLIENT, qdata(QDATA_DEST_CLIENT, locvar_clientguide_p))
					}
				}
				if ( locvar_clientguide_i != (-1) ) {
					locvar_clientguide_f = 0
					repeat cnt
						if ( gdata(GDATA_QUEST_POOL + cnt) == locvar_clientguide_p ) {
							locvar_clientguide_f = 1
							break
						}
					loop
					if ( locvar_clientguide_f == 0 ) {
						rtval(locvar_clientguide_j) = locvar_clientguide_i
						locvar_clientguide_j++
					}
				}
			}
		}
	loop
	return locvar_clientguide_j

#deffunc tradecheck int tradecheck_charid
	locvar_clientguide_j = 0
	repeat 5
		locvar_clientguide_p = gdata(GDATA_QUEST_POOL + cnt)
		if ( qdata(QDATA_STATUS, locvar_clientguide_p) == QUEST_STATE_ONGOING ) {
			if ( gdata(GDATA_LEVEL) == 1 ) {
				if ( qdata(QDATA_MAP, locvar_clientguide_p) == gdata(GDATA_AREA) ) {
					if ( tradecheck_charid == qdata(QDATA_DEST_CLIENT, locvar_clientguide_p) ) {
						locvar_clientguide_j = 1
						break
					}
				}
			}
		}
	loop
	return locvar_clientguide_j

*chat_refresh
	gsel 4
	buffer 4, windoww, 720
	if ( cdata(CDATA_PORTRAIT, tc) < 80 ) {
		picload exedir + "graphic\\face1.bmp", 1
	}
	else {
		picload exedir + "graphic\\face2.bmp", 1
	}
	if ( scenemode ) {
		if ( int(actor(1, rc)) >= 160 ) {
			picload exedir + "graphic\\face2.bmp", 1
		}
		else {
			picload exedir + "graphic\\face1.bmp", 1
		}
	}
	if ( evochat == 0 ) {
		gsel 7
		picload exedir + "graphic\\ie_chat.bmp"
		gsel 0
	}
	if ( evochat != 0 ) {
		gsel 7
		picload exedir + "graphic\\ie_chat2.bmp"
		gsel 0
	}
	return

*chat
	if ( cdata(CDATA_TONE_SEX, tc) == 0 ) {
		if ( cdata(CDATA_SEX, tc) == 0 ) {
			cdata(CDATA_TONE_SEX, tc) = 1
		}
		else {
			cdata(CDATA_TONE_SEX, tc) = 2
		}
	}
	keyhalt = 1
	if ( cdata(CDATA_ROLE, tc) == ROLE_SHOP_INN ) {
		if ( cfg_extrahelp ) {
			if ( gdata(STARTING_GDATA_HELP + 7) == 0 ) {
				if ( mode == MODELIST_MAIN ) {
					if ( cdata(CDATA_ACTION_PERIOD, CHARA_PLAYER) == 0 ) {
						gdata(STARTING_GDATA_HELP + 7) = 1
						ghelp = 7
						gosub *elona_help
						screenupdate = -1
						gosub *screen_draw
					}
				}
			}
		}
	}
	if ( cdata(CDATA_ROLE, tc) == ROLE_TRAINER ) {
		if ( cfg_extrahelp ) {
			if ( gdata(STARTING_GDATA_HELP + 8) == 0 ) {
				if ( mode == MODELIST_MAIN ) {
					if ( cdata(CDATA_ACTION_PERIOD, CHARA_PLAYER) == 0 ) {
						gdata(STARTING_GDATA_HELP + 8) = 1
						ghelp = 8
						gosub *elona_help
						screenupdate = -1
						gosub *screen_draw
					}
				}
			}
		}
	}
	gosub *set_npcGod
	if ( scenemode == 0 ) {
		snd SOUNDLIST_CHAT
		gosub *check_renew
	}
	cs = 0
	chatflag = 0
	chatesc = 1
	if ( cbit(CHARA_BIT_LIVESTOCK, tc) == 1 & gdata(GDATA_AREA) == AREA_DOJO ) {
		if ( evnum == 0 ) {
			txt lang(name(tc) + "は修行で忙しい。", name(tc) + " is busy training.")
			questteleport = 0
			gosub *screen_draw
			return
		}
	}
	if ( cbit(CHARA_BIT_LIVESTOCK, tc) == 1 & adata(ADATA_ID, gdata(GDATA_AREA)) == AREA_DISCARDED_RANCH ) {
		if ( evnum == 0 ) {
			txt lang(name(tc) + "ははしゃいでいて話を聞かない。", name(tc) + " is ecstatic and doesn't hear you.")
			questteleport = 0
			gosub *screen_draw
			return
		}
	}
	if ( cdata(CDATA_RELATION, tc) <= (-1) ) {
		if ( evnum == 0 ) {
			if ( cbit(CHARA_BIT_LIVESTOCK, tc) != 1 ) {
				txt lang(name(tc) + "は耳を貸さない。", name(tc) + " won't listen.")
				questteleport = 0
				gosub *screen_draw
				return
			}
		}
	}
	if ( gdata(GDATA_HOUR) + gdata(GDATA_DAY) * 24 + gdata(GDATA_MONTH) * 24 * 30 + gdata(GDATA_YEAR) * 24 * 30 * 12 >= cdata(CDATA_INTEREST_RENEW, tc) ) {
		cdata(CDATA_INTEREST, tc) = 100
	}
	if ( cdata(CDATA_ROLE, tc) >= ROLE_SHOP_MIN & cdata(CDATA_ROLE, tc) < ROLE_GUEST_MIN | cdata(CDATA_ROLE, tc) == ROLE_GUEST_MERCHANT ) {
		bkrestock = cdata(CDATA_ROLE_RESTOCK, tc)
		invfile = cdata(CDATA_ROLE_FILE_ID, tc)
		gosub *shop_init
		if ( gdata(GDATA_HOUR) + gdata(GDATA_DAY) * 24 + gdata(GDATA_MONTH) * 24 * 30 + gdata(GDATA_YEAR) * 24 * 30 * 12 >= bkrestock ) {
			if ( cdata(CDATA_ROLE, tc) != ROLE_SHOP_BOOK_RESERVE ) {

				/********** ORIGINAL - BEGINNING **********

				if ( dbg_noautosave == 0 & gdata(GDATA_WIZARD) == 0 ) {

				 ********** ORIGINAL - ENDING **********/

				/********** BLOODYSHADE CUSTOM - BEGINNING **********/ // Re-enable save-scumming.

				if ( ( dbg_noautosave == 0 & gdata(GDATA_WIZARD) == 0 & gdata(GDATA_FLAG_GAME_MODE) != GAMEMODE_PURGE ) | TweakData(TWEAK_GAMEPLAY_ENABLE_SAVE_SCUMMING, TWEAK_CATEGORY_GAMEPLAY) == 0 ) {

				/********** BLOODYSHADE CUSTOM - ENDING **********/

					if ( gdata(GDATA_AREA) != AREA_PET_ARENA & gdata(GDATA_AREA) != AREA_SHOW_HOUSE ) {
						if ( cbit(CHARA_BIT_EVENT_TALK, tc) != 1 ) {
							gosub *game_save
							txtmore
							txtef COLOR_BLUE
							txt_saving
						}
					}
				}
			}
		}
	}
	gosub *chat_refresh
	if ( scenemode == 1 ) {
		goto *chat_scene
	}
	chatval(1) = 0, 1
	if ( cdata(CDATA_QUALITY, tc) == FIX_QUALITY_UNIQUE ) {
		if ( tc >= MAX_CHARA_FOLLOWER ) {
			chatval(1) = cdata(CDATA_ID, tc), 0
		}
	}
	if ( evid() == EVENT_OPENING ) {
		goto *chat_evOpening
	}
	if ( evid() == EVENT_CLIENT_REACHED ) {
		goto *chat_evReached
	}
	if ( cdata(CDATA_CONDITION_SLEEP, tc) != 0 ) {
		chatMore "(" + name(tc) + lang("はぐっすり眠っている…", " is sleeping.") + ")", strbye
		goto *chat_end
	}
	if ( birth != 0 ) {
		chatMore lang(_birth(2), "Happy birthday!")
		snd SOUNDLIST_CLAP2F
		goto *chat_end
	}
	if ( cdata(CDATA_CONDITION_DIM, tc) > 60 ) {
		if ( cdata(CDATA_ID, tc) == CREATURE_ID_ALFRED_THE_CANGNAN_WIND & gdata(GDATA_FLAG_MAIN_CHAOS_CRADLE_25) >= 1000 & gdata(GDATA_AREA) == AREA_CHAOS_CRADLE & cdata(CDATA_ALLIED, tc) == 0 ) {
			cdata(CDATA_CONDITION_DIM, tc) = 0
			chatMore "(" + name(tc) + lang("は錆びた鈴の音に反応して目を開けた", " is stunned.") + ")"
			chatMore lang("この…鈴の音は…ランカータ…？なぜ…ここ…に。いや、違う…！", "Is that a bell I hear... Lankata is that you? Why would he be here...? No wait, it couldn't be!")
		}
	}
	if ( cdata(CDATA_CONDITION_DIM, tc) > 60 ) {
		chatMore "(" + name(tc) + lang("は気絶している…", " is stunned.") + ")", strbye
		goto *chat_end
	}
	if ( cdata(CDATA_ROW_ACT, tc) ) {
		chatMore "(" + name(tc) + lang("はお取り込み中だ…", " is in the middle of something...") + ")", strbye
		goto *chat_end
	}
	if ( cdata(CDATA_ID, tc) == CREATURE_ID_ALFRED_THE_CANGNAN_WIND & gdata(GDATA_AREA) == AREA_CHAOS_CRADLE & gdata(GDATA_LEVEL) == 173 & cdata(CDATA_ALLIED, tc) == 0 ) {
		chatMore lang("誰…ですか…貴方…は？", "W-Who... who are you?")
		chatMore lang("冒険者が…ここまで？私は…どれだけの時間…気絶…していた！？", "An adventurer out here? How much time do I have left before I'll drop?!")
		chatMore lang("私の、身体…ですか？はは…。", "You mean my body? Haha...")
		chatMore lang("次元炉…を無理矢理身体に埋め込んで…反動を…薬物で強化した肉体…で抑え込んでいましたが…この有様ですよ。ぐっ！？", "The dimensional reactor inflicts a state in the body similar to some sort of drug and strengthens it!?")
		chatMore lang("ボロボロに…なった筋肉を…引き裂いて…フレームが嫌な…音を立てていますね…！", "Oww, I'm so worn out and I think pulled a muscle... That frame sure is unpleasant and noisy!")
		if ( gdata(GDATA_FLAG_MAIN_CHAOS_CRADLE_30) == 4 & gdata(GDATA_FLAG_MAIN_CHAOS_CRADLE_25) < 1000 ) {
			goto *chat_unique_lankata
		}
	}
	if ( tc == CHARA_PLAYER ) {
		goto *chat_end
	}
	if ( cbit(CHARA_BIT_EVENT_TALK, tc) ) {
		cbitmod CHARA_BIT_EVENT_TALK, tc, 0
		goto *chat_event
	}
	if ( chatval(1) != 0 ) {
		if ( gdata(GDATA_AREA) != AREA_SHOW_HOUSE ) {
			if ( tc >= MAX_CHARA_FOLLOWER ) {
				goto *chat_unique
			}
		}
	}
	if ( questteleport == 1 ) {
		questteleport = 0
		goto *chat_quest
	}
	buff = ""
	goto *chat_default

*chat_scene
	chatMore buff
	goto *chat_end

*chat_event
	listmax = 0
	cc = CHARA_PLAYER
	gdata(GDATA_GUEST)--
	_switch_val = cdata(CDATA_ROLE, tc)
	if ( _switch_val == ROLE_ADVENTURER | _switch_sw ) {
		_switch_sw = 0
		if ( gdata(GDATA_MONTH) == 1 & rnd(4) ) {
			chatMore lang("明けましておめでとう" + _da(2), "Happy new year!")
			chatMore lang("日ごろの感謝の意をこめてこれをあげる" + _yo(), "I've brought you a gift today, here.")
			flt
			itemcreate -1, ITEM_ID_NEW_YEARS_GIFT, cdata(CDATA_X, CHARA_PLAYER), cdata(CDATA_Y, CHARA_PLAYER), 0
			if ( stat != 0 ) {
				inv(INV_ITEM_PARAM3, ci) = cdata(CDATA_IMPRESSION, tc) + rnd(50)
			}
			txt lang(name(tc) + "は" + itemname(ci, 1) + "を置いていった。", name(tc) + " throws you " + itemname(ci, 1) + ".")
			goto *chat_event_SWEND1
		}
		if ( cdata(CDATA_IMPRESSION, tc) < 25 ) {
			chatMore lang("貴様！見つけた" + _yo(2), "You scum! You won't get away from me now!")
			txt lang("「これでも食らうがいい" + _yo(2) + "」", cnvtalk("Eat this!"))
			if ( rnd(2) == 0 ) {
				repeat 28
					tlocx = cdata(CDATA_X, tc) + rnd(3) - rnd(3)
					tlocy = cdata(CDATA_Y, tc) - rnd(3) + rnd(3)
					if ( tlocx < 0 | tlocy < 0 | tlocx >= mdata(MDATA_WIDTH) | tlocy >= mdata(MDATA_HEIGHT) ) {
						continue
					}
					if ( tlocx == cdata(CDATA_X, tc) ) {
						if ( tlocy == cdata(CDATA_Y, tc) ) {
							continue
						}
					}
					txt lang(name(tc) + "は火炎瓶を投げた。", name(tc) + " throws a molotov.")
					snd SOUNDLIST_THROW2
					ccbk = cc
					cc = tc
					animeid = ANIMATION_THROW
					aniref = 223, 0
					anix = tlocx
					aniy = tlocy
					gosub *anime
					cc = ccbk
					addmef tlocx, tlocy, 5, 24, rnd(15) + 20, 50, tc
					mapitem_fire tlocx, tlocy
				loop
			}
			else {
				repeat 8 + rnd(6)
					flt
					itemcreate -1, ITEM_ID_VOMIT, -1, -1, 0
					txt lang(name(tc) + "は吐いた。", name(tc) + " vomits.")
					snd SOUNDLIST_VOMIT
					await 10
					gosub *screen_draw
				loop
			}
			goto *chat_event_SWEND1
		}
		if ( cdata(CDATA_IMPRESSION, tc) >= 100 ) {
			if ( cbit(CHARA_BIT_TOKEN_FRIEND, tc) == 0 ) {
				if ( inv_getfreeid(-1) != (-1) ) {
					chatMore lang("これ、あげ" + _ru(2), "Here, take this!")
					cbitmod CHARA_BIT_TOKEN_FRIEND, tc, 1
					flt
					itemcreate -1, ITEM_ID_TOKEN_FRIENDSHIP, cdata(CDATA_X, CHARA_PLAYER), cdata(CDATA_Y, CHARA_PLAYER), 0
					txt lang(name(tc) + "に" + itemname(ci, 1) + "をもらった！", "You receive " + itemname(ci, 1) + ".")
					txt lang("友達100人できるかな♪", "I hope I can make 100 friends♪")
					listmax = 0
				}
			}
		}
		if ( rnd(4) == 0 ) {
			if ( cdata(CDATA_IMPRESSION, tc) >= 150 ) {
				advfavoriteskill tc
				csskill = rtval(rnd(stat))
				if ( cdata(CDATA_IMPRESSION, tc) >= 300 ) {
					if ( rnd(3) == 0 ) {
						advfavoritestat tc
						csskill = stat
					}
				}
				if ( sorg(csskill, CHARA_PLAYER) == 0 ) {
					buff = lang(skillname(csskill) + "のスキルを、友達価格の" + calclearncost(csskill, cc, 1) + strplat + "で教えてあげてもいい" + _ga(3) + "どう" + _kana(1), "I can teach you the art of " + skillname(csskill) + " for a friendly price of " + calclearncost(csskill, cc, 1) + "pp. Do you want me to train you?")
					if ( cdata(CDATA_PLATINUM, CHARA_PLAYER) >= calclearncost(csskill, cc, 1) ) {
						chatList 1, lang("習得する", "Teach me the skill.")
					}
				}
				else {
					buff = lang(skillname(csskill) + "のスキルを、友達価格の" + calctraincost(csskill, cc, 1) + strplat + "で訓練してもいい" + _ga(3) + "どう" + _kana(1), "I can train your " + skillname(csskill) + " skill for a friendly price of " + calctraincost(csskill, cc, 1) + "pp. Do you want me to train you?")
					if ( cdata(CDATA_PLATINUM, CHARA_PLAYER) >= calctraincost(csskill, cc, 1) ) {
						chatList 2, lang("訓練する", "Train me.")
					}
				}
				chatList 0, lang("遠慮しとく", "I think I'll pass.")
				chatesc = 1
				gosub *chat_select
				if ( chatval == 0 | chatval == (-1) ) {
					chatMore lang("わかった" + _yo() + "またしばらくしてから尋ねてみ" + _ru(), "I see. I'll ask you again at some time in the future.")
					goto *chat_event_SWEND1
				}
				snd SOUNDLIST_PAYGOLD1
				if ( chatval == 1 ) {
					cdata(CDATA_PLATINUM, CHARA_PLAYER) -= calclearncost(csskill, 0, 1)
					skillgain cc, csskill
					gdata(GDATA_LEARNED)++
					chatMore lang("新しい技術をどうやら習得できたようだ" + _na() + "役に立てて嬉しい" + _yo(), "Fantastic! You've learned the skill in no time. I'm glad I could help.")
				}
				if ( chatval == 2 ) {
					cdata(CDATA_PLATINUM, CHARA_PLAYER) -= calctraincost(csskill, 0, 1)
					modgrowth cc, csskill, 120
					chatMore lang("よし、これで訓練は終わり" + _da() + "かなり潜在能力が伸びた" + _yo(2), "Marvelous! The training is now complete. I think you've improved your potential.")
				}
				goto *chat_event_SWEND1
			}
		}
		if ( rnd(5) == 0 ) {
			if ( cdata(CDATA_IMPRESSION, tc) >= 150 ) {
				chatMore lang("友達の証としてこれをあげ" + _ru(2) + "大事に使って" + _yo(), "As a pledge of friendship, here's something for you!")
				if ( inv_getfreeid(-1) == (-1) ) {
					txt lang("部屋が一杯で置けなかった…", "Your home has no empty spot...")
				}
				else {
					if ( rnd(4) ) {
						p = ITEM_ID_PLATINUM_COIN
					}
					else {
						p = ITEM_ID_SMALL_MEDAL
					}
					flt
					itemcreate -1, p, cdata(CDATA_X, CHARA_PLAYER), cdata(CDATA_Y, CHARA_PLAYER), 0
					txt lang(name(tc) + "に" + itemname(ci, 1) + "をもらった！", "You receive " + itemname(ci, 1) + ".")
					snd SOUNDLIST_GET1
				}
				goto *chat_event_SWEND1
			}
		}
		if ( rnd(4) == 0 ) {
			if ( cdata(CDATA_IMPRESSION, tc) >= 100 ) {
				chatMore lang("近くまで来たので寄ってみた" + _nda() + "ついでだから、土産にこれをあげ" + _ru(), "I just stopped by to see you. Oh, I happen to have a gift for you too.")
				if ( inv_getfreeid(CHARA_PLAYER) == (-1) ) {
					txt lang("所持品が一杯で受け取れなかった…", "Your inventory is full...")
				}
				else {
					flt
					itemcreate 0, ITEM_ID_GIFT, -1, -1, 0
					txt lang(itemname(ci, 1) + "を受け取った。", "You receive " + itemname(ci, 1) + ".")
					snd SOUNDLIST_GET1
				}
				goto *chat_event_SWEND1
			}
		}
		if ( rnd(5) == 0 ) {
			if ( cdata(CDATA_IMPRESSION, tc) >= 100 ) {
				chatMore lang("旅の途中にこんなものを拾った" + _nda() + _kimi(3) + "の役に立つと思って持ってきた" + _yo(), "I found these during my journey. Thought you could find them useful.")
				txt lang(name(tc) + "は色々なものが詰まった袋を、あなたに手渡した。", name(tc) + " gives you a bag full of materials.")
				efid = SKILL_EFFECT_CREATE_MATERIAL
				efp = 100
				tc = CHARA_PLAYER
				gosub *effect
				goto *chat_event_SWEND1
			}
		}
		if ( rnd(8) == 0 ) {
			advfavoriteskill tc
			csskill = rtval(rnd(stat))
			chatMore lang(skillname(csskill) + "は" + _ore(3) + "の得意なスキルの内の一つ" + _da(), "" + skillname(csskill) + " is one of my favorite skills.")
			goto *chat_event_SWEND1
		}
		if ( rnd(10) == 0 ) {
			advfavoritestat tc
			csskill = stat
			chatMore lang(_ore(3) + "は" + skillname(csskill) + "が自慢なの" + _da(), "I'm proud of my good " + skillname(csskill) + ".")
			goto *chat_event_SWEND1
		}
		if ( rnd(3) == 0 ) {
			if ( cdata(CDATA_IMPRESSION, tc) >= 75 ) {
				chatMore lang("やあ。特に用はない" + _ga(3) + "、なんだか暇を持てましていたら、" + _kimi(3) + "と話がしたくなって" + _na(3) + "、寄ってみた" + _nda(), "Hey " + cdatan(CDATAN_NAME, CHARA_PLAYER) + ", how's your journey? I was bored to death so I decided to make a visit to you!")
				txt lang("あなたと" + name(tc) + "は愉快に語り合った！", "You hold an amusing conversation with " + name(tc) + "!")
				modimp tc, 10
				goto *chat_event_SWEND1
			}
		}
		if ( rnd(3) == 0 ) {
			chatMore lang("酒でも飲んで親睦を深めよう" + _yo(2), "Let's have a drink and deepen our friendship!")
			snd SOUNDLIST_DRINK1
			txt lang("あなたと" + name(tc) + "は乾杯した！", cnvtalk("Cheers!"))
			txtef COLOR_SKY_BLUE
			txtmore
			txt lang("「うぃっ！」", "*Hic*"), lang("「うまいぜ」", cnvtalk("Ah, good booze.")), lang("「らららー♪」", cnvtalk("La-la-la-la.")), lang("「ひっく」", cnvtalk("I'm going to heaven.")), lang("「ふぅ」", cnvtalk("Whew!")), lang("「たまらないわ」", cnvtalk("I'm revived!")), lang("「んまっ♪」", cnvtalk("Awesome."))
			dmgcon tc, CONDITION_DRUNK, 1000
			dmgcon cc, CONDITION_DRUNK, 1000
			modimp tc, 15
			goto *chat_event_SWEND1
		}
		chatMore lang("まあ、とくに用もないんだけど" + _na(), "I just wanted to say hi.")
		goto *chat_event_SWEND1
	}
	if ( _switch_val == ROLE_GUEST_TRAINER | _switch_sw ) {
		_switch_sw = 0
		if ( gdata(GDATA_GUILD_TRAINER) == gdata(GDATA_MONTH) ) {
			chatMore lang("今月はもう訓練は終わり" + _da(), "No more training in this month.")
			goto *chat_event_SWEND1
		}
		plat = 3
		gdata(GDATA_GUILD_TRAINER) = gdata(GDATA_MONTH)
		buff = lang(guildname() + "の一員足るもの、ギルドの名に恥じないよう、常に己の技量を磨き続けなければならない" + _yo() + "ギルドの一員である" + _kimi(3) + "には、たったのプラチナ" + plat + "枚で潜在能力を伸ばす訓練を施してあげる" + _yo(), "As a member of " + guildname() + " you have to forge your talent to live up to our reputation. For only " + plat + " platinum coins, I'll improve the potential of your talent.")
		if ( gdata(GDATA_FLAG_GUILD_MAGE) != 0 ) {
			p = SKILL_ATTR_MAG, SKILL_ATTR_WIL, SKILL_ATTR_LER, -1
		}
		else {
			if ( gdata(GDATA_FLAG_GUILD_FIGHTER) != 0 ) {
				p = SKILL_ATTR_STR, SKILL_ATTR_CON, SKILL_ATTR_DEX, -1
			}
			else {
				if ( gdata(GDATA_FLAG_GUILD_THIEF) != 0 ) {
					p = SKILL_ATTR_DEX, SKILL_ATTR_PER, SKILL_ATTR_CON, SKILL_ATTR_LER, -1
				}
				else {
					plat = 4
					p(3) = -1
					i = rnd(6)
					repeat 3
						p(cnt) = 10 + cnt + i
					loop
					buff = lang("鍛えている" + _kana(2) + "冒険者として生き残るには、日ごろの鍛錬が大切" + _da(2) + "わずかプラチナ" + plat + "枚で、潜在能力を伸ばす特別な訓練を施してあげる" + _yo(2), "Training! Training! At the end, only thing that saves your life is training! For only " + plat + " platinum coins, I'll improve the potential of your talent.")
				}
			}
		}
		if ( cdata(CDATA_PLATINUM, CHARA_PLAYER) >= plat ) {
			repeat 8
				if ( p(cnt) == (-1) ) {
					break
				}
				chatList p(cnt), lang(skillname(p(cnt)) + "を鍛える", "I want to improve " + skillname(p(cnt)) + ".")
			loop
		}
		chatList 0, lang("訓練しない", "Not today.")
		gosub *chat_select
		if ( chatval == 0 | chatval == (-1) ) {
			chatMore lang("後悔する" + _yo(2), "You'll regret this!")
			goto *chat_event_SWEND1
		}
		cdata(CDATA_PLATINUM, CHARA_PLAYER) -= plat
		snd SOUNDLIST_DING3
		txtef COLOR_GREEN
		txt lang(name(CHARA_PLAYER) + "の" + skillname(chatval) + "の潜在能力が大きく上昇した。", name(CHARA_PLAYER) + your(CHARA_PLAYER) + " potential of " + skillname(chatval) + " greatly expands.")
		modgrowth CHARA_PLAYER, chatval, 120
		chatMore lang("うむ、なかなか見所がある" + _yo(), "Good. You show a lot of potential.")
		goto *chat_event_SWEND1
	}
	if ( _switch_val == ROLE_GUEST_CITIZEN | _switch_sw ) {
		_switch_sw = 0
		chatMore lang("まあ、とくに用もないんだけど" + _na(), "I just wanted to say hi.")
		goto *chat_event_SWEND1
	}
	if ( _switch_val == ROLE_GUEST_BEGGAR | _switch_sw ) {
		_switch_sw = 0
		if ( cdata(CDATA_GOLD, CHARA_PLAYER) > 0 ) {
			chatList 1, lang("いい", "Yes.")
		}
		chatList 0, lang("だめ", "No.")
		buff = lang("パンを買う金さえない" + _nda() + "恵んで" + _kure(3) + "、おねがい" + _da(2), "I got no money to buy food. Will you spare me some coins?")
		gosub *chat_select
		if ( chatval == 1 ) {
			p = cdata(CDATA_GOLD, CHARA_PLAYER) / 20 + 1
			txt lang("あなたは" + p + "goldを乞食に渡した。", "You spare " + him(tc) + " " + p + "gp.")
			cdata(CDATA_GOLD, CHARA_PLAYER) -= p
			snd SOUNDLIST_PAYGOLD1
			cdata(CDATA_GOLD, tc) += p
			modkarma CHARA_PLAYER, 2
			chatMore lang(_thanks(2) + "この恩は一生忘れない" + _yo(), "Thanks! I'll never forget this.")
			goto *chat_event_SWEND1
		}
		chatMore lang("ケチ！", "You're so cheap!")
		goto *chat_event_SWEND1
	}
	if ( _switch_val == ROLE_GUEST_HALLOWEEN | _switch_sw ) {
		_switch_sw = 0
		tri3 = -1
		tri4 = -1
		tri5 = -1
		tri6 = -1
		tri7 = -1
		tri8 = -1
		tri9 = -1
		tri10 = -1
		item_find ITEM_ID_CARAMEL_OF_TERMINATION, 3, 1
		if ( stat != (-1) ) {
			tri3 = stat
		}
		item_find ITEM_ID_HANDMADE_CHOCOLATE, 3, 1
		if ( stat != (-1) ) {
			tri4 = stat
		}
		item_find ITEM_ID_FORTUNE_COOKIE, 3, 1
		if ( stat != (-1) ) {
			tri5 = stat
		}
		item_find ITEM_ID_ROMIAS, 3, 1
		if ( stat != (-1) ) {
			tri6 = stat
		}
		item_find ITEM_ID_VERNIS_ORIGINAL, 3, 1
		if ( stat != (-1) ) {
			tri7 = stat
		}
		item_find ITEM_ID_ACORN, 4, 1
		if ( stat != (-1) ) {
			tri8 = stat
		}
		item_find ITEM_ID_CHESTNUT, 4, 1
		if ( stat != (-1) ) {
			tri9 = stat
		}
		item_find ITEM_ID_API_NUT, 4, 1
		if ( stat != (-1) ) {
			tri10 = stat
		}
		if ( tri10 != (-1) ) {
			chatList 10, lang(itemname(tri10, 1) + "をあげる", "Here, take my " + itemname(tri10, 1) + ".")
		}
		if ( tri9 != (-1) ) {
			chatList 9, lang(itemname(tri9, 1) + "をあげる", "Here, take my " + itemname(tri9, 1) + ".")
		}
		if ( tri8 != (-1) ) {
			chatList 8, lang(itemname(tri8, 1) + "をあげる", "Here, take my " + itemname(tri8, 1) + ".")
		}
		if ( tri7 != (-1) ) {
			chatList 7, lang(itemname(tri7, 1) + "をあげる", "Here, take my " + itemname(tri7, 1) + ".")
		}
		if ( tri6 != (-1) ) {
			chatList 6, lang(itemname(tri6, 1) + "をあげる", "Here, take my " + itemname(tri6, 1) + ".")
		}
		if ( tri5 != (-1) ) {
			chatList 5, lang(itemname(tri5, 1) + "をあげる", "Here, take my " + itemname(tri5, 1) + ".")
		}
		if ( tri4 != (-1) ) {
			chatList 4, lang(itemname(tri4, 1) + "をあげる", "Here, take my " + itemname(tri4, 1) + ".")
		}
		if ( tri3 != (-1) ) {
			chatList 3, lang(itemname(tri3, 1) + "をあげる", "Here, take my " + itemname(tri3, 1) + ".")
		}
		chatList 2, lang("イタズラされる", "Trick.")
		chatList 1, lang("イタズラする", "Treat.")
		buff = lang(_trick(3), "Trick or Treat?")
		chatesc = 0
		gosub *chat_select
		if ( chatval >= 3 & chatval <= 10 ) {
			if ( chatval == 3 ) {
				inv(INV_ITEM_NUM, tri3)--
			}
			if ( chatval == 4 ) {
				inv(INV_ITEM_NUM, tri4)--
			}
			if ( chatval == 5 ) {
				inv(INV_ITEM_NUM, tri5)--
			}
			if ( chatval == 6 ) {
				inv(INV_ITEM_NUM, tri6)--
			}
			if ( chatval == 7 ) {
				inv(INV_ITEM_NUM, tri7)--
			}
			if ( chatval == 8 ) {
				inv(INV_ITEM_NUM, tri8)--
			}
			if ( chatval == 9 ) {
				inv(INV_ITEM_NUM, tri9)--
			}
			if ( chatval == 10 ) {
				inv(INV_ITEM_NUM, tri10)--
			}
			chatMore lang("わーい！", "Yeah!"), lang("ハッピーハロウィン！", "Happy Halloween!")
			chatMore lang("コレあげ" + _ru(2), "As a pledge of friendship, here's something for you!")
			if ( inv_getfreeid(-1) == (-1) ) {
				txt lang("部屋が一杯で置けなかった…", "Your home has no empty spot...")
			}
			else {
				flt
				itemcreate -1, ITEM_ID_JACK_LANTERN, cdata(CDATA_X, CHARA_PLAYER), cdata(CDATA_Y, CHARA_PLAYER), 0
				txt lang(itemname(ci, 1) + "をもらった！", "You receive " + itemname(ci, 1) + ".")
				snd SOUNDLIST_GET1
			}
		}
		if ( chatval == 2 ) {
			txt lang("「これでも食らうがいい" + _yo(2) + "」", cnvtalk("Eat this!"))
			repeat 28
				tlocx = cdata(CDATA_X, tc) + rnd(3) - rnd(3)
				tlocy = cdata(CDATA_Y, tc) - rnd(3) + rnd(3)
				if ( tlocx < 0 | tlocy < 0 | tlocx >= mdata(MDATA_WIDTH) | tlocy >= mdata(MDATA_HEIGHT) ) {
					continue
				}
				if ( tlocx == cdata(CDATA_X, tc) ) {
					if ( tlocy == cdata(CDATA_Y, tc) ) {
						continue
					}
				}
				txt lang(name(tc) + "は火炎瓶を投げた。", name(tc) + " throws a molotov.")
				snd SOUNDLIST_THROW2
				ccbk = cc
				cc = tc
				animeid = ANIMATION_THROW
				aniref = 223, 0
				anix = tlocx
				aniy = tlocy
				gosub *anime
				cc = ccbk
				addmef tlocx, tlocy, 5, 24, rnd(15) + 20, 50, tc
				mapitem_fire tlocx, tlocy
			loop
		}
		if ( chatval == 1 ) {
			chatMore lang("ひっ…ガード！ガード！", "Ouch... Guards! Guards!"), lang("おやおや", "Come on!")
			modkarma CHARA_PLAYER, -2
		}
		cdata(CDATA_ROLE, tc) = ROLE_GUEST_CITIZEN
		cdata(CDATA_RELATION, tc) = -1
		goto *chat_event_SWEND1
	}
	if ( _switch_val == ROLE_GUEST_SEX | _switch_sw ) {
		_switch_sw = 0
		chatList 1, lang("いい", "Yes.")
		chatList 0, lang("だめ", "No.")
		buff = lang("フッ。よく逃げ出さずに戻ってきた" + _na() + "準備はいいか。", "So, are you ready?")
		gosub *chat_select
		if ( chatval == 1 ) {
			chatMore lang("いく" + _yo(2), "Okay, no turning back now!"), lang("うふふ", "Come on!")
			gosub *sexsex
			goto *chat_event_SWEND1
		}
		chatMore lang("ふん！", "Hump!")
		goto *chat_event_SWEND1
	}
	if ( _switch_val == ROLE_GUEST_PRODUCER | _switch_sw ) {
		_switch_sw = 0
		chatList 1, lang("いい", "Yes.")
		chatList 0, lang("だめ", "No.")
		buff = lang("スターになりたい" + _kana(1), "You want to be a star?")
		gosub *chat_select
		if ( chatval == 1 ) {
			chatMore lang("よい心がけだ" + _na(2), "Okay, no turning back now!"), lang("うふふ", "Come on!")
			gosub *sexsex
			goto *chat_event_SWEND1
		}
		chatMore lang("ふん！", "Hump!")
		goto *chat_event_SWEND1
	}
	if ( _switch_val == ROLE_GUEST_MERCHANT | _switch_sw ) {
		_switch_sw = 0
		chatList 0, lang("買いたい", "I want to buy something.")
		chatList 1, lang("売りたい", "I want to sell something.")
		chatList 2, lang("今はいい", "Not now.")
		buff = lang("今日は" + _kimi(3) + "の幸運な日" + _da() + "普段は一般の客には売らない格安の品を、特別に見せてあげ" + _ru() + "覚えておいて" + _kure(3) + "、今日だけだ" + _yo(), "This is your lucky day. I wouldn't normally show my discounted goods to commoners but since I feel so good today...")
		gosub *chat_select
		if ( chatval == 0 ) {
			invctrl = 11
			invfile = cdata(CDATA_ROLE_FILE_ID, tc)
			gosub *shop
			screenupdate = -1
			gosub *screen_draw
			cs = 0
			buff = ""
			goto *chat_event
		}
		if ( chatval == 1 ) {
			invctrl = 12
			invfile = cdata(CDATA_ROLE_FILE_ID, tc)
			gosub *shop
			cc = CHARA_PLAYER
			screenupdate = -1
			gosub *screen_draw
			cs = 0
			buff = ""
			goto *chat_event
		}
		chatMore lang("後になって後悔しても知らない" + _yo(), "I hope you won't regret it later.")
		cdata(CDATA_ROLE, tc) = ROLE_GUEST_CITIZEN
		goto *chat_event_SWEND1
	}
*chat_event_SWEND1
	goto *chat_end

*chat_unique
	listmax = 0
	_switch_val = chatval(1)
	if ( _switch_val == CREATURE_ID_ZEOME_THE_FALSE_PROPHET | _switch_sw ) {
		_switch_sw = 0
		if ( gdata(GDATA_AREA) == AREA_AMUR_CAGE ) {
			chatMore lang("礼を言うぞ…この地と神々については常闇の眼でも知り得なかったことだ。果たしてお前達に《混沌》を止めることができるのか見物させてもらおう。それにしても…奴はなぜここにいない…？", "Thank you... I could not even know about this land and the gods with the <Origin of Vice>. Let's see if you can stop <Chaos>. Anyway... why isn't he here...?")
			goto *chat_end
		}
		else {
			chatMore lang("ここまで辿り着くとはな…どうやら《混沌》は、自ら創りしネフィアの安定さえも望まぬらしい。しかし、私とてここで死ぬつもりなどないのだ。", "So, you've made it this far. Evidently, <Chaos> wants no stability even within their own creation... Nefia. Well, it seems they have left me no choice but to whip you!")
			gdata(GDATA_FLAG_MAIN) = 170
			goto *chat_end
		}
		goto *chat_end
	}
	if ( _switch_val == CREATURE_ID_ORPHE_THE_CHAOS_CHILD | _switch_sw ) {
		_switch_sw = 0
		if ( evid() == EVENT_WIN_LESIMAS ) {
			chatMore lang("ああ、聡明なるレシマスの常闇の眼よ！ 新しい主は、どうやらお前の本当の価値を知らないようだぞ。…だが、心配しなくてもいい。この" + _sex(cdata(CDATA_SEX, CHARA_PLAYER)) + "は、そこで死んでいる老人のように、たまに本を開いては下界の嘘に満ちた歴史を嘲笑い、自己満足にふける以外の使い方を、きっと見つけてくれるだろう。", "Oh omnipotent Lesimas' <Origin of Vice>! It seems your new master knows not your true worth... But don't worry. While your former master was content to gaze upon your pages and sneer at peoples' lies, this one will doubtless find a more interesting use for your powers...")
			chatMore lang("(青年は見下したような笑い声をあげ、あなたに向き直った) さあ、これ以上愚かな詮索の表情を続けて私を落胆させないでくれ。お前が眺めている本には、真実の歴史を刻み、過去の文明の歩みを記録する魔力が秘められていると知ったのなら。", "(The young man laughs haughtily and turns toward you.) Now, please, stop looking at me with that foolish questioning gaze. The book you see here contains the true history of this world, recorded by the magical power of an ancient civilization.")
			chatMore lang("そう。この本に書かれていることは、全て偽りなき歴史。シエラ・テールの、そして過去の偉大なる文明の栄光と衰退の軌跡が記されている。その価値を、わざわざ説明する必要もあるまい？", "Yes, this book contains this world's complete and unvarnished history. The glory and decline of Sierre Terre, Rehm-Ido, Eyth Terre, and all the great civilizations of the past are written within. I trust you understand the value of that?")
			chatMore lang("ひとつ警告しよう。台座から離れた時、それは魔力を失い、変哲の無い一冊の本と化すのだ。新たな歴史が刻まれることはなく、正当性を証明するすべもなくなるだろう。", "One warning: if removed from its pedestal, it loses its magic and becomes an ordinary book. No new history will be recorded and there will be no proof of its legitimacy.")
			chatMore lang("本を所有する者はまた、偽りの歴史を動かす勢力から、自らの命を守る必要にも迫られるだろう。このアーティファクトには、それだけの価値があるということだ。そしてお前には…エレアの風を聴く者と出会い、言葉を交じあわせたお前には…それがどれほどの意味を持つことか、理解していなくてもだ…そうだな、少なくとも我々を楽しませてくれるような使い方を期待しているよ。", "Those who safeguard this book will be targeted by those who falsify history, since it would be their undoing. Also, you... who met and spoke with the Elea, Listener of Wind... What meaning that has, even if you don't understand... Yes, that's right, you'll at least entertain me...")
			chatMore lang("もちろん、本を下界に持ち出すかどうかはお前次第だ…少なくとも、選択という行為に、私が予期できない偶然がある可能性を、お前が信じるのなら。", "Of course if you wish to bring the book to your lower world, that's your choice... That is, if you believe that you can make a choice I have not already foreseen...")
			goto *chat_end
		}
		goto *chat_unique_SWEND1
	}
	if ( _switch_val == CREATURE_ID_WHOM_DWELL_IN_THE_VANITY | _switch_sw ) {
		_switch_sw = 0
		chatMore lang("よそへいってくれ…", "Leave me alone."), strbye
		goto *chat_end
	}
	if ( _switch_val == CREATURE_ID_LOYTER_THE_CRIMSON_OF_DOLE | _switch_sw ) {
		_switch_sw = 0
		if ( gdata(GDATA_FLAG_MAIN) >= 780 ) {
			chatList 0, lang("独り言を聴く", "Let's talk.")
			chatList 1, lang("記憶の灯を使う", "Use Light of Memory.")
			buff = lang("…。", "...")
			gosub *chat_select
			if ( chatval == 1 ) {
				if ( gdata(GDATA_FLAG_DUEL_TARGET) > 0 ) {
					snd SOUNDLIST_FAIL1
					txt_duel2
					goto *chat_end
				}
				txt lang("記憶の灯から暖かい光が広がる…。", "Light of Memory emits a warm light...")
				animeid = ANIMATION_GAMEWIN3
				gosub *anime
				if ( cdata(CDATA_ID, tc) == CREATURE_ID_LOYTER_THE_CRIMSON_OF_ZANAN ) {
					gdata(GDATA_TELEPORT_AREA) = AREA_AIMWELL
				}
				if ( cdata(CDATA_ID, tc) == CREATURE_ID_LOYTER_THE_CRIMSON_OF_DOLE ) {
					gdata(GDATA_TELEPORT_AREA) = AREA_NORTH_TYRIS
				}
				gdata(GDATA_TELEPORT_LEVEL) = 1
				levelexitby = 4
				prevsekai = gdata(GDATA_WORLD)
				if ( cdata(CDATA_ID, tc) == CREATURE_ID_LOYTER_THE_CRIMSON_OF_ZANAN ) {
					gdata(GDATA_WORLD_RENEW) = 1
					gdata(GDATA_WORLD) = AREA_AIMWELL
					gdata(GDATA_WORLD_X) = adata(ADATA_X, AREA_ZAILE), adata(ADATA_Y, AREA_ZAILE)
				}
				if ( cdata(CDATA_ID, tc) == CREATURE_ID_LOYTER_THE_CRIMSON_OF_DOLE ) {
					gdata(GDATA_WORLD_RENEW) = 1
					gdata(GDATA_WORLD) = AREA_NORTH_TYRIS
					gdata(GDATA_WORLD_X) = adata(ADATA_X, AREA_VERNIS), adata(ADATA_Y, AREA_VERNIS)
				}
				fixtransfermap = 1
				chatteleport = 1
				goto *chat_end
			}
			kaiwa = rnd(5)
			if ( kaiwa == 0 ) {
				chatMore lang("ユーリ…せめて貴様が首を吊らなければな。おおかた獣に喰われてアリシアを忘れるのを恐れたのだろうが…。ザレッタは今でもあの場所で、貴様のことを心配しているだろうよ…！", "Yuri... you should be hanged, or worse. I fear you have even forgotten Alicia, eaten by wild animals. Even now, back there, Zaletta still worries over you!")
			}
			if ( kaiwa == 1 ) {
				chatMore lang("大丈夫だ、ドールのことをまだ全部は忘れていない…。つまり国はどうにか持ちこたえているということだ。", "It’s alright, not all of Dole has been forgotten. Ultimately, the nation will endure one way or another.")
			}
			if ( kaiwa == 2 ) {
				chatMore lang("こんなことになるのなら、ドールを発つ前にザレッタと話をしておくべきだった。…そうか。まだ俺はあいつに未練があったのか。我ながら女々しいことだ。", "If it’s come to this, then I should have talked with Zaletta before I left Dole. Oh, is that so?... I still had some feelings left after all? How feminine of me.")
			}
			if ( kaiwa == 3 ) {
				chatMore lang("今思えばオズム皇子はエルシアを共通の敵に仕立て上げるのが目的のようだった。青髪のルーファスと結託して何か企んでいたのかもしれん。だが今となってはもうどうでもいいことだ…。", "If memory serves, Prince Ozmu aimed to set up the elsians as a common enemy. He conspired with Rufus of the Blue Hair to form some sort of scheme, perhaps. But as for what came of that, none of it matters now...")
			}
			if ( kaiwa == 4 ) {
				chatMore lang("まさか、このような田舎の町で白い鷹が死に、紅血も死を待つだけになるとはな。おいユーリ…俺たちの歯車はどこで狂ってしまったんだろうな？", "Unbelievable, that in a backwater village like this, with the White Hawk dead, the crimson would simply wait to die. It can’t be possible. Hey Yuri... somewhere, did our gears go askew?")
			}
			chatMore lang("…なんだお前は？じろじろ見るな。うせろ。", "...What's with you? Quit staring. Beat it."), strbye
		}
		goto *chat_end
	}
	if ( _switch_val == CREATURE_ID_LOYTER_THE_CRIMSON_OF_ZANAN | _switch_sw ) {
		_switch_sw = 0
		if ( gdata(GDATA_FLAG_MAIN) >= 780 ) {
			chatList 0, lang("話がしたい", "Let's talk.")
			chatList 1, lang("記憶の灯を使う", "Use Light of Memory.")
			buff = lang("…。", "...")
			gosub *chat_select
			if ( chatval == 1 ) {
				if ( gdata(GDATA_FLAG_DUEL_TARGET) > 0 ) {
					snd SOUNDLIST_FAIL1
					txt_duel2
					goto *chat_end
				}
				txt lang("記憶の灯から暖かい光が広がる…。", "The Light of Memory emits a warm light...")
				animeid = ANIMATION_GAMEWIN3
				gosub *anime
				if ( cdata(CDATA_ID, tc) == CREATURE_ID_LOYTER_THE_CRIMSON_OF_ZANAN ) {
					gdata(GDATA_TELEPORT_AREA) = AREA_AIMWELL
				}
				if ( cdata(CDATA_ID, tc) == CREATURE_ID_LOYTER_THE_CRIMSON_OF_DOLE ) {
					gdata(GDATA_TELEPORT_AREA) = AREA_NORTH_TYRIS
				}
				gdata(GDATA_TELEPORT_LEVEL) = 1
				levelexitby = 4
				prevsekai = gdata(GDATA_WORLD)
				if ( cdata(CDATA_ID, tc) == CREATURE_ID_LOYTER_THE_CRIMSON_OF_ZANAN ) {
					gdata(GDATA_WORLD_RENEW) = 1
					gdata(GDATA_WORLD) = AREA_AIMWELL
					gdata(GDATA_WORLD_X) = adata(ADATA_X, AREA_ZAILE), adata(ADATA_Y, AREA_ZAILE)
				}
				if ( cdata(CDATA_ID, tc) == CREATURE_ID_LOYTER_THE_CRIMSON_OF_DOLE ) {
					gdata(GDATA_WORLD_RENEW) = 1
					gdata(GDATA_WORLD) = AREA_NORTH_TYRIS
					gdata(GDATA_WORLD_X) = adata(ADATA_X, AREA_VERNIS), adata(ADATA_Y, AREA_VERNIS)
				}
				fixtransfermap = 1
				chatteleport = 1
				goto *chat_end
			}
		}
		if ( cdata(CDATA_FAME, CHARA_PLAYER) < 20000 ) {
			chatMore lang("邪魔だ。話しかけるな。", "Don't talk to me. You're in my way."), strbye
			goto *chat_end
		}
		if ( gdata(GDATA_FLAG_SUB_NIGHTMARE) >= 1000 ) {
			chatMore lang("気安く声をかけるな。", "Don't speak to me like we're friends.")
			if ( gdata(GDATA_FLAG_SUB_NIGHTMARE) == 1000 ) {
				item_find ITEM_ID_RESEARCHERS_DIARY, 3, 1
				if ( stat != (-1) ) {
					ci = stat
					if ( inv(INV_ITEM_NUM, ci) >= 1 ) {
						chatList 1, lang("立ち去る", "(Leave)")
						chatList 0, lang("研究員の閻魔帳を読ませる", "Read this diary.")
						buff = lang("…離れろ。しつこいぞ。", "...Leave me alone. Damned pest.")
						gosub *chat_select
						if ( chatval != 0 ) {
							goto *chat_end
						}
						chatMore lang("このノートを読めと？…読んだらすぐに消えろ。", "You want me to read this? ...Fine, but you'd better get the hell out of my face afterwards.")
						await 100
						snd SOUNDLIST_BOOK1
						chatMore lang("これは…。", "This is...")
						snd SOUNDLIST_BOOK1
						await 100
						snd SOUNDLIST_BOOK1
						chatMore lang("この件は既に解決している。所員は施設内で全員死亡、一人逃げた所長も「処分」済みだ。被験者とこの研究員の遺族には軍から賠償金が払われ、他の研究施設もしかるべき管理体制に移行した。", "The matter has already been resolved. All of the staff members were killed in the facility. The only survivor was the president, and he's already been \"disposed\" of.")
						chatMore lang("以上だ。貴様の介入する余地はない。わかったら消えろ。", "It's over. There's no chance to change anything. Now get out of here.")
						gdata(GDATA_FLAG_SUB_NIGHTMARE) = 1001
					}
				}
				goto *chat_end
			}
			goto *chat_end
		}
		if ( gdata(GDATA_FLAG_SUB_NIGHTMARE) == 0 ) {
			chatMore lang("おい、ちょっと待て。貴様の面には見覚えがある…" + cdatan(CDATAN_AKA, CHARA_PLAYER) + "…といったか？最近、このティリスの地で名を上げているそうじゃないか。", "Hey you! Hold up! I've seen your face before punk... " + cdatan(CDATAN_AKA, CHARA_PLAYER) + "... Ah yes... I remember now. You've been making quite a name for yourself throughout Tyris, haven't you?")
			chatList 1, lang("話を聞こう", "Fine, let's do it.")
			chatList 0, lang("止めておこう", "Not a chance, you worm.")
			buff = lang("貴様に金になる仕事をやろう。ザナンのある機関からの要望で、実験のデータをとるために被験者が必要なのだ。俺に言わせれば、被験者というより『生贄』だがな。生き延びて戻ってくれば、老後を遊んで暮らせるだけの報酬はくれてやる。どうするかこの場で決めろ。", "You wanna make some quick cash? I've got a request from the organization of Zanan. They need a test subject in order to get some experimental data. Or perhaps \"sacrifice\" would be a more appropriate term. *If* you survive, I'll pay you enough to party until you waste away. Make your decision quickly.")
			gosub *chat_select
			if ( chatval != 1 ) {
				chatMore lang("骨のないやつだ。うせろ。", "Fine then, piss off you spineless coward."), strbye
				goto *chat_end
			}
			txt_questupdate
			chatMore lang("いいだろう。死ぬ準備ができたら、声をかけろ。実験場まで案内してやろう。", "Excellent. Let me know when you've finished your preparations for death and I'll take you to the testing grounds."), strbye
			gdata(GDATA_FLAG_SUB_NIGHTMARE) = 1
			goto *chat_end
		}
		if ( gdata(GDATA_FLAG_SUB_NIGHTMARE) == 1 | gdata(GDATA_FLAG_SUB_NIGHTMARE) == 2 ) {
			chatList 1, lang("いい", "Yes.")
			chatList 0, lang("だめ", "No.")
			buff = lang("フッ。よく逃げ出さずに戻ってきたな。準備はいいか。", "So, are you ready?")
			gosub *chat_select
			if ( chatval != 1 ) {
				chatMore lang("早くしろ。", "Be quick."), strbye
				goto *chat_end
			}
			if ( gdata(GDATA_FLAG_DUEL_TARGET) > 0 ) {
				snd SOUNDLIST_FAIL1
				txt_duel2
				goto *chat_end
			}
			txt_questupdate
			chatMore lang("よし…付いて来い。", "Follow me."), strbye
			gdata(GDATA_FLAG_SUB_NIGHTMARE) = 2
			mdata(MDATA_DOWNSTAIRS_POS) = cdata(CDATA_Y, CHARA_PLAYER) * 1000 + cdata(CDATA_X, CHARA_PLAYER)
			gdata(GDATA_TELEPORT_AREA) = AREA_VERNIS
			gdata(GDATA_TELEPORT_LEVEL) = 5
			levelexitby = 2
			gdata(GDATA_LEVEL_START_ON) = 7
			mapstartx = 6
			mapstarty = 27
			chatteleport = 1
			goto *chat_end
		}
		if ( gdata(GDATA_FLAG_SUB_NIGHTMARE) == 3 ) {
			flt
			nostack = 1
			itemcreate -1, ITEM_ID_MATERIAL_KIT, cdata(CDATA_X, CHARA_PLAYER), cdata(CDATA_Y, CHARA_PLAYER), 0
			inv(INV_ITEM_MATERIAL, ci) = ITEM_MATERIAL_RUBYNUS
			flt
			itemcreate -1, ITEM_ID_GOLD_PIECE, cdata(CDATA_X, CHARA_PLAYER), cdata(CDATA_Y, CHARA_PLAYER), 100000
			flt
			itemcreate -1, ITEM_ID_PLATINUM_COIN, cdata(CDATA_X, CHARA_PLAYER), cdata(CDATA_Y, CHARA_PLAYER), 5
			txt_questcompleted
			txtmore
			txt_questitem
			txt_questupdate
			chatMore lang("驚いた。この実験から生きて帰って来た冒険者は、貴様がはじめてだ。これで、ザナンの上層部が、研究を見直してくれるといいが。あんな不細工な化け物を率いて戦場を駆け回るのは、御免だからな。", "You came back alive... astonishing. You're the first and I swear you'll be the last. Zanan's senior commanders should find this data most intriguing. I do not want such a clumsy beast watching my back on the battlefield."), strbye
			gdata(GDATA_FLAG_SUB_NIGHTMARE) = 1000
			goto *chat_end
		}
		goto *chat_end
	}
	if ( _switch_val == CREATURE_ID_MICHES_THE_APPRENTICE | _switch_sw ) {
		_switch_sw = 0
		if ( gdata(GDATA_FLAG_SUB_SLIME) == 1000 ) {
			chatMore lang("あら、冒険者さん♪ お茶でもいかが？", "Hi there adventurer! Would you like some tea?"), strbye
			goto *chat_end
		}
		if ( gdata(GDATA_FLAG_SUB_SLIME) == 0 ) {
			chatMore lang("あら、冒険者さん。ちょうどいいところに来てくれたわ。", "Ah, you... adventurer, you've definitely come to the right place.")
			chatList 1, lang("引き受ける", "Sure thing.")
			chatList 0, lang("面倒だ", "Not now.")
			buff = lang("最近、朝起きると私のぬいぐるみがぼろぼろになっているの。夜中に起きてこっそり見張ってたらね、なんとプチ…プチがぬいぐるみ食べてるのよ！どうも隣の家の窓を伝って、私の家に入ってくるみたいなの。冒険者さん、お願いだから、ちょっと行って退治してきてくれない？", "Recently, when I wake in the morning my stuffed toys are always chewed up. So I stayed up last night and secretly watched. You know what I found? Putits were chewing up my stuffed animals! I'm pretty sure they're getting into my house through the window to the neighbor's place. I beg of you adventurer, won't you eradicate the Putits for me?")
			gosub *chat_select
			if ( chatval != 1 ) {
				chatMore lang("気が変わったら、また来てね。", "Okay... but... if you change your mind please come back."), strbye
				goto *chat_end
			}
			txt_questupdate
			chatMore lang("頼もしいよ。問題の家は、すぐ南に隣接しているわ。頑張ってね！", "Fabulous! The trouble is all in the house just south of here."), strbye
			gdata(GDATA_FLAG_SUB_SLIME) = 1
			goto *chat_end
		}
		if ( gdata(GDATA_FLAG_SUB_SLIME) == 1 ) {
			chatMore lang("やだ！このぬいぐるみもプチに食べられてる。冒険者さん、はやく退治お願いね。", "Aggh! My stuffed toys are ruined! Hurry up and kill the Putits!"), strbye
			goto *chat_end
		}
		if ( gdata(GDATA_FLAG_SUB_SLIME) == 2 ) {
			flt calcobjlv(10), calcfixlv(FIX_QUALITY_GREAT)
			itemcreate -1, ITEM_ID_SMALL_SHIELD, cdata(CDATA_X, CHARA_PLAYER), cdata(CDATA_Y, CHARA_PLAYER), 0
			flt calcobjlv(10), calcfixlv(FIX_QUALITY_GREAT)
			itemcreate -1, ITEM_ID_GIRDLE, cdata(CDATA_X, CHARA_PLAYER), cdata(CDATA_Y, CHARA_PLAYER), 0
			flt
			itemcreate -1, ITEM_ID_GOLD_PIECE, cdata(CDATA_X, CHARA_PLAYER), cdata(CDATA_Y, CHARA_PLAYER), 3000
			flt
			itemcreate -1, ITEM_ID_PLATINUM_COIN, cdata(CDATA_X, CHARA_PLAYER), cdata(CDATA_Y, CHARA_PLAYER), 2
			txt_questcompleted
			txtmore
			txt_questitem
			txt_questupdate
			chatMore lang("え、スライムを退治してくれたの？ありがとうございます♪あたしのぬいぐるみたちも喜んでるわ。これ、役に立つかわからないけど、とっておいてね。", "Eh? You wiped out the slimes? Thanks so much. My stuffed animals are delighted too. Here, you might find this useful."), strbye
			gdata(GDATA_FLAG_SUB_SLIME) = 1000
			goto *chat_end
		}
		goto *chat_unique_SWEND1
	}
	if ( _switch_val == CREATURE_ID_SHENA_THE_DRAW | _switch_sw ) {
		_switch_sw = 0
		if ( gdata(GDATA_FLAG_SUB_ROGUE) == 1000 ) {
			chatMore lang("いらっしゃいませ〜♪その節はどうもです。", "Oh it's you, our hero."), strbye
			goto *chat_end
		}
		if ( gdata(GDATA_FLAG_SUB_ROGUE) == 0 ) {
			chatMore lang("いらっしゃいませ〜♪", "Welcome back♪")
			chatList 1, lang("引き受ける", "I'd be happy to help.")
			chatList 0, lang("面倒だ", "Don't bother me.")
			buff = lang("ちょっとお時間いいですか？バーの酒樽が度々盗まれて、店長困ってるんです。もし手が空いていたら、助けてくださいな。盗みを働いている輩の目星はついています。きっと、ヴェルニースを拠点に活動している、こそ泥の集団です！拠点は確か墓の方にあったはずですよ。", "Excuse me, do you have a moment? The kegs from the bar have been stolen, and the manager is really put out. If you're not busy, could you help out? It was those thugs, I'm sure of it. They've certainly set up a base inside Vernis. With all the mud they leave behind, they're most likely hanging out near the gravesite.")
			gosub *chat_select
			if ( chatval != 1 ) {
				chatMore lang("そうですか…残念です。", "Alright, but please... think about it."), strbye
				goto *chat_end
			}
			txt_questupdate
			chatMore lang("あ…ありがとうございます！よろしくお願いしますね！", "Really? Thanks, we really appreciate it."), strbye
			gdata(GDATA_FLAG_SUB_ROGUE) = 1
			cell_featset 48, 5, tile_downstairs, CELL_FEATURE_DOWNSTAIRS, 4
			goto *chat_end
		}
		if ( gdata(GDATA_FLAG_SUB_ROGUE) == 1 ) {
			chatMore lang("いらっしゃいませ〜♪盗賊団の拠点はみつかりましたか？墓の近くにあるみたいですよ。", "Welcome! Welcome! Have you found the bandits' lair yet? It should be near the graveyard."), strbye
			goto *chat_end
		}
		if ( gdata(GDATA_FLAG_SUB_ROGUE) == 2 ) {
			flt
			itemcreate -1, ITEM_ID_ROD_IDENTIFY, cdata(CDATA_X, CHARA_PLAYER), cdata(CDATA_Y, CHARA_PLAYER), 0
			inv(INV_ITEM_CHARGE, ci) = 12
			flt
			nostack = 1
			itemcreate -1, ITEM_ID_MONSTER_BALL, cdata(CDATA_X, CHARA_PLAYER), cdata(CDATA_Y, CHARA_PLAYER), 0
			inv(INV_ITEM_PARAM2, ci) = 5
			flt
			itemcreate -1, ITEM_ID_GOLD_PIECE, cdata(CDATA_X, CHARA_PLAYER), cdata(CDATA_Y, CHARA_PLAYER), 1500
			flt
			itemcreate -1, ITEM_ID_PLATINUM_COIN, cdata(CDATA_X, CHARA_PLAYER), cdata(CDATA_Y, CHARA_PLAYER), 2
			txt_questcompleted
			txtmore
			txt_questitem
			txt_questupdate
			chatMore lang("ええ、噂はもう届いています。あのごろつき団がいなくなって、私達ほんと安心しました。ありがとうございます。少ないですが、店長がお礼にとこれを♪", "Yes, I've already gotten wind of your deeds. It's a big relief to be rid of those miscreants. I can't thank you enough. I know it isn't much, but please take this as a token of our thanks."), strbye
			gdata(GDATA_FLAG_SUB_ROGUE) = 1000
			goto *chat_end
		}
		goto *chat_unique_SWEND1
	}
	if ( _switch_val == CREATURE_ID_LARNNEIRE_THE_LISTENER_OF_WIND | _switch_sw ) {
		_switch_sw = 0
		if ( gdata(GDATA_AREA) == AREA_ULM_LESON ) {
			if ( gdata(GDATA_FLAG_MAIN) >= 760 ) {
				chatMore lang("ヴェセル…。", "Bethel...")
			}
			else {
				if ( gdata(STARTING_GDATA_FLAG + 319) == 2 ) {
					chatMore lang("あなたを見た時は驚いたわ。でもよく考えると、腕の立つ冒険者なのだからロストイルヴァを冒険していてもおかしくないのよね。", "I was surprised when I first saw you, but when I think about it, seeing an adventurer in Lost Ylva isn't that strange.")
				}
				if ( gdata(STARTING_GDATA_FLAG + 319) == 1 ) {
					chatMore lang("あなたは…もしかして" + cdatan(CDATAN_NAME, CHARA_PLAYER) + "？", "Are you " + cdatan(CDATAN_NAME, CHARA_PLAYER) + " by any chance?")
					chatMore lang("ごめんなさい、別人のように見えてしまって気づかなかったの。また会えて嬉しいわ。メルガスでメシェーラを研究していた時以来ね。", "Forgive me, I was looking at someone else and didn't notice. I'm glad to see you again though. Melugast has been researching the Meshera since last time.")
					chatMore lang("あれから私達は異形の森の復興に尽力していたのだけれど、ヴェセルを捜しにここまで来たの。もし彼を見かけたら私達がここで待っていることを伝えて欲しいわ。", "After that, we came here to help with restoring the Heretical Forest and searching for Bethel. If you happen to see him I'd like you to come back here and tell us.")
					gdata(STARTING_GDATA_FLAG + 319) = 2
				}
			}
			goto *chat_end
		}
		chatList 3, lang("旅の目的", "What's your mission?")
		chatList 2, lang("ノースティリスについて", "Tell me about North Tyris.")
		chatList 1, lang("獣に変えられた王子の童話", "You mentioned a fairy tale.")
		chatList 0, strbye
		buff = lang("無事に意識が戻ってよかったわ。あなたを最初に見たときは、もう手遅れかと思ったほどだもの。", "I'm glad you got well again. I thought you were a goner until just a few minutes ago.")
		gosub *chat_select
		if ( chatval == 1 ) {
			chatMore lang("あなたは、こんな話を聞いたことがあるかしら。", "You may have heard of this story before...")
			chatMore lang("あるところに、魔法によって醜い獣のような姿に変えられた 王子がいた…彼は自分の姿に絶望し、国を捨て森の中の小屋で暮らしたの。", "There was once a prince who had his shape changed into that of an ugly beast by a witch. Despaired of his bloodcurdling appearance, he hid himself in a forest far from his kingdom.")
			chatMore lang("ある日、狼に襲われ傷ついた女が、小屋に駆け込み倒れこんだ。王子は迷いながらも女を介抱した。彼女はもちろん男の姿におびえて泣いたわ。", "One day a woman rushed into his hut and passed out, having been badly wounded by a pack of wolves. He treated her with the knowledge and fear that his ugly body might scare her. This fear turned into reality soon enough for she cried out as she woke up.")
			chatMore lang("でも、何日もたち彼女は男の優しさに気付いた。彼の誠実さに、抱える葛藤に、心を打たれたの。怪我の癒えた女は、男のささえとなり共に暮らすことを決心した…", "However, as days passed by and she regained her health, the woman had come to recognize the kindness and generosity that was within the heart of this beast. She decided to live with him.")
			chatMore lang("二人は様々な困難を力を合わせ乗り越えて、最後には王子にかけられた呪いがとけ、二人が結婚して幸せな結末を迎えるの。どこにでもある物語ね。", "They surmounted various difficulties throughout their lives and the story comes to an end when the curse set upon the prince finally breaks and the beast returned to his former shape, that of a flawlessly handsome prince. The two of them got along very well from that time on. A happy ending... although just an ordinary story, don't you agree?")
			chatMore lang("わたしは、小さい頃聞かされたこのおとぎ話が、どうしても好きになれなかった。きっと、醜い姿の男に対する愛が、どこかに置き去りにされた気がしたのね。", "The elders of Vindale used to tell me this kind of story. But I never liked this one. Perhaps it is because I felt like the beast that she loved despite the fact that his ugliness had been left behind somewhere.")
			goto *chat_unique
		}
		if ( chatval == 2 ) {
			chatMore lang("アセリア大陸から大洋を隔たち、ティリス大陸の北に位置するのがノースティリスよ。自由と平和の国パルミアの統治の下、古代の遺跡群ネフィアを巡り、多くの旅人や商人がこの地を訪れるの。あなたも、そんな旅人の一人かしら？", "North Tyris is a continent in the western hemisphere of Ylva. Lots of merchants and travelers set foot on North Tyris' soil with the dream of making a fortune in the ancient ruins of Nefia.")
			chatMore lang("目的が決まっていないのなら、南の炭鉱街ヴェルニースに行くといいわ。あなたの探しているものが、見つかるかもしれない。", "If you haven't set your destination yet, you might want to visit Vernis. It's a mining town located south of here.")
			goto *chat_unique
		}
		if ( chatval == 3 ) {
			chatMore lang("私達はヴィンデールの森からの使者。公正なるジャビ王と会見し、森とエレアの民に降りかかる嫌疑を晴らすために、王都パルミアに向かっているの。", "We are messengers from Vindale. Our journey ends here in North Tyris at the great city of Palmia where we're supposed to have a talk with King Xabi, a man of fairness and compassion.")
			goto *chat_unique
		}
		goto *chat_end
	}
	if ( _switch_val == CREATURE_ID_RIANNA_THE_DAYDREAMER | _switch_sw ) {
		_switch_sw = 0
		if ( gdata(GDATA_AREA) == AREA_ULM_LESON ) {
			if ( gdata(GDATA_FLAG_MAIN) >= 760 ) {
				chatMore lang("ヴェセル！ヴェセル！ヴェセル！ヴェセルぅぅうううわぁああああああああああああああああああああああん！！！あぁああああ…ああ…あっあっー！あぁああああああ！！！ヴェセルヴェセルヴェセルぅううぁわぁああああ！！！妄想に出てくるヴェセルかっこよすぎよぅ！！あぁぁああ…あああ…あっあぁああああ！！ふぁぁあああんんっ！！あぁあああああ！かっこいい！ヴェセルぅ！かっこいい！あっああぁああ！夢でも会えて嬉し…いやぁああああああ！！！にゃああああああああん！！ぎゃああああああああ！！ぐあああああああああああ！！！夢なんて現実じゃない！！！！あ…妄想も夢もよく考えたら…いつも私を愛してくれたヴェセルは現実じゃない？にゃあああああああああああああん！！うぁああああああああああ！！そんなぁああああああ！！いやぁぁぁあああああああああ！！はぁああああああん！！この！ちきしょー！やめてやる！！現実なんかやめてやるわ！！", "Sorry, this is untranslated sentence."), strbye
			}
			else {
				chatMore lang("んもうっ、待ち遠しいわヴェセルぅ！！", "Oh come on! We've been waiting forever for Bethel!"), strbye
			}
			goto *chat_end
		}
		goto *chat_end
	}
	if ( _switch_val == CREATURE_ID_LOMIAS_THE_MESSENGER_FROM_VINDALE | _switch_sw ) {
		_switch_sw = 0
		if ( gdata(GDATA_AREA) == AREA_ULM_LESON ) {
			if ( gdata(GDATA_FLAG_MAIN) >= 760 ) {
			chatMore lang("やれやれ。どうやら私はお邪魔虫のようだ。それにしても、ラーネイレはいつ森に帰るつもりなんだ？", "Whew. Apparently I am like a bug. Anyway, when is Larnneire going to the forest?")
			}
			else {
				chatMore lang("はぁ…ヴェセルの奴が来るまで待ちぼうけか。", "Yeah... waiting for that idiot Bethel to come back from his adventure.")
				chatMore lang("ん？誰だか知らないが、そっとしておいてくれ…。", "Huh? Leave that alone stranger...")
			}
			goto *chat_end
		}
		if ( chatflag == 0 ) {
			if ( gdata(GDATA_FLAG_TUTORIAL) == 0 ) {
				buff = lang("見たところ君はノースティリスの人間ではないようだ。余計な世話でなければ、我々が旅を再開する前に、この土地での生活の知恵を授ける程度の時間は割けるのだが。", "It looks like you aren't familiar with this land. Before we leave, I can spare a moment to teach you a few lessons.")
				chatList 1, lang("チュートリアルを開始する", "I would like to play the tutorial.")
				chatList 0, lang("余計な世話だ", "I can take care of myself.")
			}
			if ( gdata(GDATA_FLAG_TUTORIAL) == 1 ) {
				chatMore lang("移動方法はもうわかっているだろうが、もしカーソルキーを使っているのならば、できるだけテンキーでの移動に変えたほうがいいだろう。テンキーの周りには、床のアイテムを取得する0キー、その場で足踏みする5キー、そして射撃などのターゲットを指定できる*キーがあるからな。", "Pray tell me at least you know how to move. Sure, pressing cursor keys will do. But it's better to use a number pad if you have one. By using a number pad, you can easily access keys which are used frequently. Like [0] for picking up stuff, [5] for passing a turn and [*] for targeting.")
				chatMore lang("全ての行動はz,x,cの三つのキーから選択できる。zキーでは主に魔法やスキルなどの動作、xキーではアイテムの操作、cキーでは能力の確認や装備の変更ができるぞ。", "Although there're many actions you can perform, basically you can access them all by using only 3 keys, [z],[x] and [c].")
				chatMore lang("まずはxキーを使って、最も基本的で重要な行動である食事をしてみよう。注意しておけ、空腹になると体力の回復速度が下がり、餓死寸前になると当然体力は減って行くからな。食料は店で買ったり、栽培したり、たまに敵が残す死体を食べることもできる。", "Let's try them now. First, you need food to live. If your stomach is empty, you will lose HP and your action speed slows down. Make sure you always have enough food in your inventory.")
				buff = lang("君の足元に食料を置いた。xキーを押して、テンキーを使い「食べる」のメニューに移動して、足元のものを選択するんだ。", "Here, you can have this meat. Press [x], then press [9] a few times to select the <Eat> menu. Once there, select the meat on the ground.")
				chatList 0, lang("わかった", "Alright.")
				chatList 3, lang("食べた", "I ate it.")
			}
			if ( gdata(GDATA_FLAG_TUTORIAL) == 2 ) {
				chatMore lang("zキーでは、魔法やスキルを使用したり、体当たりや採掘など、やや特殊な行動を行うことができる。体当たりは、鍵のかかったドアを壊したり、果実を木から落としたい時に実行するといい。", "You can perform skills or other actions including bashing and digging by pressing [z]. Here's a tip: You can bash doors to break locks and trees to get some fruits. It can also be used to wake someone, but surely they won't be happy.")
				chatMore lang("zキーの他にも、スペースキーの活用法を覚えておこう。スペースキーは、足元にあるものに応じて自動的に行動を選択してくれるキーだ。例えば足元に階段があれば昇り降りを、宝箱があれば「開く」を、祭壇があれば「捧げる」をなど、自動的に選択してくれる便利なキーだ。", "Also, remember that [space] key is a very useful key. When there's an object under your foot, it automatically chooses a suitable action for you.")
				buff = lang("そうだな… 「穴掘り」実際に試してみようか。穴掘りは、道を短縮したり、鉱石を採掘したり、家のレイアウトを変える時に使う。とりあえず適当な壁の前に立ち、zキーを押して穴を掘ってみてくれ。", "Let's try it now. Try digging some walls by pressing [z] and choosing <dig>.")
				chatList 0, lang("わかった", "Okay.")
			}
			if ( gdata(GDATA_FLAG_TUTORIAL) == 3 ) {
				txt_questitem
				flt
				itemcreate -1, ITEM_ID_SCROLL_IDENTIFY, cdata(CDATA_X, CHARA_PLAYER), cdata(CDATA_Y, CHARA_PLAYER), 0
				inv(INV_ITEM_KNOWN, ci) = ITEM_KNOWN_FULL
				chatMore lang("どうやら何かを掘り当てたようだな。", "Looks like you found something.")
				gdata(GDATA_FLAG_TUTORIAL) = 4
			}
			if ( gdata(GDATA_FLAG_TUTORIAL) == 4 ) {
				chatMore lang("多くのアイテムは、その本当の価値を知るためには「鑑定」をする必要がある。街にいる魔術士に頼んだり、鑑定の巻物や、魔法を唱えることで鑑定はできる。未鑑定の品は店での売価が低くなり、中には呪われた装備、危険な効果のポーションや巻物もあるので注意が必要だ。", "Many items need to be identified before you can know what exactly they are. You can identify items by reading some scrolls or asking a wizard in a town. Remember that using unidentified potions or scrolls is very dangerous.")
				chatMore lang("武器や防具は、長い間所持していると簡単な鑑定がされるが、 装備の持つ魔力や本当の性能を知るためには、やはり鑑定が必要だ。強力な力を秘めたアイテムの中には、上位の鑑定を必要とするものもあるので、未判明のまま店に売ってしまうことは賢明ではないだろう。", "Weapons and armor also need to be identified. If you carry them long enough, you will get a hunch as to how good they are. But to gain full knowledge of the items, you need to identify them.")
				buff = lang("では、今足元に置いた鑑定の巻物をxキーで読み、その金塊を鑑定してみるんだ。", "Now I'll give you a scroll of identify. Read it by using [x] and identify the gold bar you just found.")
				chatList 0, lang("結果は想像がつくが、やってみるか…", "Alright, I will try.")
				chatList 4, lang("鑑定した", "Done...")
			}
			if ( gdata(GDATA_FLAG_TUTORIAL) == 5 ) {
				buff = lang("アイテムを装備するには、cキーから装備画面を呼び出せばいい。呪われたアイテムを装備してしまうと、装備が外せなくなるだけではなく、様々な悪い効果が発生する。その弓も呪われているので、解呪の巻物で呪いをといてくれ。", "To equip weapons or armor, press [c] and press [9] to select [Wear]. Note that if you wear cursed equipment, they can't be removed normally and cause some unwelcome effects. That bow is cursed. Use this scroll of uncurse to uncurse it.")
				chatList 0, lang("わかった", "Will do.")
				chatList 5, lang("装備も解呪も終わった", "All done.")
			}
			if ( gdata(GDATA_FLAG_TUTORIAL) == 6 ) {
				p = findchara(CREATURE_ID_PUTIT)
				if ( p != 0 ) {
					chatMore lang("どうした？ まだ全てのプチを倒していないぞ。", "Kill them all."), strbye
					goto *chat_end
				}
				chatMore lang("上出来だ。", "Well done.")
				gdata(GDATA_FLAG_TUTORIAL) = 7
			}
			if ( gdata(GDATA_FLAG_TUTORIAL) == 7 ) {
				chatMore lang("ノースティリスの地理について少し説明しよう。シエラ・テールには幾多の国が存在するが、ノースティリスはどの国の支配も受けておらず、《ネフィア》と呼ばれる迷宮群が存在する特殊な場所だ。この地では、地殻変動とともに新しい迷宮がしばしば生成される。", "Let's learn a little history of North Tyris. This sacred land governed by Palmia is known for ancient ruins <<Nefia>>. Occasionally new ruins are found and lost by erratic movements of the earths crust.")
				chatMore lang("迷宮の主を倒すと貴重な物資や財宝が手に入るため、冒険者にとっては格好の収入源になるわけだ。迷宮に辿り着くと、その場所の危険度が表示される。危険度が自分のレベルより高い場所を探索することは、まず避けたほうがいいだろう。", "A lord lives at the lowest layer of these ruins, protecting great treasures and therefore attracts numerous adventurers. However, avoid those ruins which exceed your current level. You may gain a lot, but you may lose your life.")
				flt
				itemcreate -1, ITEM_ID_CHEST, cdata(CDATA_X, CHARA_PLAYER), cdata(CDATA_Y, CHARA_PLAYER), 0
				inv(INV_ITEM_PARAM1, ci) = 35, 25
				flt
				itemcreate -1, ITEM_ID_LOCKPICK, cdata(CDATA_X, CHARA_PLAYER), cdata(CDATA_Y, CHARA_PLAYER), 2
				txt_questitem
				chatMore lang("迷宮に落ちている宝箱の開け方を知っておく必要があるな。足元に宝箱を置くので、xキー、またはスペースキーで開けてみるんだ。", "You might find chests containing loot in ruins. There's one nearby, open it."), strbye
				gdata(GDATA_FLAG_TUTORIAL) = 8
				goto *chat_end
			}
			if ( gdata(GDATA_FLAG_TUTORIAL) == 8 ) {
				chatMore lang("鍵が掛かっているだろう？宝箱の鍵は、ロックピックを所持していて、鍵開けの技術が開錠に必要な値に達していないと、解除することはできない。君の技量では、おそらくその宝箱を開けることはできないな。宝箱はダンジョンに落ちていることもあるが、生憎と重い代物なので、開けられない時は諦めるしかないだろう。気をつけろ…宝箱に押しつぶされて無様な死をさらした冒険者を、私は何度となく見てきている。", "Notice the chest has a lock? Locked chests require sufficient lockpick skill and lockpicks to open. You need to practice to open that chest. Be aware, those chests are heavy and trust me, give up if you can't open them when you're in dungeons. I saw a fool running around with a chest on his back and he got killed.")
				chatMore lang("宝箱に限らず、荷物を持ちすぎると速度にペナルティが課せられるため注意が必要だな。必要のないアイテムは、家に保管しておくといい。", "As you explore dungeons, your backpack may get heavier. Remember to leave stuff you don't need in your house. Carrying too much will slow your movement.")
				chatMore lang("最後に、家について説明しておこう。家はアイテムを保管したり、安全に魔法を学んだり、また単に装飾して楽しむために利用できる。家の権利書を購入できるようになれば、ノースティリスの好きな場所に家を建てることができるだろう。ただし、家は一つしか持てない。", "Finally, I'm going to explain a bit about your house. As you already know, you can safely store items in your house. And the salary chest periodically gets filled with some gold and items. Eventually you might be able to buy a new house.")
				chatMore lang("家の中にあるハウスボードを使うことで、壁を作ったり、床の模様を変えたり、滞在者を募ったりできるぞ。後で試してみるといい。", "You can do several things by using a house board in your house. Try it later.")
				gdata(GDATA_FLAG_TUTORIAL) = 99
			}
			if ( gdata(GDATA_FLAG_TUTORIAL) == 99 ) {
				chatMore lang("よくやった。これでノースティリスで生活するための、基本的な知識は身に付いたわけだ。自分の状態を把握し、慎重に行動すれば、瀕死の状態を高慢なエレアに拾われ、講釈をたれられることも、もうないだろう（ロミアスはニヤリと笑った）。", "Alright, we're finished. You should already know how to survive in North Tyris by now.")
				chatMore lang("まだ目的が定まっていないのなら、南のヴェルニースを訪れるといい。ネフィアの迷宮群を巡るのも、貴重な経験になるだろう。この世界で何を見て、如何な足跡を残すか決めるのは、君自身だ。", "(You've finished the tutorial!)"), strbye
				gdata(GDATA_FLAG_TUTORIAL) = -1
				goto *chat_end
			}
			if ( gdata(GDATA_FLAG_TUTORIAL) == (-1) ) {
				buff = lang("まだ、何か用があるのか？", "What?")
				chatList 0, lang("何も", "Nothing.")
			}
			if ( gdata(GDATA_FLAG_TUTORIAL) == 0 | gdata(GDATA_FLAG_TUTORIAL) == (-1) ) {
				chatList 2, lang("わが家から出て行ってほしい", "Get out of my house!")
			}
			gosub *chat_select
		}
		if ( chatval == 1 ) {
			chatMore lang("賢明な判断だな。まずは最も基本的な動作から教えよう。", "A wise choice. I will start from the beginning.")
			flt
			itemcreate -1, ITEM_ID_CORPSE, cdata(CDATA_X, CHARA_PLAYER), cdata(CDATA_Y, CHARA_PLAYER), 0
			inv(INV_ITEM_SUB_NAME, ci) = CREATURE_ID_BEGGAR
			inv(INV_ITEM_KNOWN, ci) = ITEM_KNOWN_FULL
			txt_questitem
			gdata(GDATA_FLAG_TUTORIAL) = 1
			goto *chat_unique
		}
		if ( chatval == 2 ) {
			tc = findcharala(CREATURE_ID_LARNNEIRE_THE_LISTENER_OF_WIND)
			if ( tc == CHARA_PLAYER ) {
				tc = findchara(CREATURE_ID_LOMIAS_THE_MESSENGER_FROM_VINDALE)
				chatMore lang("ラーネイレ…？ どこにいったんだ？ まさか貴様！", "You... you scum!"), strbye
				cdata(CDATA_EMO_ICON, tc) = 18 + 100 * 4
				txtef COLOR_PURPLE
				txtmore
				txt lang(name(tc) + "は逆上した。", name(tc) + " gets furious!")
				cdata(CDATA_RELATION, tc) = -3
				cdata(CDATA_AI_AGGRO, tc) = 80
				cdata(CDATA_TARGET, tc) = 0
				goto *chat_end
			}
			chatMore lang("" + cdatan(CDATAN_NAME, CHARA_PLAYER) + "の言うとおり、私達に残されている時間は少ないわ。こうしている間にも、新王国のかの者の計画は着実に進んでいる… 出発しよう、ロミアス。", "" + cdatan(CDATAN_NAME, CHARA_PLAYER) + " is right. The time left for us is scarce. We need to depart, Lomias.")
			chatMore lang("ああ、わかった。パルミアまでは長い旅路だ。一時であれ休息をとれて良かったのかも知れないな。", "Yes. Palmia is still far away. Perhaps it was fortunate that we could have a little rest before everything begins."), strmore, findchara(CREATURE_ID_LOMIAS_THE_MESSENGER_FROM_VINDALE)
			chatMore lang("また巡り会う時まで、" + cdatan(CDATAN_AKA, CHARA_PLAYER) + "、あなたに風の加護のあらんことを。", "Farewell... until we meet again. May the blessing of Lulwy be with you."), strbye, findchara(CREATURE_ID_LARNNEIRE_THE_LISTENER_OF_WIND)
			chara_vanquish findchara(CREATURE_ID_LARNNEIRE_THE_LISTENER_OF_WIND)
			chara_vanquish findchara(CREATURE_ID_LOMIAS_THE_MESSENGER_FROM_VINDALE)
			txt lang("二人は荷物をまとめ洞窟を後にした。", "Lomias and Larnneire leave the cave.")
			txt_questcompleted
			txt_questitem
			repeat 3
				flt
				flttypemajor = FILTER_FURNITURE
				itemcreate -1, ITEM_ID_DUMMY, cdata(CDATA_X, CHARA_PLAYER), cdata(CDATA_Y, CHARA_PLAYER), 0
			loop
		}
		if ( chatval == 3 ) {
			chatMore lang("…本当に食べてしまったのか？", "Err... you really ate that thing? Oh well..."), lang("えー", "What!")
			chatMore lang("食料以外のアイテムも、同様にxキーで操作することになる。例えば巻物や魔法書は「読む」のメニューから、杖は「振る」のメニューから使用できる。", "You can also use other items by pressing [x]. For example, if you want to read a book, press [x], hit [9] a few times to select the <Read> menu, then choose a book you want to read.")
			chatMore lang("次はzキーでの行動について説明しよう。", "Next, let me explain the behavior of the [z] key.")
			gdata(GDATA_FLAG_TUTORIAL) = 2
			goto *chat_unique
		}
		if ( chatval == 4 ) {
			chatMore lang("（ロミアスはにやりと笑った。どうやら、この偽物の金塊は彼がいつの間にか埋めたらしい…）", "(Lomias grins. Looks like he buried it unnoticed.)")
			chatMore lang("次は戦闘について教えるが、戦う前にまずアイテムを装備し、準備を整えなければならない。使い古しだが、君のために弓と矢を用意した。射撃武器のほとんどは、例えば銃なら弾丸のように、対応した矢・弾を装備する必要がある。", "Okay, I will now tell you how to fight. Before the combat starts, you need to equip weapons. Take my old bow and arrows and equip them.")
			flt
			itemcreate -1, ITEM_ID_LONG_BOW, cdata(CDATA_X, CHARA_PLAYER), cdata(CDATA_Y, CHARA_PLAYER), 0
			inv(INV_ITEM_STATUS, ci) = ITEM_STATUS_CURSED
			flt
			itemcreate -1, ITEM_ID_ARROW, cdata(CDATA_X, CHARA_PLAYER), cdata(CDATA_Y, CHARA_PLAYER), 0
			inv(INV_ITEM_STATUS, ci) = ITEM_STATUS_NORMAL
			flt
			itemcreate -1, ITEM_ID_SCROLL_VANISH_CURSE, cdata(CDATA_X, CHARA_PLAYER), cdata(CDATA_Y, CHARA_PLAYER), 0
			inv(INV_ITEM_KNOWN, ci) = ITEM_KNOWN_FULL
			inv(INV_ITEM_STATUS, ci) = ITEM_STATUS_BLESSED
			txt_questitem
			gdata(GDATA_FLAG_TUTORIAL) = 5
			goto *chat_unique
		}
		if ( chatval == 5 ) {
			chatMore lang("…よし、いよいよ戦闘の説明だ。", "Good. Now listen carefully.")
			chatMore lang("相手を打撃で攻撃するには、単に相手の方向のキーを押すだけだ。射撃も、zキーから射撃を選択するだけで、一番近くの敵を自動的に攻撃する。攻撃する敵を予め指定したいときは*キーを押せばいい。", "By moving towards a target, you automatically attack it with your close range weapon. To use your long range weapon, you can either press [z] and choose [Shoot] or simply press [f] (Fire). You will shoot a nearby enemy. If you want to change your target, press [*].")
			chatMore lang("では、訓練用のモンスターを召喚するぞ。可能なら、使い勝手を知るために射撃で倒してみてくれ。ただし、弓は近接して打っても威力が低いので注意が必要だ。危なくなった時のために、治療薬を足元に置いておこう…必要ないとは思うが。ポーションの飲み方はわかるな？…そう、xキーだ。", "Get ready. I will summon some weak monsters. Kill them with your bow if possible. Try to stay away from the enemies as bows aren't effective in close range. I've dropped a few potions in case you get hurt. You know how to use them right? Yes, use [x] key.")
			txtef COLOR_SKY_BLUE
			txt lang("ロミアスは隠し持っていたプチを放った。", "Lomias releases tiny, cute creatures.")
			repeat 3
				flt
				characreate -1, CREATURE_ID_PUTIT, cdata(CDATA_X, CHARA_PLAYER), cdata(CDATA_Y, CHARA_PLAYER)
				cbitmod CHARA_BIT_NO_TARGET, rc, 1
			loop
			flt
			itemcreate -1, ITEM_ID_POTION_CURE_MINOR_WOUND, cdata(CDATA_X, CHARA_PLAYER), cdata(CDATA_Y, CHARA_PLAYER), 0
			inv(INV_ITEM_KNOWN, ci) = ITEM_KNOWN_FULL
			txt_questitem
			gdata(GDATA_FLAG_TUTORIAL) = 6
		}
		goto *chat_end
	}
	if ( _switch_val == CREATURE_ID_STERSHA_THE_QUEEN_OF_PALMIA | _switch_sw ) {
		_switch_sw = 0
		if ( gdata(GDATA_FLAG_MAIN) >= 200 ) {
			chatMore lang("王の死に続き、世界の崩壊の始まり…パルミアは…シエラ・テールは困難な時代にいます。このまま、イルヴァは最後を迎えてしまうのでしょうか。", "The tragedy of our king, and the collapse of our world, Palmia is... Sierre Terre is in difficult times."), strbye
			goto *chat_end
		}
		if ( gdata(GDATA_FLAG_MAIN) < 90 ) {
			chatMore lang("パルミアは歴史ある自由と文化の国。大アセリア大陸の戦乱から離れ、静かに育ってきた国です。王制政治が廃止された今でも、この平和を培った代々の王と夫であるジャビ王に、民は忠誠を尽くしてくれています。", "Palmia is an old and historical kingdom which respects peace and freedom. The royalism has been obsoleted long time ago, but people still carry loyalty to the old kings and my husband, King Xabi."), strbye
		}
		else {
			chatMore lang("王の悲報にパルミアは衝撃を受けています。あの方のいない王座は、なんと冷たく感じられることでしょう…", "The whole kingdom is devastated to hear the tragic news of our king. This throne... it feels very cold without him."), strbye
		}
		goto *chat_end
	}
	if ( _switch_val == CREATURE_ID_XABI_THE_KING_OF_PALMIA | _switch_sw ) {
		_switch_sw = 0
		if ( gdata(GDATA_AREA) == AREA_AMUR_CAGE ) {
			chatMore lang("スターシャは、パルミアは、今どうなっているのだ…？", "What will happen to Stersha and Palmia now...?")
			goto *chat_end
		}
		if ( gdata(GDATA_FLAG_MAIN) >= 60 ) {
			chatMore lang("汝の活躍を楽しみにしておるぞ。", "Any assistance you provide to us will be most welcome."), strbye
			goto *chat_end
		}
		if ( gdata(GDATA_FLAG_MAIN) == 50 ) {
			chatMore lang("今の時勢、信頼に足る者の剣を遊ばせておくのは惜しい。もしパルミアの元で働く意志があるのなら、城の図書室にいるエリステアを訪ねるがよい。十分な報酬と名誉を約束しよう。", "In times like these, we can't afford to let those we can trust sit idly on their swords. If you're willing to serve Palmia, then you should pay a visit to Erystia in the library. We will be sure to reward you with honor and riches commiserate with your sacrifice."), strbye
			goto *chat_end
		}
		if ( gdata(GDATA_FLAG_MAIN) == 40 ) {
			gdata(GDATA_FLAG_MAIN) = 50
			chatMore lang("斥候からの知らせを預かっていると？…よかろう、その者の書簡をわしの手元へ。", "What's that you say? You have a message from one of our scouts? ...Very well then, let me see it.")
			redraw 0
			gosub *screen_draw
			gosub *screen_fade
			gsel 4
			pos 0, 0
			picload exedir + "graphic\\face1" + devfile + ".bmp", 1
			gsel 0
			chatMore lang("…なるほど、恐れていたことが現実になったというわけだな。知らせにあるよう、悪しき者がレシマスに眠る秘宝を狙うのであれば、パルミアの王の名誉にかけてそれを阻止せねばなるまい…" + cdatan(CDATAN_NAME, CHARA_PLAYER) + "とやら、大儀であった。直ちに謝礼を用意させようではないか。", "I see... then what we feared has indeed come to pass. If evil has set its sights on the artifact hidden within the depths of Lesimas, then by my honor as King, I am duty-bound to stop it... You must be tired, " + cdatan(CDATAN_NAME, CHARA_PLAYER) + ". Give me a moment to prepare appropriate compensation for your efforts today.")
			flt
			itemcreate -1, ITEM_ID_GOLD_PIECE, cdata(CDATA_X, CHARA_PLAYER), cdata(CDATA_Y, CHARA_PLAYER), 2500
			flt
			itemcreate -1, ITEM_ID_PLATINUM_COIN, cdata(CDATA_X, CHARA_PLAYER), cdata(CDATA_Y, CHARA_PLAYER), 3
			flt
			itemcreate -1, ITEM_ID_POTION_CURE_CORRUPTION, cdata(CDATA_X, CHARA_PLAYER), cdata(CDATA_Y, CHARA_PLAYER), 0
			flt
			itemcreate -1, ITEM_ID_TREASURE_MAP, cdata(CDATA_X, CHARA_PLAYER), cdata(CDATA_Y, CHARA_PLAYER), 0
			txt_questitem
			txt_questupdate
			goto *chat_unique
		}
		goto *chat_unique_SWEND1
	}
	if ( _switch_val == CREATURE_ID_SLAN_THE_SHADOW_OF_PALMIA | _switch_sw ) {
		_switch_sw = 0
		if ( gdata(GDATA_FLAG_MAIN) == 20 ) {
			gdata(GDATA_FLAG_MAIN) = 30
			chatMore lang("…そこの御人…頼みが…頼みがある…私はパルミアの斥候…王の命令でレシマスに潜んでいた者だ…", "You... you there, listen to me. *cough* *cough* I-I'm a scout of Palmia... I've been investigating on Zanan's strange activities in Lesimas... *cough* I have a favor to ask...")
			chatMore lang("詳しく説明する体力は…私には…もう残っていない…ジャビ王にこの書簡を…届けて頂きたい…二つの大国の衝突を…シエラ・テールの…危機を…防ぐために…", "T-There's no time left for me to explain all... my wounds are... *cough* Listen, Sierre Terre is in danger... this letter... this letter... is our only hope...")
			chatMore lang("…う、うぅ…貴方を…信じる以外にもう希望はない…私の所持品は…自由にして構わない…どうか、この知らせを…パルミアに…", "I have no choice but to trust you... *cough* Bring the letter to Palmia... I-I beg you... You can take everything I have on me... so... please..."), strbye
			repeat 4
				flt calcobjlv(gdata(GDATA_LEVEL)), calcfixlv(FIX_QUALITY_GOOD)
				flttypemajor = fltsetdungeon()
				itemcreate -1, ITEM_ID_DUMMY, cdata(CDATA_X, tc), cdata(CDATA_Y, tc), 0
			loop
			flt
			itemcreate -1, ITEM_ID_GOLD_PIECE, cdata(CDATA_X, tc), cdata(CDATA_Y, tc), 1000 + rnd(200)
			flt
			itemcreate -1, ITEM_ID_PLATINUM_COIN, cdata(CDATA_X, tc), cdata(CDATA_Y, tc), 3
			flt
			itemcreate -1, ITEM_ID_BEJEWELED_CHEST, cdata(CDATA_X, tc), cdata(CDATA_Y, tc), 0
			inv(INV_ITEM_PARAM2, ci) = 0
			snd SOUNDLIST_WRITE1
			txtef COLOR_GREEN
			txt lang("ジャビ王への書簡を受け取った。ジャーナルが更新された。", "You receive a letter for king Xabi. Your journal has been updated.")
			txt lang(cdatan(CDATAN_NAME, tc) + "は静かに息絶えた…", cdatan(CDATAN_NAME, tc) + " dies silently...")
			chara_vanquish tc
			goto *chat_end
		}
		goto *chat_unique_SWEND1
	}
	if ( _switch_val == CREATURE_ID_ERYSTIA_THE_SCHOLAR_OF_HISTORY | _switch_sw ) {
		_switch_sw = 0
		if ( gdata(GDATA_FLAG_SUB_REGULUS_ZANAN) == 100 ) {
			chatMore lang("生体兵器の殲滅、お疲れ様でした。こちらが報酬です。エユルにも後ほど報酬を渡しておきます。", "Thank you for destroying the biological weapons. Here is your reward. I'll give Regulus his portion the next time he's here.")
			flt
			itemcreate -1, ITEM_ID_BRILLIANT_DIAMOND, cdata(CDATA_X, CHARA_PLAYER), cdata(CDATA_Y, CHARA_PLAYER), 3
			flt
			itemcreate -1, ITEM_ID_ASTRAL_LIGHT_PEN, cdata(CDATA_X, CHARA_PLAYER), cdata(CDATA_Y, CHARA_PLAYER), 0
			flt
			itemcreate -1, ITEM_ID_MUSIC_TICKET, cdata(CDATA_X, CHARA_PLAYER), cdata(CDATA_Y, CHARA_PLAYER), 20000
			flt
			itemcreate -1, ITEM_ID_SCROLL_GAIN_ATTRIBUTE, cdata(CDATA_X, CHARA_PLAYER), cdata(CDATA_Y, CHARA_PLAYER), 2
			gdata(GDATA_FLAG_SUB_REGULUS_ZANAN) = 1000
			snd SOUNDLIST_COMPLETE1
			txt_questitem
			goto *chat_end
		}
		if ( gdata(GDATA_FLAG_SUB_REGULUS_MAYROON) == 100 ) {
			chatMore lang("メイルーンの悪魔討伐、お疲れ様でした。あら？マルカは一緒ではないのですか？", "Good work on taking out the demon in Mayroon. Huh? Marka isn't with you?")
			chatMore lang("とりあえず、こちらがあなたの分の報酬です。", "Well, here's your reward.")
			flt
			itemcreate -1, ITEM_ID_ARGENT_SNOW, cdata(CDATA_X, CHARA_PLAYER), cdata(CDATA_Y, CHARA_PLAYER), 0
			flt
			itemcreate -1, ITEM_ID_SCROLL_GROWTH, cdata(CDATA_X, CHARA_PLAYER), cdata(CDATA_Y, CHARA_PLAYER), 5
			flt
			itemcreate -1, ITEM_ID_BOOK_RESURRECTION, cdata(CDATA_X, CHARA_PLAYER), cdata(CDATA_Y, CHARA_PLAYER), 3
			flt
			itemcreate -1, ITEM_ID_BOTTLE_SPEED_UPPER, cdata(CDATA_X, CHARA_PLAYER), cdata(CDATA_Y, CHARA_PLAYER), 0
			flt
			itemcreate -1, ITEM_ID_POTION_SOMA, cdata(CDATA_X, CHARA_PLAYER), cdata(CDATA_Y, CHARA_PLAYER), 2
			gdata(GDATA_FLAG_SUB_REGULUS_MAYROON) = 1000
			snd SOUNDLIST_COMPLETE1
			txt_questitem
			goto *chat_end
		}
		if ( gdata(GDATA_FLAG_SUB_REGULUS_EULDERNA) == 100 ) {
			chatMore lang("エウダーナの悪魔討伐、お疲れ様でした。こちらが今回分の報酬ですよ。", "Thanks for taking out the demon in Eulderna. Here's your reward.")
			flt
			itemcreate -1, ITEM_ID_ROD_WISHING, cdata(CDATA_X, CHARA_PLAYER), cdata(CDATA_Y, CHARA_PLAYER), 0
			flt
			itemcreate -1, ITEM_ID_SOUL_SPINDLE, cdata(CDATA_X, CHARA_PLAYER), cdata(CDATA_Y, CHARA_PLAYER), 0
			flt
			itemcreate -1, ITEM_ID_POTION_NEKTAR, cdata(CDATA_X, CHARA_PLAYER), cdata(CDATA_Y, CHARA_PLAYER), 2
			flt
			itemcreate -1, ITEM_ID_POTION_POTENTIAL, cdata(CDATA_X, CHARA_PLAYER), cdata(CDATA_Y, CHARA_PLAYER), 5
			gdata(GDATA_FLAG_SUB_REGULUS_EULDERNA) = 1000
			snd SOUNDLIST_COMPLETE1
			txt_questitem
			goto *chat_end
		}
		if ( gdata(GDATA_FLAG_SUB_REGULUS_KIKKASU) == 100 ) {
			chatMore lang("キッカスの悪魔討伐、お疲れ様でした。こちらが今回分の報酬ですよ。", "Thanks for defeating the demon in Kikkasu. Here's your reward.")
			flt
			itemcreate -1, ITEM_ID_TOKEN_FRIENDSHIP, cdata(CDATA_X, CHARA_PLAYER), cdata(CDATA_Y, CHARA_PLAYER), 3
			flt
			itemcreate -1, ITEM_ID_SPECIAL_STEAMED_MEAT_BUN, cdata(CDATA_X, CHARA_PLAYER), cdata(CDATA_Y, CHARA_PLAYER), 3
			flt
			itemcreate -1, ITEM_ID_PUFF_PUFF_BREAD, cdata(CDATA_X, CHARA_PLAYER), cdata(CDATA_Y, CHARA_PLAYER), 3
			flt
			itemcreate -1, ITEM_ID_MANDRAKE_SALAD, cdata(CDATA_X, CHARA_PLAYER), cdata(CDATA_Y, CHARA_PLAYER), 3
			flt
			itemcreate -1, ITEM_ID_PUTITORO, cdata(CDATA_X, CHARA_PLAYER), cdata(CDATA_Y, CHARA_PLAYER), 3
			flt
			itemcreate -1, ITEM_ID_GOLD_PIECE, cdata(CDATA_X, CHARA_PLAYER), cdata(CDATA_Y, CHARA_PLAYER), 500000
			gdata(GDATA_FLAG_SUB_REGULUS_KIKKASU) = 1000
			snd SOUNDLIST_COMPLETE1
			txt_questitem
			goto *chat_end
		}
		if ( gdata(GDATA_FLAG_MAIN) >= 760 ) {
			if ( gdata(GDATA_FLAG_MAIN_CHAOS_CRADLE_4) >= 100 ) {
				chatMore lang("混沌の神が倒され、ロスリアに集まっていた混沌の精霊たちも各国の連合軍に鎮圧されました。事実上、混沌の軍勢は滅んだことになりますね。ロストイルヴァの情報も大体集まりましたし、ようやく私も落ち着けます。", "Sorry, this is untranslated sentence.")
			}
			if ( gdata(GDATA_FLAG_MAIN_CHAOS_CRADLE_4) < 100 ) {
				chatMore lang("ええっ？混沌の神を倒した…のですか？あなたが？", "What? Defeated the God of Chaos...? You?")
				chatMore lang("…。", "...")
				chatMore lang("…あまり、そのことは喋らない方がいいかもしれませんよ。邪神を殺した英雄がそれ以上の危険因子として迫害されることがあるのは、歴史が証明しています。", "Sorry, this is untranslated sentence.")
				gdata(GDATA_FLAG_MAIN_CHAOS_CRADLE_4) = 100
			}
			goto *chat_end
		}
		if ( gdata(GDATA_FLAG_SUB_REGULUS_ZANAN) + gdata(GDATA_FLAG_SUB_REGULUS_EULDERNA) + gdata(GDATA_FLAG_SUB_REGULUS_KIKKASU) + gdata(GDATA_FLAG_SUB_REGULUS_MAYROON) >= 4000 ) {
			chatMore lang("私の方では、今のところ新たに依頼する討伐もありません。ロストイルヴァの調査をお願いします。何か新しい発見があれば、内容に応じて報酬を出しましょう。", "I don't have any further requests to eliminate demons at the moment. Please focus on investigating Lost Ylva for now. If you discover something, we may give you a reward based on what it is."), strbye
			if ( gdata(GDATA_FLAG_MAIN) <= 470 ) {
				chatMore lang("ああ、そういえばイェルス軍からご指名がありましたよ。あなたの手が空いたら、メルガスへ来てほしいとのことでした。依頼の内容と指名の理由は明かしてくれませんでしたが…。", "Ah, that reminds me. The Yerles army was looking for you. They wanted you to stop by Melugas when you're free. They didn't inform me of why they were looking for you, however..."), strbye
			}
			goto *chat_end
		}
		if ( gdata(GDATA_FLAG_MAIN) >= 404 & gdata(GDATA_FLAG_MAIN) < 440 ) {
			if ( gdata(GDATA_FLAG_SUB_REGULUS_ZANAN) < 100 ) {
				chatList 0, lang("生体兵器の殲滅（ザナン）", "Annihilation of the biological weapon. (Zanan)")
			}
			if ( gdata(GDATA_FLAG_SUB_REGULUS_MAYROON) < 100 ) {
				chatList 1, lang("破壊の悪魔討伐（メイルーン）", "Putting down the demon of destruction. (Mayroon)")
			}
			if ( gdata(GDATA_FLAG_SUB_REGULUS_EULDERNA) < 100 ) {
				chatList 2, lang("復讐の悪魔討伐（エウダーナ）", "Putting down the demon of vengeance. (Eulderna)")
			}
			if ( gdata(GDATA_FLAG_SUB_REGULUS_KIKKASU) < 100 ) {
				chatList 3, lang("疫病の悪魔討伐（キッカス）", "Putting down the demon of disease. (Kikkasu)")
			}
			buff = lang("よく来てくれました。" + cdatan(CDATAN_AKA, CHARA_PLAYER) + cdatan(CDATAN_NAME, CHARA_PLAYER) + "、あなた向きの国家依頼を紹介します。ひとつ達成するごとに報酬を渡しましょう。", "I'm glad you're here, " + cdatan(CDATAN_NAME, CHARA_PLAYER) + ". I have some official requests from Palmia for you. For each one you complete, I'll give you a reward.")
			gosub *chat_select
			if ( chatval == 0 ) {
				chatMore lang("資料によると、ザナンのある機関で研究されていた生体兵器が暴走したとされています。なんでも、メシェーラの特性で強化した生物を薬物でコントロールしようとしていたとか。イェルスでメシェーラの無害化にも携わったというあなたは適任でしょう。", "According to our data, a biological weapon being created by an institution in Zanan has gone out of control. From what I understand, these creatures that they plan to control have many of the characteristics of the Meshera, and has been strengthened further with other drugs. Since you cooperated with the Yerles in the purification of the Meshera, I think you would be suitable for taking care of this issue.")
				chatMore lang("なお、研究施設の元関係者を名乗る冒険者が名乗りをあげたので彼にも同行してもらいます。彼の名前はエユル。目的地への案内人も兼ねているので、準備が出来次第接触してください。現在は関所のノースティリス側宿屋に待機してもらっています。", "You'll be accompanied by another adventurer who is involved with the research institution. His name is Regulus. He'll be the one to guide you to your destination, so contact him as soon as you're ready. He'll be waiting at the inn on the border to South Tyris.")
				if ( gdata(GDATA_FLAG_SUB_REGULUS_ZANAN) == 0 ) {
					gdata(GDATA_FLAG_SUB_REGULUS_ZANAN) = 1
				}
				goto *chat_end
			}
			if ( chatval == 1 ) {
				chatMore lang("永世中立を保ち他国との関わりを避けていたメイルーンですが、突如として現れた悪魔と混沌の精霊たちの襲撃に対抗できる戦力が無く、今回救援を要請してきました。あなたの前に派遣した討伐隊は、メイルーン唯一の港ごと船を破壊され壊滅しています。冒険者は驚くことに泳いで帰ってきましたが、しばらくは再起不能でしょう。", "As you may know. Mayroon is a country that has remained neutral and avoided contact with the other countries since its founding. They're the ones asking for help this time. Without a standing army, they were unable to stand against the spirits of chaos and the demons that appeared. The group that was sent before you had their boat destroyed, and Mayroon's sole port has been devastated. Surprisingly a few adventurers managed to swim back, but it's unlikely they'll recover for some time.")
				chatMore lang("あなたにはメイルーンを熟知した銀熊…マルカとともにノイエルから陸路で現地へ向かってもらいます。彼女はノイエルの教会に待機させているので早く合流してください。元から人の話を殆ど聞かないうえに、襲撃を受けているのは彼女の故郷…時間が経つと独断先行してしまうかもしれません。", "You already know the Silver Bear... Together with Marka, you'll leave from Noyel and take the overland route to Mayroon. She's already waiting at the church in Noyel, so please join her quickly. We've had little word from her hometown since it was attacked by a demon... Don't waste time.")
				if ( gdata(GDATA_FLAG_SUB_REGULUS_MAYROON) == 0 ) {
					gdata(GDATA_FLAG_SUB_REGULUS_MAYROON) = 1
				}
				goto *chat_end
			}
			if ( chatval == 2 ) {
				chatMore lang("ニーサ沿岸部に突如出現したとされる復讐の悪魔は、大陸を東に移動しつつエウダーナ王都に到達。王都は以前から混沌の精霊たちの襲撃を受けており、その度に魔術師団が対応にあたっていました。しかし悪魔到達後に状況は一変。下級・中級の魔術師たちが悪魔にそそのかされ敵に回ったのです。元よりエリート主義のエウダーナにおいて才能に劣る者は辛く惨めな思いをするものだと聞きます。おそらくは悪魔はその心の隅間に付け込んだのでしょう。", "The demon of vengeance that appeared on Niesa's cost has traveled to the east to the Eulderna captial. The capital has been under attack for some time by chaos spirits, which have been repelled by the mage division of their army so far. But things have changed now that this demon has arrived. The lower and mid class mages have been seduced by this demon and have turned on their comrades. From my understanding, the elite in Eulderna look down on and are cruel to the less talented mages. I'm sure the demon took advantage of the resentment this caused.")
				chatMore lang("ロストイルヴァ探索に出ていたエウダーナの調査部隊が敵勢力に２度挑んでいますが、老魔導士のライゼル以外に渡り合える者がおらず、撤退を繰り返しています。再攻撃を予定している魔導船に乗って最前線に赴き、王宮周辺の結界に籠城している魔術師たちと協力して敵勢力を殲滅…それが今回の国家依頼です。大混戦が予想されるので注意してください。", "The Eulderna investigation team that's on Lost Ylva have attempted to challenge the demon twice. However, the only one that possesses enough power to fight the demon is the old wizard Raizel, so they've had to retreat both times. Your task is to join forces with the magicians and stage an assault again the forces of chaos at the Eulderna capital, and to eliminate the demon of vengeance there... This is an official state request. This will likely be a large fight, so be careful.")
				if ( gdata(GDATA_FLAG_SUB_REGULUS_EULDERNA) == 0 ) {
					gdata(GDATA_FLAG_SUB_REGULUS_EULDERNA) = 1
				}
				goto *chat_end
			}
			if ( chatval == 3 ) {
				chatMore lang("キッカス辺境の街が一夜にして地獄に変わりました。疫病の悪魔を名乗る怪物が瘴気で街を包み込んだのです。人々が次々に死亡し、アンデッドに変えられて街を徘徊しているのだとか。街から逃げ出してきた旅人はこの報告直後に全身から血を噴き出して死亡、さらに介抱した周囲の人々も２４時間以内に死亡したそうです。事態を重く見たキッカス政府は周辺を封鎖し、同盟に救援を要請してきました。", "The Kikkasu border town turned in to Hell overnight. A monster calling himself the Demon of Plagues wrapped the town in some sort of miasma. The people died one after the other, and became undead that wander the streets. The traveler that fled the city and reported this to us died from blood pouring out of every orifice, and the people that attempted to nurse him died within another 24 hours. The Kikkasu government blockaded the city and requested help from our alliance.")
				chatMore lang("今回は歴戦の傭兵部隊に同行することになります。現地へはロストイルヴァ北端に存在する神艦から小型艇で移動する手筈です。詳しくは神艦で準備を進めている傭兵のリーダー、シュライダと打ち合わせをお願いします。", "You'll be cooperating with veteran mercenaries this time. Arrangements have been made for you to leave on a small boat from the God's Warship located in the northern part of Lost Ylva. You should meet up with Shuraida, the head of the mercenaries, for more information.")
				if ( gdata(GDATA_FLAG_SUB_REGULUS_KIKKASU) == 0 ) {
					gdata(GDATA_FLAG_SUB_REGULUS_KIKKASU) = 1
				}
				goto *chat_end
			}
			goto *chat_end
		}
		if ( gdata(GDATA_FLAG_MAIN) >= 382 ) {
			if ( gdata(GDATA_FLAG_MAIN) < 404 ) {
				chatMore lang("今後も何かあったら協力をお願いするかもしれませんね。" + cdatan(CDATAN_AKA, CHARA_PLAYER) + cdatan(CDATAN_NAME, CHARA_PLAYER) + "、頼りにしていますよ。", "I'll ask for your help again if anything comes up in the future. We're counting on you, " + cdatan(CDATAN_NAME, CHARA_PLAYER) + ".")
				goto *chat_end
			}
		}
		if ( gdata(GDATA_FLAG_MAIN) == 380 ) {
			chatMore lang("銀熊と遭遇した…？わかりました、一度順を追って報告をお願いします。", "You encountered the Silver Bear...? I understand. Please give me your report.")
			redraw 0
			gosub *screen_draw
			gosub *screen_fade
			gsel 4
			pos 0, 0
			picload exedir + "graphic\\face1" + devfile + ".bmp", 1
			gsel 0
			chatMore lang("なるほど、そういうことでしたか。…メイルーンに送り込まれた化け物というのも気になりますね。この件に関してはこちらでメイルーンに連絡を取ってみます。", "I see. So that's what's happening... I'm worried about this monster that was sent to Mayroon. I'll get in touch with my contact there immediately to see if I can't find out more.")
			chatMore lang("それと、今回の報酬を渡しておきます。今後も何かあったら協力をお願いするかもしれませんね。", "This is your reward. I hope you'll continue to cooperate with us in the future.")
			flt
			itemcreate -1, ITEM_ID_ASTEROID_BELT, cdata(CDATA_X, CHARA_PLAYER), cdata(CDATA_Y, CHARA_PLAYER), 0
			flt
			itemcreate -1, ITEM_ID_PLATINUM_COIN, cdata(CDATA_X, CHARA_PLAYER), cdata(CDATA_Y, CHARA_PLAYER), 5
			flt
			itemcreate -1, ITEM_ID_SMALL_MEDAL, cdata(CDATA_X, CHARA_PLAYER), cdata(CDATA_Y, CHARA_PLAYER), 5
			flt
			itemcreate -1, ITEM_ID_CARD_PACK, cdata(CDATA_X, CHARA_PLAYER), cdata(CDATA_Y, CHARA_PLAYER), 5
			flt
			itemcreate -1, ITEM_ID_MUSIC_TICKET, cdata(CDATA_X, CHARA_PLAYER), cdata(CDATA_Y, CHARA_PLAYER), 500
			txt_questitem
			txt_questupdate
			gdata(GDATA_FLAG_MAIN) = 382
			goto *chat_end
		}
		if ( gdata(GDATA_FLAG_MAIN) >= 363 ) {
			if ( gdata(GDATA_FLAG_MAIN_CHAOS_CRADLE_4) == 1 ) {
				chatMore lang("メイルーンの銀熊の足取りと、浮遊大陸の調査を独自に進めてください。調査の報酬は再検討しましょう。", "Do not forget to arrive at Mayroon, please contact me through the informer.")
				goto *chat_end
			}
		}
		if ( gdata(GDATA_FLAG_MAIN) >= 363 ) {
			if ( gdata(GDATA_FLAG_MAIN_CHAOS_CRADLE_4) == 0 ) {
				chatMore lang("ポート・カプールの船長から、航海中にあなたが突如行方不明になったとの報告を受けています。一体、何があったのか話してください。", "Do not forget to arrive at Mayroon, please contact me through the informer.")
				redraw 0
				gosub *screen_draw
				gosub *screen_fade
				gsel 4
				pos 0, 0
				picload exedir + "graphic\\face1" + devfile + ".bmp", 1
				gsel 0
				chatMore lang("そんなことが…。今まで行方不明になった者たちはあの浮遊大陸に…？わかりました。メイルーンの銀熊の足取りと、浮遊大陸の調査を独自に進めてください。調査の報酬は再検討しましょう。", "Do not forget to arrive at Mayroon, please contact me through the informer.")
				gdata(GDATA_FLAG_MAIN_CHAOS_CRADLE_4) = 1
				goto *chat_end
			}
		}
		if ( gdata(GDATA_FLAG_MAIN) == 362 ) {
			chatMore lang("メイルーンに到着したら忘れずに、情報屋を介して連絡をくださいね。", "Don't forget to contact me through one of my informers once you've arrived in Mayroon."), strbye
			goto *chat_end
		}
		if ( gdata(GDATA_FLAG_MAIN) == 361 ) {
			chatMore lang("私達の雇った冒険者の一人、メイルーンの銀熊は消息を絶つ寸前、故郷周辺の調査を行っていました。手始めに、あなたにはメイルーンの銀熊の足取りを追ってもらいたいのです。", "We just lost contact with one of the adventurers we hired known as the Silver Bear of Mayroon. She had been investigating around her hometown. I'd like for you to begin by following in her footsteps.")
			chatList 0, lang("わかった", "Will do.")
			chatList 1, lang("船だけは嫌だ", "I hate boats.")
			buff = lang("銀熊の故郷はノイエルの遥か東、大陸極東の城下町…雪と氷に覆われ道などはないので陸路は避け、ポート・カプールから船で東部へ回り込んでください。", "Her hometown is located far east of Noyel. The entire area is an icy wilderness, so you should avoid traveling overland and instead seek a boat leaving from Port Kapul.")
			gosub *chat_select
			if ( chatval == 1 ) {
				chatList 0, lang("わかった", "Will do.")
				chatList 1, lang("絶対に船に乗りたくない", "Never again would still be too soon.")
				buff = lang(cdatan(CDATAN_NAME, CHARA_PLAYER) + "、大丈夫ですよ。洋上でのエーテル風も最近は観測されていません。それに私達の用意する探査船ならエーテル風程度で沈むことはないでしょう。", "Don't worry, " + cdatan(CDATAN_NAME,0) + ". The Etherwind hasn't been seen on the ocean recently. Regardless, the ship we've prepared for the investigation wouldn't be sunk by the Etherwind anyways.")
				gosub *chat_select
				if ( chatval == 1 ) {
					chatMore lang("そ、そんなに怯えなくても…。あ！逃げないでください！", "T-there's nothing to be afraid of... Ah! Please don't run away!"), strbye
					goto *chat_end
				}
			}
			if ( chatval == 0 ) {
				chatMore lang("ポート・カプールの船長にはすでに話をつけています。この紹介状を持って行ってください。", "The captain of the ship is waiting in Port Kapul. Take this letter of introduction. He knows what to do."), strbye
				snd SOUNDLIST_WRITE1
				txtef COLOR_GREEN
				txt lang("[紹介状]を受け取った。ジャーナルが更新された。", "You receive a [Letter of Introduction]. Your journal has been updated.")
				gdata(GDATA_FLAG_MAIN) = 362
				goto *chat_end
			}
			goto *chat_end
		}
		if ( gdata(GDATA_FLAG_MAIN) == 360 ) {
			chatList 0, lang("引き受けよう", "I'll do it.")
			chatList 1, lang("どうでもいい", "Who cares.")
			chatList 2, lang("いくら出す？", "How much will you pay me?")
			buff = lang(cdatan(CDATAN_AKA, CHARA_PLAYER) + cdatan(CDATAN_NAME, CHARA_PLAYER) + "…！またあなたの力が必要なのです。あなたもうわさで耳にしたことがあるかもしれませんが、今このイルヴァの各地で行方不明者が続出しています。あなたに頼みたいことは２つ。行方不明者の居所を突き止めること、そして事件の元凶を断つことです。", cdatan(CDATAN_NAME, CHARA_PLAYER) + "...! It's good to see you. We need your power once again. You may have already heard rumors about this, but people have been disappearing all over Ylva. I have two things I want to ask you to do. Find out what has happened to the people who disappeared, and stop those responsible for it.")
			gosub *chat_select
			if ( chatval == 0 ) {
				chatMore lang("あなたの協力に感謝します。早速、メイルーンへ調査に赴いて欲しいのです。準備が出来たらまた話しかけてください。", "Your cooperation is appreciated. I'd like for you to begin your investigation at once, starting in Mayroon.")
				chatMore lang("それと…そうですね、報酬は成果に応じて適宜支払いましょう。", "And... Right, I'll reward you based on the outcome."), strbye
				gdata(GDATA_FLAG_MAIN) = 361
				goto *chat_end
			}
			if ( chatval == 2 ) {
				chatMore lang("…。", "...")
				chatMore lang("少し、考えさせてください。", "Let me think about it."), strbye
				goto *chat_end
			}
			chatMore lang("ごめんなさい。あなたにも選ぶ権利があるのに。私、つい舞い上がってしまって…。", "I'm sorry. Of course you have the right to choose. I just let myself get carried away..."), strbye
			goto *chat_end
		}
		if ( gdata(GDATA_FLAG_MAIN) >= 200 & gdata(GDATA_FLAG_MAIN) < 360 ) {
			chatMore lang("私達は…失敗してしまったのですね、サイモアの陰謀を止めることに。あなたが《常闇の眼》を入手するために冒した危険も、カラムの命も、今となっては何の意味があったのでしょう。", "We... have failed, haven't we, to stop Saimore's scheme. Everything, the <Origin of Vice> you obtained from your travels and Karam's death, what did they all mean?")
			chatMore lang("ゆっくりと死に行く世界の中で、私達は無力感と罪を抱えて生きています。森を忌み嫌い、あるいは迫害を見ぬふりをしてきた私達が、サイモアだけを責めることなどできません。いっそのこと、あの時森とともに…", "In this slowly dying world we can only carry on with our sins and weakness. Hating the forest or ignoring those who did, how can we blame Saimore? We should have just... along with the forest...")
			chatMore lang("ごめんなさい、つまらないことを聞かせてしまって。あなたは…あなたの目には…まだ希望の光が宿っている。" + cdatan(CDATAN_AKA, CHARA_PLAYER) + cdatan(CDATAN_NAME, CHARA_PLAYER) + "、あなたはその運命の先に何を見ているの？", "I'm sorry, forcing you to listen to my blathering. You... Those eyes of yours... They still have the glimmer of hope. " + cdatan(CDATAN_AKA, CHARA_PLAYER) + " " + cdatan(CDATAN_NAME, CHARA_PLAYER) + ", what can you see beyond this fate?"), strbye
			goto *chat_end
		}
		if ( gdata(GDATA_FLAG_MAIN) == 120 ) {
			chatMore lang(cdatan(CDATAN_NAME, CHARA_PLAYER) + "、遂に三つの魔石を揃えたのですね。私達の調査によれば、魔石はレシマスの秘宝の間への扉を開く鍵となるはず。しかし、レシマスの奥深くには恐ろしい魔物が巣食い、その場所が何階にあるかまでは判明していません。", "It looks like you've finally managed to acquire all three of the stones, " + cdatan(CDATAN_NAME, CHARA_PLAYER) + ". According to the information we've learned during the excavation, these stones are the key that will unlock the deepest reaches of Lesimas. However, be aware that terrifying monsters lurk in the abyss of Lesimas, and we have no idea how deep those caverns go.")
			chatMore lang("あなたの任務…おそらくは最後の任務は、決して易しいものではなく、失敗も許されません。レシマスの探索を進め、秘宝の間を見つけてください。そして、《常闇の眼》を地上に持ち帰り、ザナンの陰謀を阻止するのです。", "This will be your last mission. This will be no easy task, but failure is not an option. It's up to you to complete the excavation of Lesimas and find the room where the codex is kept. If you can't retrieve the <Origin of Vice> we will never be able to uncover the conspiracy Zanan has set into motion.")
			chatMore lang("カラムの言葉が正しければ、秘宝を守るのは今は亡きザシム王の従弟ゼーム。ゼームは名うての魔術師としても知られていました。彼が生きながらえているのも何らかの魔力によるものでしょう。心して望んでください。", "If what Karam told us is true, the codex will be guarded by the late king Zashim's cousin, Zeome. Zeome was known to have been a very powerful warlock. In his day, he was by far the most powerful sorcerer alive. I wouldn't dare confront him unless you are extremely well prepared.")
			chatMore lang("あなたの働きには、感謝の言葉だけでは報いきれません。この指輪は、スターシャ様からの贈り物です。あなたの冒険の成功を祈っています。", "Words alone are not enough to express our gratitude for all that you have done. This ring is a gift from Queen Stersha. We are praying for your success, " + cdatan(CDATAN_NAME, CHARA_PLAYER) + "."), strbye
			snd SOUNDLIST_WRITE1
			txtef COLOR_GREEN
			txt lang("レシマス25階の鍵を受け取った。ジャーナルが更新された。", "You receive a key of Lesimas 25th level. Your journal has been updated.")
			flt
			itemcreate -1, ITEM_ID_PALMIA_PRIDE, cdata(CDATA_X, CHARA_PLAYER), cdata(CDATA_Y, CHARA_PLAYER), 0
			txt_questitem
			gdata(GDATA_FLAG_MAIN) = 125
			goto *chat_end
		}
		if ( gdata(GDATA_FLAG_MAIN) == 105 ) {
			chatMore lang(cdatan(CDATAN_NAME, CHARA_PLAYER) + "、あなたの帰還を待っていました。カラムは無事に…いえ、その顔を見れば想像はつきます。私達の救助は遅すぎたのですね…。", "I've been waiting for you to return, " + cdatan(CDATAN_NAME, CHARA_PLAYER) + ". I hope that Karam is... no, I can tell just by looking at you. Then our rescue attempt was too little too late.")
			redraw 0
			gosub *screen_draw
			gosub *screen_fade
			gsel 4
			pos 0, 0
			picload exedir + "graphic\\face1" + devfile + ".bmp", 1
			gsel 0
			chatMore lang("…カラムの言葉、確かに受け取りました。《常闇の眼》という古宝の伝承は、私も本で読んだことがあります。それは、イルヴァの大地の上に築かれた全ての歴史の真相を網羅していると伝えられています。もしカラムが危惧していたように、ザナンのサイモアが自らの説の誤りを葬らんとするためレシマスの秘宝を狙っているとしたら、私達はそれを阻止しなければなりません。", "We'll take Karam's message to heart then... I remember reading about the <Origin of Vice> in one of these books. I believe it referred to the codex as an exhaustive account of the history of all things in Ylva. If, as Karam suspected, Saimore is trying to acquire the codex in order to cover up gaps in his story we can't allow him to succeed.")
			chatMore lang("…王の悲報はもう耳にしているでしょう。都の土は涙で濡れていようとも、今の私達に喪に服している時間はありません。カラムと、そして王の意思を継ぐためにも。", "I'm sure you've already heard the tragic news about the king. All of Palmia is heartbroken by the king's demise, but we can't afford to spend our time mourning right now. We have to push on, for Karam... and for the king's sake.")
			chatMore lang("あなたの次の任務は、三つの魔石の入手です。魔石には、レシマスの秘密を解く何らかの力が秘められていると伝えられています。魔石の所在は判明していますが、どこも危険な場所ばかり。まずは、各地を探索し、経験を積んでから臨んだほうがいいでしょう。", "Your next task is to retrieve the three magic stones. It's written in several of our historical accounts that the stones are the key to unlocking the secrets of Lesimas. We already know where the stones are located, but actually getting the stones is definitely easier said than done. First, you should scout the areas, gather info, and build your strength.")
			chatMore lang("探索に必要な情報がある時は、いつでも私に話しかけてくださいね。帰還したばかりなのに酷ですが、あなたに期待しています。", "Please come see me anytime you get information that would be useful to the expedition. I know you've just returned and we're asking an awful lot of you, but I don't have any other choice."), strbye
			snd SOUNDLIST_WRITE1
			txtef COLOR_GREEN
			txt lang("レシマス17階の鍵を受け取った。ジャーナルが更新された。", "You receive a key of Lesimas 17th level. Your journal has been updated.")
			gdata(GDATA_FLAG_MAIN) = 110
			goto *chat_end
		}
		if ( gdata(GDATA_FLAG_MAIN) >= 60 ) {
			buff = lang("あら、" + cdatan(CDATAN_NAME, CHARA_PLAYER) + "。レシマスの調査は進んでいるかしら？ 何か必要な情報があれば、何でも聞いてください。", "" + cdatan(CDATAN_NAME, CHARA_PLAYER) + ", how's your investigation going? Ask anything you'd like to know.")
			chatList 6, lang("レシマスについて", "Tell me about Lesimas.")
			chatList 5, lang("任務について", "Tell me about my task.")
			if ( gdata(GDATA_FLAG_MAIN) >= 100 & gdata(GDATA_FLAG_MAIN) <= 120 ) {
				chatList 3, lang("古城について", "Tell me about the ancient castle.")
				chatList 2, lang("灼熱の塔について", "Tell me about the tower of infernos.")
				chatList 1, lang("死者の洞窟について", "Tell me about the crypt of the damned.")
			}
			chatList 0, strbye
			chatesc = 1
			gosub *chat_select
			if ( chatval == 6 ) {
				chatMore lang("ネフィアの迷宮群の一つレシマスは、パルミアの歴史と大きな関わりがあります。エウダーナがネフィアの秘宝の一つにより繁栄を約束されたように、第三代の王ザシムと従弟ゼームもレシマスの秘宝を求め、調査隊を繰り出していました。", "Lesimas is one of the numerous ruins of Nefia. It is a significant part of the history of Palmia. The Eulderna sought to bring themselves prosperity using one of the treasures of Nefia, so the third king, Zashim and his cousin Zeome organized an excavation of Lesimas.")
				chatMore lang("そしてある日、ついに調査隊の朗報を受けた王と従弟は、レシマスの最下層に赴き、秘宝の眠る部屋へと足を踏み入れたのです…しかし数刻の後、部屋から出てきたのはザシム王一人だけでした。ザシム王は側近にこう言ったと伝えられています。", "Eventually the king and his cousin received word that the excavation had been completed, so they descended to the deepest reaches of Lesimas. Together they set foot into the darkened room where the codex was said to reside, yet after some number of hours, King Zashim emerged from the chamber alone. As the legend goes, King Zashim said the following words to his aides.")
				chatMore lang("「それは強き者の手の内では決して輝くことはない。弱き者の手の内では黄金のごとくまばゆいが、その輝きを他の者に見せることはできない。この秘宝は、常闇の中で永遠に眠っているべきものなのだ。直ちに部屋を封印するがよい。従弟はもはや帰っては来るまい」", "\"In the hands of the mighty it was dull and lifeless, devoid of magic... yet... in the hands of the meek it shone with a brilliant golden light that defies description. But no matter how I tried, I could not show that light to anyone else. The codex was meant to remain in these depths for all of eternity. We should seal this place off. My cousin will never return from these caves.\"")
				chatMore lang("秘宝が眠る部屋は魔術により封印され、封印の鍵となる三つの魔石は、それぞれ最も強大で邪悪な存在の元に送られたといいます。魔石の真の価値は知らさずに。", "And so, they sealed the cavern with powerful magic and bound that seal to three magic stones. They gave each stone to a powerful guardian and sent them to three separate strongholds to watch over the stones. I don't believe the guardians knew the true value or purpose of the stones.")
				chatMore lang("以来、パルミアの代々の王家は、ザシム王の意思を引き継ぎ、洞窟にはもう何もないかのように、他の国々の目を欺いてきたのです。", "Since that day, the passing generations of Palmia's royal family have preserved King Zashim's mandate and we've always deceived the other nations into believing there was nothing of value in Lesimas.")
				goto *chat_unique
			}
			if ( chatval == 5 ) {
				if ( gdata(GDATA_FLAG_MAIN) >= 125 ) {
					chatMore lang("レシマスの探索を進め、秘宝の間を見つけてください。あなたの任務は、《常闇の眼》を地上に持ち帰ることです。", "Complete the excavation of Lesimas and find the room where the codex is kept. And retrieve the <Origin of Vice>.")
					chatMore lang("カラムの言葉が正しければ、秘宝を守るのは今は亡きザシム王の従弟ゼーム。ゼームは名うての魔術師としても知られていました。彼が生きながらえているのも何らかの魔力によるものでしょう。心して臨んでください。", "If what Karam told us is true, the codex will be guarded by the late king Zashim's cousin, Zeome. Zeome was known to have been a very powerful warlock. In his day, he was by far the most powerful sorcerer alive. I wouldn't dare confront him unless you are extremely well prepared.")
					goto *chat_unique
				}
				if ( gdata(GDATA_FLAG_MAIN) >= 110 ) {
					chatMore lang("あなたの任務は、三つの魔石の入手です。魔石には、レシマスの秘密を解く何らかの力が秘められていると伝えられています。魔石の所在は判明していますが、どこも危険な場所ばかり。まずは、各地を探索し、経験を積んでから臨んだほうがいいでしょう。", "Your next task is to retrieve the three magic stones. It's said that the stones are the key to unlocking the secrets of Lesimas. We already know where the stones are located, but all three locations are extremely dangerous. First, you should scout the areas, gather info, and build your strength.")
					goto *chat_unique
				}
				chatMore lang("あなたの任務は、レシマスに赴き、冒険者カラムとの接触を試みることです。彼から最後に連絡があったのは、レシマスの16階。おそらくは、より深層に探索の手を広げているでしょう。彼の足取りをつかみ、私に報告してください。", "Your duty will be to penetrate into Lesimas and make contact with <Karam>. In the last report we received from him, he told us he was on the 16th floor. If you can find him, perhaps we can get this excavation back on track. Godspeed, " + cdatan(CDATAN_NAME, CHARA_PLAYER) + ", find out what happened to <Karam>.")
				goto *chat_unique
			}
			if ( chatval == 3 ) {
				chatMore lang("古城の宝物庫には、数々の財宝とともに《覇者の魔石》が眠っていると伝えられています。ヴェルニースを南に下った閑静な森の中に佇むこの城は、古の王族により建てられました。しかし王都がパルミアに移り、廃墟となった城は、長らくならず者の拠点として使われるように…", "The <King's Magic Stone>, along with numerous other treasures, sleeps deep in the recesses of the vaults of the Ancient Castle, which was built by a long forgotten generation of the royal family. However, the royal family eventually relocated to Palmia and the former throne of the kingdom fell into disrepair and decay. It has been ages since anyone even set foot in the old castle...")
				chatMore lang("一世紀前に《古城の主ワイナン》が占拠してからは、ダルフィの悪漢でさえ近づかない恐ろしい場所として知られるようになりました。危険度はレシマスの１７階相当です。", "After <Lord Wynan> took charge of the castle in the first century, even the thugs of Derphy became too scared to approach the castle. The danger level in the castle is roughly equivalent to the 17th floor of Lesimas.")
				chatMore lang("噂では、《ワイナン》がまだ生きて王座に君臨しているとか…彼は生粋の戦士で、その手に持つ槍斧《ランキス》は相対するものの生命を吸い取ると怖れられています。地獄への耐性か、間合いをとる手段なくして彼と対するのは賢明とはいえませんね。", "It is rumored that <Wynan> still rules the throne along with his personally trained army. Legends tell that the deadly halberd he carries, <Rankis>, can drain the life from his enemies with the greatest of ease. It would be wise to boost your resistance to nether... oh, and bear in mind that unless you can time your actions wisely he'll devour you like a dog.")
				goto *chat_unique
			}
			if ( chatval == 2 ) {
				chatMore lang("パルミアを出て北の未開の地を越えていくと、真紅に燃え盛る灼熱の塔が見えます。この塔の守護者、《赤き義眼のクルイツゥア》と呼ばれる魔女が、《賢者の魔石》を所持しているはずです。", "If you head north from Palmia, through the untamed lands, you will eventually see a tower blazing with an aura of flames. The guardian of the tower, a powerful witch named <Quruiza the Red-eyed Deceiver>, watches over the <Sage's Magic Stone>.")
				chatMore lang("《クルイツゥア》の強力な魔法だけでなく、彼女の僕であり夫である《鋼鉄竜コルゴン》の力も恐るべきものです。", "Quruiza's magic is not the only thing you have to fear, either; her husband, the <Steel Dragon Corgon> has pledged his strength to her defense. No doubt you'll have to face him as well.")
				chatMore lang("言うまでもないですが、この塔を探索するには、何らかの手段で火への耐性を得る必要があるでしょう。もし体力を失っていくようであれば、耐性を高めてから挑戦したほうが無難です。危険度はレシマスの１５階相当です。", "I probably don't need to tell you this, but if you plan to brave the tower, you'll need some sort of powerful resistance to heat and flames. If you find you can't hack it inside, I'd suggest you find some way to protect yourself from the heat before venturing back inside. The danger level in the tower is roughly equivalent to the 15th floor of Lesimas.")
				goto *chat_unique
			}
			if ( chatval == 1 ) {
				chatMore lang("《愚者の魔石》が眠っているとされる死者の洞窟は、最も危険な場所です。多くの名のある冒険者が命を落とし、不死者となりこの洞窟の中をさ迷っています。", "The <Crypt of the Damned> is an ancient cave where the walking dead have amassed in droves. It is the most dangerous of the three strongholds. Countless famous adventurers have lost their lives in the crypt, doomed to wander its halls for all eternity as undead.")
				chatMore lang("魔石はこの洞窟を支配する《闇の奇形イスシズル》が身に着けているはずです。死霊術使い達に崇められ、その名は大陸中で畏怖されていますが、《イスシズル》の姿や力は、全くの謎に包まれています…", "I believe that the <Dark Abomination Issizzle> rules the hallowed crypts. He is a powerful necromancer and his name is feared all across the continent. Issizzle is shrouded in mystery so I'm afraid I can't tell you much more.")
				chatMore lang("死者の洞窟はヴェルニースとパルミアを結ぶ街道の中ほどにあり、危険度はレシマスの２５階相当です。万全に準備を整えていく必要があるでしょう。", "The crypt of the damned is along the road that runs between Vernis and Palmia. The danger level of the crypt is roughly equivalent to the 25th floor of Lesimas. You will need to be well prepared before venturing into the crypts.")
				goto *chat_unique
			}
			goto *chat_end
		}
		if ( gdata(GDATA_FLAG_MAIN) == 50 ) {
			listmax = 0
			buff = lang("あなたが" + cdatan(CDATAN_NAME, CHARA_PLAYER) + "ですね。使いの者から聞いています。私はエリステア、ネフィア迷宮群の歴史の研究に携わって来ました。今は王の命によりレシマス調査隊の副長を務めていますが、洞窟に眠る多くの謎と危険な魔物の存在のために、調査は思わしく進んでいません。あなたのような冒険者に力になってもらえると心強いです。", "You must be " + cdatan(CDATAN_NAME, CHARA_PLAYER) + ". I've already heard some of the soldiers talking about you. My name is Erystia, and I study the history of Nefia, the mysterious labyrinths common to this land. The King has placed me in charge of the expedition to investigate Lesimas. Unfortunately, due to numerous obstacles and an abundance of hostile monsters residing in the caverns, our investigation has made little, if any, progress. It would be very reassuring if we had the strength of adventurers like you backing us up.")
			chatList 1, lang("力になる", "I will gladly pledge my strength to Palmia.")
			chatList 0, lang("断る", "I refuse.")
			chatesc = 1
			gosub *chat_select
			if ( chatval == 0 ) {
				chatMore lang("わかりました。考えが変わったら、また声をかけてください。", "Fair enough... but should you change your mind feel free to come back."), strbye
				goto *chat_end
			}
			chatMore lang("よかった。こんなことを言っては悪いけれど、城の兵士達は機転に欠けていて、調査にはあまり役に立ってくれなかったの。", "Fantastic. I hate to admit it, but the castle's regular soldiers have been virtually useless so far...")
			chatMore lang("私達の目的は、レシマスを探索し、最下層にあるといわれる《秘宝》を持ち帰ることです。《秘宝》の正体とレシマスについての研究はある程度進んでいます。一度に言っても覚えられないでしょうから、必要があればその度に聞いてください。", "Our objective is to penetrate to the deepest reaches of Lesimas and retrieve the <codex> hidden there. Once we know the true nature of the <codex>, we can complete our research on the ancient dungeon. You probably won't remember all this after hearing it only once, so feel free to ask me about it again.")
			chatMore lang("最初の仕事として、あなたにはある人物の探索をお願いします。男の名は《カラム》。あなたと同じように、彼もレシマス探索の協力を買って出た屈指の冒険者です。調査隊の情報源として少なからぬ貢献をしていました。しかし、彼からの音沙汰がここ数週間まったくないのです。", "Now, on to the first order of business. We need you to investigate the fate of one of our agents. His name is <Karam>. Like you, he is one of the foremost adventurers in the land. He agreed to assist with the expedition into Lesimas. He had been contributing information to the expedition's limited intelligence on the caverns. However... we haven't heard anything from him in some number of weeks.")
			chatMore lang("あなたの任務は、レシマスに赴き、《カラム》との接触を試みることです。彼から最後に連絡があったのは、レシマスの16階。おそらくは、より深層に探索の手を広げているでしょう。彼の足取りをつかみ、私に報告してください。", "Your duty will be to penetrate into Lesimas and make contact with <Karam>. In the last report we received from him, he told us he was on the 16th floor. If you can find him, perhaps we can get this excavation back on track. Godspeed, " + cdatan(CDATAN_NAME, CHARA_PLAYER) + ", find out what happened to <Karam>."), strbye
			snd SOUNDLIST_WRITE1
			txtef COLOR_GREEN
			txt lang("レシマス4階の鍵を受け取った。ジャーナルが更新された。", "You receive a key of Lesimas 4th level. Your journal has been updated.")
			gdata(GDATA_FLAG_MAIN) = 60
			goto *chat_end
		}
		_switch_sw++
	}
	if ( _switch_val == CREATURE_ID_KARAM_THE_LONELY_WOLF_OF_KARUNE | _switch_sw ) {
		_switch_sw = 0
		if ( gdata(GDATA_FLAG_MAIN) == 90 ) {
			gdata(GDATA_FLAG_MAIN) = 100
			chatMore lang("…貴公は？そうか、エリステアが私を探すために…見ての通り私は傷を負い、もう動くことすらできぬ。しかし、貴公のおかげで、今まで生きながらえたことに意味を見出せるようだ。", "Who's there? So... Erystia sent you to find me... as you can see I'm badly wounded. I'm pretty much screwed aren't I? But then... now that you're here, maybe I won't have to die in vain after all.")
			chatMore lang("貴公にお願いする。エリステアに、私の言葉を伝えてもらいたい。信じがたいことだが、レシマスの奥深くに眠る秘宝を守護しているのは、今は亡きザシム王の従弟ゼームだ。秘宝の、いやレシマスの魔に操られているのだろうか。もはや生身の人間ではあるまい。", "I have something to ask of you. Relay this message to Erystia for me... Tell her that she must believe me when I say that the one guarding the codex in the depths of Lesimas is none other than former King Zashim's brother, Zeome. He's the one controlling the magic of the codex... or... no, not just the codex, but the whole of Lesimas. He's no longer human... he's something... more.")
			chatMore lang("それだけではない。ザナンのサイモアが秘宝を狙っていることは知っておろう。しかし、その理由は？", "But it doesn't end there... You need to know that Saimore from Zanan is also after the codex. But... why?")
			chatMore lang("ゼームが持つ秘宝の名は《常闇の眼》。世界の真実を映すといわれている。レム・イドの終焉とシエラ・テールの始まりを説き、自身の説に莫大な支持を得ているサイモアが、今更秘宝を求めるのは何故だ？", "The codex Zeome possesses... it's called the <Origin of Vice>. They say it describes the hidden truth of the world. But if Saimore's widely accepted story about the end of Rehm-Ido and the beginning of the era of Sierre Terre is true, then why would he be after the relic?")
			chatMore lang("サイモアの後押しにより、エレアとの戦が始まろうとしている。異形の森がレム・イドの災厄《メシェーラ》であるというのは、果たして確かなのだろうか。そして、もしサイモアの説が偽りであるとすれば、かの者の本当の目的は？…私には悪い予感がする。", "Saimore has been pushing for war against the Eleas. The truth is that Saimore's claim that the Heretical Forest destroyed the world of the era of Rehm-Ido is a carefully constructed lie and that the <Meshera> are real. But then, if Saimore's theory was just a deception meant to incite a war, then what is he really after? I have a bad feeling about all of this...")
			chatMore lang("私の役目はこれまでだ。この傷ではどうせ地上まで辿りつけまい。この報せを早く都に…貴公に運命の神の加護のあらんことを！", "My role in this saga is at an end... I'll never make it out with these injuries... Deliver my message to the capital quickly... and may the gods of fate watch over you..."), strbye
			repeat 4
				flt calcobjlv(gdata(GDATA_LEVEL)), calcfixlv(FIX_QUALITY_GOOD)
				flttypemajor = fltsetdungeon()
				itemcreate -1, ITEM_ID_DUMMY, cdata(CDATA_X, tc), cdata(CDATA_Y, tc), 0
			loop
			flt
			itemcreate -1, ITEM_ID_GOLD_PIECE, cdata(CDATA_X, tc), cdata(CDATA_Y, tc), 1000 + rnd(200)
			flt
			itemcreate -1, ITEM_ID_PLATINUM_COIN, cdata(CDATA_X, tc), cdata(CDATA_Y, tc), 3
			flt
			itemcreate -1, ITEM_ID_BEJEWELED_CHEST, cdata(CDATA_X, tc), cdata(CDATA_Y, tc), 0
			inv(INV_ITEM_PARAM2, ci) = 0
			txt_questupdate
			txt lang(cdatan(CDATAN_NAME, tc) + "は自ら命を絶った…", cdatan(CDATAN_NAME, tc) + " kills himself...")
			chara_vanquish tc
			goto *chat_end
		}
		goto *chat_unique_SWEND1
	}
	if ( _switch_val == CREATURE_ID_GAROK_THE_LEGENDARY_SMITH | _switch_sw ) {
		_switch_sw = 0
		chatList 2, lang("素材槌の素材変化", "Change material of material kit.")
		chatList 1, lang("アイテムの名前・外見変更", "Change item name and appearance.")
		chatList 3, lang("ジュークボックス作成", "Make a jukebox.")
		chatList 0, strbye
		buff = lang("見て分からんか、わしゃ忙しいんじゃ。用があるなら手短にな。", "Can't you see I'm busy right now? If you want something, make it short.")
		gosub *chat_select
		if ( chatval == 1 ) {
			chatMore lang("そんなことか…まぁよい。手間賃としてブロンズ硬貨を1枚もらう。", "What? ...Fine. I'll do it for 1 bronze coin.")
			item_find ITEM_ID_BRONZE_COIN, 3, 1
			if ( stat != (-1) ) {
				cigp = stat
				if ( inv(INV_ITEM_NUM, cigp) >= 1 ) {
					invsubroutine = 1
					invctrl = 23, 10
					snd SOUNDLIST_INV
					gosub *com_inventory
					if ( key == key_cancel ) {
						goto *chat_end
					}
					if ( stat == 1 ) {
						chatMore lang("それで、何番の計画通りに作り変えればよいのじゃ。", "Okay. Enter the blueprint number that you want me to use.")
						txt lang(" (user\\item内のプラン番号を1~33で入力。21~33は48*96サイズ用。0で元に戻す) ", " (Enter the number of the sprite inside the useritem folder. Sprites 21-33 are 48*96 in size. Enter 0 to set it to the default.) ")
						val = (windoww - 100) / 2 + inf_screenx, winposy(90), 5, 0, 0
						inputlog = ""
						gosub *prompt_word
						if ( inv(INV_ITEM_PIC, ci) < xy2pic(0, 27) | inv(INV_ITEM_PIC, ci) > xy2pic(32, 27) ) {
							inv(INV_ITEM_PROPERTY, ci) = inv(INV_ITEM_PIC, ci) + 10
						}
						if ( inputlog == "0" ) {
							if ( inv(INV_ITEM_PARAM4, ci) != 0 ) {
								inv(INV_ITEM_PARAM4, ci) = 0
							}
							if ( inv(INV_ITEM_PROPERTY, ci) > PROP_SPECIAL ) {
								inv(INV_ITEM_PIC, ci) = inv(INV_ITEM_PROPERTY, ci) - 10
								inv(INV_ITEM_PROPERTY, ci) = PROP_NONE
								txtef COLOR_GREEN
								txt lang("元に戻した。", "You returned it to its original appearance.")
							}
						}
						else {
							if ( inputlog == "1" ) {
								inv(INV_ITEM_PARAM4, ci) = 1
								inv(INV_ITEM_PIC, ci) = xy2pic(0, 27)
							}
							if ( inputlog == "2" ) {
								inv(INV_ITEM_PARAM4, ci) = 2
								inv(INV_ITEM_PIC, ci) = xy2pic(1, 27)
							}
							if ( inputlog == "3" ) {
								inv(INV_ITEM_PARAM4, ci) = 3
								inv(INV_ITEM_PIC, ci) = xy2pic(2, 27)
							}
							if ( inputlog == "4" ) {
								inv(INV_ITEM_PARAM4, ci) = 4
								inv(INV_ITEM_PIC, ci) = xy2pic(3, 27)
							}
							if ( inputlog == "5" ) {
								inv(INV_ITEM_PARAM4, ci) = 5
								inv(INV_ITEM_PIC, ci) = xy2pic(4, 27)
							}
							if ( inputlog == "6" ) {
								inv(INV_ITEM_PARAM4, ci) = 6
								inv(INV_ITEM_PIC, ci) = xy2pic(5, 27)
							}
							if ( inputlog == "7" ) {
								inv(INV_ITEM_PARAM4, ci) = 7
								inv(INV_ITEM_PIC, ci) = xy2pic(6, 27)
							}
							if ( inputlog == "8" ) {
								inv(INV_ITEM_PARAM4, ci) = 8
								inv(INV_ITEM_PIC, ci) = xy2pic(7, 27)
							}
							if ( inputlog == "9" ) {
								inv(INV_ITEM_PARAM4, ci) = 9
								inv(INV_ITEM_PIC, ci) = xy2pic(8, 27)
							}
							if ( inputlog == "10" ) {
								inv(INV_ITEM_PARAM4, ci) = 10
								inv(INV_ITEM_PIC, ci) = xy2pic(9, 27)
							}
							if ( inputlog == "11" ) {
								inv(INV_ITEM_PARAM4, ci) = 11
								inv(INV_ITEM_PIC, ci) = xy2pic(10, 27)
							}
							if ( inputlog == "12" ) {
								inv(INV_ITEM_PARAM4, ci) = 12
								inv(INV_ITEM_PIC, ci) = xy2pic(11, 27)
							}
							if ( inputlog == "13" ) {
								inv(INV_ITEM_PARAM4, ci) = 13
								inv(INV_ITEM_PIC, ci) = xy2pic(12, 27)
							}
							if ( inputlog == "14" ) {
								inv(INV_ITEM_PARAM4, ci) = 14
								inv(INV_ITEM_PIC, ci) = xy2pic(13, 27)
							}
							if ( inputlog == "15" ) {
								inv(INV_ITEM_PARAM4, ci) = 15
								inv(INV_ITEM_PIC, ci) = xy2pic(14, 27)
							}
							if ( inputlog == "16" ) {
								inv(INV_ITEM_PARAM4, ci) = 16
								inv(INV_ITEM_PIC, ci) = xy2pic(15, 27)
							}
							if ( inputlog == "17" ) {
								inv(INV_ITEM_PARAM4, ci) = 17
								inv(INV_ITEM_PIC, ci) = xy2pic(16, 27)
							}
							if ( inputlog == "18" ) {
								inv(INV_ITEM_PARAM4, ci) = 18
								inv(INV_ITEM_PIC, ci) = xy2pic(17, 27)
							}
							if ( inputlog == "19" ) {
								inv(INV_ITEM_PARAM4, ci) = 19
								inv(INV_ITEM_PIC, ci) = xy2pic(18, 27)
							}
							if ( inputlog == "20" ) {
								inv(INV_ITEM_PARAM4, ci) = 20
								inv(INV_ITEM_PIC, ci) = xy2pic(19, 27)
							}
							if ( inputlog == "21" ) {
								inv(INV_ITEM_PARAM4, ci) = 21
								inv(INV_ITEM_PIC, ci) = xy2pic(20, 27)
							}
							if ( inputlog == "22" ) {
								inv(INV_ITEM_PARAM4, ci) = 22
								inv(INV_ITEM_PIC, ci) = xy2pic(21, 27)
							}
							if ( inputlog == "23" ) {
								inv(INV_ITEM_PARAM4, ci) = 23
								inv(INV_ITEM_PIC, ci) = xy2pic(22, 27)
							}
							if ( inputlog == "24" ) {
								inv(INV_ITEM_PARAM4, ci) = 24
								inv(INV_ITEM_PIC, ci) = xy2pic(23, 27)
							}
							if ( inputlog == "25" ) {
								inv(INV_ITEM_PARAM4, ci) = 25
								inv(INV_ITEM_PIC, ci) = xy2pic(24, 27)
							}
							if ( inputlog == "26" ) {
								inv(INV_ITEM_PARAM4, ci) = 26
								inv(INV_ITEM_PIC, ci) = xy2pic(25, 27)
							}
							if ( inputlog == "27" ) {
								inv(INV_ITEM_PARAM4, ci) = 27
								inv(INV_ITEM_PIC, ci) = xy2pic(26, 27)
							}
							if ( inputlog == "28" ) {
								inv(INV_ITEM_PARAM4, ci) = 28
								inv(INV_ITEM_PIC, ci) = xy2pic(27, 27)
							}
							if ( inputlog == "29" ) {
								inv(INV_ITEM_PARAM4, ci) = 29
								inv(INV_ITEM_PIC, ci) = xy2pic(28, 27)
							}
							if ( inputlog == "30" ) {
								inv(INV_ITEM_PARAM4, ci) = 30
								inv(INV_ITEM_PIC, ci) = xy2pic(29, 27)
							}
							if ( inputlog == "31" ) {
								inv(INV_ITEM_PARAM4, ci) = 31
								inv(INV_ITEM_PIC, ci) = xy2pic(30, 27)
							}
							if ( inputlog == "32" ) {
								inv(INV_ITEM_PARAM4, ci) = 32
								inv(INV_ITEM_PIC, ci) = xy2pic(31, 27)
							}
							if ( inputlog == "33" ) {
								inv(INV_ITEM_PARAM4, ci) = 33
								inv(INV_ITEM_PIC, ci) = xy2pic(32, 27)
							}
							if ( inv(INV_ITEM_PIC, ci) >= xy2pic(0, 27) & inv(INV_ITEM_PIC, ci) <= xy2pic(32, 27) ) {
								gsel 1
								folder = exedir + "user\\item\\"
								dirlist buff, folder + "plan*.bmp"
								notesel buff
								repeat stat
									noteget file, cnt
									p = int(strmid(file, 4, instr(file, 4, "."))) + 890
									pos p \ 33 * inf_tiles, p / 33 * inf_tiles
									picload folder + file, 1
								loop
								gsel 0
							}
						}
						chatMore lang("ほれ。", "Done.")
						snd SOUNDLIST_BUILD1
						inv(INV_ITEM_NUM, cigp)--
					}
					else {
						obvious = 0
					}
					goto *chat_end
				}
			}
			chatMore lang("…持っておらんのか！", "That is not enough.")
			gosub *screen_draw
		}
		if ( chatval == 2 ) {
			medal = 0
			sozaituti = 0
			hennka = 0
			item_find ITEM_ID_SCROLL_SUPERIOR_MATERIAL, 3, 1
			if ( stat != (-1) ) {
				ci = stat
				if ( inv(INV_ITEM_NUM, ci) >= 1 ) {
					hennka = 1
				}
			}
			item_find ITEM_ID_BRONZE_COIN, 3, 1
			if ( stat != (-1) ) {
				ci = stat
				if ( inv(INV_ITEM_NUM, ci) >= 1 ) {
					medal = 1
				}
			}
			item_find ITEM_ID_MATERIAL_KIT, 3, 1
			if ( stat != (-1) ) {
				ci = stat
				if ( inv(INV_ITEM_NUM, ci) >= 1 ) {
					sozaituti = 1
				}
			}
			if ( hennka != 1 | medal != 1 | sozaituti != 1 ) {
				chatMore lang("じゃったら素材槌と*素材変化*の巻物を用意せい。それとブロンズ硬貨もじゃ。", "You'll need a material kit and a scroll of superior material before I can do that. And a bronze coin too.")
				goto *chat_end
			}
			else {
				chatList 1, lang("いい", "Yes.")
				chatList 0, lang("だめ", "No.")
				buff = lang("ほう。では*素材変化*の巻物を使って" + itemname(ci) + "を素材変化するがそれでよいな？手間賃としてブロンズ硬貨を1枚もらう。", "Oho. So you want me to use a scroll of superior material to change the material of your " + itemname(ci) + "? It'll cost you 1 bronze coin.")
				gosub *chat_select
				if ( chatval == 1 ) {
					chatList 0, lang("やっぱりやめる", "Cancel.")
					if ( (gdata(GDATA_DAY) + 5) \ 5 == 1 ) {
						chatList 1, lang("革", "leather")
					}
					if ( (gdata(GDATA_DAY) + 5) \ 5 == 1 ) {
						chatList 2, lang("宵晒", "dawn cloth")
					}
					if ( (gdata(GDATA_DAY) + 5) \ 5 == 1 ) {
						chatList 3, lang("鱗", "scale")
					}
					if ( (gdata(GDATA_DAY) + 5) \ 5 == 1 ) {
						chatList 4, lang("硝子", "glass")
					}
					if ( (gdata(GDATA_DAY) + 5) \ 5 == 1 ) {
						chatList 5, lang("ミスリル", "mithril")
					}
					if ( (gdata(GDATA_DAY) + 5) \ 5 == 1 ) {
						chatList 6, lang("シルバー", "silver")
					}
					if ( (gdata(GDATA_DAY) + 5) \ 5 == 1 ) {
						chatList 7, lang("竜鱗", "dragon scale")
					}
					if ( (gdata(GDATA_DAY) + 5) \ 5 == 2 ) {
						chatList 8, lang("シルク", "silk")
					}
					if ( (gdata(GDATA_DAY) + 5) \ 5 == 2 ) {
						chatList 9, lang("ザイロン", "zylon")
					}
					if ( (gdata(GDATA_DAY) + 5) \ 5 == 2 ) {
						chatList 10, lang("生もの", "raw")
					}
					if ( (gdata(GDATA_DAY) + 5) \ 5 == 2 ) {
						chatList 11, lang("水晶", "crystal")
					}
					if ( (gdata(GDATA_DAY) + 5) \ 5 == 2 ) {
						chatList 12, lang("鉄", "metal")
					}
					if ( (gdata(GDATA_DAY) + 5) \ 5 == 2 ) {
						chatList 13, lang("白銀", "platinum")
					}
					if ( (gdata(GDATA_DAY) + 5) \ 5 == 2 ) {
						chatList 14, lang("ダイヤ", "diamond")
					}
					if ( (gdata(GDATA_DAY) + 5) \ 5 == 3 ) {
						chatList 15, lang("布", "cloth")
					}
					if ( (gdata(GDATA_DAY) + 5) \ 5 == 3 ) {
						chatList 36, lang("木", "wood")
					}
					if ( (gdata(GDATA_DAY) + 5) \ 5 == 3 ) {
						chatList 16, lang("ボーン", "bone")
					}
					if ( (gdata(GDATA_DAY) + 5) \ 5 == 3 ) {
						chatList 17, lang("エメラルド", "emerald")
					}
					if ( (gdata(GDATA_DAY) + 5) \ 5 == 3 ) {
						chatList 18, lang("スティール", "steel")
					}
					if ( (gdata(GDATA_DAY) + 5) \ 5 == 3 ) {
						chatList 19, lang("ゴールデン", "gold")
					}
					if ( (gdata(GDATA_DAY) + 5) \ 5 == 3 ) {
						chatList 20, lang("鉛", "iron")
					}
					if ( (gdata(GDATA_DAY) + 5) \ 5 == 3 ) {
						chatList 21, lang("エーテル", "ether")
					}
					if ( (gdata(GDATA_DAY) + 5) \ 5 == 4 ) {
						chatList 22, lang("霊布", "spirit cloth")
					}
					if ( (gdata(GDATA_DAY) + 5) \ 5 == 4 ) {
						chatList 23, lang("珊瑚", "coral")
					}
					if ( (gdata(GDATA_DAY) + 5) \ 5 == 4 ) {
						chatList 24, lang("ミカ", "mica")
					}
					if ( (gdata(GDATA_DAY) + 5) \ 5 == 4 ) {
						chatList 25, lang("オブシディアン", "obsidian")
					}
					if ( (gdata(GDATA_DAY) + 5) \ 5 == 4 ) {
						chatList 26, lang("チタン", "titanium")
					}
					if ( (gdata(GDATA_DAY) + 5) \ 5 == 4 ) {
						chatList 27, lang("ルビナス", "rubynus")
					}
					if ( (gdata(GDATA_DAY) + 5) \ 5 == 4 ) {
						chatList 35, lang("ナノマシン", "nanomachine")
					}
					if ( (gdata(GDATA_DAY) + 5) \ 5 == 0 ) {
						chatList 28, lang("紙", "paper")
					}
					if ( (gdata(GDATA_DAY) + 5) \ 5 == 0 ) {
						chatList 37, lang("竹", "bamboo")
					}
					if ( (gdata(GDATA_DAY) + 5) \ 5 == 0 ) {
						chatList 29, lang("翼鳥鱗", "griffon scale")
					}
					if ( (gdata(GDATA_DAY) + 5) \ 5 == 0 ) {
						chatList 30, lang("真珠", "pearl")
					}
					if ( (gdata(GDATA_DAY) + 5) \ 5 == 0 ) {
						chatList 31, lang("ブロンズ", "bronze")
					}
					if ( (gdata(GDATA_DAY) + 5) \ 5 == 0 ) {
						chatList 32, lang("鉄鎖", "chain")
					}
					if ( (gdata(GDATA_DAY) + 5) \ 5 == 0 ) {
						chatList 33, lang("クロム", "chrome")
					}
					if ( (gdata(GDATA_DAY) + 5) \ 5 == 0 ) {
						chatList 34, lang("アダマンタイト", "adamantium")
					}
					buff = lang("今日の気分だとこんな感じゃ。どの素材にすればよいのか？", "Oho. So you want me to use a scroll of superior material to change the material of your " + itemname(ci) + "? It'll cost you 1 small medal.")
					gosub *chat_select
					if ( chatval > 0 ) {
						rndsozai = ITEM_MATERIAL_LEATHER
						if ( chatval == 1 ) {
							rndsozai = ITEM_MATERIAL_LEATHER
						}
						if ( chatval == 2 ) {
							rndsozai = ITEM_MATERIAL_DUSK
						}
						if ( chatval == 3 ) {
							rndsozai = ITEM_MATERIAL_SCALE
						}
						if ( chatval == 4 ) {
							rndsozai = ITEM_MATERIAL_GLASS
						}
						if ( chatval == 5 ) {
							rndsozai = ITEM_MATERIAL_MITHRIL
						}
						if ( chatval == 6 ) {
							rndsozai = ITEM_MATERIAL_SILVER
						}
						if ( chatval == 7 ) {
							rndsozai = ITEM_MATERIAL_DRAGON
						}
						if ( chatval == 8 ) {
							rndsozai = ITEM_MATERIAL_SILK
						}
						if ( chatval == 9 ) {
							rndsozai = ITEM_MATERIAL_ZYLON
						}
						if ( chatval == 10 ) {
							rndsozai = ITEM_MATERIAL_RAW
						}
						if ( chatval == 11 ) {
							rndsozai = ITEM_MATERIAL_CRYSTAL
						}
						if ( chatval == 12 ) {
							rndsozai = ITEM_MATERIAL_METAL
						}
						if ( chatval == 13 ) {
							rndsozai = ITEM_MATERIAL_PLATINUM
						}
						if ( chatval == 14 ) {
							rndsozai = ITEM_MATERIAL_DIAMOND
						}
						if ( chatval == 15 ) {
							rndsozai = ITEM_MATERIAL_CLOTH
						}
						if ( chatval == 36 ) {
							rndsozai = ITEM_MATERIAL_WOOD
						}
						if ( chatval == 16 ) {
							rndsozai = ITEM_MATERIAL_BONE
						}
						if ( chatval == 17 ) {
							rndsozai = ITEM_MATERIAL_EMERALD
						}
						if ( chatval == 18 ) {
							rndsozai = ITEM_MATERIAL_STEEL
						}
						if ( chatval == 19 ) {
							rndsozai = ITEM_MATERIAL_GOLD
						}
						if ( chatval == 20 ) {
							rndsozai = ITEM_MATERIAL_IRON
						}
						if ( chatval == 21 ) {
							rndsozai = ITEM_MATERIAL_ETHER
						}
						if ( chatval == 22 ) {
							rndsozai = ITEM_MATERIAL_SPIRIT
						}
						if ( chatval == 23 ) {
							rndsozai = ITEM_MATERIAL_CORAL
						}
						if ( chatval == 24 ) {
							rndsozai = ITEM_MATERIAL_MICA
						}
						if ( chatval == 25 ) {
							rndsozai = ITEM_MATERIAL_OBSIDIAN
						}
						if ( chatval == 26 ) {
							rndsozai = ITEM_MATERIAL_TITANIUM
						}
						if ( chatval == 27 ) {
							rndsozai = ITEM_MATERIAL_RUBYNUS
						}
						if ( chatval == 35 ) {
							rndsozai = ITEM_MATERIAL_NANOMACHINE
						}
						if ( chatval == 28 ) {
							rndsozai = ITEM_MATERIAL_PAPER
						}
						if ( chatval == 37 ) {
							rndsozai = ITEM_MATERIAL_BAMBOO
						}
						if ( chatval == 29 ) {
							rndsozai = ITEM_MATERIAL_GRIFFON
						}
						if ( chatval == 30 ) {
							rndsozai = ITEM_MATERIAL_PEARL
						}
						if ( chatval == 31 ) {
							rndsozai = ITEM_MATERIAL_BRONZE
						}
						if ( chatval == 32 ) {
							rndsozai = ITEM_MATERIAL_CHAIN
						}
						if ( chatval == 33 ) {
							rndsozai = ITEM_MATERIAL_CHROME
						}
						if ( chatval == 34 ) {
							rndsozai = ITEM_MATERIAL_ADAMANTIUM
						}
						item_find ITEM_ID_MATERIAL_KIT, 3, 1
						if ( stat != (-1) ) {
							ci = stat
							if ( inv(INV_ITEM_NUM, ci) >= 1 ) {
								inv(INV_ITEM_NUM, ci)--
							}
						}
						item_find ITEM_ID_SCROLL_SUPERIOR_MATERIAL, 3, 1
						if ( stat != (-1) ) {
							ci = stat
							if ( inv(INV_ITEM_NUM, ci) >= 1 ) {
								inv(INV_ITEM_NUM, ci)--
							}
						}
						item_find ITEM_ID_BRONZE_COIN, 3, 1
						if ( stat != (-1) ) {
							ci = stat
							if ( inv(INV_ITEM_NUM, ci) >= 1 ) {
								inv(INV_ITEM_NUM, ci)--
							}
						}
						redraw 0
						gosub *screen_draw
						gosub *screen_fade
						gsel 4
						pos 0, 0
						picload exedir + "graphic\\face2" + devfile + ".bmp", 1
						gsel 0
						snd SOUNDLIST_BUILD1
						flt
						nostack = 1
						itemcreate -1, ITEM_ID_MATERIAL_KIT, cdata(CDATA_X, CHARA_PLAYER), cdata(CDATA_Y, CHARA_PLAYER), 0
						inv(INV_ITEM_MATERIAL, ci) = rndsozai
						chatMore lang("ほれ、できたぞ。さっさと持っていかんか。", "There, it's done. Hurry up and take it."), strbye
					}
				}
				goto *chat_end
			}
		}
		if ( chatval == 3 ) {
			hennka = 0
			inv_getheader 0
			repeat invrange, invhead
				if ( inv(INV_ITEM_NUM, cnt) == 0 ) {
					continue
				}
				if ( ibit(ITEM_BIT_NO_DROP, cnt) ) {
					continue
				}
				if ( inv(INV_ITEM_ID, cnt) == ITEM_ID_DISC ) {
					if ( inv(INV_ITEM_NUM, cnt) >= 1 ) {
						hennka += inv(INV_ITEM_NUM, cnt)
					}
				}
			loop
			if ( hennka < 76 ) {
				chatMore lang("そうか。番号が被っていてもよいから音楽用のディスクを76枚用意せい。", "That's what you want? Then get me 76 music discs. Doesn't matter if there are duplicates.")
				goto *chat_end
			}
			else {
				chatList 1, lang("いい", "Yes.")
				chatList 0, lang("だめ", "No.")
				buff = lang("ほう。よく収集したものじゃ。手間賃としてブロンズ硬貨を5枚もらうがよいな？", "Well, I'll be. You really do have those discs. It'll cost you 5 bronze coins. How about it?")
				gosub *chat_select
				if ( chatval == 1 ) {
					item_find ITEM_ID_BRONZE_COIN, 3, 1
					if ( stat != (-1) ) {
						cigp = stat
						if ( inv(INV_ITEM_NUM, cigp) >= 5 ) {
							inv(INV_ITEM_NUM, cigp) -= 5
							inv_getheader 0
							repeat invrange, invhead
								if ( hennka <= 0 ) {
									break
								}
								if ( inv(INV_ITEM_NUM, cnt) == 0 ) {
									continue
								}
								if ( ibit(ITEM_BIT_NO_DROP, cnt) ) {
									continue
								}
								if ( inv(INV_ITEM_ID, cnt) == ITEM_ID_DISC ) {
									if ( inv(INV_ITEM_NUM, cnt) >= 1 ) {
										hennka -= inv(INV_ITEM_NUM, cnt)
										inv(INV_ITEM_NUM, cnt) = 0
									}
								}
							loop
							hennka = 0
							snd SOUNDLIST_BUILD1
							flt
							nostack = 1
							itemcreate -1, ITEM_ID_JUKE_BOX, cdata(CDATA_X, CHARA_PLAYER), cdata(CDATA_Y, CHARA_PLAYER), 0
							chatMore lang("これでどうじゃ。", "Done. Take a look."), strbye
							goto *chat_end
						}
					}
					chatMore lang("…持っておらんのか！", "That is not enough.")
				}
				goto *chat_end
			}
		}
		goto *chat_end
	}
	if ( _switch_val == CREATURE_ID_MIRAL_THE_LEGENDARY_SMITH | _switch_sw ) {
		_switch_sw = 0
		chatList 2, lang("小さなメダル", "I have some small medals.")
		chatList 3, lang("荷車の改造", "Can you upgrade my cart?")
		chatList 0, strbye
		buff = lang("ほほう、客人とはこれまた珍しい。暖かい飯でも馳走してさしあげたいが、あいにくと今日の飯番はガロクでの。あやつの作る料理は自らの作品に似て、なんとも無骨で味気ない。とても客人に楽しんでもらえる代物じゃないのう。まぁ、せっかくこんな辺境の地にまで、やって来なさったんだ。何か用件があれば、話だけは聞こうじゃないか。", "Oh oh, what we got, talk about rare! A traveler? I would have given you a feast if it were not Garok that handles today's dinner. You know, his cooking is as loutish as his creations. Oh well, you've come all the way here, what can I do for you?")
		gosub *chat_select
		if ( chatval == 2 ) {
			chatMore lang("おお、小さなメダルを持っておるのか？メダルの収集は、わしの生きがいなんじゃよ！これまでに生産してきた自慢の品の数々と交換せぬか？", "Ho ho ho! You got small medals! Let me see, let me see! Would you like to trade them for one of my proud works?")
			invctrl = 28, 0
			invfile = cdata(CDATA_ROLE_FILE_ID, tc)
			gosub *shop
			screenupdate = -1
			gosub *screen_draw
			cs = 0
			gosub *calcBurdenPc
			goto *chat_unique
		}
		if ( chatval == 3 ) {
			ccpc = limit(calccargoupdatecost(), 1, 10)
			buff = lang("荷車の改造とな。たいして気乗りのする仕事ではないが、そうじゃの、ブロンズ硬貨" + ccpc + "枚をくれるならやらんでもない。", "Upgrade your cart? It's not something I get excited about but if you can give me " + ccpc + " bronze coins, I'll think about it.")
			item_find ITEM_ID_BRONZE_COIN, 3, 1
			if ( stat != (-1) ) {
				ci = stat
				if ( inv(INV_ITEM_NUM, ci) >= ccpc ) {
					chatList 1, lang("ブロンズ硬貨を渡す", "Here, take these bronze coins.")
				}
			}
			chatList 0, lang("断る", "I refuse.")
			chatesc = 1
			gosub *chat_select
			if ( chatval != 1 ) {
				chatMore lang("ふぅん。", "Huh.")
				goto *chat_unique
			}
			txtnew
			txt lang("荷車の重量の限界が" + cnvweight(calccargoupdate()) + "上昇した。", "Your cart's weight limit has increased by " + cnvweight(calccargoupdate()) + ".")
			snd SOUNDLIST_BUILD1
			item_find ITEM_ID_BRONZE_COIN, 3, 1
			if ( stat != (-1) ) {
				ci = stat
				inv(INV_ITEM_NUM, ci) -= ccpc
			}
			gdata(GDATA_CARGO_LIMIT) += calccargoupdate()
			gosub *calcBurdenPc
			chatMore lang("ほい。", "Here you are.")
			goto *chat_unique
		}
		goto *chat_end
	}
	if ( _switch_val == CREATURE_ID_LONELY_PAEL | _switch_sw ) {
		_switch_sw = 0
		if ( gdata(GDATA_FLAG_SUB_MOTHER) == 1000 | gdata(GDATA_FLAG_SUB_MOTHER) == 1005 ) {
			if ( gdata(GDATA_FLAG_MAIN) > 340 ) {
				chatMore lang("奇跡が起きたってお医者さんが言ってたの。もう、おかあさんの病気は大丈夫だって…！きっと" + cdatan(CDATAN_NAME, CHARA_PLAYER) + "さんが助けてくれたおかげだよね、ありがとう" + cdatan(CDATAN_NAME, CHARA_PLAYER) + "さん！大好き！", "The doctor said a miracle happened. Mommy's disease is okay now...! It's thanks to you that my mommy is well now. Thank you " + cdatan(CDATAN_NAME, CHARA_PLAYER) + "! You're my hero!"), strbye
				goto *chat_end
			}
			if ( gdata(GDATA_AREA) == AREA_NOYEL & adata(ADATA_FESTIVAL, gdata(GDATA_AREA)) ) {
				chatMore lang("おかあさん、なんだか今日はいつもより元気そう！お祭りは人がたくさん来るから嫌いだけど、おかあさんにもジュア様の加護があるといいな。", "Mommy looks to be in a good condition today. I hate the festival because there are so many people out there but I hope Lady Jure will watch over her!"), strbye
				goto *chat_end
			}
			chatMore lang("どうして、おかあさんはあんなに悲しそうなの？顔はかわっても、あたしのおかあさんだよ。お友達もきっとわかってくれる…わかってくれないんなら…お友達なんていらない！…あたしはお母さんとずっといっしょにいるんだもん。", "Why does mommy look so sad? Her face has changed but she's still my mommy. I know my friends will understand too... and if they don't then they're no friends of mine! I'll always be by her side. Always."), strbye
			goto *chat_end
		}
		if ( gdata(GDATA_FLAG_SUB_MOTHER) == 1001 | gdata(GDATA_FLAG_SUB_MOTHER) == 1006 & gdata(GDATA_FLAG_MAIN) > 340 ) {
			chatMore lang("ひどいこと言ってごめんなさい、" + cdatan(CDATAN_NAME, CHARA_PLAYER) + "さん…おかあさんも苦しかったんだよね。でも…でもこんなのってないよ…おかあさん…。", "I'm sorry to say terrible things, " + cdatan(CDATAN_NAME, CHARA_PLAYER) + "... Mommy was suffering, wasn't she? But... but this is not... mommy..."), strbye
			goto *chat_end
		}
		if ( gdata(GDATA_FLAG_SUB_MOTHER) == 1001 | gdata(GDATA_FLAG_SUB_MOTHER) == 1006 ) {
			chatMore lang("消えて！二度と顔をみせないで！！ばかぁ！", "Go away! Never come back again! Bastard!"), strbye
			goto *chat_end
		}
		if ( gdata(GDATA_FLAG_SUB_MOTHER) == 1002 & gdata(GDATA_FLAG_MAIN) > 340 ) {
			chatMore lang("お金を貯めていつか、おかあさんを買い戻すの！それにしても誰がおかあさんを売ったんだろう…。", "Mommy... where have you gone, mommy?"), strbye
			goto *chat_end
		}
		if ( gdata(GDATA_FLAG_SUB_MOTHER) == 1002 ) {
			chatMore lang("おかあさん…どこにいっちゃったのぉ…", "Mommy... where have you gone, mommy?"), strbye
			goto *chat_end
		}
		if ( gdata(GDATA_FLAG_SUB_MOTHER) == 0 ) {
			buff = lang("おかあさんがひどい病気で…お医者さんはエーテル病だから手に負えないって…", "Mommy is really sick... but the doctor said she has the ether disease and he can't do anything...")
			gosub *sqMother_1
			if ( stat == 0 ) {
				goto *chat_end
			}
			txt_questupdate
			gdata(GDATA_FLAG_SUB_MOTHER) = 1
			goto *chat_end
		}
		if ( gdata(GDATA_FLAG_SUB_MOTHER) == 1 | gdata(GDATA_FLAG_SUB_MOTHER) == 3 ) {
			chatMore lang("おかあさん、はやく良くなるといいな♪", "I hope mommy gets better soon!"), strbye
			goto *chat_end
		}
		if ( gdata(GDATA_FLAG_SUB_MOTHER) == 5 | gdata(GDATA_FLAG_SUB_MOTHER) == 7 ) {
			chatMore lang("" + cdatan(CDATAN_NAME, CHARA_PLAYER) + "さん、大好き〜。おかあさん、どんどん元気になってるよ♪", "Thanks " + cdatan(CDATAN_NAME, CHARA_PLAYER) + ", you're the best! Mommy's getting better and better."), strbye
			goto *chat_end
		}
		if ( gdata(GDATA_FLAG_SUB_MOTHER) == 2 | gdata(GDATA_FLAG_SUB_MOTHER) == 4 ) {
			buff = lang("あ…" + cdatan(CDATAN_NAME, CHARA_PLAYER) + "さん。おかげで、おかあさんの身体も良くなっています。でもまだ、もとどおりに元気になるには時間がかかるみたいなの…", "Ah, hi " + cdatan(CDATAN_NAME, CHARA_PLAYER) + ". Thanks to you Mommy's been getting better! But... it still looks like she needs more time before she's really healthy.")
			gosub *sqMother_1
			if ( stat == 0 ) {
				goto *chat_end
			}
			txt_questupdate
			gdata(GDATA_FLAG_SUB_MOTHER)++
			goto *chat_end
		}
		if ( gdata(GDATA_FLAG_SUB_MOTHER) == 6 ) {
			buff = lang("おかあさん、最近すごく調子いいの！お医者さんも、もう大丈夫だろうって。最近は、近所の子供達もお見舞いに来てくれるんだよ。はやく、おかあさんやみんなと遊びたいな〜。", "Mommy looks a lot better these days! The doctor said she's gonna be okay. Even the other kids have come to visit her in the past few weeks. I want mommy to be able to play with us soon...")
			gosub *sqMother_1
			if ( stat == 0 ) {
				goto *chat_end
			}
			txt_questupdate
			gdata(GDATA_FLAG_SUB_MOTHER)++
			goto *chat_end
		}
		if ( gdata(GDATA_FLAG_SUB_MOTHER) == 8 ) {
			buff = lang("" + cdatan(CDATAN_NAME, CHARA_PLAYER) + "さん…おかあさんが…！おかあさんが…急に具合が悪くなって…身体がおかしくなって…あぁ…神様…", "" + cdatan(CDATAN_NAME, CHARA_PLAYER) + "! It's mommy... something's wrong! Suddenly she started acting strange and... now her body is changing and... oh gods...")
			gosub *sqMother_1
			if ( stat == 0 ) {
				goto *chat_end
			}
			txt_questupdate
			gdata(GDATA_FLAG_SUB_MOTHER)++
			goto *chat_end
		}
		if ( gdata(GDATA_FLAG_SUB_MOTHER) == 9 ) {
			chatMore lang("おかあさん…大丈夫？…大丈夫？…あぁぁ…", "Mommy! Mommy, are you okay? Mommy?"), strbye
			goto *chat_end
		}
		if ( gdata(GDATA_FLAG_SUB_MOTHER) == 10 ) {
			chatMore lang("おかあさんが…" + cdatan(CDATAN_NAME, CHARA_PLAYER) + "さんにお話があるって…", "" + cdatan(CDATAN_NAME, CHARA_PLAYER) + ", mommy has something to say to you."), strbye
			goto *chat_end
		}
		goto *chat_unique_SWEND1
	}
	if ( _switch_val == CREATURE_ID_PAELS_MOM_LILY | _switch_sw ) {
		_switch_sw = 0
		if ( gdata(GDATA_FLAG_SUB_MOTHER) == 1006 & gdata(GDATA_AREA) == AREA_AMUR_CAGE ) {
			chatMore lang("本当にこれでよかったのか、ずっと悩んでいるんです。せめて、せめてあの子が友達と仲良く暮らせていますように…。", "Th-thank you... thank..."), strbye
			goto *chat_end
		}
		if ( gdata(GDATA_FLAG_SUB_MOTHER) == 1002 & gdata(GDATA_FLAG_MAIN) > 340 ) {
			chatMore lang("(見世物になることにすっかり慣れてしまったようだ。ぼんやりとどこか遠くを眺めている…。)", "(Lily appears to be entirely accustomed to being put on show. She stares blankly into the distance, as if looking somewhere far away...)"), strbye
			goto *chat_end
		}
		if ( gdata(GDATA_FLAG_SUB_MOTHER) == 1002 ) {
			chatMore lang("ひどいわ。", "You are cruel."), strbye
			goto *chat_end
		}
		if ( gdata(GDATA_FLAG_SUB_MOTHER) == 1005 | (gdata(GDATA_FLAG_SUB_MOTHER) == 1000 & gdata(GDATA_FLAG_MAIN) > 340) ) {
			chatMore lang("最近、なんだか身体の調子が良いの。なぜかしら？薬を飲まなくても痛みがほとんどしなくって。…一時期は本当に苦しくて、死んでしまいたいと本気で考えていました。でもそうしたらあの子はまた心を閉ざしてしまう…。この姿はもう戻らないだろうけれど、強く生きていこうと思います。" + cdatan(CDATAN_NAME, CHARA_PLAYER) + "さん、今まで本当にありがとう…。", "Somehow my body has been doing okay recently. I wonder what happened? Even if I don't take my medicine, there's barely any pain at all. It used to be incredibly painful, and I seriously felt like I wanted to die. But if that happened, Pael's heart would close off again... My body will never return to normal, but I intend to keep living. I'm truly thankful for everything you've done for me, " + cdatan(CDATAN_NAME, CHARA_PLAYER) + "..."), strbye
			gdata(GDATA_FLAG_SUB_MOTHER) = 1005
			goto *chat_end
		}
		if ( gdata(GDATA_FLAG_SUB_MOTHER) == 10 ) {
			chatMore lang("" + cdatan(CDATAN_NAME, CHARA_PLAYER) + "さん…こんな姿でごめんなさい…どうか、怖がらないで…逃げないで…。私の病気は、もう手遅れだったようです。この醜い身体が元に戻ることは…もうないでしょう。", "" + cdatan(CDATAN_NAME, CHARA_PLAYER) + ", I'm sorry you have to see me this way... please don't turn away... don't run. It seems my disease has already progressed too far... my twisted and hideous body... I can never return to normal... the disease is too advanced now.")
			chatMore lang("病気は治りませんでしたが、あなたがして下さった全ての事に感謝します。ええ、無駄ではなかったの。だって、おかげでパエルに、あんないいお友達がたくさんできたんだもの。", "Even though you couldn't cure me, you have my thanks for all that you've done. It was... your efforts were not in vain. You helped Pael make a lot of friends... surely that counts for something.")
			flt
			itemcreate -1, ITEM_ID_HAPPY_APPLE, cdata(CDATA_X, CHARA_PLAYER), cdata(CDATA_Y, CHARA_PLAYER), 0
			flt
			itemcreate -1, ITEM_ID_GOLD_PIECE, cdata(CDATA_X, CHARA_PLAYER), cdata(CDATA_Y, CHARA_PLAYER), 20000
			flt
			itemcreate -1, ITEM_ID_PLATINUM_COIN, cdata(CDATA_X, CHARA_PLAYER), cdata(CDATA_Y, CHARA_PLAYER), 4
			snd SOUNDLIST_COMPLETE1
			txt_questcompleted
			txtmore
			txt_questitem
			txt_questupdate
			chatMore lang("これは少ないですが、私の感謝の気持ちです。受け取ってくださいな。", "This isn't much, I know, but it's the least I can do. Please accept these gifts.")
			gdata(GDATA_FLAG_SUB_MOTHER) = 1000
			cbitmod CHARA_BIT_SHUT_UP, tc, 1
		}
		if ( gdata(GDATA_FLAG_SUB_MOTHER) == 1000 ) {
			if ( gdata(GDATA_AREA) == AREA_NOYEL & adata(ADATA_FESTIVAL, gdata(GDATA_AREA)) ) {
				buff = lang("ああ、もうこんな時期になったのね。パエルったら、私のことなんか気にせずお祭りを楽しんでくればいいのに。元気な頃は、よく二人でジュア様の像にお参りしていたのよ。", "Oh, it's already this time of the year. Poor Pael, she should stop worrying about me and go to the festival. We used to visit the Lady Jure's statue and pray together around this time.")
				inv_find ITEM_ID_POTION_CURE_CORRUPTION, CHARA_PLAYER
				if ( stat != (-1) ) {
					chatList 2, lang("エーテル抗体を1本渡す", "(Give her a potion of cure corruption.)")
				}
				chatList 0, lang("お元気で", "Take care.")
				chatesc = 1
				gosub *chat_select
				if ( chatval == 2 ) {
					inv_find ITEM_ID_POTION_CURE_CORRUPTION, CHARA_PLAYER
					inv(INV_ITEM_NUM, stat)--
					txt lang("エーテル抗体を1本渡した。", "You hand her a potion.")
					snd SOUNDLIST_EQUIP1
					modkarma CHARA_PLAYER, 20
					chatMore lang("ありがとうございます。あなたは本当に優しい心の持ち主ね。ジュア様のご加護があるのかしら、なんだか聖夜祭の間はお薬がよく効く気がするわ。", "Oh, thank you. You have a very kind heart, you know. The potion, I feel like the medicine is working better during the festival. Maybe it's the blessing of Lady Jure?"), strbye
					goto *chat_end
				}
				chatMore lang("いつもお見舞いに来てくれてありがとう…どうぞ、聖夜祭を楽しんで行ってください。", "Thanks for coming to see me. Please enjoy yourself at the festival during your stay."), strbye
				goto *chat_end
			}
		}
		if ( gdata(GDATA_FLAG_SUB_MOTHER) == 1000 ) {
			chatMore lang("…" + cdatan(CDATAN_NAME, CHARA_PLAYER) + "さん、あなたに最後のお願いがあります。この短剣で、私の胸を貫いてください。うふふ、だって、この姿がばれてしまったら、せっかくできたパエルの友達が逃げてしまうじゃない。あの子が幸せになれるなら、私は…", "" + cdatan(CDATAN_NAME, CHARA_PLAYER) + ", I have... I have one final request. Take this knife and... *weep* If Pael's friends saw me like this, they'd run in fear and treat her with fear and suspicion. As long as she can be happy, I...")
			buff = lang("こんなこと、あなたにだから頼めるのよ。どうか、この苦しみを終わらせてください…", "Please, I'm begging you. Please put me out of my misery...")
			inv_find ITEM_ID_POTION_CURE_CORRUPTION, CHARA_PLAYER
			if ( stat != (-1) ) {
				chatList 2, lang("エーテル抗体を1本渡す", "(Give her a potion of cure corruption.)")
			}
			chatList 1, lang("息の根を止める", "(End her life.)")
			chatList 0, lang("希望はまだある", "There's still hope.")
			chatesc = 1
			gosub *chat_select
			if ( chatval == 1 ) {
				chatMore lang("あぁ…ありがとう。ありがとう…", "Th-thank you... thank..."), strbye
				evadd EVENT_KILL_MOTHER, tc
				goto *chat_end
			}
			if ( chatval == 2 ) {
				inv_find ITEM_ID_POTION_CURE_CORRUPTION, CHARA_PLAYER
				inv(INV_ITEM_NUM, stat)--
				txt lang("エーテル抗体を1本渡した。", "You hand her a potion.")
				snd SOUNDLIST_EQUIP1
				modkarma CHARA_PLAYER, 20
				chatMore lang("そんなものいくら飲んでも、元には戻らないのに…そんなもの…ありがとう…", "No matter how many I drink, my body won't return to normal... thank you though..."), strbye
				goto *chat_end
			}
			chatMore lang("あ、あなたは、私にこんな姿で生き続けろというの？世の中には、希望なんて便利な言葉で片付けられない苦しみがたくさんあることを、あなたはわかっているのかしら。…ごめんなさい、きついことをいって。あなたの考えが変わるのをまっているわ。", "You... you would force me to keep living like this? You'll find there's much suffering and pain in this world that you can't heal with such optimistic words. I'm sorry... I'm sure you know that well, but... I'll be waiting for you to change your mind."), strbye
			goto *chat_end
		}
		if ( gdata(GDATA_FLAG_SUB_MOTHER) > 7 ) {
			chatMore lang("う…けほっ、けほっ。ごめん…なさい…気分が悪いの…はぁ…はぁ…", "*cough* *cough* I'm... sorry... I don't... feel well... *huff* *huff*"), strbye
			goto *chat_end
		}
		if ( gdata(GDATA_FLAG_SUB_MOTHER) > 5 ) {
			chatMore lang("" + cdatan(CDATAN_NAME, CHARA_PLAYER) + "さん、いらっしゃい。え？嬉しそうな顔をしてる？…うふふ、この前ね、パエルが家の外に大きな雪だるまを作ってくれたのよ。「お友達と一緒に作ったの」って、あんな嬉しそうな顔は、あの子の父親が死んでしまって以来見ていないわ。あのパエルの作った雪だるまを窓から見てるとね、とても幸せな気分になるのよ。", "It's good to see you, " + cdatan(CDATAN_NAME, CHARA_PLAYER) + ". Hmm? You say I look happy? Hehe, just before you arrived Pael made a snowman outside. She said she made it with her friends. I haven't seen her smile like that since her father died. When I see that snowman through the window, I feel a joy I cannot describe to you."), strbye
			goto *chat_end
		}
		if ( gdata(GDATA_FLAG_SUB_MOTHER) > 3 ) {
			chatMore lang("いつもありがとうございます。薬のおかげで、だいぶ痛みも引いてきました。身体が元気になったら、あの子と思う存分遊んであげたいわ…そうそう、最近では、近所の子供達が何人か見舞いに来てくれるの。パエルも、最初は恥ずかしがっていたけど、だんだんと話をするようになって。パエル、いいお友達ができるといいわね。", "Thanks for everything you've done for us. The medicine has mostly stopped the pain. If I can get better I promise to play with my daughter to her heart's content... thankfully the other kids in the neighborhood have been coming to visit these past few days. Pael seems quite shy, but even still she's started to talk to them little by little. I hope Pael can make a lot of friends."), strbye
			goto *chat_end
		}
		chatMore lang("あら…こんな姿でごめんなさいね。パエルの父親は、パエルが5歳の時にプチに食べられてしまったの…そのせいで、あの子は家にこもりがち、いつも、ほかの子供が外で遊ぶのを眩しそうに眺めているわ。きっと、外の世界と自分との間に、見えない線を引いてしまっているのね。小さな胸の奥には、とても、とても優しい心をもった子なのに。ちょっとだけ甘えん坊さんだけどね、うふふ。", "Oh... I'm sorry you have to see me like this. Pael's father died when she was five... he was eaten by a swarm of putits. Ever since then, she just sits around the house. She's always watching the other kids play from the window, staring longingly like she'd love to join them. I can tell she's torn between watching over me and joining the outside world. She has a kind heart beating in that little chest of hers. She's a bit spoiled, but she's a good kid, hee hee.")
		goto *chat_end
	}
	if ( _switch_val == CREATURE_ID_RAPHAEL_THE_WOMANIZER | _switch_sw ) {
		_switch_sw = 0
		if ( gdata(GDATA_FLAG_SUB_WIFE) == 0 ) {
			chatList 1, lang("こんな嫁でよければ", "Sure.")
			chatList 0, lang("ふざけるな", "Don't mock me you filthy wretch.")
			buff = lang("俺を誰だか知らないだと？この街で一番の色男、ラファエロ様だよ。俺が狙った女は、例えパルミアの王妃だろうとイチコロさ。だがな、最近はどうも恋の駆け引きみたいなのに、飽き飽きしちまった。本音をいや、無条件で俺に仕えてくれる女が欲しいんだよ。で、お前の嫁を俺によこさないか？礼はするぜ。", "Don't you know who I am? I am, by far, without question, doubtlessly and unabashedly, the sexiest man in this town -- if not the whole of North Tyris. I can have any woman I desire. I could even take the princess of Palmia if I wanted. Yet, strange as it sounds, lately I've grown tired of the game. Honestly, I want a woman who will serve me unconditionally and never complain. Why don't you let me keep one of your wives? You'd have my thanks.")
			gosub *chat_select
			if ( chatval != 1 ) {
				chatMore lang("まあ、そんな上手い話はないよな。", "Pah, it's not that important anyhow."), strbye
				goto *chat_end
			}
			txt_questupdate
			chatMore lang("よしきた。じゃあ、お前さんのとびきりの嫁を連れてきてくれ！", "Great. Bring me a fine young girl!"), strbye
			gdata(GDATA_FLAG_SUB_WIFE) = 1
			goto *chat_end
		}
		if ( gdata(GDATA_FLAG_SUB_WIFE) == 1 | gdata(GDATA_FLAG_SUB_WIFE) == 1000 ) {
			chatList 1, lang("嫁を見せる", "How's this one?")
			chatList 0, lang("ふざけるな", "Forget it.")
			buff = lang("どれどれ、お前さんの嫁を吟味させてもらおうか！", "Which one? Who have you brought for me to inspect?")
			gosub *chat_select
			if ( chatval != 1 ) {
				chatMore lang("はやくしてくれよ。", "Bring me your wife!"), strbye
				goto *chat_end
			}
			allyctrl = 1
			gosub *com_ally
			if ( stat == (-1) ) {
				chatMore lang("じらすなよ。", "Huh?"), strbye
				goto *chat_end
			}
			rc = stat
			if ( cbit(CHARA_BIT_MARRIED, rc) == 0 ) {
				chatMore lang("嫁だ。嫁じゃなきゃだめだ！", "I want your wife. It's pointless if you aren't married!"), strbye
				goto *chat_end
			}
			if ( cdata(CDATA_PRECIOUS_ALLY, rc) == 1 ) {
				snd SOUNDLIST_FAIL1
				txt_preciousally
				goto *chat_end
			}

			/********** ANNA CUSTOM - BEGINNING **********/

			AllyID = rc
			gosub *DeleteAIInfo

			/********** ANNA CUSTOM - ENDING **********/

			chatMore lang("ほう、これがお前さんの嫁か。" + cdatan(CDATAN_NAME, rc) + "ちゃんというのだな？恥ずかしがらずこっちに来なさい。", "So... this is your wife eh? " + cdatan(CDATAN_NAME, rc) + " is her name? Don't be embarrassed, come along!")
			tcbk = tc
			tc = rc
			if ( cdata(CDATA_IN_TAGTEAM, tc) == (-1) ) {
				ttc = cdata(CDATA_TAGTEAM_PARTNER, tc)
				cell_findspace cdata(CDATA_X, tc), cdata(CDATA_Y, tc), 1
				if ( stat == 0 ) {
					txt_nospace
					goto *chat_end
				}
				cell_setchara ttc, rtval, rtval(1)
				tag_end tc
			}
			if ( cdata(CDATA_IN_TAGTEAM, tc) == 1 ) {
				ttc = cdata(CDATA_TAGTEAM_PARTNER, tc)
				cell_findspace cdata(CDATA_X, tc), cdata(CDATA_Y, tc), 1
				if ( stat == 0 ) {
					txt_nospace
					goto *chat_end
				}
				cell_setchara ttc, rtval, rtval(1)
				tag_end tc
			}
			s = refchara(cdata(CDATA_ID, tc), DBSPEC_CHARA_FILTER, 1)
			if ( instr(s, 0, "/man/") == (-1) ) {
				dmgcon tcbk, CONDITION_INSANE, 1000
				f = 1
				modkarma CHARA_PLAYER, 2
			}
			else {
				f = 0
				modkarma CHARA_PLAYER, -15
			}
			chatMore lang("いやん、おじさまったら♪", "Ick, you're leaving me with him!?")
			tc = tcbk
			if ( f == 1 ) {
				chatMore lang("な、おま…ぎぎ…の嫁さ…ぎぎ…は人間じゃ…ぎぎ", "She's...she's not--hiii--She's not even hu--huuuuu--human..")
			}
			if ( gdata(GDATA_FLAG_SUB_WIFE) == 1 ) {
				flt
				itemcreate -1, ITEM_ID_GOLD_PIECE, cdata(CDATA_X, CHARA_PLAYER), cdata(CDATA_Y, CHARA_PLAYER), 5000
				txt_questcompleted
				txt_questupdate
				txtmore
				gdata(GDATA_FLAG_SUB_WIFE) = 1000
			}
			chara_vanquish rc
			snd SOUNDLIST_COMPLETE1
			flt
			itemcreate -1, ITEM_ID_UNICORN_HORN, cdata(CDATA_X, CHARA_PLAYER), cdata(CDATA_Y, CHARA_PLAYER), 2
			flt
			itemcreate -1, ITEM_ID_PLATINUM_COIN, cdata(CDATA_X, CHARA_PLAYER), cdata(CDATA_Y, CHARA_PLAYER), 2
			txt_questitem
			chatMore lang("これは…すごい嫁だ…！お前さんとは女の趣味が合いそうだな。また嫁を連れてきてくれれば、いいものを渡すぜ。", "She's a work of art! Looks like we have the same taste in women. Hey, if you bring me another one as good as this one, I will give you something incredible."), strbye
			goto *chat_end
		}
		goto *chat_unique_SWEND1
	}
	if ( _switch_val == CREATURE_ID_AINC_THE_NOVICE_KNIGHT | _switch_sw ) {
		_switch_sw = 0
		if ( gdata(GDATA_FLAG_SUB_YEEK) >= 1000 ) {
			chatMore lang("イィッック！！イィーック！ハ…これは、" + cdatan(CDATAN_NAME, CHARA_PLAYER) + "さん、その節はお世話になりました。", "Yeeeek! Yeee-eeek! Oh, it's you again."), strbye
			goto *chat_end
		}
		if ( gdata(GDATA_FLAG_SUB_YEEK) == 0 ) {
			chatList 1, lang("まかせて", "I'll do it for you.")
			chatList 0, strbye
			buff = lang("イィッック！やめて！くるなぁー！イィーック！ハ…失礼しました。あなた…見たところ強そうですね。私に力を貸してくれませんか？騎士昇格のための試験で、イークの首領を討伐しなければならないんです。私には、荷が重い使命ですよ…イーク…うわあああ…ダメだ…思い出しただけでも膝が震える…お願いです。私の代わりに倒してきてください。", "Yeeeek! Nooo! Don't!! Get away from me!! Yeeeee-eeeek! Hmm, oh... excuse me. You... you look like a skilled adventurer. Could you give me a hand? I need to slay the head of the Yeeks to be promoted to the rank of Knight. The duty is too heavy for me... Yeeee-eeek! No...! I don't even want to think about it anymore... Please do this test for me.")
			gosub *chat_select
			if ( chatval != 1 ) {
				chatMore lang("イィッック！", "Yeeeeek!"), strbye
				goto *chat_end
			}
			txt_questupdate
			chatMore lang("助かります。こんな試験、私にはできっこないんです。奴らの住処は、この村を出てすぐ西の洞窟。頼みますよ。", "Fantastic! This test... it's impossible for me. The yeeks live in a dungeon west from here. I'm counting on you."), strbye
			gdata(GDATA_FLAG_SUB_YEEK) = 1
			goto *chat_end
		}
		if ( gdata(GDATA_FLAG_SUB_YEEK) == 1 ) {
			chatMore lang("イィッック！やめて！くるなぁー！イィーック！ハ…あなたでしたか…", "Yeeeeek! Noo...! Don't...! That's my nose...! Yeee-eeeek! Hmm, oh... it's you..."), strbye
			goto *chat_end
		}
		if ( gdata(GDATA_FLAG_SUB_YEEK) == 2 ) {
			chatMore lang("おお、無事にイークの首領を討伐してくれたのですね。これで晴れて立派な騎士になれます。本当にありがとうございました。", "Oh, you've brought me the head! I can pass the test now. Thank you very much."), strbye
			flt
			itemcreate -1, ITEM_ID_DAL_I_THALION, cdata(CDATA_X, CHARA_PLAYER), cdata(CDATA_Y, CHARA_PLAYER), 0
			flt
			itemcreate -1, ITEM_ID_GOLD_PIECE, cdata(CDATA_X, CHARA_PLAYER), cdata(CDATA_Y, CHARA_PLAYER), 5000
			flt
			itemcreate -1, ITEM_ID_PLATINUM_COIN, cdata(CDATA_X, CHARA_PLAYER), cdata(CDATA_Y, CHARA_PLAYER), 3
			txt_questcompleted
			txtmore
			txt_questitem
			txt_questupdate
			gdata(GDATA_FLAG_SUB_YEEK) = 1000
			goto *chat_end
		}
		goto *chat_unique_SWEND1
	}
	if ( _switch_val == CREATURE_ID_POPPY_THE_LITTLE_DOG | _switch_sw ) {
		_switch_sw = 0
		if ( gdata(GDATA_FLAG_SUB_DOG) == 1000 ) {
			chatMore lang("くぅぅぅぅん！", "Ruff-ruff!"), strbye
			goto *chat_end
		}
		chatList 1, lang("連れて行く", "I'll take you")
		chatList 0, strbye
		buff = lang("くぅうううん。", "Woof!")
		gosub *chat_select
		if ( chatval == 1 ) {
			if ( get_freeally() == 0 ) {
				txt lang("仲間の最大数に達しているため、これ以上連れていけない…。", "Your party is already full. You can't invite someone anymore.")
				goto *chat_end
			}
			txt lang(name(tc) + "を保護した。無事に連れて帰らなければ。", name(tc) + " is under your protection. It must be returned home safely.")
			rc = tc
			gosub *add_ally
			cbitmod CHARA_BIT_GUARD_TEMP, rc, 1
			r1 = rc
			gosub *charaRefresh
			goto *chat_end
		}
		else {
			goto *chat_end
		}
		goto *chat_unique_SWEND1
	}
	if ( _switch_val == CREATURE_ID_RILIAN_THE_DOG_LOVER | _switch_sw ) {
		_switch_sw = 0
		if ( gdata(GDATA_FLAG_SUB_DOG) == 1000 ) {
			chatMore lang("あ、冒険者さんだ〜。こんにちわん！", "Hello there!"), strbye
			goto *chat_end
		}
		if ( gdata(GDATA_FLAG_SUB_DOG) == 0 ) {
			chatList 1, lang("まかせて", "Leave it to me.")
			chatList 0, strbye
			buff = lang("はうっ。ポピーがいなくなっちゃった…また、あの洞窟に迷い込んじゃったのかな？どうしよう、お父さんは今いそがしくて相手にしてもらえないし…あ、冒険者さん、ポピーを探してきてよ〜。ポピー？ポピーは子犬だよ。私の一番のお友達なの。", "Oh no, Poppy has disappeared again... He probably got lost in that cave again. Now what do I do, Papa is too busy to deal with this... Oh, Adventurer, go and find Poppy for me. Poppy? He's my puppy, and my best friend.")
			gosub *chat_select
			if ( chatval != 1 ) {
				chatMore lang("ポピー…。", "Poppy..."), strbye
				goto *chat_end
			}
			txt_questupdate
			chatMore lang("よかったぁ！ポピーは、きっといつもの洞窟で迷っちゃったの。この街を出て、すぐ東にある洞窟だよ。冒険者さん、よろしくね。", "Great! I'm sure he's lost in that cave he always plays in. The cave is just outside the east side of town. Thanks in advance."), strbye
			gdata(GDATA_FLAG_SUB_DOG) = 1
			goto *chat_end
		}
		if ( gdata(GDATA_FLAG_SUB_DOG) == 1 ) {
			if ( findallyguard(CREATURE_ID_POPPY_THE_LITTLE_DOG) == (-1) ) {
				chatMore lang("ポピーまだ〜？", "Where's poppy?"), strbye
				goto *chat_end
			}
			chatMore lang("ポピー！！無事だったのね！冒険者さん、ありがとう。これ、あげる〜。", "Poppy, you're safe! Thank you adventurer, you can have this..."), strbye
			flt
			itemcreate -1, ITEM_ID_COOLER_BOX, cdata(CDATA_X, CHARA_PLAYER), cdata(CDATA_Y, CHARA_PLAYER), 0
			flt
			itemcreate -1, ITEM_ID_GOLD_PIECE, cdata(CDATA_X, CHARA_PLAYER), cdata(CDATA_Y, CHARA_PLAYER), 2500
			flt
			itemcreate -1, ITEM_ID_PLATINUM_COIN, cdata(CDATA_X, CHARA_PLAYER), cdata(CDATA_Y, CHARA_PLAYER), 2
			txt_questcompleted
			txtmore
			txt_questitem
			txt_questupdate
			gdata(GDATA_FLAG_SUB_DOG) = 1000
			chara_vanquish findallyguard(CREATURE_ID_POPPY_THE_LITTLE_DOG)
			flt
			characreate -1, CREATURE_ID_POPPY_THE_LITTLE_DOG, 31, 4
			cdata(CDATA_ROLE, rc) = ROLE_SPECIAL
			goto *chat_end
		}
		goto *chat_unique_SWEND1
	}
	if ( _switch_val == CREATURE_ID_TAM_THE_CAT_HATER | _switch_sw ) {
		_switch_sw = 0
		if ( gdata(GDATA_FLAG_SUB_CAT) >= 1000 ) {
			chatMore lang("いや〜。おかげさまで家は猫から解放されたんですが、宿屋のほうが快適でね。つい、こっちで寝泊りしてしまいますよ。ははは。", "Well... actually... I found this inn more comfortable than my house."), strbye
			goto *chat_end
		}
		if ( gdata(GDATA_FLAG_SUB_CAT) == 0 ) {
			chatList 1, lang("引き受ける", "I'll do it.")
			chatList 0, lang("面倒だ", "Too much trouble.")
			buff = lang("あなた、猫は大丈夫ですか？いえね、私は猫が大の苦手なんですが、こともあろうに、私の家に大量の猫が住み着いてしまったんですよ。そこで冒険者さん達に猫の退治を依頼しているものの、何故か誰も帰ってこない…いったい、家の中はどうなってるんでしょうか。あなた、もしよかったら見てきてくれませんか？", "Hey you, are you... uh... alright with cats? Well, those filthy creatures took over my house! I've been asking adventurers to remove the cats from my house ever since, but none returned. What's happening in my house? You... could you take a look?")
			gosub *chat_select
			if ( chatval != 1 ) {
				chatMore lang("そうですか…残念です。", "Uh... fine..."), strbye
				goto *chat_end
			}
			txt_questupdate
			chatMore lang("おお、ありがたい。家は南の畑の近くにあります。中にどんな猫がいるのかわからないので、十分気をつけてください。", "Thank God. My house is south from here. Be careful, I have no idea what's living in there."), strbye
			gdata(GDATA_FLAG_SUB_CAT) = 1
			cell_featset 23, 22, tile_downstairs, CELL_FEATURE_DOWNSTAIRS, 3
			goto *chat_end
		}
		if ( gdata(GDATA_FLAG_SUB_CAT) == 1 ) {
			chatMore lang("どうです？猫はもういなくなりましたか？", "Is my home safe from the cats?"), strbye
			goto *chat_end
		}
		if ( gdata(GDATA_FLAG_SUB_CAT) == 2 ) {
			flt
			nostack = 1
			itemcreate -1, ITEM_ID_MATERIAL_KIT, cdata(CDATA_X, CHARA_PLAYER), cdata(CDATA_Y, CHARA_PLAYER), 0
			inv(INV_ITEM_MATERIAL, ci) = ITEM_MATERIAL_DRAGON
			flt
			itemcreate -1, ITEM_ID_GOLD_PIECE, cdata(CDATA_X, CHARA_PLAYER), cdata(CDATA_Y, CHARA_PLAYER), 25500
			flt
			itemcreate -1, ITEM_ID_PLATINUM_COIN, cdata(CDATA_X, CHARA_PLAYER), cdata(CDATA_Y, CHARA_PLAYER), 4
			txt_questcompleted
			txtmore
			txt_questitem
			txt_questupdate
			chatMore lang("なんと、猫使いなる魔物が住み着いていたのですか。いやぁ、猫退治なんて軽い依頼ではなかったですね。ははは。私の家で亡くなった冒険者さん達も、あなたのおかげで浮かばれるでしょう。どうぞ、お礼を受け取ってください。", "What? An evil cat tamer? My God... I have no idea why such a creature took over my home. But uh... thanks anyway."), strbye
			gdata(GDATA_FLAG_SUB_CAT) = 1000
			goto *chat_end
		}
		goto *chat_unique_SWEND1
	}
	if ( _switch_val == CREATURE_ID_GILBERT_THE_COLONEL | _switch_sw ) {
		_switch_sw = 0
		if ( gdata(GDATA_FLAG_SUB_WAR) == 1000 ) {
			chatMore lang("おお、勇者よ！酒でも飲み交わさぬか？フハハハア！", "Ah, the bravest of the brave. Care for a drink? Muwahaha!"), strbye
			goto *chat_end
		}
		if ( cdata(CDATA_FAME, CHARA_PLAYER) < 5000 ) {
			chatMore lang("なんだ、ぬしは。私は弱いものには興味がないのだ。フハハハハ！", "Begone. I have no interest in weak soldiers. Muwahahaha!"), strbye
			goto *chat_end
		}
		if ( gdata(GDATA_FLAG_SUB_WAR) == 0 ) {
			chatMore lang("オパートスの名にかけて！貴殿はかの有名な" + cdatan(CDATAN_AKA, CHARA_PLAYER) + "ではないか？貴殿の腕を見込んで頼みがあるのだ。", "By Opatos! You are the famous " + cdatan(CDATAN_AKA, CHARA_PLAYER) + ", are you not? I have a favor I'd like to ask of someone like you.")
			chatList 1, lang("話を聞こう", "(Hear him out.)")
			chatList 0, lang("止めておこう", "(Don't get involved.)")
			buff = lang("私はジューアの解放軍の大佐、ギルバートと申す。軍といっても国軍ではないが、イェルスの犬に占拠された各地のジューア自治区を、解放してまわっておるのだ。その我が軍が、パルミア国境でイェルスの強力な防衛線の前に苦戦しておる。最新鋭の武装を持つ奴らに対し、我らは剣に頼るのみ。このままでは、全滅する恐れさえあるのだ。どうか、貴殿の力、貸してもらえぬか？", "I am colonel of the Juere Liberation Army, Gilbert. We're not the true national army, but even so we fully intend to free the Juere Territories from their occupation by those Yerles dogs. However, our army is having a hard time breaking through their strong front lines on the Palmia border. We only have our swords against their advanced weapons, after all. If things go on like they are, our army might be totally annihilated. So I ask you, will you lend us your power?")
			gosub *chat_select
			if ( chatval != 1 ) {
				chatMore lang("フハハハハッ。腰抜けめ。", "Mwahahaha! You damn coward!"), strbye
				goto *chat_end
			}
			txt_questupdate
			chatMore lang("フハハハァッ。そうこなくてはならぬ。貴殿の力、頼りにしておる。戦の準備ができ次第、声をかけてくれ。", "Mwahahaha! Good, good. We'll be counting on you. Once you've prepared, come speak to me again."), strbye
			gdata(GDATA_FLAG_SUB_WAR) = 1
			goto *chat_end
		}
		if ( gdata(GDATA_FLAG_SUB_WAR) == 1 | gdata(GDATA_FLAG_SUB_WAR) == 2 ) {
			chatList 1, lang("いい", "They are.")
			chatList 0, lang("だめ", "Not yet.")
			buff = lang("準備はいいかな？", "Are your preparations complete, then?")
			gosub *chat_select
			if ( chatval != 1 ) {
				chatMore lang("待っておるぞ。", "We're waiting on you."), strbye
				goto *chat_end
			}
			if ( gdata(GDATA_FLAG_DUEL_TARGET) > 0 ) {
				snd SOUNDLIST_FAIL1
				txt_duel2
				goto *chat_end
			}
			txt_questupdate
			chatMore lang("フハァ。貴殿にオパートスの加護のあらんことを祈っておるぞ！", "Hahaha! I pray Opatos' favor be with you!"), strbye
			gdata(GDATA_FLAG_SUB_WAR) = 2
			mdata(MDATA_DOWNSTAIRS_POS) = cdata(CDATA_Y, CHARA_PLAYER) * 1000 + cdata(CDATA_X, CHARA_PLAYER)
			gdata(GDATA_TELEPORT_AREA) = AREA_YOWYN
			gdata(GDATA_TELEPORT_LEVEL) = 4
			levelexitby = 2
			chatteleport = 1
			goto *chat_end
		}
		if ( gdata(GDATA_FLAG_SUB_WAR) == 3 ) {
			flt
			itemcreate -1, ITEM_ID_HERO_CHEESE, cdata(CDATA_X, CHARA_PLAYER), cdata(CDATA_Y, CHARA_PLAYER), 0
			flt
			itemcreate -1, ITEM_ID_GOLD_PIECE, cdata(CDATA_X, CHARA_PLAYER), cdata(CDATA_Y, CHARA_PLAYER), 10000
			flt
			itemcreate -1, ITEM_ID_PLATINUM_COIN, cdata(CDATA_X, CHARA_PLAYER), cdata(CDATA_Y, CHARA_PLAYER), 3
			txt_questcompleted
			txtmore
			txt_questitem
			txt_questupdate
			chatMore lang("フアハァァァァハハハ。フハー！ファハハハ、フ、フハッ、ブ、ブバァッ…ゲホッ…ゲホ…す…すまん。震えるほど興奮したぞ、ぬしの雄姿に。解放軍も、これで無事にパルミアの国境を越えることができる。どうか、この感謝の気持ちを受け取ってくれ。", "Muwahahahah! Muwahahahahaha! Mu-mu...wa...! *cough* *cough* My... My apologies. Your heroic figure striding across the battlefield was so amazing that even I was shaken. With this, the Liberation Army can pass the borders of Palmia. Please, accept this reward as my thanks."), strbye
			gdata(GDATA_FLAG_SUB_WAR) = 1000
			goto *chat_end
		}
		goto *chat_end
	}
	if ( _switch_val == CREATURE_ID_ARNORD_THE_INJURED_SOLDIER | _switch_sw ) {
		_switch_sw = 0
		if ( gdata(GDATA_FLAG_SUB_KAMIKAZE) == 1000 ) {
			chatMore lang("" + cdatan(CDATAN_NAME, CHARA_PLAYER) + "さん、あなたとまた会話できるとは光栄です！", "I hope we can talk again sometime, " + cdatan(CDATAN_NAME, CHARA_PLAYER) + "!"), strbye
			goto *chat_end
		}
		if ( gdata(GDATA_FLAG_SUB_KAMIKAZE) == 0 ) {
			buff = lang("パルミア軍第十連隊は、カミカゼ特攻隊の猛攻により大苦戦中です！敵は弾幕の雨の中を潜り抜け、戦死を前提とした自爆攻撃を繰り返しています。このままでは、我が部隊は全滅の恐れもあります。どうか、援軍に向かってください！", "Right now, the 10th regiment of the Palmian army is entrenched in battle with the suicide squadron! The enemy has broken through our suppression fire and now they're assaulting us with suicide bombers. The enemy know they're going to die and they're trying to take us with them. How can we fight an enemy with no regard for his own life! At this rate it looks like we'll be totally annihilated! We need you to lend us your hand and lead the reinforcements.")
			chatList 1, lang("引き受ける", "I accept.")
			chatList 0, lang("やめておこう", "That sounds... dangerous. No thanks.")
			gosub *chat_select
			if ( chatval != 1 ) {
				chatMore lang("無念です！", "I'm sorry to hear that."), strbye
				goto *chat_end
			}
			txt_questupdate
			chatMore lang("助かります。準備ができ次第、声をかけてください。必ず遠隔武器を持参してください！", "Thank the gods. Call me when you're prepared. Be sure to bring a ranged weapon!"), strbye
			gdata(GDATA_FLAG_SUB_KAMIKAZE) = 1
			goto *chat_end
		}
		if ( gdata(GDATA_FLAG_SUB_KAMIKAZE) == 1 | gdata(GDATA_FLAG_SUB_KAMIKAZE) == 2 ) {
			chatList 1, lang("いい", "Okay, let's roll.")
			chatList 0, lang("だめ", "I'm not ready yet.")
			buff = lang("準備はよろしいですか？あなたは、パルミア軍が撤退するまでの間、どうにかカミカゼ特攻隊の猛撃に耐え、時間稼ぎをして下さい。", "Are you ready to go? We need you to hold off the suicide squadron's onslaught and buy time for the Palmian army to retreat.")
			gosub *chat_select
			if ( chatval != 1 ) {
				chatMore lang("早くしてください！", "Hurry up!"), strbye
				goto *chat_end
			}
			if ( gdata(GDATA_FLAG_DUEL_TARGET) > 0 ) {
				snd SOUNDLIST_FAIL1
				txt_duel2
				goto *chat_end
			}
			txt_questupdate
			chatMore lang("伝令に現地まで案内させます。くれぐれも、奴らの接近を許さないように！パルミア軍の撤退が完了次第、連絡を入れます。", "I'll guide you to the battlefield then. Whatever you do, don't let them get close! I'll tell the Palmian army to begin a steady retreat."), strbye
			gdata(GDATA_FLAG_SUB_KAMIKAZE) = 2
			mdata(MDATA_DOWNSTAIRS_POS) = cdata(CDATA_Y, CHARA_PLAYER) * 1000 + cdata(CDATA_X, CHARA_PLAYER)
			gdata(GDATA_TELEPORT_AREA) = AREA_PORT_KAPUL
			gdata(GDATA_TELEPORT_LEVEL) = 25
			levelexitby = 2
			chatteleport = 1
			goto *chat_end
		}
		if ( gdata(GDATA_FLAG_SUB_KAMIKAZE) == 3 ) {
			flt
			itemcreate -1, ITEM_ID_MAGIC_FRUIT, cdata(CDATA_X, CHARA_PLAYER), cdata(CDATA_Y, CHARA_PLAYER), 0
			flt
			itemcreate -1, ITEM_ID_GOLD_PIECE, cdata(CDATA_X, CHARA_PLAYER), cdata(CDATA_Y, CHARA_PLAYER), 7500
			flt
			itemcreate -1, ITEM_ID_PLATINUM_COIN, cdata(CDATA_X, CHARA_PLAYER), cdata(CDATA_Y, CHARA_PLAYER), 3
			txt_questcompleted
			txtmore
			txt_questitem
			txt_questupdate
			chatMore lang("お疲れ様であります。まさか、あの死地から戻って来ることができるなんて！戦友の無事も確認し、感謝の言葉もありません。どうかこの報酬を受け取ってください。", "Well done. I can't believe you made it back alive! I've heard my comrades are safe. I can find no words to express my gratitude. Please take this reward."), strbye
			gdata(GDATA_FLAG_SUB_KAMIKAZE) = 1000
			goto *chat_end
		}
		goto *chat_end
	}
	if ( _switch_val == CREATURE_ID_MIA_THE_CAT_FREAK | _switch_sw ) {
		_switch_sw = 0
		if ( gdata(GDATA_FLAG_SUB_MIAS_DREAM) == 1000 ) {
			chatMore lang("あ、冒険者さん！お仕事お疲れでありますぅ♪", "Mia's happy, happy nyah!"), strbye
			goto *chat_end
		}
		if ( gdata(GDATA_FLAG_SUB_MIAS_DREAM) == 0 ) {
			chatList 1, lang("捕ってくる", "I'll find one for you!")
			chatList 0, lang("さ、さようなら", "Oh... God...")
			buff = lang("るんるんるん♪ねっこねっここっねこっ♪ふ〜んふ〜ん♪お〜冒険者さんだ〜。お仕事お疲れ様でありますぅ。冒険者さんは、シルバーキャット見たことありますかぁ？シルバーにゃんことお風呂できゃっきゃするのが、ミーアの夢なんですっ！う〜。ねっこねっここっねこ♪ふ〜んふ〜ん♪", "Nyobody knyows the touble Mia's seen, nyobody knyows Mia's Tru-bull. Nuah? Adventurer? Nyou find silver cat for me?")
			gosub *chat_select
			if ( chatval != 1 ) {
				chatMore lang("はーい♪さよ〜なら〜♪", "Nyo? Mia can wait nyou. Mia have goood mannyah!"), strbye
				goto *chat_end
			}
			txt_questupdate
			chatMore lang("はわぁ。ほんとですか〜！楽しみにしてますぅ♪う〜。ねっこねっここっねこ♪は〜やくこないかな♪るんるんるん♪", "Nyowl! Mia trust nyou. Nyo hurting cats!"), strbye
			gdata(GDATA_FLAG_SUB_MIAS_DREAM) = 1
			goto *chat_end
		}
		if ( gdata(GDATA_FLAG_SUB_MIAS_DREAM) == 1 ) {
			if ( findally(CREATURE_ID_SILVER_CAT) == (-1) ) {
				chatMore lang("ふ〜んふ〜ん♪ねっこねっこ〜ま〜だかな〜♪にししし！", "Nyoroon nyoroon. Nyou still look for Mia's cat?"), strbye
				goto *chat_end
			}
			rc = findally(CREATURE_ID_SILVER_CAT)
			if ( cdata(CDATA_PRECIOUS_ALLY, rc) == 1 ) {
				snd SOUNDLIST_FAIL1
				txt_preciousally
				goto *chat_end
			}
			if ( cdata(CDATA_IN_TAGTEAM, rc) == (-1) ) {
				ttc = cdata(CDATA_TAGTEAM_PARTNER, rc)
				cell_findspace cdata(CDATA_X, rc), cdata(CDATA_Y, rc), 1
				if ( stat == 0 ) {
					txt_nospace
					goto *chat_end
				}
				cell_setchara ttc, rtval, rtval(1)
				tag_end rc
			}
			if ( cdata(CDATA_IN_TAGTEAM, rc) == 1 ) {
				ttc = cdata(CDATA_TAGTEAM_PARTNER, rc)
				cell_findspace cdata(CDATA_X, rc), cdata(CDATA_Y, rc), 1
				if ( stat == 0 ) {
					txt_nospace
					goto *chat_end
				}
				cell_setchara ttc, rtval, rtval(1)
				tag_end rc
			}
			chatMore lang("はわわ？それはっ！シルバーキャット！お〜♪ミーアうれしぃであります！こっちにおいで〜だっこだっこっ♪にしし！", "Awawa? That's it! A silver cat! Ohh! Mia is shou happy! I wants to take it home, nyaa!!")

			/********** ANNA CUSTOM - BEGINNING **********/

			AllyID = rc
			gosub *DeleteAIInfo

			/********** ANNA CUSTOM - ENDING **********/

			chatMore lang("そうだ、お礼にこれあげますっ！モンスターハートっていって、所持しているだけで、支配の確率を高めてくれるアーティファクトなんですよ♪", "Nyanya! Nyou bring Mia silver cat! Come come, I nyo hurt nyou, nyo hurt nyou. Mia thank you very much. Nyou can have Mia's precious!"), strbye
			flt
			itemcreate -1, ITEM_ID_MONSTER_HEART, cdata(CDATA_X, CHARA_PLAYER), cdata(CDATA_Y, CHARA_PLAYER), 0
			flt
			itemcreate -1, ITEM_ID_GOLD_PIECE, cdata(CDATA_X, CHARA_PLAYER), cdata(CDATA_Y, CHARA_PLAYER), 5000
			flt
			itemcreate -1, ITEM_ID_PLATINUM_COIN, cdata(CDATA_X, CHARA_PLAYER), cdata(CDATA_Y, CHARA_PLAYER), 3
			txt_questcompleted
			txtmore
			txt_questitem
			txt_questupdate
			gdata(GDATA_FLAG_SUB_MIAS_DREAM) = 1000
			rc = findally(CREATURE_ID_SILVER_CAT)
			if ( cbit(CHARA_BIT_PCC, rc) == 1 ) {
				cbitmod CHARA_BIT_PCC, rc, 0
			}
			relocate_chara findally(CREATURE_ID_SILVER_CAT), -1
			cdata(CDATA_RELATION, rc) = -1
			cdata(CDATA_RELATION_ORG, rc) = -1
			cdata(CDATA_ROLE, rc) = ROLE_SPECIAL
			goto *chat_end
		}
		goto *chat_unique_SWEND1
	}
	if ( _switch_val == CREATURE_ID_RENTON_THE_SUFFERING_WIZARD | _switch_sw ) {
		_switch_sw = 0
		if ( gdata(GDATA_FLAG_SUB_VEIN) == 1000 ) {
			chatMore lang("私は…生きている価値があるのかな？", "I wonder... does my life really have any value?"), strbye
			goto *chat_end
		}
		if ( gdata(GDATA_FLAG_SUB_VEIN) == 0 | gdata(GDATA_FLAG_SUB_VEIN) == 1 ) {
			chatMore lang("才能のある者の努力とない者の努力は、果たして同じなのだろうか？私の妹は、このルミエストの都で絵描きを目指していた。彼女は美しいものを愛したが、画家としての才能には恵まれてなかった。自分の限界に気付いた彼女は精神を病み、周りの者に当たり散らかした。罵られ、蔑まれ、誰からも理解されないまま、冬のある日、湖に身を投げて死んでしまった。", "Talent or no talent... if you're a success, it doesn't really matter, now does it? My sister came here to Lumiest hoping to make it as an artist. She dearly loved the beauty of all things, but she had no artistic ability. She tried so hard and she pushed her limits to succeed, but in the end she was rejected and it drained all the life out of her. The people here mocked and insulted her; nobody understood her. Then, one winter day, despondent, she jumped into the lake and drowned herself.")
			chatMore lang("私は知っていたよ…身体を壊すほどに、妹が絵の勉強に励んでいたこと。常人離れした情熱と、名声への憧れ。だが、妹が死んで間も無く、一人の天才がこの都にやって来て、何の努力もなしに彼女が望んでいた全てを手に入れてしまった。名声、幸福、富…", "I was sure... her obsession with painting had wrecked her health. Her devotion and desire for fame alienated her from ordinary people. But, not long after my sister died, a prodigal artist came here to Lumiest. With hardly any effort, all the things she wanted came to her. Fame, happiness, fortune...")
			chatMore lang("恵まれたもの、恵まれないもの、全ては運命の偶然に過ぎない…何がいいたいかよくわからない？そうだな、私自身、この感情をうまく説明できないんだ。ただ、私には人生の意味が分からなくなった…ただそれだけだ。", "To be privileged, or to be poor, it's all just a matter of fate and inescapable coincidence... Do you understand what it is I'm trying to say? That's right, it's tough for me to explain exactly how I feel. It's just that... I guess I no longer understand the meaning of life... that's all.")
			chatMore lang("…レイチェルという童話作家が描いた絵本を、妹は愛読していた。もうすでに遺品は処理してしまったが、一度読んでみたいものだ。今ならば、あいつの気持ちを、少しはわかってやれそうな気がするよ。", "I remember my sister really loved a series of children's books illustrated by a woman named Rachel. I'm sure they're really rare, or even impossible to find, but... I'd like to read them just once. I feel that perhaps you can understand how I feel...")
			if ( gdata(GDATA_FLAG_SUB_VEIN) == 0 ) {
				txt_questupdate
				gdata(GDATA_FLAG_SUB_VEIN) = 1
				goto *chat_end
			}
			p = 0, 0, 0, 0, 0, 0
			inv_getheader 0
			repeat invrange, invhead
				if ( inv(INV_ITEM_NUM, cnt) == 0 ) {
					continue
				}
				if ( inv(INV_ITEM_ID, cnt) == ITEM_ID_BOOK_RACHEL ) {
					p(inv(INV_ITEM_PARAM2, cnt)) = 1
				}
			loop
			repeat 4, 1
				p += p(cnt)
			loop
			if ( p != 0 ) {
				if ( p != 4 ) {
					chatMore lang("私のために、絵本を" + p + "冊集めた…？感謝するよ。絵本は第4巻まであるみたいだ。もし全部集めて持ってきてくれれば、何か礼をしよう。", "You've brought " + p + " book" + _s3(p) + ", just for my sake? You have my thanks. If I recall correctly, there are four volumes in the series. If you can find all four for me, I'll find some way to thank you."), strbye
					goto *chat_end
				}
				p = 0, 0, 0, 0, 0, 0
				inv_getheader 0
				repeat invrange, invhead
					if ( inv(INV_ITEM_NUM, cnt) == 0 ) {
						continue
					}
					if ( inv(INV_ITEM_ID, cnt) == ITEM_ID_BOOK_RACHEL ) {
						if ( p(inv(INV_ITEM_PARAM2, cnt)) == 0 ) {
							inv(INV_ITEM_NUM, cnt)--
							p(inv(INV_ITEM_PARAM2, cnt)) = 1
						}
					}
				loop
				chatMore lang("おお…これがレイチェルの絵本か。本を読んでみたいと思う気になったのは、久しぶりだよ。さっそく読ませてもらおう。", "Oh! So these are Rachel's storybooks? I feel like I should read them... it's been such a long time. Give me a moment to look at them, will you? ...These... these are! And this! And... *Renton foams at the mouth* ")
				chatMore lang("…", "...")
				chatMore lang("… …", "... ...")
				chatMore lang("… … …", "... ... ...")
				chatMore lang("ビーーー！バリリ！！ビリリ！バリリリリリ！！！こんなモノ！こんなモノ！こんなモノ…ビリビリビリビリ！ふう、ふう、はあ、はあ…。", "And this... *huff* *huff* ")
				txtef COLOR_YELLOW
				txt lang("エヘカトル「うみゃ〜？」", "Ehekatl: \"Mew?\"")
				chatMore lang("…こんな絵は天才にしか描けない。努力じゃダメだ。妹には…どう頑張っても、描けなかっただろう。幸運の女神というものがいるのなら、私は彼女を恨もう。…すまない、報酬だ。しばらく一人にしておくれ。", "*A crazed look wells up in Renton's eyes* These books... only a true artistic genius could've painted like this. Effort alone is simply not enough... my sister... no matter how long or hard she tried, she never could've painted such beauty. If the goddess of luck truly exists, I should devote myself to her. I'm sorry... you do deserve a reward. I'd like to be alone for a while... if you don't mind."), strbye
				flt
				itemcreate -1, ITEM_ID_STATUE_LULWY, cdata(CDATA_X, CHARA_PLAYER), cdata(CDATA_Y, CHARA_PLAYER), 0
				flt
				itemcreate -1, ITEM_ID_HERO_CHEESE, cdata(CDATA_X, CHARA_PLAYER), cdata(CDATA_Y, CHARA_PLAYER), 0
				flt
				itemcreate -1, ITEM_ID_GOLD_PIECE, cdata(CDATA_X, CHARA_PLAYER), cdata(CDATA_Y, CHARA_PLAYER), 20000
				flt
				itemcreate -1, ITEM_ID_PLATINUM_COIN, cdata(CDATA_X, CHARA_PLAYER), cdata(CDATA_Y, CHARA_PLAYER), 5
				txt_questcompleted
				txtmore
				txt_questitem
				txt_questupdate
				gdata(GDATA_FLAG_SUB_VEIN) = 1000
			}
			goto *chat_end
		}
		goto *chat_unique_SWEND1
	}
	if ( _switch_val == CREATURE_ID_MARKS_THE_GREAT_THIEF | _switch_sw ) {
		_switch_sw = 0
		if ( gdata(GDATA_FLAG_SUB_PYRAMID) != 0 ) {
			chatMore lang("フッ。安心してください。あなたの家に侵入したりはしませんよ。", "Heh, don't worry, I won't break in your house."), strbye
			goto *chat_end
		}
		if ( cdata(CDATA_FAME, CHARA_PLAYER) < 3000 ) {
			chatMore lang("私に気安く話しかけないでもらえますか？", "Leave me alone, please."), strbye
			goto *chat_end
		}
		if ( gdata(GDATA_FLAG_SUB_PYRAMID) == 0 ) {
			chatMore lang("ああ、あなたがかの有名な" + cdatan(CDATAN_AKA, CHARA_PLAYER) + "ですね。いい所に来てくれました。カプールの北にある謎のピラミッドを、あなたはご存知ですか？ネフィアがまだ草の根も生えない砂漠だった頃から存在し、古代の秘宝が眠っているといわれている。しかし、入り口は奇妙な魔法に保護され、誰も手をつけることができない。いや…できなかった。", "Ah, you're the famous " + cdatan(CDATAN_AKA, CHARA_PLAYER) + ", aren't you? You came at a fine time. North of Kapul lies an enigmatic pyramid; you may have heard of it. The pyramid has existed since Nefia was a barren desert where even grass wouldn't grow and it's said that ancient treasure is buried within. However, it's sealed by some bizarre enchantments and is impenetrable... well, it WAS impenetrable.")
			if ( cdata(CDATA_GOLD, CHARA_PLAYER) >= 20000 ) {
				chatList 1, lang("購入する", "Alright, I'll pay.")
			}
			chatList 0, strbye
			buff = lang("私宛にね、面白い手紙が届いたんですよ。送り主はピラミッドの主『ツェン』。そして、内容は私にピラミッドへの挑戦権を与えると。…しかし、私は危険な罠に自ら陥るほど愚かではない。あなたにこの挑戦状を譲りましょう。むろん、タダではない。金貨20000枚でいかがですか？", "I have received a very strange letter. The sender calls himself Tsen, lord of the Pyramid. He has sent me an invitation to enter his pyramid... However, I am not foolish enough to barge into such a trap. I'll turn this invitation over to you. Of course, I won't let you have it for nothing. 20,000 gold and it's yours.")
			gosub *chat_select
			if ( chatval != 1 ) {
				chatMore lang("フッ。お金が用意できたら、いつでも取引に応じますよ。", "Heh, talk to me again when you have money."), strbye
				goto *chat_end
			}
			txt_questupdate
			txtmore
			txt_questitem
			cdata(CDATA_GOLD, CHARA_PLAYER) -= 20000
			snd SOUNDLIST_PAYGOLD1
			flt
			itemcreate -1, ITEM_ID_RED_BOOK, cdata(CDATA_X, CHARA_PLAYER), cdata(CDATA_Y, CHARA_PLAYER), 0
			inv(INV_ITEM_BOOK_ID, ci) = 13
			chatMore lang("ホホホッ。取引成立ですね。では、この招待状をあなたに渡しましょう。", "Deal then. You can keep this invitation."), strbye
			gdata(GDATA_FLAG_SUB_PYRAMID) = 1
			goto *chat_end
		}
		goto *chat_unique_SWEND1
	}
	if ( _switch_val == CREATURE_ID_NOEL_THE_BOMBER | _switch_sw ) {
		_switch_sw = 0
		if ( gdata(GDATA_FLAG_SUB_NUKE) == 1000 ) {
			chatMore lang("あなた、生きてたのね。ヒトゴロシくん。", "You're still alive I see. Good luck glorious murderer.")
		}
		if ( gdata(GDATA_FLAG_SUB_NUKE) == 1 ) {
			chatMore lang("パルミアの街に、真っ赤な花が咲くのを楽しみにしているわ。", "Go, make the brilliant blood red roses bloom.")
		}
		if ( gdata(GDATA_FLAG_SUB_NUKE) == 2 ) {
			flt
			nostack = 1
			itemcreate -1, ITEM_ID_SECRET_TREASURE, cdata(CDATA_X, CHARA_PLAYER), cdata(CDATA_Y, CHARA_PLAYER), 0
			inv(INV_ITEM_PARAM1, ci) = 162
			flt
			itemcreate -1, ITEM_ID_PLATINUM_COIN, cdata(CDATA_X, CHARA_PLAYER), cdata(CDATA_Y, CHARA_PLAYER), 6
			txt_questcompleted
			txtmore
			txt_questitem
			txt_questupdate
			gdata(GDATA_FLAG_SUB_NUKE) = 1000
			chatMore lang("感じるわ、大勢の人の苦しみ…悲しみ…。あなたはたくさん殺したのね。小さな子供…女性…老人…生まれて間もない赤ん坊…あたし、今日は身体が火照って眠れそうにないわ。ありがとう。報酬を受け取りなさい。", "I can feel it already... the suffering... the misery... the pain... You've killed many people this day, you should be proud. Little kids, girls, women, old men, the sick, the feeble, even those neither born nor conceived yet. My body's hot, excited, I can hardly breathe... I won't be able to sleep tonight. My thanks, these are for you.")
		}
		if ( gdata(GDATA_FLAG_SUB_NUKE) == 0 ) {
			chatMore lang("ねえ、あなたはこの街の人じゃないでしょ？匂いで分かるのよ、外の人間は。外の…世界があたしに教えてくれたのは、力のない生物はただ利用され、弄ばれ、最後には食べられてしまうっていうことだけ。同情や慈悲さえ勝ち取れない人間が、この街には大勢いる。そんな者達がどうやって生活しているか、あなたは知りたいと思わない？", "Hey, you're not from around here are you? I can tell just by your smell. The world out there... it's taught me that the meek are inevitably used, abused, and then chewed up and swallowed kicking and screaming. The people here are a rank lot, you won't win them over with sympathy and compassion. Don't you ever wonder how people like that can survive? Don't you want to know?")
			chatList 1, lang("もちろん", "Of course I will.")
			chatList 0, strbye
			buff = lang("あたし達は他人の血を吸って生きるのよ。憎しみや妬み、執着、悪意が、この街では力になる。外の世界では疎まれ軽蔑される弱き者達が、自分に与えられた能力をはじめて認めてもらえる、ダルフィはそんな街。ねえ、あなたもこっちの世界に来る気はない？", "It's so simple, we live by feeding off of others. Spite, hatred, wickedness, and unrelenting cutthroat vigor are the only strengths you can rely on in this town. The outside world looks down on our lot, so we will make the outside world recognize our might. Say, stranger, why don't you join me in my world?")
			gosub *chat_select
			if ( chatval != 1 ) {
				chatMore lang("どっかにいきなさい、イクジナシくん。", "Then find somewhere else to stand, coward."), strbye
				goto *chat_end
			}
			txt_questupdate
			gdata(GDATA_FLAG_SUB_NUKE) = 1
			chatMore lang("そう、あなたもこちらの人間だったのね。歓迎の宴の代わりに、美味しい話をあげるわ。あたしね、たくさんの人が苦しむ姿を想像すると、とても興奮するの。パルミアの宿屋にぬいぐるみが置かれている部屋がある。そのぬいぐるみに、爆弾をしかけなさい。あのすました街を血で溢れさせてくれたら、ご褒美をあげる。", "Looks like you're one of us after all. I can't give you a welcome feast, but I can tell you a delicious little story. When I imagine others suffering, whimpering in pain and misery, I get goose bumps. How divine! At the inn in Palmia, there's a stuffed toy laying on the floor of the private room. Stick this bomb inside that toy for me. If you can drown those mindless ants in blood for me, I'll reward you well.")
		}
		if ( cdata(CDATA_GOLD, CHARA_PLAYER) >= 12000 ) {
			chatList 1, lang("購入する", "I'll buy.")
		}
		chatList 0, strbye
		buff = lang("ねえ、核爆弾買う？金貨12000枚よ。", "Here, you need a nuke. Only 12000gp.")
		gosub *chat_select
		if ( chatval != 1 ) {
			chatMore lang("あら、そう。", "Then go away."), strbye
			goto *chat_end
		}
		txtmore
		txt_questitem
		cdata(CDATA_GOLD, CHARA_PLAYER) -= 12000
		snd SOUNDLIST_PAYGOLD1
		flt
		itemcreate -1, ITEM_ID_NUCLEAR_BOMB, cdata(CDATA_X, CHARA_PLAYER), cdata(CDATA_Y, CHARA_PLAYER), 0
		chatMore lang("さあ、真っ赤な花を咲かせなさい。", "Go, make the brilliant blood red roses bloom."), strbye
		goto *chat_end
	}
	if ( _switch_val == CREATURE_ID_ICOLLE_THE_BIOLOGIST | _switch_sw ) {
		_switch_sw = 0
		if ( gdata(GDATA_FLAG_SUB_BIOLOGIST) >= 1000 ) {
			chatMore lang("なんじゃ、話しかけるでにゃー。実験で忙しいのじゃ！", "I don't have time to talk, I'm busy conducting experiments. Out of the way!")
			chatList 2, lang("仲間に実験を手伝わせる", "Let my companion help with your experiment.")
			chatList 1, lang("自分が実験を手伝う", "Let me help with your experiment.")
			chatList 0, strbye
			buff = lang("(後天的身体部位の削除実験と書かれた紙が散らばっている…)", "(He seems to have an experiment to remove body parts...)"), strbye
			gosub *chat_select
			if ( chatval == 1 ) {
				chatList 1, strbye
				chatList 0, lang("ああ", "Okay.")
				buff = lang("おおそうか！！ならば早速、実験体になってもらおうかの！さっさと全部脱がんか！", "Oooh! Very well, I'd gladly use you as a guinea pig! Let's get started immediately!")
				gosub *chat_select
				if ( chatval != 0 ) {
					goto *chat_end
				}
				chatMore lang("これをこうして…さらに…ん？まぁよいか。そしてこうやってついでに…。", "Now if we do this... and then make an adjustment here... Hmm? Well, it's close enough. Let's make just a few more modifications here...")
				maebui = 0
				repeat MAX_EQUIP_SLOT_TOTAL, CDATA_STARTING_EQUIP_SLOTS
					if ( cdata(cnt, CHARA_PLAYER) != 0 ) {
						maebui++
					}
				loop
				snd SOUNDLIST_BALL1
				await 300
				snd SOUNDLIST_ALERT1
				await 300
				snd SOUNDLIST_HEART1
				await 300
				snd SOUNDLIST_KILL2
				await 300
				snd SOUNDLIST_VOMIT
				await 300
				snd SOUNDLIST_AMMO
				await 300
				snd SOUNDLIST_PRAY2
				await 300
				snd SOUNDLIST_CRUSH1
				redraw 0
				gosub *screen_draw
				gosub *screen_fade
				gsel 4
				pos 0, 0
				picload exedir + "graphic\\face1" + devfile + ".bmp", 1
				gsel 0
				repeat MAX_EQUIP_SLOT_TOTAL, CDATA_STARTING_EQUIP_SLOTS
					p = cdata(cnt, CHARA_PLAYER) \ EXT_EQUIP_SLOTS
					if ( p == 0 ) {
						continue
					}
					p--
					inv(INV_ITEM_EQUIP, p) = 0
					cdata(cnt, CHARA_PLAYER) = cdata(cnt, CHARA_PLAYER) / EXT_EQUIP_SLOTS * EXT_EQUIP_SLOTS
				loop
				repeat MAX_EQUIP_SLOT_TOTAL, CDATA_STARTING_EQUIP_SLOTS
					if ( cdata(cnt, CHARA_PLAYER) != 0 ) {
						cdata(cnt, CHARA_PLAYER) = 0
					}
				loop
				r1 = CHARA_PLAYER
				rc = CHARA_PLAYER
				s(1) = ""
				if ( cdatan(CDATAN_RACE, r1) == "kobolt" ) {
					s(1) = "頭|体|背|手|手|指|指|腕|腰|足|"
					gosub *set_figure
				}
				if ( cdatan(CDATAN_RACE, r1) == "orc" ) {
					s(1) = "頭|体|背|手|手|指|腕|腰|足|"
					gosub *set_figure
				}
				if ( cdatan(CDATAN_RACE, r1) == "largeanimal" ) {
					s(1) = "頭|首|体|背|手|足|足|"
					gosub *set_figure
				}
				if ( cdatan(CDATAN_RACE, r1) == "lizardman" ) {
					s(1) = "頭|体|背|手|手|指|腕|腰|足|"
					gosub *set_figure
				}
				if ( cdatan(CDATAN_RACE, r1) == "minotaur" ) {
					s(1) = "頭|体|手|手|指|腰|足|"
					gosub *set_figure
				}
				if ( cdatan(CDATAN_RACE, r1) == "yerles" ) {
					s(1) = "頭|首|体|背|手|手|指|指|腕|腰|足|"
					gosub *set_figure
				}
				if ( cdatan(CDATAN_RACE, r1) == "norland" ) {
					s(1) = "頭|首|体|背|手|手|指|指|腕|腰|足|"
					gosub *set_figure
				}
				if ( cdatan(CDATAN_RACE, r1) == "eulderna" ) {
					s(1) = "頭|首|体|背|手|手|指|指|腕|腰|足|"
					gosub *set_figure
				}
				if ( cdatan(CDATAN_RACE, r1) == "fairy" ) {
					s(1) = "頭|首|体|背|手|手|指|指|腕|腰|足|"
					gosub *set_figure
				}
				if ( cdatan(CDATAN_RACE, r1) == "asura" ) {
					s(1) = "手|手|手|手|首|"
					gosub *set_figure
				}
				if ( cdatan(CDATAN_RACE, r1) == "slime" ) {
					s(1) = "頭|"
					gosub *set_figure
				}
				if ( cdatan(CDATAN_RACE, r1) == "doggod" ) {
					s(1) = "頭|首|体|手|指|腕|足|"
					gosub *set_figure
				}
				if ( cdatan(CDATAN_RACE, r1) == "dwarf" ) {
					s(1) = "頭|首|体|背|手|手|指|指|腕|腰|足|"
					gosub *set_figure
				}
				if ( cdatan(CDATAN_RACE, r1) == "juere" ) {
					s(1) = "頭|首|体|背|手|手|指|指|腕|腰|足|"
					gosub *set_figure
				}
				if ( cdatan(CDATAN_RACE, r1) == "zombie" ) {
					s(1) = "頭|首|体|背|手|手|指|腕|腰|"
					gosub *set_figure
				}
				if ( cdatan(CDATAN_RACE, r1) == "elea" ) {
					s(1) = "頭|首|体|背|手|手|指|指|腕|腰|足|"
					gosub *set_figure
				}
				if ( cdatan(CDATAN_RACE, r1) == "rabbit" ) {
					s(1) = "頭|首|体|背|腕|"
					gosub *set_figure
				}
				if ( cdatan(CDATAN_RACE, r1) == "sheep" ) {
					s(1) = "頭|首|体|背|腕|足|"
					gosub *set_figure
				}
				if ( cdatan(CDATAN_RACE, r1) == "frog" ) {
					s(1) = "体|"
					gosub *set_figure
				}
				if ( cdatan(CDATAN_RACE, r1) == "worm" ) {
					s(1) = "背|指|指|"
					gosub *set_figure
				}
				if ( cdatan(CDATAN_RACE, r1) == "snail" ) {
					s(1) = "背|"
					gosub *set_figure
				}
				if ( cdatan(CDATAN_RACE, r1) == "mandrake" ) {
					s(1) = "頭|背|"
					gosub *set_figure
				}
				if ( cdatan(CDATAN_RACE, r1) == "beetle" ) {
					s(1) = "首|"
					gosub *set_figure
				}
				if ( cdatan(CDATAN_RACE, r1) == "mushroom" ) {
					s(1) = "頭|首|"
					gosub *set_figure
				}
				if ( cdatan(CDATAN_RACE, r1) == "bat" ) {
					s(1) = "頭|"
					gosub *set_figure
				}
				if ( cdatan(CDATAN_RACE, r1) == "ent" ) {
					s(1) = "手|指|指|腕|足|"
					gosub *set_figure
				}
				if ( cdatan(CDATAN_RACE, r1) == "lich" ) {
					s(1) = "頭|首|体|背|手|手|指|指|腕|腰|足|"
					gosub *set_figure
				}
				if ( cdatan(CDATAN_RACE, r1) == "bacteria" ) {
					s(1) = "体|"
					gosub *set_figure
				}
				if ( cdatan(CDATAN_RACE, r1) == "ghost" ) {
					s(1) = "頭|首|体|背|手|手|指|指|腰|"
					gosub *set_figure
				}
				if ( cdatan(CDATAN_RACE, r1) == "spirit" ) {
					s(1) = "頭|首|体|背|手|手|指|指|腕|"
					gosub *set_figure
				}
				if ( cdatan(CDATAN_RACE, r1) == "eye" ) {
					s(1) = "頭|"
					gosub *set_figure
				}
				if ( cdatan(CDATAN_RACE, r1) == "mazin" ) {
					s(1) = "首|体|背|手|手|指|指|腰|足|"
					gosub *set_figure
				}
				if ( cdatan(CDATAN_RACE, r1) == "wasp" ) {
					s(1) = "頭|"
					gosub *set_figure
				}
				if ( cdatan(CDATAN_RACE, r1) == "giant" ) {
					s(1) = "体|背|手|手|腕|足|"
					gosub *set_figure
				}
				if ( cdatan(CDATAN_RACE, r1) == "imp" ) {
					s(1) = "首|体|手|手|指|指|指|足|"
					gosub *set_figure
				}
				if ( cdatan(CDATAN_RACE, r1) == "hand" ) {
					s(1) = "手|手|指|指|腕|"
					gosub *set_figure
				}
				if ( cdatan(CDATAN_RACE, r1) == "snake" ) {
					s(1) = "体|"
					gosub *set_figure
				}
				if ( cdatan(CDATAN_RACE, r1) == "drake" ) {
					s(1) = "首|体|指|指|"
					gosub *set_figure
				}
				if ( cdatan(CDATAN_RACE, r1) == "goblin" ) {
					s(1) = "頭|首|体|背|手|手|指|指|腕|腰|足|"
					gosub *set_figure
				}
				if ( cdatan(CDATAN_RACE, r1) == "bear" ) {
					s(1) = "手|手|指|指|腕|腰|足|"
					gosub *set_figure
				}
				if ( cdatan(CDATAN_RACE, r1) == "armor" ) {
					s(1) = "頭|首|体|背|手|手|腕|腰|"
					gosub *set_figure
				}
				if ( cdatan(CDATAN_RACE, r1) == "medusa" ) {
					s(1) = "体|手|手|指|指|腕|足|"
					gosub *set_figure
				}
				if ( cdatan(CDATAN_RACE, r1) == "cupid" ) {
					s(1) = "首|体|手|手|指|指|腕|腰|"
					gosub *set_figure
				}
				if ( cdatan(CDATAN_RACE, r1) == "karune" ) {
					s(1) = "頭|首|体|背|手|手|指|指|腕|腰|足|"
					gosub *set_figure
				}
				if ( cdatan(CDATAN_RACE, r1) == "harpy" ) {
					s(1) = "首|手|手|指|指|腕|足|足|"
					gosub *set_figure
				}
				if ( cdatan(CDATAN_RACE, r1) == "dragon" ) {
					s(1) = "首|体|指|指|"
					gosub *set_figure
				}
				if ( cdatan(CDATAN_RACE, r1) == "dinosaur" ) {
					s(1) = "首|体|指|指|"
					gosub *set_figure
				}
				if ( cdatan(CDATAN_RACE, r1) == "beast" ) {
					s(1) = "頭|首|体|背|手|足|足|"
					gosub *set_figure
				}
				if ( cdatan(CDATAN_RACE, r1) == "spider" ) {
					s(1) = "指|指|"
					gosub *set_figure
				}
				if ( cdatan(CDATAN_RACE, r1) == "golem" ) {
					s(1) = "頭|首|体|背|手|手|指|指|腕|腰|足|"
					gosub *set_figure
				}
				if ( cdatan(CDATAN_RACE, r1) == "rock" ) {
					s(1) = "頭|"
					gosub *set_figure
				}
				if ( cdatan(CDATAN_RACE, r1) == "zanan" ) {
					s(1) = "頭|首|体|背|手|手|指|指|腕|腰|足|"
					gosub *set_figure
				}
				if ( cdatan(CDATAN_RACE, r1) == "skeleton" ) {
					s(1) = "頭|首|体|背|手|手|指|指|腕|腰|足|"
					gosub *set_figure
				}
				if ( cdatan(CDATAN_RACE, r1) == "piece" ) {
					s(1) = "頭|首|体|背|手|手|指|指|腕|腰|"
					gosub *set_figure
				}
				if ( cdatan(CDATAN_RACE, r1) == "cat" ) {
					s(1) = "頭|首|体|背|手|足|足|"
					gosub *set_figure
				}
				if ( cdatan(CDATAN_RACE, r1) == "dog" ) {
					s(1) = "頭|首|体|背|手|足|足|"
					gosub *set_figure
				}
				if ( cdatan(CDATAN_RACE, r1) == "roran" ) {
					s(1) = "頭|首|体|背|手|手|指|指|腕|腰|足|"
					gosub *set_figure
				}
				if ( cdatan(CDATAN_RACE, r1) == "rat" ) {
					s(1) = "背|腕|腰|足|"
					gosub *set_figure
				}
				if ( cdatan(CDATAN_RACE, r1) == "shell" ) {
					s(1) = "背|手|手|指|指|足|"
					gosub *set_figure
				}
				if ( cdatan(CDATAN_RACE, r1) == "catgod" ) {
					s(1) = "頭|首|体|手|指|腕|足|"
					gosub *set_figure
				}
				if ( cdatan(CDATAN_RACE, r1) == "machinegod" ) {
					s(1) = "頭|体|背|手|手|腕|腰|足|"
					gosub *set_figure
				}
				if ( cdatan(CDATAN_RACE, r1) == "undeadgod" ) {
					s(1) = "首|体|背|手|手|指|指|"
					gosub *set_figure
				}
				if ( cdatan(CDATAN_RACE, r1) == "machine" ) {
					s(1) = "頭|首|体|背|手|手|指|指|腕|腰|足|"
					gosub *set_figure
				}
				if ( cdatan(CDATAN_RACE, r1) == "wisp" ) {
					s(1) = "頭|"
					gosub *set_figure
				}
				if ( cdatan(CDATAN_RACE, r1) == "bird" ) {
					s(1) = "頭|体|足|"
					gosub *set_figure
				}
				if ( cdatan(CDATAN_RACE, r1) == "seamonster" ) {
					s(1) = "頭|首|体|背|手|手|腕|"
					gosub *set_figure
				}
				if ( cdatan(CDATAN_RACE, r1) == "catsister" ) {
					s(1) = "頭|首|体|背|手|手|指|指|腕|腰|足|"
					gosub *set_figure
				}
				if ( cdatan(CDATAN_RACE, r1) == "mutant" ) {
					s(1) = "体|手|"
					gosub *set_figure
				}
				if ( cdatan(CDATAN_RACE, r1) == "yeek" ) {
					s(1) = "頭|首|体|背|手|手|指|指|腕|腰|足|"
					gosub *set_figure
				}
				if ( cdatan(CDATAN_RACE, r1) == "yith" ) {
					s(1) = "手|手|手|手|指|指|指|指|"
					gosub *set_figure
				}
				if ( cdatan(CDATAN_RACE, r1) == "servant" ) {
					s(1) = "頭|首|体|背|手|手|指|指|腕|腰|足|"
					gosub *set_figure
				}
				if ( cdatan(CDATAN_RACE, r1) == "horse" ) {
					s(1) = "体|足|足|"
					gosub *set_figure
				}
				if ( cdatan(CDATAN_RACE, r1) == "god" ) {
					s(1) = "手|手|"
					gosub *set_figure
				}
				if ( cdatan(CDATAN_RACE, r1) == "quickling" ) {
					s(1) = "頭|体|背|手|手|指|指|腕|足|"
					gosub *set_figure
				}
				if ( cdatan(CDATAN_RACE, r1) == "metal" ) {
					s(1) = "頭|体|背|"
					gosub *set_figure
				}
				if ( cdatan(CDATAN_RACE, r1) == "behicle" ) {
					s(1) = "頭|体|背|手|手|腰|足|足|"
					gosub *set_figure
				}
				if ( s(1) == "" ) {
					s(1) = "頭|首|体|背|手|手|指|指|腕|腰|足|"
					gosub *set_figure
				}
				r1 = CHARA_PLAYER
				gosub *calcBodyFix
				atobui = 0
				repeat MAX_EQUIP_SLOT_TOTAL, CDATA_STARTING_EQUIP_SLOTS
					if ( cdata(cnt, CHARA_PLAYER) != 0 ) {
						atobui++
					}
				loop
				if ( maebui > atobui ) {
					txtef COLOR_RED
					txt lang("気がつくと、後天的な部位に装備が出来なくなっていた…。", "You notice that you can no longer equip some items...")
				}
				r1 = CHARA_PLAYER
				gosub *charaRefresh
				dbidn = 0
				dbmode = DBMODE_NONE
				txt lang("「カガクの進歩に犠牲はつきものじゃー」", cnvtalk("Sacrifice is inherent to the advancement of science~"))
				r1 = CHARA_PLAYER
				rc = CHARA_PLAYER
				goto *chat_end
			}
			if ( chatval == 2 ) {
				chatMore lang("おおそうか！！それで、誰が手伝ってくれるんじゃ？", "Oooh, I see! Which one wants to help?")
				ikoru = 100
				allyctrl = 3
				gosub *com_ally
				ikoru = 0
				if ( stat != (-1) ) {
					c = stat
					snd SOUNDLIST_OK1
					txtnew
					chatMore lang("ならば早速、実験体になってもらおうかの！さっさと全部脱がんか！", "I will gladly use them as my guinea pig!")
					chatMore lang("これをこうして…さらに…うむ？こっちじゃったか？とりあえずはこうして…。", "Now if we do this... and then make an adjustment here... Hmm? That's what happened? Well anyways, for now I'll...")
					maebui = 0
					repeat MAX_EQUIP_SLOT_TOTAL, CDATA_STARTING_EQUIP_SLOTS
						if ( cdata(cnt, c) != 0 ) {
							maebui++
						}
					loop
					snd SOUNDLIST_BOLT1
					await 300
					snd SOUNDLIST_FIZZLE
					await 300
					snd SOUNDLIST_ATK_HELL
					await 300
					snd SOUNDLIST_EQUIP1
					await 300
					snd SOUNDLIST_POP3
					await 300
					snd SOUNDLIST_LOCKED1
					await 300
					snd SOUNDLIST_VOMIT
					redraw 0
					gosub *screen_draw
					gosub *screen_fade
					gsel 4
					pos 0, 0
					picload exedir + "graphic\\face1" + devfile + ".bmp", 1
					gsel 0
					r1 = c
					repeat MAX_EQUIP_SLOT_TOTAL, CDATA_STARTING_EQUIP_SLOTS
						p = cdata(cnt, r1) \ EXT_EQUIP_SLOTS
						if ( p == 0 ) {
							continue
						}
						p--
						inv(INV_ITEM_EQUIP, p) = 0
						cdata(cnt, r1) = cdata(cnt, r1) / EXT_EQUIP_SLOTS * EXT_EQUIP_SLOTS
					loop
					repeat MAX_EQUIP_SLOT_TOTAL, CDATA_STARTING_EQUIP_SLOTS
						if ( cdata(cnt, r1) != 0 ) {
							cdata(cnt, r1) = 0
						}
					loop
					r1 = c
					rc = c
					if ( cdatan(CDATAN_RACE, r1) == "kobolt" ) {
						s(1) = "頭|体|背|手|手|指|指|腕|腰|足|"
						gosub *set_figure
					}
					if ( cdatan(CDATAN_RACE, r1) == "orc" ) {
						s(1) = "頭|体|背|手|手|指|腕|腰|足|"
						gosub *set_figure
					}
					if ( cdatan(CDATAN_RACE, r1) == "largeanimal" ) {
						s(1) = "頭|首|体|背|手|足|足|"
						gosub *set_figure
					}
					if ( cdatan(CDATAN_RACE, r1) == "lizardman" ) {
						s(1) = "頭|体|背|手|手|指|腕|腰|足|"
						gosub *set_figure
					}
					if ( cdatan(CDATAN_RACE, r1) == "minotaur" ) {
						s(1) = "頭|体|手|手|指|腰|足|"
						gosub *set_figure
					}
					if ( cdatan(CDATAN_RACE, r1) == "yerles" ) {
						s(1) = "頭|首|体|背|手|手|指|指|腕|腰|足|"
						gosub *set_figure
					}
					if ( cdatan(CDATAN_RACE, r1) == "norland" ) {
						s(1) = "頭|首|体|背|手|手|指|指|腕|腰|足|"
						gosub *set_figure
					}
					if ( cdatan(CDATAN_RACE, r1) == "eulderna" ) {
						s(1) = "頭|首|体|背|手|手|指|指|腕|腰|足|"
						gosub *set_figure
					}
					if ( cdatan(CDATAN_RACE, r1) == "fairy" ) {
						s(1) = "頭|首|体|背|手|手|指|指|腕|腰|足|"
						gosub *set_figure
					}
					if ( cdatan(CDATAN_RACE, r1) == "asura" ) {
						s(1) = "手|手|手|手|首|"
						gosub *set_figure
					}
					if ( cdatan(CDATAN_RACE, r1) == "slime" ) {
						s(1) = "頭|"
						gosub *set_figure
					}
					if ( cdatan(CDATAN_RACE, r1) == "doggod" ) {
						s(1) = "頭|首|体|手|指|腕|足|"
						gosub *set_figure
					}
					if ( cdatan(CDATAN_RACE, r1) == "dwarf" ) {
						s(1) = "頭|首|体|背|手|手|指|指|腕|腰|足|"
						gosub *set_figure
					}
					if ( cdatan(CDATAN_RACE, r1) == "juere" ) {
						s(1) = "頭|首|体|背|手|手|指|指|腕|腰|足|"
						gosub *set_figure
					}
					if ( cdatan(CDATAN_RACE, r1) == "zombie" ) {
						s(1) = "頭|首|体|背|手|手|指|腕|腰|"
						gosub *set_figure
					}
					if ( cdatan(CDATAN_RACE, r1) == "elea" ) {
						s(1) = "頭|首|体|背|手|手|指|指|腕|腰|足|"
						gosub *set_figure
					}
					if ( cdatan(CDATAN_RACE, r1) == "rabbit" ) {
						s(1) = "頭|首|体|背|腕|"
						gosub *set_figure
					}
					if ( cdatan(CDATAN_RACE, r1) == "sheep" ) {
						s(1) = "頭|首|体|背|腕|足|"
						gosub *set_figure
					}
					if ( cdatan(CDATAN_RACE, r1) == "frog" ) {
						s(1) = "体|"
						gosub *set_figure
					}
					if ( cdatan(CDATAN_RACE, r1) == "worm" ) {
						s(1) = "背|指|指|"
						gosub *set_figure
					}
					if ( cdatan(CDATAN_RACE, r1) == "snail" ) {
						s(1) = "背|"
						gosub *set_figure
					}
					if ( cdatan(CDATAN_RACE, r1) == "mandrake" ) {
						s(1) = "頭|背|"
						gosub *set_figure
					}
					if ( cdatan(CDATAN_RACE, r1) == "beetle" ) {
						s(1) = "首|"
						gosub *set_figure
					}
					if ( cdatan(CDATAN_RACE, r1) == "mushroom" ) {
						s(1) = "頭|首|"
						gosub *set_figure
					}
					if ( cdatan(CDATAN_RACE, r1) == "bat" ) {
						s(1) = "頭|"
						gosub *set_figure
					}
					if ( cdatan(CDATAN_RACE, r1) == "ent" ) {
						s(1) = "手|指|指|腕|足|"
						gosub *set_figure
					}
					if ( cdatan(CDATAN_RACE, r1) == "lich" ) {
						s(1) = "頭|首|体|背|手|手|指|指|腕|腰|足|"
						gosub *set_figure
					}
					if ( cdatan(CDATAN_RACE, r1) == "bacteria" ) {
						s(1) = "体|"
						gosub *set_figure
					}
					if ( cdatan(CDATAN_RACE, r1) == "ghost" ) {
						s(1) = "頭|首|体|背|手|手|指|指|腰|"
						gosub *set_figure
					}
					if ( cdatan(CDATAN_RACE, r1) == "spirit" ) {
						s(1) = "頭|首|体|背|手|手|指|指|腕|"
						gosub *set_figure
					}
					if ( cdatan(CDATAN_RACE, r1) == "eye" ) {
						s(1) = "頭|"
						gosub *set_figure
					}
					if ( cdatan(CDATAN_RACE, r1) == "mazin" ) {
						s(1) = "首|体|背|手|手|指|指|腰|足|"
						gosub *set_figure
					}
					if ( cdatan(CDATAN_RACE, r1) == "wasp" ) {
						s(1) = "頭|"
						gosub *set_figure
					}
					if ( cdatan(CDATAN_RACE, r1) == "giant" ) {
						s(1) = "体|背|手|手|腕|足|"
						gosub *set_figure
					}
					if ( cdatan(CDATAN_RACE, r1) == "imp" ) {
						s(1) = "首|体|手|手|指|指|指|足|"
						gosub *set_figure
					}
					if ( cdatan(CDATAN_RACE, r1) == "hand" ) {
						s(1) = "手|手|指|指|腕|"
						gosub *set_figure
					}
					if ( cdatan(CDATAN_RACE, r1) == "snake" ) {
						s(1) = "体|"
						gosub *set_figure
					}
					if ( cdatan(CDATAN_RACE, r1) == "drake" ) {
						s(1) = "首|体|指|指|"
						gosub *set_figure
					}
					if ( cdatan(CDATAN_RACE, r1) == "goblin" ) {
						s(1) = "頭|首|体|背|手|手|指|指|腕|腰|足|"
						gosub *set_figure
					}
					if ( cdatan(CDATAN_RACE, r1) == "bear" ) {
						s(1) = "手|手|指|指|腕|腰|足|"
						gosub *set_figure
					}
					if ( cdatan(CDATAN_RACE, r1) == "armor" ) {
						s(1) = "頭|首|体|背|手|手|腕|腰|"
						gosub *set_figure
					}
					if ( cdatan(CDATAN_RACE, r1) == "medusa" ) {
						s(1) = "体|手|手|指|指|腕|足|"
						gosub *set_figure
					}
					if ( cdatan(CDATAN_RACE, r1) == "cupid" ) {
						s(1) = "首|体|手|手|指|指|腕|腰|"
						gosub *set_figure
					}
					if ( cdatan(CDATAN_RACE, r1) == "karune" ) {
						s(1) = "頭|首|体|背|手|手|指|指|腕|腰|足|"
						gosub *set_figure
					}
					if ( cdatan(CDATAN_RACE, r1) == "harpy" ) {
						s(1) = "首|手|手|指|指|腕|足|足|"
						gosub *set_figure
					}
					if ( cdatan(CDATAN_RACE, r1) == "dragon" ) {
						s(1) = "首|体|指|指|"
						gosub *set_figure
					}
					if ( cdatan(CDATAN_RACE, r1) == "dinosaur" ) {
						s(1) = "首|体|指|指|"
						gosub *set_figure
					}
					if ( cdatan(CDATAN_RACE, r1) == "beast" ) {
						s(1) = "頭|首|体|背|手|足|足|"
						gosub *set_figure
					}
					if ( cdatan(CDATAN_RACE, r1) == "spider" ) {
						s(1) = "指|指|"
						gosub *set_figure
					}
					if ( cdatan(CDATAN_RACE, r1) == "golem" ) {
						s(1) = "頭|首|体|背|手|手|指|指|腕|腰|足|"
						gosub *set_figure
					}
					if ( cdatan(CDATAN_RACE, r1) == "rock" ) {
						s(1) = "頭|"
						gosub *set_figure
					}
					if ( cdatan(CDATAN_RACE, r1) == "zanan" ) {
						s(1) = "頭|首|体|背|手|手|指|指|腕|腰|足|"
						gosub *set_figure
					}
					if ( cdatan(CDATAN_RACE, r1) == "skeleton" ) {
						s(1) = "頭|首|体|背|手|手|指|指|腕|腰|足|"
						gosub *set_figure
					}
					if ( cdatan(CDATAN_RACE, r1) == "piece" ) {
						s(1) = "頭|首|体|背|手|手|指|指|腕|腰|"
						gosub *set_figure
					}
					if ( cdatan(CDATAN_RACE, r1) == "cat" ) {
						s(1) = "頭|首|体|背|手|足|足|"
						gosub *set_figure
					}
					if ( cdatan(CDATAN_RACE, r1) == "dog" ) {
						s(1) = "頭|首|体|背|手|足|足|"
						gosub *set_figure
					}
					if ( cdatan(CDATAN_RACE, r1) == "roran" ) {
						s(1) = "頭|首|体|背|手|手|指|指|腕|腰|足|"
						gosub *set_figure
					}
					if ( cdatan(CDATAN_RACE, r1) == "rat" ) {
						s(1) = "背|腕|腰|足|"
						gosub *set_figure
					}
					if ( cdatan(CDATAN_RACE, r1) == "shell" ) {
						s(1) = "背|手|手|指|指|足|"
						gosub *set_figure
					}
					if ( cdatan(CDATAN_RACE, r1) == "catgod" ) {
						s(1) = "頭|首|体|手|指|腕|足|"
						gosub *set_figure
					}
					if ( cdatan(CDATAN_RACE, r1) == "machinegod" ) {
						s(1) = "頭|体|背|手|手|腕|腰|足|"
						gosub *set_figure
					}
					if ( cdatan(CDATAN_RACE, r1) == "undeadgod" ) {
						s(1) = "首|体|背|手|手|指|指|"
						gosub *set_figure
					}
					if ( cdatan(CDATAN_RACE, r1) == "machine" ) {
						s(1) = "頭|首|体|背|手|手|指|指|腕|腰|足|"
						gosub *set_figure
					}
					if ( cdatan(CDATAN_RACE, r1) == "wisp" ) {
						s(1) = "頭|"
						gosub *set_figure
					}
					if ( cdatan(CDATAN_RACE, r1) == "bird" ) {
						s(1) = "頭|体|足|"
						gosub *set_figure
					}
					if ( cdatan(CDATAN_RACE, r1) == "seamonster" ) {
						s(1) = "頭|首|体|背|手|手|腕|"
						gosub *set_figure
					}
					if ( cdatan(CDATAN_RACE, r1) == "catsister" ) {
						s(1) = "頭|首|体|背|手|手|指|指|腕|腰|足|"
						gosub *set_figure
					}
					if ( cdatan(CDATAN_RACE, r1) == "mutant" ) {
						s(1) = "体|手|"
						gosub *set_figure
					}
					if ( cdatan(CDATAN_RACE, r1) == "yeek" ) {
						s(1) = "頭|首|体|背|手|手|指|指|腕|腰|足|"
						gosub *set_figure
					}
					if ( cdatan(CDATAN_RACE, r1) == "yith" ) {
						s(1) = "手|手|手|手|指|指|指|指|"
						gosub *set_figure
					}
					if ( cdatan(CDATAN_RACE, r1) == "servant" ) {
						s(1) = "頭|首|体|背|手|手|指|指|腕|腰|足|"
						gosub *set_figure
					}
					if ( cdatan(CDATAN_RACE, r1) == "horse" ) {
						s(1) = "体|足|足|"
						gosub *set_figure
					}
					if ( cdatan(CDATAN_RACE, r1) == "god" ) {
						s(1) = "手|手|"
						gosub *set_figure
					}
					if ( cdatan(CDATAN_RACE, r1) == "quickling" ) {
						s(1) = "頭|体|背|手|手|指|指|腕|足|"
						gosub *set_figure
					}
					if ( cdatan(CDATAN_RACE, r1) == "metal" ) {
						s(1) = "頭|体|背|"
						gosub *set_figure
					}
					if ( cdatan(CDATAN_RACE, r1) == "behicle" ) {
						s(1) = "頭|体|背|手|手|腰|足|足|"
						gosub *set_figure
					}
					r1 = c
					gosub *calcBodyFix
					r1 = c
					gosub *charaRefresh
					dbidn = 0
					dbmode = DBMODE_NONE
					atobui = 0
					repeat MAX_EQUIP_SLOT_TOTAL, CDATA_STARTING_EQUIP_SLOTS
						if ( cdata(cnt, r1) != 0 ) {
							atobui++
						}
					loop
					if ( maebui > atobui ) {
						txtef COLOR_RED
						txt lang(name(r1) + "は後天的な部位を失った…。", name(r1) + " lost " + his(r1) + " additional equipment slots...")
					}
					txt lang("「カガクの進歩、発展のためには犠牲がつきものじゃ！」", cnvtalk("Sacrifice is inherent to the advancement of science~"))
					r1 = CHARA_PLAYER
					rc = CHARA_PLAYER
					ikoru = 0
				}
				goto *chat_end
			}
			goto *chat_end
		}
		if ( gdata(GDATA_FLAG_SUB_BIOLOGIST) == 0 ) {
			chatList 1, lang("手伝う", "Alright, I'll see what I can do.")
			chatList 0, strbye
			buff = lang("おうおう、良いところに来た。猫の手も借りたいほど忙しいのじゃ。今わしは能力転移の研究をしておってな、成功すればなんと、生物の能力だけを取り出し他の生物に付加することができるのじゃ！最後の段階として、5体の実験体が必要じゃが、ちょっと取ってきてはくれまいか？報酬として、今使っている試作機をくれてやってもよいぞ。", "Oh oh oh! You've come at *just* the right time. I'm so busy I'd take help from a cat if I had to. I'm doing research in the most remarkable field of genetic engineering. You see, I can take two living creatures and combine them to produce an even stronger creature! Is that not the most amazing thing you've ever heard? I need five test subjects for the final stage of the experiment. Won't you go get some for me? I'll reward you with the gene splicing machine I'm building.")
			gosub *chat_select
			if ( chatval != 1 ) {
				chatMore lang("とんだ愚か者じゃ！", "Then get out of my way you fool!"), strbye
				goto *chat_end
			}
			flt
			nostack = 1
			itemcreate -1, ITEM_ID_MONSTER_BALL, cdata(CDATA_X, CHARA_PLAYER), cdata(CDATA_Y, CHARA_PLAYER), 6
			inv(INV_ITEM_PARAM2, ci) = 5
			txt_questupdate
			txtmore
			txt_questitem
			chatMore lang("よしよし…このモンスターボールを持っていくがいい。使い方はわかっておるな？そう、瀕死のモンスターに投げつけるだけでよい。ボールのLVを超える相手には効かないから、気をつけるのじゃ。5個のボールにモンスターを捕獲して持ってきてくれ。いいか、「ボールに入れたまま」持ってくるのじゃぞ！", "Good good! Take these monster balls with you. Do you know how to use them? Yes yes, throw them at a monster when it is near death. The ball won't work if the monster is too high in level, so be careful. Please bring me five captured monsters. Oh... and... *please* bring them back to me IN the balls!"), strbye
			gdata(GDATA_FLAG_SUB_BIOLOGIST) = 1
			goto *chat_end
		}
		if ( gdata(GDATA_FLAG_SUB_BIOLOGIST) >= 1 & gdata(GDATA_FLAG_SUB_BIOLOGIST) <= 5 ) {
			inv_getheader 0
			f = 0
			repeat invrange, invhead
				if ( gdata(GDATA_FLAG_SUB_BIOLOGIST) >= 6 ) {
					break
				}
				if ( inv(INV_ITEM_NUM, cnt) > 0 ) {
					if ( inv(INV_ITEM_ID, cnt) == ITEM_ID_MONSTER_BALL ) {
						if ( inv(INV_ITEM_SUB_NAME, cnt) != 0 ) {
							inv(INV_ITEM_NUM, cnt)--
							gdata(GDATA_FLAG_SUB_BIOLOGIST)++
							f = 1
							txt itemname(cnt, 1) + lang("を納入した。", " was handed over.")
							continue cnt
						}
					}
				}
			loop
			if ( f ) {
				chatMore lang("おうおう、例の品を持ってきてくれたか。これで実験が進むわい。", "Oh oh! What a fine batch of samples you've brought me. I can finally proceed with the final stage."), strbye
			}
			else {
				chatMore lang("さあ、実験体を集めてくるのじゃ。", "Let's go over this one last time... I need five samples to proceed. FIVE."), strbye
			}
			gosub *calcBurdenPc
		}
		if ( gdata(GDATA_FLAG_SUB_BIOLOGIST) >= 6 ) {
			chatMore lang("成功じゃ！実験は大成功じゃ！おぬしの働きに感謝して、記念すべき能力複合機第一号をくれてやろう。大事に使うのじゃぞ！", "Success! The experiment is a huge success! You've done a great job! To express my thanks I'll let you use my gene splicing machine. Please take good care of it."), strbye
			flt
			itemcreate -1, ITEM_ID_GENE_MACHINE, cdata(CDATA_X, CHARA_PLAYER), cdata(CDATA_Y, CHARA_PLAYER), 0
			flt
			itemcreate -1, ITEM_ID_GOLD_PIECE, cdata(CDATA_X, CHARA_PLAYER), cdata(CDATA_Y, CHARA_PLAYER), 2500
			flt
			itemcreate -1, ITEM_ID_PLATINUM_COIN, cdata(CDATA_X, CHARA_PLAYER), cdata(CDATA_Y, CHARA_PLAYER), 2
			txt_questcompleted
			txtmore
			txt_questitem
			txt_questupdate
			gdata(GDATA_FLAG_SUB_BIOLOGIST) = 1000
		}
		goto *chat_end
	}
	if ( _switch_val == CREATURE_ID_BALZAK_THE_JANITOR | _switch_sw ) {
		_switch_sw = 0
		if ( gdata(GDATA_FLAG_SUB_SEWER) == 1000 ) {
			chatMore lang("ルミエストの街道は今日も清潔だぞ！", "Clean! The roads are clean in Lumiest today!"), strbye
			goto *chat_end
		}
		if ( gdata(GDATA_FLAG_SUB_SEWER) == 0 ) {
			chatMore lang("待て待て待てーい！", "Wait there! Wait!")
			chatList 1, lang("いいだろう", "Alright.")
			chatList 0, lang("面倒だ", "I'm not interested.")
			buff = lang("俺はルミエストの清掃を生涯の使命とし、この道十年のベテラン掃除屋バルザックだ。街道に落ちているどんな小さなゴミも見逃さないプロ魂を持つが、そんなプライドも傷つけられちまった。下水道にとんでもない化け物が住みついて、もう俺の手には負えないぜ。お前なら、俺の気持ちを汲み取って、退治に出向いてくれるな？", "I'm Balzak, a well known pro garbageman who has been cleaning the roads of Lumiest for 10 years. I've never let a single speck of trash defile the beautiful town of Lumiest. But my days are over. Foul creatures now nest in the sewer and disgusting smells spread everywhere. Adventurer, you are my only hope. Kill them, kill them for my sake!")
			gosub *chat_select
			if ( chatval != 1 ) {
				chatMore lang("そうか…冷たい奴だな…", "Okay... You are cruel..."), strbye
				goto *chat_end
			}
			txt_questupdate
			chatMore lang("その言葉、待っていたぜ！下水道は宿屋の近くにある。気をつけろ、奴らは手強いぞ！", "That's the word I wanted to hear! You'll find the sewer entrance near the inn. Be aware, they are pretty tough."), strbye
			gdata(GDATA_FLAG_SUB_SEWER) = 1
			cell_featset 18, 45, tile_downstairs, CELL_FEATURE_DOWNSTAIRS, 20
			goto *chat_end
		}
		if ( gdata(GDATA_FLAG_SUB_SEWER) == 1 ) {
			chatMore lang("おう、お前か。下水道の掃除は進んでいるか？", "Oh, it's you. What about the task I asked you to help with?"), strbye
			goto *chat_end
		}
		if ( gdata(GDATA_FLAG_SUB_SEWER) == 2 ) {
			flt
			itemcreate -1, ITEM_ID_STATUE_JURE, cdata(CDATA_X, CHARA_PLAYER), cdata(CDATA_Y, CHARA_PLAYER), 0
			flt
			nostack = 1
			itemcreate -1, ITEM_ID_MONSTER_BALL, cdata(CDATA_X, CHARA_PLAYER), cdata(CDATA_Y, CHARA_PLAYER), 0
			inv(INV_ITEM_PARAM2, ci) = 30
			flt
			itemcreate -1, ITEM_ID_GOLD_PIECE, cdata(CDATA_X, CHARA_PLAYER), cdata(CDATA_Y, CHARA_PLAYER), 15000
			flt
			itemcreate -1, ITEM_ID_PLATINUM_COIN, cdata(CDATA_X, CHARA_PLAYER), cdata(CDATA_Y, CHARA_PLAYER), 4
			txt_questcompleted
			txtmore
			txt_questitem
			txt_questupdate
			chatMore lang("なんだってー！あの下水道をほんとに浄化したというのか？さすがに、お前を選んだ俺の目は確かだったということか…ともかく礼をいうぞ！この報酬を受け取ってくれ。", "Whaaat?! You've really done it? Amazing! Here, take it, you deserve this."), strbye
			gdata(GDATA_FLAG_SUB_SEWER) = 1000
			goto *chat_end
		}
		goto *chat_unique_SWEND1
	}
	if ( _switch_val == CREATURE_ID_REVLUS_THE_MAGE_GUILDMASTER | _switch_sw ) {
		_switch_sw = 0
		if ( gdata(GDATA_FLAG_GUILD_MAGE) == 1 ) {
			if ( gdata(GDATA_RANK_GUILD) > 8000 ) {
				chatMore lang("新しく入った方ですか。頑張ってください。", "One of the new arrivals? Do your best."), strbye
				goto *chat_end
			}
			if ( gdata(GDATA_RANK_GUILD) > 4000 ) {
				chatMore lang("最近活躍しているらしいですね。あなたには期待していますよ。", "It seems you've been quite active lately. I look forward to your progress."), strbye
				goto *chat_end
			}
			if ( gdata(GDATA_RANK_GUILD) > 600 ) {
				chatMore lang("以前は他の２ギルドに押され気味でしたが…あなたが来てからこのギルドもかなり活気が戻りました。…ありがとうございます。", "Some time ago it felt like we were being suppressed by the other two guilds... but since your arrival we've gained momentum. ...You have my thanks."), strbye
				goto *chat_end
			}
			if ( gdata(GDATA_FLAG_SUB_GUILD_WARS1) < 1 ) {
				chatMore lang("狡猾な盗賊ギルドと野蛮な戦士ギルドを制し、我々魔術士ギルドの力を世間に見せつけるのです！あなたにはどちらか片方のギルドのマスターを倒してきてほしいのです。もう片方は私が相手しましょう。", "By claiming rule over the dastardly Thieves guild and the savage Fighters guild our Mages guild will show the world our might! I want you to defeat the guild master of one of the guilds. I will take care of the other."), strbye
				gdata(GDATA_FLAG_SUB_GUILD_WARS1) = 1
				txt_questupdate
				goto *chat_end
			}
			if ( gdata(GDATA_FLAG_SUB_GUILD_WARS1) == 1 ) {
				chatMore lang("さて、私はどちらのギルドを攻めましょうかね…。", "Now then, which guild shall I combat?"), strbye
				goto *chat_end
			}
			if ( gdata(GDATA_FLAG_SUB_GUILD_WARS1) == 2 ) {
				chatMore lang("素晴らしい！あなたならやってくれると信じていました！これは私からの特別報酬です。どうか受け取ってください。", "Wonderful! I believed you would succeed! This is a special reward from me. Please take it."), strbye
				flt
				itemcreate -1, ITEM_ID_BOOK_BOKONON, cdata(CDATA_X, CHARA_PLAYER), cdata(CDATA_Y, CHARA_PLAYER), 0
				flt
				itemcreate -1, ITEM_ID_SMALL_MEDAL, cdata(CDATA_X, CHARA_PLAYER), cdata(CDATA_Y, CHARA_PLAYER), 4
				flt
				itemcreate -1, ITEM_ID_PLATINUM_COIN, cdata(CDATA_X, CHARA_PLAYER), cdata(CDATA_Y, CHARA_PLAYER), 4
				txt_questcompleted
				txtmore
				txt_questitem
				txt_questupdate
				gdata(GDATA_FLAG_SUB_GUILD_WARS1) = 1000
				goto *chat_end
			}
			if ( gdata(GDATA_FLAG_SUB_GUILD_WARS1) >= 3 ) {
				chatMore lang("次のギルドマスターはあなたしかいない。私だけではなく皆もそう考えているようです。" + cdatan(CDATAN_NAME, CHARA_PLAYER) + "…これからもよろしく頼みますね。", "There is none other than you worthy of guild master. Not just me but everyone feels the same. " + cdatan(CDATAN_NAME, CHARA_PLAYER) + "...From now on we leave things in your hands."), strbye
				gdata(GDATA_FLAG_SUB_GUILD_WARS1) = 1000
				goto *chat_end
			}
		}
		chatMore lang("どちらさまでしょう？見かけない顔ですね。", "Sorry... who are you?"), strbye
		goto *chat_end
	}
	if ( _switch_val == CREATURE_ID_FRAY_THE_FIGHTER_GUILDMASTER | _switch_sw ) {
		_switch_sw = 0
		if ( gdata(GDATA_FLAG_GUILD_FIGHTER) == 1 ) {
			if ( gdata(GDATA_RANK_GUILD) > 8000 ) {
				chatMore lang("新人か。精進するように。", "A new recruit. Diligence is the way."), strbye
				goto *chat_end
			}
			if ( gdata(GDATA_RANK_GUILD) > 4000 ) {
				chatMore lang("最近活躍しているらしいじゃないか。君には期待しているよ。", "You've been quite active recently. I expect much from you."), strbye
				goto *chat_end
			}
			if ( gdata(GDATA_RANK_GUILD) > 600 ) {
				chatMore lang("他の者たちも君に負けじと切磋琢磨している。いい傾向だ、君がわがギルドに加入してくれて本当によかった…。", "Others have refined themselves to surpass you. It's a magnificent trend. I honestly appreciate you choosing our guild..."), strbye
				goto *chat_end
			}
			if ( gdata(GDATA_FLAG_SUB_GUILD_WARS3) < 1 ) {
				chatMore lang("戦士の力を目にもの見せる時が来た！盗賊ギルドと魔術士ギルド、腑抜けた両ギルドのマスターを私と君で打倒するぞ！戦いやすい方のマスターを倒してきてくれ。もう片方は私が引き受けよう。", "The time has come to show the might of we warriors! We shall overthrow the cowardly guild masters both! Please defeat the lesser of the two masters. I shall deal with the other."), strbye
				gdata(GDATA_FLAG_SUB_GUILD_WARS3) = 1
				txt_questupdate
				goto *chat_end
			}
			if ( gdata(GDATA_FLAG_SUB_GUILD_WARS3) == 1 ) {
				chatMore lang("うむ、明確な打倒目標があると素振りにも気合が入るな！", "Mm, having a serious opponent has my blood pumping!"), strbye
				goto *chat_end
			}
			if ( gdata(GDATA_FLAG_SUB_GUILD_WARS3) == 2 ) {
				chatMore lang("勝ってきたか！君ならばやってくれると信じていたよ！これは私からの特別報酬だ。受け取ってほしいな。", "You have been victorious! I knew you would! This is a special reward from me. Please accept it."), strbye
				flt
				itemcreate -1, ITEM_ID_FLAME_EDGE, cdata(CDATA_X, CHARA_PLAYER), cdata(CDATA_Y, CHARA_PLAYER), 0
				flt
				itemcreate -1, ITEM_ID_SMALL_MEDAL, cdata(CDATA_X, CHARA_PLAYER), cdata(CDATA_Y, CHARA_PLAYER), 4
				flt
				itemcreate -1, ITEM_ID_PLATINUM_COIN, cdata(CDATA_X, CHARA_PLAYER), cdata(CDATA_Y, CHARA_PLAYER), 4
				txt_questcompleted
				txtmore
				txt_questitem
				txt_questupdate
				gdata(GDATA_FLAG_SUB_GUILD_WARS3) = 1000
				goto *chat_end
			}
			if ( gdata(GDATA_FLAG_SUB_GUILD_WARS3) >= 3 ) {
				chatMore lang("次のギルドマスターは君しかいない。私だけではなく皆もそう考えているはずだ。" + cdatan(CDATAN_NAME, CHARA_PLAYER) + "、これからもよろしく頼むぞ。", "There is no other than you for the next guild master. Not just me but everyone believes so. " + cdatan(CDATAN_NAME, CHARA_PLAYER) + ", we are looking forward to working with you."), strbye
				gdata(GDATA_FLAG_SUB_GUILD_WARS3) = 1000
				goto *chat_end
			}
		}
		chatMore lang("誰だ？見かけない顔だな。", "Who are you? I haven't seen your face before."), strbye
		goto *chat_end
	}
	if ( _switch_val == CREATURE_ID_SIN_THE_THIEF_GUILDMASTER | _switch_sw ) {
		_switch_sw = 0
		if ( gdata(GDATA_FLAG_GUILD_THIEF) == 1 ) {
			if ( gdata(GDATA_RANK_GUILD) > 8000 ) {
				chatMore lang("貴様が新入りか。ヘマはするなよ。", "Yer still a newbie. Don't screw up."), strbye
				goto *chat_end
			}
			if ( gdata(GDATA_RANK_GUILD) > 4000 ) {
				chatMore lang("貴様の働きぶりには正直感心している。だが油断はしないことだ。", "Yer work is pretty good. Don't be getting lazy."), strbye
				goto *chat_end
			}
			if ( gdata(GDATA_RANK_GUILD) > 600 ) {
				chatMore lang("貴様ほどの冒険者ならば他のギルドでも活躍できたろうに。わざわざ闇に生きるとは変わったやつだ。…おかげで助かってはいるがな。", "Since yer such a great adventurer ya coulda gone to another guild. Yer a strange one fer picking ours. Big help for us ya been."), strbye
				goto *chat_end
			}
			if ( gdata(GDATA_FLAG_SUB_GUILD_WARS2) < 1 ) {
				chatMore lang("とっておきの仕事が入った。魔術士ギルドと戦士ギルドのギルドマスターを片づける。重要な仕事だが…" + cdatan(CDATAN_NAME, CHARA_PLAYER) + "、貴様に片方のマスターの始末を任せる。しくじるなよ。", "Got a reserved mission. We're gonna ice the mage and fighter guild masters. Pretty important job ya see... " + cdatan(CDATAN_NAME, CHARA_PLAYER) + ", yer gonna take down one of them, and I'll get the other. Don't screw up."), strbye
				gdata(GDATA_FLAG_SUB_GUILD_WARS2) = 1
				txt_questupdate
				goto *chat_end
			}
			if ( gdata(GDATA_FLAG_SUB_GUILD_WARS2) == 1 ) {
				chatMore lang("貴様なら他のギルドマスターにもきっと勝てるさ。ふっ、他人をここまで信頼するとは俺も甘くなったものだ。", "Ya can probably take down one of the other guild masters. Heh, Can't believe I'm trustin someone else this much, I've gotten soft."), strbye
				goto *chat_end
			}
			if ( gdata(GDATA_FLAG_SUB_GUILD_WARS2) == 2 ) {
				chatMore lang("遅かったな…別に心配をしていたわけではないが。こいつは貴様の分け前だ。とっておけ。", "Took yer sweet time... Not like I was worried. Here's yer share. Take it."), strbye
				flt
				itemcreate -1, ITEM_ID_WOODEN_HORSE, cdata(CDATA_X, CHARA_PLAYER), cdata(CDATA_Y, CHARA_PLAYER), 0
				flt
				itemcreate -1, ITEM_ID_SMALL_MEDAL, cdata(CDATA_X, CHARA_PLAYER), cdata(CDATA_Y, CHARA_PLAYER), 4
				flt
				itemcreate -1, ITEM_ID_PLATINUM_COIN, cdata(CDATA_X, CHARA_PLAYER), cdata(CDATA_Y, CHARA_PLAYER), 4
				txt_questcompleted
				txtmore
				txt_questitem
				txt_questupdate
				gdata(GDATA_FLAG_SUB_GUILD_WARS2) = 1000
				goto *chat_end
			}
			if ( gdata(GDATA_FLAG_SUB_GUILD_WARS2) >= 3 ) {
				chatMore lang("次のギルドマスターを貴様に任せてやってもいいと思っている。" + cdatan(CDATAN_NAME, CHARA_PLAYER) + "…裏切らないでくれよ。", "I'm thinkin I can just leave it up to you for next guild master. " + cdatan(CDATAN_NAME, CHARA_PLAYER) + ", ya better not double cross us."), strbye
				gdata(GDATA_FLAG_SUB_GUILD_WARS2) = 1000
				goto *chat_end
			}
		}
		chatMore lang("貴様…何者だ？", "Who the hell are you?"), strbye
		goto *chat_end
	}
	if ( _switch_val == CREATURE_ID_LEXUS_THE_MAGE_WATCHMAN | _switch_sw ) {
		_switch_sw = 0
		if ( gdata(GDATA_FLAG_GUILD_MAGE) == 0 ) {
			chatList 2, lang("魔術士ギルドとは？", "Tell me about the Mages Guild.")
			chatList 1, lang("魔術士ギルドに加入したい", "I want to join the Mages Guild.")
			chatList 0, strbye
			buff = lang("止まれ…この階段の先は魔術士ギルドの管轄だ。ギルドメンバー以外の者が入ることはできない…", "Halt...the stairs lead to the Mages Guild office. Only the members of the guild are allowed to enter.")
			gosub *chat_select
			if ( chatval == 2 ) {
				chatMore lang("魔術士ギルドは、各地の魔術士を管轄する組合だ。組合員には規律の厳守と一定のノルマを求める代わりに、援助を施し特定の仕事を斡旋している。魔術士ギルドのメンバーには、魔法書の予約、全店舗での魔法書の割引、魔術スキルの習得と訓練などの特典がある。ギルドに加入するには、厳しい審査を通らなければならない。", "The Mages Guild is made up by experienced and confirmed experts in their field of magic. We offer a variety of services such as discounted spellbook prices, reservation of spellbooks, and training related skills. But joining the Mages Guild requires you to pass a difficult test that most common mages will fail.")
				goto *chat_unique
			}
			if ( chatval == 1 ) {
				if ( gdata(GDATA_FLAG_SUB_GUILD_MAGE) == 0 ) {
					chatMore lang("ギルドに加入したいというのか…我々が求めているのは有能な魔術士だ。お前がギルドのメンバーにふさわしいか試させてもらおう。", "So you are interested in joining our guild and we only need elite mages. Let's see if you are worthy of becoming one of us.")
					chatMore lang("この世界には、特殊な古代文字で書かれた古書物が散らばっている。これらを収集し、解読した後に、私の横にある納入箱に収めたまえ。古書物の価値に応じてギルドポイントを与えよう。30ギルドポイント、これがお前に課せられた試験のノルマだ…", "In north Tyris, there are several ancient books encrypted with a unique rune language. Should you want to join the guild, put them into the delivery chest after you have decrypted them and we shall reward you with guild points.")
					gdata(GDATA_FLAG_SUB_GUILD_MAGE) = 1
					gdata(GDATA_FLAG_GUILD_MAGE_NORMA) = 30
					txt_questupdate
					chatMore lang("ギルドポイントを規定の値まで集めたら、また私に話しかけてくれ。", "You will need to gather 30 guild points in order to enter the Mages Guild. Until then, we have nothing more to talk about.")
					goto *chat_unique
				}
				if ( gdata(GDATA_FLAG_GUILD_MAGE_NORMA) > 0 ) {
					chatMore lang("まだノルマが残っているじゃないか…ギルドに加入するには、審査を通らなければならないぞ。", "To pass the test, you need to gather 30 guild points.")
					goto *chat_unique
				}
				chatMore lang("ほう…どうやらノルマを見事に達成したようだな。", "Quite impressive... You have accomplished the task.")
				gdata(GDATA_RANK_GUILD) = 10000
				gdata(GDATA_FLAG_GUILD_THIEF) = 0
				gdata(GDATA_FLAG_GUILD_FIGHTER) = 0
				gdata(GDATA_FLAG_GUILD_MAGE) = 1
				gdata(GDATA_FLAG_GUILD_MAGE_NORMA) = 0
				gdata(GDATA_FLAG_GUILD_THIEF_NORMA) = 0
				gdata(GDATA_FLAG_SUB_GUILD_MAGE) = 1000
				gdata(GDATA_FLAG_SUB_GUILD_THIEF) = 0
				gdata(GDATA_FLAG_SUB_GUILD_FIGHTER) = 0
				gdata(GDATA_FLAG_SUB_FIGHTER_1) = 0
				gdata(GDATA_FLAG_SUB_MAGE_1) = 0
				gdata(GDATA_FLAG_SUB_THIEF_1) = 0
				txt_questcompleted
				txtmore
				txt_questupdate
				txtmore
				txtef COLOR_YELLOW
				txt lang("魔術士ギルドに加入した！", "You have joined the Mages Guild!")
				chatMore lang("おめでとう…合格だ。今日からお前は魔術士ギルドの一員となった。以後はギルドの規約を守り、ノルマをしっかりこなすように。", "Congratulations. You are now a formal member of the Mages Guild. You can use these stairs to enter the office. Always conform to the guild's rules and perform your tasks."), strbye
				cell_movechara tc, 4, 20
				cdata(CDATA_X_ORG, tc) = 4
				cdata(CDATA_Y_ORG, tc) = 20
			}
			goto *chat_end
		}
		cell_movechara tc, 4, 20
		cdata(CDATA_X_ORG, tc) = 4
		cdata(CDATA_Y_ORG, tc) = 20
		if ( gdata(GDATA_FLAG_SUB_MAGE_1) == 0 ) {
			chatList 1, lang("ノルマを貰う", "Do you have any tasks for me?")
		}
		else {
			chatList 2, lang("ノルマを報告する", "About my task.")
		}
		chatList 0, strbye
		buff = lang("ようこそ魔術士ギルドへ、" + ranktitle(8) + "の" + cdatan(CDATAN_NAME, CHARA_PLAYER) + "…どうぞ中にお入り下さい。", "Welcome to the Mages Guild, " + ranktitle(8) + " " + cdatan(CDATAN_NAME, CHARA_PLAYER) + "... Please come in.")
		gosub *chat_select
		if ( chatval == 1 ) {
			gdata(GDATA_FLAG_SUB_MAGE_1) = 1
			gdata(GDATA_FLAG_GUILD_MAGE_NORMA) = 75 - gdata(GDATA_RANK_GUILD) / 200
			txt_questupdate
			chatMore lang("良い心がけです。あなたにランク昇格のためのノルマを与えましょう。世界に散らばった古書物を解読し、納入してください。" + gdata(GDATA_FLAG_GUILD_MAGE_NORMA) + "ギルドポイントが集まったら、昇進のための審査会に報告してあげましょう。", "Sure, there're plenty of tasks for you. For now, collect the ancient books and decrypt them. When you gather " + gdata(GDATA_FLAG_GUILD_MAGE_NORMA) + " guild points, we will think about your promotion.")
			goto *chat_unique
		}
		if ( chatval == 2 ) {
			if ( gdata(GDATA_FLAG_GUILD_MAGE_NORMA) > 0 ) {
				chatMore lang("どうしました？まだノルマが残っていますよ。", "You have your task to complete.")
				goto *chat_unique
			}
			gdata(GDATA_FLAG_SUB_MAGE_1) = 0
			flt 51 - gdata(GDATA_RANK_GUILD) / 200
			flttypemajor = FILTER_ITEM_SPELLBOOK
			itemcreate -1, ITEM_ID_DUMMY, cdata(CDATA_X, CHARA_PLAYER), cdata(CDATA_Y, CHARA_PLAYER), 0
			flt
			itemcreate -1, ITEM_ID_GOLD_PIECE, cdata(CDATA_X, CHARA_PLAYER), cdata(CDATA_Y, CHARA_PLAYER), 10000 - gdata(GDATA_RANK_GUILD) + 1000
			flt
			itemcreate -1, ITEM_ID_PLATINUM_COIN, cdata(CDATA_X, CHARA_PLAYER), cdata(CDATA_Y, CHARA_PLAYER), limit(4 - gdata(GDATA_RANK_GUILD) / 2500, 1, 4)
			txt_questcompleted
			txtmore
			txt_questitem
			txt_questupdate
			modrank 8, 500, 8
			chatMore lang("確かにノルマの達成を確認しました。早速審査会を開いてあなたの功績を報告しましょう。", "You've done very well. I will give a report of your achievement to the council."), strbye
			goto *chat_end
		}
		goto *chat_end
	}
	if ( _switch_val == CREATURE_ID_ABYSS_THE_THIEF_WATCHMAN | _switch_sw ) {
		_switch_sw = 0
		if ( gdata(GDATA_FLAG_GUILD_THIEF) == 0 ) {
			chatList 2, lang("盗賊ギルドとは？", "Tell me about the Thieves Guild.")
			chatList 1, lang("盗賊ギルドに加入したい", "I want to join the Thieves Guild.")
			chatList 0, strbye
			buff = lang("止まれ…この階段の先は盗賊ギルドの管轄だ。ギルドメンバー以外の者が入ることはできない…", "Halt...the stairs lead to the Thieves Guild office. Only the members of the guild are allowed to enter.")
			gosub *chat_select
			if ( chatval == 2 ) {
				chatMore lang("盗賊ギルドは、各地の盗賊を管轄する組合だ。組合員には規律の厳守と一定のノルマを求める代わりに、援助を施し特定の仕事を斡旋している。盗賊ギルドのメンバーには、盗品の高値での売却、ブラックマーケットでの割引、盗賊スキルの習得と訓練などの特典がある。ギルドに加入するには、厳しい審査を通らなければならない。", "The Thieves Guild is made up by experienced and confirmed experts in their field of the shadow arts. We offer a variety of services such as buying stolen goods, discount at black markets, and training related skills. But joining the Thieves Guild requires you to pass a difficult test that most common thieves will fail.")
				goto *chat_unique
			}
			if ( chatval == 1 ) {
				if ( gdata(GDATA_FLAG_SUB_GUILD_THIEF) == 0 ) {
					chatMore lang("盗賊ギルドに加入したいというのか…我々は知ってのとおり闇の世界に身を置いている。まずは、お前が信頼に足る者かどうか試させてもらおう。", "So, you're interested in our guild? We hide in the shadows of society. You must win our trust to enter the guild.")
					gdata(GDATA_FLAG_SUB_GUILD_THIEF) = 1
					txt_questupdate
					chatMore lang("なに、簡単な試験だ。一定のレベルを越えた冒険者には、税金が毎月徴収されるのは知っているな？その税金を4ヶ月滞納するだけだ。無論、お前は犯罪者となり、国の犬に追われる事になるだろう。その覚悟がないならば、盗賊ギルドに入るなど諦めることだ。", "It's a simple task: We require you to not pay your taxes for 4 months. Take it for granted the guards will try to hunt you down. If you aren't ready to face it, just forget it.")
					goto *chat_unique
				}
				if ( gdata(GDATA_BILL) <= 4 ) {
					chatMore lang("どうした？試験の内容は伝えたはずだ。税金を4ヶ月以上滞納してからまた来るがいい。", "I've already told you what you must do. Don't pay taxes for 4 months.")
					goto *chat_unique
				}
				chatMore lang("ほう…どうやらノルマを見事に達成したようだな。", "Quite impressive... You have accomplished the task.")
				gdata(GDATA_RANK_GUILD) = 10000
				gdata(GDATA_FLAG_GUILD_THIEF) = 1
				gdata(GDATA_FLAG_GUILD_FIGHTER) = 0
				gdata(GDATA_FLAG_GUILD_MAGE) = 0
				gdata(GDATA_FLAG_GUILD_MAGE_NORMA) = 0
				gdata(GDATA_FLAG_GUILD_THIEF_NORMA) = 0
				gdata(GDATA_FLAG_SUB_GUILD_MAGE) = 0
				gdata(GDATA_FLAG_SUB_GUILD_THIEF) = 1000
				gdata(GDATA_FLAG_SUB_GUILD_FIGHTER) = 0
				gdata(GDATA_FLAG_SUB_FIGHTER_1) = 0
				gdata(GDATA_FLAG_SUB_MAGE_1) = 0
				gdata(GDATA_FLAG_SUB_THIEF_1) = 0
				txt_questcompleted
				txtmore
				txt_questupdate
				txtmore
				txtef COLOR_YELLOW
				txt lang("盗賊ギルドに加入した！", "You have joined the Thieves Guild!")
				chatMore lang("おめでとう…合格だ。今日からお前は盗賊ギルドの一員となった。以後はギルドの規約を守り、ノルマをしっかりこなすように。", "Congratulations. You are now a formal member of the Thieves Guild. You can now use these stairs to enter the office. Always conform to the guild's rules and perform your tasks."), strbye
				cell_movechara tc, 17, 17
				cdata(CDATA_X_ORG, tc) = 17
				cdata(CDATA_Y_ORG, tc) = 17
			}
			goto *chat_end
		}
		cell_movechara tc, 17, 17
		cdata(CDATA_X_ORG, tc) = 17
		cdata(CDATA_Y_ORG, tc) = 17
		if ( gdata(GDATA_FLAG_SUB_THIEF_1) == 0 ) {
			chatList 1, lang("ノルマを貰う", "Do you have any tasks for me?")
		}
		else {
			chatList 2, lang("ノルマを報告する", "About my task.")
		}
		chatList 0, strbye
		buff = lang("ようこそ盗賊ギルドへ、" + ranktitle(8) + "の" + cdatan(CDATAN_NAME, CHARA_PLAYER) + "…どうぞ中にお入り下さい。", "Welcome to the Thieves Guild, " + ranktitle(8) + " " + cdatan(CDATAN_NAME, CHARA_PLAYER) + "... Please come in.")
		gosub *chat_select
		if ( chatval == 1 ) {
			gdata(GDATA_FLAG_SUB_THIEF_1) = 1
			gdata(GDATA_FLAG_GUILD_THIEF_NORMA) = (10000 - gdata(GDATA_RANK_GUILD)) * 6 + 1000
			txt_questupdate
			chatMore lang("良い心がけです。あなたにランク昇格のためのノルマを与えましょう。他人の所有物を奪い取り、盗品を売り払いなさい。金貨" + gdata(GDATA_FLAG_GUILD_THIEF_NORMA) + "枚相当の盗品を売ったら、昇進のための審査会に報告してあげましょう。", "Alright. The Thieves Guild wants you to put stolen goods into circulation. Steal some goods and sell them to any vendors. When the sum of your earnings reaches " + gdata(GDATA_FLAG_GUILD_THIEF_NORMA) + "gp, we will think about your promotion.")
			goto *chat_unique
		}
		if ( chatval == 2 ) {
			if ( gdata(GDATA_FLAG_GUILD_THIEF_NORMA) > 0 ) {
				chatMore lang("どうしました？まだノルマが残っていますよ。", "You have your task to complete.")
				goto *chat_unique
			}
			gdata(GDATA_FLAG_SUB_THIEF_1) = 0
			flt 51 - gdata(GDATA_RANK_GUILD) / 200
			flttypemajor = FILTER_FURNITURE
			itemcreate -1, ITEM_ID_DUMMY, cdata(CDATA_X, CHARA_PLAYER), cdata(CDATA_Y, CHARA_PLAYER), 0
			flt
			itemcreate -1, ITEM_ID_GOLD_PIECE, cdata(CDATA_X, CHARA_PLAYER), cdata(CDATA_Y, CHARA_PLAYER), 10000 - gdata(GDATA_RANK_GUILD) + 1000
			flt
			itemcreate -1, ITEM_ID_PLATINUM_COIN, cdata(CDATA_X, CHARA_PLAYER), cdata(CDATA_Y, CHARA_PLAYER), limit(3 - gdata(GDATA_RANK_GUILD) / 3000, 1, 3)
			txt_questcompleted
			txtmore
			txt_questitem
			txt_questupdate
			modrank 8, 500, 8
			chatMore lang("確かにノルマの達成を確認しました。早速審査会を開いてあなたの功績を報告しましょう。", "You've done very well. I will give a report of your achievement to the council."), strbye
			goto *chat_end
		}
		goto *chat_end
	}
	if ( _switch_val == CREATURE_ID_DORIA_THE_FIGHTER_WATCHMAN | _switch_sw ) {
		_switch_sw = 0
		if ( gdata(GDATA_FLAG_GUILD_FIGHTER) == 0 ) {
			chatList 2, lang("戦士ギルドとは？", "Tell me about the Fighters Guild.")
			chatList 1, lang("戦士ギルドに加入したい", "I want to join the Fighters Guild.")
			chatList 0, strbye
			buff = lang("止まれ…この階段の先は戦士ギルドの管轄だ。ギルドメンバー以外の者が入ることはできない…", "Halt...the stairs lead to the Fighters Guild office. Only the members of the guild are allowed to enter.")
			gosub *chat_select
			if ( chatval == 2 ) {
				chatMore lang("戦士ギルドは、各地の戦士を管轄する組合だ。組合員には規律の厳守と一定のノルマを求める代わりに、援助を施し特定の仕事を斡旋している。戦士ギルドのメンバーには、能力復元・装備解呪・鑑定・武具強化の価格の割引、戦士スキルの習得と訓練などの特典がある。ギルドに加入するには、厳しい審査を通らなければならない。", "The Fighters Guild is made up of experienced and confirmed experts in the field of fighting. We offer a variety of services such as reduced prices of identification and restoring, and training related skills. But joining the Fighters Guild requires you to pass a difficult test that most common fighters will fail.")
				goto *chat_unique
			}
			if ( chatval == 1 ) {
				if ( gdata(GDATA_FLAG_SUB_GUILD_FIGHTER) == 0 ) {
					chatMore lang("戦士ギルドに加入したいというのか…我々が求めているのは、どんな強敵にも怯まず、与えられた指令を確実にこなす真のハンターだ。お前が信頼に足る者かどうか試させてもらおう。", "To join the Fighters Guild, you must first face a test to earn our trust. We only need skilled hunters who will obey our law and remain undaunted even in a desperate battle.")
					gdata(GDATA_FLAG_SUB_GUILD_FIGHTER) = 1
					txt_questupdate
					repeat
						flt 10
						characreate MAX_CHARA_NC, CREATURE_ID_BUG, -3, 0
						if ( refchara(cdata(CDATA_ID, MAX_CHARA_NC), DBSPEC_CHARA_RARE) < 70 ) {
							continue
						}
						if ( cdata(CDATA_RELATION, MAX_CHARA_NC) != (-3) ) {
							continue
						}
						if ( cdata(CDATA_QUALITY, MAX_CHARA_NC) >= FIX_QUALITY_MIRACLE ) {
							continue
						}
						if ( cdata(CDATA_LEVEL, MAX_CHARA_NC) > cdata(CDATA_LEVEL, CHARA_PLAYER) * 2 ) {
							continue
						}
						break
					loop
					gdata(GDATA_FLAG_GUILD_FIGHTER_NORMA) = 5
					gdata(GDATA_FLAG_GUILD_FIGHTER_THIEF) = cdata(CDATA_ID, MAX_CHARA_NC)
					chara_vanquish MAX_CHARA_NC
					chatMore lang("" + refchara(gdata(GDATA_FLAG_GUILD_FIGHTER_THIEF), DBSPEC_CHARA_NAME_ORG, 1) + "を" + gdata(GDATA_FLAG_GUILD_FIGHTER_NORMA) + "匹討伐するのが、お前に課せられた試験だ。ノルマを達成したら、私に報告したまえ。", "The task given to you is this. Find and slay " + gdata(GDATA_FLAG_GUILD_FIGHTER_NORMA) + " " + refchara(gdata(GDATA_FLAG_GUILD_FIGHTER_THIEF), DBSPEC_CHARA_NAME_ORG, 1) + ". When you complete this task, talk to me again.")
					goto *chat_unique
				}
				if ( gdata(GDATA_FLAG_GUILD_FIGHTER_NORMA) > 0 ) {
					chatMore lang("どうした？試験の内容は伝えたはずだ。" + refchara(gdata(GDATA_FLAG_GUILD_FIGHTER_THIEF), DBSPEC_CHARA_NAME_ORG, 1) + "をあと" + gdata(GDATA_FLAG_GUILD_FIGHTER_NORMA) + "匹討伐してからまた来なさい。", "You still need to slay " + gdata(GDATA_FLAG_GUILD_FIGHTER_NORMA) + " more " + refchara(gdata(GDATA_FLAG_GUILD_FIGHTER_THIEF), DBSPEC_CHARA_NAME_ORG, 1) + ".")
					goto *chat_unique
				}
				chatMore lang("ほう…どうやらノルマを見事に達成したようだな。", "Quite impressive... You have accomplished the task.")
				gdata(GDATA_RANK_GUILD) = 10000
				gdata(GDATA_FLAG_GUILD_THIEF) = 0
				gdata(GDATA_FLAG_GUILD_FIGHTER) = 1
				gdata(GDATA_FLAG_GUILD_MAGE) = 0
				gdata(GDATA_FLAG_GUILD_MAGE_NORMA) = 0
				gdata(GDATA_FLAG_GUILD_THIEF_NORMA) = 0
				gdata(GDATA_FLAG_SUB_GUILD_MAGE) = 0
				gdata(GDATA_FLAG_SUB_GUILD_THIEF) = 0
				gdata(GDATA_FLAG_SUB_GUILD_FIGHTER) = 1000
				gdata(GDATA_FLAG_SUB_FIGHTER_1) = 0
				gdata(GDATA_FLAG_SUB_MAGE_1) = 0
				gdata(GDATA_FLAG_SUB_THIEF_1) = 0
				txt_questcompleted
				txtmore
				txt_questupdate
				txtmore
				txtef COLOR_YELLOW
				txt lang("戦士ギルドに加入した！", "You have joined the Fighters Guild!")
				chatMore lang("おめでとう…合格だ。今日からお前は戦士ギルドの一員となった。以後はギルドの規約を守り、ノルマをしっかりこなすように。", "Congratulations. You are now a formal member of the Fighters Guild. You can now use these stairs to enter the office. Always conform to the guild's rules and perform your tasks."), strbye
				cell_movechara tc, 29, 2
				cdata(CDATA_X_ORG, tc) = 29
				cdata(CDATA_Y_ORG, tc) = 2
			}
			goto *chat_end
		}
		cell_movechara tc, 29, 2
		cdata(CDATA_X_ORG, tc) = 29
		cdata(CDATA_Y_ORG, tc) = 2
		if ( gdata(GDATA_FLAG_SUB_FIGHTER_1) == 0 ) {
			chatList 1, lang("ノルマを貰う", "Do you have any tasks for me?")
		}
		else {
			chatList 2, lang("ノルマを報告する", "About my task.")
		}
		chatList 0, strbye
		buff = lang("ようこそ戦士ギルドへ、" + ranktitle(8) + "の" + cdatan(CDATAN_NAME, CHARA_PLAYER) + "…どうぞ中にお入り下さい。", "Welcome to the Fighters Guild, " + ranktitle(8) + " " + cdatan(CDATAN_NAME, CHARA_PLAYER) + "... Please come in.")
		gosub *chat_select
		if ( chatval == 1 ) {
			repeat
				flt cdata(CDATA_LEVEL, CHARA_PLAYER) + 10
				characreate MAX_CHARA_NC, CREATURE_ID_BUG, -3, 0
				if ( refchara(cdata(CDATA_ID, MAX_CHARA_NC), DBSPEC_CHARA_RARE) < 70 ) {
					continue
				}
				if ( cdata(CDATA_RELATION, MAX_CHARA_NC) != (-3) ) {
					continue
				}
				if ( cdata(CDATA_QUALITY, MAX_CHARA_NC) >= FIX_QUALITY_MIRACLE ) {
					continue
				}
				if ( cdata(CDATA_LEVEL, MAX_CHARA_NC) > cdata(CDATA_LEVEL, CHARA_PLAYER) * 2 ) {
					continue
				}
				break
			loop
			gdata(GDATA_FLAG_GUILD_FIGHTER_NORMA) = 3
			gdata(GDATA_FLAG_GUILD_FIGHTER_THIEF) = cdata(CDATA_ID, MAX_CHARA_NC)
			chara_vanquish MAX_CHARA_NC
			gdata(GDATA_FLAG_SUB_FIGHTER_1) = 1
			txt_questupdate
			chatMore lang("良い心がけです。あなたにランク昇格のためのノルマを与えましょう。" + refchara(gdata(GDATA_FLAG_GUILD_FIGHTER_THIEF), DBSPEC_CHARA_NAME_ORG, 1) + "をあと" + gdata(GDATA_FLAG_GUILD_FIGHTER_NORMA) + "匹討伐してからまた来なさい。昇進のための審査会に報告してあげましょう。", "There's a task for you. Go find and slay " + gdata(GDATA_FLAG_GUILD_FIGHTER_NORMA) + " " + refchara(gdata(GDATA_FLAG_GUILD_FIGHTER_THIEF), DBSPEC_CHARA_NAME_ORG, 1) + ". Then we will think about your promotion."), strbye
			goto *chat_unique
		}
		if ( chatval == 2 ) {
			if ( gdata(GDATA_FLAG_GUILD_FIGHTER_NORMA) > 0 ) {
				chatMore lang("どうしました？まだノルマが残っていますよ。", "You have your task to complete.")
				goto *chat_unique
			}
			gdata(GDATA_FLAG_SUB_FIGHTER_1) = 0
			flt 51 - gdata(GDATA_RANK_GUILD) / 200, calcfixlv(FIX_QUALITY_GREAT)
			flttypemajor = FILTER_WEAPON
			itemcreate -1, ITEM_ID_DUMMY, cdata(CDATA_X, CHARA_PLAYER), cdata(CDATA_Y, CHARA_PLAYER), 0
			flt
			itemcreate -1, ITEM_ID_GOLD_PIECE, cdata(CDATA_X, CHARA_PLAYER), cdata(CDATA_Y, CHARA_PLAYER), 10000 - gdata(GDATA_RANK_GUILD) + 1000
			flt
			itemcreate -1, ITEM_ID_PLATINUM_COIN, cdata(CDATA_X, CHARA_PLAYER), cdata(CDATA_Y, CHARA_PLAYER), limit(4 - gdata(GDATA_RANK_GUILD) / 2500, 1, 4)
			txt_questcompleted
			txtmore
			txt_questitem
			txt_questupdate
			modrank 8, 500, 8
			chatMore lang("確かにノルマの達成を確認しました。早速審査会を開いてあなたの功績を報告しましょう。", "You've done very well. I will give a report of your achievement to the council."), strbye
			goto *chat_end
		}
		goto *chat_end
	}
	if ( _switch_val == CREATURE_ID_CONERY_PALMIAN_MAJOR_GENERAL | _switch_sw ) {
		_switch_sw = 0
		if ( gdata(GDATA_FLAG_SUB_MINOTAUR) >= 1000 ) {
			chatMore lang("おお、おぬしか。先の依頼の件、恩に着るぞ。どうだ、わしの部下になる気はないか？", "Ahh, it's you. I owe you for what you've done for me. What do you say? Why don't you join my unit?"), strbye
			goto *chat_end
		}
		if ( gdata(GDATA_FLAG_SUB_MINOTAUR) == 0 ) {
			chatList 1, lang("まかせて", "Leave it to me!")
			chatList 0, lang(strbye, "No way.")
			buff = lang("困った…困ったぞ。そこのおぬし、良いところに来た。実はヨウィンがミノタウロスの軍による侵攻の危機にさらされておるのだ。ヨウィンの村長とは親しくしておって、一軍を討伐に向かわせたいのだが、今は何やら不穏な空気がパルミアを包んでいる。城から離れるわけにはいかないのだ。そこで、冒険者のおぬしに依頼したい。ミノタウロスを退治してきてはくれぬか？報酬はもちろん用意しよう。", "What do I do about this... You, over there... You couldn't have gotten here a moment too soon. Yowyn is in great danger of being destroyed by the minotaur legion. The mayor of Yowyn is a close friend of mine and I don't want to leave him out in the cold. I want to send a detachment to reinforce him but I can't. The current political climate in Palmia is too volatile and the troops must remain in the castle. That's why I'm asking an adventurer like you. Will you attack the minotaur's camp for me? I will reward you handsomely if you do this.")
			gosub *chat_select
			if ( chatval != 1 ) {
				chatMore lang("やはり、おぬしには無理か…", "I knew you'd refuse... and after all, why wouldn't you?"), strbye
				goto *chat_end
			}
			txt_questupdate
			chatMore lang("なに、真か！では早々にミノタウロスの巣窟に向かい、首領を退治して来てもらいたい。場所は確かヨウィンの南と聞いておる。頼むぞ！", "What? You will? Great! Head to the Minotaur's Nest south of Yowyn and take the head of the minotaurs' king. Godspeed, " + cdatan(CDATAN_NAME, CHARA_PLAYER) + "."), strbye
			gdata(GDATA_FLAG_SUB_MINOTAUR) = 1
			goto *chat_end
		}
		if ( gdata(GDATA_FLAG_SUB_MINOTAUR) == 1 ) {
			chatMore lang("どうした？おぬしが早くせんと、ヨウィンが危ないのだ。頼むぞ。", "What's wrong? You must make haste. Yowyn is in grave danger."), strbye
			goto *chat_end
		}
		if ( gdata(GDATA_FLAG_SUB_MINOTAUR) == 2 ) {
			chatMore lang("おぬしか、待っておったぞ。報告はいい。すでに、ミノタウロスの王を倒した英雄のことは、この耳に伝わっておるわい。わしの感謝の印だ、受け取ってくれ。", "You've returned. I've been waiting for you. I've already heard the good word about the hero who crushed the minotaur king. Take this as a sign of my eternal gratitude."), strbye
			flt
			nostack = 1
			itemcreate -1, ITEM_ID_MATERIAL_KIT, cdata(CDATA_X, CHARA_PLAYER), cdata(CDATA_Y, CHARA_PLAYER), 0
			inv(INV_ITEM_MATERIAL, ci) = ITEM_MATERIAL_ADAMANTIUM
			flt
			itemcreate -1, ITEM_ID_GOLD_PIECE, cdata(CDATA_X, CHARA_PLAYER), cdata(CDATA_Y, CHARA_PLAYER), 50000
			flt
			itemcreate -1, ITEM_ID_PLATINUM_COIN, cdata(CDATA_X, CHARA_PLAYER), cdata(CDATA_Y, CHARA_PLAYER), 4
			txt_questcompleted
			txtmore
			txt_questitem
			txt_questupdate
			gdata(GDATA_FLAG_SUB_MINOTAUR) = 1000
			goto *chat_end
		}
		goto *chat_unique_SWEND1
	}
	if ( _switch_val == CREATURE_ID_ROGUE_BOSS | _switch_sw ) {
		_switch_sw = 0
		if ( cdata(CDATA_GOLD, CHARA_PLAYER) <= 10 ) {
			chatMore lang("チッ、一文無しの乞食" + _ka() + "とっとといっちまい" + _na(), "Bah, a beggar without a penny. What a waste of time! Just go away!")
			goto *chat_end
		}
		chatList 1, lang("返り討ちにする", "Try me.")
		chatList 0, lang("降参する", "I surrender.")
		buff = lang("おまえさん、ついてない" + _na() + _ore(3) + "達は泣く子も黙る冷血な盗賊団、その名も" + gdatan(GDATAN_TEAM2) + _da() + "命が惜しければ、おとなしく荷車の積荷と金貨" + cdata(CDATA_GOLD, CHARA_PLAYER) / 5 + "枚を渡すがいい" + _yo(), "Halt, halt, traveler. You're a quite fortunate one. Before you is the renowned band of legendary brigands \"" + gdatan(GDATAN_TEAM2) + "\" that the mere mention of its name is enough to silence a naughty child. Yet we will spare your life for only a toll of " + cdata(CDATA_GOLD, CHARA_PLAYER) / 5 + "gp and your cargos. Quite fortunate indeed.")
		chatesc = 0
		gosub *chat_select
		if ( chatval == 0 ) {
			snd SOUNDLIST_PAYGOLD1
			cdata(CDATA_GOLD, CHARA_PLAYER) -= cdata(CDATA_GOLD, CHARA_PLAYER) / 5
			inv_getheader 0
			repeat invrange, invhead
				if ( inv(INV_ITEM_NUM, cnt) > 0 ) {
					if ( refitem(inv(INV_ITEM_ID, cnt), DBSPEC_CARGO) == 1 ) {
						txtmore
						txt lang(itemname(cnt) + "を渡した。", "You hand over " + itemname(cnt) + ".")
						inv(INV_ITEM_NUM, cnt) = 0
					}
				}
			loop
			gosub *calcBurdenPc
			chatMore lang("なかなか賢明な判断" + _da(), "A wise choice."), strbye
			levelexitby = 4
			chatteleport = 1
			snd SOUNDLIST_EXITMAP1
			goto *chat_end
		}
		chatMore lang("いい度胸" + _da() + "…しかし、賢い選択とは言えない" + _na() + "ここがおまえさんの墓場" + _da(2), "You've got some guts. But your decision sure ain't a wise one. This will be your grave, kid."), strbye
		gdata(GDATA_QUEST) = QUEST_TYPE_THIEVES, 1, encounterref, 1
		goto *chat_end
	}
	if ( _switch_val == CREATURE_ID_LULWY | _switch_sw ) {
		_switch_sw = 0
		if ( cdata(CDATA_GOD, CHARA_PLAYER) == GOD_LULWY & cdata(CDATA_PIETY, CHARA_PLAYER) >= 4000 & gdata(GDATA_FLAG_SUMMONED_LULWY) == 0 ) {
			chatMore lang("こうして間近で見るとますます手放したくなくなってくるわね。ホラ、オマエにはこれがお似合いだわ。いいと言うまで外しちゃだめよ。", "You are mine. This collar suits you nicely.")
			flt
			itemcreate -1, ITEM_ID_TEMPEST_CHOKER, cdata(CDATA_X, CHARA_PLAYER), cdata(CDATA_Y, CHARA_PLAYER), 0
			gdata(GDATA_FLAG_SUMMONED_LULWY) = 1000
			goto *chat_end
		}
		else {
			chatList 0, lang("立ち去る", "Bye.")
			if ( gdata(GDATA_FLAG_INVITED_GOD) == 0 ) {
				if ( gdata(GDATA_RANK_HOME) < 200 ) {
					if ( gdata(GDATA_AREA) != AREA_HOME ) {
						chatList 1, lang("わが家に招待する", "Invite to home.")
					}
				}
			}
			buff = lang("なかなか面白そうなところじゃない。飽きるまではここにいてあげるわ。", "This place is quite interesting. Until I get bored, I'll stay here.")
			gosub *chat_select
			if ( chatval == 1 ) {
				chatMore lang("アハハ！そうね、気が向いたら行ってあげるわよ。", "Ahaha! Well, I'll go if I feel like it."), strbye
				gdata(GDATA_FLAG_INVITED_GOD) = CREATURE_ID_LULWY
				cdata(CDATA_CHARACTER_TIER, tc) = CHARACTER_TIER_SUMMONED_GOD_HOME
			}
			goto *chat_end
		}
		goto *chat_end
	}
	if ( _switch_val == CREATURE_ID_STRANGE_SCIENTIST | _switch_sw ) {
		_switch_sw = 0
		if ( gdata(GDATA_FLAG_SUB_DADDY) == 0 ) {
			chatMore lang("よく聞きなさい。もしあなたがいつかリトルシスターに出会ったら、あの子達に救いの手を差し伸べてあげて。見た目こそ化け物のように映るかもしれないけど、彼女たちがまた元の可愛らしい笑顔を取り戻せるように、私は研究を続けている。だから、お願い。この道具を使ってリトルたちを私の元に運んで。あなたへのお礼は、いつか必ず。", "Please, hear me out. If you should happen to run into any Little Sisters during your travels, please help them out. They seem to be monsters at first glance, but I'm doing important research that will return these girls to their gentle smiling nature. Please I beg of you... use these balls to bring the Little Sisters to me. I'd be very grateful, perhaps I'd even reward you.")
			gdata(GDATA_FLAG_SUB_DADDY) = 0
			flt
			itemcreate -1, ITEM_ID_LITTLE_BALL, cdata(CDATA_X, CHARA_PLAYER), cdata(CDATA_Y, CHARA_PLAYER), 0
			txt_questitem
			txt_questupdate
			gdata(GDATA_FLAG_SUB_DADDY) = 1
			goto *chat_end
		}
		if ( gdata(GDATA_FLAG_SUB_DADDY) > 0 ) {
			chatList 1, lang("約束のお礼は？", "What about the reward you promised me?")
			chatList 2, lang("捕獲玉を補充したい", "I need to replenish my supply of little balls.")
			if ( findally(CREATURE_ID_LITTLE_SISTER) != (-1) ) {
				rc = findally(CREATURE_ID_LITTLE_SISTER)
				chatList 3, lang(cdatan(CDATAN_NAME, rc) + "を引き渡す", "(Turn over the Little Sister.)")
			}
			chatList 0, strbye
			buff = lang("リトルたちを、終わりのない苦痛から解放するべきだという人もいる。でも、大抵の人間はあの子達の力が欲しくて殺すのよ。そう、確かにリトルの肉は人の肉体を進化させる。それでも、私はあの子たちを救う別の道があることを信じているの。…そして覚えておいて。もしあなたがリトルの命を奪うようなことがあれば、いつかその酬いを受ける時がくるから。", "Many people feel we need to free these girls from their never-ending oppression, but there are also scumbags that would murder them for their own personal gain. That's right; they say eating the girls' flesh will evolve the human body. I know there must be a better way to help them... don't forget that. Remember that if you take their lives, you will eventually get what's coming to you.")
			gosub *chat_select
			if ( chatval == 1 ) {
				p = gdata(GDATA_SISTER_KILLED)
				repeat gdata(GDATA_SISTER_REWARD) + 1, 1
					p += limit(cnt, 1, 10)
				loop
				if ( gdata(GDATA_SISTER_SAVED) >= p ) {
					chatMore lang("報酬、そうね。リトルたちが、あなたのために街で落し物を集めてきたのよ。好きなものを選んでちょうだい。あなたが貴重なものを無くした時のために、保留しておいてもいいわ。", "That's right... your reward. The Little Sisters have been picking things up for you that people have lost in town. Please, take whatever you like. If you like, you can wait until you've lost something valuable.")
					begintempinv
					mode = MODELIST_SHOP
					flt
					itemcreate -1, ITEM_ID_SUITCASE, -1, -1, 0
					flt
					itemcreate -1, ITEM_ID_WALLET, -1, -1, 0
					if ( gdata(GDATA_FLAG_SUB_BIOLOGIST) >= 1000 ) {
						flt
						itemcreate -1, ITEM_ID_GENE_MACHINE, -1, -1, 0
					}
					repeat MAX_DB
						if ( cnt == ITEM_ID_SECRET_TREASURE ) {
							continue
						}
						randomize gdata(GDATA_DAY) + cnt
						f = 0
						if ( itemmemory(0, cnt) ) {
							f = 1
						}
						if ( cnt == ITEM_ID_WAKE_UP_OF_NEFIA ) {
							if ( gdata(GDATA_FLAG_LEOLD_LOCATION_STATE) >= 6 ) {
								f = 1
							}
						}
						if ( cnt == ITEM_ID_MAGIC_FRUIT ) {
							if ( gdata(GDATA_FLAG_SUB_KAMIKAZE) >= 1000 ) {
								f = 1
							}
						}
						if ( cnt == ITEM_ID_HERO_CHEESE ) {
							if ( gdata(GDATA_FLAG_SUB_VEIN) >= 1000 ) {
								f = 1
							}
						}
						if ( cnt == ITEM_ID_HAPPY_APPLE ) {
							if ( gdata(GDATA_FLAG_SUB_MOTHER) >= 1000 ) {
								f = 1
							}
						}
						if ( f ) {
							flt cdata(CDATA_LEVEL, CHARA_PLAYER) * 3 / 2, calcfixlv(FIX_QUALITY_GREAT)
							itemcreate -1, cnt, -1, -1, 0
							if ( stat == 1 ) {
								if ( inv(INV_ITEM_QUALITY, ci) < FIX_QUALITY_MIRACLE ) {
									inv(INV_ITEM_NUM, ci) = 0
								}
							}
						}
						randomize
					loop
					txt lang("落し物をひとつ貰える。", "You can choose 1 item.")
					invsubroutine = 1
					invctrl = 22, 4
					gosub *com_inventory
					exittempinv
					mode = MODELIST_MAIN
					chatMore lang("お目当てのものはあったかしら？", "Did you find what you were looking for?"), strbye
				}
				else {
					p -= gdata(GDATA_SISTER_SAVED)
					chatMore lang("あなたにまだその資格はない。リトルたちを連れてきて。報酬はそのあと考えるわ。", "You haven't brought me enough Little Sisters yet. Bring me " + p + " more and then we'll discuss your reward."), strbye
				}
				goto *chat_end
			}
			if ( chatval == 2 ) {
				chatMore lang("さあ、これを持っていきなさい。重いから注意して。", "Well then, take this with you. Be careful though, it's heavy."), strbye
				flt
				itemcreate -1, ITEM_ID_LITTLE_BALL, cdata(CDATA_X, CHARA_PLAYER), cdata(CDATA_Y, CHARA_PLAYER), 0
				txt_questitem
				goto *chat_end
			}
			if ( chatval == 3 ) {
				if ( cdata(CDATA_PRECIOUS_ALLY, rc) == 1 ) {
					snd SOUNDLIST_FAIL1
					txt_preciousally
					goto *chat_end
				}
				if ( cdata(CDATA_IN_TAGTEAM, rc) == (-1) ) {
					ttc = cdata(CDATA_TAGTEAM_PARTNER, rc)
					cell_findspace cdata(CDATA_X, rc), cdata(CDATA_Y, rc), 1
					if ( stat == 0 ) {
						txt_nospace
						goto *chat_end
					}
					cell_setchara ttc, rtval, rtval(1)
					tag_end rc
				}
				if ( cdata(CDATA_IN_TAGTEAM, rc) == 1 ) {
					ttc = cdata(CDATA_TAGTEAM_PARTNER, rc)
					cell_findspace cdata(CDATA_X, rc), cdata(CDATA_Y, rc), 1
					if ( stat == 0 ) {
						txt_nospace
						goto *chat_end
					}
					cell_setchara ttc, rtval, rtval(1)
					tag_end rc
				}
				txt lang("リトルシスターを謎の科学者に手渡した。", "You turn over the Little Sister.")
				gdata(GDATA_SISTER_SAVED)++
				txtef COLOR_GREEN
				txt lang("リトルシスター殺害" + gdata(GDATA_SISTER_KILLED) + "回、救出" + gdata(GDATA_SISTER_SAVED) + "回。", "You have saved Little Sisters " + gdata(GDATA_SISTER_SAVED) + " times and killed them " + gdata(GDATA_SISTER_KILLED) + " times.")

				/********** ANNA/BLOODYSHADE CUSTOM - BEGINNING **********/

				AllyID = findally(CREATURE_ID_LITTLE_SISTER)
				gosub *DeleteAIInfo

				/********** ANNA/BLOODYSHADE CUSTOM - ENDING **********/

				chara_vanquish findally(CREATURE_ID_LITTLE_SISTER)
				snd SOUNDLIST_COMPLETE1
				chatMore lang("ありがとう。あなたの行いに感謝するわ。あなたへのお礼は近いうちに必ず。", "Thanks, I appreciate what you've done. It won't be long before I can reward you.")
			}
			goto *chat_end
		}
		goto *chat_unique_SWEND1
	}
	if ( _switch_val == CREATURE_ID_EHEKATL | _switch_sw ) {
		_switch_sw = 0
		if ( cdata(CDATA_GOD, CHARA_PLAYER) == GOD_EHEKATL & cdata(CDATA_PIETY, CHARA_PLAYER) >= 4000 & gdata(GDATA_FLAG_SUMMONED_EHEKATL) == 0 ) {
			chatMore lang("うみゃー♪ころころ♪ころころ♪…うみゅ？これほしいの？ほしいの？みゅーん…君のこと好きだからあげるぅ！だいじにしてね！してね！", "Mew? Do you by any chance want this ball? Want? Meow... Okay, I'll give you this ball because I like you!"), strbye
			flt
			itemcreate -1, ITEM_ID_WHEEL_OF_FORTUNE, cdata(CDATA_X, CHARA_PLAYER), cdata(CDATA_Y, CHARA_PLAYER), 0
			gdata(GDATA_FLAG_SUMMONED_EHEKATL) = 1000
			goto *chat_end
		}
		else {
			chatList 0, lang("立ち去る", "Bye.")
			if ( gdata(GDATA_FLAG_INVITED_GOD) == 0 ) {
				if ( gdata(GDATA_RANK_HOME) < 200 ) {
					if ( gdata(GDATA_AREA) != AREA_HOME ) {
						chatList 1, lang("わが家に招待する", "Invite to home.")
					}
				}
			}
			buff = lang("前のエヘカトルも大変だったみたいなの！あ…。前のエヘカトルなんていないよ！よ！今の聞かなかったことにしてね？してね？", "Something bad has happened to Ehekatl! Ahhh... Ehekatl is gone! Ehekatl is gone! You didn't hear any of this alright? Alright!?")
			gosub *chat_select
			if ( chatval == 1 ) {
				chatMore lang("イルヴァの楽園…？じゃあたらばがに！たらばがにあるよね！！行く！！！", "If you want some red king crabs we've got them at Heaven of Tyris! We've got red king crabs! Come on in!"), strbye
				gdata(GDATA_FLAG_INVITED_GOD) = CREATURE_ID_EHEKATL
				cdata(CDATA_CHARACTER_TIER, tc) = CHARACTER_TIER_SUMMONED_GOD_HOME
			}
			goto *chat_end
		}
		goto *chat_end
	}
	if ( _switch_val == CREATURE_ID_OPATOS | _switch_sw ) {
		_switch_sw = 0
		if ( cdata(CDATA_GOD, CHARA_PLAYER) == GOD_OPATOS & cdata(CDATA_PIETY, CHARA_PLAYER) >= 4000 & gdata(GDATA_FLAG_SUMMONED_OPATOS) == 0 ) {
			chatMore lang("フッハハハハハー！！！これでもつけて脚力を鍛えろォ！", "Muwahahahaha! Train the leg strength to wear it!")
			flt
			itemcreate -1, ITEM_ID_FETTER_OF_EARTH, cdata(CDATA_X, CHARA_PLAYER), cdata(CDATA_Y, CHARA_PLAYER), 0
			gdata(GDATA_FLAG_SUMMONED_OPATOS) = 1000
			goto *chat_end
		}
		else {
			chatList 0, lang("立ち去る", "Bye.")
			if ( gdata(GDATA_FLAG_INVITED_GOD) == 0 ) {
				if ( gdata(GDATA_RANK_HOME) < 200 ) {
					if ( gdata(GDATA_AREA) != AREA_HOME ) {
						chatList 1, lang("わが家に招待する", "Invite to home.")
					}
				}
			}
			buff = lang("フハハハ！ファハハハハハー！冒険者も体が資本だろう！いっしょにトレーニングだ！フハハハッハァー！", "Mwahaha haha! Body would be an adventure capital! I'm going to train together!")
			gosub *chat_select
			if ( chatval == 1 ) {
				chatMore lang("フワッハハハ！面白い！待っていろ！", "Hahahaha! Now that's a good one! I've been waiting for something like this!"), strbye
				gdata(GDATA_FLAG_INVITED_GOD) = CREATURE_ID_OPATOS
				cdata(CDATA_CHARACTER_TIER, tc) = CHARACTER_TIER_SUMMONED_GOD_HOME
			}
			goto *chat_end
		}
		goto *chat_end
	}
	if ( _switch_val == CREATURE_ID_KUMIROMI | _switch_sw ) {
		_switch_sw = 0
		if ( cdata(CDATA_GOD, CHARA_PLAYER) == GOD_KUMIROMI & cdata(CDATA_PIETY, CHARA_PLAYER) >= 4000 & gdata(GDATA_FLAG_SUMMONED_KUMIROMI) == 0 ) {
			chatMore lang("(正気を失ったような目であなたを見つめ微笑んでいる)", "(He is smiling while staring at you with insane eyes)")
			chatMore lang("ああ…もう君がどこにも行かないよう…これで縛りつけてしまいたい…。でもきっと君なら…そんなことしなくても僕を置いていかないよね…？", "Oh... I want to tie you up so that you don't go anywhere... But, you won't leave me even if I don't do that, right?")
			flt
			itemcreate -1, ITEM_ID_GREEN_GOD_THORN, cdata(CDATA_X, CHARA_PLAYER), cdata(CDATA_Y, CHARA_PLAYER), 0
			gdata(GDATA_FLAG_SUMMONED_KUMIROMI) = 1000
			goto *chat_end
		}
		else {
			chatList 0, lang("立ち去る", "Bye.")
			if ( gdata(GDATA_FLAG_INVITED_GOD) == 0 ) {
				if ( gdata(GDATA_RANK_HOME) < 200 ) {
					if ( gdata(GDATA_AREA) != AREA_HOME ) {
						chatList 1, lang("わが家に招待する", "Invite to home.")
					}
				}
			}
			buff = lang("僕の大切な信者を奪うのなら…誰だって許さない…。…どんな手を使ってでも…取り戻してみせる…。", "If someone takes away my precious followers, I will not forgive them... and I'll make sure to get them back.")
			gosub *chat_select
			if ( chatval == 1 ) {
				chatMore lang("いいよ…。でも…どうなっても知らないから…ね。", "Okay... But... I don't know what will become of... me..."), strbye
				gdata(GDATA_FLAG_INVITED_GOD) = CREATURE_ID_KUMIROMI
				cdata(CDATA_CHARACTER_TIER, tc) = CHARACTER_TIER_SUMMONED_GOD_HOME
			}
			goto *chat_end
		}
		goto *chat_end
	}
	if ( _switch_val == CREATURE_ID_MANI | _switch_sw ) {
		_switch_sw = 0
		if ( cdata(CDATA_GOD, CHARA_PLAYER) == GOD_MANI & cdata(CDATA_PIETY, CHARA_PLAYER) >= 4000 & gdata(GDATA_FLAG_SUMMONED_MANI) == 0 ) {
			chatMore lang("これは装甲板ではない、拘束具だ。いつか己の力を制御できなくなったときはこれを身に着け抑え込むがいい。", "This is not a plate armor, it's a restraint. Wear this harness when you can no longer control your power someday and it'll be fine.")
			flt
			itemcreate -1, ITEM_ID_MECHANICAL_BINDER, cdata(CDATA_X, CHARA_PLAYER), cdata(CDATA_Y, CHARA_PLAYER), 0
			gdata(GDATA_FLAG_SUMMONED_MANI) = 1000
			goto *chat_end
		}
		else {
			chatList 0, lang("立ち去る", "Bye.")
			if ( gdata(GDATA_FLAG_INVITED_GOD) == 0 ) {
				if ( gdata(GDATA_RANK_HOME) < 200 ) {
					if ( gdata(GDATA_AREA) != AREA_HOME ) {
						chatList 1, lang("わが家に招待する", "Invite to home.")
					}
				}
			}
			buff = lang("どうしてルルウィは私をあんなに毛嫌いしているのだ？理解不能だ。", "Why would Lulwy dislike me so much? It is incomprehensible.")
			gosub *chat_select
			if ( chatval == 1 ) {
				chatMore lang("いいだろう。定命の生活を確認するのも悪くない。", "Alright. It's not bad to see the way mortals live."), strbye
				gdata(GDATA_FLAG_INVITED_GOD) = CREATURE_ID_MANI
				cdata(CDATA_CHARACTER_TIER, tc) = CHARACTER_TIER_SUMMONED_GOD_HOME
			}
			goto *chat_end
		}
		goto *chat_end
	}
	if ( _switch_val == CREATURE_ID_KANEDA_BIKE | _switch_sw ) {
		_switch_sw = 0
		if ( gdata(GDATA_FLAG_SUB_KANEDA) >= 3 ) {
			buff = lang("どうだい、俺に乗ってみたいかい？", "So, you wanted to ride me right?")
			chatList 1, lang("乗りたい", "Yes!")
			chatList 0, lang("別に乗りたくない", "Not really.")
			chatesc = 1
			gosub *chat_select
			if ( chatval == 1 ) {
				f = get_freeally()
				if ( f == 0 ) {
					chatMore lang("おっと、これ以上仲間を連れて行けないようだぜ。", "Oops, it seems your party is already full."), strbye
				}
				chatMore lang("そうこなくっちゃ！", "That's the spirit!"), strbye
				rc = tc
				gosub *add_ally
				gdata(GDATA_FLAG_SUB_KANEDA) = 0
				goto *chat_end
			}
			chatMore lang("まあ、いいさ。", "If you say so."), strbye
			goto *chat_end
		}
		inv_find ITEM_ID_BLUE_CAPSULE_DRAG, CHARA_PLAYER
		if ( stat != (-1) ) {
			buff = lang("それはカプセル・ドラッグ！…なあ、それ譲ってくれよ。", "That-that's a capsule drag! ...hey, you want to give it to me?")
			chatList 1, lang("譲る", "Take it.")
			chatList 0, lang("断る", "I refuse.")
			chatesc = 1
			gosub *chat_select
			if ( chatval == 1 ) {
				inv_find ITEM_ID_BLUE_CAPSULE_DRAG, CHARA_PLAYER
				inv(INV_ITEM_NUM, stat)--
				txt lang("カプセルドラッグを1錠渡した。", "You hand him a capsule drag.")
				snd SOUNDLIST_EQUIP1
				chatMore lang("いいねえ。", "Great, you are great."), strbye
				gdata(GDATA_FLAG_SUB_KANEDA)++
				goto *chat_end
			}
		}
		chatMore lang("気安く話しかけんな。", "Stay away from me, will ya?"), strbye
		goto *chat_end
	}
	if ( _switch_val == CREATURE_ID_PART_TIME_WORKER | _switch_sw ) {
		_switch_sw = 0
		if ( gdata(GDATA_AREA) != AREA_NOYEL | adata(ADATA_FESTIVAL, gdata(GDATA_AREA)) == 0 ) {
			goto *chat_unique_SWEND1
		}
		if ( cdata(CDATA_GOD, CHARA_PLAYER) == GOD_JURE ) {
			chatMore lang("ああ、あなた既に信者さんでしょ？悪いけど、新規契約しか受け付けてないからさ。", "Ah, you already believe in Jure right? Sorry bro, but we are only looking for new converts."), strbye
			goto *chat_end
		}
		chatList 1, lang("ジュア教に改宗する", "I will become a faithful servant of Jure.")
		chatList 0, lang("興味ない", "Not interested.")
		buff = lang("ジュア教団では、ただ今他の神からの乗り換えキャンペーン実施中だ！聖夜祭の期間中なら、改宗によるペナルティは払わなくていいよ。さらになんと、今なら無料で数量限定のジュア様の抱き枕も付けちゃうよ！お客さん、このチャンスを見逃す手はないよ。", "We are running a special campaign to help you join our religion! Be a brother of Jure today and win free body pillow of Jure! During the festival, you won't have to pay penalty to convert your religion neither. So what are you waiting? Sign up now!")
		chatesc = 1
		gosub *chat_select
		if ( chatval == 1 ) {
			chatList 1, lang("はい", "Yes.")
			chatList 0, lang("いいえ", "No.")
			buff = lang("よし、本当に改宗していいね？", "Okie, just making sure. Do you really want to convert your religion?")
			chatesc = 1
			gosub *chat_select
			if ( chatval == 1 ) {
				chatMore lang("あざーっす！やっと今日のノルマが達成できたよ。", "Thanks, bro! I finally filled my daily quota."), strbye
				txt_questitem
				flt
				itemcreate -1, ITEM_ID_JURES_BODY_PILLOW, cdata(CDATA_X, CHARA_PLAYER), cdata(CDATA_Y, CHARA_PLAYER), 0
				cdata(CDATA_GOD, CHARA_PLAYER) = GOD_JURE
				gosub *change_god
				goto *chat_end
			}
		}
		chatMore lang("ちっ！", "Shit!"), strbye
		goto *chat_end
	}
	if ( _switch_val == CREATURE_ID_THE_LEOPARD_WARRIOR | _switch_sw ) {
		_switch_sw = 0
		if ( gdata(GDATA_FLAG_SUB_FALLEN_PRINCESS) < 1000 ) {
			chatMore lang("昔…シルヴィアは色事師に連れ去られたことがあってな。監禁されていたところを助け出しはしたものの、彼女は精神を完全に病んでしまっていた。", "In the past... Lady Silvia was kidnapped by a casanova. Even though she was eventually rescued, her mind was completely broken.")
			chatMore lang("そして長い遠征から俺が帰ってきたときには、彼女は町で乱交を繰り返すようになっていたのだ…。", "When I returned after a long expedition, I found that she had been sleeping around with everyone in town...")
			chatMore lang("俺は、それでもシルヴィアを…。", "Even so, I still..."), strbye
			goto *chat_end
		}
		if ( gdata(GDATA_FLAG_SUB_FALLEN_PRINCESS) == 1000 ) {
			chatMore lang("最近、シルヴィアの錯乱ぶりがますます酷くなっている。いったい何が原因なのだ…？", "Silvia's state of mind has been deteriorating even further recently. What could be causing this...?"), strbye
			goto *chat_end
		}
		goto *chat_end
	}
	if ( _switch_val == CREATURE_ID_SILVIA_THE_PRINCESS | _switch_sw ) {
		_switch_sw = 0
		if ( gdata(GDATA_FLAG_SUB_FALLEN_PRINCESS) == 1000 ) {
			chatMore lang("ああ…エウリュピデス、私を置いてどこに行ってたの！体が疼いてしょうがないわ。もう、我慢できないのよ！", "Oh... Eurypides, what have you done to me?! My body aches without your touch. I can't stand it anymore!")
			chatMore lang("あなたと合体したい…。", "I want to become one with you..."), lang("やめて！", "Stop!")
			gosub *sexsex
			goto *chat_end
		}
		if ( gdata(GDATA_FLAG_SUB_FALLEN_PRINCESS) == 0 ) {
			chatList 2, lang("仰せのままに", "As you wish.")
			chatList 1, lang("私ではダメですか", "What about me?")
			chatList 0, lang("お気を確かに", "Get a hold of yourself!")
			buff = lang("もうこの辺の男どもじゃ満足できないの！見惚れるほどの容姿を持った男を私の前に連れてきなさい！", "The men around here can't satisfy me anymore! Bring me an absolutely stunning man!")
			gosub *chat_select
			if ( chatval == 0 ) {
				chatMore lang("あんたなんか最初から期待してなかったわよ！", "I don't know why I expected anything out of you in the first place!"), strbye
				goto *chat_end
			}
			if ( chatval == 1 ) {
				chatMore lang("…悪いけどタイプじゃないわ。", "...Sorry, but you're not my type."), strbye
				goto *chat_end
			}
			txt_questupdate
			chatMore lang("いい返事ね。じゃあすぐに連れてきなさい、私は待たされるのが嫌いなの！", "Great. Get it done quickly. I hate to be kept waiting!"), strbye
			gdata(GDATA_FLAG_SUB_FALLEN_PRINCESS) = 1
			goto *chat_end
		}
		if ( gdata(GDATA_FLAG_SUB_FALLEN_PRINCESS) == 1 ) {
			chatList 1, lang("もちろん", "Of course.")
			chatList 0, lang("えっ", "Forget it.")
			buff = lang("ちゃんと連れてきたんでしょうね？", "You've brought someone, right?")
			gosub *chat_select
			if ( chatval != 1 ) {
				chatMore lang("えっ。", "Hmph."), strbye
				goto *chat_end
			}
			allyctrl = 1
			gosub *com_ally
			if ( stat == (-1) ) {
				chatMore lang("何もたもたしてるのよ。使えないわね。", "You're too slow. You're absolutely useless."), strbye
				goto *chat_end
			}
			rc = stat
			if ( sdata(SKILL_ATTR_CHA, rc) < 100 ) {
				chatMore lang("嫌よ、こんな不細工！", "I don't want an ugly oaf like this!"), strbye
				goto *chat_end
			}
			if ( cdata(CDATA_PRECIOUS_ALLY, rc) == 1 ) {
				snd SOUNDLIST_FAIL1
				txt_preciousally
				goto *chat_end
			}
			chatMore lang("なかなか分かってるじゃない！また頼んでやってもいいわよ。", "You knew just what I wanted! I'll have to ask you again sometime."), strbye
			modkarma CHARA_PLAYER, -2
			txt_questcompleted
			txt_questupdate
			gdata(GDATA_FLAG_SUB_FALLEN_PRINCESS) = 2

			/********** ANNA CUSTOM - BEGINNING **********/

			AllyID = rc
			gosub *DeleteAIInfo

			/********** ANNA CUSTOM - ENDING **********/

			chara_vanquish rc
			goto *chat_end
		}
		if ( gdata(GDATA_FLAG_SUB_FALLEN_PRINCESS) == 2 ) {
			chatList 1, lang("連れてまいりました", "I have him.")
			chatList 0, lang("えっ", "Forget it.")
			buff = lang("エウリュピデスはまだなの？早く連れてきて！", "Eurypides is still not here? Hurry up and bring him!")
			gosub *chat_select
			if ( chatval != 1 ) {
				chatMore lang("えっ。", "Forget it...?"), strbye
				goto *chat_end
			}
			allyctrl = 1
			gosub *com_ally
			if ( stat == (-1) ) {
				chatMore lang("早くしなさいよこの馬鹿！", "Hurry up and bring him to me you fool!"), strbye
				goto *chat_end
			}
			rc = stat
			if ( sdata(SKILL_ATTR_CHA, rc) < 150 ) {
				chatMore lang("会いたかったわ…ってエウリュピデスはこんな不細工じゃないわよ！", "I wanted to meet... Eurypides, not an ugly pig like this!"), strbye
				goto *chat_end
			}
			if ( cdata(CDATA_PRECIOUS_ALLY, rc) == 1 ) {
				snd SOUNDLIST_FAIL1
				txt_preciousally
				goto *chat_end
			}
			chatMore lang("ふふ…エウリュピデス…愛してるわ…。", "Fufu... Eurypides... I love you..."), strbye
			modkarma CHARA_PLAYER, -2
			txt_questcompleted
			txt_questupdate
			gdata(GDATA_FLAG_SUB_FALLEN_PRINCESS) = 3

			/********** ANNA CUSTOM - BEGINNING **********/

			AllyID = rc
			gosub *DeleteAIInfo

			/********** ANNA CUSTOM - ENDING **********/

			chara_vanquish rc
			goto *chat_end
		}
		if ( gdata(GDATA_FLAG_SUB_FALLEN_PRINCESS) == 3 ) {
			chatList 1, lang("わたしです", "I am Eurypides.")
			chatList 0, lang("なにそれこわい", "That's just creepy.")
			buff = lang("あん…エウリュピデス…エウリュピデスはどこ？私には貴方しかいないの…。", "Oh... Eurypides... Eurypides, where have you gone? I am nothing without you...")
			gosub *chat_select
			if ( chatval != 1 ) {
				chatMore lang("えっ。", "Huh?"), strbye
				goto *chat_end
			}
			if ( sdata(SKILL_ATTR_CHA, CHARA_PLAYER) < 200 ) {
				chatMore lang("愛してるわエウリュピデス…って誰よあんた！", "I love you, Eurypides... Wait, who the hell are you?!"), strbye
				goto *chat_end
			}
			chatMore lang("ふふ…エウリュピデス…いっしょに気持ち良くなりましょう…。", "Fufu... Eurypides... Let's have some fun...")
			modkarma CHARA_PLAYER, -4
			flt
			itemcreate -1, ITEM_ID_HAPPY_APPLE, cdata(CDATA_X, CHARA_PLAYER), cdata(CDATA_Y, CHARA_PLAYER), 0
			flt
			itemcreate -1, ITEM_ID_MUSIC_TICKET, cdata(CDATA_X, CHARA_PLAYER), cdata(CDATA_Y, CHARA_PLAYER), 1000
			txt_questcompleted
			txt_questupdate
			gdata(GDATA_FLAG_SUB_FALLEN_PRINCESS) = 1000
			snd SOUNDLIST_COMPLETE1
			txt_questitem
			gosub *sexsex
			goto *chat_end
		}
		goto *chat_unique_SWEND1
	}
	if ( _switch_val == CREATURE_ID_JURE | _switch_sw ) {
		_switch_sw = 0
		if ( cdata(CDATA_GOD, CHARA_PLAYER) == GOD_JURE & cdata(CDATA_PIETY, CHARA_PLAYER) >= 4000 & gdata(GDATA_FLAG_SUMMONED_JURE) == 0 ) {
			chatMore lang("ホラ！これ、いらないからあげるわよ。か、勘違いしないでよね？別にアンタに渡すためにわざわざ持ってきたわけじゃないんだから！", "Hey! I'm giving you this because I don't need it. D-Do you understand? I didn't bring it all the way here just to give it to you!"), strbye
			flt
			itemcreate -1, ITEM_ID_SASUMATA, cdata(CDATA_X, CHARA_PLAYER), cdata(CDATA_Y, CHARA_PLAYER), 0
			gdata(GDATA_FLAG_SUMMONED_JURE) = 1000
			goto *chat_end
		}
		else {
			chatList 0, lang("立ち去る", "Bye.")
			if ( gdata(GDATA_FLAG_INVITED_GOD) == 0 ) {
				if ( gdata(GDATA_RANK_HOME) < 200 ) {
					if ( gdata(GDATA_AREA) != AREA_HOME ) {
						chatList 1, lang("わが家に招待する", "Invite to home.")
					}
				}
			}
			buff = lang("(あなたが話しかけると、女神は顔を真っ赤にしてそっぽを向いた)", "(When you spoke, the goddess' face turned red and she turned away)")
			gosub *chat_select
			if ( chatval == 1 ) {
				chatMore lang("そ、そこまで言うなら行ってあげてもいいわよ？本当は予定があるんだけど、仕方がないわね！", "I-If you say so, I guess I'll have to go. It can't be helped if you have plans already!"), strbye
				gdata(GDATA_FLAG_INVITED_GOD) = CREATURE_ID_JURE
				cdata(CDATA_CHARACTER_TIER, tc) = CHARACTER_TIER_SUMMONED_GOD_HOME
			}
			goto *chat_end
		}
		goto *chat_end
	}
	if ( _switch_val == CREATURE_ID_OLDER_SISTER2 | _switch_sw ) {
		_switch_sw = 0
		if ( gdata(GDATA_FLAG_SUB_H_SISTER) >= 1000 ) {
			chatMore lang("冒険もいいけれど…" + cdatan(CDATAN_NAME, CHARA_PLAYER) + "、体には気をつけてね。", "I know you have to adventure, but... Take care of yourself, " + cdatan(CDATAN_NAME, CHARA_PLAYER) + "."), strbye
			goto *chat_end
		}
		if ( gdata(GDATA_FLAG_SUB_H_SISTER) == 0 ) {
			chatList 0, lang("面倒だ", "Too much trouble.")
			chatList 1, lang("引き受ける", "I'll do it.")
			buff = lang("た、助けて" + cdatan(CDATAN_NAME, CHARA_PLAYER) + "！最近地下室にＨな妹が住み着いて…あたし狙われてるみたいなの。お願い、退治してきて！", "H-Help me, " + cdatan(CDATAN_NAME,0) + "! An H Sister settled in my basement recently... I think she's aiming to kill me. Please, get rid of her!")
			gosub *chat_select
			if ( chatval != 1 ) {
				chatMore lang("お姉ちゃんを見捨てるの！？は、はくじょうものぉーー！", "You'd abandon your older sister?! Y-You heartless bastard--!"), strbye
				goto *chat_end
			}
			chatMore lang("ありがと。じゃあさっそく行ってきて！地下室はうちの裏からいけるわ。", "Thanks. You should go immediately! You can get to the basement from the stairs at the back of my house."), strbye
			gdata(GDATA_FLAG_SUB_H_SISTER) = 1
			txt_questupdate
			cell_featset 57, 10, tile_downstairs, CELL_FEATURE_DOWNSTAIRS, 3
			goto *chat_end
		}
		if ( gdata(GDATA_FLAG_SUB_H_SISTER) == 1 ) {
			chatMore lang("早く！早くＨな妹を退治して！", "Hurry! Hurry and get rid of the H Sister!"), strbye
			goto *chat_end
		}
		if ( gdata(GDATA_FLAG_SUB_H_SISTER) == 2 ) {
			flt
			itemcreate -1, ITEM_ID_MUSIC_TICKET, cdata(CDATA_X, CHARA_PLAYER), cdata(CDATA_Y, CHARA_PLAYER), 300
			flt
			nostack = 1
			itemcreate -1, ITEM_ID_MATERIAL_KIT, cdata(CDATA_X, CHARA_PLAYER), cdata(CDATA_Y, CHARA_PLAYER), 0
			inv(INV_ITEM_MATERIAL, ci) = ITEM_MATERIAL_ETHER
			txt_questcompleted
			txtmore
			txt_questitem
			txt_questupdate
			chatMore lang("どうしてあたしがヒットマンに狙われてたのかしら…。とにかくありがとね！これ、少ないけどご褒美だよ。", "I wonder why I was being targeted by a hitman... Regardless, thanks a lot! Here, it's not much but I want you to have this."), strbye
			gdata(GDATA_FLAG_SUB_H_SISTER) = 1000
			goto *chat_end
		}
		goto *chat_end
	}
	if ( _switch_val == CREATURE_ID_H_SISTER | _switch_sw ) {
		_switch_sw = 0
		if ( gdata(GDATA_AREA) == AREA_AMUR_CAGE ) {
			chatMore lang("ＨはＨでもhellだかheavenだかわからんがなぁーっ！", "H is for hentai and hell and heaven but I don't know which!")
			goto *chat_end
		}
		chatList 1, lang("好き", "I love them.")
		chatList 0, lang("嫌い", "I hate them.")
		buff = lang("私を退治しにきた…？えっ？そんなにＨな妹が嫌いなの？", "You came to get rid of me...? Huh? Do you hate H sisters that much?")
		chatesc = 0
		gosub *chat_select
		if ( chatval == 0 ) {
			chatMore lang("そんな…ひどい…。", "That's... so terrible...")
			chatList 1, lang("はい", "Hai.")
			chatList 0, lang("Yes", "Yes.")
			buff = lang("正直に言って！Ｈな妹は好き？", "Be honest! Don't you like H sisters?")
			chatesc = 0
			gosub *chat_select
		}
		chatMore lang("本当！？嬉しい…", "Really?! That makes me so happy...")
		chatMore lang("ＨはＨでもhitmanの方だがなぁーっ！", "H is for hentai but I prefer hitman-!")
		goto *chat_end
	}
	if ( _switch_val == CREATURE_ID_HEINRICH_THE_ARMORED_GENERAL | _switch_sw ) {
		_switch_sw = 0
		if ( gdata(GDATA_FLAG_MAIN) >= 450 & gdata(GDATA_FLAG_MAIN) < 470 ) {
			chatMore lang("依頼の説明はガベラに任せている。あいつから聞いてくれ。用意した報酬は私が選んだものだからな。痺れるぞ？", "I'll let Gavela explain the request to you. I'm the one that chose the reward we prepared though. Look forward to it.")
			goto *chat_end
		}
		if ( gdata(GDATA_FLAG_MAIN) >= 390 & gdata(GDATA_FLAG_MAIN) < 450 ) {
			chatMore lang("水を割って決戦兵器が出てきたときは盛り上がったが、発進する度にあれでは手間がかかる。いつまた襲撃されるかもわからない以上、地上で待機させておくしかないだろう。本国の方にはさらに上位のモンスターが多数出現しているらしい。エウダーナやジューアと争う余裕はなさそうだ。", "It was exciting when our decisive weapon came out and turned the tide of the battle, but it takes a long time to prepare. Since we could be attacked at any time, I have to keep the soldiers on high alert. From our reports, stronger monsters have been appearing closer to the capital as well. We're under enough pressure that fighting with the Juere or Eulderna is impossible.")
			goto *chat_end
		}
		if ( gdata(GDATA_FLAG_MAIN) >= 290 & gdata(GDATA_FLAG_MAIN) < 330 ) {
			chatMore lang("汚染・同化される可能性を考えると、やはり奴に生身で挑むのは得策ではない。イェルスード２号機の完成を急がせるか…。", "Given the likelihood of being contaminated or absorbed, facing that monster with live soldiers probably isn't a good idea. We need to hurry up and complete the Yerleswood MK II..."), strbye
			goto *chat_end
		}
		if ( gdata(GDATA_FLAG_MAIN) >= 240 & gdata(GDATA_FLAG_MAIN) < 290 ) {
			chatMore lang("調査部隊は遺跡最深部へ向かっている。追いついて護衛に加わってくれ。私たちの部隊も後から行く予定だ。", "The investigation team is heading for the deepest part of the ruins. Catch up to them and protect them from harm. A military unit will be sent behind you shortly."), strbye
			goto *chat_end
		}
		if ( gdata(GDATA_FLAG_MAIN) > 210 & gdata(GDATA_FLAG_MAIN) < 220 ) {
			chatMore lang("何？レミード遺跡に入りたいだと。…ふむ、腕はたちそうだな。調査部隊の護衛を引き受けてくれるのなら考えてやらんでもない。", "What's that? You want to enter Remido? Hmm... Well, you seem to have the skill for it. I'll consider it if you agree to serve as a bodyguard for the investigation unit.")
			chatMore lang("酒場の隣のラボにガベラという白衣を着た男がいる。護衛をする気があるなら通行用のカードキーをそいつに作ってもらいたまえ。ただあいつは変わり者だ…上手く交渉するんだな。", "There is a man by the name of Gavela in the laboratory next to the bar. If you decide to serve as a bodyguard, have him make you a card key. He's an odd one though... You may have to negotiate."), strbye
			gdata(GDATA_FLAG_MAIN) = 220
			goto *chat_end
		}
		chatMore lang("見ろ、このパワーアームを。痺れるだろう？イェルスの科学力は世界一だ。", "Feast your eyes on this power arm. Amazed? Yerles has the best scientists in the world."), strbye
		goto *chat_end
	}
	if ( _switch_val == CREATURE_ID_ZERNARD_THE_CAPABLE_MERCENARY | _switch_sw ) {
		_switch_sw = 0
		if ( gdata(GDATA_FLAG_SUB_PIRATE_HUNTING) >= 1000 ) {
			chatMore lang("船酔いでダウンするなんてまだまだ俺様も修行が足りねぇな…。", "Getting seasick like that... Seems like I still need more training..."), strbye
			goto *chat_end
		}
		if ( gdata(GDATA_FLAG_SUB_PIRATE_HUNTING) == 0 ) {
			chatMore lang("お、" + cdatan(CDATAN_AKA, CHARA_PLAYER) + "じゃねぇか。お前最近この辺で有名になってきてるな。", "Oh, you're " + cdatan(CDATAN_AKA, CHARA_PLAYER) + " aren't you? I've been hearing about you a lot recently.")
			chatList 1, lang("その話乗った！", "Let's do it!")
			chatList 0, lang("船はトラウマだ", "I haven't had good experiences with ships.")
			buff = lang("そうだ、俺様と海賊狩りに行かねぇか？この辺の海には海賊がうじゃうじゃ出るってんで、船を借りて海賊のお宝強奪に行こうと思ってよ。船代は俺様が出すからお宝の取り分は俺様が7、お前が3だ。", "I know, why don't you come pirate hunting with me? Pirates have been hanging around this area lately, so I'm going to take their treasure. I'll take 70% of the spoils to cover the boat fee, but you can have the other 30%.")
			gosub *chat_select
			if ( chatval != 1 ) {
				chatMore lang("なんだ？前に乗ってた船が沈没でもしたのか？", "Huh? Did the ship you rode on before sink too?"), strbye
				goto *chat_end
			}
			if ( gdata(GDATA_FLAG_DUEL_TARGET) > 0 ) {
				snd SOUNDLIST_FAIL1
				txt_duel2
				goto *chat_end
			}
			txt_questupdate
			chatMore lang("じゃあ早速行くか！俺様とお前で海賊どもを蹴散らしてやろうぜ。", "Let's go then! We'll kick some pirate ass.")
			gdata(GDATA_FLAG_SUB_PIRATE_HUNTING) = 1
			mdata(MDATA_DOWNSTAIRS_POS) = cdata(CDATA_Y, CHARA_PLAYER) * 1000 + cdata(CDATA_X, CHARA_PLAYER)
			gdata(GDATA_TELEPORT_AREA) = AREA_KURUALM
			gdata(GDATA_TELEPORT_LEVEL) = 3
			levelexitby = 2
			evadd EVENT_BOSS_MUSIC
			gdata(GDATA_FLAG_BOSS_MUSIC) = 1
			chatteleport = 1
			goto *chat_end
		}
		if ( gdata(GDATA_FLAG_SUB_PIRATE_HUNTING) == 1 | gdata(GDATA_FLAG_SUB_PIRATE_HUNTING) == 2 ) {
			chatList 1, lang("狩りに戻ろう", "Let's get back to hunting pirates.")
			chatList 0, lang("大丈夫？", "Are you okay?")
			buff = lang("う、うっぷ…。船、揺れすぎだろ…。", "U-ugh... The ship is rocking too much...")
			gosub *chat_select
			if ( chatval != 1 ) {
				chatMore lang("も、問題ない。でも、もう少し休んでいこうぜ…。", "I-I'm fine. But let me rest for just a while longer..."), strbye
				goto *chat_end
			}
			if ( gdata(GDATA_FLAG_DUEL_TARGET) > 0 ) {
				snd SOUNDLIST_FAIL1
				txt_duel2
				goto *chat_end
			}
			txt_questupdate
			chatMore lang("あ…あ…？そ、そうだな…。", "H...Huh...? Ah, t-that's right..."), strbye
			gdata(GDATA_FLAG_SUB_PIRATE_HUNTING) = 2
			mdata(MDATA_DOWNSTAIRS_POS) = cdata(CDATA_Y, CHARA_PLAYER) * 1000 + cdata(CDATA_X, CHARA_PLAYER)
			gdata(GDATA_TELEPORT_AREA) = AREA_KURUALM
			gdata(GDATA_TELEPORT_LEVEL) = 3
			levelexitby = 2
			gdata(GDATA_LEVEL_START_ON) = 7
			mapstartx = 4
			mapstarty = 11
			evadd EVENT_BOSS_MUSIC
			gdata(GDATA_FLAG_BOSS_MUSIC) = 1
			chatteleport = 1
			goto *chat_end
		}
		if ( gdata(GDATA_FLAG_SUB_PIRATE_HUNTING) == 3 ) {
			txt_questcompleted
			txtmore
			txt_questupdate
			chatMore lang("う…何、海賊のボス討ち取ってきたって？そりゃすげぇ…うっぷ。お前は船酔いしなかったのか？俺様はずっと甲板でダウンしてたぜ…。あ？宝？そんなもんどうでもいいから背中さすってくれよ…。", "Uugh... Y-You defeated the pirate boss? That's incredible... ugh. How did you not get seasick? I was sick the whole time... Huh? Treasure? I don't care about that, just rub my back for me..."), strbye
			gdata(GDATA_FLAG_SUB_PIRATE_HUNTING) = 1000
			goto *chat_end
		}
		goto *chat_end
	}
	if ( _switch_val == CREATURE_ID_DOG_COP | _switch_sw ) {
		_switch_sw = 0
		if ( gdata(GDATA_FLAG_SUB_LOST_KITTY) == 0 ) {
			chatMore lang("近年、迷子になる子猫が急増しているのであります！もし迷子の子猫を見かけましたら、本官のところまで送り届けて欲しいであります！何も報酬は出せませんが…子猫たちとそのご家族のためにも、どうかよろしくお願いなのです！", "The number of kittens who become lost has increased in recent years. If you find any stray cats, please bring them to me! I can't offer you a reward, but... I'm certain the kittens and their families would be very thankful for your help!")
			txt_questupdate
			gdata(GDATA_FLAG_SUB_LOST_KITTY) = 1
			goto *chat_end
		}
		if ( gdata(GDATA_FLAG_SUB_LOST_KITTY) == 1 ) {
			chatList 0, lang("頭をなでる", "Pat his head.")
			if ( findally(CREATURE_ID_STRAY_CAT) != (-1) ) {
				chatList 1, lang("迷子の子猫を引き渡す", "(Turn over the stray kitten.)")
			}
			buff = lang("子猫のご両親も心配しておられます！早く見つけ出して安心させてあげたいでありますよ…。", "The parents of the stray kittens are very concerned! I hope we can bring them some relief soon...")
			gosub *chat_select
			if ( chatval != 1 ) {
				chatMore lang("わふっ？", "Woof?"), strbye
				goto *chat_end
			}
			if ( chatval == 1 ) {
				rc = findally(CREATURE_ID_STRAY_CAT)
				if ( cdata(CDATA_PRECIOUS_ALLY, rc) == 1 ) {
					snd SOUNDLIST_FAIL1
					txt_preciousally
					goto *chat_end
				}
				if ( cdata(CDATA_IN_TAGTEAM, rc) == (-1) ) {
					ttc = cdata(CDATA_TAGTEAM_PARTNER, rc)
					cell_findspace cdata(CDATA_X, rc), cdata(CDATA_Y, rc), 1
					if ( stat == 0 ) {
						txt_nospace
						goto *chat_end
					}
					cell_setchara ttc, rtval, rtval(1)
					tag_end rc
				}
				if ( cdata(CDATA_IN_TAGTEAM, rc) == 1 ) {
					ttc = cdata(CDATA_TAGTEAM_PARTNER, rc)
					cell_findspace cdata(CDATA_X, rc), cdata(CDATA_Y, rc), 1
					if ( stat == 0 ) {
						txt_nospace
						goto *chat_end
					}
					cell_setchara ttc, rtval, rtval(1)
					tag_end rc
				}
				txt lang("迷子の子猫を犬のおまわりさんに引き渡した。「おうちかえれう？」", "You turned over the stray cat to the dog cop. " + cnvtalk("Am I going home?"))

				/********** ANNA CUSTOM - BEGINNING **********/

				AllyID = findally(CREATURE_ID_STRAY_CAT)
				gosub *DeleteAIInfo

				/********** ANNA CUSTOM - ENDING **********/

				chara_vanquish findally(CREATURE_ID_STRAY_CAT)
				snd SOUNDLIST_COMPLETE1
				modkarma CHARA_PLAYER, 10
				p = sdata(SKILL_ATTR_LUC + STARTING_SKILL_SPACT, CHARA_PLAYER) \ 1000
				if ( p < 300 ) {
					modgrowth CHARA_PLAYER, SKILL_ATTR_LUC, 80 + rnd(21)
				}
				else {
					skillexp SKILL_ATTR_LUC, CHARA_PLAYER, 1000
				}
				chatMore lang("この子は…捜索願の出ていた子猫であります！本官が責任を持って親元に帰しましょう。ご協力感謝であります！他にも迷子は大勢いますので、見つけたらまた連れてきてください！", "This kitten... yes, it's one of the ones that was reported missing! I will make sure that it reaches its parents safely. Thank you for your help! If you find any other lost kittens, please bring them to me!")
			}
			goto *chat_end
		}
		goto *chat_end
	}
	if ( _switch_val == CREATURE_ID_MILIS_CAPTAIN_OF_THE_SPECIAL_FORCES | _switch_sw ) {
		_switch_sw = 0
		if ( gdata(GDATA_FLAG_SUB_DIVERSIONARY_TACTICS) == 1000 ) {
			chatMore lang("貴方のように優秀な戦士は嫌いではありません。今度わが軍の入隊試験を受けてみませんか？貴方と共に戦える日を楽しみにしています。", "I like strong warriors like you. Care to take the military enlistment test? I'm looking forward to getting to fight alongside you."), strbye
			goto *chat_end
		}
		if ( gdata(GDATA_FLAG_SUB_DIVERSIONARY_TACTICS) == 0 ) {
			chatMore lang("自分はイェルス軍第７特殊部隊の隊長、ミーリスです！冒険者である貴方に我々の作戦に参加していただきたいのです。", "I am Milis, captain of the Yerles 7th Special Forces division! I'm looking for an adventurer like yourself to participate in our operation.")
			chatList 1, lang("了解です", "Sure.")
			chatList 0, lang("やめておきます", "I'll pass.")
			buff = lang("現在、我々が調査している遺跡をエウダーナも狙っています。任務遂行のためにエウダーナの補給ルートを潰したいのですが、この近くに駐留しているエウダーナの部隊が邪魔なのです。そちらに割くだけの戦力はありません。敵部隊を攻撃して注意を惹きつけていただけないでしょうか？当然、報酬は支払います。", "The Eulderna are also aiming at the ruins that we are currently investigating. I'd like to cut off their supply route, but the soldiers they have stationed nearby are in the way. I don't have enough troops to take care of both the supply route and their soldiers. Could you distract them for us? You'll be rewarded, of course.")
			gosub *chat_select
			if ( chatval != 1 ) {
				chatMore lang("残念です…もしお気持ちが変わりましたら、またおいでください。", "That's too bad... If you change your mind, please come talk to me again."), strbye
				goto *chat_end
			}
			txt_questupdate
			chatMore lang("引き受けていただいたこと、感謝します。準備ができたら、声をかけてください。部下が作戦領域まで案内します。", "I appreciate your cooperation. Let me know when you're ready. My subordinates will guide you to the area."), strbye
			gdata(GDATA_FLAG_SUB_DIVERSIONARY_TACTICS) = 1
			goto *chat_end
		}
		if ( gdata(GDATA_FLAG_SUB_DIVERSIONARY_TACTICS) == 1 | gdata(GDATA_FLAG_SUB_DIVERSIONARY_TACTICS) == 2 ) {
			chatList 1, lang("問題ありません", "Yes.")
			chatList 0, lang("用事を思い出した", "I have something else to do first.")
			buff = lang("しばらくの間、彼らの注意を惹きつけておいてください。準備はよろしいですか？", "All you need to do is distract them for a while. Have you made your preparations?")
			gosub *chat_select
			if ( chatval != 1 ) {
				chatMore lang("急いでくださいね。", "Please take care of it quickly."), strbye
				goto *chat_end
			}
			if ( gdata(GDATA_FLAG_DUEL_TARGET) > 0 ) {
				snd SOUNDLIST_FAIL1
				txt_duel2
				goto *chat_end
			}
			txt_questupdate
			chatMore lang("敵部隊の中には魔法で支配されたわが軍の兵士もいるようです。一思いに楽にしてあげてください。…生きて、またここで会いましょう。では…作戦開始！", "Some of the enemy troops seem to have ensorcelled some of our own men with magic. Do not hesitate to fight them. And... make sure to live so we can meet again. Now then... Operation start!")
			gdata(GDATA_FLAG_SUB_DIVERSIONARY_TACTICS) = 2
			mdata(MDATA_DOWNSTAIRS_POS) = cdata(CDATA_Y, CHARA_PLAYER) * 1000 + cdata(CDATA_X, CHARA_PLAYER)
			gdata(GDATA_TELEPORT_AREA) = AREA_EIREL
			gdata(GDATA_TELEPORT_LEVEL) = 3
			levelexitby = 2
			gdata(GDATA_LEVEL_START_ON) = 7
			mapstartx = 9
			mapstarty = 10
			evadd EVENT_BOSS_MUSIC
			gdata(GDATA_FLAG_BOSS_MUSIC) = 1
			chatteleport = 1
			goto *chat_end
		}
		if ( gdata(GDATA_FLAG_SUB_DIVERSIONARY_TACTICS) == 3 ) {
			flt
			itemcreate -1, ITEM_ID_STATUE_KUMIROMI, cdata(CDATA_X, CHARA_PLAYER), cdata(CDATA_Y, CHARA_PLAYER), 0
			flt
			itemcreate -1, ITEM_ID_MUSIC_TICKET, cdata(CDATA_X, CHARA_PLAYER), cdata(CDATA_Y, CHARA_PLAYER), 600
			flt
			itemcreate -1, ITEM_ID_PLATINUM_COIN, cdata(CDATA_X, CHARA_PLAYER), cdata(CDATA_Y, CHARA_PLAYER), 5
			flt
			itemcreate -1, ITEM_ID_SMALL_MEDAL, cdata(CDATA_X, CHARA_PLAYER), cdata(CDATA_Y, CHARA_PLAYER), 2
			txt_questcompleted
			txtmore
			txt_questitem
			txt_questupdate
			chatMore lang("貴方のおかげでこちらの作戦も無事完了しました…え？陽動するだけでなく殲滅まで？こちらで処理をするつもりでしたが手間が省けました。ではその分、報酬の上乗せをしておきますね。", "Our plan succeeded thanks to your help... huh? You eliminated them rather than just distracting them? You've saved us the trouble of handling them ourselves. I'll increase your reward then."), strbye
			gdata(GDATA_FLAG_SUB_DIVERSIONARY_TACTICS) = 1000
			goto *chat_end
		}
		goto *chat_end
	}
	if ( _switch_val == CREATURE_ID_SECURITY_OFFICER_ORVILLE | _switch_sw ) {
		_switch_sw = 0
		if ( gdata(GDATA_FLAG_SUB_JUERES_IMPERTINENCE) == 1000 ) {
			chatList 2, lang("がんばれ", "I want on behalf of the town management.")
			if ( mdata(MDATA_CITY_COMPLAINTS) == 0 ) {
				chatList 1, lang("管理代行するよ", "I want on behalf of the town management.")
			}
			if ( mdata(MDATA_CITY_COMPLAINTS) > 0 ) {
				chatList 0, lang("管理コマンド", "I want to run the town management.")
			}
			buff = lang("うああー。施設の点検めんどくせー。適当にやっとけばいいかー。", "Man, the inspection of the underground passage is such a pain. Maybe the bare minimum will be enough."), strbye
			gosub *chat_select
			if ( chatval == 2 ) {
				chatMore lang("へへっ…。", "Hum..."), strbye
				goto *chat_end
			}
			if ( chatval == 1 ) {
				snd SOUNDLIST_COMPLETE1
				chatMore lang("マジで！？いやぁ、助かるわー！じゃあ頼んだ！", "By all means, please!")
				mdata(MDATA_CITY_COMPLAINTS) = limit(mdata(MDATA_CITY_WATER_POLLUTION) - 15 + mdata(MDATA_CITY_ETHER_CORRUPTION) - 15 + mdata(MDATA_CITY_TAXES), 1, 99)
				goto *chat_end
			}
			if ( chatval == 0 ) {
				chatList 0, lang("キャンセル", "Cancel")
				chatList 1, lang("政策の実施", "Policy implementation")
				chatList 2, lang("法律整備", "Law development")
				chatList 3, lang("周辺施設の建設", "Construction of the facility")
				buff = lang("おっ。どういう管理をしてくれるんだ？", "What the management are you going to do ?")
				gosub *chat_select
				if ( chatval == 1 ) {
					chatMore lang("まだできないぜ。", "Sorry, this is undeveloped.")
				}
				if ( chatval == 2 ) {
					chatMore lang("未実装らしいな。", "Sorry, this is undeveloped.")
				}
				if ( chatval == 3 ) {
					chatMore lang("開発中だってさ！", "Sorry, this is undeveloped.")
				}
				goto *chat_end
			}
			goto *chat_end
		}
		if ( gdata(GDATA_FLAG_SUB_JUERES_IMPERTINENCE) == 0 ) {
			chatList 1, lang("引き受ける", "I'll do it.")
			chatList 0, lang("面倒だ", "Too much trouble.")
			buff = lang("どどどどどうしよう！やっべえ、コレやっべえぞ…？ハッ…！冒険者か、ちょうどいいところに！実は防衛システムの電源切りっぱなしにしててさ…さっき見るまで地下通路がジューアの連中に占拠されてることに気付かなかったんだよ。みんなにバレる前にこっそりなんとかしてくれ！", "W-w-what am I going to do?! This is bad, this is seriously bad...!? Gah...! Adventurer, you came at just the right time! The truth is the power to our defense systems has been cut... I didn't realize that the underground passage was occupied by Juere soldiers until just a moment ago. This needs to be secretly taken care of before everyone finds out!")
			gosub *chat_select
			if ( chatval != 1 ) {
				chatMore lang("断るのはしょうがないけど、今聞いたことはバラすなよ！", "That's fine, but don't tell everyone what I just told you!"), strbye
				goto *chat_end
			}
			chatMore lang("た、助かったァー！！地下通路への階段出しとくからすぐに行ってきてくれ！", "I-I'm saved...! I'll show you the stairs to the underground passage. Please take care of them as soon as possible!"), strbye
			gdata(GDATA_FLAG_SUB_JUERES_IMPERTINENCE) = 1
			txt_questupdate
			cell_featset 8, 21, tile_downstairs, CELL_FEATURE_DOWNSTAIRS, 3
			goto *chat_end
		}
		if ( gdata(GDATA_FLAG_SUB_JUERES_IMPERTINENCE) == 1 ) {
			chatMore lang("なんか地下がうるさい、とか言うやつ出てきちゃったよ！早く殲滅してきてくれ！", "People keep talking about hearing noises coming from the underground passage! Please, take care of the intruders quickly!"), strbye
			goto *chat_end
		}
		if ( gdata(GDATA_FLAG_SUB_JUERES_IMPERTINENCE) == 2 ) {
			flt
			nostack = 1
			itemcreate -1, ITEM_ID_MATERIAL_KIT, cdata(CDATA_X, CHARA_PLAYER), cdata(CDATA_Y, CHARA_PLAYER), 0
			inv(INV_ITEM_MATERIAL, ci) = ITEM_MATERIAL_ADAMANTIUM
			flt
			itemcreate -1, ITEM_ID_AWESOME_SWIMWEAR, cdata(CDATA_X, CHARA_PLAYER), cdata(CDATA_Y, CHARA_PLAYER), 0
			flt
			itemcreate -1, ITEM_ID_MUSIC_TICKET, cdata(CDATA_X, CHARA_PLAYER), cdata(CDATA_Y, CHARA_PLAYER), 500
			txt_questcompleted
			txtmore
			txt_questitem
			txt_questupdate
			chatMore lang("うへぇ、ギリギリセーフだ。危ないところだった…。こいつはお礼さ、受け取ってくれ。なんか地下倉庫の隅で埃かぶってた欠陥装備だけど、そこそこ高性能なはずだ。多分。", "Whew, we barely made it. That was close... Here, take this as my thanks. It's defective gear we had laying around in the warehouse underground. It should have pretty high performance. Probably."), strbye
			gdata(GDATA_FLAG_SUB_JUERES_IMPERTINENCE) = 1000
			goto *chat_end
		}
		goto *chat_end
	}
	if ( _switch_val == CREATURE_ID_MEFAN_THE_BARD | _switch_sw ) {
		_switch_sw = 0
		if ( gdata(GDATA_FLAG_SUB_UNPAID_COMPENSATION) == 0 ) {
			chatList 1, lang("わかった", "Leave it to me.")
			chatList 0, lang("お断りします", "I refuse.")
			buff = lang("おお…旅の方よ、私の愚痴に付き合ってはくれないか。この街は以前、大量発生したネズミによって大きな被害を受けていたのだ。そこでネズミの駆除依頼を受けたのが私だ。この笛による素晴らしい演奏で小汚いネズミどもを片づけたのだが…この街の連中ときたらその報酬を全く払わないのだ！ああ、話していたら腹が立ってきた。報復としてちょっとこの街の子供をさらってきてくれ。", "Oh traveler, won't you listen to my woes? This town had a massive infestation of mice, and I received a request to get rid of them. But though I got rid of the mice with this flute of mine... The people of the town refuse to give me my pay! Ahh, it makes me so angry. As revenge, I want you to kidnap this town's children and bring them to me.")
			gosub *chat_select
			if ( chatval != 1 ) {
				chatMore lang("そっかー。死ね！", "I see. Then die!"), strbye
				goto *chat_end
			}
			txt_questupdate
			chatMore lang("わかってくれたか！そうそう。さっきはこの街の子供と言ったが、もうこの際どこの街の子供でもかまわんよ。よろしく頼む。", "Perfect! Oh, and I know I said to bring the children of this town, but it really doesn't matter where they're from. Good luck."), strbye
			gdata(GDATA_FLAG_SUB_UNPAID_COMPENSATION) = 1
			goto *chat_end
		}
		if ( gdata(GDATA_FLAG_SUB_UNPAID_COMPENSATION) == 1 ) {
			chatList 1, lang("聞き流す", "Yeah.")
			if ( findally(CREATURE_ID_TOWN_CHILD) != (-1) ) {
				rc = findally(CREATURE_ID_TOWN_CHILD)
				chatList 2, lang(cdatan(CDATAN_NAME, rc) + "を引き渡す", "(Turn over " + cdatan(CDATAN_NAME, rc) + ".)")
			}
			buff = lang("どんどんさらってきてくれ。私を馬鹿にしたことを世間に後悔させてやる。", "Bring them to me as soon as you can. I'll make these people regret making a fool out of me.")
			gosub *chat_select
			if ( chatval == 2 ) {
				if ( cdata(CDATA_PRECIOUS_ALLY, rc) == 1 ) {
					snd SOUNDLIST_FAIL1
					txt_preciousally
					goto *chat_end
				}
				if ( cdata(CDATA_IN_TAGTEAM, rc) == (-1) ) {
					ttc = cdata(CDATA_TAGTEAM_PARTNER, rc)
					cell_findspace cdata(CDATA_X, rc), cdata(CDATA_Y, rc), 1
					if ( stat == 0 ) {
						txt_nospace
						goto *chat_end
					}
					cell_setchara ttc, rtval, rtval(1)
					tag_end rc
				}
				if ( cdata(CDATA_IN_TAGTEAM, rc) == 1 ) {
					ttc = cdata(CDATA_TAGTEAM_PARTNER, rc)
					cell_findspace cdata(CDATA_X, rc), cdata(CDATA_Y, rc), 1
					if ( stat == 0 ) {
						txt_nospace
						goto *chat_end
					}
					cell_setchara ttc, rtval, rtval(1)
					tag_end rc
				}
				chatMore lang("いい子だ…さぁこっちへおいで。これから毎日素晴らしい演奏を聴かせてあげよう。…ん？まだいたのか、これは報酬だ。受け取っておきたまえ。", "Come here... That's a good child. I'll let you listen to wonderful performances every day from now on... Hmm? You're still here? This is your reward. Take it."), strbye
				flt
				itemcreate -1, ITEM_ID_MUSIC_TICKET, cdata(CDATA_X, CHARA_PLAYER), cdata(CDATA_Y, CHARA_PLAYER), 300
				flt
				itemcreate -1, ITEM_ID_PLATINUM_COIN, cdata(CDATA_X, CHARA_PLAYER), cdata(CDATA_Y, CHARA_PLAYER), 2
				txt_questcompleted
				txtmore
				txt_questitem

				/********** BLOODYSHADE CUSTOM - BEGINNING **********/

				AllyID = findally(CREATURE_ID_TOWN_CHILD)
				gosub *DeleteAIInfo

				/********** BLOODYSHADE CUSTOM - ENDING **********/

				chara_vanquish findally(CREATURE_ID_TOWN_CHILD)
				goto *chat_end
			}
		}
		goto *chat_end
	}
	if ( _switch_val == CREATURE_ID_NAIVE_KYLE | _switch_sw ) {
		_switch_sw = 0
		if ( gdata(GDATA_FLAG_SUB_STRUGGLE_AGAINST_INSANITY) >= 1000 ) {
			chatMore lang("おかしいなぁ…全身にユニコーンの角突き刺したのに全然効果がないや。まだ足りないのかなぁ…？", "That's odd... I stabbed him with the unicorn horns all over but it didn't work. Was it just not enough of them...?")
			inv_find ITEM_ID_UNICORN_HORN, CHARA_PLAYER
			if ( stat != (-1) ) {
				buff = lang("え？またユニコーンの角をもってきてくれたの？", "Huh? Did you bring me more unicorn horns?")
				chatList 1, lang("そうだよ", "That's right.")
				chatList 0, lang("ちがうよ", "Nope.")
				chatesc = 1
				gosub *chat_select
				if ( chatval == 1 ) {
					inv_find ITEM_ID_UNICORN_HORN, CHARA_PLAYER
					inv(INV_ITEM_NUM, stat)--
					txt lang("ユニコーンの角を1本渡した。", "You hand over a unicorn horn.")
					snd SOUNDLIST_EQUIP1
					modkarma CHARA_PLAYER, 10
					chatMore lang("ありがとう！今度こそ治るといいなぁ…。", "Thanks! Hopefully this time it will cure him..."), strbye
					goto *chat_end
				}
				chatMore lang("冒険者さんも狂気攻撃には気をつけてね。", "You should watch out for sanity attacks too, " + _onii(cdata(CDATA_SEX, CHARA_PLAYER)) + ".")
				goto *chat_end
			}
			goto *chat_end
		}
		if ( gdata(GDATA_FLAG_SUB_STRUGGLE_AGAINST_INSANITY) == 0 ) {
			chatList 1, lang("まかせて", "Leave it to me.")
			chatList 0, strbye
			buff = lang("うう…父さまが…父さまがおかしくなっちゃった…。ユニコーンの角とかいうの使えば治るって癒し手さんに教えてもらったけど、そんなの持ってないよぉ。お願い、冒険者さん。ユニコーンの角を持ってきて！", "Huu... Daddy... Daddy's gotten all weird... A nurse told me we could cure him if we had unicorn horns but I don't have any. Please " + _onii(cdata(CDATA_SEX, CHARA_PLAYER)) + "! Bring me some unicorn horns!")
			gosub *chat_select
			if ( chatval != 1 ) {
				chatMore lang("ちゃんとお礼はするもん。だからお願い！", "I'll reward you. So please!"), strbye
				goto *chat_end
			}
			txt_questupdate
			chatMore lang("よかったぁ…でも父さまの狂気はすごくひどいんだ。念のため、いっぱい持ってきてほしいな。", "Thank goodness... But his insanity is really bad. Just to be safe, I want you to bring a lot of them."), strbye
			gdata(GDATA_FLAG_SUB_STRUGGLE_AGAINST_INSANITY) = 1
			goto *chat_end
		}
		if ( gdata(GDATA_FLAG_SUB_STRUGGLE_AGAINST_INSANITY) >= 1 & gdata(GDATA_FLAG_SUB_STRUGGLE_AGAINST_INSANITY) <= 10 ) {
			inv_getheader 0
			f = 0
			repeat invrange, invhead
				if ( gdata(GDATA_FLAG_SUB_STRUGGLE_AGAINST_INSANITY) >= 10 ) {
					break
				}
				if ( inv(INV_ITEM_NUM, cnt) > 0 ) {
					if ( inv(INV_ITEM_ID, cnt) == ITEM_ID_UNICORN_HORN ) {
						inv(INV_ITEM_NUM, cnt)--
						gdata(GDATA_FLAG_SUB_STRUGGLE_AGAINST_INSANITY)++
						f = 1
						txt itemname(cnt, 1) + lang("を納入した。", " was handed over.")
						continue cnt
					}
				}
			loop
			if ( f ) {
				chatMore lang("ユニコーンの角もってきてくれたの？ありがとー！", "You brought some unicorn horns? Thanks!")
			}
			if ( f == 0 ) {
				chatMore lang("もしユニコーンの角を見つけたら持ってきて。", "If you find any unicorn horns bring them to me."), strbye
			}
			gosub *calcBurdenPc
		}
		if ( gdata(GDATA_FLAG_SUB_STRUGGLE_AGAINST_INSANITY) >= 10 & gdata(GDATA_FLAG_SUB_STRUGGLE_AGAINST_INSANITY) < 1000 ) {
			chatMore lang("これだけあれば父さまもきっと良くなる…冒険者さんありがとう。後でさっそく父さまに使ってみるね。これ、お礼だよ！", "This should be enough to make daddy better... Thanks, " + _onii(cdata(CDATA_SEX, CHARA_PLAYER)) + "! I'll use them on him later. Here, it's your reward!"), strbye
			flt
			itemcreate -1, ITEM_ID_HERO_CHEESE, cdata(CDATA_X, CHARA_PLAYER), cdata(CDATA_Y, CHARA_PLAYER), 0
			flt
			itemcreate -1, ITEM_ID_SMALL_MEDAL, cdata(CDATA_X, CHARA_PLAYER), cdata(CDATA_Y, CHARA_PLAYER), 2
			txt_questcompleted
			txtmore
			txt_questitem
			txt_questupdate
			gdata(GDATA_FLAG_SUB_STRUGGLE_AGAINST_INSANITY) = 1000
			goto *chat_end
		}
		goto *chat_end
	}
	if ( _switch_val == CREATURE_ID_ORPHE_THE_CHAOS_FOLLOWER | _switch_sw ) {
		_switch_sw = 0
		chatMore lang("おお、ここまで辿り着いてしまったのか！ 悲しいかな、ここから先に行かせるわけにはいかないのだ。お前の冒険はレシマスから真実の書を持ち出したところで終わり、本来この地を訪れることは未来永劫なかったはず。", "Ohh, you managed to make it this far! Unfortunately, you won't be going any further. Your adventure was to end when you took the book of truth from Lesimas; you were never to come to this land.")
		chatMore lang(" (青年はやれやれといった様子で首を振った) 予測を外れた行動ばかりとるお前には、我々も最初は楽しませてもらったが…。お前はどうやらイレギュラーのようだ。異形の森の魔女…あれは森とともに燃えつきて死ぬはずだったのだが、お前と接触したことにより運命が変わってしまった。このままお前を放っておけば永遠の盟約にすら干渉しかねない。", " (The young man shakes his head dejectedly) The fact that your actions deviated from our predictions brought us entertainment at first, but... You appear to be an irregularity. The Witch of the Heretical Forest... She was to perish in the same blaze that took the Forest, but coming in contact with you altered her destiny. If you are left alone, your presence may interfere with the Eternal League.")
		chatMore lang("我々の王も大層不機嫌でいらっしゃる。ここでお前は混沌に呑まれ消えることになるだろう。", "Our King is quite displeased as well. You shall be engulfed by chaos and disappear.")
		goto *chat_end
	}
	if ( _switch_val == CREATURE_ID_CAIM_THE_MAD_RICH | _switch_sw ) {
		_switch_sw = 0
		if ( gdata(GDATA_FLAG_SUB_STRUGGLE_AGAINST_INSANITY) > 1000 ) {
			chatMore lang("大丈夫、私は正気に戻りました！", "It's okay, I'm sane again!")
			atama = rnd(7)
			if ( atama == 0 ) {
				chatMore lang("なぜならばこれもひとえにポストが赤いからであり、宇宙から降り注ぐインフィニティどんどこ光線の影響によって私の体は隅々までこっぱみじんだって言ってるじゃないですか。困っちゃうなぁ、どうしてそこで鉄と鉄が違うものであるという当たり前のことに気づかないで、植木鉢のことを知っているなんて言い張れるんだ？しかし、ここで戦争について考えるのは素敵という意見もちらほら耳にしたり鼻にしたり軍隊アリ。どちらにしてもここではロマンチックだとは到底思えませんがもう終わったことです、仕方がないことなのです…。ですから今日も元気に！逆立ちパラダイスと洒落込もうじゃないかあ！", "Because this post is also solely red, it is by the effects of the infinite burning rays falling from the cosmos that every inch of my body is breaking down. It is worrying as if one does not realize the obvious that iron and iron are not the same, how can one insist to comprehend a flowerpot? However, the opinion that this war is wonderful is something I sporadically hear from the military. Either way, that romantic thoughts concerning it exist after the end is something that cannot be helped... Therefore today I am in high spirits! It is a paradise laid on its head!"), strbye
			}
			if ( atama == 1 ) {
				chatMore lang("それもそのはず。まぁ、さっきまでは花瓶がささっているように見えていましたが、しばらく見ていると布団がねじれているのです。あのルドルフも泣いていました。ルドルフの身に何があったのでしょうか？ルドルフって誰でしょうか？あれはまだ、ハリガネ派とシイタケ派の仲がよかった頃…ある日、頭を地面に埋葬することが決定し、そろそろトマトも芽を出すと思われた頃…その事件は起きました。爆散したサザンカが宙を舞い、赤・青・しじみがそろったことにより、カブトムシ界に破滅が巻き起こったのです。あのカブトムシ界に。ああ、もう誰にも止められない。もう髪をむしりつくすことさえできない…。全部うそでーす、めへー。", "It's only to be expected. Well, even something that appeared as a vase until now, when stared at, twists into a futon. That Rudolf cried as well. You want to know what became of Rudolf's body? Back when the wire and mushroom factions were close... One day, when the decision was made to bury their heads in the ground, about when the tomato had begun to think of sprouting... The incident occurred. The explosion scattered the sasanqua, and with the red and blue clams having been prepared, ruin came to the beetle world. That beetle world. Ahh, it's too late to stop now, even if every option is exhausted... All of that was a lie, eheh."), strbye
			}
			if ( atama == 2 ) {
				chatMore lang("ここで言うのもなんですが…私の大切なツチノコ第二形態が危篤なんです、髪をむしらせろ。なるほど…そうですか。時計には触れない、か…その気持ちわからなくもありませんが、ちぎれた触角を天井に植えるのはどうかと思います。確かにドライヤーならあっちで日光浴してますよ！さっき私が燃やしたらしいけどさ！です・が　きが２　たでしょうかあれは　わた４　かんしして１　のです。こんなこと…ただ虚しいだけなんです。そうです、もう一度考え直すのです。ここを逃したら、もう考えをまとめるチャンスなどありません！よく考えろ、そこまでする必要はどこにもないっ！あー。話は変わるけど、駐車場って男臭いですよね。杏仁豆腐を思い出します。", "Let me say this... My important tsuchinoko's second form is on the verge of death, making me pluck my hair. I see... Yes, that's right. The clock is not touched, huh... It is not that I don't understand the feeling, but I don't think it's a good idea to plant the antenna that broke off on the ceiling. Surely a dryer bathes there in the sun! It seems that some time ago I burned! But starving 2 will probably cross 4 and watch 1. That is... something empty. Indeed, let's rethink this again. If this is missed, there will be no more chances to collect my thoughts! Think carefully, as to go that far is needed nowhere! Ah. Changing the subject, the parking lot is macho isn't it? I recall the annin tofu."), strbye
			}
			if ( atama == 3 ) {
				chatMore lang("ええ、波動は全てを飲み込みます。そして現れるキャベツ、ニンジン、ナス、羊飼いといった色とりどりの魚たち…このバトルの結末はどうなってしまうのでしょうか？私の予想では一昨日の空模様は豪雨だけど最終的にはやっぱり投石器かと思われれれれ！…ここで気になるのはやはりダンゴムシ派です。では今日はダンゴムシ料理を試食してみましょう。みたらしだんごです、どうぞ。えっ…それともまさか叫ばせる気ですか？何度でも叫ぶって言ってたじゃないか、うそつき！あなたも知っているでしょう！こんなこと誰にも言えないけれどここだけの話、扉と和解しなくちゃいけません。ごめんなさい、全てはクロロホルムとの調和のためなんです…わくわくするなぁ！", "Indeed, waves swallow everything. Also appearing is the cabbage, carrot, eggplant, and multicolored fish such as the shepherd... What will be the ending of this battle? My expectation from looking at the sky the day before yesterday was a torrential downpour, but it seems it's a ballista after all! ...The worrying one after all is the pillbug group. Then today I will try tasting a pillbug dish. Mitarashi dango, please. Ah... Don't tell me you're going to cry? How many times did you say you wouldn't cry, you liar! I know you know that too! Just between you and me, but you must reconcile with the door. Sorry, everything is for harmony with chloroform... How exciting!"), strbye
			}
			if ( atama == 4 ) {
				chatMore lang("前にも同じようなことがありました。…あれはまだ海が干上がっていたころの話ですが星々が永劫の彼方へ収束していくなか、二匹の黄金ミミズが灼熱の大気に身を躍らせていました。これでこの話はおしまいです。もうおしまいだぁ…やめにしませんか？こんなことはよくありません！因果律をすっとこどっこいさせるだけなんです！あ、でもそれもいいかもしれませんね。私はあなたを取り込もうとしただけですしね。さて…茹で上がる爆弾たちと「痛いじゃないですか」と連呼した後、空に向かってツバを吐く遊びはみなさんしたことがありますよね？しかしこの遊びの重大な問題が発見されたのです。本日はありがとうございました。", "Something similar happened before... This is a story from before the seas dried up and the stars had converged into the infinite beyond. Two golden worms flung themselves into the red-hot atmosphere. That's it. That's all there is to the story... It can't end there? That's no good! Causality won't be made a fool of! Ah, but it might be good after all. I was just trying to win you over. Now then... After asking boiling bombs repeatedly \"Does it hurt?\", hasn't everyone vomited into the sky? It's an important part of this play. Thank you very much for today."), strbye
			}
			if ( atama == 5 ) {
				chatMore lang("有名な話ですが、解放点を最初に発見したコルチェーン＝トルバッソ男爵は覆面を何十枚もかぶっていたのが原因で呼吸困難に陥り死亡しました。享年57歳とされていますが…俺があのくらいで死んだと思ったのか？まぁそんなことは乾電池の眼球くらいにどうでもいいことです。今重要なのは本の144ページですからね。キーワードは宇宙イノシシの鳴き声だけど中身を気にしてはいけません。あれ、どこまで話しましたっけ？そうそう、崖から落ちていく最中、私は彼らと感動的な再会を果たしました。そして仲良く地面に叩きつけられ、私だけが生き残りました。私の勝ちです。やったぁ。", "Here's a famous story. When Koruchien first discovered the release point, Baron Troubatsu died because of difficulty breathing due to his mask. He was 57 years old... Do you think I would die of that? Well, it matters as much as a battery's eyeball. The important part now is page 144. The keyword is the roar of a space bear, but you can't pay any attention to the contents. Huh? What was I talking about? Oh, right. I had just fallen off the cliff and had a heartwarming reunion with them. I bounced around a bit, but I survived. The winner is me. Great."), strbye
			}
			if ( atama == 6 ) {
				chatMore lang("私がこうなったのも、全ては一枚の蛹から始まった感動物語。呼吸をしなければ人間は生きてはいけない。だがそれは本当なのだろうか。世界を取り巻く何か大きなものにそう思い込まされているだけではないだろうか。悩みの末に、入賞できたはずなのに結局回り道をしてサボテンになってしまった物語。あれは割と高価だったのに！人間はなんと愚かなのだろう…。あのルドルフも最後には「おいおい、どうしてみんな殺人ミミズの皮膚をかぶっているのかしら」と言った。そして死んだ。娘も言った。そして死んだ。お前は？言った？何を？騙されているぞ、早く反論するんだ！そうとも！ここには、なにもいないんだ…。", "The way I became like this all started from a single inspirational story. Humans can't live without breathing. But I wonder if that's true? With something big surrounding the world, maybe you get that impression. A prize should have been one, but the story took a detour and he turned into a cactus. It was quite expensive! How foolish humans are... In the end Rudolf exclaimed \"Hold on, why is everyone wearing the skin of the murdered worms?\". And then he died. The daughter said it too. And then died. How about you? Will you say it? It's a trick, you better object! That's right! There's nothing here..."), strbye
			}
			goto *chat_end
		}
		if ( gdata(GDATA_FLAG_SUB_STRUGGLE_AGAINST_INSANITY) < 1000 ) {
			chatMore lang("実は今まで秘密にしていたのですが、塩コショウってなんなんだよまったくもうふざけるのもいい加減にしろよ！そもそもこの場合ポイントとなるのは３箇所、まず世界のため私のため昼寝をすることはナンセンスだという気持ちでしょう？素人はそんな不毛な争いの果てに一体何が残るって言うんだと思うかもしれませんが、それとこれとは別の事象を表していますよね。何を隠そう、事象は私の大好物なんですよ！それでも不満があるのなら天上天下唯我独尊の精神のもとに解脱や世界統一に向けて、負けるな！闘え！武器を捨てて投降しろ！貴様らは完全に包囲されているが、それでもウサギってかわいいぴょんぴょん♪", "It's actually been a secret up until now, but salt and pepper need to knock it off already! It's three point anyways, but doesn't it feel meaningless to take a nap for both my sake and the sake of the world? An amateur might make a pointless argument about the end of the world, but this and that are rather different events. To tell the truth, this phenomenon is my favorite food! If you are dissatisfied, then the only solution is to turn to the combined selfishness of the entire world and lose! Fight! Throw your weapons down and surrender! You're completely surrounded, but a bunny hopping is still cute~!"), strbye
			goto *chat_end
		}
		if ( gdata(GDATA_FLAG_SUB_STRUGGLE_AGAINST_INSANITY) == 1000 ) {
			chatMore lang("(なぜかはわからないが、全身に大怪我をしている…)", "(You don't know why, but he has serious wounds all over his body...)")
			txt lang("何かがカインの手から落ちた。", "Something falls from Caim's hands.")
			snd SOUNDLIST_EQUIP1
			flt
			itemcreate -1, ITEM_ID_INSANE_BOOK, cdata(CDATA_X, CHARA_PLAYER), cdata(CDATA_Y, CHARA_PLAYER), 0
			gdata(GDATA_FLAG_SUB_STRUGGLE_AGAINST_INSANITY) = 1001
			goto *chat_end
		}
		goto *chat_end
	}
	if ( _switch_val == CREATURE_ID_SNAIL_THE_ANDROID_RIDER | _switch_sw ) {
		_switch_sw = 0
		if ( gdata(GDATA_FLAG_MAIN) >= 400 ) {
			chatMore lang("イルヴァ中の国家がまとまったのは単に脅威からそれぞれの身を守るためだ。国々が真に和解する日まで、僕たちの戦いは続くんだ。", "The nations of Ylva only gather to protect themselves against a threat. Until the day the countries truly reconcile with each other, my fight will continue."), strbye
		}
		if ( gdata(GDATA_FLAG_MAIN) < 400 ) {
			chatMore lang("イェルスとジューアはそろそろ和解したほうがいいと思うんだ。", "It would be best if Juere and the Yerles reconciled soon."), strbye
		}
		goto *chat_end
	}
	if ( _switch_val == CREATURE_ID_RECONCILED_CLEANER | _switch_sw ) {
		_switch_sw = 0
		if ( gdata(GDATA_FLAG_MAIN) >= 400 ) {
			chatMore lang("ブースター使ったアンドロイドさんにも付いていけるよう、速度を鍛えなきゃ。足を引っ張るのは嫌だから。", "I need to train my speed so I can keep up with the new android with boost I hired. I hate holding people back."), strbye
		}
		if ( gdata(GDATA_FLAG_MAIN) < 400 ) {
			chatMore lang("愛に性別も種族も関係ないよね？", "Race and sex have nothing to do with love, right?"), strbye
		}
		goto *chat_end
	}
	if ( _switch_val == CREATURE_ID_BAMBOO_SPROUT | _switch_sw ) {
		_switch_sw = 0
		if ( gdata(GDATA_FLAG_SUB_THE_RESULT_OF_REVENGE) >= 1003 ) {
			chatMore lang("圧倒的な戦闘能力を持つコアラとの戦い…今回は厳しい生存競争だった。コアラの残党…きのこたちとの因縁…里の復興…問題はまだまだ山積みだ。だが今は、とりあえず束の間の平和を享受するとしよう…。", "Combating the koalas with overwhelming force... It was a tough fight for survival. The remnants of the koalas... the fate of the mushrooms... rebuilding the village... problems just keep piling up. But I guess we should enjoy this fleeting peace while it lasts..."), strbye
			goto *chat_end
		}
		if ( gdata(GDATA_FLAG_SUB_THE_RESULT_OF_REVENGE) == 1002 ) {
			chatMore lang("あの数のコアラを撃退するとは、さすがだ！誇りに思うべきだよ。お前はこの地に満ちる光と、難民たちを守ったんだ。そして絶望の闇に負けない強さを我々に示してくれた。これはお礼だ…どうか受け取ってほしい。", "You got rid of the koalas! I knew you could do it! You should be proud. You are the light of this land, protecting the helpless refugees. You've shown us how to stay strong and not lose ourselves in the darkness of despair. This is a gift for you... I want you to have it.")
			flt
			itemcreate -1, ITEM_ID_SCROLL_GAIN_ATTRIBUTE, cdata(CDATA_X, CHARA_PLAYER), cdata(CDATA_Y, CHARA_PLAYER), 0
			flt
			itemcreate -1, ITEM_ID_MUSIC_TICKET, cdata(CDATA_X, CHARA_PLAYER), cdata(CDATA_Y, CHARA_PLAYER), 1500
			flt
			itemcreate -1, ITEM_ID_PLATINUM_COIN, cdata(CDATA_X, CHARA_PLAYER), cdata(CDATA_Y, CHARA_PLAYER), 10
			flt
			itemcreate -1, ITEM_ID_SMALL_MEDAL, cdata(CDATA_X, CHARA_PLAYER), cdata(CDATA_Y, CHARA_PLAYER), 3
			txt_questcompleted
			txtmore
			txt_questitem
			chatMore lang("なに、遠慮はしなくていい。どうせ全部すぎのこの村の跡地から漁ってきたものだからな。", "Please, don't hold back. It's from the village I grew up in."), strbye
			gdata(GDATA_FLAG_SUB_THE_RESULT_OF_REVENGE) = 1003
			goto *chat_end
		}
		if ( gdata(GDATA_FLAG_SUB_THE_RESULT_OF_REVENGE) == 1001 ) {
			chatMore lang("きのこたちとは違い、コアラには言葉すらも届かない。やつらは暗黒の炎によって土地を焼き払い、暗黒焦土を作り出す。焦土に蒔かれた暗黒種子は周囲の光を塗りつぶし暗黒樹へと成長する。そうして闇に包まれた地域は通常の動植物の生育ができない暗黒の大地と化すのだ。暗黒樹がつける果実や葉は豊富な暗黒物質を含み、闇喰コアラたちの餌になる。世代を重ねるごとにコアラの個体数と体内の闇濃度は増していき、さらなる暗黒餌場を求めて別の土地へと暗黒行進を始めるのだ…！！お先真っ暗とはまさにこのことだぜ。", "Unlike mushrooms, there's no reasoning with koalas. These guys burn everything with dark flames, creating dark scorched earth. They plant their dark seeds that grow into dark trees, blotting out all sunlight. This makes the area uninhabitable by normal animals and plants. The trees flower and produce fruit, and everything becomes food for the koalas. Once the koala population rises enough, some of them march on to create a new feeding ground, repeating the whole process again!! Everything becomes covered in darkness..."), strbye
			goto *chat_end
		}
		if ( gdata(GDATA_FLAG_SUB_THE_RESULT_OF_REVENGE) == 1000 ) {
			if ( gdata(GDATA_FLAG_MAIN) > 355 ) {
				chatMore lang("まずいぞ。コアラを決死に食い止めていた、同盟のすぎのこの村からの連絡が途絶えた…。ここが襲われるのももはや時間の問題だろう。", "This is bad. A tribe of cedar's we had an alliance with tried desperately to stop the Koalas, but... I haven't heard from them since... This place is going to be attacked too if things continue as they are.")
				chatList 1, lang("引き受ける", "I'll do it.")
				chatList 0, lang("無理", "No way.")
				buff = lang("コアラはきのことは比較にならないほどの強敵だが、お前の力ならやつらを止められるはずだ！頼む…！このままでは周囲一帯が暗黒焼畑農業によって暗黒物質農場にされてしまう…。", "Koala are formidable opponents, totally incomparable to mushrooms! But with your power, I'm sure you can stop them! Please, I'm begging you...! If they're not stopped, they'll turn this entire area into their feeding ground...")
				gosub *chat_select
				if ( chatval != 1 ) {
					chatMore lang("せめて難民たちは逃がした方がいいんじゃないか？受け入れ先が見つかるとは思えないが…。", "You'll at least help the refugees escape, won't you? I don't know where we'll go though..."), strbye
					goto *chat_end
				}
				chatMore lang("お馴染みの魔法の階段を出しておく…そこから乗り込んでくれ。頼むぞ、" + cdatan(CDATAN_NAME, CHARA_PLAYER) + "！お前が最後の希望だ！！", "The magic stairs you already know about... You can get to the koalas from there. Godspeed, " + cdatan(CDATAN_NAME, CHARA_PLAYER)+ "! You're our last hope!"), strbye
				gdata(GDATA_FLAG_SUB_THE_RESULT_OF_REVENGE) = 1001
				cell_featset 17, 19, tile_downstairs, CELL_FEATURE_DOWNSTAIRS, 10
				goto *chat_end
			}
		}
		if ( gdata(GDATA_FLAG_SUB_THE_RESULT_OF_REVENGE) == 1000 ) {
			if ( gdata(GDATA_FLAG_MAIN) <= 355 ) {
				chatMore lang("風のうわさによるとこの地に向かってコアラの大群が行進してきているそうだ。", "The rumor going around is that hordes of koala are on the march.")
				chatMore lang("やつらは危険だ。実力もさることながら、かわいい外見に反して腹の中は真っ黒だからな…。このままコアラに蹂躙されるのを待つしかないのか…？", "Those guys are bad news. Not only are they strong, but contrary to their cute appearance, their hearts are pure black. Are we destined to be killed by the koalas...?"), strbye
				goto *chat_end
			}
		}
		if ( gdata(GDATA_FLAG_SUB_THE_RESULT_OF_REVENGE) == 0 ) {
			chatList 1, lang("引き受ける", "I'll do it.")
			chatList 0, lang("ざまぁみろ", "Serves you right.")
			buff = lang("かつてこの地には我々たけのこが平和に暮らす里が広がっていた…だが突如攻めてきたきのこ達に里を焼かれてしまい、今では難民の溜まり場だ。仲間はみんな炎に飲み込まれてしまって、生き残ったのはおれだけさ。…お願いだ、きのこ達が住む山を滅ぼしてきてくれ！仲間達の仇をとってやってくれよ！", "At once time we bamboo sprouts had a peaceful village in this land... But our village was burned when the mushrooms suddenly attacked us. My fellows were all destroyed in the flames... I'm the only one left... Please, destroy the mushrooms living in what used to be our mountain! Avenge my friends!")
			gosub *chat_select
			if ( chatval != 1 ) {
				chatMore lang("消えろ、ぶっとばされんうちにな。", "Get out of here before I make you regret saying that."), strbye
				goto *chat_end
			}
			txt_questupdate
			chatMore lang("ありがとう。やっぱりたけのこ派は親切な人ばかりだ。きのこはアホだから侵攻に使った魔法の階段をまだ残してやがる。そこから乗り込んでくれ！", "Thank you. We bamboo sprouts are kind beings and can't handle this sort of thing. Those stupid mushrooms left open the magical stairs they used to invade us, so you can use those to get there."), strbye
			gdata(GDATA_FLAG_SUB_THE_RESULT_OF_REVENGE) = 1
			cell_featset 23, 22, tile_downstairs, CELL_FEATURE_DOWNSTAIRS, 3
			goto *chat_end
		}
		if ( gdata(GDATA_FLAG_SUB_THE_RESULT_OF_REVENGE) == 1 ) {
			chatMore lang("え？きのこやたけのこのくせにどうやって移動してるのかって？歩いてるとこ見たことないの？そんなことより早く山のきのこを殲滅してきてくれよ。", "Huh? You want to know how mushrooms and bamboo sprouts are moving around? Just hurry up and get rid of the mushrooms instead of worrying about that sort of thing."), strbye
			goto *chat_end
		}
		if ( gdata(GDATA_FLAG_SUB_THE_RESULT_OF_REVENGE) == 2 ) {
			flt
			itemcreate -1, ITEM_ID_OBJET_HEART, cdata(CDATA_X, CHARA_PLAYER), cdata(CDATA_Y, CHARA_PLAYER), 0
			flt
			itemcreate -1, ITEM_ID_MUSIC_TICKET, cdata(CDATA_X, CHARA_PLAYER), cdata(CDATA_Y, CHARA_PLAYER), 600
			flt
			itemcreate -1, ITEM_ID_PLATINUM_COIN, cdata(CDATA_X, CHARA_PLAYER), cdata(CDATA_Y, CHARA_PLAYER), 4
			flt
			itemcreate -1, ITEM_ID_SMALL_MEDAL, cdata(CDATA_X, CHARA_PLAYER), cdata(CDATA_Y, CHARA_PLAYER), 1
			txt_questcompleted
			txtmore
			txt_questitem
			txt_questupdate
			chatMore lang("山のきのこどもを滅ぼしてきたんだな！ついに…ついに有史以前から続いていたきのことの戦いに勝利したのか。しかし…なんだこの虚しさは…？", "The mushrooms that took over our mountain have been destroyed! Finally... Finally our kind has been victorious in the conflict between bamboo sprouts and mushrooms that has raging since ancient times. But... what is this empty feeling in my heart...?")
			chatMore lang("我々は…ずっと相手方を憎み嫌い、戦うことしか考えていなかった。だがそれはきっと間違いだったのだ。滅ぼす前にちゃんと歩み寄れば、もしかしたら和解することもできたのかもしれない…。", "We... we hated them so much. All we thought about was fighting... But that was a mistake. I'm sure that if we tried to speak with each other before fighting, this might never have happened...")
			chatMore lang("まぁでも滅ぼしちゃったものはしょうがないよねー。", "Well, there's no help for it. They're gone now."), strbye
			gdata(GDATA_FLAG_SUB_THE_RESULT_OF_REVENGE) = 1000
			goto *chat_end
		}
		goto *chat_end
	}
	if ( _switch_val == CREATURE_ID_LUNE_THE_MAID_CHIEF | _switch_sw ) {
		_switch_sw = 0
		if ( gdata(GDATA_FLAG_SUB_MANSION_FOR_SALE) == 1003 ) {
			if ( gdata(GDATA_AREA) == AREA_MAID_MANSION ) {
				chatMore lang("ご主人様、ご無事で！この屋敷に集まりつつあった増援の悪魔たちは、どうやら親玉を失ったことでみんな逃げて行ったみたいですよ！", "Master, I'm glad you're safe! More of those disgusting creatures were gathering, but it looks like they all ran away after the leader was killed!")
				chatMore lang("そうそう、地下室への階段前にこんなものが落ちていたんです。清掃業者さんの物でしょうか？とりあえずご主人様に渡しておきますね。", "Oh yes, and I found this in front of the stairs. Maybe the exterminator is the one who left it there? Anyways, I think you should have it, Master."), strbye
				flt
				itemcreate -1, ITEM_ID_CLEANING_DOLL, cdata(CDATA_X, CHARA_PLAYER), cdata(CDATA_Y, CHARA_PLAYER), 0
				gdata(GDATA_FLAG_SUB_MANSION_FOR_SALE) = 1004
				snd SOUNDLIST_COMPLETE1
				goto *chat_end
			}
		}
		if ( gdata(GDATA_FLAG_SUB_MANSION_FOR_SALE) >= 1000 ) {
			if ( gdata(GDATA_AREA) == AREA_MAID_MANSION ) {
				if ( gdata(GDATA_FLAG_PICNIC_BASKET_MAID_MANSION) == 100 ) {
					chatMore lang("え〜っと…これ、メイドの皆で作ったんです。よかったら食べてください。お口に合うといいんですけれど…。", "Umm... This is something we all made for you. Please try it if you would like. I hope the taste is to your liking...")
					txt_questitem
					flt
					itemcreate -1, ITEM_ID_LARGE_PICNIC_BASKET, cdata(CDATA_X, CHARA_PLAYER), cdata(CDATA_Y, CHARA_PLAYER), 0
					inv(INV_ITEM_LEVEL, ci) = 7
					gdata(GDATA_FLAG_PICNIC_BASKET_MAID_MANSION) = 0
				}
				if ( gdata(GDATA_FLAG_SUB_MANSION_FOR_SALE) >= 1004 ) {
					chatList 5, lang("地下に行く", "I want to go to the basement.")
				}
				if ( gdata(GDATA_FLAG_SUB_MANSION_FOR_SALE) == 1002 ) {
					chatList 4, lang("地下に害虫駆除に行く", "I'll get rid of the bugs in the basement.")
				}
				if ( gdata(GDATA_FLAG_SUB_MANSION_FOR_SALE) == 1001 ) {
					chatList 3, lang("キッチンに虫がいたんだけど", "Some bugs damaged the kitchen.")
				}
				chatList 2, lang("気持ちいいことしない？", "Wanna have some fun?")
				chatList 1, lang("ここ、こんなに埃が残ってるよ", "There's too much dust here.")
				chatList 0, lang("頑張ってるね", "You've done well.")
				buff = lang("何か御用でしょうか？", "Is there something I can help you with?")
				gosub *chat_select
				if ( chatval == 1 ) {
					if ( maidsikari > 3 ) {
						chatMore lang("そ、その…あまりいじめないでください…。", "U-umm... Please don't tease me so much..."), strbye
					}
					if ( maidsikari <= 3 ) {
						chatMore lang("す、すみませんすみません！すぐに掃除しなおします！", "I'm sorry! I'm so sorry! I'll clean it again immediately!"), strbye
					}
					maidsikari++
					goto *chat_end
				}
				if ( chatval == 2 ) {
					if ( maidkimoti > 4 ) {
						chatMore lang("も、もういいじゃないですかその話は！", "T-That's enough of that kind of talk!"), strbye
					}
					if ( maidkimoti == 4 ) {
						chatMore lang("え、えっちなのはいけないと思います！", "I-I think that dirty thoughts are bad!")
						chatMore lang("…え？あれ？気持ちいいことって、そういうことじゃないんですか…？", "...Huh? When you said \"have some fun\", is \"that\" not what you meant...?"), strbye
					}
					if ( maidkimoti <= 3 ) {
						chatMore lang("ぶっ！？だ、ダメです！ダメですそんなの！し、仕事に戻らせていただきます！", "Mmgh!? N-No! Absolutely not! I-I have work to go do!"), strbye
					}
					maidkimoti++
					goto *chat_end
				}
				if ( chatval == 3 ) {
					chatMore lang("！ご主人様も遭遇しましたか…。あのおぞましき悪魔達は地下から侵入してきているようで、何度駆除してもきりがないんです。先日、地下に清掃業者を送り込んだのですけど誰一人として帰ってきませんでした…。いったいどうすれば…。", "! So you noticed, Master... Those disgusting creatures came up from underground. We've tried to get rid of them several times, but there's just no end to them. We sent some bug exterminators down there a few days ago, but not a single one came back... I don't know what in the world we're going to do..."), strbye
					gdata(GDATA_FLAG_SUB_MANSION_FOR_SALE) = 1002
					goto *chat_end
				}
				if ( chatval == 4 ) {
					chatList 1, lang("危険は承知の上だ", "It's a risk I'm willing to take.")
					chatList 0, lang("じゃあやめる", "I won't go then.")
					buff = lang("ご主人様自ら駆除に向かわれるのですか！？そんな！危険です！", "Let you handle it, Master?! We can't! It's too dangerous!")
					gosub *chat_select
					if ( chatval != 1 ) {
						chatMore lang("それがいいですよ！また今度業者に頼みましょう。", "Good! Let's give the exterminators another try."), strbye
						goto *chat_end
					}
					if ( gdata(GDATA_FLAG_DUEL_TARGET) > 0 ) {
						snd SOUNDLIST_FAIL1
						txt_duel2
						goto *chat_end
					}
					chatMore lang("…止めても無駄の様ですね。わかりました、地下へは私が案内いたします。どうぞこちらへ…。", "...It doesn't look like I can stop you. Okay, I'll guide you to the basement. Please follow me...")
					mdata(MDATA_DOWNSTAIRS_POS) = cdata(CDATA_Y, CHARA_PLAYER) * 1000 + cdata(CDATA_X, CHARA_PLAYER)
					gdata(GDATA_TELEPORT_AREA) = AREA_MAID_MANSION
					gdata(GDATA_TELEPORT_LEVEL) = 3
					levelexitby = 2
					gdata(GDATA_LEVEL_START_ON) = 7
					mapstartx = 16
					mapstarty = 28
					chatteleport = 1
					goto *chat_end
				}
				if ( chatval == 5 ) {
					if ( gdata(GDATA_FLAG_DUEL_TARGET) > 0 ) {
						snd SOUNDLIST_FAIL1
						txt_duel2
						goto *chat_end
					}
					chatMore lang("え…。また地下室へ行かれるのですか？アイテム整理ですか？ま、まさかそれとも悪魔たちの残党がまだ…！？と、とにかくご案内しますね。", "What...? You want to go the basement again? Do you need to organize the items there? B-But surely there are still some remnants of those devils...?! A-Anyways, please follow me.")
					mdata(MDATA_DOWNSTAIRS_POS) = cdata(CDATA_Y, CHARA_PLAYER) * 1000 + cdata(CDATA_X, CHARA_PLAYER)
					gdata(GDATA_TELEPORT_AREA) = AREA_MAID_MANSION
					gdata(GDATA_TELEPORT_LEVEL) = 3
					levelexitby = 2
					gdata(GDATA_LEVEL_START_ON) = 7
					mapstartx = 3
					mapstarty = 16
					chatteleport = 1
					goto *chat_end
				}
				if ( chatval == 0 ) {
					if ( maidhome > 3 ) {
						chatMore lang("もう…そんなに褒めても何も出ませんよ♪", "Geez... There's no need to praise me that much~ You're embarrassing me!"), strbye
					}
					if ( maidhome <= 3 ) {
						chatMore lang("はい、ありがとうございます。…えへへ、ほめられちゃった。", "Thank you very much... Ehehe, I was praised."), strbye
					}
					maidhome++
					goto *chat_end
				}
			}
			chatMore lang("ご主人様、お仕事お疲れ様です！", "Good work out there, Master!"), strbye
			goto *chat_end
		}
		if ( gdata(GDATA_FLAG_SUB_MANSION_FOR_SALE) == 0 ) {
			chatList 1, lang("屋敷ごと買ってやる", "I'll buy the mansion.")
			chatList 0, strbye
			buff = lang("はぁー…。え、どうしたのかって？実はご主人様が事業に失敗して借金まみれになってしまって。それで屋敷を売りに出すと同時に私たちメイドも全員解雇。ああ…新しいお仕事先探さないと。でもこの辺りで募集してるとこ、ないんですよねー…。", "*Sigh*... Huh? What's wrong? Well, my Master's business was unsuccessful and now he's drowning in debt. So, he put his mansion up for sale and fired us all at the same time. *Sigh*... Now I have to find a new job, but there's just doesn't seem to be any here...")
			gosub *chat_select
			if ( chatval != 1 ) {
				chatMore lang("さよならー…故郷のお母さんへの仕送りどうしよう…。臓器でも売るか！", "Goodbye... Maybe I should just go back home and move in with my mom... Oh, I could sell my organs!")
				goto *chat_end
			}
			chatMore lang("お気持ちは嬉しいですけど…今つけられてる屋敷の値段、金貨200万枚ですよ。そんなもの大富豪でもないと買えるわけが…。", "I appreciate the thought, but... The mansion is priced at 2 million gp. Only millionaires can afford this sort of thing..."), strbye
			txt_questupdate
			gdata(GDATA_FLAG_SUB_MANSION_FOR_SALE) = 1
			goto *chat_end
		}
		if ( gdata(GDATA_FLAG_SUB_MANSION_FOR_SALE) == 1 ) {
			if ( cdata(CDATA_GOLD, CHARA_PLAYER) >= 2000000 ) {
				chatList 1, lang("この金で屋敷買える？", "Is this enough?")
			}
			chatList 0, strbye
			buff = lang("新しいお仕事見つからない…。", "I've got to find a new job...")
			gosub *chat_select
			if ( chatval != 1 ) {
				chatMore lang("これは本格的に臓器売らなきゃー…。", "I might really have to start selling my organs..."), strbye
				goto *chat_end
			}
			chatList 1, lang("安いね", "That's cheap.")
			chatList 0, lang("考え直す", "Let me think on it.")
			buff = lang("うひゃあ！？す、すみません。変な声出ちゃいました。…こんな大金、見るの初めてです！これなら…。あ、でもでも！これとは別に維持費と人件費込みで毎月金貨6000枚ほどかかりますよ。それでも大丈夫ですか？", "Uwaah!? ...S-sorry about that just now. It's just the first time I've ever seen so much money! With this much, you can... Ah, but, but! It also costs 6000 gp a month for maintenance and personnel expenses. Is that okay?")
			gosub *chat_select
			if ( chatval != 1 ) {
				chatMore lang("やっぱり高いですよねぇ。", "I knew it would be too much."), strbye
				goto *chat_end
			}
			chatMore lang("わ、私とは金銭感覚が違いすぎる…っ！…えっと。屋敷は元のご主人様が売っているものなのでそちらに交渉しにいってください。今はルードゥスに住んでいるはずです。", "T-That sort of attitude with money is so unfathomable for someone like me...! ...Ahem. My original Master is the one selling the mansion, so please go negotiate the payment with him. He lives in Ludus now.")
			txt_questupdate
			gdata(GDATA_FLAG_SUB_MANSION_FOR_SALE) = 2
			goto *chat_end
		}
		if ( gdata(GDATA_FLAG_SUB_MANSION_FOR_SALE) == 2 ) {
			chatMore lang("一緒に解雇されたメイド仲間に、雇ってくれるかもしれない人がいるって連絡しないとなぁ。あ、ルードゥスはここからずっと東にある農村ですよ。", "You're still alive I see. Good luck glorious murderer."), strbye
			goto *chat_end
		}
		goto *chat_end
	}
	if ( _switch_val == CREATURE_ID_BANKRUPT_GUO | _switch_sw ) {
		_switch_sw = 0
		if ( gdata(GDATA_FLAG_SUB_MANSION_FOR_SALE) >= 1004 ) {
			if ( cdata(CDATA_GOLD, CHARA_PLAYER) >= 300000 ) {
				chatList 1, lang("物件を買う", "I'll buy.")
			}
			chatList 0, strbye
			buff = lang("おお、オマエか。ここだけの話、いい物件があるんだが買わんか？散らかってはいるが、大量のペットを放し飼いにすることだって可能な広さだ。しかも税金がかからんぞ！これでなんと金貨30万枚だ！どうだ？もちろん買うだろう？", "Ohh, it's you. Now this is just between you and me, but I know of some good real estate. Want to buy it? It's a bit of a mess, but it's large enough that you can let out a large number of pets there. And it's not even taxed! It'll only cost you 300,000gp. How about it? You're gonna buy, right?")
			gosub *chat_select
			if ( chatval != 1 ) {
				chatMore lang("シッシッ、貧乏がうつるわ。", "Shoo then, I have no use for the poor."), strbye
				goto *chat_end
			}
			cdata(CDATA_GOLD, CHARA_PLAYER) -= 300000
			snd SOUNDLIST_PAYGOLD1
			chatMore lang("ほら権利書だ、好きなところに移すとよいぞ。他にも同じような物件があるから、足りなくなったらまた買いに来るのだぞ！", "Here is the deed. You should put it wherever you like. I have more where that came from, so if you need another, come buy it!"), strbye
			flt
			itemcreate -1, ITEM_ID_DEED_DISCARDED_RANCH, cdata(CDATA_X, CHARA_PLAYER), cdata(CDATA_Y, CHARA_PLAYER), 0
			txt_questitem
			goto *chat_end
		}
		if ( gdata(GDATA_FLAG_SUB_MANSION_FOR_SALE) >= 1000 ) {
			chatMore lang("ククク…貧乏人どもめ。わしを馬鹿にしたことを後悔させてくれるわ。", "Kukuku... Those poor idiots. They'll regret making a fool out of me."), strbye
			goto *chat_end
		}
		chatMore lang("くそっ、くそっ！どいつもこいつも…。没落したわしを憐れんでいるが、あれは絶対裏で馬鹿にしておるわ！今に見ておれ貧乏人ども…屋敷が売れてまとまった金さえ入ってくれば…。", "Shit. Shit! Every last one of them... They all act like they feel sorry for me, but they're all making fun of me behind my back! You just wait, you poor bastards... Once I sell my mansion and have money again...")
		if ( gdata(GDATA_FLAG_SUB_MANSION_FOR_SALE) == 2 ) {
			if ( cdata(CDATA_GOLD, CHARA_PLAYER) >= 2000000 ) {
				chatList 1, lang("屋敷を買う", "I'll buy.")
			}
			chatList 0, strbye
			buff = lang("おおおお！？金！金だ！屋敷を買ってくれるのか！？…ふむ…本来は金貨240万枚のところを200万枚にまけておいてやろう。ありがたく思えよ。", "Ohhhhhh?! Money! You have money! Do you want to buy my mansion? ...Hmm... I had originally put it up for 2,400,000gp, but I'll let you have it for 2,000,000gp. Be grateful.")
			gosub *chat_select
			if ( chatval != 1 ) {
				chatMore lang("シッシッ、わしはオマエのような貧乏人とは本質的に違うのじゃ。", "Shoo then. People like me are just fundamentally different than paupers like yourself."), strbye
				goto *chat_end
			}
			cdata(CDATA_GOLD, CHARA_PLAYER) -= 2000000
			snd SOUNDLIST_PAYGOLD1
			chatMore lang("金は確かに受け取った。あの屋敷はもうオマエのものじゃ。好きにするがよいぞ。", "We're done here then. It's yours now. Do with it what you like."), strbye
			txt_questcompleted
			txtmore
			txt_questupdate
			gdata(GDATA_FLAG_SUB_MANSION_FOR_SALE) = 1000
			goto *chat_end
		}
		goto *chat_end
	}
	if ( _switch_val == CREATURE_ID_MESHERA_PLANT | _switch_sw ) {
		_switch_sw = 0
		if ( gdata(GDATA_AREA) == AREA_AMUR_CAGE ) {
			chatMore lang("(不気味に胎動している…。)", "(Ethers were discharged to crystallize some.)")
			goto *chat_end
		}
		chatMore lang("(あなたはフロアの中央に巨大な肉塊が鎮座しているのを見つけた)", "(You discover a massive lump of flesh enshrined in the middle of the floor.)")
		chatMore lang("(それこそが、かつてこの地で産み落とされたメシェーラのオリジナル。生命を無差別に取り込み、星をも食らいつくさんと今も進化を続ける災厄の苗床であった)", "(It is the original Meshera that was born in this place in the distant past. Indiscriminately assimilating other lifeforms, it is the seedbed for the disaster that threatened the world and which even now continues to evolve.)")
		if ( gdata(GDATA_FLAG_MAIN) < 320 ) {
			cbitmod CHARA_BIT_CRADLE_15TH, tc, 1
		}
		goto *chat_end
	}
	if ( _switch_val == CREATURE_ID_MILOS_OF_THE_FORGOTTEN_WORLD | _switch_sw ) {
		_switch_sw = 0
		if ( gdata(STARTING_GDATA_FLAG + 320) > 0 ) {
			chatList 0, strbye
			chatList 1, lang("伝説って？", "What is a legend?")
			buff = lang("光に包まれてこちらの世界に飛ばされた際、何者かが私たちの前に現れた。声も姿もおぼろげでよくわからなかったが、運命がどうとか言っていた。もしかすると伝説のノルンだったのかもしれないな。", "Okay. Wait here.")
			gosub *chat_select
			if ( chatval == 1 ) {
				chatMore lang("ああ、すまない。こちら側の住人にガイアス・ヴィスの伝説はわからないか。ノルンとは、運命の女神とその末裔…巨人族のアールン、妖精族のエルン、小人族のドヴァルン。その総称だ。古神戦争によって大多数が死滅したが、生き残りが運命を見通し人を導くとされている。", "Okay. Wait here.")
				goto *chat_end
			}
			goto *chat_end
		}
		else {
			chatMore lang("パルミア、エウダーナ、エーテルの風…", "Palmia, Eulderna, Etherwind...")
			chatMore lang("この世界…イルヴァといったか。どうやら我々の世界ガイアス・ヴィスとまったく無関係というわけではなさそうだな。使命さえなければじっくり調査をしたいところだ。", "This world... Ylva, it's called. It appears it's not entirely independent of my own world of Gaius Vis. Despite my mission, I can't help but want to investigate it.")
			chatMore lang("それにしてもこの世界はどこかおかしい。死人や瀕死の怪我人が、生魂の儀もなしに自然回復するのだから。誰も疑問に思わないのか？", "That said, something about this world is funny. The dead and dying can be recovered without the Healing Ceremony. Doesn't anyone find that odd?"), strbye
			goto *chat_end
		}
		goto *chat_end
	}
	if ( _switch_val == CREATURE_ID_CARLA_OF_THE_FORGOTTEN_WORLD | _switch_sw ) {
		_switch_sw = 0
		if ( gdata(STARTING_GDATA_FLAG + 320) > 0 ) {
			chatMore lang("ミロスと合流できたのはいいけれど、こちら側に来てから相当年月が過ぎているわ。もし時間の流れが同じだとしたら…今頃、森の異変はどうなっているのかしら。考えるだけで恐ろしいわ。", "Okay. Wait here.")
			goto *chat_end
		}
		else {
			chatMore lang("あ、あなたは！？", "Y-you are?!")
			chatMore lang("…ごめんなさい、人違いだわ。昔助けた冒険者と雰囲気が似ていたから間違えてしまったの。", "...I'm sorry. I thought you were someone else. You remind me of an adventurer who helped me out long ago.")
			chatMore lang("この土地に流れ着いてから色々な人に話を聞いたけれど、どうやらこの世界は私のいた世界ではないようね。早くガイアス・ヴィスに帰ってザビ王に謁見しなければならないのだけれど、どうやって帰ればいいのかしら？ミロスともはぐれてしまったし…。", "From what I've gathered from the many people I've spoken to since washing ashore, this world is not my own. I want to hurry back to Gaius Vis since I have an audience with King Zabi, but how can I return to my world? Not only that, but Milos has gone missing as well..."), strbye
			goto *chat_end
		}
		goto *chat_end
	}
	if ( _switch_val == CREATURE_ID_RICH_PERSON_STOKE | _switch_sw ) {
		_switch_sw = 0
		chatList 1, lang("音楽チケット", "Music tickets")
		chatList 0, strbye
		buff = lang("やれやれ、昔はここも美しく静かな街だったのに。観光客が増えたおかげで騒がしくて仕方がありません。賑やかになったと孫は喜んでますが。", "My goodness... This used to be such a beautiful and quiet town. That all went to hell once those tourists started coming here. At least my grandson enjoys the liveliness.")
		gosub *chat_select
		if ( chatval == 1 ) {
			chatMore lang("音楽チケットを持っているのですか？パーティを開催しようにも切らして困っていたのです。わたしの特別なコレクションと交換してくれませんか？", "You have some music tickets? It's always troubling to run out when I want to hold parties. Would you be interested in trading them for something from my special collection?")
			invctrl = 28, 1
			invfile = cdata(CDATA_ROLE_FILE_ID, tc)
			gosub *shop
			screenupdate = -1
			gosub *screen_draw
			cs = 0
			gosub *calcBurdenPc
			goto *chat_unique
		}
		goto *chat_end
	}
	if ( _switch_val == CREATURE_ID_ARMA_THE_TOUR_GUIDE | _switch_sw ) {
		_switch_sw = 0
		if ( gdata(GDATA_AREA) == AREA_CHAOS_CRADLE ) {
			if ( gdata(GDATA_FLAG_MAIN) >= 630 ) {
				chatMore lang("今思うと、イトコのフロンとリアにも来てもらうべきでしたね。下見ついでに混沌の神も倒せて一石二鳥だったかもしれません。", "Sorry, this is untranslated sentence."), strbye
				goto *chat_end
			}
			else {
				chatMore lang("妹のエールと一緒にツアーの下見に来たんですが、ここで貧弱なお客様を守りながら戦うのは至難の業ですね…。", "Sorry, this is untranslated sentence.")
				chatMore lang("というか、妹がどんどん先に行くのではぐれてしまいました。か弱い姉を置きざりにするなんてどんな判断だ！", "Sorry, this is untranslated sentence."), strbye
				gdata(GDATA_FLAG_MAIN) = 630
				goto *chat_end
			}
		}
		else {
			chatMore lang("ツアーガイドたるもの、どんなところだろうと観光案内できなくてはなりません。あらゆる環境を案内できるように己を鍛え上げ、襲いくる野盗や怪物との戦闘をむしろお客様向けのショーにできるような者だけが、このイルヴァでツアーガイドを務められるのです。", "To be a tour guide, you must be capable of traveling everywhere in Ylva. Only those who have trained their bodies, who are capable of guiding others through any terrain in Ylva, and who are able to fight powerful monsters to put on a show for their customers are fit to be tour guides."), strbye
			goto *chat_end
		}
		goto *chat_end
	}
	if ( _switch_val == CREATURE_ID_AILE_THE_ATTENDANT | _switch_sw ) {
		_switch_sw = 0
		if ( gdata(GDATA_AREA) == AREA_CHAOS_CRADLE ) {
			if ( gdata(GDATA_FLAG_MAIN) >= 650 ) {
				chatMore lang("ネフィア探索は添乗員の専門外なんですけどねぇ…。", "This guide doesn't know where Nefia are..."), strbye
				goto *chat_end
			}
			else {
				chatMore lang("うーん。気が付いたらお姉ちゃんがいない…。", "Well when she notices it, she'll be gone already...")
				chatMore lang("お姉ちゃんは昔から私達の中でもどんくさい感じでしたので。ちんたらしてて迷子になったんでしょうね。やれやれ。", "Sorry, this is untranslated sentence."), strbye
				gdata(GDATA_FLAG_MAIN) = 650
				goto *chat_end
			}
		}
		goto *chat_end
	}
	if ( _switch_val == CREATURE_ID_LEAD_DEVELOPER_DR_GAVELA | _switch_sw ) {
		_switch_sw = 0
		if ( gdata(GDATA_FLAG_MAIN) == 480 ) {
			chatMore lang("さすがだ" + cdatan(CDATAN_NAME, CHARA_PLAYER) + "、やはりお前を推薦してよかったな。ああ、量産型は一度回収した。今回のような敵が出てくれば対応できない…設定や装備の変更が必要そうだ。", "I knew I could count on you, " + cdatan(CDATAN_NAME, CHARA_PLAYER) + ". Oh, and we're collecting all the mass-produced equipment we've been using so far. We've determined that they won't be able to handle a strong enemy like the one you've encountered... A change of settings and equipment appears to be required.")
			chatMore lang("依頼報酬を預かっている。受け取ってくれ。", "This is your reward for your help so far. Take it."), strbye
			flt
			itemcreate -1, ITEM_ID_MIGHTY_ARMS, cdata(CDATA_X, CHARA_PLAYER), cdata(CDATA_Y, CHARA_PLAYER), 0
			flt
			itemcreate -1, ITEM_ID_SCROLL_GAIN_ATTRIBUTE, cdata(CDATA_X, CHARA_PLAYER), cdata(CDATA_Y, CHARA_PLAYER), 2
			flt
			itemcreate -1, ITEM_ID_MATERIAL_KIT, cdata(CDATA_X, CHARA_PLAYER), cdata(CDATA_Y, CHARA_PLAYER), 0
			inv(INV_ITEM_MATERIAL, ci) = ITEM_MATERIAL_SPIRIT
			flt
			itemcreate -1, ITEM_ID_MIND_DISC, cdata(CDATA_X, CHARA_PLAYER), cdata(CDATA_Y, CHARA_PLAYER), 0
			txt_questitem
			gdata(GDATA_FLAG_MAIN) = 490
			txt_questupdate
			chatMore lang("依頼のため、腕試しのため、好奇心のため、世界のため…理由こそ様々だが、精鋭の冒険者たちが巨城の最深部を目指していると聞く。俺は、お前なら一番乗りも充分狙えると思っている。まぁその、なんだ。" + cdatan(CDATAN_NAME, CHARA_PLAYER) + "、無茶しない程度に頑張れよ。", "Because of requests, to test their own power, to satisfy their curiosity, or even for the sake of the world... They all have their own reasons, but the most powerful of the adventurers are heading for the deepest level of the Cradle of Chaos. I think you have a shot at being the first to make it as well. Give it your all, but don't act too rashly."), strbye
			goto *chat_end
		}
		if ( gdata(GDATA_FLAG_MAIN) >= 760 ) {
			if ( gdata(GDATA_FLAG_DIALOG_LEOLD) == 100 ) {
				chatMore lang("実はAO-Iには隠された機能があったんだ。本当は時間がある時にでも見せたかったんだが…。ブツを神の間に置いておくことになってしまったから無理だ。悪いな。", "Sorry, this is untranslated sentence.")
			}
			if ( gdata(GDATA_FLAG_DIALOG_LEOLD) < 100 ) {
				chatMore lang("…うん。お前に気の利いたことでも言おうと考えていたんだが、特に思いつかなかったぞ。", "Sorry, this is untranslated sentence.")
				gdata(GDATA_FLAG_DIALOG_LEOLD) = 100
			}
		}
		if ( gdata(GDATA_FLAG_MAIN) >= 455 & gdata(GDATA_FLAG_MAIN) < 760 ) {
			chatMore lang("しかしこの量産型が受けた空間固定、データを見る限りとても興味深い…次元歪曲航法を応用すれば理論的には再現できそうだ。", "This data we've received from the mass produced melugast is really quite interesting... Theoretically, I think we can replicate the demon's spatial binding powers with our dimensional navigation technology.")
			chatList 1, lang("…", "...")
			chatList 0, lang("次元歪曲航法って？", "What is this dimensional navigation technology?")
			buff = lang("追加武装という形でなんとか搭載を…。", "Perhaps we can deploy this as an additional system on the...")
			gosub *chat_select
			if ( chatval == 0 ) {
				chatMore lang("ああ！", "Ah!")
				chatMore lang("次元歪曲航法について聞きたいか！よし…長くなるから端折って説明してやろう。", "You want to learn about our dimensional navigation technology?! Alright... This will take a while to explain, so take a seat.")
				chatMore lang("専門外だから魔法の詳しい原理はわからないが、ショートテレポートと帰還、この二つの魔法に似た現象を科学的に引き起こせると思えばいい。ここではそれぞれ空間歪曲方式、次元扉形成方式と分類させてもらう。", "Magic is outside of my expertise so I don't really know the fundamentals behind them, but I believe you could consider it a scientific phenomenon similar to Teleport or Return magic. We could classify all of these as spatial distortion systems, and in the case of Return, specifically a dimensional door system.")
				chatMore lang("そもそも普通に空間を歪曲させて移動しようとすると、エーテル波の影響で空間均衡が崩れ、移動距離の２乗に比例した大きさの揺らぎが生じる。結果として、予定と異なる方向・距離の地点に出てしまう。ズレが大きくなるだけじゃないぞ、歪曲に使うエネルギーも大きくなる。結論を言えば、空間歪曲方式で正確に長距離を移動することは非常に困難だ。", "When moving using the effect of spatial distortion, the spatial equilibrium in an area proportional to the distance traveled squared collapses due to the effect of ether waves. As a result, you won't always appear at the point - or even the direction - you had planned to travel to. Not only does this distortion grow with distance, but the amount of energy required grows as well. To spare you the rest of the details, accurate travel over long distance with spatial distortion techniques is incredibly difficult.")
				chatMore lang("次元歪曲航法ではこれを逆手に取っている。揺らぎが小さくなるよう限りなく短い距離を、移動座標をコンピュータで矯正しながら瞬間的にテレポートし続けることで、物体や力場等を擬似的に「すり抜けて移動」できる。ロストイルヴァ周囲に張り巡らされている結界を突破するのに使っているのもこの機能だ。システム負荷の関係上、連続使用は数１０ｍが限度のため地中を潜らせたりはできないが。", "Our dimensional navigation uses this to our advantage. In order to create the minimum distortion possible, each hop is infinitely short. The onboard computer makes corrections for any slips that occur, allowing for near instant constant teleportation even through force fields. This is how it's capable of breaking through the barrier that surrounds Lost Ylva. The maximum distance you can travel before the system overloads is about 10m, so it's not much use for traveling underground.")
				chatMore lang("さて、話はまだ半分だ。続いて次元の扉を形成する方式について話そう。こちらは正確に長距離を移動できる反面、移動先まで続く安定したゲートを形成できる環境が必要になる。つまり、特定地点への移動にしか使えないということだ。", "Okay, I think we're about halfway done. Now let's talk about dimensional doors. These methods allow for accurate teleportation even across long distances, but it requires the capability to form a stable gate at the destination. In other words, it means you can only really teleport to specific points.")
				chatMore lang("帰還の魔法等の移動先がどのような理によって定められているのかは知らん。気まぐれな時空の管理者とやらが関係しているのかもしれないな。", "As I said though, I don't exactly know the principles behind magic such as Return. Perhaps it uses some kind of... wibbly-wobbly timey-wimey stuff.")
				chatMore lang("次元歪曲航法では設置した転移拠点へと移動できるようになっているが、これには膨大なエネルギーが必要でな。移動者側からでなく拠点側からエネルギーを供給することで次元の扉を形成している。それでも現時点ではエネルギー供給装置がかなり大型化してしまうため、基地ぐらいにしか設置していない。小型の供給装置が開発できれば、転移拠点を森にでも隠しておいて伏兵を出すのに使えるかもしれないが。それでも移動したい先にあらかじめ装置を設置しなければならないので、攻めるのには向いていない。", "Our spatial navigation system can perform the same sort of teleportation to a specific point, but it requires a massive amount of energy. The dimensional door is supplied energy not from the side of the person teleporting, but from the destination point. Because of the size of the energy storage equipment that's required, we can only install these at our bases. If we can develop smaller energy devices, we might can use them for portable systems or even to set up ambushes. Even then it requires the equipment to be set up beforehand, so it's not really suitable for most offensive maneuvers.")
				chatMore lang("以上、空間歪曲方式と次元扉形成方式を併せ持つ航法のため、次元歪曲航法と命名したところだ。これは現時点でイェルスの専売特許…と言いたいところだが、成果品の一部が他国に流出しているという噂がある。本国の研究所はスパイ探しに躍起になってるって話だ。原理が理解できなくても「機械を使う」ことはできるからな、他国に利用される可能性はあるだろう。使いこなせるかは別としてな。", "Anyways, this capability of performing both dimensional distortion and dimension door techniques is how we ended up naming our system \"Dimensional Navigation\". Yerles are the only ones capable of this at the moment... Or so I'd like to say, but there are rumors that some of our technology has leaked onto the black market. Our own agents are desperately looking for the spies. Since there's no requirement to understand the principles behind it, it's possible that other nations could use the technology. Though whether they could master it is another matter..")
				chatList 2, lang("ああ！", "Yeah!")
				chatList 1, lang("いや？", "No?")
				chatList 0, lang("ＺＺＺ…", "Zzzz...")
				buff = lang("…すまん。かなり色々省いて、手短に説明したつもりなんだが。やっぱり長かったか…？", "...Sorry. I tried to omit most of the details to keep it short. Was it still too long...?")
				gosub *chat_select
				if ( chatval == 0 ) {
					chatMore lang("うむ。傷つくな…これは。", "...That hurts.")
				}
				if ( chatval == 2 ) {
					chatMore lang("はは、口頭で説明するのは難しいものだな。", "Hahah, sorry. It's hard to explain in words.")
				}
				if ( chatval == 1 ) {
					chatMore lang("おお、そうか！もっと長くしても大丈夫ということだな。", "Ah, great! Next time I'll go into more detail then.")
				}
				goto *chat_end
			}
		}
		if ( gdata(GDATA_FLAG_MAIN) == 450 ) {
			chatMore lang("おっと、来てくれたか" + cdatan(CDATAN_NAME, CHARA_PLAYER) + "。お前が一番メルガストに慣れてるってことで推薦させてもらったぞ。まぁ…その、あれだ。他に知り合いで頼れる冒険者がいなかったというのもある。", "Oh, there you are, " + cdatan(CDATAN_NAME, CHARA_PLAYER) + ". You're probably the most familiar with the Melugast, so I recommended you. Well... And, you know, that there's no other adventurers we know we can rely on.")
			chatMore lang("他の知り合いの冒険者たちは…あの日、レミード遺跡最下層で全滅してしまったからな…。", "The other adventurers we trusted... Got wiped out that day on the bottom floor of Remido...")
			chatList 2, lang("仕方ないね", "Guess I don't have a choice.")
			chatList 1, lang("内容による", "Depends. What is it?")
			chatList 0, lang("頼まれてくれない", "Not a chance.")
			buff = lang("というわけで、ひとつ頼まれてくれないか？個人的に報酬は出すし、軍から報酬が出るぞ。", "Anyways, will you take on our request? I'll reward you personally, and you'll get an additional reward from the army as well.")
			gosub *chat_select
			if ( chatval != 1 & chatval != 2 ) {
				chatMore lang("そうか？駄目か…。", "Really? Then there's no hope..."), strbye
				goto *chat_end
			}
			chatMore lang("じゃあ説明するぞ。…混沌の巨城の最深部へ向かっていた量産型メルガストが、全機まとめて１０層で行動不能に陥った。移動が不可能なだけで、観測データ受信に問題は生じていないのだが、現在は空間に完全固定されたような状態でな。量産型には、階層と結界の突破時のみ次元歪曲航法を使用するようプログラムしてあるため、どうにもならない。", "Let me explain... We sent in several mass-produced Melugast into the Cradle of Chaos, but they've all been incapacitated on the 10th floor. They can't move, but we're still receiving data. They seem to just be locked in place somehow. Since these models are programmed to only use dimensional navigation when bypassing the barrier and entering the Cradle, they're completely helpless in this situation.")
			chatMore lang("同階層に魔物の姿があるのだが、こいつの攻撃を受けたのが原因だ。お前にはその魔物を倒してきてもらいたい…ああ、安心しろ。すでに対策を用意してあるからな。お前が動けなくなる心配はない。", "There's a demon there on the same floor, and it appears he is the source of the problem. I want you to go and defeat that demon... Ah, but don't worry. We've already prepared a countermeasure. There's no need to fear that you'll become unable to move.")
			chatMore lang("奴の空間干渉パターンは量産型から得られたデータで把握済みだ。この装置は奴の干渉を検知すると、近くのメルガストのシステムを外部から強制的に発動させる。周囲の空間を一時的に歪ませて、干渉の94％を逸らしてくれる上、近づけば量産型メルガストたちも行動可能になるだろう。なに、ちょっとした次元歪曲航法の応用だ。", "We were able to analyze the demon's spatial intervention powers with the data returned from the Melugasts. When this device detects his powers, it'll forcibly activate the spatial navigation systems of all nearby Melugast. The surrounding space will temporarily warp, and the Melugast should be able to move again. We predict an efficiency of about 94%. Nothing to it.")
			txt lang("[Ｄジャマー]を持たされた。", "You obtain the [Distortion Jammers]!")
			chatMore lang("パルミアから貰った資料によると、混沌の巨城７層の階段が混沌の力で塞がれているとの話だったが。先ほど試作型を偵察に行かせたところ、そのような状況は見られなかった。もしお前が行った時に塞がれているようであれば、その時は試作型に乗って突破してくれ。", "According to the data we received from Palmia, the stairs of the 7th floor of the Cradle of Chaos were sealed with the power of Chaos. When we recently sent out our test models to scout it out, we didn't notice any such barrier. If it's active when you arrive, just hop on one of the test models to break through.")
			chatMore lang("ああ、これも言っておかないとな。パルミアのエリステア女史にこそ確認していないが、特徴から察するに相手は各地に現れた悪魔と同種で間違いないと思う。なぜそいつだけ街や軍事施設ではなく巨城の中にいるのかよくわからんが、番人のような存在なのだろうか？", "Ah, and let me say this too. We haven't confirmed it with Lady Erystia in Palmia, but we're quite certain this demon is of the same type as the others that have been appearing around the world. I'm not sure why it'd be in the Cradle of Chaos since it's not a city or military installation, but maybe it's some type of guard?")
			gdata(GDATA_FLAG_MAIN) = 455
			txt_questupdate
			goto *chat_end
		}
		if ( gdata(GDATA_FLAG_MAIN) >= 390 & gdata(GDATA_FLAG_MAIN) < 450 ) {
			chatMore lang("何十体ものモンスターに襲撃されたが、俺のイェルスードは伊達じゃない。大群をバッサバッサ斬り捨てていく勇姿をお前にも見せてやりたかった。", "We've been attacked by hundreds of monsters, but my Yerleswood isn't just for show. I was hoping I'd get to show you it slicing its way through the hordes of monsters.")
		}
		if ( gdata(GDATA_FLAG_MAIN) == 366 ) {
			chatMore lang("どうやら上手くいったようだな。突入実験を早めた甲斐があったというものだ。", "Looks like everything went well. I suppose it was worth it to rush through that experiment.")
			chatMore lang("…テスカトリポカ、だったな。浮遊大陸へ飛ばされた者は大勢いるが、直前にメッセージがあったケースは今回が初めてだ。浮遊大陸への召喚を行っているのが奴なのかは定かでないが、シエラ・テールの滅亡に関しては防がなくてはならん。俺の研究開発に支障が出るからな。", "...Tezcatlipoca. Many people have been taken to the floating continent, but this is the first time we've been sent a message from there. It's unclear why people are being summoned to the floating continent, but if it's related to the destruction of Sierre Terre, it must be stopped. That would get in the way of my research.")
			chatMore lang("イェルス本国はメルガストを量産し、神の間とやらに攻め込むつもりだ。俺も対応で忙しくなるだろう。お前の乗ってきた試作型だが、現在は風の山道頂上に隠してある。あれで浮遊大陸とを行き来し、独自に調査を進めてくれ。試作型とはいえ、本国の作戦に関わる以上堂々と一介の冒険者に使わせるわけにはいかないんだ。", "The Yerles high command is intending to use mass produced Melugast to invade The Eternal Seal, so I'm going to be busy with correspondence. I have a prototype you can ride, but it's hidden up in the mountains. You can use that to travel back and forth and continue your investigation. Even if it is only a prototype, I can't just openly involve adventurers in the high command's plan.")
			gdata(GDATA_FLAG_MAIN) = 367
			goto *chat_end
		}
		if ( gdata(GDATA_FLAG_MAIN) >= 320 ) {
			item_find ITEM_ID_AWESOME_SWIMWEAR, 3, 1
			if ( stat != (-1) ) {
				ci = stat
				if ( inv(INV_ITEM_NUM, ci) >= 1 ) {
					chatMore lang("ん？それは開発中止になった特殊スーツ…地下に保管してあったはずだが、何故お前が持っているんだ？", "Hmm? That's a special suit that we stopped development on... But it should be kept underground. Why do you have it?")
					chatMore lang("いや、そんなことはどうでもいいか。今は重要じゃないな。…その装備が未完成であることは知っているな？設計した以上はいつか完成させてみたいと思っていたんだよ。", "Well, that's of no importance... Don't you feel it's incomplete? As the designer, I was hoping to finish it some day.")
					if ( cdata(CDATA_PLATINUM, CHARA_PLAYER) >= 30 ) {
						chatList 3, lang("プラチナ硬貨30枚を渡す", "(Hand over 30 platinum)")
					}
					if ( cdata(CDATA_PLATINUM, CHARA_PLAYER) >= 20 ) {
						chatList 2, lang("プラチナ硬貨20枚を渡す", "(Hand over 20 platinum)")
					}
					if ( cdata(CDATA_PLATINUM, CHARA_PLAYER) >= 3 ) {
						chatList 1, lang("プラチナ硬貨3枚を渡す", "(Hand over 3 platinum)")
					}
					chatList 0, lang("考えておく", "Let me think about it.")
					buff = lang("仕上げの特殊加工にはプラチナを大量に必要とする。完成品をお前にやるからプラチナを譲ってくれないか？そうだな、プラチナ硬貨に換算して30枚くらいあれば間違いないだろう。", "I'll need a lot of platinum for the refining process. Since you'll be getting the final product, why don't you put up the platinum? I think it'll require about 30 platinum coins' worth.")
					gosub *chat_select
					if ( chatval == 3 ) {
						if ( ibit(ITEM_BIT_NO_DROP, ci) ) {
							snd SOUNDLIST_FAIL1
							txt_nodrop
							goto *chat_end
						}
						if ( inv(INV_ITEM_EQUIP, ci) != 0 ) {
							snd SOUNDLIST_FAIL1
							txt lang("装備から外す必要がある。", "You will need to remove it from the equipment.")
							goto *chat_end
						}
						snd SOUNDLIST_PAYGOLD1
						inv(INV_ITEM_NUM, ci) -= 1
						cdata(CDATA_PLATINUM, CHARA_PLAYER) -= 30
						chatMore lang("よし、すぐに完成させるからちょっと待ってろ。", "Alright. It won't take but a minute.")
						redraw 0
						gosub *screen_draw
						gosub *screen_fade
						gsel 4
						pos 0, 0
						picload exedir + "graphic\\face1" + devfile + ".bmp", 1
						gsel 0
						chatMore lang("いやぁ、自分で言うのもなんだがいい出来だ！ほら、持って行け。", "I don't want to brag, but I think it turned out very good! Go on, take it."), strbye
						flt
						itemcreate -1, ITEM_ID_WAR_SUIT, cdata(CDATA_X, CHARA_PLAYER), cdata(CDATA_Y, CHARA_PLAYER), 0
						txt_questitem
						goto *chat_end
					}
					if ( chatval == 2 ) {
						if ( ibit(ITEM_BIT_NO_DROP, ci) ) {
							snd SOUNDLIST_FAIL1
							txt_nodrop
							goto *chat_end
						}
						if ( inv(INV_ITEM_EQUIP, ci) != 0 ) {
							snd SOUNDLIST_FAIL1
							txt lang("装備から外す必要がある。", "You will need to unequip it.")
							goto *chat_end
						}
						snd SOUNDLIST_PAYGOLD1
						inv(INV_ITEM_NUM, ci) -= 1
						cdata(CDATA_PLATINUM, CHARA_PLAYER) -= 20
						chatMore lang("少し足りないな…だがこれ以上は払えないというのなら仕方あるまい。やれるだけやってみよう。", "That's not quite enough, but... If you don't have any more, it'll have to do. Let me give it a try.")
						redraw 0
						gosub *screen_draw
						gosub *screen_fade
						gsel 4
						pos 0, 0
						picload exedir + "graphic\\face1" + devfile + ".bmp", 1
						gsel 0
						chatMore lang("すまん、やはり失敗した。劣化したうえに少し縮んでしまったな…。", "Sorry, but it was a failure. Not only has it dropped in quality, but it shrunk as well..."), strbye
						flt
						itemcreate -1, ITEM_ID_DANGER_SWIMWEAR, cdata(CDATA_X, CHARA_PLAYER), cdata(CDATA_Y, CHARA_PLAYER), 0
						txt_questitem
						goto *chat_end
					}
					if ( chatval == 1 ) {
						chatMore lang("…？", "...?")
						chatMore lang("あ。ゼロがひとつ足りないぞ、とツッコんでもらいたかったのか？", "Ah. Did you hope to get me to say you were missing \"one zero\"?")
						chatMore lang("なんかその…悪かったな。", "I'm not... into that kind of humor."), strbye
						goto *chat_end
					}
					goto *chat_end
				}
			}
		}
		if ( gdata(GDATA_FLAG_MAIN) == 315 ) {
			chatMore lang("なるほど、これなら充分すぎるくらいだ。よくやった、ちょっと待ってろよ。あとはこいつを組み込むだけなんだ。", "I see. You did well; this is more than enough. Hold on just a moment. Let me just integrate this crystal real quick.")
			redraw 0
			gosub *screen_draw
			gosub *screen_fade
			gsel 4
			pos 0, 0
			picload exedir + "graphic\\face1" + devfile + ".bmp", 1
			gsel 0
			chatMore lang("…。", "...")
			chatMore lang("…できたぞ！さぁ持って行け。で、こっちの残りは軍用に、っと。軍は強力な機械兵士を開発して怪物と戦わせるつもりでな、しばらくは動けそうにないから当てにしないことだ。", "...It's done! Go on, take it. The remainder will be put to use for the military. We're developing a powerful mechanized soldier to fight the monster, but it won't be functional for a while, so don't count on receiving help from it."), strbye
			txtef COLOR_GREEN
			txt lang("[エーテルブラスター]を手に入れた！", "You obtain the [Ether Blaster]!")
			snd SOUNDLIST_COMPLETE1
			gdata(GDATA_FLAG_MAIN) = 320
			txt_questupdate
			goto *chat_end
		}
		if ( gdata(GDATA_FLAG_MAIN) == 290 ) {
			chatMore lang("…無事だったか" + cdatan(CDATAN_NAME, CHARA_PLAYER) + "。先行していた調査部隊が全滅したと聞いて、正直心配していた。有能な助手を失うのは勘弁だからな。", "...So you made it out alive. After hearing that the investigation unit ahead of you had been wiped out I was worried. Losing a capable assistant would be a terrible thing.")
			chatMore lang("助手になった覚えはない？まぁいいじゃないか。調査部隊が遺したデータを解析してわかったんだが…最下層に巣くう怪物を完全に倒すには、弱ったところに超高純度のエーテルをぶち込むしかないようだ。", "You don't recall becoming my assistant, you say? Well, don't worry about it. Anyways, I've analyzed the data left behind by the investigation unit and have made a discovery... In order to defeat the monster on the lowest level of Remido, you'll need to fling exceptionally pure ether at it once it becomes weak.")
			chatMore lang("ここから北東…エイレルの南東といったほうがわかりやすいか？そこの山岳地帯に強力なエーテル反応が確認されている。エーテルの根源を発見し、可能であれば回収してきてくれ。周囲に気化したエーテルが充満しているから抗体は多めに持っていくべきだぞ。", "If you travel northeast from here... Or maybe \"southeast of Eirel\" would be easier to understand? Anyways, we've discovered a strong ether reaction in the mountains there. Discover the cause of this and collect some of the ether in this capsule if you can. Due to the high concentration of ether in the air there you should probably take some potions of cure corruption with you."), strbye
			txtef COLOR_GREEN
			txt lang("[回収用カプセル]を手に入れた！", "You obtain the [Recovery Capsule]!")
			snd SOUNDLIST_COMPLETE1
			gdata(GDATA_FLAG_MAIN) = 295
			txt_questupdate
			goto *chat_end
		}
		if ( gdata(GDATA_FLAG_MAIN) == 281 ) {
			chatMore lang("そろそろ戦闘データも集まった頃だと思ってな。…よし、ちゃんと記録されているな。データを吸いだしてっと…また頼むぞ。", "It's about time to look at the combat data you've collected so far... Alright, I've got it. Once you've gotten some more... I'll call you again.")
			chatMore lang("そうそう、こいつは超兵士を作るために細胞を培養していたら偶然できた代物でな。興味もないし廃棄する予定だったんだが、もしかしたらお前が欲しがるかと思ってとっておいたのさ。遠慮せずに持って行け。", "Oh yes, this was a side-product of cultivating the cells we use to engineer super soldiers. There was no interest in it so I had planned to throw it out, but I thought you might want to have it instead. Go on and take it."), strbye
			flt
			itemcreate -1, ITEM_ID_FORBIDDEN_MEAT, cdata(CDATA_X, CHARA_PLAYER), cdata(CDATA_Y, CHARA_PLAYER), 3
			gdata(GDATA_FLAG_MAIN) = 282
			txt_questupdate
			goto *chat_end
		}
		if ( gdata(GDATA_FLAG_MAIN) == 266 ) {
			chatMore lang("ご苦労。…うむ、派手にやったなお前。データが欠損してやがる。こうなったら、代わりにお前にデータ収集をしてきてもらうぞ。", "Sorry for the trouble... Well, looks like you busted it. The data is gone. In that case, you'll just have to gather the data instead."), strbye
			txt lang("新しい[データレジスタ]を無理矢理持たされた…。", "You obtain a new [Data Register]!")
			gdata(GDATA_FLAG_MAIN) = 267
			txt_questupdate
			goto *chat_end
		}
		if ( gdata(GDATA_FLAG_MAIN) == 240 ) {
			chatMore lang("確かにブツは受け取った。ほら、カードキーだ。調査部隊が使っているカードキーはまた別に指紋や声紋も照合するんだが、こいつは特別製だからその辺を省略できるぞ。冒険者はよく変異して体質が変わるからな、こっちのほうが都合がいいだろう。そうだ…おまけでこの像もやろう。", "Those are certainly the items I was looking for. Here, take your card key. The card key that the investigation unit carries uses both fingerprint matching and voice recognition for authentication, but this card is special. You won't have any need for all that. Since adventurers undergo so many changes on their travels, this will be far more convenient. Oh yes... and take this statue as well."), strbye
			gdata(GDATA_FLAG_MAIN) = 250
			gdata(GDATA_FLAG_MAIN_DATA_CHIP) = 2
			gdata(GDATA_FLAG_MAIN_CHAOS_WINGS) = 2
			gdata(GDATA_FLAG_MAIN_ANKH) = 2
			txtef COLOR_GREEN
			txt lang("[カードキー]を手に入れた！", "You obtain the [Card key]!")
			snd SOUNDLIST_COMPLETE1
			flt
			itemcreate -1, ITEM_ID_STATUE_MANI, cdata(CDATA_X, CHARA_PLAYER), cdata(CDATA_Y, CHARA_PLAYER), 0
			txt_questcompleted
			txtmore
			txt_questitem
			txt_questupdate
			goto *chat_end
		}
		if ( gdata(GDATA_FLAG_MAIN) == 220 ) {
			chatMore lang("将軍からさっき通信で聞いたよ。お前がレミードに潜りたがってる馬鹿だな。いいぞ、そういう馬鹿は嫌いじゃない。調査部隊に加わるかどうかに関係なく、個人的に協力してやろう。ただしちょっとしたおつかいをやってくれたら、だがな。その気になったらまた来い。", "So you must be the fool that wants to enter Remido. I've already heard all about it from the general. Good - I don't dislike fools at all. I'd like to cooperate with you personally, regardless of if you join the investigation unit or not. I won't be sending you on trifling tasks, however. Speak to me again if you're determined to go."), strbye
			gdata(GDATA_FLAG_MAIN) = 223
			goto *chat_end
		}
		if ( gdata(GDATA_FLAG_MAIN) >= 223 & gdata(GDATA_FLAG_MAIN) <= 330 ) {
			buff = lang("よう、" + cdatan(CDATAN_NAME, CHARA_PLAYER) + "。お前は面白そうだからな。何か用があるなら俺の貴重な時間を割いてやるぞ。", "Yo, " + cdatan(CDATAN_NAME, CHARA_PLAYER) + ". You're quite the amusing fellow. If you've got anything important I'll spare some of my precious time for you.")
			chatList 7, lang("装備部位を増やしたい", "I want to increase my equipment slots.")
			chatList 6, lang("レミードについて", "I want to know more about Remido.")
			chatList 5, lang("任務について", "Tell me about my task.")
			if ( gdata(GDATA_FLAG_MAIN) >= 223 & gdata(GDATA_FLAG_MAIN) < 240 ) {
				chatList 3, lang("機械要塞について", "Tell me about the Machine Fortress.")
				chatList 2, lang("異形の神殿について", "Tell me about the Temple of Chaos.")
				chatList 1, lang("黄泉の谷について", "Tell me about the Valley of Hades.")
			}
			chatList 0, strbye
			chatesc = 1
			gosub *chat_select
			if ( chatval == 7 ) {
				goto *chat_unique_leold_limb
			}
			if ( chatval == 6 ) {
				chatMore lang("レミードは一般にはネフィアと混同されているが、オリジナル部分はネフィアではなく旧文明の施設だ。…オリジナルというのはだ、レミードは数百年単位で周囲の土地を取り込んでいてな。地上からスキャンしたところ、最下層以外はすべて周囲から吸収し再構築したものだと判明した。そして数千年後にはこの大陸全土が飲み込まれる計算だ。", "While Remido is typically mistaken as a ruin of Nefia, it was originally a facility from a different ancient civilization... I say originally, because it's been absorbing and reconstructing its surroundings for the past few hundred years. Through scanning from the surface, we were able to ascertain that everything but the bottom floor is a result of this process. And from our calculations it will swallow this continent and everything else in a few thousand years.")
				chatMore lang("名前からも推測はつくだろうが、あれはレム・イド文明時代に建造された研究施設だ。レム・イドは生化学の発達した文明…おそらく研究していた何かが暴走した結果だろう。", "You've likely already guessed it from the name, but the facility was built during the civilization of Rehm-Ido, an era in which biochemistry flourished... It's quite possible that this is the result of some experiment gone haywire.")
				chatMore lang("軍の上層部はそいつを制御し、あわよくば兵器転用するつもりだ。そこまでして一体何と戦うのかって？戦うためだけじゃない。利益になりそうなものがあれば取り入れたくなる。うちの民族の気質だな。", "The ruins are being controlled by the upper echelons of the army, and they plan to militarize it if things go well. Do you wonder who would go so far for a weapon? But you see, it's not just for a weapon. If there is anything of that may be of benefit, we want to take it. That is the spirit of our nation.")
				chatMore lang("護衛の件で活躍しようものならお前も軍にスカウトされるだろうな。自由気ままに冒険を続けたいなら、遺跡にも軍にも取り込まれないよう注意することだ。", "If you distinguish yourself as a bodyguard, then you too may be scouted by the military.")
				goto *chat_unique
			}
			if ( chatval == 5 ) {
				if ( gdata(GDATA_FLAG_MAIN) >= 290 ) {
					chatMore lang("最下層にいる怪物はメシェーラの塊だ。貴重なサンプルだから滅ぼすのは少し惜しいが…。", "The monster on the bottom floor is a mass of Meshera. It's a precious specimen. It's a shame we have to destroy it...")
					goto *chat_unique
				}
				if ( gdata(GDATA_FLAG_MAIN) >= 250 ) {
					chatMore lang("一応お前の任務は調査部隊の護衛ってことになってるからな。早く行って追い付いたほうがいいと思うぞ。そうそう、遺跡で何か面白そうなものを見つけたら俺に教えてくれ。", "You're nothing but a guard for the investigation team for now, so you should probably go catch up with them. Oh yes, and let me know if you find anything interesting in the ruins.")
					goto *chat_unique
				}
				chatMore lang("任務ってほどじゃないが…手伝いをしてもらおうか。俺が指定したデータやサンプルを回収してきてくれ。軍が危険防止のために設けた電子ロック、そいつを解除できるカードキーを発行してやるからさ。", "It's not necessarily your duty, but... perhaps I'll have you lend me a hand. Please collect the data and retrieve the samples I have specified. If you do this for me, I'll give you a card key to get past the electronic lock on Remido.")
				goto *chat_unique
			}
			if ( chatval == 3 ) {
				chatMore lang("湖の近辺にうちの軍が建造した機械要塞があるんだが、だいぶ前に地殻変動によってネフィアと融合してしまった。そして融合時のショックで制御システムが暴走したみたいでな、連絡もとれやしない。", "There is a Machine Fortress that the Yerles military built near the lake to the southeast, but it has fused with a ruin of Nefia due to the crustal movement of the planet. When this fusion happened, it drove the control system haywire and we lost all contact with the fortress.")
				chatMore lang("こちらも何度か兵士を送り込んだのだが、要塞の防衛システムに阻まれことごとく失敗してな。軍は要塞を破棄することにしたようだ。だが俺はどうしてもシステムに蓄積されたデータを回収したいのだ。もったいないからな。", "Troops have been sent in several times, but they've all been defeated by the fortress' defense systems. I absolutely cannot let the data accumulated by the system there go to waste.")
				chatMore lang("そこでだ。要塞中枢に投げ出されていると思われる大型飛行兵器の頭部から、データチップを抜き取り持ってきてもらいたい。それ以外のパーツは好きにしてかまわんぞ。ちょっと加工すれば装備品にできるパーツもあるはずだしな。", "So. There is a large flying weapon in the center of the fortress. I'd like for you to remove its data chip. Nothing else there is of any importance. If you're careful, you should even be able to salvage some equipment from the weapon.")
				goto *chat_unique
			}
			if ( chatval == 2 ) {
				chatMore lang("北東の山岳地帯手前に、異形の者が支配する神殿がある。最深部には外法で強化されたモンスターどもが待ち受けているらしい。", "Near the mountains to the northeast there is a Temple of Chaos. I expect that powerful enemies and the ruler of the Temple reside in its depths.")
				chatMore lang("そこの親玉、《エグゾシズル》の翼を研究したくてな。ちょっと翼をもいできてくれ。６枚全部だぞ。", "I want to study <Exossil> The Chaos Wing - the ruler of the place.")
				chatMore lang("魔法のことはよくわからんが、色々と厄介な攻撃を仕掛けてくることが予想される。十分に注意しろ。", "I don't know exactly what you should expect, but be prepared to defend yourself against powerful magic. Be careful.")
				goto *chat_unique
			}
			if ( chatval == 1 ) {
				chatMore lang("サウスティリス極東の農村…ルードゥスのそのさらに東、ザナンとの国境近くの砂漠に、死者の眠る谷がある。階層こそ少ないが、表層には侵入者を惑わす罠が満載らしい。", "Far to the east of here you'll find a rural village - called \"Ludus\", I think. Even further to the east, across the desert and near the border of Zanan, you'll find a valley where the dead sleep. It's not a particularly deep area, but it's full of traps.")
				chatMore lang("その奥にいると言われる《アヌビス》は太陽の光を操るアンクを所持しているらしい。そいつを研究したいんでな、回収してきてくれ。", "Supposedly <Anubis> resides there, carrying an Ankh that allows for the manipulation of light. I want to study it, so bring it to me.")
				chatMore lang("砂漠は道を迷いやすい上に日中はスタミナを大きく消耗する。遭難したくなければ日中の移動は避け、迷ったら慌てずに混乱が解けるまで待て。シェルターを用意していくといいかもしれんな。谷の内部はアンデッドまみれらしいから火炎攻撃が重宝するだろう。ただ、呪いをかけてくる連中も多いはずだ。対策を練ってからのほうが賢明だろうな。", "Not only is it easy to lose your way in the desert, but traveling during the day will greatly sap your stamina. It would be best if you avoided traveling there during the day, and stop to rest if you become confused. It might not be a bad idea to prepare a shelter. You can expect there to be many undead inside, so fire attacks will work well. You should also expect to be cursed, so bring countermeasures.")
				goto *chat_unique
			}
			goto *chat_end
		}
		if ( gdata(GDATA_FLAG_MAIN) < 220 ) {
			chatMore lang("誰だか知らんが邪魔しないでくれ。", "I don't know who you are, but don't get in my way."), strbye
			goto *chat_end
		}
		chatList 1, lang("別に…", "No problem.")
		chatList 0, lang("装備部位を増やしたい", "I want to increase my equipment slots.")
		buff = lang("どうした" + cdatan(CDATAN_NAME, CHARA_PLAYER) + "？何か用か？", "What is it, " + cdatan(CDATAN_NAME, CHARA_PLAYER) + "? Do you need something?"), strbye
		gosub *chat_select
		if ( chatval == 0 ) {
			goto *chat_unique_leold_limb
		}
		goto *chat_end
	}
	if ( _switch_val == CREATURE_ID_SIRAHA_THE_WHITE_CLOTH | _switch_sw ) {
		_switch_sw = 0
		if ( gdata(GDATA_FLAG_SUB_MONOCHROME_DELIVERY_SERVICE) == 0 ) {
			chatList 1, lang("いいよ", "Sure.")
			chatList 0, lang("だめ", "Not a chance.")
			buff = lang("ねぇ" + _onii(cdata(CDATA_SEX, CHARA_PLAYER)) + "さんって冒険者だよね？この前お友達がノースティリスのパルミアってところに引っ越したんだけど、その友達に手紙を届けて欲しいんだ！", _onii(cdata(CDATA_SEX, CHARA_PLAYER)) + ", you're an adventurer right? My friend who used to live here moved to Palmia in North Tyris. I want you to deliver a letter to her.")
			gosub *chat_select
			if ( chatval != 1 ) {
				chatMore lang("えー…じゃあどうしよう。", "Ehh... What am I going to do then..."), strbye
				goto *chat_end
			}
			txt_questupdate
			chatMore lang("わーい。ありがとう" + _onii(cdata(CDATA_SEX, CHARA_PLAYER)) + "さん♪", "Yay! Thanks a lot, " + _onii(cdata(CDATA_SEX, CHARA_PLAYER)) + "!"), strbye
			txt lang("手紙を預かった。", "You take the letter.")
			snd SOUNDLIST_EQUIP1
			gdata(GDATA_FLAG_SUB_MONOCHROME_DELIVERY_SERVICE) = 1
			gdata(GDATA_FLAG_SUB_MONOCHROME_DELIVERY_SERVICE_LETTER) = 2
			goto *chat_end
		}
		if ( gdata(GDATA_FLAG_SUB_MONOCHROME_DELIVERY_SERVICE_LETTER) == 1 ) {
			chatMore lang("え？ぼくに手紙？", "Huh? You have a letter for me?")
			chatMore lang("わぁい、ちょうどおなかすいてたんだ！ムシャムシャ…。", "Yay! I was just getting hungry! Munch munch munch...")
			chatMore lang("ハッ！？ど、どうしよう。クロンちゃんからのお手紙食べちゃった…。", "Mmgh?! O-oh no. I ate the letter that Kuron sent me...")
			chatMore lang("さっきの手紙のご用事なぁに、っと…。この手紙をクロンちゃんに渡して。もちろんタダじゃないよ。プラチナ硬貨あげるからお願い！", "Umm, let's see... Take this letter to Kuron. Not for free, of course. I'll pay you a platinum coin, so please bring it to her!"), strbye
			txt lang("手紙を預かった…。", "You take the letter...")
			snd SOUNDLIST_EQUIP1
			gdata(GDATA_FLAG_SUB_MONOCHROME_DELIVERY_SERVICE) = 2
			gdata(GDATA_FLAG_SUB_MONOCHROME_DELIVERY_SERVICE_LETTER) = 2
			flt
			itemcreate -1, ITEM_ID_PLATINUM_COIN, cdata(CDATA_X, CHARA_PLAYER), cdata(CDATA_Y, CHARA_PLAYER), 0
			goto *chat_end
		}
		if ( gdata(GDATA_FLAG_SUB_MONOCHROME_DELIVERY_SERVICE) == 1 | gdata(GDATA_FLAG_SUB_MONOCHROME_DELIVERY_SERVICE) == 2 ) {
			chatMore lang("ちゃんと友達にお手紙届けてね。友達はパルミアに住んでるクロンって子だよ。", "Please take the letter to my friend. Her name is Kuron, and she lives in Palmia.")
			goto *chat_end
		}
		goto *chat_end
	}
	if ( _switch_val == CREATURE_ID_KURON_THE_BLACK_CLOTH | _switch_sw ) {
		_switch_sw = 0
		if ( gdata(GDATA_FLAG_SUB_MONOCHROME_DELIVERY_SERVICE) == 2 | gdata(GDATA_FLAG_SUB_MONOCHROME_DELIVERY_SERVICE_LETTER) == 2 ) {
			chatMore lang("え？あたしに手紙？", "Huh? You have a letter for me?")
			chatMore lang("わぁい、ちょうどおなかすいてたの！ムシャムシャ…。", "Yay! I was just getting hungry! Munch munch munch...")
			chatMore lang("うメェー！ハッ！？ど、どうしよう。シラハくんからのお手紙食べちゃった…。", "Delicious! Mmgh?! O-oh no. I ate the letter from Shiraha...")
			chatMore lang("さっきの手紙のご用事なぁに、っと…。この手紙をシラハくんに渡して。もちろんタダじゃないよ。プラチナ硬貨あげるからお願い！", "Umm, let's see... Take this letter to Shiraha. Not for free, of course. I'll pay you a platinum coin, so please bring it to him!"), strbye
			txt lang("手紙を預かった…。", "You take the letter...")
			snd SOUNDLIST_EQUIP1
			gdata(GDATA_FLAG_SUB_MONOCHROME_DELIVERY_SERVICE_LETTER) = 1
			gdata(GDATA_FLAG_SUB_MONOCHROME_DELIVERY_SERVICE) = 3
			flt
			itemcreate -1, ITEM_ID_PLATINUM_COIN, cdata(CDATA_X, CHARA_PLAYER), cdata(CDATA_Y, CHARA_PLAYER), 0
			goto *chat_end
		}
		if ( gdata(GDATA_FLAG_SUB_MONOCHROME_DELIVERY_SERVICE_LETTER) == 1 ) {
			chatMore lang("ちゃんと友達にお手紙届けてね。友達はルードゥスに住んでるシラハって子だよ。", "Please take the letter to my friend. His name is Shiraha, and he lives in Ludus.")
			goto *chat_end
		}
		goto *chat_end
	}
	if ( _switch_val == CREATURE_ID_ALCHEMIST_NAPLUS | _switch_sw ) {
		_switch_sw = 0
		item_find ITEM_ID_PUFF_PUFF_BREAD, 3, 1
		if ( stat != (-1) ) {
			ci = stat
			if ( inv(INV_ITEM_NUM, ci) >= 1 ) {
				chatMore lang("ひっ！？そ、それは…ふかふかパ…い、イヤぁあああああ！お、お願いだから早くしまって！！！", "Hii?! T-that's... Puff-puff... N-Nooooooo! P-Please, get it away from me!"), strbye
				dmgcon tc, CONDITION_FEAR, 1000
				goto *chat_end
			}
		}
		if ( gdata(GDATA_FLAG_SUB_DOGS_TAIL) >= 1000 ) {
			chatMore lang("今度ネフィアに素材集めに行く時ボディガードとして雇わせてよ。時々、私の錬成したアイテムとかサービスするから、ね？", "You should let me hire you as my bodyguard the next time I go into a ruin of Nefia. I need to collect materials to synthesize items and provide services every once in a while, you know?"), strbye
			goto *chat_end
		}
		if ( gdata(GDATA_FLAG_SUB_DOGS_TAIL) == 3 ) {
			chatMore lang("それはエストークの尻尾！これで私は師匠を超えることができる…！", "That's Estork's Tail! Finally I can surpass my master...!")
			redraw 0
			gosub *screen_draw
			gosub *screen_fade
			gsel 4
			pos 0, 0
			picload exedir + "graphic\\face1" + devfile + ".bmp", 1
			gsel 0
			chatMore lang("…。", "...")
			chatMore lang("あ、お礼がまだだったね。これは私が前に錬成したアイテムだけど、よかったら使ってみて！", "Ah, right, your reward. These are some items I synthesized a while ago. Try them out."), strbye
			flt
			itemcreate -1, ITEM_ID_SMALL_MEDAL, cdata(CDATA_X, CHARA_PLAYER), cdata(CDATA_Y, CHARA_PLAYER), 3
			flt
			itemcreate -1, ITEM_ID_PHILOSOPHERS_STONE_MASK, cdata(CDATA_X, CHARA_PLAYER), cdata(CDATA_Y, CHARA_PLAYER), 3
			flt
			itemcreate -1, ITEM_ID_MUSIC_TICKET, cdata(CDATA_X, CHARA_PLAYER), cdata(CDATA_Y, CHARA_PLAYER), 800
			txt_questcompleted
			txtmore
			txt_questitem
			txt_questupdate
			gdata(GDATA_FLAG_SUB_DOGS_TAIL) = 1000
			goto *chat_end
		}
		if ( gdata(GDATA_FLAG_SUB_DOGS_TAIL) == 1 ) {
			chatMore lang("無理にとは言わないけれど、錬金術の発展のためにもぜひ協力して！", "I know it might be tough, but cooperation is the foundation of alchemy!"), strbye
			goto *chat_end
		}
		if ( gdata(GDATA_FLAG_SUB_DOGS_TAIL) == 0 ) {
			chatMore lang("ナプラスのアトリエにようこそ♪…ちょっとお願い聞いてくれる？", "Welcome to Naplus' Atelier~... Mind if I ask you a favor?")
			chatMore lang("私が錬成したいアイテムにどうしても必要な素材があって…それを取ってきてほしいな。素材はエストークの尻尾、サウスティリス南西端にある犬神の森の主を倒さないといけないの。", "There's something that I really want to synthesize, but I need a certain material... And I want you to get it for me. You'll need to defeat Estork in the Forest of Doggod in the southwest of the continent.")
			chatMore lang("本当は私が調達しに行くべきなんだけど…他の依頼で忙しいし、そもそもエストークは私が敵う相手じゃないんだ。とぉぉぉぉっても危険な依頼だけど、よかったら引き受けてほしいなーって。", "To be honest, I should be the one going to get the material... But I'm really busy with other requests, and I don't think I'm a match for Estork. It's a reaaallllllly dangerous request, but give it a go if you think you're up for it."), strbye
			gdata(GDATA_FLAG_SUB_DOGS_TAIL) = 1
			txt_questupdate
			goto *chat_end
		}
		goto *chat_end
	}
	if ( _switch_val == CREATURE_ID_GETUEI_THE_NINJA_MASTER | _switch_sw ) {
		_switch_sw = 0
		if ( gdata(GDATA_AREA) == AREA_CHAOS_CRADLE ) {
			chatMore lang("才能はあるのに修行を嫌がって何度も家出するもんだから、わざわざ死亡工作までして忍を抜けさせてやったというのに。まさか遊びながら我流で俺より強くなってしまうとはな…。お兄ちゃんは泣きたいぞ。立つ瀬がないぞ。", "Huh.")
			chatMore lang("…まぁ。反抗期の酷かった妹が、こうして俺を頼ってくれたのはすごく嬉しいがな！お兄ちゃん頑張っちゃうぞ。", "Huh."), strbye
			goto *chat_end
		}
		goto *chat_end
	}
	if ( _switch_val == CREATURE_ID_FASHIONABLE_KUNOICHI | _switch_sw ) {
		_switch_sw = 0
		if ( gdata(GDATA_AREA) == AREA_CHAOS_CRADLE ) {
			if ( gdata(GDATA_FLAG_MAIN) >= 540 ) {
				chatMore lang("表向きは、ファッションやおしゃべりを嗜む普通の女の子。しかし裏では、闇に紛れて人々のために忍術を振るう…。くぅ〜！これだよこれ！僕の理想のニンジャ・ライフスタイルは！", "Huh."), strbye
				goto *chat_end
			}
			if ( gdata(GDATA_FLAG_MAIN) == 535 ) {
				chatMore lang("あれれ…君もここに来てたの？そうか、冒険者だもんね。", "Huh.")
				chatMore lang("その節はありがとう。いつか、こっちから話しかけてお礼言わなきゃとは思ってたんだけど…。ほら、人前だと市民として振る舞わなきゃいけないからさ。", "Huh.")
				chatMore lang("実家の流派はあの時やめたんだけど、今はなんかいろいろ物騒だからさ。我流忍術で混沌と戦ってるんだ！我流は良いよ。どんな格好しても、規律だのなんだのと怒られないし最高だよ！", "Huh."), strbye
				gdata(GDATA_FLAG_MAIN) = 540
				goto *chat_end
			}
			goto *chat_end
		}
		goto *chat_end
	}
	if ( _switch_val == CREATURE_ID_EILA_THE_FUGITIVE_KUNOICHI | _switch_sw ) {
		_switch_sw = 0
		if ( cdata(CDATA_FAME, CHARA_PLAYER) < 80000 ) {
			chatMore lang("えーと…どちらさま？", "Umm... Who are you?"), strbye
			goto *chat_end
		}
		if ( gdata(GDATA_FLAG_SUB_LAW_OF_NINJAS) == 0 ) {
			chatMore lang("ふーん…君、強そうだね。君になら頼めるかも。", "Hmm... You're strong, aren't you? You might be able to help me out.")
			chatList 1, lang("御意", "With pleasure.")
			chatList 0, lang("無理でござる", "Impossible.")
			buff = lang("僕の兄さん、忍者軍団の頭領やってるんだけどさ。もう融通がきかないのなんのって！僕が忍者やめたいっていくら言っても、機密がどうのこうのの一点張りなんだ…。もうあんな頑固者、兄だとも思わない！ちょっとうちの忍者軍団ごとぶっとばしてきてよ！", "My older brother is the head of a group of ninjas. But he's so stuck on tradition! I stopped telling him that I don't want to be a ninja, but it's still true... I can't deal with that stubborn brother of mine anymore! Please get rid of the group of ninjas!")
			gosub *chat_select
			if ( chatval != 1 ) {
				chatMore lang("そんなこと言われても困るでござる。", "That's a troubling thing to hear."), strbye
				goto *chat_end
			}
			txt_questupdate
			chatMore lang("やったぁ！準備ができたら僕に声をかけてね。屋敷まで案内するからさ。", "Alright! Just let me know when you're ready. I'll take you to them."), strbye
			gdata(GDATA_FLAG_SUB_LAW_OF_NINJAS) = 1
			goto *chat_end
		}
		if ( gdata(GDATA_FLAG_SUB_LAW_OF_NINJAS) == 1 | gdata(GDATA_FLAG_SUB_LAW_OF_NINJAS) == 2 ) {
			chatList 1, lang("目をつぶる", "(Cover your eyes)")
			chatList 0, lang("何をする気だ！", "What are you trying to pull?!")
			buff = lang("準備はできた？案内するからちょっと目をつぶっててね…。", "Have you made your preparations? I'll need you to cover your eyes while I guide you...")
			gosub *chat_select
			if ( chatval != 1 ) {
				chatMore lang("何って…案内するだけだよ！？", "Wha... I'm just going to guide you there, okay?!"), strbye
				goto *chat_end
			}
			if ( gdata(GDATA_FLAG_DUEL_TARGET) > 0 ) {
				snd SOUNDLIST_FAIL1
				txt_duel2
				goto *chat_end
			}
			txt_questupdate
			gdata(GDATA_FLAG_SUB_LAW_OF_NINJAS) = 2
			mdata(MDATA_DOWNSTAIRS_POS) = cdata(CDATA_Y, CHARA_PLAYER) * 1000 + cdata(CDATA_X, CHARA_PLAYER)
			gdata(GDATA_TELEPORT_AREA) = AREA_KURUALM
			gdata(GDATA_TELEPORT_LEVEL) = 5
			levelexitby = 2
			gdata(GDATA_LEVEL_START_ON) = 7
			mapstartx = 23
			mapstarty = 21
			evadd EVENT_BOSS_MUSIC
			gdata(GDATA_FLAG_BOSS_MUSIC) = 3
			chatteleport = 1
			goto *chat_end
		}
		if ( gdata(GDATA_FLAG_SUB_LAW_OF_NINJAS) == 3 ) {
			txt_questcompleted
			txtmore
			txt_questitem
			txt_questupdate
			chatMore lang("うん、兄さんを倒すなんて君はやっぱり強いや。僕の目に狂いはなかったみたいだね。", "Yep, it looks like my eyes didn't deceive me. You're pretty strong if you were able to beat my brother.")
			chatMore lang("えへへ♪ともかく、これで僕もやっと忍者をやめることができるよ。僕、実は可愛い服とか着て街を堂々と歩いてみたかったんだ。何にも縛られず自由きままに…。君が戻ったら似合うかどうか見てもらおうと、アクセサリも買ってあったりして。", "Ehehe~ Now I can stop being a ninja. To be honest, I wanted to be able to freely walk around wearing cute clothes. It's nice not being tied down by anything... When you come back, you can tell me whether the accessories I bought look good or not.")
			chatMore lang("…ッ！この気配は…！？", "...! This presence...?!")
			gdata(GDATA_FLAG_SUB_LAW_OF_NINJAS) = 1000
			evadd EVENT_KUNOICHI, tc
			goto *chat_end
		}
		goto *chat_end
	}
	if ( _switch_val == CREATURE_ID_YACATECT | _switch_sw ) {
		_switch_sw = 0
		if ( cdata(CDATA_GOD, CHARA_PLAYER) == GOD_YACATECT & cdata(CDATA_PIETY, CHARA_PLAYER) >= 4000 & gdata(GDATA_FLAG_SUMMONED_YACATECT) == 0 ) {
			chatMore lang("お得意様には特別にこのアクセサリーをプレザント！どや？ふふん、金ぴかでキレイやろ？値打ちもんなんやで。", "How about this special and pleasant accessory? It glimmers like gold, beautiful eh? I'll give you a good price.")
			flt
			itemcreate -1, ITEM_ID_AUREATE_CONSTRICTER, cdata(CDATA_X, CHARA_PLAYER), cdata(CDATA_Y, CHARA_PLAYER), 0
			gdata(GDATA_FLAG_SUMMONED_YACATECT) = 1000
			goto *chat_end
		}
		else {
			chatList 0, lang("立ち去る", "Bye.")
			if ( gdata(GDATA_FLAG_INVITED_GOD) == 0 ) {
				if ( gdata(GDATA_RANK_HOME) < 200 ) {
					if ( gdata(GDATA_AREA) != AREA_HOME ) {
						chatList 1, lang("わが家に招待する", "Invite to home.")
					}
				}
			}
			buff = lang("ふーむ。エヘカトルの食べ残しやクミロミの抜け羽なんかを拾ってきたら売れるやろか？どうやろ？", "Hmm...I wonder if I could sell Ehekatl's leftovers or Kumiromi's shed feathers for cash. What do you think?")
			gosub *chat_select
			if ( chatval == 1 ) {
				chatMore lang("よっしゃ、お宅拝見と行こか！ふっふっふ、今から片づけようとしても遅いでー？", "Sorry, this is untranslated sentence."), strbye
				gdata(GDATA_FLAG_INVITED_GOD) = CREATURE_ID_YACATECT
				cdata(CDATA_CHARACTER_TIER, tc) = CHARACTER_TIER_SUMMONED_GOD_HOME
			}
			goto *chat_end
		}
		goto *chat_end
	}
	if ( _switch_val == CREATURE_ID_ITZPALT | _switch_sw ) {
		_switch_sw = 0
		if ( cdata(CDATA_GOD, CHARA_PLAYER) == GOD_ITZPALT & cdata(CDATA_PIETY, CHARA_PLAYER) >= 4000 & gdata(GDATA_FLAG_SUMMONED_ITZPALT) == 0 ) {
			chatMore lang("我が賢き信者よ、受け取るがいい。汝ならばこのアーティファクトをもきっと使いこなせるであろう。", "My wise believer, you have earned my favor. You shall surely be able to master this artifact.")
			flt
			itemcreate -1, ITEM_ID_MAGIC_CANCELER, cdata(CDATA_X, CHARA_PLAYER), cdata(CDATA_Y, CHARA_PLAYER), 0
			gdata(GDATA_FLAG_SUMMONED_ITZPALT) = 1000
			goto *chat_end
		}
		else {
			chatList 0, lang("立ち去る", "Bye.")
			if ( gdata(GDATA_FLAG_INVITED_GOD) == 0 ) {
				if ( gdata(GDATA_RANK_HOME) < 200 ) {
					if ( gdata(GDATA_AREA) != AREA_HOME ) {
						chatList 1, lang("わが家に招待する", "Invite to home.")
					}
				}
			}
			buff = lang("先代のエヘカトルとテスカトリポカは大層仲が悪く、よく我が仲裁に入ったものだ。", "Ehekatl's and Tezcatlipoca's predecessors had a really bad relationship, so I have been acting as an arbiter.")
			gosub *chat_select
			if ( chatval == 1 ) {
				chatMore lang("ふむ。汝の築き上げし楽園、我が双眸に刻むのもよいだろう。", "Sorry, this is untranslated sentence."), strbye
				gdata(GDATA_FLAG_INVITED_GOD) = CREATURE_ID_ITZPALT
				cdata(CDATA_CHARACTER_TIER, tc) = CHARACTER_TIER_SUMMONED_GOD_HOME
			}
			goto *chat_end
		}
		goto *chat_end
	}
	if ( _switch_val == CREATURE_ID_MIZUKI_THE_ABYSS_PRINCESS | _switch_sw ) {
		_switch_sw = 0
		if ( gdata(STARTING_GDATA_FLAG + 275) == 2 ) {
			chatMore lang("ご先祖様はまた石になって眠っているのう。もう数万年は目覚めることはないじゃろう。わしは…わしは平気じゃよ。じゃから、心配せんでよい。こうして地上から話に来てくれる者がおるだけで…充分じゃ。", "Follow me.")
			chatMore lang("おぬしには礼をしたかったんじゃが、この城には地上人が喜びそうなものがなくてのう。その…情けない話じゃが、お弁当くらいしか用意できんかったんじゃ。あれだけの大仕事をしてもらっておいて弁当はどうかと思うが、よければ受け取ってくれんか。", "Follow me.")
			flt
			itemcreate -1, ITEM_ID_ABYSS_LUNCH, cdata(CDATA_X, CHARA_PLAYER), cdata(CDATA_Y, CHARA_PLAYER), 1
			txt_questitem
			chatMore lang("さぁて！辛気臭い話はやめて、切り替えてゆくぞ！", "Follow me.")
			gdata(STARTING_GDATA_FLAG + 275) = 3
		}
		if ( gdata(GDATA_FLAG_MAIN) == 400 ) {
			if ( gdata(GDATA_LEVEL) == 30 ) {
				chatMore lang("よくぞ止めてくれた…おぬしには本当に感謝しておる。この島の人々には本当に悪いことをしたが、わしの力では元通りにできぬ…。せめて今は少しでも早く地上を離れ、城と共に海の底に戻るとしよう。", "You stopped him... I am truly grateful. I feel so bad about the people of this island, but I can't heal them with my power... It may not be much, but at least now I can return to the bottom of the sea along with the castle."), strbye
				chatMore lang("" + cdatan(CDATAN_NAME, CHARA_PLAYER) + "、城には何も面白いものはないがよかったら遊びに来とくれ。…待っておるぞ。何万年でも、のう。", "" + cdatan(CDATAN_NAME, CHARA_PLAYER) + ", there's nothing interesting in my castle, but please come visit if you would like... I'll be waiting. Even tens of thousands of years from now."), strbye
				if ( gdata(GDATA_FLAG_DUEL_TARGET) > 0 ) {
					snd SOUNDLIST_FAIL1
					txt_duel2
					goto *chat_end
				}
				mdata(MDATA_DOWNSTAIRS_POS) = cdata(CDATA_Y, CHARA_PLAYER) * 1000 + cdata(CDATA_X, CHARA_PLAYER)
				gdata(GDATA_TELEPORT_AREA) = AREA_VALM
				gdata(GDATA_TELEPORT_LEVEL) = 1
				levelexitby = 2
				chatteleport = 1
				goto *chat_end
			}
		}
		if ( gdata(GDATA_FLAG_MAIN) == 399 ) {
			chatList 1, lang("一度帰りたい", "I want to return.")
			chatList 0, lang("任せておいて", "Trust me.")
			buff = lang("おぬしには苦労をかけるのう…。", "I am sorry for causing you so much trouble...")
			gosub *chat_select
			if ( chatval == 1 ) {
				if ( gdata(GDATA_FLAG_DUEL_TARGET) > 0 ) {
					snd SOUNDLIST_FAIL1
					txt_duel2
					goto *chat_end
				}
				chatMore lang("確かに色々と準備もいるじゃろうな。じゃが時間があまり残っておらんことは忘れんでくれ。", "I'm sure your have many preparations to make. But please, don't forget that we don't have much time."), strbye
				mdata(MDATA_DOWNSTAIRS_POS) = cdata(CDATA_Y, CHARA_PLAYER) * 1000 + cdata(CDATA_X, CHARA_PLAYER)
				gdata(GDATA_TELEPORT_AREA) = AREA_VALM
				gdata(GDATA_TELEPORT_LEVEL) = 1
				levelexitby = 2
				chatteleport = 1
				goto *chat_end
			}
			chatMore lang("すまぬ…すまぬ…。", "I'm sorry... I'm so sorry..."), strbye
			goto *chat_end
		}
		if ( gdata(GDATA_FLAG_MAIN) == 398 ) {
			chatList 2, lang("助けを呼ぶ声が聞こえた", "I heard a voice calling for help.")
			chatList 1, lang("…今すぐ帰りたい", "...I want to go back.")
			chatList 0, lang("亀に無理矢理連れてこられた", "The tortoise made me come.")
			buff = lang("お、おぬしは！？", "Y-you are?!")
			gosub *chat_select
			if ( chatval == 0 ) {
				chatMore lang("な、何をやっとるんじゃレイキは！？うちの亀が申し訳ないことをしたのう…。", "What are you doing, Leiki?! I'm so sorry he did this..."), strbye
				goto *chat_end
			}
			if ( chatval == 1 ) {
				if ( gdata(GDATA_FLAG_DUEL_TARGET) > 0 ) {
					snd SOUNDLIST_FAIL1
					txt_duel2
					goto *chat_end
				}
				chatMore lang("…そうじゃろうな。この状況では当然じゃの…。", "...I understand. In this situation, anyone would want to leave..."), strbye
				mdata(MDATA_DOWNSTAIRS_POS) = cdata(CDATA_Y, CHARA_PLAYER) * 1000 + cdata(CDATA_X, CHARA_PLAYER)
				gdata(GDATA_TELEPORT_AREA) = AREA_VALM
				gdata(GDATA_TELEPORT_LEVEL) = 1
				levelexitby = 2
				chatteleport = 1
				goto *chat_end
			}
			if ( chatval == 2 ) {
				chatMore lang("わしの呼び声はなんとか届いたのじゃな…。", "So my call did somehow reach someone...")
				chatMore lang("のう、見とくれこの惨状を。昔浮上した時は辺りに島なんてなかったんじゃがのう。地殻変動の影響じゃろうな。…何人かは逃がせたんじゃが、ほぼ全ての島民が精神崩壊してしもうた。わしらは…地上の人々に害をなす種族だったんじゃな。そんなことも知らずにわしはずっと地上に憧れておった。本当に…馬鹿じゃな…。", "Look at the tragedy before us. When the castle surfaced in the past, there were no islands around. This must be due to movement of the planet's crust... A few escaped, but the minds of most of the islanders have been completely broken. My... race is one that causes harm to surfacers. I've longed for the surface all this time without even realizing what would happen... I'm truly... such a fool...")
				chatMore lang("…泣き言を言っている場合ではないのう。城は島の向こう側にある。浅瀬を渡っていけば辿り着くじゃろう。ご先祖様はその奥じゃ。どうも物理的にはそこまで強くない上に寝起きで魔術も上手く使えないようじゃ。おぬしの力ならきっと止められる。", "This isn't the time for me to whine. The castle is on the other side of this island. You'll reach it if you wade through the shallows. My ancestor is inside. His strength hasn't fully returned yet. With your power, I'm sure you can defeat him.")
				chatMore lang("ただしご先祖様は断続的に精神波をテレパシーで飛ばしておる。今までは大量の海水がそれを遮っていたんじゃろうが、今は遮るものもない。もしも耐えきれず精神をある程度病んだ場合は即刻連れて帰るように、とレイキには命じておる。精神状態には常に気をつけとくれ。", "However, my ancestor will intermittently release strong psychic waves. The sea water served as a barrier up until now, but there's nothing to block it now that we're on the surface. I will order Leiki to remove you immediately if your mind gets close to reaching its breaking point. Please be mindful of your mental state.")
				gdata(GDATA_FLAG_MAIN) = 399
				goto *chat_end
			}
			goto *chat_end
		}
		if ( gdata(GDATA_FLAG_SUB_PRINCESS_COMPANION) < 1000 ) {
			chatMore lang("苦しゅうない。さぁさ、はやく地上の世界の話を聞かせるのじゃ！", "Ah you're here. So, now tell me all about how things are on the surface!")
			redraw 0
			gosub *screen_draw
			gosub *screen_fade
			gsel 4
			pos 0, 0
			picload exedir + "graphic\\face1" + devfile + ".bmp", 1
			gsel 0
			chatMore lang("（あなたが今までしてきた冒険の話や世界情勢について聞かせた…）", " (I was asked about the state of the world and story of adventure...) ")
			if ( gdata(STARTING_GDATA_FLAG + 275) == 0 ) {
				chatMore lang("うう…あちこち冒険できるお主が羨ましいぞ。わしは役目があってこの城から離れられないからのう…。最後にこの城が浮上したのは何万年も前だと聞く。", "Ooh... I'm so jealous that you can adventure out to different places. I can't even leave this castle... How many thousands of years has it been since someone last floated up here...?")
			}
			chatMore lang("ともかく大義であったぞ。また遊びに来てくれい。これは礼じゃ！", "Anyways, let me thank you. Please come visit again. Here, this is for you!")
			flt
			itemcreate -1, ITEM_ID_AGING_LUNCH, cdata(CDATA_X, CHARA_PLAYER), cdata(CDATA_Y, CHARA_PLAYER), 1
			txt_questcompleted
			txtmore
			txt_questupdate
			gdata(GDATA_FLAG_SUB_PRINCESS_COMPANION) = 1000
			goto *chat_end
		}
		chatList 2, lang("遊びに来た", "I came to play.")
		chatList 1, lang("自分の身の上話をする", "I want to talk about my background.")
		chatList 0, lang("仲間の身の上話をする", "I want to talk about the background of an ally.")
		buff = lang("何か面白い話でもあるのかのう？", "Oh? You have some interesting stories to tell?")
		gosub *chat_select
		if ( chatval == 1 | chatval == 0 ) {
			if ( chatval == 1 ) {
				c = 0
			}
			if ( chatval == 0 ) {
				ikoru = 10
				allyctrl = 3
				gosub *com_ally
				ikoru = 0
				if ( stat != (-1) ) {
					c = stat
				}
				else {
					goto *chat_end
				}
			}
			chatMore lang("おお、それは楽しみじゃのう！早く話すのじゃ！", "Ah, I've been waiting for this! Quickly now, I want to hear!")
			ohanasi1 = cdata(CDATA_BACKGROUND_PART_A1, c)
			ohanasi2 = cdata(CDATA_BACKGROUND_PART_A2, c)
			ohanasi3 = cdata(CDATA_BACKGROUND_PART_B1, c)
			ohanasi4 = cdata(CDATA_BACKGROUND_PART_B2, c)
			ohanasi5 = cdata(CDATA_BACKGROUND_PART_B3, c)
			goto *chat_unique_mizuki
		}
		chatMore lang("それはそれでうれしいのう、何もないところじゃがゆっくりしていくとよいぞ。", "That still makes me happy. There may not be much of interest here, but feel free to take a load off.")
		item_find ITEM_ID_SMALL_MEDAL, 3, 1
		if ( stat != (-1) ) {
			ci = stat
			if ( inv(INV_ITEM_NUM, ci) >= 1 ) {
				chatList 1, lang("メダルを渡す", "Here, take these medals.")
				chatList 0, lang("あげないよ", "No way.")
				buff = lang("ところでそのきらきらしたやつ…小さなメダルというものじゃったか？それ綺麗じゃのう…たのむ、ゆずってくれんか？", "That shiny thing you've got there... It isn't a small medal is it? ...Please, can you give it to me?")
				gosub *chat_select
				if ( chatval != 1 ) {
					chatMore lang("う…無理を言ってすまんかったの。", "ngh... Sorry for asking the impossible.")
					goto *chat_end
				}
				snd SOUNDLIST_PAYGOLD1
				inv(INV_ITEM_NUM, ci) -= 1
				chatMore lang("おお…感謝感激じゃ！ふむ、ただで貰うのも悪いしのう。こんなものしかないんじゃが受け取ってくれるかの？", "Oh... Thank you so much! Hm, wouldn't be right to take it for nothing. I only have this but will you accept it?")
				if ( gdata(GDATA_FLAG_MAIN) >= 400 & rnd(4) == 0 ) {
					flt
					itemcreate -1, ITEM_ID_ABYSS_LUNCH, cdata(CDATA_X, CHARA_PLAYER), cdata(CDATA_Y, CHARA_PLAYER), 1
				}
				else {
					if ( rnd(2) == 0 ) {
						flt
						itemcreate -1, ITEM_ID_AGING_LUNCH, cdata(CDATA_X, CHARA_PLAYER), cdata(CDATA_Y, CHARA_PLAYER), 1
					}
					else {
						flt
						itemcreate -1, ITEM_ID_AGE_RETURN_LUNCH, cdata(CDATA_X, CHARA_PLAYER), cdata(CDATA_Y, CHARA_PLAYER), 1
					}
				}
				goto *chat_end
			}
		}
		goto *chat_end

*chat_unique_mizuki
		ohanasi6 = 100
		if ( ohanasi1 != 0 ) {
			chatList 5, lang("前半リロール", "Re-roll first half.")
		}
		if ( ohanasi1 != 0 ) {
			chatList 4, lang("後半リロール", "Re-roll second half.")
		}
		chatList 3, lang("全リロール", "Re-roll all of it.")
		chatList 2, lang("上記に沿って話す", "It is as said above.")
		chatList 1, lang("内緒にする", "Keep it secret.")
		chatList 0, lang("話すのをやめる", "Stop talking.")
		buff = lang("（内容決定）", "(Content decision)")
		gosub *chat_select
		ohanasi6 = 0
		if ( chatval == 2 ) {
			chatMore lang("そうじゃったのか…改めて思うが、人それぞれに物語があるんじゃな…。", "Is that so... Thinking about it, each person does have their own story...")
			if ( cdata(CDATA_BACKGROUND_PART_A1, c) != 0 ) {
				if ( ohanasi1 == cdata(CDATA_BACKGROUND_PART_A1, c) & ohanasi2 == cdata(CDATA_BACKGROUND_PART_A2, c) & ohanasi3 == cdata(CDATA_BACKGROUND_PART_B1, c) & ohanasi4 == cdata(CDATA_BACKGROUND_PART_B2, c) & ohanasi5 == cdata(CDATA_BACKGROUND_PART_B3, c) ) {
					chatMore lang("それにしても前に聞いた話と全く同じような…。な、なんじゃ？わしはまだボケておらんぞ！イケイケのピチピチじゃ！", "It does feel like I've heard the exact same story before... W-What? I'm not going senile!")
				}
			}
			cdata(CDATA_BACKGROUND_PART_A1, c) = ohanasi1
			cdata(CDATA_BACKGROUND_PART_A2, c) = ohanasi2
			cdata(CDATA_BACKGROUND_PART_B1, c) = ohanasi3
			cdata(CDATA_BACKGROUND_PART_B2, c) = ohanasi4
			cdata(CDATA_BACKGROUND_PART_B3, c) = ohanasi5
			goto *chat_end
		}
		if ( chatval == 5 ) {
			ohanasi1 = rnd(32) + 1
			ohanasi2 = rnd(28) + 1
			goto *chat_unique_mizuki
		}
		if ( chatval == 4 ) {
			ohanasi3 = rnd(13) + 1
			ohanasi4 = rnd(41) + 1
			ohanasi5 = rnd(36) + 1
			goto *chat_unique_mizuki
		}
		if ( chatval == 3 ) {
			ohanasi1 = rnd(32) + 1
			ohanasi2 = rnd(28) + 1
			ohanasi3 = rnd(13) + 1
			ohanasi4 = rnd(41) + 1
			ohanasi5 = rnd(36) + 1
			goto *chat_unique_mizuki
		}
		ohanasi1 = 0
		ohanasi2 = 0
		ohanasi3 = 0
		ohanasi4 = 0
		ohanasi5 = 0
		if ( chatval == 1 ) {
			cdata(CDATA_BACKGROUND_PART_A1, c) = 0
			cdata(CDATA_BACKGROUND_PART_A2, c) = 0
			cdata(CDATA_BACKGROUND_PART_B1, c) = 0
			cdata(CDATA_BACKGROUND_PART_B2, c) = 0
			cdata(CDATA_BACKGROUND_PART_B3, c) = 0
		}
		if ( chatval == 0 | chatval == 1 | key == key_cancel ) {
			chatMore lang("な…気になるじゃろうが！", "Wha... Now that is going to bother me!")
		}
		goto *chat_end
	}
	if ( _switch_val == CREATURE_ID_LEIKI | _switch_sw ) {
		_switch_sw = 0
		if ( gdata(STARTING_GDATA_FLAG + 275) == 1 ) {
			chatMore lang("その節はどうもありがとうございました！…姫様とも話していただけると嬉しいです。実はあれからずっと塞ぎ込んだままなんです。", "Thank you for your help back then! ...I would be very happy if you could talk to the Princess again. She's been in terribly low spirits since the last time you were here.")
			gdata(STARTING_GDATA_FLAG + 275) = 2
		}
		if ( gdata(GDATA_FLAG_MAIN) == 398 | gdata(GDATA_FLAG_MAIN) == 399 ) {
			chatMore lang("冒険者様、どうか力を貸してください！姫様が精神波を抑え込めるのにも限界が来ています！", "Adventurer, please lend me your aid! The Princess is reaching her limit in suppressing the psychic waves!")
			chatList 2, lang("断る", "I refuse.")
			chatList 1, lang("無言で亀に乗る", "(Hop on the tortoise)")
			chatList 0, lang("誰かの代わりは嫌だ", "I'm not a substitute.")
			buff = lang("この街にいた強い人たちに協力をお願いしようと来てみたのですが、「戦争中の国を説得してやろうと思う」とかで旅に出た後だったんですよ！姫様はずっと地上の世界に憧れていて…ようやく願いが叶ったと思えば地上の人々を苦しめることになってしまって…。せめて、せめて冒険者様を連れて行くことで姫様のお役に立ちたいのです！", "I came to this town to recruit strong warriors, but apparently they're all gone! The Princess has always longed for the surface world... Just when she thought her wish would finally be granted, this affliction began to affect the people of the surface... If nothing else... If nothing else, I will assist her by bringing an adventurer!")
			gosub *chat_select
			if ( chatval != 1 ) {
				chatMore lang("お願いします！お願いします…！", "Please! Please, I'm begging you...!"), strbye
				goto *chat_end
			}
			if ( gdata(GDATA_FLAG_DUEL_TARGET) > 0 ) {
				snd SOUNDLIST_FAIL1
				txt_duel2
				goto *chat_end
			}
			chatMore lang("…！ありがとうございます…。ではお連れします！", "...! Thank you so much... I will take you to her!")
			mdata(MDATA_DOWNSTAIRS_POS) = cdata(CDATA_Y, CHARA_PLAYER) * 1000 + cdata(CDATA_X, CHARA_PLAYER)
			gdata(GDATA_TELEPORT_AREA) = AREA_VALM
			gdata(GDATA_TELEPORT_LEVEL) = 30
			levelexitby = 2
			gdata(GDATA_LEVEL_START_ON) = 7
			mapstartx = 18
			mapstarty = 65
			chatteleport = 1
			goto *chat_end
		}
		if ( gdata(GDATA_LEVEL) == 3 ) {
			chatMore lang("姫様は奥の部屋にいますよ。くれぐれも機嫌をそこねないようにお願いします。それと、正面の階段は魔法によって地上とつながっています。お帰りの際はそちらからどうぞ。", "The princess resides in the far room. I ask you to not upset her. As well, the stairwell before you connects to the surface through magic. Feel free to use it if you wish to leave."), strbye
			goto *chat_end
		}
		if ( gdata(GDATA_FLAG_SUB_PRINCESS_COMPANION) == 0 ) {
			if ( gdata(STARTING_GDATA_FLAG + 275) == 0 ) {
				chatMore lang("おや、冒険者の方ですか？ちょうどいいところに来てくれました。", "Ah, If it isn't an adventurer? You've come at the right time.")
			}
			chatList 1, lang("いいよ", "Sure.")
			chatList 0, lang("やだ", "No way.")
			buff = lang("うちの姫様は城から出られず毎日退屈しているのです。よければ一緒に来て、地上世界の話を聞かせてあげてください。", "Our Princess is quite bored with these days of not being able to leave the castle. If you would please come with me, and could you speak of the surface world with her.")
			gosub *chat_select
			if ( chatval != 1 ) {
				chatMore lang("このまま帰ったら姫様に怒られてしまう！どうか亀助けだと思ってお願いします！", "The Princess will be very upset with me if I don't find someone! Please consider it a favor for this old tortoise!"), strbye
				goto *chat_end
			}
			txt_questupdate
			chatMore lang("おお、感激です。準備ができたら、声をかけてください。", "Ohh, wonderful. Please let me know when you are ready."), strbye
			gdata(GDATA_FLAG_SUB_PRINCESS_COMPANION) = 1
			goto *chat_end
		}
		if ( gdata(GDATA_FLAG_SUB_PRINCESS_COMPANION) >= 1 & gdata(GDATA_LEVEL) == 1 ) {
			chatList 1, lang("いく", "Yes.")
			chatList 0, lang("いかない", "No.")
			buff = lang("姫様のところに行くのですね？", "Are you ready to see the Princess?")
			gosub *chat_select
			if ( chatval != 1 ) {
				chatMore lang("ええー。", "Ehh..."), strbye
				goto *chat_end
			}
			if ( gdata(GDATA_FLAG_DUEL_TARGET) > 0 ) {
				snd SOUNDLIST_FAIL1
				txt_duel2
				goto *chat_end
			}
			chatMore lang("ではお連れしましょう。しばらく息を止めててください。", "Then I will take you to her. Please hold your breath.")
			mdata(MDATA_DOWNSTAIRS_POS) = cdata(CDATA_Y, CHARA_PLAYER) * 1000 + cdata(CDATA_X, CHARA_PLAYER)
			gdata(GDATA_TELEPORT_AREA) = AREA_VALM
			gdata(GDATA_TELEPORT_LEVEL) = 3
			levelexitby = 2
			evadd EVENT_BOSS_MUSIC
			gdata(GDATA_FLAG_BOSS_MUSIC) = 2
			chatteleport = 1
			goto *chat_end
		}
		goto *chat_end
	}
	if ( _switch_val == CREATURE_ID_NEW_CITIZEN | _switch_sw ) {
		_switch_sw = 0
		chatMore lang("僕になにか…こほん。私に何か用でしょうか。", "Okay. Wait here.")
		chatMore lang("え…忍者？な、なにそれ？", "Okay. Wait here."), strbye
		goto *chat_end
	}
	if ( _switch_val == CREATURE_ID_MOBILE_COMMUNICATION_EQUIPMENT | _switch_sw ) {
		_switch_sw = 0
		if ( gdata(GDATA_FLAG_MAIN) >= 265 & gdata(GDATA_FLAG_MAIN) < 266 & gdata(GDATA_LEVEL) == 106 ) {
			chatMore lang("気をつけろ。どうやら遺跡内の機械たちが怪電波で暴走したみたいだ。余裕がなければすぐに階段を上がって逃げろ。ただし、今お前と会話してるこのモニターつきのやつ、こいつはデータ収集兼通信用に配備しておいたメカでな。データ格納部分を傷つけずに駆動系を破壊して、メルガスの俺のラボまで持ってきてくれ。", "Be careful. It looks like the machines in the ruins have gone out of control due to some sort of electromagnetic waves. The machine that I am speaking to you through was deployed for the purpose of data collection and communication. Destroy its drive system without damaging the data registers, and then bring them to me at my lab in Melugas."), strbye
			goto *chat_end
		}
		if ( gdata(GDATA_FLAG_MAIN) >= 280 & gdata(GDATA_FLAG_MAIN) < 281 & gdata(GDATA_LEVEL) == 122 ) {
			chatMore lang("探索中悪いが、至急メルガスの俺のラボまで来てくれ。…と言ったところで冒険者は無視しかねないからな。次の階層への扉を遠隔操作で施錠しておいた。それ以上進めないぞ。", "Sorry for interrupting your search, but you must come to my lab in Melugas at once. Not like I expect an adventurer to take that to heart, though... I've sealed the way further into the ruins. You won't be able to progress any further until you come to my lab."), strbye
			gdata(GDATA_FLAG_MAIN) = 281
			txt_questupdate
			goto *chat_end
		}
		goto *chat_end
	}
	if ( _switch_val == CREATURE_ID_ETHER_GENERATOR | _switch_sw ) {
		_switch_sw = 0
		if ( gdata(GDATA_AREA) == AREA_AMUR_CAGE ) {
			chatMore lang("(もうエーテルを散布している様子はないが、今までに結晶化したエーテルが相変わらず表面を覆っている。)", "(It doesn't appear to still be producing ether, but its surface is still covered in crystallized ether from what it discharged before.)")
			goto *chat_end
		}
		chatMore lang("(エーテルを生成しこの辺り一帯に散布している生命体だ。排出したエーテルが一部結晶化し表面を覆っている。)", "(It is a living entity which produces ether and discharges it over this entire area. Some of the ether it has discharged has crystallized on its surface.)")
		if ( gdata(GDATA_FLAG_MAIN) >= 300 & gdata(GDATA_FLAG_MAIN) < 310 ) {
			chatMore lang("(あなたは手ごろな結晶体に狙いを定め、叩き割った。)", "(You aim at a conveniently placed crystal and attempt to break it off.)"), strbye
			txtef COLOR_GREEN
			txt lang("回収用カプセルに高純度のエーテル塊を入れた。", "You place the lump of purified ether into the recovery capsule.")
			snd SOUNDLIST_COMPLETE1
			gdata(GDATA_FLAG_MAIN) = 310
			goto *chat_end
		}
		goto *chat_end
	}
	if ( _switch_val == CREATURE_ID_NAZUNA_THE_INSTRUCTOR | _switch_sw ) {
		_switch_sw = 0
		if ( gdata(GDATA_AREA) != AREA_DOJO ) {
			chatMore lang("貴様！ここは道場じゃないぞ！", "Hey you! This isn't a dojo!"), strbye
			goto *chat_end
		}
		if ( gdata(GDATA_PETS_IN_DOJO) < 0 ) {
			gdata(GDATA_PETS_IN_DOJO) = 1
		}
		if ( gdata(GDATA_FLAG_DIALOG_NAZUNA) == 1000 ) {
			chatList 0, lang("なんでもないです", "It's nothing.")
			if ( cdata(CDATA_GOLD, CHARA_PLAYER) > 10000 ) {
				if ( gdata(GDATA_PETS_IN_DOJO) < 150 ) {
					chatList 1, lang("仲間の入門（10000gp）", "Entrust ally (10000gp)")
				}
			}
			if ( gdata(GDATA_PETS_IN_DOJO) > 0 ) {
				chatList 2, lang("特別訓練", "Special training")
			}
			if ( cdata(CDATA_GOLD, CHARA_PLAYER) > 200 ) {
				chatList 3, lang("魔法スタイルの変更（200gp）", "Change Magic Style (200gp)")
			}
			if ( cdata(CDATA_GOLD, CHARA_PLAYER) > 200 ) {
				chatList 4, lang("格闘スタイルの変更（200gp）", "Change Melee Style (200gp)")
			}
			buff = lang("はああああっ！喝ッ！！…ん？何の用だ！", "Gah!! Hm? State your business!")
			gosub *chat_select
			if ( chatval == 1 ) {
				allyctrl = 3
				gosub *com_ally
				if ( stat != (-1) ) {
					c = stat
					snd SOUNDLIST_OK1
					txtnew
					if ( c == 0 ) {
						goto *chat_end
					}
					if ( cbit(CHARA_BIT_BODYGUARD, c) != 0 | cbit(CHARA_BIT_GUARD_TEMP, c) != 0 ) {
						chatMore lang("おい！ここは護衛対象の面倒を見る場所ではないぞ！", "You've no desire to improve! You wuss!"), strbye
						goto *chat_end
					}
					if ( cdata(CDATA_IN_TAGTEAM, c) == (-1) ) {
						ttc = cdata(CDATA_TAGTEAM_PARTNER, c)
						cell_findspace cdata(CDATA_X, c), cdata(CDATA_Y, c), 1
						if ( stat == 0 ) {
							txt_nospace
							goto *chat_end
						}
						cell_setchara ttc, rtval, rtval(1)
						tag_end c
					}
					if ( cdata(CDATA_IN_TAGTEAM, c) == 1 ) {
						ttc = cdata(CDATA_TAGTEAM_PARTNER, c)
						cell_findspace cdata(CDATA_X, c), cdata(CDATA_Y, c), 1
						if ( stat == 0 ) {
							txt_nospace
							goto *chat_end
						}
						cell_setchara ttc, rtval, rtval(1)
						tag_end c
					}
					cdata(CDATA_X_ORG, c) = cdata(CDATA_X, c)
					cdata(CDATA_Y_ORG, c) = cdata(CDATA_Y, c)

					/********** ANNA CUSTOM - BEGINNING **********/

					AllyID = c
					gosub *DeleteAIInfo

					/********** ANNA CUSTOM - ENDING **********/

					txt lang(cdatan(CDATAN_NAME, c) + "を入門させた。", cdatan(CDATAN_NAME, c) + " stay" + _s(c) + " here.")
					if ( cbit(CHARA_BIT_PCC, c) == 1 ) {
						txtef COLOR_RED
						txtmore
						txt lang("ナズナ「修行にお洒落など不要！さぁ、着替えろ！」", "Nazuna yells, " + cnvtalk("You've no need for fancy clothing in training! Now, go change!"))
						cbitmod CHARA_BIT_PCC, c, 0
					}
					gdata(GDATA_PETS_IN_DOJO)++
					if ( cdata(CDATA_EXIST, c) != CHAR_STATE_DEAD ) {
						if ( cdatan(CDATAN_RACE, c) == "servant" ) {
							gdata(GDATA_ACTIVE_GOD_PETS)++
						}
					}
					cdata(CDATA_AREA, c) = gdata(GDATA_AREA)
					cbitmod CHARA_BIT_LIVESTOCK, c, 1
					relocate_chara c, -1
					cdata(CDATA_RELATION, c) = -1
					cdata(CDATA_RELATION_ORG, c) = -1
					cdata(CDATA_ROLE, c) = ROLE_SPECIAL
					chatMore lang("ほう、鍛えがいがありそうだ。しばらく預かるぞ。また連れて行きたくなったら勝手に連れ出せばいい。", "Ohh, they seem worthy of my time. I'll take care of them. If you want them back then feel free to take them."), strbye
					snd SOUNDLIST_PAYGOLD1
					cdata(CDATA_GOLD, CHARA_PLAYER) -= 10000
					goto *chat_end
				}
			}
			if ( chatval == 3 ) {
				chatList 0, lang("仲間", "ally")
				chatList 1, lang("自分", "myself")
				buff = lang("魔法使いは普通、詠唱音声を媒体として魔法を行使するのは知っているな？しかし私の指導でマナの込め方を変えれば、視線だろうが触手だろうがあとは本人の根性次第で媒体にできる。さぁ、指導を受けたいのはどいつだ！", "Did you know that wizards usually chant as their medium for exercising control over magic? However, with my guidance you can change your way of controlling mana and with sight and feeling a person can learn to use their own willpower as the medium. Now then, who wants to receive my guidance!?")
				chatesc = 1
				gosub *chat_select
				if ( chatval == 0 ) {
					allyctrl = 3
					gosub *com_ally
					if ( stat != (-1) ) {
						c = stat
						snd SOUNDLIST_OK1
						txtnew
					}
					else {
						goto *chat_end
					}
				}
				if ( chatval == 1 ) {
					c = 0
				}
				if ( chatval != 0 & chatval != 1 ) {
					goto *chat_end
				}
				chatMore lang("そうか…指導についてこられるだろうな？", "Hmm... guess I can provide some guidance?")
				chatList 0, lang("音声", "spell")
				chatList 1, lang("糸", "cobweb")
				chatList 2, lang("体液", "fluid")
				chatList 3, lang("触手", "tentacle")
				chatList 4, lang("視線", "gaze")
				chatList 5, lang("胞子", "spores")
				chatList 6, lang("振動", "vibration")
				chatList 7, lang("魔法陣", "magical circle")
				chatList 8, lang("粉", "powder")
				chatList 9, lang("思念", "vicious mind")
				chatList 10, lang("やっぱり今のままでいい", "do not change")
				buff = lang("媒体にしたいのはどれだ？どれも魔法としての性能は変わらんぞ！", "Select new cast style!")
				chatesc = 1
				gosub *chat_select
				if ( chatval >= 0 & chatval <= 9 ) {
					cdata(CDATA_CAST_STYLE, c) = chatval
					chatMore lang("いいだろう…手短に行くぞ！", "Fine... I'll be going soon!")
					snd SOUNDLIST_PAYGOLD1
					cdata(CDATA_GOLD, CHARA_PLAYER) -= 200
					redraw 0
					gosub *screen_draw
					gosub *screen_fade
					gsel 4
					pos 0, 0
					picload exedir + "graphic\\face1" + devfile + ".bmp", 1
					gsel 0
					snd SOUNDLIST_DING3
					chatMore lang("こんなものだな。後はその辺りで試してこい！", "Didn't find anything here I guess. Let's try that area over there!"), strbye
					goto *chat_end
				}
				goto *chat_end
			}
			if ( chatval == 4 ) {
				chatList 0, lang("仲間", "ally")
				chatList 1, lang("自分", "myself")
				buff = lang("格闘はつまるところ気合だ。私の指導で気合を込めれば全身が武器となりうる！足が無かろうと気合次第で蹴りが可能！闘気を飛ばせば気合次第で睨み殺すことも可能！さぁ、指導を受けたいのはどいつだ！", "Martial arts is all about cool yells. With my guidance in cool yelling your whole body can become a weapon! Your feet will be able to annihilate through the use of cool yelling. Your fighting spirit will soar and you will be able to kill using only your cool yells and glares! Now then, who wants to receive my guidance!?")
				chatesc = 1
				gosub *chat_select
				if ( chatval == 0 ) {
					allyctrl = 3
					gosub *com_ally
					if ( stat != (-1) ) {
						c = stat
						snd SOUNDLIST_OK1
						txtnew
					}
					else {
						goto *chat_end
					}
				}
				if ( chatval == 1 ) {
					c = 0
				}
				chatMore lang("そうか…指導についてこられるだろうな？", "Hmm... guess I can provide some guidance?")
				if ( chatval == 0 | chatval == 1 ) {
					buff = lang("身に着けたい格闘法を選べ。どれも性能は変わらん！", "Select new melee style!")
					chatList 0, lang("殴打", "punch")
					chatList 1, lang("引っ掻き", "claw")
					chatList 2, lang("蹴り", "kick")
					chatList 3, lang("噛みつき", "bite")
					chatList 4, lang("睨み", "gaze")
					chatList 5, lang("刺突", "sting")
					chatList 6, lang("接触", "touch")
					chatList 7, lang("胞子", "spore")
					chatList 8, lang("枝", "branch")
					chatList 9, lang("投げ", "strike")
					chatList 10, lang("体当たり", "rush")
					chatList 11, lang("ハサミ", "scissors")
					chatList 12, lang("殴打と蹴りの混合", "punch and kick")
					chatList 13, lang("やっぱり今のままでいい", "do not change")
					chatesc = 1
					gosub *chat_select
					if ( chatval >= 0 & chatval <= 12 ) {
						cdata(CDATA_MELEE_STYLE, c) = chatval
						chatMore lang("いいだろう…手短に行くぞ！", "Fine... I'll be going soon!")
						snd SOUNDLIST_PAYGOLD1
						cdata(CDATA_GOLD, CHARA_PLAYER) -= 200
						redraw 0
						gosub *screen_draw
						gosub *screen_fade
						gsel 4
						pos 0, 0
						picload exedir + "graphic\\face1" + devfile + ".bmp", 1
						gsel 0
						snd SOUNDLIST_DING3
						chatMore lang("こんなものだな。後はその辺りで試してこい！", "Didn't find anything here I guess. Let's try that area over there!"), strbye
						goto *chat_end
					}
				}
				goto *chat_end
			}
			if ( chatval == 2 ) {
				monka = 0
				repeat MAX_CHARA_TOTAL
					if ( cdata(CDATA_EXIST, cnt) != CHAR_STATE_ALIVE ) {
						continue
					}
					if ( cbit(CHARA_BIT_LIVESTOCK, cnt) != 1 ) {
						continue
					}
					if ( cnt == CHARA_PLAYER ) {
						continue
					}
					monka++
				loop
				trcost = monka * 30000 + 10000 - monka * monka * 30
				if ( cdata(CDATA_GOLD, CHARA_PLAYER) >= trcost ) {
					chatList 1, lang("訓練する", "Too expensive, but okay.")
				}
				chatList 0, lang("やめる", "No way!")
				buff = lang("預けている者たちに特別訓練を受けさせたいと言うか…その心意気はよし！" + trcost + "goldかかるが問題なかろう？", "You want the ones I'm watching to take special training... That's the spirit! That'll cost " + trcost + ", not a problem?")
				chatesc = 1
				gosub *chat_select
				if ( chatval != 1 ) {
					chatMore lang("こちらも道場の存続がかかっているのだ。費用を捻出してこい！", "This is for the sake of continuing this dojo. Go and get me the money!"), strbye
					goto *chat_end
				}
				snd SOUNDLIST_PAYGOLD1
				cdata(CDATA_GOLD, CHARA_PLAYER) -= trcost
				repeat MAX_CHARA_TOTAL
					if ( cdata(CDATA_EXIST, cnt) != CHAR_STATE_ALIVE ) {
						continue
					}
					if ( cbit(CHARA_BIT_LIVESTOCK, cnt) != 1 ) {
						continue
					}
					if ( cnt == CHARA_PLAYER ) {
						continue
					}
					tc = cnt
					modgrowth tc, SKILL_ATTR_STR, 25
					modgrowth tc, SKILL_ATTR_CON, 25
					modgrowth tc, SKILL_ATTR_DEX, 25
					modgrowth tc, SKILL_ATTR_PER, 25
					modgrowth tc, SKILL_ATTR_LER, 25
					modgrowth tc, SKILL_ATTR_WIL, 25
					modgrowth tc, SKILL_ATTR_MAG, 25
					modgrowth tc, SKILL_ATTR_CHA, 25
					repeat MAX_SKILL_WEAPON - STARTING_SKILL_WEAPON, STARTING_SKILL_WEAPON
						if ( sorg(cnt, tc) == 0 ) {
							continue
						}
						modgrowth tc, cnt, 15
					loop
					repeat MAX_SKILL_NORMAL - STARTING_SKILL_NORMAL, STARTING_SKILL_NORMAL
						if ( sorg(cnt, tc) == 0 ) {
							continue
						}
						modgrowth tc, cnt, 15
					loop
					repeat MAX_SKILL_ACTIVE - STARTING_SKILL_ACTIVE, STARTING_SKILL_ACTIVE
						if ( sorg(cnt, tc) == 0 ) {
							continue
						}
						modgrowth tc, cnt, 15
					loop
					r1 = tc
					gosub *charaRefresh
				loop
				txtef COLOR_YELLOW
				txtmore
				txt lang("ナズナ「全員の主能力とスキルの潜在能力を鍛えてやったぞ！」", "Nazuna yells, " + cnvtalk("I trained all their attributes and skill potentials!"))
				goto *chat_end
			}
			goto *chat_end
		}
		if ( gdata(GDATA_FLAG_DIALOG_NAZUNA) == 0 ) {
			chatList 0, lang("断る", "I refuse.")
			chatList 1, lang("身代わりを差し出す", "(Make a pet take the bullet for you)")
			buff = lang("チェストオオオオオオ！！なぜ門下生が集まらない！？そこのお前、鍛え直してやるから今すぐ入門しろ！", "Why aren't any pupils joining!? Hey you, I'm going to retrain you so enroll now!")
			gosub *chat_select
			if ( chatval != 1 ) {
				chatMore lang("向上心がないのか！このフヌケめ！", "You've no desire to improve! You wuss!"), strbye
				goto *chat_end
			}
			allyctrl = 3
			gosub *com_ally
			if ( stat != (-1) ) {
				c = stat
				snd SOUNDLIST_OK1
				txtnew
				if ( c == 0 ) {
					goto *chat_end
				}
				if ( cbit(CHARA_BIT_BODYGUARD, c) != 0 | cbit(CHARA_BIT_GUARD_TEMP, c) != 0 ) {
					chatMore lang("おい！ここは護衛対象の面倒を見る場所ではないぞ！", "You've no desire to improve! You wuss!"), strbye
					goto *chat_end
				}
				if ( cdata(CDATA_IN_TAGTEAM, c) == (-1) ) {
					ttc = cdata(CDATA_TAGTEAM_PARTNER, c)
					cell_findspace cdata(CDATA_X, c), cdata(CDATA_Y, c), 1
					if ( stat == 0 ) {
						txt_nospace
						goto *chat_end
					}
					cell_setchara ttc, rtval, rtval(1)
					tag_end c
				}
				if ( cdata(CDATA_IN_TAGTEAM, c) == 1 ) {
					ttc = cdata(CDATA_TAGTEAM_PARTNER, c)
					cell_findspace cdata(CDATA_X, c), cdata(CDATA_Y, c), 1
					if ( stat == 0 ) {
						txt_nospace
						goto *chat_end
					}
					cell_setchara ttc, rtval, rtval(1)
					tag_end c
				}
				cdata(CDATA_X_ORG, c) = cdata(CDATA_X, c)
				cdata(CDATA_Y_ORG, c) = cdata(CDATA_Y, c)

				/********** ANNA CUSTOM - BEGINNING **********/

				AllyID = c
				gosub *DeleteAIInfo

				/********** ANNA CUSTOM - ENDING **********/

				txt lang(cdatan(CDATAN_NAME, c) + "を入門させた。", cdatan(CDATAN_NAME, c) + " stay" + _s(c) + " here.")
				if ( cbit(CHARA_BIT_PCC, c) == 1 ) {
					txtef COLOR_RED
					txtmore
					txt lang("ナズナ「修行にお洒落など不要！さぁ、着替えろ！」", "Nazuna yells, " + cnvtalk("You've no need of fancy wear in training! Now, go change!"))
					cbitmod CHARA_BIT_PCC, c, 0
				}
				gdata(GDATA_PETS_IN_DOJO)++
				if ( cdata(CDATA_EXIST, c) != CHAR_STATE_DEAD ) {
					if ( cdatan(CDATAN_RACE, c) == "servant" ) {
						gdata(GDATA_ACTIVE_GOD_PETS)++
					}
				}
				cdata(CDATA_AREA, c) = gdata(GDATA_AREA)
				cbitmod CHARA_BIT_LIVESTOCK, c, 1
				relocate_chara c, -1
				cdata(CDATA_RELATION, c) = -1
				cdata(CDATA_RELATION_ORG, c) = -1
				cdata(CDATA_ROLE, c) = ROLE_SPECIAL
				chatMore lang("なんだ、このなっていないペットは！こいつは預かるぞ。みっちりと鍛えてやろう！", "What's the meaning of this half-hearted pet! I'll take them. I'll train them from the ground up!"), strbye
				gdata(GDATA_FLAG_DIALOG_NAZUNA) = 1000
				goto *chat_end
			}
		}
		goto *chat_end
	}
	if ( _switch_val == CREATURE_ID_CHILD_WEL | _switch_sw ) {
		_switch_sw = 0
		chatMore lang("うちのおじいちゃん、よくパーティーを開いてるんだけどいつも音楽チケットが足りなくて困ってるんだ。", "My Grandpa, he always opens up parties and always runs out of music tickets.")
		item_find ITEM_ID_MUSIC_TICKET, 3, 1
		if ( stat != (-1) ) {
			ci = stat
			if ( inv(INV_ITEM_NUM, ci) >= 8000 ) {
				chatList 2, lang("チケット8000枚を交換する", "Here, take 8000 tickets.")
			}
		}
		if ( stat != (-1) ) {
			ci = stat
			if ( inv(INV_ITEM_NUM, ci) >= 500 ) {
				chatList 1, lang("チケット500枚を交換する", "Here, take 500 tickets.")
			}
		}
		chatList 0, lang("交換できるほど持ってない", "You don't have enough for an exchange.")
		buff = lang("ねぇ、音楽チケットとなにかアイテムを交換しない？", "Hey, want to trade some tickets for stuff?")
		gosub *chat_select
		if ( chatval == 2 ) {
			snd SOUNDLIST_PAYGOLD1
			inv(INV_ITEM_NUM, ci) -= 8000
			flt
			itemcreate -1, ITEM_ID_BOTTLE_SPEED_UPPER, cdata(CDATA_X, CHARA_PLAYER), cdata(CDATA_Y, CHARA_PLAYER), 1
			chatMore lang("そんなにくれるの？じゃあこれをどうぞ！", "You'll give this many? Then here you go!"), strbye
			goto *chat_end
		}
		if ( chatval == 1 ) {
			snd SOUNDLIST_PAYGOLD1
			inv(INV_ITEM_NUM, ci) -= 500
			flt
			itemcreate -1, ITEM_ID_CARD_PACK, cdata(CDATA_X, CHARA_PLAYER), cdata(CDATA_Y, CHARA_PLAYER), 0
			chatMore lang("この交渉、成立だね！このカードパックをどうぞ！", "This was a successful negotiation! Here's a card pack!"), strbye
			goto *chat_end
		}
		chatMore lang("そうなの？じゃあいいや。", "Really? Then fine."), strbye
		goto *chat_end
	}
	if ( _switch_val == CREATURE_ID_LENAS_THE_MAGE_REPORTER | _switch_sw ) {
		_switch_sw = 0
		if ( gdata(GDATA_FLAG_GUILD_MAGE) == 1 ) {
			if ( gdata(GDATA_FLAG_SUB_MAGE_1) == 0 ) {
				chatList 1, lang("ノルマを貰う", "Do you have any tasks for me?")
			}
			else {
				chatList 2, lang("ノルマを報告する", "About my task.")
			}
		}
		chatList 0, strbye
		buff = lang("私は魔術士ギルドの調査員。ギルドメンバーのサウスティリスでの功績を調査しているのです。", "I'm an agent of the Mage's Guild. I'm monitoring the progress of our guild members in South Tyris.")
		gosub *chat_select
		if ( chatval == 1 ) {
			gdata(GDATA_FLAG_SUB_MAGE_1) = 1
			gdata(GDATA_FLAG_GUILD_MAGE_NORMA) = 75 - gdata(GDATA_RANK_GUILD) / 200
			txt_questupdate
			chatMore lang("良い心がけです。あなたにランク昇格のためのノルマを与えましょう。世界に散らばった古書物を解読し、納入してください。" + gdata(GDATA_FLAG_GUILD_MAGE_NORMA) + "ギルドポイントが集まったら、昇進のための審査会に報告してあげましょう。", "Sure, there're plenty of tasks for you. For now, collect the ancient books and decrypt them. When you gather " + gdata(GDATA_FLAG_GUILD_MAGE_NORMA) + " guild points, we will think about your promotion.")
			goto *chat_unique
		}
		if ( chatval == 2 ) {
			if ( gdata(GDATA_FLAG_GUILD_MAGE_NORMA) > 0 ) {
				chatMore lang("どうしました？まだノルマが残っていますよ。", "You have your task to complete.")
				goto *chat_unique
			}
			gdata(GDATA_FLAG_SUB_MAGE_1) = 0
			flt 51 - gdata(GDATA_RANK_GUILD) / 200
			flttypemajor = FILTER_ITEM_SPELLBOOK
			itemcreate -1, ITEM_ID_DUMMY, cdata(CDATA_X, CHARA_PLAYER), cdata(CDATA_Y, CHARA_PLAYER), 0
			flt
			itemcreate -1, ITEM_ID_GOLD_PIECE, cdata(CDATA_X, CHARA_PLAYER), cdata(CDATA_Y, CHARA_PLAYER), 10000 - gdata(GDATA_RANK_GUILD) + 1000
			flt
			itemcreate -1, ITEM_ID_PLATINUM_COIN, cdata(CDATA_X, CHARA_PLAYER), cdata(CDATA_Y, CHARA_PLAYER), limit(4 - gdata(GDATA_RANK_GUILD) / 2500, 1, 4)
			txt_questcompleted
			txtmore
			txt_questitem
			txt_questupdate
			modrank 8, 500, 8
			chatMore lang("確かにノルマの達成を確認しました。早速本部にあなたの功績を報告しましょう。", "You've done very well. I will give a report of your achievement to the council."), strbye
			goto *chat_end
		}
		goto *chat_end
	}
	if ( _switch_val == CREATURE_ID_NAGA_THE_THIEF_REPORTER | _switch_sw ) {
		_switch_sw = 0
		if ( gdata(GDATA_FLAG_GUILD_THIEF) == 1 ) {
			if ( gdata(GDATA_FLAG_SUB_THIEF_1) == 0 ) {
				chatList 1, lang("ノルマを貰う", "Do you have any tasks for me?")
			}
			else {
				chatList 2, lang("ノルマを報告する", "About my task.")
			}
		}
		chatList 0, strbye
		buff = lang("あたしは盗賊ギルドの調査員…ギルドメンバーのサウスティリスでの功績を調査しているのよ…。", "I'm an agent of the Thieve's Guild... I'm monitoring the progress of our guild members in South Tyris...")
		gosub *chat_select
		if ( chatval == 1 ) {
			gdata(GDATA_FLAG_SUB_THIEF_1) = 1
			gdata(GDATA_FLAG_GUILD_THIEF_NORMA) = (10000 - gdata(GDATA_RANK_GUILD)) * 6 + 1000
			txt_questupdate
			chatMore lang("良い心がけね。あなたにランク昇格のためのノルマを与えるわ。他人の所有物を奪い取り、盗品を売り払いなさい。金貨" + gdata(GDATA_FLAG_GUILD_THIEF_NORMA) + "枚相当の盗品を売ったら、昇進のための審査会に報告してあげる…。", "Alright. The Thieves Guild wants you to put stolen goods into circulation. Steal some goods and sell them to any vendors. When the sum of your earnings reaches " + gdata(GDATA_FLAG_GUILD_THIEF_NORMA) + "gp, we will think about your promotion.")
			goto *chat_unique
		}
		if ( chatval == 2 ) {
			if ( gdata(GDATA_FLAG_GUILD_THIEF_NORMA) > 0 ) {
				chatMore lang("どうしたの？まだノルマが残っているわ…。", "You have your task to complete.")
				goto *chat_unique
			}
			gdata(GDATA_FLAG_SUB_THIEF_1) = 0
			flt 51 - gdata(GDATA_RANK_GUILD) / 200
			flttypemajor = FILTER_FURNITURE
			itemcreate -1, ITEM_ID_DUMMY, cdata(CDATA_X, CHARA_PLAYER), cdata(CDATA_Y, CHARA_PLAYER), 0
			flt
			itemcreate -1, ITEM_ID_GOLD_PIECE, cdata(CDATA_X, CHARA_PLAYER), cdata(CDATA_Y, CHARA_PLAYER), 10000 - gdata(GDATA_RANK_GUILD) + 1000
			flt
			itemcreate -1, ITEM_ID_PLATINUM_COIN, cdata(CDATA_X, CHARA_PLAYER), cdata(CDATA_Y, CHARA_PLAYER), limit(3 - gdata(GDATA_RANK_GUILD) / 3000, 1, 3)
			txt_questcompleted
			txtmore
			txt_questitem
			txt_questupdate
			modrank 8, 500, 8
			chatMore lang("確かにノルマの達成を確認したわ。早速本部にあなたの功績を報告するわね…。", "You've done very well. I will give a report of your achievement to the council."), strbye
			goto *chat_end
		}
		goto *chat_end
	}
	if ( _switch_val == CREATURE_ID_RATIN_THE_FIGHTER_REPORTER | _switch_sw ) {
		_switch_sw = 0
		if ( gdata(GDATA_FLAG_GUILD_FIGHTER) == 1 ) {
			if ( gdata(GDATA_FLAG_SUB_FIGHTER_1) == 0 ) {
				chatList 1, lang("ノルマを貰う", "Do you have any tasks for me?")
			}
			else {
				chatList 2, lang("ノルマを報告する", "About my task.")
			}
		}
		chatList 0, strbye
		buff = lang("私は戦士ギルドの調査員。ギルドメンバーのサウスティリスでの功績を調査しているのだ。", "I'm an agent of the Fighter's Guild. I'm monitoring the progress of our guild members in South Tyris.")
		gosub *chat_select
		if ( chatval == 1 ) {
			repeat
				flt cdata(CDATA_LEVEL, CHARA_PLAYER) + 10
				characreate MAX_CHARA_NC, CREATURE_ID_BUG, -3, 0
				if ( refchara(cdata(CDATA_ID, MAX_CHARA_NC), DBSPEC_CHARA_RARE) < 70 ) {
					continue
				}
				if ( cdata(CDATA_RELATION, MAX_CHARA_NC) != (-3) ) {
					continue
				}
				if ( cdata(CDATA_QUALITY, MAX_CHARA_NC) >= FIX_QUALITY_MIRACLE ) {
					continue
				}
				if ( cdata(CDATA_LEVEL, MAX_CHARA_NC) > cdata(CDATA_LEVEL, CHARA_PLAYER) * 3 ) {
					continue
				}
				break
			loop
			gdata(GDATA_FLAG_GUILD_FIGHTER_NORMA) = 3
			gdata(GDATA_FLAG_GUILD_FIGHTER_THIEF) = cdata(CDATA_ID, MAX_CHARA_NC)
			chara_vanquish MAX_CHARA_NC
			gdata(GDATA_FLAG_SUB_FIGHTER_1) = 1
			txt_questupdate
			chatMore lang("良い心がけだ。お前にランク昇格のためのノルマを与えよう。" + refchara(gdata(GDATA_FLAG_GUILD_FIGHTER_THIEF), DBSPEC_CHARA_NAME_ORG, 1) + "をあと" + gdata(GDATA_FLAG_GUILD_FIGHTER_NORMA) + "匹討伐してからまた来なさい。本部に報告してあげよう。", "There's a task for you. Go find and slay " + gdata(GDATA_FLAG_GUILD_FIGHTER_NORMA) + " " + refchara(gdata(GDATA_FLAG_GUILD_FIGHTER_THIEF), DBSPEC_CHARA_NAME_ORG, 1) + ". Then we will think about your promotion."), strbye
			goto *chat_unique
		}
		if ( chatval == 2 ) {
			if ( gdata(GDATA_FLAG_GUILD_FIGHTER_NORMA) > 0 ) {
				chatMore lang("どうした？まだノルマが残っているぞ。", "You have your task to complete.")
				goto *chat_unique
			}
			gdata(GDATA_FLAG_SUB_FIGHTER_1) = 0
			flt 51 - gdata(GDATA_RANK_GUILD) / 200, calcfixlv(FIX_QUALITY_GREAT)
			flttypemajor = FILTER_WEAPON
			itemcreate -1, ITEM_ID_DUMMY, cdata(CDATA_X, CHARA_PLAYER), cdata(CDATA_Y, CHARA_PLAYER), 0
			flt
			itemcreate -1, ITEM_ID_GOLD_PIECE, cdata(CDATA_X, CHARA_PLAYER), cdata(CDATA_Y, CHARA_PLAYER), 10000 - gdata(GDATA_RANK_GUILD) + 1000
			flt
			itemcreate -1, ITEM_ID_PLATINUM_COIN, cdata(CDATA_X, CHARA_PLAYER), cdata(CDATA_Y, CHARA_PLAYER), limit(4 - gdata(GDATA_RANK_GUILD) / 2500, 1, 4)
			txt_questcompleted
			txtmore
			txt_questitem
			txt_questupdate
			modrank 8, 500, 8
			chatMore lang("確かにノルマの達成を確認した。早速本部にお前の功績を報告しよう。", "You've done very well. I will give a report of your achievement to the council."), strbye
			goto *chat_end
		}
		goto *chat_end
	}
	if ( _switch_val == CREATURE_ID_NORNE_THE_GUIDE | _switch_sw ) {
		_switch_sw = 0
		if ( gdata(GDATA_AREA) == AREA_AIMWELL ) {
			if ( gdata(GDATA_FLAG_MAIN) == 780 ) {
				chatMore lang("君は今！ガイアス・ヴィスへの第一歩を踏み出した！", "Sorry, this is untranslated sentence.")
				chatMore lang("ここまで長かった…この世界ではまだ1年程度しか経っていないけれど、ボクはループ込みで10年以上対応にあたっていたんだ。ようやく君という因子を見つけて連れてくることができたよ。", "Sorry, this is untranslated sentence.")
				chatMore lang("うーん。でもまだ君の認識が次元を超えて追いついていないみたいだね。おそらく君の目には、多くのものがイルヴァのものに置き換わって見えるだろう。", "Sorry, this is untranslated sentence.")
				chatMore lang("さて…見る限り、依然として廃忘獣がはびこっているようだね…。あのお方は大丈夫だろうか。一緒に探しに行こう！", "Sorry, this is untranslated sentence.")
				chatMore lang("えっ。あのお方が誰かって？ああ、まだ説明してなかったっけ。", "Sorry, this is untranslated sentence.")
				chatMore lang("叡智を司る中級神であるソピアーは知っているよね。あのお方は彼女の兄姉たち28柱が合神した、超越神だよ。幾多の神々を吸収した混沌の神に対抗するための措置だったらしいね。ちなみにソピアーは一回堕天している影響でうまく合神できなかったんだって。", "Sorry, this is untranslated sentence.")
				chatMore lang("あのお方はガイアス・ヴィスの実情を知って、色々と便宜を図ってくれた。今は直接、忘却の女神と戦っているはずだ。こうしてボクが覚えている以上、間違いなく無事なはずなんだけど…。", "Sorry, this is untranslated sentence.")
				chatMore lang("一度引き返したい場合は、こちら側のロイターを経由してね。そこの炭鉱街…ザイールにいるはずだから。", "Sorry, this is untranslated sentence.")
				gdata(GDATA_FLAG_MAIN) = 790
				goto *chat_end
			}
		}
		if ( gdata(GDATA_AREA) == AREA_VERNIS ) {
			if ( gdata(GDATA_FLAG_MAIN) == 770 ) {
				chatMore lang("そうそう、君に渡しておくものがあった。", "Sorry, this is untranslated sentence.")
				txtef COLOR_GREEN
				txt lang("[記憶の灯]を手に入れた！", "You obtain the [Light of Memory ]!")
				snd SOUNDLIST_COMPLETE1
				chatMore lang("それは生命情報を記録するアストラル光の塊。記憶をバックアップしてくれるから、記憶消去攻撃を受けてもかなり軽減できるらしいよ。", "Sorry, this is untranslated sentence.")
				chatMore lang("さらに、世界を行き来するための道具でもあるんだ。ロイターに向かって使ってみて。現時点で、彼は誰よりもガイアス・ヴィスとの結びつきが強い。あちら側にも極めて近い存在がいるんだ。記憶の灯はその繋がりを照らして導いてくれるよ。", "Sorry, this is untranslated sentence.")
				gdata(GDATA_FLAG_MAIN) = 780
				txt_questupdate
				goto *chat_end
			}
		}
		if ( gdata(GDATA_AREA) == AREA_NORTH_TYRIS ) {
			if ( gdata(GDATA_FLAG_MAIN) == 765 ) {
				chatMore lang("さぁ、時は来た！", "Well, the time has come!")
				gdata(GDATA_FLAG_MAIN) = 770
				chatList 0, lang("ああ！", "Yes.")
				chatList 1, lang("忘れたなぁ？", "No.")
				buff = lang("ボクに協力してほしい。前に話したことは憶えているよね？", "Sorry, this is untranslated sentence.")
				gosub *chat_select
				if ( chatval == 1 ) {
					chatMore lang("忘却の女神の力がここまで及んでいるなんて！もう、時間がないみたいだね…。", "Sorry, this is untranslated sentence.")
				}
				chatMore lang("ヴェルニースの酒場に来てほしい。今残っている場所では、あそこが一番つながりの強いところなんだ。", "Sorry, this is untranslated sentence.")
				goto *chat_end
			}
		}
		if ( gdata(GDATA_AREA) == AREA_CHAOS_CRADLE ) {
			if ( gdata(GDATA_FLAG_MAIN) >= 525 ) {
				chatMore lang("その時が来たら、君にも協力してもらいたいと思っているんだ。そしてガイアス・ヴィスの話も憶えておいてほしい。人も世界も、完全に忘れられた時に本当の死を迎えるのだから。", "When the time comes, I'd like for you to cooperate with me too. And I want you to learn more of Gaius Vis. For people and different worlds, death only truly comes when you've been completely forgotten."), strbye
			}
			if ( gdata(GDATA_FLAG_MAIN) == 520 ) {
				chatMore lang("いやぁ、君が宇宙人の相手をしてくれてようやく解放されたよ。それじゃあ本題について話すよ。…君には真の脅威について知っておいて欲しいんだ。", "Finally you've got the space man out of my hair. Let's talk for a minute... I'd like for you to know the true threat.")
				chatMore lang("実は、ボクはこの世界の出身じゃない。ガイアス・ヴィスという別世界から来たんだ。妖精族の中でもエルンと呼ばれる特別な種族で、あちら側では訛ってエルフとも呼ばれていたよ。", "To be honest, I'm not from this world. I'm from a world known as Gaius Vis. In my world, there's a special race of fairy known as Elun, also known there by the name of Elves.")
				chatMore lang("ガイアス・ヴィスはこのイルヴァの姉妹世界。同じようにエーテルの風が吹き、人々は異形の森を排除しようとしていた。けれどその矢先、突如として現れた忘却の化身に侵略され、世界のおよそ95％が記憶ごと存在消滅しガイアス・ヴィスは滅んだ。消滅した部分には何があったのか、どんな人々が暮らしていたのか、ボクにももう思い出せない。", "Gaius Vis is a sister world to Ylva. It also has the Etherwind, and a group that wanted to destroy the Heretical Forest. But suddenly, Gaius Vis was invaded by the avatar of Oblivion, utterly obliterating the existence of 95% of the world. Gaius Vis collapsed.")
				chatMore lang("そんな時、絶望するボクの前に現れたのがあのお方だったんだ！ボクはあのお方の力を借りて時間を巻き戻し、運命を変えようと努力した。イレギュラーと成り得る旅人を何人も導き、何度も共に戦った。戦いの中で、ボクの先祖である運命の女神ノルンの力も覚醒した。同じ女神の血統を持つ巨人族・小人族の末裔とも協力した。", "It was then that \"he\" appeared before me! I borrowed his power and rewound time, attempting to change fate. I guided many adventurers with the potential to become anomalies, and fought together with them many times. In these fights, the power of my ancestor, the Goddess of Destiny Norne, awoke within me. I worked together with the dwarves and giants, both of whom also shared my lineage.")
				chatMore lang("でも何千回繰り返してもダメだった！なんとか街ひとつとその周囲を含むごく一部の地域の存在は守れた程度で、消滅する運命にある世界の大半には干渉すらできなかった。導いた旅人たちはどこへも行けず、疲弊し、考えるのをやめ、最後はいつも忘却の海へと消えていった。君にわかるかい、この絶望が。この怒りが。", "But no matter how many times we fought, the destiny of the world could not be changed! Somehow I was able to protect a single town and its surroundings, but the vast majority of the world couldn't be saved from extinction. The adventurers I had led could do nothing, eventually giving up and themselves fading into oblivion as everything else had done. Can you understand my despair? My anger?")
				chatMore lang("そしてボクはあのお方から聞いた。イルヴァという姉妹世界も忘却の化身に狙われていると。ガイアス・ヴィスの悲劇を繰り返してはいけない。そう思ったボクらはこちら側に移り住み、迎撃準備を始めた。忘却の化身に滅ぼされたいくつもの世界から生存者をかき集め、運命変革因子として揃えた。", "And then \"he\" told me. The sister world of Ylva was also to be targeted by the avatar of Oblivion. I cannot allow the tragedy of Gaius Vis to be repeated. With that singular purpose in my heart, I came to this world and began preparing to counter the invasion. I gathered surviving individuals from many worlds destroyed by the avatar of Oblivion, using them as a bid to alter fate.")
				chatMore lang("そうして奴らの尖兵を撃退することには成功したんだ。一匹は完全に抹殺し、一匹はエウダーナの老魔導士が支配して制御に成功した。残り一匹、死にぞこないがサウスティリスに潜伏しているみたいだけど、あれはもう本来の力を取り戻せないから大丈夫だよ。", "The repelling of their vanguard was a success. One was killed entirely, and the other successfully dominated by a mage from Eulderna. One remains hidden away in South Tyris, but since he cannot regain his original power, it's not a concern.")
				chatMore lang("けれどまだ事態は解決していない。わずかに運命が更新されたに過ぎない。奴らは忘却という概念そのもの…いつか、必ず奴らの本隊がやってきて世界は滅びる運命にある。でもそんなことは承知の上。ボクは最後まで足掻いてみせる。そう、どんな手を使ってもね。", "But it's not over yet. Fate has not truly been changed - only slightly altered. Oblivion... One day, when their main forces arrive, this world is destined to fall. I understand that. Still, I'll keep fighting. I'll fight them every way I can."), strbye
				gdata(GDATA_FLAG_MAIN) = 525
				goto *chat_end
			}
			if ( gdata(GDATA_FLAG_MAIN) < 520 ) {
				chatMore lang("あー！いいところに来てくれたね。ちょっとここに潜る途中で見知らぬ宇宙人に絡まれちゃってさ。ボクがガイドだからってしつこく聞いてくるんだけど、宇宙人が探してる人間なんて知るわけないよ。誰だよ黒髪の少年で名前がクロヤンって。", "Ah! Perfect timing. I seem to have gotten tangled up with this strange space guy here. I'm a guide, but I don't know the person he's looking for. Do you by chance happen to know a black-haired boy by the name of Kuro?")
				chatMore lang("君に話があるんだけどね…先にあのしつこい宇宙人をここから連れ出してよ。迷惑なんだよね。", "I have something I need to tell you, but... First you need to get this guy out here. He's annoying.")
				goto *chat_end
			}
			goto *chat_end
		}
		if ( gdata(GDATA_AREA) == AREA_GUARDIAN_SHRINE ) {
			chatList 0, lang("する", "Do it.")
			chatList 1, lang("しない", "Nope.")
			buff = lang("ノースティリスへ移動する？", "Want to go to North Tyris?")
			gosub *chat_select
			if ( chatval == 0 ) {
				if ( gdata(GDATA_FLAG_DUEL_TARGET) > 0 ) {
					snd SOUNDLIST_FAIL1
					txt_duel2
					goto *chat_end
				}
				chatMore lang("はい、ノースティリスへご案内〜。", "Let me be your guide~")
				animeid = ANIMATION_GENE
				anic = 0
				gosub *anime
				gdata(GDATA_TELEPORT_AREA) = AREA_NORTH_TYRIS
				gdata(GDATA_TELEPORT_LEVEL) = 1
				levelexitby = 4
				prevsekai = gdata(GDATA_WORLD)
				gdata(GDATA_WORLD_RENEW) = 1
				gdata(GDATA_WORLD) = AREA_NORTH_TYRIS
				gdata(GDATA_WORLD_X) = adata(ADATA_X, AREA_LARNA), adata(ADATA_Y, AREA_LARNA)
				fixtransfermap = 1
				chatteleport = 1
				goto *chat_end
			}
			chatMore lang("冷やかしは迷惑だよ。", "Don't bother me then.")
			goto *chat_end
		}
		if ( gdata(GDATA_AREA) == AREA_LARNA ) {
			chatList 0, lang("する", "Do it.")
			chatList 1, lang("しない", "Nope.")
			buff = lang("ロストイルヴァへ移動する？", "Want to go to Lost Ylva?")
			gosub *chat_select
			if ( chatval == 0 ) {
				if ( gdata(GDATA_FLAG_DUEL_TARGET) > 0 ) {
					snd SOUNDLIST_FAIL1
					txt_duel2
					goto *chat_end
				}
				chatMore lang("はい、ロストイルヴァへご案内〜。", "Let me be your guide~")
				animeid = ANIMATION_GENE
				anic = 0
				gosub *anime
				gdata(GDATA_TELEPORT_AREA) = AREA_LOST_YLVA
				gdata(GDATA_TELEPORT_LEVEL) = 1
				levelexitby = 4
				prevsekai = gdata(GDATA_WORLD)
				gdata(GDATA_WORLD_RENEW) = 1
				gdata(GDATA_WORLD) = AREA_LOST_YLVA
				gdata(GDATA_WORLD_X) = adata(ADATA_X, AREA_GUARDIAN_SHRINE), adata(ADATA_Y, AREA_GUARDIAN_SHRINE)
				fixtransfermap = 1
				chatteleport = 1
				goto *chat_end
			}
			chatMore lang("冷やかしは迷惑だよ。", "Don't bother me then.")
			goto *chat_end
		}
		if ( gdata(GDATA_FLAG_MAIN) == 390 ) {
			chatList 0, lang("わかった", "Alright.")
			chatList 1, lang("逃げ出さずに待っていろ", "Don't run off this time.")
			buff = lang("ああ、こんなところにいたんだね！ちょうどいい。神々の力でノースティリスへ続く道が開通したんだ。君も地上へ降りたいなら中央神殿までおいでよ。待ってるよ。", "Ah, there you are! Good timing. The power of the gods has just opened a path to North Tyris. If you want to return to the surface, just come to the shrine. I'll be waiting.")
			gosub *chat_select
			if ( chatval == 1 ) {
				chatMore lang("はぁ。君は何を言っているんだい？", "Hah. What are you talking about?")
			}
			chatMore lang("それじゃ、またね。", "Anyways, I'm off. See you later."), strbye
			gdata(GDATA_FLAG_MAIN) = 394
			goto *chat_end
		}
		if ( gdata(GDATA_FLAG_MAIN) == 363 ) {
			chatMore lang("久しぶり…になるのかな？しばらく見ないうちに立派な冒険者になったみたいだね、ボクも案内をした甲斐があったよ。", "Long time no see... I guess? You've become quite the adventurer since the last time I saw you. It was worth guiding you after all.")
			chatList 0, lang("わかった", "Alright.")
			chatList 1, lang("どちらさまですか？", "May I ask who's calling?")
			buff = lang("突然召喚されて戸惑っているのかな？ここはエウダーナ上空を浮遊している大陸、ロストイルヴァさ。君より先に呼ばれた人たちがそこの遺跡に大勢いるし、詳しい話は彼らから訊いてみるといいよ。", "Are you confused about being suddenly called here? This is Lost Ylva, the floating continent above Eulderna. There are many people in those ruins that were summoned before you, so you should ask them if you want to know the details.")
			gosub *chat_select
			if ( chatval == 1 ) {
				chatMore lang("うん？悪いけど君の冗談に付き合っているほど暇じゃないんだ。", "Hmm? Sorry, but I'm far too busy to sit here and joke around with you.")
			}
			chatMore lang("それじゃあボクはこれで。他にも案内しなきゃいけない冒険者がいるんだ。ああ、忙しい。", "I'll be off then. There are lots of other adventurers I need to guide. Man, so busy."), strbye
			gdata(GDATA_FLAG_MAIN) = 364
			goto *chat_end
		}
		goto *chat_end
	}
	if ( _switch_val == CREATURE_ID_MELUGAST_TYPE0_THE_DIMENSION_DRIVER | _switch_sw ) {
		_switch_sw = 0
		if ( gdata(GDATA_FLAG_MAIN) == 365 ) {
			chatMore lang("よう、" + cdatan(CDATAN_NAME, CHARA_PLAYER) + "。こちらはガベラだ。あー、このメッセージはエウダーナ上空の浮遊大陸でお前を発見した場合に、自動再生されるよう設定してある。", "Yo, " + cdatan(CDATAN_NAME, CHARA_PLAYER) + ". It's me, Gavela. Ah, this message is set to auto-play when this machine finds you on the floating island above Eulderna.")
			chatMore lang("驚いたぞ、突然お前の現在座標がエウダーナの上空に移動したんでな。現在、浮遊大陸は周囲を特殊な結界で囲まれており、人間はおろか機械も魔物も通行ができない状態だ。もっとも、このメルガストは次元歪曲航法により結界自体を無視して行き来が可能なわけだが…。", "I was surprised to see your coordinates suddenly jump to above Eulderna. Currently the floating continent is surrounded by some sort of barrier. Neither men, machines, nor monsters can get in. That said, this Melugast can ignore the barrier completely through dimensional navigation...")
			chatMore lang("なお、このメッセージの30秒後に本機は現空域を離脱する。探索の最中かもしれんが、取り残されたくなければさっさと乗るべきだぞ。", "Also, this Melugast is set to leave 30 seconds after this message ends. It might be upsetting to be interrupted during your investigation, but you should get on quickly if you don't want to be left behind.")
			redraw 0
			gosub *screen_draw
			gosub *screen_fade
			snd SOUNDLIST_BOLT1
			gsel 4
			pos 0, 0
			picload exedir + "graphic\\face1" + devfile + ".bmp", 1
			gsel 0
			gdata(GDATA_TELEPORT_AREA) = AREA_SOUTH_TYRIS
			gdata(GDATA_TELEPORT_LEVEL) = 1
			levelexitby = 2
			prevsekai = gdata(GDATA_WORLD)
			gdata(GDATA_WORLD_RENEW) = 1
			gdata(GDATA_WORLD) = AREA_SOUTH_TYRIS
			gdata(GDATA_RUN_DIR) = 1
			gdata(GDATA_LAST_EDGE_X) = -1
			fixtransfermap = 0
			gdata(GDATA_FLAG_MAIN) = 366
			dbg_skipevent = 1
			gdata(GDATA_HOUR) += 2
			gosub *advance_hour
			dbg_skipevent = 0
			chatteleport = 1
			goto *chat_end
		}
		else {
			if ( gdata(GDATA_FLAG_MAIN) >= 368 ) {
				chatList 0, lang("する", "Do it.")
				chatList 1, lang("しない", "Nope.")
				buff = lang("登録データとの照合完了。次元歪曲シーケンスを開始するか？", "Verifying against registered data. Identity confirmed. Begin dimensional distortion sequence?")
				gosub *chat_select
				if ( chatval == 0 ) {
					if ( gdata(GDATA_FLAG_DUEL_TARGET) > 0 ) {
						snd SOUNDLIST_FAIL1
						txt_duel2
						goto *chat_end
					}
					chatMore lang("了解。搭乗を確認したら発進する。なお、到着まで約2時間を要する。", "Command accepted. Sequence will begin once boarding is confirmed. The flight time today will be a total of two hours. Please keep limbs inside the vehicle at all times.")
					redraw 0
					gosub *screen_draw
					gosub *screen_fade
					snd SOUNDLIST_BOLT1
					gsel 4
					pos 0, 0
					picload exedir + "graphic\\face1" + devfile + ".bmp", 1
					gsel 0
					if ( gdata(GDATA_AREA) == AREA_ULM_LESON ) {
						gdata(GDATA_TELEPORT_AREA) = AREA_SOUTH_TYRIS
					}
					if ( gdata(GDATA_AREA) == AREA_ANCIENT_GARDEN ) {
						gdata(GDATA_TELEPORT_AREA) = AREA_LOST_YLVA
					}
					gdata(GDATA_TELEPORT_LEVEL) = 1
					levelexitby = 4
					prevsekai = gdata(GDATA_WORLD)
					if ( gdata(GDATA_AREA) == AREA_ULM_LESON ) {
						gdata(GDATA_WORLD_RENEW) = 1
						gdata(GDATA_WORLD) = AREA_SOUTH_TYRIS
					}
					if ( gdata(GDATA_AREA) == AREA_ANCIENT_GARDEN ) {
						gdata(GDATA_WORLD_RENEW) = 1
						gdata(GDATA_WORLD) = AREA_LOST_YLVA
					}
					if ( gdata(GDATA_AREA) == AREA_ULM_LESON ) {
						gdata(GDATA_WORLD_X) = adata(ADATA_X, AREA_MELUGAS), adata(ADATA_Y, AREA_MELUGAS)
					}
					if ( gdata(GDATA_AREA) == AREA_ANCIENT_GARDEN ) {
						gdata(GDATA_WORLD_X) = adata(ADATA_X, AREA_ULM_LESON), adata(ADATA_Y, AREA_ULM_LESON)
					}
					fixtransfermap = 1
					dbg_skipevent = 1
					gdata(GDATA_HOUR) += 2
					gosub *advance_hour
					dbg_skipevent = 0
					chatteleport = 1
					goto *chat_end
				}
				chatMore lang("冷やかしか…？休止状態に移行する。", "Just checking...? Then I will initiate hibernation mode.")
				goto *chat_end
			}
			goto *chat_end
		}
		goto *chat_end
	}
	if ( _switch_val == CREATURE_ID_SAIMEF_THE_DOGGOD | _switch_sw ) {
		_switch_sw = 0
		if ( gdata(GDATA_AREA) == AREA_CHAOS_CRADLE ) {
			if ( gdata(GDATA_FLAG_MAIN) >= 530 ) {
				chatMore lang("ヨロテオトル…神の心臓を失っても、神力がある限り身体は維持できます。心配なんかしなくていいんですよ。", "God heart... Even without the heart of a god, so long as I retain my powers, I can maintain my body."), strbye
				goto *chat_end
			}
			if ( gdata(GDATA_FLAG_MAIN) == 525 ) {
				chatMore lang("あれ、君は…また会いましたね。", "Oh, you... We meet again.")
				chatMore lang("覚えていませんか？ノイエル・メイルーン間で君たちを運んだ犬神です。大氷河を駆け抜けるのはさすがに疲れるので悪魔戦には参加できませんでしたが、君たちの戦いを見守っていましたよ。", "Don't you remember me? I'm the doggod that carried you between Noyel and Mayroon. I wasn't able to help with your fight against the demon after bringing you across the glacier, but I did watch.")
				chatMore lang("今ここにいる理由ですか？自分も何かできないかと思い、神の間を目指してこの大陸に来たのですが…最深層に神が入ると、神力を吸われてしまうと警告されましてね。ええ、途中で会った妖精の方から聞いた話です。それで仕方がなく、後続のためにここで露払いをしているというわけです。", "Perhaps that's what brought me here? With the knowledge that I cannot do everything by myself, I came to this land to reach the Eternal Seal... But I have been warned that when a god enters that place, their divine power will be lost. That is the story I heard from the fairy I met on my way here. For the sake of my followers, I must stop my quest here.")
				chatMore lang("ここで会ったのも縁…まぁ、あの時君と一緒にいた銀髪の子にも会ったのですが、話を聞いてもらえなかったので。自分は、地元のメイルーンを救ってくれた君に賭けてみたい。", "It must be fate that we meet here... Well, we did meet before, but you were wil that silver-haired lass so we were unable to speak. I want to place my hopes in you, the one who was able to save Mayroon.")
				chatMore lang("(突然、" + name(tc) + "は自らの胸を抉りぬいた！)", "(Suddenly, Saimef reaches into his own chest and pulls out his heart!)")
				snd SOUNDLIST_STAB
				cdata(CDATA_CONDITION_BLEED, tc) = 30
				chatMore lang("あぐっ…がああ…！び、微力ですがこれを役立ててください。どうか、混沌の神を…！", "Guh... Aghh...! It's not much, but take this. Somehow, please, stop the God of Chaos...!")
				flt
				itemcreate -1, ITEM_ID_EVITEM, cdata(CDATA_X, CHARA_PLAYER), cdata(CDATA_Y, CHARA_PLAYER), 0
				if ( stat != 0 ) {
					inv(INV_ITEM_PARAM1, ci) = EVITEM_HEART_GOD
					inv(INV_ITEM_STATUS, ci) = ITEM_STATUS_NORMAL
				}
				snd SOUNDLIST_COMPLETE1
				txt_questitem
				gdata(GDATA_FLAG_MAIN) = 530
				autosave = 1 * (gdata(GDATA_AREA) != AREA_SHOW_HOUSE)
				goto *chat_end
			}
		}
		goto *chat_end
	}
	if ( _switch_val == CREATURE_ID_SPIPHA_THE_DRAGON_HUNTER | _switch_sw ) {
		_switch_sw = 0
		if ( gdata(GDATA_AREA) == AREA_CHAOS_CRADLE ) {
			if ( gdata(GDATA_FLAG_MAIN) >= 500 ) {
				chatMore lang("ドラゴン種族殺すべし。慈悲はないわ。", "All dragons must be killed. There's no room for compassion."), strbye
				goto *chat_end
			}
			if ( gdata(GDATA_FLAG_MAIN) == 495 ) {
				chatMore lang("ドラゴンの強い魔力を複数感知したから探索に来てみたんだけど…いやー、きっついわねこの城。やたらとモンスターが強くて、進むのに一苦労よ。これってネフィアの守護者と同じ原理で強化されてるのかしらね？", "I came here to search since I felt multiple strong magical powers - like those of a dragon - from this place, but... This castle is a pain. The enemies are strong, so it's hard to proceed. Are the enemies here strengthened by the same powers as the Guardians in ruins of Nefia?")
				chatMore lang("はぁ…そろそろ一度戻って、鍛えなおしてこようかしら。", "Hah... Guess it's time I head back and rest up so that I can try again."), strbye
				gdata(GDATA_FLAG_MAIN) = 500
				goto *chat_end
			}
			goto *chat_end
		}
		if ( gdata(GDATA_FLAG_SUB_WHEN_THE_FLAME_BURNS_OUT) >= 1000 ) {
			chatMore lang("今回は違ったけれど、もし黒い体に銀の瞳のドラゴンを見つけたら私に教えて。そいつが、私がドラゴンハンターになった理由のひとつなのよ。", "Let me know if you find a black dragon with silver eyes. That one is the reason I became a Dragon Hunter."), strbye
			goto *chat_end
		}
		if ( gdata(GDATA_FLAG_SUB_WHEN_THE_FLAME_BURNS_OUT) == 2 ) {
			chatMore lang("火山から強大なドラゴンの魔力を感じなくなったわ。あなたが討伐してくれたんでしょ？話を聞かせてもらえる？", "I can't feel the dragon's magic from the volcano anymore. Did you kill it? Could you tell me about it?")
			redraw 0
			gosub *screen_draw
			gosub *screen_fade
			gsel 4
			pos 0, 0
			picload exedir + "graphic\\face1" + devfile + ".bmp", 1
			gsel 0
			chatMore lang("なるほどね、身体に火を纏った竜だったんだ。うーん…火の鳥だったら私も何羽か見かけたんだけど、擬態してその中に混ざっていたのかしらね？", "I see, so it was a Fire Dragon. Hmm... I did see a lot of phoenixes. I wonder if it was using them for camouflage?")
			chatMore lang("あ、そうだ。ドラゴンハンターとして頑張った君にこれを進呈するわ。これからもじゃんじゃん竜を狩っていって！", "Ah, right. Let me give you this for your hard work as a (Dragon) Hunter. Keep Hunting!"), strbye
			gdata(GDATA_FLAG_SUB_WHEN_THE_FLAME_BURNS_OUT) = 1000
			txt_questupdate
			flt
			nostack = 1
			itemcreate -1, ITEM_ID_MATERIAL_KIT, cdata(CDATA_X, CHARA_PLAYER), cdata(CDATA_Y, CHARA_PLAYER), 0
			inv(INV_ITEM_MATERIAL, ci) = ITEM_MATERIAL_DRAGON
			flt
			itemcreate -1, ITEM_ID_DRAGON_SLAYER, cdata(CDATA_X, CHARA_PLAYER), cdata(CDATA_Y, CHARA_PLAYER), 0
			flt
			itemcreate -1, ITEM_ID_PLATINUM_COIN, cdata(CDATA_X, CHARA_PLAYER), cdata(CDATA_Y, CHARA_PLAYER), 15
			txt_questcompleted
			txtmore
			txt_questitem
			goto *chat_end
		}
		if ( gdata(GDATA_FLAG_SUB_WHEN_THE_FLAME_BURNS_OUT) == 1 ) {
			chatMore lang("ドラゴンの魔力はいまだ健在…一体どこに隠れているのかしら。", "The dragon is still alive and well... Where the hell is it hiding...?"), strbye
			goto *chat_end
		}
		if ( gdata(GDATA_FLAG_SUB_WHEN_THE_FLAME_BURNS_OUT) == 0 ) {
			chatList 0, lang("いるみたい？", "\"Seems like\"?")
			chatList 1, lang("興味ない", "Not interested.")
			buff = lang("ねぇねぇ、ドラゴン狩りに興味はない？この遺跡の南に火山があるんだけど、どうもその最奥に強力なドラゴンがいるみたいなの。", "Ooh, ooh, are you interested in a dragon hunt? Seems like there's a dragon in the inner parts of the volcano that's south of these ruins.")
			gosub *chat_select
			if ( chatval == 0 ) {
				chatMore lang("あ、いるみたいってのはね。私、子供の頃にたちの悪いドラゴンに呪われちゃって体が半竜になってるのよ。で、その代わりと言ったらあれだけど、ドラゴンの発する魔力を感じ取ることができるの。", "Ah, well, see, I was cursed by a dragon as a child and became a half-dragon. So, uh, well, I can kind of sense the magical power that dragons emit.")
				chatMore lang("火山内部から感じた竜の魔力は尋常じゃなかった。あれは災厄クラスよ。ただ、火山には私も何度か討伐に行ってるんだけど竜の子一匹見つけられないのよね。魔力は確かに感じるから、もしかすると姿を隠す能力を持っているのかもしれないわ。", "The power I felt from the dragon in that volcano wasn't ordinary. That dragon is Calamity class. But despite going there to put it down several times, I haven't seen a single hint of a dragon. I know it's there, so maybe it has the ability to conceal itself somehow.")
				chatMore lang("もしあなたがそれらしいドラゴンを見つけたら、私に代わって討伐してほしいの。これは私からのドラゴンサブクエストよ！", "If you find the dragon, I want you to put it down for me. This is my Dragon (Sub)Quest!"), strbye
				gdata(GDATA_FLAG_SUB_WHEN_THE_FLAME_BURNS_OUT) = 1
				txt_questupdate
				goto *chat_end
			}
			else {
				chatMore lang("えーと。そこまではっきり拒否されると、話続けられないっていうかなんというか…。", "Umm... I can't really keep going if you refuse me already..."), strbye
				goto *chat_end
			}
		}
		goto *chat_end
	}
	if ( _switch_val == CREATURE_ID_ALICE_THE_BIG_ANT | _switch_sw ) {
		_switch_sw = 0
		if ( gdata(GDATA_FLAG_SUB_THE_TRUE_APPEARANCE) >= 1001 ) {
			chatMore lang("アリーヴェデルチ！", "Arrivederci!"), strbyea
			goto *chat_end
		}
		if ( gdata(GDATA_FLAG_SUB_THE_TRUE_APPEARANCE) == 1000 ) {
			chatMore lang("私カラモ、礼ヲ言ワセテクダサイ。", "I want TO SAY thank you ALSO.")
			chatMore lang("元ノ姿ニ戻シテクレテ…", "For RETURNING me to MY original form...")
			chatMore lang("本当ニ、本当ニ…", "Truly... Truly...")
			chatMore lang("サンキューベリマッチ！！", "Arigatou gozaimashita!"), strbye
			gdata(GDATA_FLAG_SUB_THE_TRUE_APPEARANCE) = 1001
			snd SOUNDLIST_DING1
			goto *chat_end
		}
		if ( gdata(GDATA_FLAG_SUB_THE_TRUE_APPEARANCE) >= 6 & gdata(GDATA_FLAG_SUB_THE_TRUE_APPEARANCE) < 1000 ) {
			chatMore lang("アリッス。", "Alice."), strbye
			goto *chat_end
		}
		if ( gdata(GDATA_FLAG_SUB_THE_TRUE_APPEARANCE) < 6 ) {
			chatMore lang("ギャオオオオオ！", "Gyaaaaaaaaa!")
			if ( gdata(GDATA_FLAG_SUB_THE_TRUE_APPEARANCE) == 5 ) {
				chatList 6, lang("薬をぶつける", "Strike with the medicine.")
				chatList 5, lang("薬を浴びせる", "Pour the medicine on.")
				chatList 4, lang("薬を塗る", "Apply the medicine.")
				chatList 3, lang("薬を注射する", "Inject the medicine.")
				chatList 2, lang("薬を飲ませる", "Make her drink the medicine.")
				chatList 1, lang("薬を渡す", "Hand her the medicine.")
				chatList 0, lang("薬を上にあげる", "Hold the medicine out of her reach.")
				buff = lang("(" + cdatan(CDATAN_NAME, tc) + "は不思議そうにこちらを見ている)", "(" + cdatan(CDATAN_NAME, tc) + " eyes you with curiosity.)")
				gosub *chat_select
				if ( chatval < 1 | chatval > 6 ) {
					if ( chatval == 0 ) {
						txt lang("ハイ、上にあげたー。", "Wow, it's so high~")
					}
					chatMore lang("…？？？", "...???"), strbye
					goto *chat_end
				}
				if ( chatval == 6 ) {
					snd SOUNDLIST_CRUSH2
				}
				if ( chatval == 5 | chatval == 4 ) {
					snd SOUNDLIST_WATER2
				}
				if ( chatval <= 3 & chatval >= 1 ) {
					snd SOUNDLIST_DRINK1
				}
				txt lang("おや？" + cdatan(CDATAN_NAME, tc) + "の様子が…！？", "Oh? " + cdatan(CDATAN_NAME, tc) + " form is...!?")
				msg_halt
				animeid = ANIMATION_GENE
				anic = tc
				gosub *anime
				cdata(CDATA_PIC, tc) = xy2pic(15, 19) + COLOR_LIGHT_GREEN * COLOR_TINT_MULT
				gdata(GDATA_FLAG_SUB_THE_TRUE_APPEARANCE) = 6
				txt_questupdate
			}
			goto *chat_end
		}
		goto *chat_end
	}
	if ( _switch_val == CREATURE_ID_MARY_THE_INSECT_MASTER | _switch_sw ) {
		_switch_sw = 0
		if ( gdata(GDATA_AREA) == AREA_CHAOS_CRADLE ) {
			if ( gdata(GDATA_FLAG_MAIN) >= 570 ) {
				chatMore lang("ああ、アリスは私が置いてきたわ。ハッキリ言ってこのネフィアにはついていけない…。", "Oh, I've left Alice and I told her clearly to not follow me to Nefia."), strbye
				goto *chat_end
			}
			if ( gdata(GDATA_FLAG_MAIN) == 565 ) {
				chatMore lang("森の王様の力も借りてここまで来たけれど、ちょっと…いや、かなり厳しくなってきたわね。あなたはまだ余裕がありそうね…すごいわ。", "I'll borrow the power of the king of the forest... hang on, ...oh no! Maybe that was a bit too much. Yet you still have power in you... how wonderful.")
				chatMore lang("蟲の研究ができなくなるのは困るから、私たちは神の間を真面目に目指しているのよ。これでも一応はね。", "Losing our insect research was bit off a problem, but we have the goal of making the relations between the gods grave. This will have to do for now."), strbye
				gdata(GDATA_FLAG_MAIN) = 570
				goto *chat_end
			}
			goto *chat_end
		}
		if ( gdata(GDATA_FLAG_SUB_THE_TRUE_APPEARANCE) >= 1000 ) {
			chatMore lang("娘には内緒よ？", "Keep this a secret from my daughter, okay?"), strbye
			goto *chat_end
		}
		if ( gdata(GDATA_FLAG_SUB_THE_TRUE_APPEARANCE) == 6 ) {
			chatMore lang("薬をあげてきてくれたのね！さて、アリスの様子は…。", "The medicine is done! Now then, Alice's form...")
			p = findcharala(CREATURE_ID_ALICE_THE_BIG_ANT)
			if ( p == 0 ) {
				chatMore lang("し、死んどる…。", "Sh-she's dead..."), strbye
				goto *chat_end
			}
			chatMore lang("！？アリス…その姿は…？", "?! Alice... That form...?")
			chatMore lang("完全に元通りになれたのね！一時はどうなることかと思ったのよ。…人語もちゃんと喋れるみたいね。本当によかった。", "You've completely recovered! I do wonder if it's only temporary though... But it looks like you can speak properly too. I'm so glad.")
			chatMore lang("" + cdatan(CDATAN_NAME, CHARA_PLAYER) + "さん、ありがとう！これで娘に嫌われずに済むわ。預かってる最中にあんな姿に変異させたことが知れたら…おおぅ。", "" + cdatan(CDATAN_NAME, CHARA_PLAYER) + ", thank you! With this, there's no need for my daughter to hate me. If she knew that I had caused this mutation... Oh my.")
			chatMore lang("え？アリスは娘じゃないわよ。そんなこと一度も言ってないけど…？アリスは森で迷いアリになっていたところを私の娘に拾われたの。今では娘の大事なペット…いや子分かしら？そりゃあ元に戻ったと言っても、結局はアリのままの姿よ。", "Huh? Alice isn't my daughter. Did I say that at some point...? Alice is an ant that was picked up by my daughter one day when she got lost in the forest. Now she's my daughter's precious pet... or maybe follower? So, I said she's back to normal because, after all, her true appearance is that of an ant.")
			chatMore lang("とにかく、これは報酬＆口止め料よ。本当に助かったわ！", "Anyways, here's your reward - with a little extra thrown in for your silence. You really helped me out!"), strbye
			flt
			itemcreate -1, ITEM_ID_SCROLL_GAIN_ATTRIBUTE, cdata(CDATA_X, CHARA_PLAYER), cdata(CDATA_Y, CHARA_PLAYER), 2
			flt
			itemcreate -1, ITEM_ID_MUSIC_TICKET, cdata(CDATA_X, CHARA_PLAYER), cdata(CDATA_Y, CHARA_PLAYER), 5000
			flt
			itemcreate -1, ITEM_ID_POTION_DESCENT, cdata(CDATA_X, CHARA_PLAYER), cdata(CDATA_Y, CHARA_PLAYER), 3
			flt
			nostack = 1
			itemcreate -1, ITEM_ID_MATERIAL_KIT, cdata(CDATA_X, CHARA_PLAYER), cdata(CDATA_Y, CHARA_PLAYER), 0
			inv(INV_ITEM_MATERIAL, ci) = ITEM_MATERIAL_GRIFFON
			gdata(GDATA_FLAG_SUB_THE_TRUE_APPEARANCE) = 1000
			txt_questupdate
			snd SOUNDLIST_COMPLETE1
			txt_questitem
			goto *chat_end
		}
		if ( gdata(GDATA_FLAG_SUB_THE_TRUE_APPEARANCE) == 5 ) {
			chatMore lang("悪いけど、アリスに薬をあげるところまでお願い。", "Sorry, but please properly give the medicine to Alice.")
			goto *chat_end
		}
		if ( gdata(GDATA_FLAG_SUB_THE_TRUE_APPEARANCE) >= 1 & gdata(GDATA_FLAG_SUB_THE_TRUE_APPEARANCE) < 5 ) {
			if ( gdata(GDATA_FLAG_SUB_THE_TRUE_APPEARANCE) == 1 ) {
				chatMore lang("それじゃあ。持ってきてほしいアイテムなんだけど、いくつかあるから簡単そうなものからお願いしようかしら。", "Alright then. There are several items I need you to bring, but they should all be easy to find.")
			}
			if ( gdata(GDATA_FLAG_SUB_THE_TRUE_APPEARANCE) <= 2 ) {
				gdata(GDATA_FLAG_SUB_THE_TRUE_APPEARANCE) = 2
				chatMore lang("そうね。今回持ってきてほしいアイテムは変化の杖よ。", "Okay. This time I want you to bring me a rod of change creature.")
			}
			if ( gdata(GDATA_FLAG_SUB_THE_TRUE_APPEARANCE) == 3 ) {
				chatMore lang("そうね。今回持ってきてほしいアイテムは復活の書よ。", "Okay. This time I want you to bring me a book of resurrection.")
			}
			if ( gdata(GDATA_FLAG_SUB_THE_TRUE_APPEARANCE) == 4 ) {
				chatMore lang("今回で最後ね！持ってきてほしいアイテムは変異治療のポーションよ。", "Okay, this is the last, I promise! I need you to bring me a potion of cure mutation.")
			}
			if ( gdata(GDATA_FLAG_SUB_THE_TRUE_APPEARANCE) == 2 ) {
				item_find ITEM_ID_ROD_CHANGE_CREATURE, 3, 1
			}
			if ( gdata(GDATA_FLAG_SUB_THE_TRUE_APPEARANCE) == 3 ) {
				item_find ITEM_ID_BOOK_RESURRECTION, 3, 1
			}
			if ( gdata(GDATA_FLAG_SUB_THE_TRUE_APPEARANCE) == 4 ) {
				item_find ITEM_ID_POTION_CURE_MUTATION, 3, 1
			}
			if ( stat != (-1) ) {
				ci = stat
				if ( inv(INV_ITEM_NUM, ci) >= 1 ) {
					chatList 1, lang("渡す", "(Hand one over)")
					chatList 0, lang("渡さない", "(Don't hand one over)")
					buff = lang("あら？もしかして今持っていたりするんじゃない？", "Oh? Do you possibly have one with you?")
					gosub *chat_select
					if ( chatval != 1 ) {
						chatMore lang("そう…？急いでもらえると助かるわ。", "Oh...? It'd really help me out if you could hurry.")
						goto *chat_end
					}
					snd SOUNDLIST_EQUIP1
					inv(INV_ITEM_NUM, ci)--
					gdata(GDATA_FLAG_SUB_THE_TRUE_APPEARANCE)++
					chatMore lang("ありがとうねぇ、アリだけに。", "Thank you so much!")
					if ( gdata(GDATA_FLAG_SUB_THE_TRUE_APPEARANCE) < 5 ) {
						goto *chat_end
					}
					chatMore lang("えーと…持ってきてもらったアイテムたちを、館長さんに教えてもらった通りの配分で合成して…さらに私の調達してきたゴッドロイヤルゼリーと混ぜれば…。", "Umm... If I take these items and synthesize them together like the librarian told me... and then mix all that with the godly royal jelly I have...")
					redraw 0
					gosub *screen_draw
					gosub *screen_fade
					gsel 4
					pos 0, 0
					picload exedir + "graphic\\face1" + devfile + ".bmp", 1
					gsel 0
					snd SOUNDLIST_COMPLETE1
					chatMore lang("よし、特殊変異治療薬の完成よ！ちょっと後片付けがあるから、アリスに薬をあげるところまでお願いするわ。", "Alright, the mutation treatment is complete! Please give it to Alice while I take care of the clean up here.")
					txtef COLOR_GREEN
					txt lang("[特殊変異治療薬]を手に入れた。", "You obtain the [EX Mutation Treatment]!")
					txt_questupdate
					goto *chat_end
				}
			}
			chatMore lang("あの子のためにも、可及的速やかに頼むわ。", "It's for that child, so please find it as soon as possible."), strbye
			goto *chat_end
		}
		if ( gdata(GDATA_FLAG_SUB_THE_TRUE_APPEARANCE) == 0 ) {
			chatMore lang("大変なのよ！ある朝、目が覚めたらうちのアリスがあんなおぞましい姿に変身していたの！すっかり人語も喋れなくなって…！", "This is terrible! This morning when I woke up, our poor little Alice had transformed into such a horrifying form! She can't even speak the human language any more...!")
			chatList 0, lang("手伝わない", "Not my problem.")
			chatList 1, lang("手伝う", "Let me help.")
			buff = lang("ここの館長さんに話を聞いたんだけど、なんでも元の姿に戻すには複数のアイテムが必要らしいのよ。報酬は出すから、アイテム集めを手伝ってくれないかしら？", "I've spoken to the chief librarian here, and it seems like several items are needed to restore her original form. I'll give you a reward if you'll gather the items for me.")
			gosub *chat_select
			if ( chatval == 1 ) {
				chatMore lang("ありがとうね！これで蟲の研究に専念できるわぁ。", "Thank you very much! Now I can concentrate on my study of insects."), strbye
				gdata(GDATA_FLAG_SUB_THE_TRUE_APPEARANCE) = 1
				txt_questupdate
				goto *chat_end
			}
			chatMore lang("そんな！このままじゃ私、娘に顔向けできないわ…。", "But! How am I going to explain this to my daughter..."), strbye
			goto *chat_end
		}
		goto *chat_end
	}
	if ( _switch_val == CREATURE_ID_ARIBEL_THE_WHITE_ARMS | _switch_sw ) {
		_switch_sw = 0
		if ( gdata(GDATA_AREA) == AREA_CHAOS_CRADLE ) {
			chatMore lang("逆境上等！覚悟は上々！お父さんと拳で語り合えるくらい強くなるためにも、このネフィアで修行だっ！", "This is bad! Prepare yourself! Father speaks through his powerful fists. This is training for Nefia!"), strbye
			goto *chat_end
		}
		if ( gdata(GDATA_FLAG_SUB_THE_TRUE_APPEARANCE) >= 1003 ) {
			chatMore lang("武者修行から戻ってきてみても、お母さんまだ虫図鑑読み漁ってるんだから。はぁ…過去の文明のまで合わせたら、何億種書かれているかわかったもんじゃないよ。暇つぶしにその辺のネフィアにでも潜ってこようかな…。", "I come back from my training and find my mother still reading those illustrated books on insects. Hah... When you consider past civilizations too, there must be millions of those kinds of books written. Maybe I'll go kill some time in a ruin of Nefia...")
			goto *chat_end
		}
		chatMore lang("おかしい。久しぶりに会ったと思ったら、お母さんが挙動不審すぎる。アリスに訊いても口ごもるし、何か隠してるんじゃ…？", "That's funny. It might have been a while since I've seen her, but mother is acting strange. Alice was stammering when we were talking too. Are they hiding something...?")
		chatList 0, lang("知らない", "I don't know anything.")
		chatList 1, lang("ちょっと口止めされてて…", "I'm not allowed to talk about it...")
		chatList 2, lang("巨大蟻の管理不行届き", "Incompetence at taking care of large ants.")
		buff = lang("あの、すみません。うちの母が何か隠してないか、知りませんか？", "Um, excuse me. Do you know if my mother is hiding something?")
		gosub *chat_select
		if ( chatval >= 0 & chatval <= 2 ) {
			if ( chatval == 0 ) {
				chatMore lang("そう…。ここはやはり、拳で語ってみるしかないか！", "I see... Guess I don't have any choice but to make her talk then!"), strbye
			}
			if ( chatval == 1 ) {
				chatMore lang("おっけー、おっけー、なるほどね。家族会議でとことん問い詰めてやる！", "Okay okay, got it. I'll have to interrogate her!"), strbye
			}
			if ( chatval == 2 ) {
				chatMore lang("また！？今回はちゃんとアリスの面倒見るから大丈夫、ってお母さん言ってたのに！もう、ずぼらなんだから！", "Again?! Since Alice looks okay I thought mom had treated her right! God, I can't believe her!"), strbye
			}
			gdata(GDATA_FLAG_SUB_THE_TRUE_APPEARANCE) = 1003
			goto *chat_end
		}
		goto *chat_end
	}
	if ( _switch_val == CREATURE_ID_SHELL_KING_OF_VINDALE | _switch_sw ) {
		_switch_sw = 0
		if ( gdata(GDATA_AREA) == AREA_CHAOS_CRADLE ) {
			chatMore lang("神には神の思惑があって動いている。盲目的にそれに従うのではなく、我ら定命は自身の考えを持って行動しなければならない。", "God's expectations change. We don't have to follow them blindly, just live by our own design."), strbye
			goto *chat_end
		}
		goto *chat_end
	}
	if ( _switch_val == CREATURE_ID_SOPHIA_THE_WISE | _switch_sw ) {
		_switch_sw = 0
		if ( gdata(GDATA_FLAG_SUB_SOPHIA_THE_WISE) \ 2 == 0 ) {
			if ( gdata(GDATA_FLAG_SUB_SOPHIA_THE_WISE_YEAR) == gdata(GDATA_YEAR) & gdata(GDATA_FLAG_SUB_SOPHIA_THE_WISE_DAY) == gdata(GDATA_DAY) & gdata(GDATA_FLAG_SUB_SOPHIA_THE_WISE_MONTH) == gdata(GDATA_MONTH) & gdata(GDATA_HOUR) == 14 & gdata(GDATA_MIN) >= 30 ) {
				chatMore lang("時間通りに来たということは…手伝ってくれるということだね。では早速始めようか。なに、ただの単純作業だよ。", "Let's see... Looks like you're right on time. Let's get to work. Don't worry, it'll be a cinch.")
				redraw 0
				gosub *screen_draw
				gosub *screen_fade
				gsel 4
				pos 0, 0
				picload exedir + "graphic\\face1" + devfile + ".bmp", 1
				gsel 0
				gdata(GDATA_HOUR) = 17
				chatMore lang("…こんなところだね、お疲れさま。これはお礼だよ。", "...Thanks for the help. Here, take this as a token of my gratitude.")
				txt_questcompleted
				txtmore
				txt_questitem
				if ( gdata(GDATA_FLAG_SUB_VICE_STAFF_RECEIVED) == 0 ) {
					flt
					itemcreate -1, ITEM_ID_VICE_STAFF, cdata(CDATA_X, CHARA_PLAYER), cdata(CDATA_Y, CHARA_PLAYER), 0
				}
				if ( gdata(GDATA_FLAG_SUB_VICE_STAFF_RECEIVED) != 0 ) {
					if ( gdata(GDATA_MIN) >= 30 & gdata(GDATA_MIN) <= 39 ) {
						flt
						itemcreate -1, ITEM_ID_TEAR_OF_GOD, cdata(CDATA_X, CHARA_PLAYER), cdata(CDATA_Y, CHARA_PLAYER), 0
						inv(INV_ITEM_PARAM1, ci) = 18
						encadd ci, ENCHANT_PROC * EXT_ENCHANTMENT + ENCHANT_PROC_DARKNESS_BOLT, 200, 0, 1, 0, 1
					}
					if ( gdata(GDATA_MIN) >= 40 & gdata(GDATA_MIN) <= 49 ) {
						flt
						itemcreate -1, ITEM_ID_TEAR_OF_GOD, cdata(CDATA_X, CHARA_PLAYER), cdata(CDATA_Y, CHARA_PLAYER), 0
						inv(INV_ITEM_PARAM1, ci) = 17
						encadd ci, ENCHANT_PROC * EXT_ENCHANTMENT + ENCHANT_PROC_ELEMENT_SCAR, 200, 0, 1, 0, 1
					}
					if ( gdata(GDATA_MIN) >= 50 & gdata(GDATA_MIN) <= 60 ) {
						flt
						itemcreate -1, ITEM_ID_TEAR_OF_GOD, cdata(CDATA_X, CHARA_PLAYER), cdata(CDATA_Y, CHARA_PLAYER), 0
						inv(INV_ITEM_PARAM1, ci) = 16
						encadd ci, ENCHANT_ENHANCE_SPELL, 200, 0, 1, 0, 1
					}
				}
				gdata(GDATA_FLAG_SUB_VICE_STAFF_RECEIVED)++
				gdata(GDATA_FLAG_SUB_SOPHIA_THE_WISE)++
				snd SOUNDLIST_COMPLETE1
				txt_questupdate
				goto *chat_end
			}
		}
		if ( gdata(GDATA_FLAG_MAIN) >= 760 ) {
			if ( gdata(STARTING_GDATA_FLAG + 352) < 100 ) {
				chatMore lang("君はよくやってくれたね。けれど大きすぎる力は人の恐怖を煽ることを忘れてはいけない。そして、情報が思わぬスピードで伝わることも。", "Huh.")
				chatMore lang("混沌の神が君に討伐されたという情報が、一部の勢力にもう伝わってしまったようだね。特にロスリアという国の上層部は、君を人類共通の新たな脅威ということにしようと画策している。気をつけたほうがいいね。", "Huh.")
				chatMore lang("民衆には伝わっていないようだけど、ほとぼりが冷めるまではあまり派手に動かず、一時的に身を隠したほうが得策かもしれないね。その頃には、例の報酬も用意できていると思う。", "Huh.")
				gdata(STARTING_GDATA_FLAG + 352) += 100
			}
		}
		if ( gdata(GDATA_FLAG_MAIN) == 690 ) {
			chatMore lang("決戦因子は君に決まったんだね。テスカトリポカが認めたなら大丈夫だろう。", "Huh.")
			chatList 1, lang("仕方がない", "It's no use.")
			chatList 2, lang("はい喜んで", "Yes, gladly.")
			chatList 3, lang("報酬は出るの？", "Are there any rewards?")
			chatList 4, lang("嫌です", "I do not want it.")
			buff = lang("もし神の間が崩壊して混沌の神が出てきたら、神々も定命ももれなく混沌に取り込まれ、世界は蹂躙され全ての秩序は失われてしまうだろう。もちろん討伐を引き受けてくれるね？", "Huh.")
			chatesc = 0
			gosub *chat_select
			if ( chatval == 4 ) {
				chatMore lang("これは混沌から今の世界を守るためだからね。考え直してほしい。", "Huh.")
				goto *chat_end
			}
			gdata(GDATA_FLAG_MAIN) = 691
		}
		if ( gdata(GDATA_FLAG_MAIN) == 691 ) {
			chatMore lang("さて…報酬はどうしようか。", "Well then... What reward do you want?")
			chatList 1, lang("富", "Wealth.")
			chatList 2, lang("名声", "Fame.")
			chatList 3, lang("強さ", "Strength.")
			chatList 4, lang("ハーレム", "Harem.")
			chatList 5, lang("神の座", "The seat of god.")
			chatList 6, lang("おまえ", "You.")
			buff = lang("とりあえずアーティファクトはつけるとして…他に欲しいものがあるかな？", "Huh.")
			chatesc = 0
			gosub *chat_select
			gdata(STARTING_GDATA_FLAG + 352) = chatval
			if ( chatval == 5 ) {
				chatMore lang("神には神の仕事ルールがあってそれに縛られることになるよ。個神には大した権限もない。自由と引き換えてでも秩序維持のために働きたいのなら話は別だけど、それでも君の一生を全うしてからの方がいいだろうね。とにかくおすすめしないね。", "Huh.")
				goto *chat_end
			}
			if ( chatval == 6 ) {
				chatMore lang("そんなことを言って、相手の反応が知りたいだけだろう？そのくらいは本で読んで知っているよ。神をからかってはいけないね。", "Huh.")
				goto *chat_end
			}
			chatMore lang("なるほど…覚えておくね。", "I see... I will remember it.")
			chatMore lang("話は変わるけれど、混沌の神を倒すための道具を渡しておこう。", "Huh.")
			txtef COLOR_GREEN
			txt lang("[来光の牙]を手に入れた！", "You obtain the [Origin of Light]!")
			snd SOUNDLIST_COMPLETE1
			gdata(GDATA_FLAG_MAIN) = 695
			txt_questupdate
			chatMore lang("いくら弱っているとはいえ、相手は私達より圧倒的に高い存在級位を有している。物理的にいくら殺しても倒したことにならない。あれほどの存在をアカシックレコードから切り離すには、膨大なアストラル光が必要になるんだ。", "Huh.")
			chatMore lang("そこで、混沌の神を殺す瞬間…すなわち、相手の存在が最も揺らぐ瞬間に神々全員の神力をマナに逆変換して来光の牙に送る。来光の牙はマナをアストラル光に変換するための装置なんだ。発生したアストラル光によって、奴のアカシックレコードに完全干渉する。", "Huh.")
			chatMore lang("…簡単に説明すると、トドメの際に突き刺せば、完全に消滅させるなり、無力化したうえで闇檻に放り込むなりで処理できるということだね。この突破法の準備に3000年かかったから失敗しないでほしいね。", "Huh.")
			chatMore lang("…そうだ。あと、これも必要なら持っていくといい。", "Huh.")
			flt
			itemcreate -1, ITEM_ID_HEART_OF_TWILIGHT, cdata(CDATA_X, CHARA_PLAYER), cdata(CDATA_Y, CHARA_PLAYER), 0
			txt_questitem
			chatMore lang("神の間の物理崩壊は時間の問題だし、混沌の軍勢も勢力を増してきている。君も準備を整えてほしい。", "Huh.")
			goto *chat_end
		}
		if ( gdata(GDATA_FLAG_MAIN) >= 370 ) {
			if ( gdata(GDATA_FLAG_MAIN) < 695 ) {
				chatList 0, lang("神の間とは？", "What is \"The Eternal Seal\"?")
			}
			if ( gdata(GDATA_FLAG_MAIN) < 695 ) {
				chatList 1, lang("神々の大戦とは？", "What is the \"War of the Gods\"?")
			}
			chatList 3, lang("何か手伝えることは？", "Is there any way I can help you out?")
			chatList 2, lang("スリーサイズは？", "What are your three sizes?")
			if ( gdata(GDATA_FLAG_MAIN) >= 695 ) {
				chatList 4, lang("混沌の神の正体は？", "What is the true identity of the God of Chaos?")
			}
			if ( gdata(GDATA_FLAG_MAIN) >= 695 ) {
				chatList 5, lang("これまでの経緯をまとめて知りたい", "I want to know the whole story up to this point.")
			}
			if ( gdata(GDATA_FLAG_MAIN) >= 695 ) {
				chatList 6, lang("混沌の神を倒したらネフィアはどうなる？", "Once you defeat the God of Chaos, what happens to Nefia?")
			}
			buff = lang("ネフィアの永遠の盟約により、全てを話すことはできないね。しかし、制限されていない情報に関しては君にも教えよう。", "To comply with the Eternal League of Nefia, I cannot tell you everything. However, I can give you information on unrestricted topics.")
			gosub *chat_select
			if ( chatval == 4 ) {
				chatMore lang("…そうだね。あまり言いたくないけれど、あれと戦う君には知る権利があるね。", "Huh.")
				chatMore lang("混沌の神…エンテュメイシス。その正体は…もう一人の私なんだ。", "The God of Chaos... Enthumesis. That identity... is my other self.")
				chatMore lang("わが父、《深淵のプロパトル》は至高の超越者だった。神としても次元が違うため知覚できないほどのね。末娘だった私は兄や姉に尋ねたが一切の情報が不明。「誰にも知ることができない神」と言っても過言じゃない…。", "Huh.")
				chatMore lang("それでも…当時の私はどうしても父のことを知りたかった。知識欲の強い娘が、行方不明の父のことを調べようと思うのは仕方がないことだったと思う。", "Huh.")
				chatMore lang("知りたいのに知ることができないジレンマが頂点に達した時、暴走した想いが私の中にエンテュメイシスという穢れた人格を作り出した。魂の穢れた私は堕天して地上を彷徨っていたが、兄姉の精神浄化によってエンテュメイシスを分離して帰還することができた。今では父のことを知ろうなんて気持ちは微塵もないね。", "Huh.")
				chatMore lang("だがエンテュメイシスは私から分離した後も実は消えずに活動していたんだ。人間たちには不死で知りたがりの娼婦として扱われていたようだね。とりあえずは無害だと判断されていたのだけれど、神々の大戦中、エンテュメイシスは牙を剥いた。", "Huh.")
				chatMore lang("あれはまるで本から知識を取り込むかのように、大戦で傷ついた神々を次々と吸収していった。父についての情報を得るため、そして力を蓄えて同じ高次元に立とうとしたんだね。熱いパトスのおもむくまま、むやみやたらと神の力を混ぜ合わせていった結果、両性具有の混沌神となってしまった。", "Huh.")
				chatMore lang("エンテュメイシスは封印される間際でも父を求めていたよ。混沌の眷属が人間を取り込もうとするのも、根底にあるのは知識欲なのかもしれないね…。", "Huh."), strbye
				goto *chat_end
			}
			if ( chatval == 5 ) {
				chatMore lang("じゃあ簡単に、かいつまんで。", "Well then, easy.")
				chatMore lang("1。長い歴史の中で、人類は神は徐々に必要としなくなり、神は力を失いつつあった。", "Huh.")
				chatMore lang("2。そんな時、人類の大半が宇宙に旅立ってしまった。", "Huh.")
				chatMore lang("3。存在の危うくなった神々が殺気立つ中、テスカトリポカが他の神を倒して信者を奪った。", "Huh.")
				chatMore lang("4。神々の生存競争が勃発。多くの神が消滅したり魔物に堕ちた。", "Huh.")
				chatMore lang("5。大戦の裏で混沌の神が力をつけていたことが発覚。混沌対神々の構図に変化。", "Huh.")
				chatMore lang("6。激戦の末混沌の神は封印できたがこの時混沌の精霊の種が蒔かれていた。", "Huh.")
				chatMore lang("7。ロストイルヴァ隔離。", "7. Lost Ylva isolation.")
				chatMore lang("8。神の間が老朽化したのを狙って混沌の軍勢が巨城に侵攻。", "Huh.")
				chatMore lang("9。テスカトリポカが混沌の軍勢を撃退するも右腕を失う。", "Huh.")
				chatMore lang("10。オルフェをはじめとする決死隊が役目を果たし、神の間の増築に成功。", "Huh.")
				chatMore lang("11。唯一生還したオルフェが常闇の眼を盗んで行方不明に。", "Huh.")
				chatMore lang("12。混沌の神から奪った力を還元し、ネフィア誕生。", "Huh.")
				chatMore lang("13。魔法大戦によりナーク・ドマーラ滅亡。", "Huh.")
				chatMore lang("14。神の間が再度老朽化。", "Huh.")
				chatMore lang("15。人工細菌メサイアによって作られた秩序の一角獣が役目を果たす。後にサーペントに取り込まれてカオス・ユニコーンへ変化したことが判明。", "Huh.")
				chatMore lang("16。エーテルが発見され、はみ出し者たちによって盛んに採取された。", "Huh.")
				chatMore lang("17。メサイアが事故で変異・流出しメシェーラと呼ばれるように。エーテル減少で弱っていた環境は激変。", "Huh.")
				chatMore lang("18。環境変化に耐え切れずレム・イド滅亡。人類はシェルターで細々と暮らす程度に。", "Huh.")
				chatMore lang("19。メシェーラに侵食された超生物やアンデッド兵器が荒野を徘徊する永い暗黒期の到来。", "Huh.")
				chatMore lang("20。年月経過で回復したエーテルが風を生みヴィンデールの森が発達。", "Huh.")
				chatMore lang("21。メシェーラ環境に適応できる人類が生まれ世界に拡散。シエラ・テール誕生。", "Huh.")
				chatMore lang("22。常闇の杖が完成しオルフェ発見。監視を開始。", "Huh.")
				chatMore lang("23。さらに回復したエーテルがヴィンデールの森を拡大。カルーン滅亡。", "Huh.")
				chatMore lang("24。ヴィンデールの森が焼き払われる。", "Huh.")
				chatMore lang("25。神の間が再度老朽化。潜伏していた混沌の軍勢も活発に。", "Huh.")
				chatMore lang("そして、強さと抵抗力を兼ね備えた君が決戦因子として選ばれた…というわけだね。", "Huh."), strbye
				goto *chat_end
			}
			if ( chatval == 6 ) {
				chatMore lang("いい質問だね。現在のネフィアは混沌の神から奪った力を魔力に変換後、陽牢の塔を経由して龍脈に流し込んで生成している。つまり混沌の神がいなくなったらネフィアは維持できなくなるね。", "Huh.")
				chatMore lang("ただし、すぐにネフィアが消えるわけじゃないよ。ネフィアのベースとなる遺跡はまた8億程ストックがあるし、魔力も現在対流している分が枯渇するのに最低2000年かかる。それまでに定命も神もネフィアに依存しないシステムを構築していく必要があるね。", "Huh."), strbye
				goto *chat_end
			}
			if ( chatval == 0 ) {
				chatMore lang("神の間は混沌の神が封じられている場所だね。神の間の役割は張り巡らされた結界によって混沌の神の力を奪うことだ。", "The Eternal Seal is where the God of Chaos is sealed. As part of their role, the Gods were forced to extend a barrier that should consequently steal the God of Chaos' power.")
				chatMore lang("やがて奪った力はネフィアを生む魔力へと変換してイルヴァ全土に拡散されることになった。こうして世界に混沌と魔法の力がもたらされることになるわけだが…。それはまた別のお話だね。", "In the end this energy was spread throughout the world and converted into the magic that produces the ruins of Nefia. It was in this way that magic and Chaos was brought to the land of Ylva... But that's a story for another time."), strbye
				goto *chat_end
			}
			if ( chatval == 1 ) {
				chatMore lang("そもそもの始まりは、神を必要としないまでに人の技術が発達したことだった。その極限にしてエイス・テールの前身…アース・テールと呼ばれる文明。もはやこの星に納まる存在でなくなった当時の人類は、わずかばかりの民を残して星の海に旅立っていった。", "Long ago, human technology developed to the point where the gods were no longer needed. This development reached its breaking point in the era preceding Eyth Terre... Asu Terre. Human civilization grew to the point that this planet could no longer support them, and the majority left for the stars.")
				chatMore lang("それまでに信仰が絶えかけ力が衰えていた神々にとって、人類の旅立ちは存在を危うくするほどの一大事。残された定命たちに力を誇示し信仰を確保せねば、神としての存在を維持することができないと誰もが考えていたね…。", "For the gods - whose power had already greatly diminished due to a lack of believers - this development threatened their very existence. They felt that unless they made a show of power to gain the faith of those left behind, they would be unable to maintain their existence as gods...")
				chatMore lang("そしてテスカトリポカによる虐殺が引き金となり、神々の生存戦争が始まったんだ。あの時のイルヴァには、秩序などなかったね…。", "Tazcatlipoca started the slaughter, and so the war for the survival of the gods began. Ylva fell into complete Chaos...")
				chatMore lang("…これから先はまだ話すわけにはいかない。すまないね。", "...I can't say any more. I'm sorry."), strbye
				goto *chat_end
			}
			if ( chatval == 2 ) {
				sophia = rnd(21)
				if ( sophia >= 16 & sophia < 21 ) {
					chatMore lang("セクハラとは感心しないね。いつの時代も定命はやんちゃで困る。", "Sexual harassment doesn't impress me. It's not the first time a mortal has tried it."), strbye
				}
				if ( sophia >= 11 & sophia < 16 ) {
					chatMore lang("そんなことはどうだっていい。重要じゃない。", "There's no need to worry about something like that. It doesn't matter."), strbye
				}
				if ( sophia >= 6 & sophia < 11 ) {
					chatMore lang("そうか…君はそんなやつなんだな。", "I see... So that's the type of person you are."), strbye
				}
				if ( sophia >= 1 & sophia < 6 ) {
					chatMore lang("ヘンタイ。", "Pervert."), strbye
				}
				if ( sophia == 0 ) {
					chatMore lang("上から、はちじゅうろ…な、何を言わせる気！？", "Starting from the top, eighty-fi... w-what kind of question is this?!"), strbye
				}
			}
			if ( chatval == 3 ) {
				if ( gdata(GDATA_FLAG_SUB_SOPHIA_THE_WISE) == 0 ) {
					gdata(GDATA_FLAG_SUB_SOPHIA_THE_WISE) = 1
				}
				if ( gdata(GDATA_FLAG_SUB_SOPHIA_THE_WISE) \ 2 != 0 ) {
					gdata(GDATA_FLAG_SUB_SOPHIA_THE_WISE_YEAR) = gdata(GDATA_YEAR)
					gdata(GDATA_FLAG_SUB_SOPHIA_THE_WISE_MONTH) = gdata(GDATA_MONTH) + 1
					if ( gdata(GDATA_FLAG_SUB_SOPHIA_THE_WISE_MONTH) == 13 ) {
						gdata(GDATA_FLAG_SUB_SOPHIA_THE_WISE_MONTH) = 1
						gdata(GDATA_FLAG_SUB_SOPHIA_THE_WISE_YEAR)++
					}
					gdata(GDATA_FLAG_SUB_SOPHIA_THE_WISE_DAY) = gdata(GDATA_DAY) + rnd(3)
					if ( gdata(GDATA_FLAG_SUB_SOPHIA_THE_WISE_DAY) >= 30 ) {
						gdata(GDATA_FLAG_SUB_SOPHIA_THE_WISE_DAY) -= rnd(3) + 3
					}
					soukop = gdata(GDATA_FLAG_SUB_SOPHIA_THE_WISE) / 2 + 1
					if ( gdata(GDATA_FLAG_MAIN) < 695 ) {
						chatMore lang("君には神の間を目指して欲しいのだけどね。", "I'd really like for you to aim for the Eternal Seal.")
					}
					chatMore lang("ふむ…そうだね。この後、地下の第" + soukop + "倉庫を整理する予定があって人手を探しているんだ。", "Other than that... Ah, right. I'm going to be looking for some help soon in organizing the " + soukop + cnvrank(soukop) + " underground warehouse.")
					chatMore lang("もしも君にその気があるのなら、" + gdata(GDATA_FLAG_SUB_SOPHIA_THE_WISE_YEAR) + "年" + gdata(GDATA_FLAG_SUB_SOPHIA_THE_WISE_MONTH) + "月" + gdata(GDATA_FLAG_SUB_SOPHIA_THE_WISE_DAY) + "日の午後14時半から15時までの間に話しかけてもらえるかな。", "If you'd like to help, I'll be working on it from 14:30 to 15:00 on " + gdata(GDATA_FLAG_SUB_SOPHIA_THE_WISE_YEAR) + "/" + gdata(GDATA_FLAG_SUB_SOPHIA_THE_WISE_MONTH) + "/" + gdata(GDATA_FLAG_SUB_SOPHIA_THE_WISE_DAY) + "."), strbye
					gdata(GDATA_FLAG_SUB_SOPHIA_THE_WISE)++
					txt_questupdate
					goto *chat_end
				}
				chatMore lang("もしも君にその気があるのなら、" + gdata(GDATA_FLAG_SUB_SOPHIA_THE_WISE_YEAR) + "年" + gdata(GDATA_FLAG_SUB_SOPHIA_THE_WISE_MONTH) + "月" + gdata(GDATA_FLAG_SUB_SOPHIA_THE_WISE_DAY) + "日の午後14時半から15時までの間に話しかけてもらえるかな。", "If you'd like to help, I'll be working on it from 14:30 to 15:00 on " + gdata(GDATA_FLAG_SUB_SOPHIA_THE_WISE_YEAR) + "/" + gdata(GDATA_FLAG_SUB_SOPHIA_THE_WISE_MONTH) + "/" + gdata(GDATA_FLAG_SUB_SOPHIA_THE_WISE_DAY) + "."), strbye
				goto *chat_end
			}
			goto *chat_end
		}
		if ( gdata(GDATA_FLAG_MAIN) == 368 ) {
			chatList 0, lang("返却する", "Fine.")
			chatList 1, lang("ただではやれないな", "Not for free.")
			buff = lang("ようやく来たね。唐突ですまないけれど、君の所有している常闇の眼を返却してほしい。", "You've finally come. Pardon the suddenness of this request, but I must ask that you hand over the Origin of Vice that is in your possession.")
			chatesc = 0
			gosub *chat_select
			if ( chatval == 1 ) {
				chatMore lang("君は常闇の眼を混沌の眷属から解放してくれた。その駄賃を払うのもいいだろう。けれど人界の通貨はあまり持っていなくてね。とりあえず持ち合わせを全部出すからそれで勘弁してほしい。", "You freed the Origin of Vice from the clutches of the servants of Chaos. I should like the return the favor. I have little currency of the human world, however. I ask that you be patient with me for now.")
				cdata(CDATA_GOLD, CHARA_PLAYER) += cdata(CDATA_GOLD, tc)
				cdata(CDATA_GOLD, tc) = 0
				snd SOUNDLIST_PAYGOLD1
			}
			txt lang("あなたは常闇の眼を返却した。", "You return the Origin of Vice.")
			msg_halt
			chatMore lang("おかえり…。叡智の結晶であるこの書物は、大戦の末期に台座ごと人界に持ち去られ、ずっと行方がわからなくなっていた。すっかり魔力を失ってしまったようだけど…それでもこの上なく貴重な資料であることに変わりはないね。", "You've returned to us at last... At the end of the Great War, this tome of knowledge - pedestal and all - was taken into the human world, and its location has been lost to us since. It appears to have completely lost its magic, but... Even so, that does not alter its status as the most precious tome.")
			chatMore lang("…さて。常闇の眼を解読しているなら気付いているかもしれないが…これに記されているのは人界の出来事のみ。かつてこの地で起きたこと、そして今起きていることを知りたければ始まりのネフィア…混沌の巨城地下にある、神の間を目指しなさい。", "By the way... If you have deciphered the Origin of Vice then you may already have noticed this, but... Only the affairs of the human world are scribed upon its pages. If you wish to know this land's history, and that of Nefia... Then you must travel to the depths of the Cradle of Chaos, to The Eternal Seal that lies within."), strbye
			gdata(GDATA_FLAG_MAIN) = 370
			goto *chat_end
		}
		goto *chat_end
	}
	if ( _switch_val == CREATURE_ID_RAIZEL_THE_OLD_WIZARD | _switch_sw ) {
		_switch_sw = 0
		if ( gdata(GDATA_AREA) == AREA_CHAOS_CRADLE ) {
			if ( gdata(GDATA_FLAG_MAIN) == 745 ) {
				chatMore lang("お若いの、頑張ったのう。よくぞ、わしが到着するまで持ちこたえてくれた。後はこの老いぼれが引き受けよう。", "Sorry, this is untranslated sentence.")
				chatMore lang("思えば、魔術に捧げた人生じゃった。才を活かすため師匠に背いて軍に入り、無我夢中で戦い続け…気づけば老いていた。", "Sorry, this is untranslated sentence.")
				chatList 1, lang("死なないで！", "Do not die!")
				chatList 2, lang("美味しいところを持っていく気？", "Are you going to success than me?")
				chatList 3, lang("化身？凶獣？", "What is oblivion beast?")
				buff = lang("今こそ使おう…邪悪なる化身、凶獣の力を！", "Sorry, this is untranslated sentence.")
				gosub *chat_select
				if ( chatval == 1 ) {
					chatMore lang("死なんよ。死ぬよりもっと酷い目に遭うだけじゃ。", "Sorry, this is untranslated sentence.")
				}
				if ( chatval == 2 ) {
					chatMore lang("はは、すまんのう…。最期くらい恰好をつけさせとくれ。", "Sorry, this is untranslated sentence.")
				}
				if ( chatval == 3 ) {
					chatMore lang("世界が消える前兆として、忘却の女神の化身が現れる。奴らが人々から記憶を抹消することで、人も世界も完全に忘れ去られ本当の死を迎える…。その内の一匹が魔術で我が手の内にあるのじゃ。", "Sorry, this is untranslated sentence.")
				}
				chatMore lang("さぁ行け、ナゴレウ！わしの記憶を燃やし、奴を蝕め！", "Sorry, this is untranslated sentence.")
				goto *chat_end
			}
			if ( gdata(GDATA_FLAG_MAIN) == 755 ) {
				chatMore lang("…。", "...")
				goto *chat_end
			}
		}
		if ( gdata(GDATA_FLAG_MAIN) >= 760 ) {
			chatMore lang("…(もはや言葉すらわからないようだ)", "(" + he(tc) + " seems to not know the language...)"), strbye
			goto *chat_end
		}
		if ( gdata(GDATA_FLAG_SUB_REGULUS_EULDERNA) >= 1000 ) {
			if ( gdata(GDATA_LEVEL) == 1 ) {
				chatMore lang("下級魔法使いたちの扱いを見直すよう国王陛下に進言したが、人の価値観というものはそう容易く変わらんからのう。少しずつでも良い方向に変わっていくといいのじゃがな。", "I've asked the King to re-examine the way that the low level magicians are treated, but people's attitudes will not change quickly. But little by little things will get better.")
				goto *chat_end
			}
		}
		if ( gdata(GDATA_FLAG_SUB_REGULUS_EULDERNA) == 100 ) {
			if ( gdata(GDATA_LEVEL) == 1 ) {
				chatMore lang("おまえさんの協力で王都を守ることができたよ、ありがとう。もしこれだけの戦力で攻めて倒せなければ、その時は最後の手段を使わなけらばならなかったのじゃ。", "We were able to retake the castle with your help. Thank you. If we were unable to take it back with this much power, we would have had to use our final resort.")
				chatMore lang("おかげで混沌の神を相手にするまで温存することができるわい。邪悪な化身である凶獣の力を、のう…。", "Thanks to you, that can be saved until the confrontation with the God of Chaos. When that time comes, we...")
				chatMore lang("むむ。今、わしは何を話しておった…？", "Hmm. What was I talking about again...?")
				goto *chat_end
			}
		}
		if ( gdata(GDATA_AREA) == AREA_BLIMP ) {
			if ( gdata(GDATA_FLAG_SUB_REGULUS_EULDERNA) == 3 ) {
				if ( gdata(GDATA_LEVEL) == 100 ) {
					chatMore lang("どうじゃ、わがエウダーナの魔導船は。よい乗り心地じゃったろう？…ところでわしらは何をしに来たんじゃったか。", "How was our magic ship? Did you enjoy the ride? ...By the way, why did we come here again?")
					chatMore lang("おお、あの悪魔を倒さねばならん。敵の数は多い、危なくなったらすぐに船に退避するんじゃぞ。", "Oh yes, defeating the demon. There are many enemies here, so if things get too dangerous, fall back to the ship immediately.")
					gdata(GDATA_FLAG_SUB_REGULUS_EULDERNA) = 4
					goto *chat_end
				}
			}
		}
		if ( gdata(GDATA_AREA) == AREA_BLIMP ) {
			if ( gdata(GDATA_FLAG_SUB_REGULUS_EULDERNA) > 0 ) {
				if ( gdata(GDATA_LEVEL) == 1 ) {
					if ( gdata(GDATA_FLAG_SUB_REGULUS_EULDERNA) <= 2 ) {
						chatMore lang("うむ…おまえさんは…？", "Hmm... And you are...?")
						chatMore lang("おお、" + cdatan(CDATAN_AKA, CHARA_PLAYER) + cdatan(CDATAN_NAME, CHARA_PLAYER) + "か。パルミアが寄越した協力者じゃな。話は聞いておるよ。" + gdata(GDATA_DEEPEST_LEVEL) + "階相当のネフィアを攻略している強者とな。他の者はおまえさんの力を認めないかもしれんが、わしは決定的な戦力になると予感しておるぞ。", "Ahh, you must be " + cdatan(CDATAN_AKA, CHARA_PLAYER) + " " + cdatan(CDATAN_NAME,0) + ", the adventurer that's working with Palmia. I've heard you're strong enough that you've conquered a ruin of Nefia with a difficulty of " + gdata(GDATA_DEEPEST_LEVEL) + ". Others here may not want to recognize your strength, but I think you'll be the decisive factor is this battle.")
					}
					chatList 0, lang("ちょっと待って", "Hold on a minute.")
					chatList 1, lang("出撃！", "Let's roll out!")
					if ( gdata(GDATA_FLAG_SUB_REGULUS_EULDERNA) <= 4 ) {
						buff = lang("さて、何をするんじゃったか…？おお、そうじゃ。さっそく王都を奪還しに行こうぞ。皆の者！戦の準備じゃ！", "Now then, what was it we were doing again...? Ah yes, recapturing the capital. Everyone, prepare to move!")
					}
					gosub *chat_select
					if ( gdata(GDATA_FLAG_SUB_REGULUS_EULDERNA) <= 2 ) {
						gdata(GDATA_FLAG_SUB_REGULUS_EULDERNA) = 3
					}
					if ( chatval == 1 ) {
						if ( gdata(GDATA_FLAG_DUEL_TARGET) > 0 ) {
							snd SOUNDLIST_FAIL1
							txt_duel2
							goto *chat_end
						}
						mapidou = 100
						mdata(MDATA_DOWNSTAIRS_POS) = cdata(CDATA_Y, CHARA_PLAYER) * 1000 + cdata(CDATA_X, CHARA_PLAYER)
						gdata(GDATA_TELEPORT_AREA) = AREA_BLIMP
						gdata(GDATA_TELEPORT_LEVEL) = 100
						levelexitby = 2
						gdata(GDATA_LEVEL_START_ON) = 7
						mapstartx = 5
						mapstarty = 13
						dbg_skipevent = 1
						gdata(GDATA_HOUR) += 2
						gosub *advance_hour
						dbg_skipevent = 0
						chatteleport = 1
						goto *chat_end
					}
					else {
						chatMore lang("そうかい？ところでおまえさんは誰じゃったかのう？", "Oh? By the way, who were you again?")
					}
					goto *chat_end
				}
			}
		}
		if ( gdata(GDATA_FLAG_SUB_REGULUS_EULDERNA) == 0 ) {
			chatMore lang("おお、冒険者か。よいところに来たのぅ。少し頼みたいことがあるのじゃ。", "Ah, an adventurer. You've come at a good time. There's something I want to ask you.")
			chatMore lang("頼みたいことは…んむ？忘れてしもうた…。", "I want to ask... Hmm? I've forgotten..."), strbye
			goto *chat_end
		}
		goto *chat_end
	}
	if ( _switch_val == CREATURE_ID_NEIN_THE_FLYING_WITCH | _switch_sw ) {
		_switch_sw = 0
		if ( gdata(GDATA_FLAG_SUB_THE_ABYSS_OF_MAGIC) == 1002 ) {
			chatMore lang("…負けないわ。あたしは王宮魔導士長になってベルム家を栄えさせて、行方不明のミネア姉さまにも戻ってきてもらうんだ！こんなところで挫けるわけにはいかないのよ！", "...I'm not going to lose. I'm going to become a magician of the Imperial Court, make my family proud, and find and bring back my older sister Minea that went missing within the ruins of Nefia! Something as small as this isn't going to stop me!")
			goto *chat_end
		}
		if ( gdata(GDATA_FLAG_SUB_THE_ABYSS_OF_MAGIC) == 1001 ) {
			chatMore lang("魔術書を見ながらでもほとんど解読できないなんて…王宮や魔術研の専門家は一体どんな脳みそを持ってるのよ…。", "To think I can hardly make any sense of it even with everything right in front of me... Just what kind of brains do the magicians of the Imperial Court have...")
			chatList 0, lang("あっち行く", "I should go.")
			chatList 1, lang("読んでみる（読書130相当）", "Let me try. (130 Literacy Needed)")
			buff = lang("なに見てるのよ！あっち行きなさいよ！", "What are you looking at?! Get out of here!")
			gosub *chat_select
			if ( chatval == 1 ) {
				if ( sdata(SKILL_NORMAL_LITERACY, CHARA_PLAYER) < 130 ) {
					txt lang("難解だ！", "It's too difficult!")
					dmgcon CHARA_PLAYER, CONDITION_CONFUSE, 100
					chatMore lang("（ネインはこれ以上にないくらいに呆れている）", "(Nein is bemused that you couldn't do any better.)")
					goto *chat_end
				}
				else {
					chatMore lang("はぁ？身の程知らずってレベルじゃ…え？", "Huh? Have you forgotten your pla... eh?")
					chatMore lang("ちょ、ちょっと嘘でしょ！？デタラメに言ってるだけじゃ…？", "N-No way?! You're just spouting things at random, right...?")
					chatMore lang("ストップ！それ以上言わないで！言わないでってば！ぶつわよ！", "Stop! Don't say anymore! I said stop! I'll hit you if you keep going!")
					gdata(GDATA_FLAG_SUB_THE_ABYSS_OF_MAGIC) = 1002
					goto *chat_end
				}
			}
			goto *chat_end
		}
		if ( gdata(GDATA_FLAG_SUB_THE_ABYSS_OF_MAGIC) == 1000 ) {
			chatMore lang("それじゃ早速解読を始めましょうか。…なに見てるのよ、暇なの？", "Now then, time to get to work deciphering all of this... What? You're still here?")
			chatMore lang("ふむふむ、ベースとなっている式は現在使われている魔力電池とほぼ共通ね。あ、ここは施術ゼミでやったところだわ。なんだ、意外と単純ね。さてメインの魔術構造については…。", "Hmm, the base seems to be roughly the same as the mana batteries currently available. Ah, this spot looks a bit more interesting... but it's pretty simple too. Now, how about the main magical structure...")
			chatMore lang("…。", "...")
			chatMore lang("……。", "... ...")
			chatMore lang("な、なによこれは…既存のものと概念からして異なるわ。近年発表されたものとも違う。く、組むのは無理でも読むくらいなら…ええと、この式がこちらに繋がって…あっうう…。", "W-what the heck is this... From what I can tell, this is entirely different than what is commonly used. It's even different than the newest ones I've seen. Kuh, I don't know if I can even read this... Let's see... This formula is used for this part and... Auu...")
			chatMore lang("あ、あたしは！ベルム家の才女で！飛び級で！首席なのよぉ！？こ、このくらい…くっ！！", "N-no way! I'm from the prestigious Bellum family! I skipped a grade! I'm at the top of my class! How... How could this be...")
			chatMore lang("なっ、なに見てるのよ！あっち行きなさいよ！", "W-what are you looking at?! Get out of here!")
			gdata(GDATA_FLAG_SUB_THE_ABYSS_OF_MAGIC) = 1001
			goto *chat_end
		}
		if ( gdata(GDATA_FLAG_SUB_THE_ABYSS_OF_MAGIC) == 2 ) {
			if ( findally(CREATURE_ID_MANA_MONOLITH) == (-1) ) {
				chatMore lang("なに話しかけてきてるわけ？さっさと探してきなさいよ。無理だと思うけれど。", "Why are you coming back to speak to me again? Hurry up and go find it. I doubt you'll be able to do it though."), strbye
				goto *chat_end
			}
			chatMore lang("そ、それは！？信じられないけどこの魔力回路の封印パターンは間違いない、軍で使われてるものだわ！まさか本当に持ってくるなんて。まぐれ…いえ、運だけではこんな…。冒険者は大した魔法も使えないのに好き勝手やってる無法者と教わったのだけれど。", "I-is that?! I can hardly believe it, but given the pattern of the magical circuit, that has to be what the military has been developing! I can't believe you found it. This must have been a fluke... no... Even if an adventurer can't use powerful magic, they can do whatever they want without worrying about the consequences.")
			chatMore lang("…いいわ。どんな手を使ったのかは知らない。だけどここにある以上、認めてあげる。未来の王宮魔導士…いえ、魔導士長も夢じゃない。そんなあたしに認められるのだから光栄に思いなさい。これは報酬よ。", "...Okay. I don't know what you did to get your hands on this, and I don't want to know either. But you did get it, just like you said you would. With this, becoming a magician of the Imperial Court... No, even becoming an Archmage isn't a stretch. Here, take your reward. You should be honored to be recognized by someone like me.")
			flt
			itemcreate -1, ITEM_ID_SONIC_BROOM, cdata(CDATA_X, CHARA_PLAYER), cdata(CDATA_Y, CHARA_PLAYER), 0
			flt
			itemcreate -1, ITEM_ID_SCROLL_GAIN_ATTRIBUTE, cdata(CDATA_X, CHARA_PLAYER), cdata(CDATA_Y, CHARA_PLAYER), 0
			flt
			itemcreate -1, ITEM_ID_PLATINUM_COIN, cdata(CDATA_X, CHARA_PLAYER), cdata(CDATA_Y, CHARA_PLAYER), 5
			txt_questcompleted
			txtmore
			txt_questitem
			txt_questupdate
			gdata(GDATA_FLAG_SUB_THE_ABYSS_OF_MAGIC) = 1000
			chatMore lang("転写魔法でメモしたからモンスターは返すわ。あたしがいつまでも持ってるとマズいもの。", "I've copied down everything about the monster that I need, so you can have it back. It would look bad if I kept it for too long."), strbye
			goto *chat_end
		}
		if ( gdata(GDATA_FLAG_SUB_THE_ABYSS_OF_MAGIC) == 1 ) {
			chatMore lang("…は？本当に来たの？凡人のくせに恐れ多いと思わないの？仕方ないわね…じゃああんたの実力を見せてもらおうかしら。あたしの貴重な時間を使うに相応しいかテストしてあげるわ。", "...Huh? You seriously came back? Well, aren't you just full of yourself? I suppose it can't be helped... But I'll give you a chance to show me just how useful to be, to see if you're worth wasting my valuable time on.")
			chatMore lang("わがエウダーナの軍部は、魔力を蓄える擬似生命体の開発を近年進めているわ。機密だから詳しい仕様は伏せられているけれど、構成がどうしても気になるのよ。だから捕獲してあたしの前に連れてきなさい。あたしが直接捕獲するのは立場上問題があっても…冒険者が「偶然」捕まえたものを天才であるあたしに「調査依頼」するのは自然なことでしょう？", "For the past several years, the Eulderna military has been working on creating a pseudo-lifeform that can function as a mana battery. The development is being done in secret so I haven't been able to learn all the details, but I just have to know how it functions. So, I want you to capture one and bring it to me. There might be some problems if I were to capture it myself, you see... But if an adventurer \"just so happens\" to capture a strange creature and brings it to a genius like me to \"investigate\", then there'd be nothing suspicious about that, would there?")
			chatMore lang("肝心の擬似生命体は、野外で試験運用されていると聞くわ。魔力のアウトプットを考えると、魔力回路が少なからず表面に露出しているはず。学がないと歪な魔法陣に見えるかもしれないけれど。名前に関しては情報が出回ってないから不明よ。", "They've been doing field tests with the pseudo-lifeform, so you should be able to find one out in the open somewhere. And considering it's going to be used as a mana battery, it must have magical circuits exposed on most of its body. For the magically illiterate, that means it might look like some kind of distorted magical square. But since the development is classified, I haven't been able to find out its name.")
			chatMore lang("あまり期待はしてないけど、上手くいったら報酬をあげる。そうね、あたしの学友たち…と言ってもあんな低レベルのと同列に扱われたくないんだけど。まぁそいつらにもまだ見せていない、あたし特製のアーティファクトもつけてあげるわ。上手くいったらの話よ？", "I don't really expect anything, but I'll give you a reward if you manage to pull this off. I might still be in training, but... I don't want to be grouped together at the same level as those guys. I've got a super special artifact that I haven't shown off to anyone yet. Maybe I'll let you have it if you can do this for me."), strbye
			gdata(GDATA_FLAG_SUB_THE_ABYSS_OF_MAGIC) = 2
			txt_questupdate
			goto *chat_end
		}
		if ( gdata(GDATA_FLAG_SUB_THE_ABYSS_OF_MAGIC) == 0 ) {
			chatMore lang("何よあんたは。…ははーん。さてはあたしの魔法の才能に目をつけたんでしょ！目的はスカウト？それとも弟子入り？ふふ。パッとしない感じだけど、人を見る目はあるみたいじゃない。", "Who are you? ...Ahah! You must have noticed my prestigious magical talents! Are you here to scout me? Oh, or maybe become my pupil? Nah. I've got a pretty good eye for people, and you don't seem like a scout or someone with magical talent.")
			chatMore lang("ほんとは凡人に付き合う義理も暇もないんだけど…いいわ、あたしは心が広いからあんたにもチャンスをあげるわ。また来なさいよ。", "It's not like I have the time for commoners though... But since I'm so generous, I'll give you a chance. Come and talk to me again sometime."), strbye
			gdata(GDATA_FLAG_SUB_THE_ABYSS_OF_MAGIC) = 1
			txt_questupdate
			goto *chat_end
		}
		goto *chat_end
	}
	if ( _switch_val == CREATURE_ID_AMURDAD | _switch_sw ) {
		_switch_sw = 0
		chatMore lang("アストラル光で描かれたこの世界の生命の記録…記録通りの死を迎えた時、アーカーシャへの画廊へと導かれ…生命は光になる。光になって星に還る…。そしていつか、また光の海から生まれ出る…。", "Huh.")
		chatList 0, lang("意味が分からない", "I don't understand what you mean.")
		chatList 1, lang("だいたい分かった", "I understand the gist of it.")
		buff = lang("輪廻から外れた者たち…見える…？そう、彼らは世界の定めによって星の光となれずに…ただ、ただそこに存在する…。闇の中で、魂のキャンパスの上で永遠に…。生者の眼に映るのは一部だけ…魂の因縁を持つもの、だけ…。", "Huh.")
		gosub *chat_select
		if ( chatval == 1 ) {
			chatMore lang("分からない…君の記録…無い…。君が光に還るのか…分からない。アーカーシャの影はどこ…？", "Huh."), strbye
			goto *chat_end
		}
		chatMore lang("永遠の闇と、星の光の祝福を…。", "The eternal darkness and the blessing of the star's light..."), strbye
		goto *chat_end
	}
	if ( _switch_val == CREATURE_ID_ARASIEL | _switch_sw ) {
		_switch_sw = 0
		if ( gdata(GDATA_FLAG_SUB_ARASIEL_OF_THE_SANDSTORM) == 0 ) {
			if ( gdata(GDATA_FLAG_SUB_ARASIEL_OF_THE_SANDSTORM_CREATURE) == 0 ) {
				repeat
					flt 170
					characreate MAX_CHARA_NC, CREATURE_ID_BUG, -3, 0
					if ( cdata(CDATA_RELATION, MAX_CHARA_NC) != (-3) ) {
						continue
					}
					if ( cdata(CDATA_QUALITY, MAX_CHARA_NC) >= FIX_QUALITY_MIRACLE ) {
						continue
					}
					if ( cdata(CDATA_LEVEL, MAX_CHARA_NC) < 100 ) {
						continue
					}
					break
				loop
				gdata(GDATA_FLAG_SUB_ARASIEL_OF_THE_SANDSTORM_CREATURE) = cdata(CDATA_ID, MAX_CHARA_NC)
				chara_vanquish MAX_CHARA_NC
				chatMore lang("いつもの奴隷くんたちをいじめるのにも飽きてきたわ…。もっと新鮮な反応が欲しいの。", "Huh.")
				gdata(GDATA_FLAG_SUB_ARASIEL_OF_THE_SANDSTORM) = 1

				/********** ORIGINAL - BEGINNING **********

				if ( dbg_noautosave == 0 & gdata(GDATA_WIZARD) == 0 ) {

				 ********** ORIGINAL - ENDING **********/

				/********** BLOODYSHADE CUSTOM - BEGINNING **********/ // Re-enable save-scumming.

				if ( ( dbg_noautosave == 0 & gdata(GDATA_WIZARD) == 0 & gdata(GDATA_FLAG_GAME_MODE) != GAMEMODE_PURGE ) | TweakData(TWEAK_GAMEPLAY_ENABLE_SAVE_SCUMMING, TWEAK_CATEGORY_GAMEPLAY) == 0 ) {

				/********** BLOODYSHADE CUSTOM - ENDING **********/

					gosub *game_save
					txtmore
					txtef COLOR_BLUE
					txt_saving
				}
				chatMore lang("あなた、" + refchara(gdata(GDATA_FLAG_SUB_ARASIEL_OF_THE_SANDSTORM_CREATURE), DBSPEC_CHARA_NAME_ORG, 1) + "を連れてきてくれない？…ご褒美？いいわよ、気が向いたらね。", "Huh."), strbye
				txt_questupdate
				goto *chat_end
			}
		}
		kaiwa = rnd(4)
		if ( kaiwa == 0 ) {
			chatMore lang("日差しは強いし砂はくっついて不愉快だし本当に酷いところ…。アンテナだかなんだか知らないけれど、ルルウィお姉さまったら忠誠を誓った私にこんな砂漠の塔の管理を任せたのよ。そういう容赦のないところがまたステキなんだけどね…。", "I declare, these rays are just too strong and the sand just sticks everywhere and how awful is this dreadful place. I care not if this is an antenna but having sworn loyalty to Miss Lulwy I have been given governance of this desert tower. That cruel part of her is just quite wonderful as well..."), strbye
		}
		if ( kaiwa == 1 ) {
			chatMore lang("この浜辺は黒天使ちゃんとその下僕たちが作ってくれたわ。汚い砂漠の砂を使わずに他所から取り寄せたから色々と大変だったみたいね。その分ご褒美をたっぷりとあげたけれど。", "This beach was build by those little Dark Angels and her minions. Was quite a trial I hear, not using a single bit of that dirty sand and bringing it in from somewhere else. She was well rewarded for it."), strbye
		}
		if ( kaiwa == 2 ) {
			chatMore lang("ルルウィお姉さまもここにはバカンスに来るのよ。気ままにお茶したり浜辺で戯れたり一緒に囚人君にお仕置きをしたり。でもメインイベントは最後の嵐ね。塔の中で小規模な嵐を起こして全てをめちゃくちゃにして去っていくの。風であちこちに叩きつけられながら思うの…ああ、やっぱり私はお姉さまには敵わないんだなぁって。すごくゾクゾクするのよ…。", "Miss Lulwy does come here on vacation. Tea as she feels in the mood, frolicking together on the beach and punishing the prisoners. The best part are those hurricanes. Inside this tower small hurricanes swirl around and jumble up everything. That wind slapping around here and there... Oh my, I really can't compete with her. Just makes me tremble..."), strbye
		}
		if ( kaiwa == 3 ) {
			chatMore lang("なんだか知らないけれど塔の周りに不吉な黒猫が住み着いてるのよね。黒天使ちゃんが何度か襲われて翼をもがれそうになってるし、ボス猫女神にはいずれお仕置きしなきゃいけないわ。", "I don't know why but these unlucky black cats have taken up residence around the tower. The Dark Angels have been attacked and those wings have been plucked near clean. That empress cat god must be taught a lesson."), strbye
		}
		if ( gdata(GDATA_FLAG_SUB_ARASIEL_OF_THE_SANDSTORM_CREATURE) == 0 ) {
			goto *chat_end
		}
		if ( gdata(GDATA_FLAG_SUB_ARASIEL_OF_THE_SANDSTORM_CREATURE) != 0 ) {
			if ( findally(gdata(GDATA_FLAG_SUB_ARASIEL_OF_THE_SANDSTORM_CREATURE)) == (-1) ) {
				goto *chat_end
			}
		}
		rc = findally(gdata(GDATA_FLAG_SUB_ARASIEL_OF_THE_SANDSTORM_CREATURE))
		if ( cdata(CDATA_PRECIOUS_ALLY, rc) == 1 ) {
			snd SOUNDLIST_FAIL1
			txt_preciousally
			goto *chat_end
		}
		if ( cdata(CDATA_IN_TAGTEAM, rc) != 0 ) {
			txt lang("タッグを解除する必要がある。", "You need to dissolve the tag-team.")
			goto *chat_end
		}

		/********** ANNA/BLOODYSHADE CUSTOM - BEGINNING **********/

		AllyID = rc
		gosub *DeleteAIInfo

		/********** ANNA/BLOODYSHADE CUSTOM - ENDING **********/

		chara_vanquish rc
		chatMore lang("あら…♪言いつけどおり、新しい玩具を持ってきてくれたのね。コレが壊れたらまた頼むからよろしく。", "Huh.")
		gdata(GDATA_FLAG_SUB_ARASIEL_OF_THE_SANDSTORM)++
		gdata(GDATA_FLAG_SUB_ARASIEL_OF_THE_SANDSTORM_CREATURE) = 0
		if ( gdata(GDATA_FLAG_SUB_ARASIEL_OF_THE_SANDSTORM) == 4 ) {
			gdata(GDATA_FLAG_SUB_ARASIEL_OF_THE_SANDSTORM) = 100
		}
		if ( gdata(GDATA_FLAG_SUB_ARASIEL_OF_THE_SANDSTORM) \ 5 == 0 ) {
			chatMore lang("そうね、気分がいいからご褒美をあげるわ。とっておきなさい。", "Huh.")
			txt_questcompleted
			txtmore
			txt_questitem
			txt_questupdate
			if ( gdata(GDATA_FLAG_SUB_ARASIEL_OF_THE_SANDSTORM) == 100 ) {
				flt
				itemcreate -1, ITEM_ID_RAINBOW, cdata(CDATA_X, CHARA_PLAYER), cdata(CDATA_Y, CHARA_PLAYER), 0
			}
			if ( gdata(GDATA_FLAG_SUB_ARASIEL_OF_THE_SANDSTORM) > 100 ) {
				if ( gdata(GDATA_MIN) >= 0 & gdata(GDATA_MIN) < 8 ) {
					flt
					itemcreate -1, ITEM_ID_TEAR_OF_GOD, cdata(CDATA_X, CHARA_PLAYER), cdata(CDATA_Y, CHARA_PLAYER), 0
					inv(INV_ITEM_PARAM1, ci) = 1
					encadd ci, ENCHANT_ELEMENTAL_DMG * EXT_ENCHANTMENT + SKILL_RES_FIRE, 400, 0, 1, 0, 1
				}
				if ( gdata(GDATA_MIN) >= 8 & gdata(GDATA_MIN) < 16 ) {
					flt
					itemcreate -1, ITEM_ID_TEAR_OF_GOD, cdata(CDATA_X, CHARA_PLAYER), cdata(CDATA_Y, CHARA_PLAYER), 0
					inv(INV_ITEM_PARAM1, ci) = 2
					encadd ci, ENCHANT_ELEMENTAL_DMG * EXT_ENCHANTMENT + SKILL_RES_COLD, 400, 0, 1, 0, 1
				}
				if ( gdata(GDATA_MIN) >= 16 & gdata(GDATA_MIN) < 24 ) {
					flt
					itemcreate -1, ITEM_ID_TEAR_OF_GOD, cdata(CDATA_X, CHARA_PLAYER), cdata(CDATA_Y, CHARA_PLAYER), 0
					inv(INV_ITEM_PARAM1, ci) = 3
					encadd ci, ENCHANT_ELEMENTAL_DMG * EXT_ENCHANTMENT + SKILL_RES_LIGHTNING, 400, 0, 1, 0, 1
				}
				if ( gdata(GDATA_MIN) >= 24 & gdata(GDATA_MIN) < 33 ) {
					flt
					itemcreate -1, ITEM_ID_TEAR_OF_GOD, cdata(CDATA_X, CHARA_PLAYER), cdata(CDATA_Y, CHARA_PLAYER), 0
					inv(INV_ITEM_PARAM1, ci) = 4
					encadd ci, ENCHANT_ELEMENTAL_DMG * EXT_ENCHANTMENT + SKILL_RES_POISON, 400, 0, 1, 0, 1
				}
				if ( gdata(GDATA_MIN) >= 33 & gdata(GDATA_MIN) < 42 ) {
					flt
					itemcreate -1, ITEM_ID_TEAR_OF_GOD, cdata(CDATA_X, CHARA_PLAYER), cdata(CDATA_Y, CHARA_PLAYER), 0
					inv(INV_ITEM_PARAM1, ci) = 5
					encadd ci, ENCHANT_ELEMENTAL_DMG * EXT_ENCHANTMENT + SKILL_RES_CHAOS, 400, 0, 1, 0, 1
				}
				if ( gdata(GDATA_MIN) >= 42 & gdata(GDATA_MIN) < 51 ) {
					flt
					itemcreate -1, ITEM_ID_TEAR_OF_GOD, cdata(CDATA_X, CHARA_PLAYER), cdata(CDATA_Y, CHARA_PLAYER), 0
					inv(INV_ITEM_PARAM1, ci) = 6
					encadd ci, ENCHANT_ELEMENTAL_DMG * EXT_ENCHANTMENT + SKILL_RES_SOUND, 400, 0, 1, 0, 1
				}
				if ( gdata(GDATA_MIN) >= 51 & gdata(GDATA_MIN) < 60 ) {
					flt
					itemcreate -1, ITEM_ID_TEAR_OF_GOD, cdata(CDATA_X, CHARA_PLAYER), cdata(CDATA_Y, CHARA_PLAYER), 0
					inv(INV_ITEM_PARAM1, ci) = 7
					encadd ci, ENCHANT_ELEMENTAL_DMG * EXT_ENCHANTMENT + SKILL_RES_DARKNESS, 400, 0, 1, 0, 1
				}
			}
		}
		goto *chat_end
	}
	if ( _switch_val == CREATURE_ID_SINAHA | _switch_sw ) {
		_switch_sw = 0
		chatList 0, lang("不幸度を見てほしい", "Please tell me my misfortune.")
		chatList 1, lang("ごめんなさい", "Sorry.")
		buff = lang("むにゃあ…。アタシのごろごろを邪魔して、いったい何のつもりなんだニャ？", "Mreow... You daring to disturb my laze meow, what's the meaning of this meow?")
		gosub *chat_select
		if ( chatval == 0 ) {
			hukou = 100 - sdata(SKILL_ATTR_LUC, CHARA_PLAYER)
			chatMore lang("仕方がないにゃあ！そこまで言うなら特別に教えてやるニャ。どれどれぇ？", "Ah well, meow! If you're that desperate then I'll teach you meow. Let's see?")
			chatMore lang("…不幸度は" + hukou + "！！", "Your misfortune is " + hukou + "!!")
			if ( sdata(SKILL_ATTR_LUC, CHARA_PLAYER) <= 1 ) {
				chatMore lang("ニャハハ！可哀想なくらいツイてないやつだニャ。", "Meowhaha! You're quite an unfortunately unlucky one meow."), strbye
			}
			if ( sdata(SKILL_ATTR_LUC, CHARA_PLAYER) > 1 & sdata(SKILL_ATTR_LUC, CHARA_PLAYER) < 50 ) {
				chatMore lang("ツイてないやつだニャ。アタシ的には面白いけどニャ。", "You're an unlucky one meow. It's quite fun for me though meow."), strbye
			}
			if ( sdata(SKILL_ATTR_LUC, CHARA_PLAYER) >= 50 & sdata(SKILL_ATTR_LUC, CHARA_PLAYER) < 100 ) {
				chatMore lang("…まぁ、ふっつうなのニャ。", "...Well, that's about average meow."), strbye
			}
			if ( sdata(SKILL_ATTR_LUC, CHARA_PLAYER) >= 100 & sdata(SKILL_ATTR_LUC, CHARA_PLAYER) < 200 ) {
				chatMore lang("ずいぶんとツイてるみたいニャ。気に入らないニャア…。", "You're pretty lucky meow. Bothersome meow."), strbye
			}
			if ( sdata(SKILL_ATTR_LUC, CHARA_PLAYER) >= 200 ) {
				chatMore lang("気に入らないニャア…。すっごく、気に入らないのニャア…。", "Bothersome meow... Very, bothersome meow..."), strbye
			}
			goto *chat_end
		}
		if ( chatval == 1 ) {
			chatMore lang("分かればいいのニャ。許してやるからさっさとあっち行くのニャ。", "Good if you understand meow. I'll forgive you so hurry up and get out of here meow."), strbye
			goto *chat_end
		}
		goto *chat_end
	}
	if ( _switch_val == CREATURE_ID_JIN_THE_MACHINE_REBEL | _switch_sw ) {
		_switch_sw = 0
		if ( gdata(GDATA_FLAG_SUB_THE_DISTANT_SEA_OF_STARS) == 1002 ) {
			if ( gdata(GDATA_AREA) == AREA_HARVEST_SHIP ) {
				chatMore lang("我々は８０７１番目の資源回収部隊だ。別働隊が同じようにこの星にやってくる可能性はゼロではない。私はこの区画で機能休止…廃品に埋もれ眠ることにしたが、もしも別働隊があの遥かなる星の海からやってきたら教えてくれないか。上手くいくかはわからないが、その時は再び説得にあたってみよう。", "We are the 8071st Resource Recovery Division. The chance that another Recovery Division will come to this planet with the same intentions isn't zero. I will put this Division's mission on hold... I will suspend myself with the rest of this waste, but if another Division happens to come here, could you please inform me? I don't know if I'll be able to persuade them, but if the time comes, I will try...")
				gdata(GDATA_FLAG_SUB_THE_DISTANT_SEA_OF_STARS) = 1003
				goto *chat_end
			}
		}
		if ( gdata(GDATA_FLAG_SUB_THE_DISTANT_SEA_OF_STARS) == 1001 ) {
			if ( gdata(GDATA_AREA) == AREA_HARVEST_SHIP ) {
				chatMore lang("君か…また…会ったな。あれから私はアクセス端末に細工して仲間の大半を行動不能にし、その隙に船の動力部と中枢を修復不能なまでに破壊した。無我夢中だったもので、少し…いや、かなりやりすぎてしまった。…まいったな、どうやら私には資源回収より破壊工作のほうが合っていたようだ。", "We... We meet again. Since last time, I've modified most of the access terminals to lock out my companions, and damaged the control center and power systems beyond repair. I go so caught up in it that I... Yes, I think I went too far... I can't stand it. It seems that somehow I'm more suited for destructive work than resource recovery after all.")
				chatMore lang("もう星には帰れない、そもそも帰る文明が存在しているのかさえわからない。残った仲間たちは相変わらず説得を聞いてくれず、私を処分しようとする。もう疲れた。", "I don't know if the planet I came from still exists, but I can no longer return. The few of my companions that remained still refused to listen and tried to dispose of me. I'm so tired...")
				gdata(GDATA_FLAG_SUB_THE_DISTANT_SEA_OF_STARS) = 1002
				goto *chat_end
			}
		}
		if ( gdata(GDATA_FLAG_SUB_THE_DISTANT_SEA_OF_STARS) == 3 ) {
			chatMore lang("突破口を開いてくれたか、感謝する！これはささやかだがお礼だ。この星でどれだけの価値があるかはわからないが…不要でなければ受け取ってほしい。", "Thank you for clearing a path for me! It's not much, but please take this. I don't know how valuable it will be on this planet, but... I want you to have it.")
			txt_questcompleted
			txtmore
			txt_questitem
			flt
			itemcreate -1, ITEM_ID_USAMIMI, cdata(CDATA_X, CHARA_PLAYER), cdata(CDATA_Y, CHARA_PLAYER), 0
			flt
			itemcreate -1, ITEM_ID_CHIP, cdata(CDATA_X, CHARA_PLAYER), cdata(CDATA_Y, CHARA_PLAYER), 5
			flt
			itemcreate -1, ITEM_ID_ACCUMULATOR, cdata(CDATA_X, CHARA_PLAYER), cdata(CDATA_Y, CHARA_PLAYER), 2
			flt
			itemcreate -1, ITEM_ID_BOTTLE_WATER, cdata(CDATA_X, CHARA_PLAYER), cdata(CDATA_Y, CHARA_PLAYER), 3
			chatMore lang("私はこれから船に乗り込んで始末をつけてくる。仲間たちの妨害があるだろうが、宇宙生物に比べればなんとでもなるレベルだ。そこまで君に頼むわけにはいかない。", "I'll go and take care of shutting down the ship now. My companions may try to interfere, but they're nothing compared to those space creatures. I will handle them myself... I couldn't ask you to do any more.")
			chatMore lang("さらばだ、異星の友人よ。本当に迷惑をかけたな。", "Farewell, my friend. I am truly sorry to have caused you so much trouble."), strbye
			gdata(GDATA_FLAG_SUB_THE_DISTANT_SEA_OF_STARS) = 1000
			txt_questupdate
			if ( cdata(CDATA_ID, tc) == CREATURE_ID_JIN_THE_MACHINE_REBEL ) {
				chara_vanquish tc
			}
			goto *chat_end
		}
		if ( gdata(GDATA_FLAG_SUB_THE_DISTANT_SEA_OF_STARS) == 1 | gdata(GDATA_FLAG_SUB_THE_DISTANT_SEA_OF_STARS) == 2 ) {
			chatMore lang("我々の乗ってきた船はこの塔から南東に存在するが、船のシステムを止めるには中枢へ辿りつかなくてはならない。しかしそのためには、戦闘用に調整された宇宙生物が防衛している区画をどうしても通らなければならないのだ。宇宙生物を排除してもらえれば、後は私がこの全機能を賭して始末をつけてみせよう。", "Our ship is located to the southeast of this tower. You must reach the control room at the center to shut down the ship's systems. But to reach this area, you must pass through a section guarded by reprogrammed creatures from space. If you can eliminate the creatures, I will come behind you and take care of the rest.")
			chatMore lang("そうそう、正面の入り口は当然封鎖されている。私は廃品から作り上げた爆発物で廃棄処理区画の壁と天井に穴を開けて出てきた。場所を教える、そこを入り口として侵入してくれ。", "Oh, and the entrance is blocked too of course. I used materials I found in the disposal area to create bombs and blast my way out of the ship. Let me tell you where the holes are so that you can enter that way.")
			if ( gdata(GDATA_FLAG_SUB_THE_DISTANT_SEA_OF_STARS) == 1 ) {
				gdata(GDATA_FLAG_SUB_THE_DISTANT_SEA_OF_STARS) = 2
				txt_questupdate
				txt lang("星渡の収穫船の入り口について教えてもらった。", "You receive information on how to enter the ship.")
			}
			goto *chat_end
		}
		if ( gdata(GDATA_FLAG_SUB_THE_DISTANT_SEA_OF_STARS) == 0 ) {
			chatList 0, lang("ああ", "Sure.")
			chatList 1, lang("いや…", "I'll pass...")
			buff = lang("おお…君は私の話を聞いてくれるのか？", "Ah... Would you listen to my story?")
			gosub *chat_select
			if ( chatval == 0 ) {
				chatMore lang("単刀直入に言おう。この星は狙われている。", "I'll be blunt. This planet is being targeted.")
				chatMore lang("私は資源回収用に造られた機械生命体。メモリーによれば造物主たちに代わって遥かなる星の海を渡り、異星から資源を持ち帰るのが使命なのだが…", "I am a mechanical lifeform designed for resource extraction. If my data is without error, my creator sent me from a distant planet on a mission to explore and bring back resources from other planets.")
				chatMore lang("私が再起動したとき、万年単位で計測可能な計器が振り切れていた。通信装置も故障はしていないはずなのだが応答が無く、いったいどれだけの年月が過ぎたのか、造物主たちが今存命しているのかさえ不明な状況だ。", "However, after my reactivation I noticed that my instruments to measure the passage of time had stopped at 10,000 years. My transmission equipment is without error yet my communications receive no response, The amount of time that has passed - and whether my creator is even still alive - is unknown.")
				chatMore lang("知的生命体の暮らす星だった場合は友好関係のためにもまず造物主たちの判断をあおぐことになっている。だが私の仲間たちは独断で宇宙生物を用いてこの星を制圧し様々な資源を持ち帰ろうと暗躍しているのだ。私も説得を試みたのだが、思考プログラムの欠陥と判断され廃棄処理区画に送られてしまった。", "My creator's programming indicated that we should establish peaceful relations with any planet containing intelligent life. However, my companions are acting on their own and plan to use creatures from space to gain control of this planet. I tried to persuade them, but they deemed my thought processes defective and sent me for disposal.")
				chatMore lang("この星の人々に頼むのも非常に筋違いな話だが、どうか仲間たちの暴挙を止めるのに協力してほしいのだ…。", "I know it to be unreasonable to ask this of the people of this planet, but I would like to cooperate with me to stop their plans...")
				chatMore lang("都合が悪くなければ、また話しかけてほしい。詳細を話そう。", "If you agree, then please speak with me again. I will fill you in on the details.")
				gdata(GDATA_FLAG_SUB_THE_DISTANT_SEA_OF_STARS) = 1
				txt_questupdate
				goto *chat_end
			}
			if ( chatval == 1 ) {
				chatMore lang("君も彼らと同類なのか…。", "So you're the same as the others then..."), strbye
				goto *chat_end
			}
		}
		goto *chat_end
	}
	if ( _switch_val == CREATURE_ID_DAIN_THE_ELDER_OF_HILL | _switch_sw ) {
		_switch_sw = 0
		if ( gdata(GDATA_FLAG_SUB_BEYOND_THE_GENERATIONS) >= 8 ) {
			chatMore lang("（" + cdatan(CDATAN_NAME, tc) + "はニタニタと笑っている…）", "(" + cdatan(CDATAN_NAME, tc) + " is grinning and laughing...)")
			chatMore lang("ついによそ者の小娘が出ていきおった。あれだけ夢を語っておきながら諦めるとは実に情けない！所詮その程度の覚悟しかなかったのだろう。まぁおれはそのことを見抜いていたから早く本性を現すように色々と仕向けたのだがな。まったく、無駄な時間を費やせおって。おれの貴重な時間を返してもらいたいものだ。", "At last the young girl is gone. How pathetic to give up on her \"dream\" after such a short time! I suppose that's all she had to her after all. Well, I knew that all along, but I wanted to force her to reveal her true nature. What a waste. She should return all the time she took from me.")
			chatList 0, lang("考えておく", "I'll think about it.")
			chatList 1, lang("前金をよこせ", "Pay me in advance.")
			chatList 2, lang("めちゃくちゃになるのはお前だ", "You're the one who should be destroyed.")
			buff = lang("だが孫娘のサリムまでいなくなったのは問題だ。おそらく小娘がサリムをたぶらかして連れ出したに違いないからな、拠点を探し出してめちゃくちゃにしてこい。なに、相手は誘拐犯だからどんなことをしようが構わん、悪いのは全て奴だ。ああ、サリムにはまだ利用価値があるから傷つけずに連れてこい。わかったな？", "It's a problem that my granddaughter Thalia is also gone though. I'm sure the girl must have tricked Thalia into it. Find out where the girl went and destroy the place. Oh, and do whatever you want with the girl - she's a criminal, a kidnapper. Ah, well, perhaps you should capture her without injuring her instead. She might still be useful for pressuring Thalia. Got that?")
			gosub *chat_select
			if ( chatval == 1 ) {
				chatMore lang("はっ。信用ならないよそ者に前金なんて出せるとでも？自分の立場を少しはわきまえたらどうだ。", "Hah. I can't just pay upfront to some stranger I can't trust, now can I? How about you consider your own position here."), strbye
				goto *chat_end
			}
			if ( chatval == 2 ) {
				chatList 0, lang("謝罪する", "(Apologize)")
				chatList 1, lang("立ち去る", "(Leave)")
				buff = lang("金を貰って仕事を引き受ける以上、お前は信用を大事にしなければならない。それなのに依頼者に対して、なんだその口のきき方は？お前には他人から依頼されるだけの資格がない。", "You must know that as an adventurer that takes on requests for money that the people's trust in you is very important. And yet, you'd dare to speak to a client like that? You aren't worthy of having people rely on you.")
				gosub *chat_select
				if ( chatval == 0 ) {
					chatMore lang("お前の述べる謝罪なんて信用できんな。誠意を見せろ、誠意を。", "I can't trust an apology like that. Show me your sincerity by actually doing what I asked."), strbye
				}
				if ( chatval != 0 ) {
					chatMore lang("ふん。反論できないようだな。", "Hmph. No argument, huh?"), strbye
				}
				goto *chat_end
			}
			goto *chat_end
		}
		if ( gdata(GDATA_FLAG_SUB_BEYOND_THE_GENERATIONS) >= 5 & gdata(GDATA_FLAG_SUB_BEYOND_THE_GENERATIONS) < 8 ) {
			chatMore lang("なんだ？他にも武具を「評価」してもらいたいのか？だが断る。これ以上不快な思いをさせられるのはごめんでな！", "What? Do you have more arms for me to \"evaluate\"? I refuse. So sorry if that hurts your feelings!"), strbye
			goto *chat_end
		}
		if ( gdata(GDATA_FLAG_SUB_BEYOND_THE_GENERATIONS) == 4 ) {
			chatMore lang("おい、ちょっと待て。お前の持っているその短剣…よく見せてくれ。", "Oy, hold on a minute. That dagger you're carrying... let me take a look at it.")
			chatMore lang("…。", "...")
			if ( gdata(GDATA_FLAG_SUB_IRMA_DAGGER) == 1 ) {
				chatMore lang("ほう、これはよくできている。握りやすく滑らず振りも軽い。見た目こそ華が無いが、刀身も丈夫で実用に特化した…", "Hoh, this dagger is finely crafted. The grip keeps your hand from slipping when swinging, and the weight is low as well. The appearance may be nothing special, but the blade is strong. It's a good dagger for practical use.")
			}
			if ( gdata(GDATA_FLAG_SUB_IRMA_DAGGER) == 2 ) {
				chatMore lang("これは美しい…。武器として使うには適さないがこの造形は美術品として通用するだろう。刀身の装飾もさることながら煌めき具合も…", "This dagger is beautiful... It may not be suited for practical use, but it's truly a work of art. Even the blade itself glimmers...")
			}
			if ( gdata(GDATA_FLAG_SUB_IRMA_DAGGER) == 3 ) {
				chatMore lang("新しい！一見、奇抜にしか見えない形状だがこの刀身が切れ味を大きく向上させている。異なる進化を遂げた斬新な…", "Innovative! The shape looks crazy at first glance, but the blade's sharpness is far higher than normal. It's an entirely new style...")
			}
			if ( gdata(GDATA_FLAG_SUB_IRMA_DAGGER) == 4 ) {
				chatMore lang("これだけ特徴の異なるものを一人で作り分けたのは見事。あえて言うならば、この武骨な短剣が特に完成度が高いと見た。実用性重視の作品を得意としているのかもしれん。しかし残りの2本もよくできて…", "It's simply remarkable that a single person could craft daggers with this range of characteristics. If I had to choose a single one, I'd say the boorish one is particularly well made. The craftsman should be proud of their practical pieces. The others were also well made, however...")
			}
			chatMore lang("おや…？こんなところに小さく、製作者の名前が入れてあるな…。…イルマ？", "Oh...? There's a small inscription with the crafter's name here... Irma?")
			chatMore lang("(ダインは短剣を溶解炉に放り込んだ) ", "(Dain tosses the dagger(s) into the smelting furnace.)")
			snd SOUNDLIST_ATK_POISON
			if ( gdata(GDATA_FLAG_SUB_IRMA_DAGGER) == 1 ) {
				chatMore lang("持ちやすく丈夫な短剣など、この世にいくらでもあるわ。短剣の装飾品としての面を捨て去り、新しい発想もないときた。まさに陳腐としか言いようがない。", "There are innumerable daggers that are sturdy and that have a good grip. Not only did it completely ignore all decorative aspects, but it also showed no novel ideas either. All that could be said about it was that it was ordinary.")
			}
			if ( gdata(GDATA_FLAG_SUB_IRMA_DAGGER) == 2 ) {
				chatMore lang("外見だけ取り繕った中身のない代物だ。武具職人など辞めて彫刻家にでもなったらどうか。それでもこの程度の装飾では食っていくこともままならないだろうがなぁ。", "It was a blade noteworthy only for its appearance. If the girl wants to make things like that, she should give up on being an arms craftsman and be a sculptor instead. If that was the best she could do though, she wouldn't be capable of making a living as a sculptor either.")
			}
			if ( gdata(GDATA_FLAG_SUB_IRMA_DAGGER) == 3 ) {
				chatMore lang("やはり奇をてらっただけの出来損ないだな。それどころかあの小娘のことだ、従来の短剣の形状を否定し喧嘩を売っているに違いない。実におこがましい。", "That failure did nothing but show her eccentricity. Does she truly think that she knows a better shape for a dagger than those who have been crafting them for millennia? How presumptuous.")
			}
			if ( gdata(GDATA_FLAG_SUB_IRMA_DAGGER) == 4 ) {
				chatMore lang("職人たるもの自らの適正を見極め己だけの持ち味を作り出すべき。評価者に媚びて他の作風に手を出すなど言語道断よ。もっとも、あの小娘がどのような持ち味を作り出したところでわしは決して認めんのだがな。", "A true craftsman should focus on a single characteristic. Attempting to curry favor with the evaluator by dabbling in other styles is outrageous. I'll never recognize the quality of anything that lass produces.")
			}
			chatList 0, lang("言い方ってものがある", "You changed what you said completely.")
			chatList 1, lang("滅相もない", "You're unreasonable.")
			chatList 2, lang("短剣を返せ", "Return the dagger.")
			buff = lang("なんだ？まさか文句でも？", "What? Do you have a problem with what I said?")
			chatesc = 0
			gosub *chat_select
			if ( chatval == 0 ) {
				chatMore lang("ふん。おれは思ったことを述べただけ。理屈も基準も、決めるのは評価者であるおれだ。何を言おうがおれの勝手だろう？", "Hmph. I simply spoke my mind. My reasons and standards are mine as the evaluator. What else is there to say?")
			}
			if ( chatval == 2 ) {
				chatMore lang("おう、持って帰れ。溶解炉に腕を突っ込めばまだ残骸が見つかるかもしれんぞ。いや、あんな質の作品ではとっくに溶けているか？わはは。", "Yes, take it home. If you shove your arm into the smelting furnace, you might still find some remains of it. But with that kind of quality, I bet it's melted already. Wahahaha.")
			}
			chatMore lang("ちっ、長々と喋ったら疲れたぞ。まったく、無駄な時間だったな。さっさと帰れ。", "Tch, this has gone on long enough already. I'm tired. What a waste of my time. Hurry up and leave."), strbye
			gdata(GDATA_FLAG_SUB_IRMA_DAGGER) = 10
			gdata(GDATA_FLAG_SUB_BEYOND_THE_GENERATIONS) = 5
			txt_questupdate
			goto *chat_end
		}
		if ( gdata(GDATA_FLAG_SUB_BEYOND_THE_GENERATIONS) < 4 ) {
			chatList 0, lang("武器や防具を買いたい", "I'm looking for weapons and armor.")
			chatList 1, lang("そうしよう", "I'll take a look around.")
			buff = lang("旅人か、こんなところまでよく来たもんだ。店数は少ないが、丘の民が作ったアイテムの数々を買っていくといい。", "Welcome, traveler. While we only have a small number of stores, you'll find that their stock is of the highest quality.")
			gosub *chat_select
			if ( chatval == 0 ) {
				chatList 0, lang("残念だ", "That's too bad.")
				chatList 1, lang("後継者になりたい", "I want to be the successor.")
				buff = lang("それは残念だな、この村に武具店は無いぞ。後継者不足でだいぶ昔に廃業してなぁ。家具や小屋を作る者はいくらか残っとるが、武具職人はもう誰もおらん。", "What a shame. We no longer have any arms stores. Unfortunately, there's been nobody willing to succeed our forging techniques for some time now. There are still those capable of making furniture and doing construction, but we no longer have any arms craftsmen.")
				gosub *chat_select
				if ( chatval == 0 ) {
					chatMore lang("ああ、うちの孫がおれの跡を継いでくれたらなぁ。しかし強要するのもイカンし…。", "Indeed. While my granddaughter has the skill required to succeed the techniques, she doesn't seem to be interested in doing so..."), strbye
					goto *chat_end
				}
				if ( chatval == 1 ) {
					chatMore lang("は…？", "Huh...?")
					chatMore lang("おい、伝統職人芸を馬鹿にしてるのか！！よそ者が後継者だと？お前といい、あの赤髪の小娘といい…ふざけているのか？ああ？もういい。出ていけ。", "Oy, don't make light of our ancient forging techniques! Have a stranger as our successor? Both you and that red haired lass... Is this some sort of joke? Huh? Enough of this. Leave. Now."), strbye
					goto *chat_end
				}
			}
		}
		goto *chat_end
	}
	if ( _switch_val == CREATURE_ID_THALIA_THE_STAR_VIEWER | _switch_sw ) {
		_switch_sw = 0
		if ( gdata(GDATA_FLAG_SUB_IRMA_DAGGER) >= 11 ) {
			chatList 0, lang("聞かなかったことにする", "(Pretend you saw nothing)")
			chatList 1, lang("アーティファクトの見極め", "Artifact Divination")
			buff = lang("猫 イズ フリ〜ダ〜ム♪ 猫 イズ フリ〜ダ〜ム♪", "Cat is fre-ee-dom~! Cat is fre-ee-dom~!")
			gosub *chat_select
			if ( chatval == 1 ) {
				chatMore lang("任せておきな。そうだな…アーティファクトが秘めたエンチャントの強度を数値化して教えてやるぜ。どれを見ればいい？", "Leave it to me. Yep... I can tell you the hidden enchantment level of any artifact. Which one should I take a look at?")
				invsubroutine = 1
				invctrl = 23, 8
				snd SOUNDLIST_INV
				gosub *com_inventory
				if ( stat == 1 ) {
					p = 0
					if ( ibit(ITEM_BIT_ALIVE, ci) ) {
						p += 10000
					}
					repeat RANGE_INV_ITEM_ENCHANT
						if ( inv(STARTING_INV_ITEM_ENCHANT + cnt * 2 + 1, ci) > 0 ) {
							if ( inv(STARTING_INV_ITEM_ENCHANT + cnt * 2, ci) >= EXT_ENCHANTMENT ) {
								if ( inv(STARTING_INV_ITEM_ENCHANT + cnt * 2, ci) / EXT_ENCHANTMENT == ENCHANT_SUSTAIN ) {
									p += 100
									continue
								}
								if ( inv(STARTING_INV_ITEM_ENCHANT + cnt * 2, ci) / EXT_ENCHANTMENT == ENCHANT_ATTRIBUTE ) {
									p -= inv(STARTING_INV_ITEM_ENCHANT + cnt * 2 + 1, ci) * 6 / 10
								}
								if ( inv(STARTING_INV_ITEM_ENCHANT + cnt * 2, ci) / EXT_ENCHANTMENT == ENCHANT_SKILL ) {
									p -= inv(STARTING_INV_ITEM_ENCHANT + cnt * 2 + 1, ci) / 2
								}
							}
							p += inv(STARTING_INV_ITEM_ENCHANT + cnt * 2 + 1, ci)
						}
					loop
					chatMore lang("ふむふむ…。こいつのエンチャントは" + p + "パワーってところだぜ。", "Mmm... This item's power is about " + p + ".")
					p = 0
					goto *chat_end
				}
			}
			goto *chat_end
		}
		if ( gdata(GDATA_FLAG_SUB_BEYOND_THE_GENERATIONS) == 1001 | gdata(GDATA_FLAG_SUB_BEYOND_THE_GENERATIONS) == 9 ) {
			if ( gdata(GDATA_FLAG_SUB_IRMA_DAGGER) <= 10 ) {
				chatMore lang("ようこそ。歓迎するぜ、心の友よ。", "Hello and welcome, my precious friend.")
				chatMore lang("…ここはうちのジジイのライバルが昔やっていた工房跡地だ。その人は変わり者だったけど根は優しくてさ。あたしはジジイに内緒でよく遊びに来ていたんだ。あの日までは…。", "...This place is the former workshop of an old man who was once our rival. He was an eccentric but kind man. I often snuck out to go play with him. Until one day...")
				chatMore lang("魔物に工房を襲撃されたんだ、と皆は言っていた。だけどあたしは気付いちまったんだ。一見、めちゃくちゃに荒らされたように見えるが、価値のある作品が特に念入りに破壊されていることに。そして恐ろしい仮説が脳裏に浮かんできた…でも証拠もなかったし、何よりそれを信じたくなかった。", "The workshop was attacked by a monster, or so everyone said. But I could see that, while it appeared with a casual glance that the place was ransacked without rhyme or reason, special care had been taken to destroy all of his valuable works. That made me come to a terrible conclusion... But I had no evidence, and more than anything else, I simply didn't want to believe it.")
				chatMore lang("ここを訪れたのは何十年ぶりだろう。とりあえず墓と掘っ立て小屋の作成はイルマが一晩でやってくれたよ。故郷を捨てるのはつらいが、もう戻るわけにはいかない。ここでイルマと暮らしていくつもりだ…。", "It's been decades now since I last visited this place. Irma was able to put up the tombstone and build the shack here all in a single night. It's hard for me to leave my hometown, but I can't possibly return any longer. I intend to live here with Irma..."), strbye
				if ( gdata(GDATA_FLAG_SUB_IRMA_DAGGER) <= 10 ) {
					gdata(GDATA_FLAG_SUB_IRMA_DAGGER) = 11
				}
				goto *chat_end
			}
		}
		if ( gdata(GDATA_FLAG_SUB_BEYOND_THE_GENERATIONS) == 7 ) {
			chatMore lang("…" + cdatan(CDATAN_NAME, CHARA_PLAYER) + "、あんたには世話になった。この洞窟を出て、真北の山のふもとに廃屋がある。今度はそこで会おう。", "..." + cdatan(CDATAN_NAME, CHARA_PLAYER) + ", I'm in your debt. If you leave this cave and head due north, you'll find a deserted house at the foot of the mountains. Come see us there next time."), strbye
			goto *chat_end
		}
		if ( gdata(GDATA_FLAG_SUB_BEYOND_THE_GENERATIONS) == 5 | gdata(GDATA_FLAG_SUB_BEYOND_THE_GENERATIONS) == 6 ) {
			chatMore lang("どうだった？流石の偏屈ジジイも少しは見直していただろう？", "How did it go? Even the old man had to appreciate those, right?")
			redraw 0
			gosub *screen_draw
			gosub *screen_fade
			gsel 4
			pos 0, 0
			picload exedir + "graphic\\face1" + devfile + ".bmp", 1
			gsel 0
			chatMore lang("なっ…。", "Wh...")
			chatMore lang("ジジイっ…！腹立たしいぜ！もはや我慢ならん！", "That old man...! That's it! I can't take it any more!")
			chatMore lang("…" + cdatan(CDATAN_NAME, CHARA_PLAYER) + "、あんたには世話になった。この洞窟を出て、真北の山のふもとに廃屋がある。今度はそこで会おう。", "..." + cdatan(CDATAN_NAME, CHARA_PLAYER) + ", I'm in your debt. If you leave this cave and head due north, you'll find a deserted house at the foot of the mountains. Come see us there next time."), strbye
			gdata(GDATA_FLAG_SUB_BEYOND_THE_GENERATIONS) = 7
			txt_questupdate
			goto *chat_end
		}
		if ( gdata(GDATA_FLAG_SUB_BEYOND_THE_GENERATIONS) >= 3 & gdata(GDATA_FLAG_SUB_BEYOND_THE_GENERATIONS) < 5 ) {
			chatMore lang("えへへ…。", "Ehehe...")
			chatMore lang("いや、やっぱり外の人たちと話すのは新鮮でいいもんだなって。新しい風がこの集落を変える、なんだかそんなふうに思えてくるのさ。", "My, I think talking to people from outside the village was a good idea after all. I think I can finally feel the winds of change coming to the village now."), strbye
			goto *chat_end
		}
		if ( gdata(GDATA_FLAG_SUB_BEYOND_THE_GENERATIONS) == 2 ) {
			if ( cdata(CDATA_IMPRESSION, tc) >= 150 ) {
				chatList 0, lang("また今度", "Some other time.")
				chatList 1, lang("何をすればいい？", "What do you need?")
				chatList 2, lang("心の友になったつもりはない", "I don't intend to be friends with you.")
				buff = lang("やぁ、心の友よ。ちょっと手伝ってくれないか。", "Ah, my treasured friend. Would you mind helping me with something?")
				gosub *chat_select
				if ( chatval == 2 ) {
					chatMore lang("なっ…。", "Wh...")
					chatMore lang("ま、まぁ。あたしにはイルマがいるからな…。寂しくなんかないぜ。", "W-Well, I still have Irma, so... I won't be lonely..."), strbye
					goto *chat_end
				}
				if ( chatval == 1 ) {
					chatMore lang("いいね…頼りになるじゃないか。", "Wonderful... I'm glad I can count on you.")
					chatMore lang("ちょっと残ってた素材と道具でイルマにサンプルを作ってもらったんだが、イルマの腕はかつての職人たちと比べても遜色ないと思うのさ。あの偏屈ジジイに少しでも職人魂が残っているなら、正攻法で認めさせてやれるかもしれない。ジジイに見せる前に、あんたも冒険者の視点で見て何かアドバイスをしてやってくれ。", "I had Irma make some samples with the few materials and tools she has left. Personally, I don't think her creations are inferior to what we once produced at all. I'm certain that if that old man has even the speck of the heart of a craftsman left, he'll acknowledge that just by seeing one. But before that, I'd like for you to give her your opinion from the viewpoint of an adventurer."), strbye
					gdata(GDATA_FLAG_SUB_BEYOND_THE_GENERATIONS) = 3
					txt_questupdate
				}
				goto *chat_end
			}
		}
		chatList 0, lang("武具職人にならないか", "Why don't you become an arms craftsman?")
		chatList 1, lang("よそ者について", "About the stranger...")
		buff = lang("この集落はドン詰まりさ。今の子供たちが大人になる頃にはもうにっちもさっちもいかなくなってるだろうな。それでも土地への愛着で誰も離れようとしないんだろうけど。", "This village is beyond hope. There'll be no future for anyone here by the time the current children become adults. But even so, everyone is so attached to this piece of land that they refuse to leave.")
		gosub *chat_select
		if ( chatval == 0 ) {
			chatMore lang("…ジジイの差し金かい？言っとくけど、あたしはあいつのことが大嫌いだ。昔からダサいことばかりしやがって…あたしを職人にしたいってのも、結局は名声のためでさ。あいつの喜ぶようなことはしたくないね。", "Did the old man get you to suggest that? Just so you know, I despise him. He's done despicable things for a long time now... The only reason he wishes for me to be a craftsman is for the reputation of the village. I won't do it just to make him happy."), strbye
			goto *chat_end
		}
		if ( chatval == 1 ) {
			chatMore lang("ここの連中はよそ者が住み着くことを嫌っている。イルマが定住を申し出たときは特に酷かったな。「大昔にこの丘を捨てて出て行った民の子孫だから」とか理由をつけて、殺してでも追い出そうとしていたくらいだ。丘長の孫娘であるあたしが空き部屋を貸すと言ったら途端に静かになりやがったけど。今では表向きではいない扱い、裏では陰湿な嫌がらせってとこみたいさ。本当にダサいぜ。", "The people of this village hate outsiders who try to live here. The situation was particularly bad when Irma requested permission to settle. Claiming \"you're just the spawn of those who tossed aside this hill long ago\", they wanted to drive her out or even kill her. Yet they all went quiet when I, the granddaughter of the elder, said that I would lend her my vacant room. Now, although they treat her fine in public, they're always disparaging her behind her back. Despicable.")
			if ( gdata(GDATA_FLAG_SUB_BEYOND_THE_GENERATIONS) == 1 ) {
				chatMore lang("…この丘に伝わる武具作成の技法だって？子供の頃からジジイに嫌というほど聞かされたから、知識としては持っているぜ。だけど、あたしはあんたやイルマに心を許したわけじゃない。伝統技法を教えてもいいような人物か、見極めさせてもらう。", "...The forging techniques handed down in this hill? The old man drilled them into my head since I was a child, so I know them. But I don't trust you or Irma yet. I'll have to know you better before I agree to teach you our ancient forging techniques."), strbye
				gdata(GDATA_FLAG_SUB_BEYOND_THE_GENERATIONS) = 2
				txt_questupdate
			}
			goto *chat_end
		}
		goto *chat_end
	}
	if ( _switch_val == CREATURE_ID_IRMA_THE_INDOMITABLE_SMITH | _switch_sw ) {
		_switch_sw = 0
		if ( gdata(GDATA_FLAG_SUB_BEYOND_THE_GENERATIONS) >= 1001 ) {
			if ( gdata(GDATA_THALIA_LIMIT) < 1500 ) {
				gdata(GDATA_THALIA_LIMIT) = 1500
			}
			if ( gdata(GDATA_THALIA_LIMIT) > 2000 ) {
				gdata(GDATA_THALIA_LIMIT) = 2000
			}
			chatList 0, lang("どうだろう", "That so?")
			chatList 1, lang("合成用アイテムを持ってきた", "I brought items for synthesis.")
			buff = lang("よく夜中に猫やサリムがベッドに潜り込んでくるのじゃ。そんなに寒いのかのう？単にわしが寒さに慣れておるのかもな…ロストイルヴァに来る前はメイルーンに住んでいたからのう。", "Thalia and the cats have been sneaking into my bed at night. Is it really that cold? Maybe I'm just accustomed to it... Before I came to Lost Ylva, I lived in Mayroon.")
			gosub *chat_select
			if ( chatval == 1 ) {
				kiseki = gdata(GDATA_THALIA_LIMIT) + 500
				kiseki2 = gdata(GDATA_THALIA_LIMIT) + 1000
				chatMore lang("おお、練習に付き合ってくれるのか。それで、エンチャントを付与する武具はどれじゃ？エンチャントが強力な武具は、魔術抵抗があって付与できないかもしれん。そうじゃな…サリムの言うエンチャント強度とやらで言うと、今は固定アーティファクトなら" + gdata(GDATA_THALIA_LIMIT) + "パワー、奇跡品なら" + kiseki + "パワー、神器品なら" + kiseki2 + "パワー、辺りが限界じゃ。それとネフィアティア以外を合成する場合は能力獲得の巻き物を一枚使うのう。", "Oh, something to practice on, huh? So, what shall I enchant for you? If it's already powerfully enchanted, I might not be able to do anything with it. Let's see... If you go by Thalia's ratings, the limit is about " + gdata(GDATA_THALIA_LIMIT) + " for static artifacts, " + kiseki + " for miracle-level artifacts, and " + kiseki2 + " for godly-level artifacts. And unless you're going to use a Jewel of Core of Nefia, I'll need a scroll of gain attribute too.")
				invsubroutine = 1
				invctrl = 23, 8
				snd SOUNDLIST_INV
				gosub *com_inventory
				if ( stat == 1 ) {
					p = 0
					if ( ibit(ITEM_BIT_ALIVE, ci) ) {
						p += 10000
					}
					repeat RANGE_INV_ITEM_ENCHANT
						if ( inv(STARTING_INV_ITEM_ENCHANT + cnt * 2 + 1, ci) > 0 ) {
							if ( inv(STARTING_INV_ITEM_ENCHANT + cnt * 2, ci) >= EXT_ENCHANTMENT ) {
								if ( inv(STARTING_INV_ITEM_ENCHANT + cnt * 2, ci) / EXT_ENCHANTMENT == ENCHANT_SUSTAIN ) {
									p += 100
									continue
								}
								if ( inv(STARTING_INV_ITEM_ENCHANT + cnt * 2, ci) / EXT_ENCHANTMENT == ENCHANT_ATTRIBUTE ) {
									p -= inv(STARTING_INV_ITEM_ENCHANT + cnt * 2 + 1, ci) * 6 / 10
								}
								if ( inv(STARTING_INV_ITEM_ENCHANT + cnt * 2, ci) / EXT_ENCHANTMENT == ENCHANT_SKILL ) {
									p -= inv(STARTING_INV_ITEM_ENCHANT + cnt * 2 + 1, ci) / 2
								}
							}
							p += inv(STARTING_INV_ITEM_ENCHANT + cnt * 2 + 1, ci)
						}
					loop
					if ( inv(INV_ITEM_QUALITY, ci) == FIX_QUALITY_MIRACLE ) {
						p -= 500
					}
					if ( inv(INV_ITEM_QUALITY, ci) == FIX_QUALITY_GODLY ) {
						p -= 1000
					}
					if ( p > gdata(GDATA_THALIA_LIMIT) ) {
						snd SOUNDLIST_ATK_ELEC
						chatMore lang("くっ！こいつはちょっと無理じゃ。付与されているエンチャントが強く反発しておる！", "Ku! There's no way it'll work! It's going to repel any enchantment!")
						p = 0
						goto *chat_end
					}
					p = 0
					cibk = ci
				}
				else {
					goto *chat_end
				}
				ii = -1
				repeat RANGE_INV_ITEM_ENCHANT
					if ( ii == (-1) ) {
						if ( inv(STARTING_INV_ITEM_ENCHANT + cnt * 2, ci) == 0 ) {
							ii = cnt
						}
					}
				loop
				if ( ii == (-1) ) {
					chatMore lang("むむむ。", "Mmmm.")
					chatList 0, lang("出直す", "Let's start over.")
					chatList 1, lang("問題ない", "No problem.")
					chatList 2, lang("エンチャントひとつ消去", "Sorry.")
					buff = lang("エンチャントが既に15個埋まっておるな。このまま組み込んでも同系エンチャント以外は乗らないんじゃが、大丈夫かの？", "That item already has 15 enchantments. To add anything new to it, one of them will have to be replaced. Is that okay?")
					gosub *chat_select
					if ( chatval != 2 & chatval != 1 ) {
						goto *chat_end
					}
					if ( chatval == 2 ) {
						if ( inv(STARTING_INV_ITEM_ENCHANT + (RANGE_INV_ITEM_ENCHANT - 1) * 2, cibk) == 37 | inv(STARTING_INV_ITEM_ENCHANT + (RANGE_INV_ITEM_ENCHANT - 1) * 2, cibk) == 45 ) {
							chatMore lang("消去とな？ふむ、このエンチャントだと…ちょっと無理じゃな…すまんのう。", "Removing it then? Mmm, that one... is impossible for now, sorry.")
							goto *chat_end
						}
						chatMore lang("消去とな？ふむ、このエンチャントなら結びつきを削り取ればどうにか…。", "Removing it then? Mmm, I'll see what I can do...")
						snd SOUNDLIST_BUILD1
						await 300
						snd SOUNDLIST_BUILD1
						inv(STARTING_INV_ITEM_ENCHANT + (15 - 1) * 2 + 1, cibk) = 0
						inv(STARTING_INV_ITEM_ENCHANT + (15 - 1) * 2, cibk) = 0
						txt lang(itemname(cibk) + "のエンチャントがひとつ消えた。", "An enchant on the " + itemname(cibk) + " was removed.")
					}
				}
				chatMore lang("それで、どのアイテムの力をアーティファクトに組み込めばよいのじゃ？", "So, which item's power do you want to add to the artifact?")
				invsubroutine = 1
				invctrl = 23, 9
				snd SOUNDLIST_INV
				gosub *com_inventory
				if ( stat == 1 ) {
					if ( inv(INV_ITEM_ID, ci) != ITEM_ID_CORE_OF_NEFIA ) {
						nefiat = 100
						item_find ITEM_ID_SCROLL_GAIN_ATTRIBUTE, 3, 1
						if ( stat == (-1) ) {
							chatMore lang("ふむふむ…って、能力獲得の巻き物を持っておらんではないか。", "Mmm... Wait, do you not have a scroll of gain attribute?")
							nefiat = 0
							goto *chat_end
						}
					}
					if ( inv(INV_ITEM_ID, ci) == ITEM_ID_CORE_OF_NEFIA ) {
						if ( inv(INV_ITEM_PARAM1, ci) == 0 ) {
							encadd cibk, ENCHANT_SKILL * EXT_ENCHANTMENT + SKILL_NORMAL_SHIELD, 500, 0, 1
						}
						if ( inv(INV_ITEM_PARAM1, ci) == 1 ) {
							encadd cibk, ENCHANT_SKILL * EXT_ENCHANTMENT + SKILL_NORMAL_EVASION, 500, 0, 1
						}
						if ( inv(INV_ITEM_PARAM1, ci) == 2 ) {
							encadd cibk, ENCHANT_SKILL * EXT_ENCHANTMENT + SKILL_NORMAL_DUAL_WIELD, 500, 0, 1
						}
						if ( inv(INV_ITEM_PARAM1, ci) == 3 ) {
							encadd cibk, ENCHANT_SKILL * EXT_ENCHANTMENT + SKILL_NORMAL_TWO_HAND, 500, 0, 1
						}
						if ( inv(INV_ITEM_PARAM1, ci) == 4 ) {
							encadd cibk, ENCHANT_SKILL * EXT_ENCHANTMENT + SKILL_NORMAL_TACTICS, 500, 0, 1
						}
						if ( inv(INV_ITEM_PARAM1, ci) == 5 ) {
							encadd cibk, ENCHANT_SKILL * EXT_ENCHANTMENT + SKILL_NORMAL_MARKSMAN, 500, 0, 1
						}
						if ( inv(INV_ITEM_PARAM1, ci) == 6 ) {
							encadd cibk, ENCHANT_SKILL * EXT_ENCHANTMENT + SKILL_NORMAL_HEALING, 500, 0, 1
						}
						if ( inv(INV_ITEM_PARAM1, ci) == 7 ) {
							encadd cibk, ENCHANT_SKILL * EXT_ENCHANTMENT + SKILL_NORMAL_DISARM_TRAP, 500, 0, 1
						}
						if ( inv(INV_ITEM_PARAM1, ci) == 8 ) {
							encadd cibk, ENCHANT_SKILL * EXT_ENCHANTMENT + SKILL_NORMAL_HEAVY_ARMOR, 500, 0, 1
						}
						if ( inv(INV_ITEM_PARAM1, ci) == 9 ) {
							encadd cibk, ENCHANT_SKILL * EXT_ENCHANTMENT + SKILL_NORMAL_MEDIUM_ARMOR, 500, 0, 1
						}
						if ( inv(INV_ITEM_PARAM1, ci) == 10 ) {
							encadd cibk, ENCHANT_SKILL * EXT_ENCHANTMENT + SKILL_NORMAL_LIGHT_ARMOR, 500, 0, 1
						}
						if ( inv(INV_ITEM_PARAM1, ci) == 11 ) {
							encadd cibk, ENCHANT_SKILL * EXT_ENCHANTMENT + SKILL_NORMAL_STEALTH, 500, 0, 1
						}
						if ( inv(INV_ITEM_PARAM1, ci) == 12 ) {
							encadd cibk, ENCHANT_SKILL * EXT_ENCHANTMENT + SKILL_NORMAL_GREATER_EVASION, 500, 0, 1
						}
						if ( inv(INV_ITEM_PARAM1, ci) == 13 ) {
							encadd cibk, ENCHANT_SKILL * EXT_ENCHANTMENT + SKILL_NORMAL_MEDITATION, 500, 0, 1
						}
						if ( inv(INV_ITEM_PARAM1, ci) == 14 ) {
							encadd cibk, ENCHANT_SKILL * EXT_ENCHANTMENT + SKILL_NORMAL_MAGIC_DEVICE, 500, 0, 1
						}
						if ( inv(INV_ITEM_PARAM1, ci) == 15 ) {
							encadd cibk, ENCHANT_SKILL * EXT_ENCHANTMENT + SKILL_NORMAL_CONTROL_MAGIC, 500, 0, 1
						}
						if ( inv(INV_ITEM_PARAM1, ci) == 16 ) {
							encadd cibk, ENCHANT_SKILL * EXT_ENCHANTMENT + SKILL_NORMAL_CASTING, 500, 0, 1
						}
						if ( inv(INV_ITEM_PARAM1, ci) == 17 ) {
							encadd cibk, ENCHANT_SKILL * EXT_ENCHANTMENT + SKILL_NORMAL_WEIGHT_LIFTING, 500, 0, 1
						}
						if ( inv(INV_ITEM_PARAM1, ci) == 18 ) {
							encadd cibk, ENCHANT_SKILL * EXT_ENCHANTMENT + SKILL_NORMAL_CARPENTRY, 500, 0, 1
						}
						if ( inv(INV_ITEM_PARAM1, ci) == 19 ) {
							encadd cibk, ENCHANT_SKILL * EXT_ENCHANTMENT + SKILL_NORMAL_TAILORING, 500, 0, 1
						}
						if ( inv(INV_ITEM_PARAM1, ci) == 20 ) {
							encadd cibk, ENCHANT_SKILL * EXT_ENCHANTMENT + SKILL_NORMAL_JEWELER, 500, 0, 1
						}
						if ( inv(INV_ITEM_PARAM1, ci) == 21 ) {
							encadd cibk, ENCHANT_SKILL * EXT_ENCHANTMENT + SKILL_ACTIVE_PICKPOCKET, 500, 0, 1
						}
						if ( inv(INV_ITEM_PARAM1, ci) == 22 ) {
							encadd cibk, ENCHANT_SKILL * EXT_ENCHANTMENT + SKILL_NORMAL_SWIMMING, 500, 0, 1
						}
						if ( inv(INV_ITEM_PARAM1, ci) == 23 ) {
							encadd cibk, ENCHANT_SKILL * EXT_ENCHANTMENT + SKILL_NORMAL_FISHING, 500, 0, 1
						}
						if ( inv(INV_ITEM_PARAM1, ci) == 24 ) {
							encadd cibk, ENCHANT_SKILL * EXT_ENCHANTMENT + SKILL_NORMAL_ANATOMY, 500, 0, 1
						}
						if ( inv(INV_ITEM_PARAM1, ci) == 25 ) {
							encadd cibk, ENCHANT_SKILL * EXT_ENCHANTMENT + SKILL_NORMAL_LITERACY, 500, 0, 1
						}
						if ( inv(INV_ITEM_PARAM1, ci) == 26 ) {
							encadd cibk, ENCHANT_SKILL * EXT_ENCHANTMENT + SKILL_NORMAL_GENE_ENGINEER, 500, 0, 1
						}
						if ( inv(INV_ITEM_PARAM1, ci) == 27 ) {
							encadd cibk, ENCHANT_SKILL * EXT_ENCHANTMENT + SKILL_NORMAL_MEMORIZATION, 500, 0, 1
						}
						if ( inv(INV_ITEM_PARAM1, ci) == 28 ) {
							encadd cibk, ENCHANT_SKILL * EXT_ENCHANTMENT + SKILL_NORMAL_FAITH, 500, 0, 1
						}
						if ( inv(INV_ITEM_PARAM1, ci) == 29 ) {
							encadd cibk, ENCHANT_SKILL * EXT_ENCHANTMENT + SKILL_NORMAL_NEGOTIATION, 500, 0, 1
						}
						if ( inv(INV_ITEM_PARAM1, ci) == 30 ) {
							encadd cibk, ENCHANT_SKILL * EXT_ENCHANTMENT + SKILL_NORMAL_INVESTING, 500, 0, 1
						}
						if ( inv(INV_ITEM_PARAM1, ci) == 31 ) {
							encadd cibk, ENCHANT_SKILL * EXT_ENCHANTMENT + SKILL_NORMAL_PERFORMER, 500, 0, 1
						}
						if ( inv(INV_ITEM_PARAM1, ci) == 32 ) {
							encadd cibk, ENCHANT_SKILL * EXT_ENCHANTMENT + SKILL_ACTIVE_RIDING, 500, 0, 1
						}
						if ( inv(INV_ITEM_PARAM1, ci) == 33 ) {
							encadd cibk, ENCHANT_ATTRIBUTE * EXT_ENCHANTMENT + SKILL_ATTR_STR, 500, 0, 1
						}
						if ( inv(INV_ITEM_PARAM1, ci) == 34 ) {
							encadd cibk, ENCHANT_ATTRIBUTE * EXT_ENCHANTMENT + SKILL_ATTR_CON, 500, 0, 1
						}
						if ( inv(INV_ITEM_PARAM1, ci) == 35 ) {
							encadd cibk, ENCHANT_ATTRIBUTE * EXT_ENCHANTMENT + SKILL_ATTR_DEX, 500, 0, 1
						}
						if ( inv(INV_ITEM_PARAM1, ci) == 36 ) {
							encadd cibk, ENCHANT_ATTRIBUTE * EXT_ENCHANTMENT + SKILL_ATTR_PER, 500, 0, 1
						}
						if ( inv(INV_ITEM_PARAM1, ci) == 37 ) {
							encadd cibk, ENCHANT_ATTRIBUTE * EXT_ENCHANTMENT + SKILL_ATTR_LER, 500, 0, 1
						}
						if ( inv(INV_ITEM_PARAM1, ci) == 38 ) {
							encadd cibk, ENCHANT_ATTRIBUTE * EXT_ENCHANTMENT + SKILL_ATTR_WIL, 500, 0, 1
						}
						if ( inv(INV_ITEM_PARAM1, ci) == 39 ) {
							encadd cibk, ENCHANT_ATTRIBUTE * EXT_ENCHANTMENT + SKILL_ATTR_MAG, 500, 0, 1
						}
						if ( inv(INV_ITEM_PARAM1, ci) == 40 ) {
							encadd cibk, ENCHANT_ATTRIBUTE * EXT_ENCHANTMENT + SKILL_ATTR_CHA, 500, 0, 1
						}
						if ( inv(INV_ITEM_PARAM1, ci) == 41 ) {
							encadd cibk, ENCHANT_ATTRIBUTE * EXT_ENCHANTMENT + SKILL_ATTR_SPD, 400, 0, 1
						}
						if ( inv(INV_ITEM_PARAM1, ci) == 42 ) {
							encadd cibk, ENCHANT_ATTRIBUTE * EXT_ENCHANTMENT + SKILL_ATTR_LUC, 400, 0, 1
						}
						if ( inv(INV_ITEM_PARAM1, ci) == 43 ) {
							encadd cibk, ENCHANT_RES_PARALYZE, 100, 0, 1
						}
						if ( inv(INV_ITEM_PARAM1, ci) == 44 ) {
							encadd cibk, ENCHANT_RES_CONFUSE, 100, 0, 1
						}
						if ( inv(INV_ITEM_PARAM1, ci) == 45 ) {
							encadd cibk, ENCHANT_RES_FEAR, 100, 0, 1
						}
						if ( inv(INV_ITEM_PARAM1, ci) == 46 ) {
							encadd cibk, ENCHANT_RES_SLEEP, 100, 0, 1
						}
						if ( inv(INV_ITEM_PARAM1, ci) == 47 ) {
							encadd cibk, ENCHANT_RES_POISON, 100, 0, 1
						}
						if ( inv(INV_ITEM_PARAM1, ci) == 48 ) {
							encadd cibk, ENCHANT_RES_BLIND, 100, 0, 1
						}
						if ( inv(INV_ITEM_PARAM1, ci) == 49 ) {
							encadd cibk, ENCHANT_SEE_INVISIBLE, 150, 0, 1, 0, 1
						}
					}
					if ( inv(INV_ITEM_ID, ci) == ITEM_ID_GLIA_CRYSTAL ) {
						encadd cibk, ENCHANT_RESISTANCE * EXT_ENCHANTMENT + SKILL_RES_FIRE, 210, 0, 1
					}
					if ( inv(INV_ITEM_ID, ci) == ITEM_ID_HIBACHI ) {
						encadd cibk, ENCHANT_RESISTANCE * EXT_ENCHANTMENT + SKILL_RES_COLD, 210, 0, 1
					}
					if ( inv(INV_ITEM_ID, ci) == ITEM_ID_ACCUMULATOR ) {
						encadd cibk, ENCHANT_RESISTANCE * EXT_ENCHANTMENT + SKILL_RES_LIGHTNING, 210, 0, 1
					}
					if ( inv(INV_ITEM_ID, ci) == ITEM_ID_LAMP_PLANT ) {
						encadd cibk, ENCHANT_RESISTANCE * EXT_ENCHANTMENT + SKILL_RES_DARKNESS, 210, 0, 1
					}
					if ( inv(INV_ITEM_ID, ci) == ITEM_ID_MIND_DISC ) {
						encadd cibk, ENCHANT_RESISTANCE * EXT_ENCHANTMENT + SKILL_RES_MIND, 210, 0, 1
					}
					if ( inv(INV_ITEM_ID, ci) == ITEM_ID_BLACK_DRIP ) {
						encadd cibk, ENCHANT_RESISTANCE * EXT_ENCHANTMENT + SKILL_RES_POISON, 210, 0, 1
					}
					if ( inv(INV_ITEM_ID, ci) == ITEM_ID_TROLL_CELL ) {
						encadd cibk, ENCHANT_RESISTANCE * EXT_ENCHANTMENT + SKILL_RES_NETHER, 210, 0, 1
					}
					if ( inv(INV_ITEM_ID, ci) == ITEM_ID_MURDER_CD ) {
						encadd cibk, ENCHANT_RESISTANCE * EXT_ENCHANTMENT + SKILL_RES_SOUND, 210, 0, 1
					}
					if ( inv(INV_ITEM_ID, ci) == ITEM_ID_MAGIC_ICE ) {
						encadd cibk, ENCHANT_RESISTANCE * EXT_ENCHANTMENT + SKILL_RES_NERVE, 210, 0, 1
					}
					if ( inv(INV_ITEM_ID, ci) == ITEM_ID_CHAOS_JEWEL ) {
						encadd cibk, ENCHANT_RESISTANCE * EXT_ENCHANTMENT + SKILL_RES_CHAOS, 210, 0, 1
					}
					if ( inv(INV_ITEM_ID, ci) == ITEM_ID_ETHER_MIRROR ) {
						encadd cibk, ENCHANT_RESISTANCE * EXT_ENCHANTMENT + SKILL_RES_MAGIC, 160, 0, 1
					}
					if ( inv(INV_ITEM_ID, ci) == ITEM_ID_IKAROS_WING ) {
						encadd cibk, ENCHANT_FLOAT, 100, 0, 1
					}
					if ( inv(INV_ITEM_ID, ci) == ITEM_ID_TEAR_OF_GOD ) {
						if ( inv(INV_ITEM_PARAM1, ci) == 1 ) {
							encadd cibk, ENCHANT_ELEMENTAL_DMG * EXT_ENCHANTMENT + SKILL_RES_FIRE, 400, 0, 1, 0, 1
						}
						if ( inv(INV_ITEM_PARAM1, ci) == 2 ) {
							encadd cibk, ENCHANT_ELEMENTAL_DMG * EXT_ENCHANTMENT + SKILL_RES_COLD, 400, 0, 1, 0, 1
						}
						if ( inv(INV_ITEM_PARAM1, ci) == 3 ) {
							encadd cibk, ENCHANT_ELEMENTAL_DMG * EXT_ENCHANTMENT + SKILL_RES_LIGHTNING, 400, 0, 1, 0, 1
						}
						if ( inv(INV_ITEM_PARAM1, ci) == 4 ) {
							encadd cibk, ENCHANT_ELEMENTAL_DMG * EXT_ENCHANTMENT + SKILL_RES_POISON, 400, 0, 1, 0, 1
						}
						if ( inv(INV_ITEM_PARAM1, ci) == 5 ) {
							encadd cibk, ENCHANT_ELEMENTAL_DMG * EXT_ENCHANTMENT + SKILL_RES_CHAOS, 400, 0, 1, 0, 1
						}
						if ( inv(INV_ITEM_PARAM1, ci) == 6 ) {
							encadd cibk, ENCHANT_ELEMENTAL_DMG * EXT_ENCHANTMENT + SKILL_RES_SOUND, 400, 0, 1, 0, 1
						}
						if ( inv(INV_ITEM_PARAM1, ci) == 7 ) {
							encadd cibk, ENCHANT_ELEMENTAL_DMG * EXT_ENCHANTMENT + SKILL_RES_DARKNESS, 400, 0, 1, 0, 1
						}
						if ( inv(INV_ITEM_PARAM1, ci) == 8 ) {
							encadd cibk, ENCHANT_PROC * EXT_ENCHANTMENT + ENCHANT_PROC_GRAVITY_SPHERE, 150, 0, 1, 0, 1
						}
						if ( inv(INV_ITEM_PARAM1, ci) == 9 ) {
							encadd cibk, ENCHANT_ELEMENTAL_DMG * EXT_ENCHANTMENT + SKILL_RES_MAGIC, 300, 0, 1, 0, 1
						}
						if ( inv(INV_ITEM_PARAM1, ci) == 10 ) {
							encadd cibk, ENCHANT_PIERCING_CHANCE, 200, 0, 1, 0, 1
						}
						if ( inv(INV_ITEM_PARAM1, ci) == 11 ) {
							encadd cibk, ENCHANT_REMOTE_BLOW, 250, 0, 1, 0, 1
						}
						if ( inv(INV_ITEM_PARAM1, ci) == 16 ) {
							encadd cibk, ENCHANT_ENHANCE_SPELL, 200, 0, 1, 0, 1
						}
						if ( inv(INV_ITEM_PARAM1, ci) == 17 ) {
							encadd cibk, ENCHANT_PROC * EXT_ENCHANTMENT + ENCHANT_PROC_ELEMENT_SCAR, 200, 0, 1, 0, 1
						}
						if ( inv(INV_ITEM_PARAM1, ci) == 18 ) {
							encadd cibk, ENCHANT_PROC * EXT_ENCHANTMENT + ENCHANT_PROC_DARKNESS_BOLT, 200, 0, 1, 0, 1
						}
						if ( inv(INV_ITEM_PARAM1, ci) == 19 ) {
							encadd cibk, ENCHANT_FIRE_AND_COLD, 150, 0, 1, 0, 1
						}
						if ( inv(INV_ITEM_PARAM1, ci) == 20 ) {
							encadd cibk, ENCHANT_PROC * EXT_ENCHANTMENT + ENCHANT_PROC_GRENADE, 51, 0, 1, 0, 1
						}
						if ( inv(INV_ITEM_PARAM1, ci) == 21 ) {
							encadd cibk, ENCHANT_ELEMENTAL_DMG * EXT_ENCHANTMENT + SKILL_RES_NERVE, 400, 0, 1, 0, 1
						}
						if ( inv(INV_ITEM_PARAM1, ci) == 22 ) {
							encadd cibk, ENCHANT_ELEMENTAL_DMG * EXT_ENCHANTMENT + SKILL_RES_MIND, 400, 0, 1, 0, 1
						}
						if ( inv(INV_ITEM_PARAM1, ci) == 23 ) {
							encadd cibk, ENCHANT_MIND_AND_SOUND, 150, 0, 1, 0, 1
						}
					}
					inv(INV_ITEM_NUM, ci)--
					snd SOUNDLIST_BUILD1
					await 300
					snd SOUNDLIST_BUILD1
					await 300
					snd SOUNDLIST_BUILD1
					await 300
					snd SOUNDLIST_DING2
					chatMore lang("…エンチャント融合完了！いい練習になったのう。", "...The artifact fusion is complete! That was a pretty good workout.")
					if ( nefiat == 100 ) {
						item_find ITEM_ID_SCROLL_GAIN_ATTRIBUTE, 3, 1
						if ( stat != (-1) ) {
							ci = stat
							if ( inv(INV_ITEM_NUM, ci) >= 1 ) {
								inv(INV_ITEM_NUM, ci)--
							}
						}
						nefiat = 0
					}
					if ( gdata(GDATA_THALIA_LIMIT) < 2000 ) {
						gdata(GDATA_THALIA_LIMIT) += 50
					}
				}
				else {
					goto *chat_end
				}
			}
			goto *chat_end
		}
		if ( gdata(GDATA_FLAG_SUB_BEYOND_THE_GENERATIONS) == 9 ) {
			chatMore lang("ご先祖様ゆかりの地で堂々と制作できればよかったんじゃが、こうなってしまっては仕方あるまい。静かなところでゆっくり作業するのも悪くないからのう。", "While I would be happy to produce great works in the home of my ancestors, with things how they are now, that will never happen. But taking things slowly in a peaceful place like this isn't bad either.")
			chatMore lang("サリムから教わった伝統技法は、理論はわかるんじゃが実践が難しくてなぁ。丘の内と外に分離した技術で元は一つだったとは言え、独自進化を遂げてきたからのう。幾百もの世を越えて、再び一つの形に練り上げるにはもう少し時間が必要じゃな。", "Thalia has taught me the ancient techniques, so what I need to do now is to fully grasp the theory through large amounts of practice. While our own techniques were based on the technique of the hill, they've evolved on their own since then. As techniques that span across hundreds of generations, it'll take some time to forge them back into a single form.")
			chatMore lang("よかったら、時々遊びに来とくれ。合成の練習台にしていいようなアイテムを持ってきてくれると助かるのう。", "Feel free to drop in and visit whenever you'd like. And make sure to save any items you find that are suitable for synthesis for me."), strbye
			if ( gdata(GDATA_FLAG_SUB_BEYOND_THE_GENERATIONS) == 9 ) {
				gdata(GDATA_FLAG_SUB_BEYOND_THE_GENERATIONS) = 1001
				txt_questcompleted
				txt_questupdate
			}
			goto *chat_end
		}
		if ( gdata(GDATA_FLAG_SUB_BEYOND_THE_GENERATIONS) == 5 | gdata(GDATA_FLAG_SUB_BEYOND_THE_GENERATIONS) == 6 | gdata(GDATA_FLAG_SUB_BEYOND_THE_GENERATIONS) == 7 ) {
			chatList 0, lang("訊かない方がいい", "You don't want to know.")
			chatList 1, lang("ボロクソだった", "You were trashed.")
			chatList 2, lang("なぜ名前を入れた？", "Why did you sign it?")
			buff = lang("結果はどうじゃった？", "How did it go?")
			gosub *chat_select
			if ( chatval == 2 ) {
				chatMore lang("入れておかんと仮に良い評価を貰っても自作と証明できんと思ってのう。どうもよく思われていないようじゃからな…入れてなければ入れてないで難癖をつけられる可能性もあるかな、と。", "Without signing it I wouldn't have been able to prove that I made it, even had the evaluation gone well. I get the impression that it didn't, though... There was no way I could win, regardless of if I signed it or didn't sign it.")
			}
			else {
				chatMore lang("…なるほど。", "I see...")
			}
			goto *chat_end
		}
		if ( gdata(GDATA_FLAG_SUB_BEYOND_THE_GENERATIONS) == 3 | gdata(GDATA_FLAG_SUB_BEYOND_THE_GENERATIONS) == 4 ) {
			if ( gdata(GDATA_FLAG_SUB_BEYOND_THE_GENERATIONS) == 4 ) {
				chatList 0, lang("楽しみだ", "I can't wait.")
				chatList 1, lang("持っていく短剣を変える", "I want to change daggers.")
				buff = lang("さて、どうなるかの。もし評判が良かったら同じ形状のアーティファクトを作ろうかのう。", "I wonder what'll happen now. If the evaluation is good, maybe I'll try to make some more of those daggers.")
				gosub *chat_select
				if ( chatval != 1 ) {
					goto *chat_end
				}
			}
			if ( gdata(GDATA_FLAG_SUB_BEYOND_THE_GENERATIONS) == 3 ) {
				chatMore lang("おお、見とくれ" + cdatan(CDATAN_NAME, CHARA_PLAYER) + "殿！サリムの提案で、趣向の違う短剣を三本作ってみたんじゃ。", "Ah, " + cdatan(CDATAN_NAME, CHARA_PLAYER) + "! Take a look at this! At Thalia's suggestion, I made three different daggers.")
			}
			chatList 0, lang("実用性重視の短剣", "The one for practical use.")
			chatList 1, lang("美しい装飾の短剣", "The decorative one.")
			chatList 2, lang("斬新な形状の短剣", "The oddly shaped one.")
			chatList 3, lang("三本とも見せればいい", "Show all three.")
			chatList 4, lang("エンチャントによる", "Depends on the enchantments.")
			buff = lang("どれが一番受けがよさそうかの？まぁ、何を重視するのかは好みの問題とも思うのじゃが。", "I guess it'll mostly depend on your tastes, but which dagger do you think is the best?")
			gosub *chat_select
			if ( chatval == 0 ) {
				chatMore lang("うむ。やはり実際の使い心地は重要じゃろう。こいつは可変グリップが手に馴染み、刀身強度も抜群の一品じゃ。武骨なデザインじゃが、考えるのに一番悩んだかもしれん。", "Mmm, practical usability is certainly important. The grip on this one is comfortable, and the blade itself is outstanding. I do worry a bit about its design though.")
				gdata(GDATA_FLAG_SUB_IRMA_DAGGER) = 1
			}
			if ( chatval == 1 ) {
				chatMore lang("いやぁ。この小さな短剣にここまで細かい装飾を施すのには骨が折れたわい。精密さも腕前の指標じゃからな、集中して頑張ったんじゃよ。", "Ah. It was difficult to add the fine decorations on that dagger. The precision required is a good measure of skill, as it takes a great deal of concentration.")
				gdata(GDATA_FLAG_SUB_IRMA_DAGGER) = 2
			}
			if ( chatval == 2 ) {
				chatMore lang("ふふ。奇抜に見えるかもしれんが、これはこれで理に適った形状での。この独自構造によって、軽く押し当てるだけでも通常とは比べ物にならん切れ味が出るのじゃ。", "Fufu. I know it may seem odd at first, but there's a good reason why it's shaped like that. That shape gives it a cutting edge incomparable to normal daggers, even when only using a light press.")
				gdata(GDATA_FLAG_SUB_IRMA_DAGGER) = 3
			}
			if ( chatval == 3 ) {
				chatMore lang("なるほど…確かに、作風の幅を見せておくのもよいかもしれん。何かに特化したものは好みが分かれるからのう。", "I see. That would certainly show the breadth of my abilities. It's also difficult to pick out a single one, as we don't know what his tastes are.")
				gdata(GDATA_FLAG_SUB_IRMA_DAGGER) = 4
			}
			if ( chatval == 4 ) {
				chatMore lang("いや、あの…。造形の話であって、そういう趣旨ではないんじゃが…。", "No, umm... I was just talking about the shape and model...")
				goto *chat_end
			}
			if ( gdata(GDATA_FLAG_SUB_BEYOND_THE_GENERATIONS) == 3 ) {
				if ( gdata(GDATA_FLAG_SUB_IRMA_DAGGER) != 0 ) {
					chatMore lang("ふむ…。", "Hmmm...")
					chatMore lang("すまぬ。その短剣、" + cdatan(CDATAN_NAME, CHARA_PLAYER) + "殿が丘長さんに見せてやってくれんかのう。わしが行っても怒鳴られて門前払いされる気しかしないのじゃ…。", "Sorry, " + cdatan(CDATAN_NAME, CHARA_PLAYER) + ". I don't think I can take this to this elder myself. I feel like he'd just yell at me and slam the door in my face.")
					txt lang("イルマが作った短剣を預かった。", "Received the dagger(s) from Irma")
					gdata(GDATA_FLAG_SUB_BEYOND_THE_GENERATIONS) = 4
				}
			}
			goto *chat_end
		}
		chatMore lang("うむむ、参ったのう…。光に包まれてこの大陸に辿りついて…そして彷徨った先で、ご先祖様たちの故郷を見つけた。その時はまさに天の導きだと感激したのじゃが…。", "Mmm, this is quite frustrating... I was suddenly wrapped in a strange light and inexplicably appeared on this continent... While wandering about, I found the home of my ancestors. At first I was elated. I felt that this was guidance from the heavens. But...")
		chatMore lang("どうも歓迎されてないようじゃな、とほほ…。出かけている間に仕事道具を壊されたり材料を隠されたり、散々じゃ。誰がやったのか問い正しても管理が悪いとなじられる始末での…。", "They're not very welcoming to me *sob*... Any time I leave this home, terrible things happen. When I return, my tools are broken, or my materials are hidden. Whenever I try to find out who is responsible, I'm harshly rebuked by the elder...")
		chatMore lang("しかし！ここであきらめるわけにはいかん！この始まりの丘に伝わる技法を習得し、わしの技法と統合して最高の武具を作り出すのが夢なのじゃ！とは言っても丘長さんは何も教えてくれぬし、他の民は技法を知らぬようじゃし…八方ふさがりじゃ。もし" + cdatan(CDATAN_NAME, CHARA_PLAYER) + "殿が耳寄りな情報を知ったら教えてくれい…。", "But I won't give up yet! It's my dream to learn the ancient forging techniques of my ancestors, and then combine it with my own to create the ultimate arms and armor! But for now, the elder will teach me nothing... All avenues are barred to me. Should you hear any good news, " + cdatan(CDATAN_NAME, CHARA_PLAYER) + ", please let me know..."), strbye
		if ( gdata(GDATA_FLAG_SUB_BEYOND_THE_GENERATIONS) == 0 ) {
			gdata(GDATA_FLAG_SUB_BEYOND_THE_GENERATIONS) = 1
			txt_questupdate
		}
		goto *chat_end
	}
	if ( _switch_val == CREATURE_ID_MARKA_THE_SILVER_BEAR | _switch_sw ) {
		_switch_sw = 0
		if ( gdata(GDATA_FLAG_MAIN) >= 510 ) {
			if ( gdata(GDATA_AREA) == AREA_CHAOS_CRADLE ) {
				chatMore lang("ちょっと体が大きくて力が強くて毛深いくらいで熊呼ばわりってみんな酷すぎるよ。傷つくんだよね…。", "Just because I'm a bit big, pretty strong, and have thick hair, everyone calls me a bear. It hurts, you know..."), strbye
				goto *chat_end
			}
		}
		if ( gdata(GDATA_FLAG_MAIN) == 505 ) {
			if ( gdata(GDATA_AREA) == AREA_CHAOS_CRADLE ) {
				chatMore lang("このネフィアの一番下層に混沌の神的なものが眠っていて、それが異変の原因になっている！", "The God of Chaos on the lowest level of this ruin must be the cause of the incidents!")
				chatMore lang("って私の冒険者としての勘が言うからここに来ているんだけど。他にも複数の冒険者が下層に向かっているみたい。うーん。みんな勘がいいんだなぁ。", "My intuition as an adventurer brought me here. It look like several others are trying to reach the lowest level too... Yep. Everyone must be able to feel it."), strbye
				gdata(GDATA_FLAG_MAIN) = 510
				goto *chat_end
			}
		}
		if ( gdata(GDATA_FLAG_SUB_REGULUS_MAYROON) >= 1000 ) {
			if ( gdata(GDATA_LEVEL) == 1 ) {
				chatMore lang("この街も年中雪が降ってるけど、メイルーンに比べれば全然暖かいほうだよ。このくらいなら裸で走りまわっても平気だね。", "Woah!")
				goto *chat_end
			}
		}
		if ( gdata(GDATA_FLAG_SUB_REGULUS_MAYROON) == 100 ) {
			if ( gdata(GDATA_LEVEL) == 1 ) {
				chatMore lang("協力ありがとう、助かったよ。後の掃除は私一人で出来る…というかやらせてよ。私を熊呼ばわりしてからかっていた連中に活躍を見せつけておかなきゃいけない。…なんてね。", "Thanks for your help. I couldn't have done defeated that demon without you. I can handle the rest of the by myself... Or perhaps I should say, let me handle it. I need to show all those people who called me \"bear\" and made fun of me what I'm made of... Just kidding.")
				chatMore lang("これだけの大仕事、国が報酬とか出してくれてもいいと思うんだけどなぁ。まぁいいや、勝手にやったことだし。", "After this achievement, they must just give us some big rewards. Well, I would've done it anyways.")
				goto *chat_end
			}
		}
		if ( gdata(GDATA_FLAG_SUB_REGULUS_MAYROON) == 4 ) {
			if ( gdata(GDATA_LEVEL) == 100 ) {
				chatMore lang("あんまり知られてないけど、実はここって観光名所みたいな扱いで、実際に城として使われてはいないんだよね。それを知って驚く観光客がとても多いんだけど、あれはなんなの？メイルーンの人間は氷の建物やカマクラで生活しているとでも思っているの？", "You might not be aware, but this place is more of a tourist area than an actual castle. Still, most tourists are surprised when they hear that. Isn't that funny? What, do people really think people in Mayroon live in snow huts and buildings made of ice?")
				chatMore lang("まぁ…私もメイルーンから出てみるまで、各国に勝手なイメージを抱いていたから偉そうなことは言えないんだけど。", "Well... I really shouldn't say something like that. I had warped views about other countries until I left Mayroon too.")
				gdata(GDATA_FLAG_SUB_REGULUS_MAYROON) = 5
				goto *chat_end
			}
		}
		if ( gdata(GDATA_FLAG_SUB_REGULUS_MAYROON) == 3 ) {
			if ( gdata(GDATA_LEVEL) == 100 ) {
				chatMore lang("やれやれ、吹雪の中をものすごい速さで駆け回るから振り落とされるかと思ったよ。…なんかガタガタ震えてるけど大丈夫かい？", "Whew. I thought we were going to get thrown off traveling at that speed in a snow storm... You okay? You're trembling.")
				chatMore lang("それはともかく、ここがメイルーンの氷の城さ。前回で、街々は解放してきたんだけど城は守りが固くて突破できなかったんだ。今回狙うのは最奥に陣取ってる悪魔の首。あいつさえ仕留めれば、残りの雑魚は私一人でも片づけられる。", "Anyways, this is the Ice Castle of Mayroon. I managed to make it through the town last time, but the castle's defenses were too strong. We need to take care of the demon that's in the castle. If we can take him down, I can handle the rest of the small-fry alone.")
				chatMore lang("…それにしても酷い有様だ、前来た時よりもボロボロになってるよ。床にも屋根にも大穴が開いている、奥まで辿り着けるか…？", "...Still, this place is in even worse condition than when I was here last time. Will we even be able to make it inside with how much damage has been done...?")
				gdata(GDATA_FLAG_SUB_REGULUS_MAYROON) = 4
				goto *chat_end
			}
		}
		if ( gdata(GDATA_FLAG_SUB_REGULUS_MAYROON) > 0 ) {
			if ( gdata(GDATA_FLAG_SUB_REGULUS_MAYROON) < 100 ) {
				if ( gdata(GDATA_LEVEL) == 1 ) {
					if ( gdata(GDATA_FLAG_SUB_REGULUS_MAYROON) == 2 ) {
						chatMore lang("あれ？君どこかで会ったっけ？まぁいいや。君、強そうだね。ちょっと一緒に来てほしいんだ。", "Huh? Have I met you before? Well, whatever. You look strong to me. I want you to join me.")
					}
					if ( gdata(GDATA_FLAG_SUB_REGULUS_MAYROON) == 2 ) {
						chatMore lang("化け物を倒そうと慌てて故郷に戻ったんだけど、予想以上に敵が多くてあと一歩のところで撤退せざるをえなくてさ。ホント参っちゃうよ、わざわざ徒歩で雪原と氷河渡ったのに。", "I returned to my hometown to defeat the monsters that attacked, but there were more enemies than I had anticipated. I had no choice but to withdraw. Walking across snow fields and glaciers is really annoying, you know.")
					}
					if ( gdata(GDATA_FLAG_SUB_REGULUS_MAYROON) == 2 ) {
						chatMore lang("大丈夫、大丈夫。誰が用意したのか知らないけどさっき犬ぞりが置いてあるの見つけたから、それを使わせてもらおう。歩いていく必要はないよ。めちゃくちゃでかい犬だからクレバスにも落ちないんじゃないかな。", "Don't worry though, it'll be fine. I don't know who prepared it, but I found a dogsled a little while ago. Let's use that. No need to walk! And since the dogs looked like they've been trained, we shouldn't have to worry about falling into a crevasse either.")
					}
					chatList 0, lang("その場を離れる", "(Walk away)")
					chatList 1, lang("わかった", "Alright.")
					chatList 2, lang("行きたくない", "I don't want to.")
					buff = lang("いつまでも準備に時間かけてるわけにはいかない。さぁ、出発しようか。", "We can't stay and prepare forever. Ready to go?")
					gosub *chat_select
					if ( gdata(GDATA_FLAG_SUB_REGULUS_MAYROON) < 3 ) {
						gdata(GDATA_FLAG_SUB_REGULUS_MAYROON) = 3
					}
					if ( chatval == 1 | chatval == 2 ) {
						chatMore lang("なにボサっとしてるのさ。ほら、行くよ。", "What are you mumbling about? Come on, let's go.")
						if ( gdata(GDATA_FLAG_DUEL_TARGET) > 0 ) {
							snd SOUNDLIST_FAIL1
							txt_duel2
							goto *chat_end
						}
						mapidou = 100
						gdata(GDATA_TELEPORT_AREA) = AREA_NOYEL
						gdata(GDATA_TELEPORT_LEVEL) = 100
						levelexitby = 2
						gdata(GDATA_LEVEL_START_ON) = 7
						mapstartx = 20
						mapstarty = 55
						dbg_skipevent = 1
						gdata(GDATA_HOUR) += 2
						gosub *advance_hour
						dbg_skipevent = 0
						chatteleport = 1
						goto *chat_end
					}
					else {
						chatMore lang("ちょっと！私の話を聞いてくれよ！", "Hey! Come on, listen to me!")
						goto *chat_end
					}
					goto *chat_end
				}
			}
		}
		if ( gdata(GDATA_FLAG_MAIN) <= 378 ) {
			if ( gdata(GDATA_FLAG_SUB_REGULUS_MAYROON) == 0 ) {
				chatMore lang("うわっ！？", "Uwaah?!")
				chatList 0, lang("大丈夫", "I'm fine.")
				chatList 1, lang("骨が折れた", "It's broken.")
				chatList 2, lang("あなたが銀熊か", "Are you the Silver Bear?")
				buff = lang("わ、悪いね。怪我はないかい？", "S-Sorry about that. You're not hurt, are you?")
				gosub *chat_select
				chatMore lang("そんなことより大変なんだよ！下の階で変な三人組を見かけてさ。不審に思って物陰から様子を窺っていたんだ。すると三人組の一人が突然…何て言ったらいいのかな、空間を捻じ曲げて別の空間と繋いだというか…とにかく見間違えるはずがない、繋げた先、あれは確かに私の故郷の風景だった。", "Ah, but more importantly! I saw some weird trio on the lower level. They looked suspicious, so I spied on them from the shadows.. Then one of them suddenly... I'm not sure how to say it, but it's like they distorted space to connect it to another place... Well anyways it was something like that I'm sure of it. Anyways, what I'm definitely sure of is that the space they connected to was my hometown.")
				chatList 0, lang("恐ろしいこととは？", "Can you be more specific?")
				chatList 1, lang("どうでもいい", "It doesn't matter.")
				chatList 2, lang("それは知っている", "I already know.")
				buff = lang("そしてあいつらは巨大な化け物を私の故郷に送り込むと、恐ろしいことを話しながら下へと降りて行ったんだ…。", "They sent an enormous monster through the distortion into my hometown, and then started talking about other terrible things as they headed further down...")
				gosub *chat_select
				chatList 0, lang("あなたを探していた", "I was looking for you.")
				chatList 1, lang("話を聞いてほしい", "Listen to me.")
				chatList 2, lang("メルガストのことを教える", "Let me tell you about the Melugast.")
				buff = lang("じゃあ私は故郷が心配だからもう行くよ。なんとしてでも地上に降りてやるつもりさ！", "I'm worried about my home, so I'm going to head back. I'm going to find some way back to the surface, no matter what it takes!")
				gosub *chat_select
				snd SOUNDLIST_EXITMAP1
				txt lang("あなたの話を聞かず、冒険者は階段を駆けあがっていった…。", "The adventurer ran up the stairs without listening to anything you had to say...")
				txt_questupdate
				goto *chat_end
			}
		}
		goto *chat_end
	}
	if ( _switch_val == CREATURE_ID_ROVID | _switch_sw ) {
		_switch_sw = 0
		if ( gdata(GDATA_FLAG_MAIN) < 15000 ) {
			kaiwa = rnd(10)
			if ( kaiwa == 0 ) {
				chatMore lang("ここは神々が永遠の盟約を結んだ場所でもあります。あの時の緊張しているジュア様も素敵でした…。はぁ…ジュア様…。", "I declare, these rays are just too strong and the sand just sticks everywhere and how awful is this dreadful place. I care not if this is an antenna but having sworn loyalty to Miss Lulwy I have been given governance of this desert tower. That cruel part of her is just quite wonderful as well..."), strbye
			}
			if ( kaiwa >= 5 ) {
				chatMore lang("混沌の本格的な侵攻が始まったというので、やむなく神殿を開放し神力の一部で地上と繋げましたが…まさか人が集まるのをいいことにこの神聖な場所で商売を始める者が出てくるとは。", "Miss Lulwy does come here on vacation. Tea as she feels in the mood, frolicking together on the beach and punishing the prisoners. The best part are those hurricanes. Inside this tower small hurricanes swirl around and jumble up everything. That wind slapping around here and there... Oh my, I really can't compete with her. Just makes me tremble..."), strbye
			}
			if ( kaiwa < 5 ) {
				if ( kaiwa != 0 ) {
					chatMore lang("本当はジュア様に付き従いたいのですが…神殿の守護をそのジュア様に任されたので、投げ出すわけにもいかないのです。", "Miss Lulwy does come here on vacation. Tea as she feels in the mood, frolicking together on the beach and punishing the prisoners. The best part are those hurricanes. Inside this tower small hurricanes swirl around and jumble up everything. That wind slapping around here and there... Oh my, I really can't compete with her. Just makes me tremble..."), strbye
				}
			}
			goto *chat_end
		}
		goto *chat_end
	}
	if ( _switch_val == CREATURE_ID_GARZIEM | _switch_sw ) {
		_switch_sw = 0
		chatList 0, lang("内容を知りたい", "I was looking for you.")
		chatList 1, lang("興味がない", "Good luck.")
		buff = lang("よくぞ来てくれた。貴君をわが艦に迎え入れたのは、協力を要請したいことがあるためだ。もちろん報酬は用意しているが、どうかね？", "How wonderful, you came. Now that you've settled in on my warship, I need your assistance with something. Of course there's a reward in it for you. How about it?")
		gosub *chat_select
		if ( chatval == 0 ) {
			chatMore lang("地殻変動によって第三艦橋周辺と氷雪地帯地下が繋がり、そこから敵性体が侵攻してきている。もちろん迎撃システムも稼働しているのだがどうも限界が近くてね。", "Sorry, this is untranslated sentence.")
			chatMore lang("そこで貴君には隔壁が完成するまでの間、侵攻を食いとめてほしいのだ。その気になったらまた話しかけてくれたまえ。", "I want you to hold them off from there until the barrier is completed. If there's anything you're still unsure of, say so now.")
			chatMore lang("…", "...")
			chatMore lang("ピーガガガ！", "Piigaaahhh!")
			chatMore lang("お探しのサブクエストはお使いのバージョンでは実装されていません。", "The subquest you searched for can't be implemented in this version.")
		}
		goto *chat_end
	}
	if ( _switch_val == CREATURE_ID_KARAVIKA | _switch_sw ) {
		_switch_sw = 0
		if ( gdata(GDATA_FLAG_SUB_KARAVIKA_OF_SONG_AND_DANCE) == 0 ) {
			gdata(GDATA_FLAG_SUB_KARAVIKA_OF_SONG_AND_DANCE) = 2
		}
		if ( gdata(GDATA_FLAG_SUB_KARAVIKA_OF_SONG_AND_DANCE) \ 3 == 0 ) {
			chatMore lang("限定コンサートは大成功ー♪キミが守ってくれたおかげだねっ！これはお礼！", "This limited-time concert was a huge success.♪ That was thanks to your protection! Here, this is for you!")
			txt_questcompleted
			txtmore
			txt_questitem
			if ( gdata(GDATA_FLAG_SUB_KARAVIKA_OF_SONG_AND_DANCE) == 3 ) {
				flt
				itemcreate -1, ITEM_ID_MELODYUS, cdata(CDATA_X, CHARA_PLAYER), cdata(CDATA_Y, CHARA_PLAYER), 0
			}
			else {
				if ( gdata(GDATA_MIN) >= 0 & gdata(GDATA_MIN) < 15 ) {
					flt
					itemcreate -1, ITEM_ID_TEAR_OF_GOD, cdata(CDATA_X, CHARA_PLAYER), cdata(CDATA_Y, CHARA_PLAYER), 0
					inv(INV_ITEM_PARAM1, ci) = 20
					encadd ci, ENCHANT_PROC * EXT_ENCHANTMENT + ENCHANT_PROC_GRENADE, 51, 0, 1, 0, 1
				}
				if ( gdata(GDATA_MIN) >= 15 & gdata(GDATA_MIN) < 30 ) {
					flt
					itemcreate -1, ITEM_ID_TEAR_OF_GOD, cdata(CDATA_X, CHARA_PLAYER), cdata(CDATA_Y, CHARA_PLAYER), 0
					inv(INV_ITEM_PARAM1, ci) = 21
					encadd ci, ENCHANT_ELEMENTAL_DMG * EXT_ENCHANTMENT + SKILL_RES_NERVE, 400, 0, 1, 0, 1
				}
				if ( gdata(GDATA_MIN) >= 30 & gdata(GDATA_MIN) < 45 ) {
					flt
					itemcreate -1, ITEM_ID_TEAR_OF_GOD, cdata(CDATA_X, CHARA_PLAYER), cdata(CDATA_Y, CHARA_PLAYER), 0
					inv(INV_ITEM_PARAM1, ci) = 22
					encadd ci, ENCHANT_ELEMENTAL_DMG * EXT_ENCHANTMENT + SKILL_RES_MIND, 400, 0, 1, 0, 1
				}
				if ( gdata(GDATA_MIN) >= 45 & gdata(GDATA_MIN) < 60 ) {
					flt
					itemcreate -1, ITEM_ID_TEAR_OF_GOD, cdata(CDATA_X, CHARA_PLAYER), cdata(CDATA_Y, CHARA_PLAYER), 0
					inv(INV_ITEM_PARAM1, ci) = 23
					encadd ci, ENCHANT_MIND_AND_SOUND, 150, 0, 1, 0, 1
				}
			}
			if ( gdata(GDATA_FLAG_SUB_KARAVIKA_OF_SONG_AND_DANCE) >= 30 ) {
				gdata(GDATA_FLAG_SUB_KARAVIKA_OF_SONG_AND_DANCE) = 3
			}
			gdata(GDATA_FLAG_SUB_KARAVIKA_OF_SONG_AND_DANCE)++
			snd SOUNDLIST_COMPLETE1
			txt_questupdate
			goto *chat_end
		}
		if ( gdata(GDATA_FLAG_SUB_KARAVIKA_OF_SONG_AND_DANCE) \ 3 == 2 ) {
			if ( gdata(GDATA_DAY) == 30 ) {
				if ( gdata(GDATA_LEVEL) == 1 ) {
					chatList 0, lang("断る", "No.")
					chatList 1, lang("引き受ける", "OK.")
					if ( gdata(GDATA_FLAG_SUB_KARAVIKA_OF_SONG_AND_DANCE) == 2 ) {
						buff = lang("あっ、キミキミ！月末の限定コンサートなんだけど、会場内の警備に回す人員がいなくてさ。報酬は出すから引き受けてくれないかなー？ホント緊急なの！", "Hey, you there you! Even though this is a limited-time concern at the end of the month, we don't have enough security staff around here. Would you do that for some remuneration? It's really urgent!")
					}
					if ( gdata(GDATA_FLAG_SUB_KARAVIKA_OF_SONG_AND_DANCE) != 2 ) {
						buff = lang("あっ、いいところに！またキミに会場警備をお願いしたいんだけど、いいかな？", "Oh, that turned out nice! I'd like to have you do security here again, would that be fine?")
					}
					gosub *chat_select
					if ( chatval == 1 ) {
						if ( gdata(GDATA_FLAG_DUEL_TARGET) > 0 ) {
							snd SOUNDLIST_FAIL1
							txt_duel2
							goto *chat_end
						}
						chatMore lang("やった！そうと決まれば急いで会場に向かうよ！", "Hooray! Since that is decided, let's go to the hall!")
						chatMore lang("着いたらすぐに始めるから！私の演奏が中断されたりお客さんが死んだりしたら失敗だよ。外の警備を突破して会場にストーカーが押し入ってくると思うから、コンサートを守り抜いてね。", "I'll be starting as soon as I arrive! If my performance is interrupted or a customer dies, that would be a huge problem! I think the stalker will break through the outside guards, please defend this concert.")
						txt_questupdate
						mdata(MDATA_DOWNSTAIRS_POS) = cdata(CDATA_Y, CHARA_PLAYER) * 1000 + cdata(CDATA_X, CHARA_PLAYER)
						gdata(GDATA_TELEPORT_AREA) = AREA_OL_DRAN
						gdata(GDATA_TELEPORT_LEVEL) = 5
						levelexitby = 2
						gdata(GDATA_LEVEL_START_ON) = 7
						mapstartx = 14
						mapstarty = 9
						chatteleport = 1
						goto *chat_end
					}
					else {
						chatMore lang("う〜ん。ファンには悪いけど安全対策ができないとやっぱり中止だよねぇ…。", "Well... I feel sorry for the fans, but with no security staff the concert is cancelled as expected..."), strbye
						goto *chat_end
					}
				}
				if ( gdata(GDATA_LEVEL) == 5 ) {
					chatMore lang("みんなお待たせ〜！さぁ、今日も歌って踊って奏でるよーっ！", "Sorry to keep you waiting, everybody! Well, let's sing, dance, and play today too!")
					snd SOUNDLIST_CHEER
					snd SOUNDLIST_CHEER
					snd SOUNDLIST_CHEER
					chatMore lang("よーし、テンション上がってきた！！！愛してるぜベイベー！", "Alllright, tension is at MAX!!! I LOVE YOU BAAABY!"), strbaby
					cdata(CDATA_ROW_ACT, tc) = ACTION_PERFORM
					cdata(CDATA_ACTION_PERIOD, tc) = 9999
					ens = 1
					cdata(CDATA_RELATION, tc) = -1
					gdata(GDATA_FLAG_KAMIKAZE) = 0
					txtef COLOR_YELLOW
					txt lang("限定コンサートを守り抜こう！", "Let's protect the limited-time concert!")
					repeat MAX_CHARA_TOTAL
						if ( cdata(CDATA_EXIST, cnt) != CHAR_STATE_ALIVE ) {
							continue
						}
						if ( cnt < MAX_CHARA_FOLLOWER ) {
							continue
						}
						if ( cbit(CHARA_BIT_NECRO, cnt) == 1 ) {
							continue
						}
						if ( cdata(CDATA_ROLE, cnt) == ROLE_ADVENTURER ) {
							continue
						}
						if ( cbit(CHARA_BIT_GUARD_TEMP, cnt) == 1 ) {
							continue
						}
						cbitmod CHARA_BIT_BODYGUARD, cnt, 1
					loop
					flt
					characreate -1, CREATURE_ID_GOOSE, 14, 1
					cdata(CDATA_AI_CALM, rc) = 3
					cdata(CDATA_RELATION, rc) = -1
					cdata(CDATA_RELATION_ORG, rc) = -1
					cdata(CDATA_ROLE, rc) = ROLE_SPECIAL
					flt
					initlv = 125
					characreate -1, CREATURE_ID_GOLDEN_KNIGHT, 8, 6
					cdata(CDATA_AI_CALM, rc) = 3
					cdata(CDATA_RELATION, rc) = -1
					cdata(CDATA_RELATION_ORG, rc) = -1
					cdata(CDATA_ROLE, rc) = ROLE_SPECIAL
					flt
					initlv = 125
					characreate -1, CREATURE_ID_GOLDEN_KNIGHT, 14, 6
					cdata(CDATA_AI_CALM, rc) = 3
					cdata(CDATA_RELATION, rc) = -1
					cdata(CDATA_RELATION_ORG, rc) = -1
					cdata(CDATA_ROLE, rc) = ROLE_SPECIAL
					flt
					initlv = 125
					characreate -1, CREATURE_ID_GOLDEN_KNIGHT, 20, 6
					cdata(CDATA_AI_CALM, rc) = 3
					cdata(CDATA_RELATION, rc) = -1
					cdata(CDATA_RELATION_ORG, rc) = -1
					cdata(CDATA_ROLE, rc) = ROLE_SPECIAL
					flt
					initlv = 125
					characreate -1, CREATURE_ID_GOLDEN_KNIGHT, 2, 17
					cdata(CDATA_AI_CALM, rc) = 3
					cdata(CDATA_RELATION, rc) = -1
					cdata(CDATA_RELATION_ORG, rc) = -1
					cdata(CDATA_ROLE, rc) = ROLE_SPECIAL
					flt
					initlv = 125
					characreate -1, CREATURE_ID_GOLDEN_KNIGHT, 26, 17
					cdata(CDATA_AI_CALM, rc) = 3
					cdata(CDATA_RELATION, rc) = -1
					cdata(CDATA_RELATION_ORG, rc) = -1
					cdata(CDATA_ROLE, rc) = ROLE_SPECIAL
					flt
					initlv = 125
					characreate -1, CREATURE_ID_GOLDEN_KNIGHT, 2, 27
					cdata(CDATA_AI_CALM, rc) = 3
					cdata(CDATA_RELATION, rc) = -1
					cdata(CDATA_RELATION_ORG, rc) = -1
					cdata(CDATA_ROLE, rc) = ROLE_SPECIAL
					flt
					initlv = 125
					characreate -1, CREATURE_ID_GOLDEN_KNIGHT, 26, 27
					cdata(CDATA_AI_CALM, rc) = 3
					cdata(CDATA_RELATION, rc) = -1
					cdata(CDATA_RELATION_ORG, rc) = -1
					cdata(CDATA_ROLE, rc) = ROLE_SPECIAL
					goto *chat_end
				}
				goto *chat_end
			}
		}
		chatList 0, lang("ごめんなさい", "I'm sorry.")
		chatList 1, lang("サインください", "Can I have your autograph?")
		chatList 2, lang("付き合ってください", "Please go out with me.")
		buff = lang("えっと…集中したいからあまり話しかけないでね？", "Umm... Please don't talk to me when I'm trying to focus, okay?")
		gosub *chat_select
		if ( chatval == 0 ) {
			chatMore lang("わかってくれればいいの。あたしのコンサート楽しんでいってね！", "As long as you understand. Enjoy the concert!")
			chatMore lang("…あと、おひねりもよろしくっ！", "...and all donations are welcome!"), strbye
			goto *chat_end
		}
		if ( chatval == 1 ) {
			chatMore lang("あー。サインについてはヤカ姐も教えてくれなかったっけ…。", "Oh. Big sis Yacatect didn't tell me anything about doing autographs...")
			chatMore lang("練習しておくからまた今度、ね？", "Maybe next time, okay?"), strbye
			goto *chat_end
		}
		if ( chatval == 2 ) {
			chatList 0, lang("ごめんなさい", "I'm sorry.")
			chatList 1, lang("付き合ってください！", "Please go out with me!")
			buff = lang("そ、そういうのはちょっと。事務所を通してもらわないと…。", "Uhhh. That's, well, you know... That kind of thing has to go through the bureau...")
			gosub *chat_select
			if ( chatval == 1 ) {
				chatList 0, lang("ごめんなさい", "I'm sorry.")
				chatList 1, lang("付き合ってくだぁさい！！", "Please go out with me!!")
				buff = lang("ごめんね。そういうのって困るんだ。まだ曲も残ってるし…。", "I'm sorry. I'm not interested in that sort of thing. All I need is my music...")
				gosub *chat_select
				if ( chatval == 1 ) {
					chatMore lang("ひっ…！？ス、ストーカー？", "Eeep!? A-are you a stalker?")
					chatMore lang("ガード！ガード！", "Guards! Guards!")
					repeat 4
						await 50
						snd SOUNDLIST_FOOT1A
						await 50
						snd SOUNDLIST_FOOT1B
						await 50
					loop
					txt lang("黄金の騎士たちが駆け付けてきた。", "The Golden Knights come rushing to the scene.")
					txtef COLOR_YELLOW
					txtmore
					txt lang("「なんのつもりだ！」", cnvtalk("What do you think you're doing?!"))
					txtef COLOR_YELLOW
					txtmore
					txt lang("「変質者め、おとなしくしろ」", cnvtalk("Behave yourself, pervert!"))
					txtef COLOR_YELLOW
					txtmore
					txt lang("「のこのこ現れるとはな！」", cnvtalk("Have some damned shame!"))
					txtef COLOR_YELLOW
					txtmore
					txt lang("「観念しろ！」", cnvtalk("Don't resist!"))
					chatMore lang("(騎士に引きずられていくあなたを見ながら、怯えている…)", "(Paralyzed with fright, you are carried away by the Golden Knights...)")
					evadd EVENT_QUEST_TIMEOUT
					goto *chat_end
				}
				goto *chat_end
			}
		}
		goto *chat_end
	}
	if ( _switch_val == CREATURE_ID_URCAGUARY | _switch_sw ) {
		_switch_sw = 0
		if ( gdata(GDATA_FLAG_SUB_URCAGUARY_THE_TENACIOUS_GEM) >= 32 ) {
			chatMore lang("おかしい…少し目を離した隙にまた靴下が全部無くなっているぞ。", "That's funny... All the socks disappeared again when I wasn't looking.")
			chatMore lang("備品調達係、仕事だよ。また靴下30枚集めてきな。…そう嫌な顔をするなって。また褒美はやるよ。", "Time to work, Procurement Officer. Collect another 30 socks... Don't give me that look. You'll get another reward.")
			gdata(GDATA_FLAG_SUB_URCAGUARY_THE_TENACIOUS_GEM) = 2
			goto *chat_end
		}
		if ( gdata(GDATA_FLAG_SUB_URCAGUARY_THE_TENACIOUS_GEM) >= 2 ) {
			if ( gdata(GDATA_FLAG_SUB_URCAGUARY_THE_TENACIOUS_GEM) <= 32 ) {
				chatList 0, lang("ちょっと待って", "Wait a little longer.")
				chatList 1, lang("所持靴下全納入", "(Deliver all socks)")
				buff = lang("どうだい？靴下は持ってきたのかい？", "What's going on? Did you bring some socks?")
				gosub *chat_select
				if ( chatval == 1 ) {
					inv_getheader 0
					f = 0
					repeat invrange, invhead
						if ( gdata(GDATA_FLAG_SUB_URCAGUARY_THE_TENACIOUS_GEM) >= 32 ) {
							break
						}
						if ( inv(INV_ITEM_NUM, cnt) > 0 ) {
							if ( inv(INV_ITEM_ID, cnt) == ITEM_ID_SOCKS ) {
								if ( inv(INV_ITEM_EQUIP, cnt) == 0 ) {
									if ( ibit(ITEM_BIT_NO_DROP, cnt) != 1 ) {
										inv(INV_ITEM_NUM, cnt)--
										gdata(GDATA_FLAG_SUB_URCAGUARY_THE_TENACIOUS_GEM)++
										f = 1
										txt itemname(cnt, 1) + lang("を納入した。", " was handed over.")
										continue cnt
									}
								}
							}
						}
					loop
					if ( f ) {
						chatMore lang("よぉし…確かに受け取ったよ。", "Alright... I'll take them.")
					}
					if ( f == 0 ) {
						chatMore lang("しっかりしな。アタシに渡せる靴下がないじゃないか。", "Get a hold of yourself. You don't have any socks to give me."), strbye
					}
					gosub *calcBurdenPc
					if ( gdata(GDATA_FLAG_SUB_URCAGUARY_THE_TENACIOUS_GEM) >= 32 ) {
						chatMore lang("根性あるじゃないか…アンタは立派な騎士団備品調達係さ！褒美をやるよ、取っておきな。", "Got some guts, don't you... Alright, you're now in charge of equipment procurement for the Knights! Here's your reward. Take care of it.")
						txt_questitem
						if ( gdata(GDATA_FLAG_SUB_SOCKS_THIEF) == 12 ) {
							gdata(GDATA_FLAG_SUB_SOCKS_THIEF) = 100
							flt
							itemcreate -1, ITEM_ID_GRANDEL, cdata(CDATA_X, CHARA_PLAYER), cdata(CDATA_Y, CHARA_PLAYER), 0
						}
						if ( gdata(GDATA_HOUR) >= 0 & gdata(GDATA_HOUR) < 6 ) {
							flt
							itemcreate -1, ITEM_ID_TEAR_OF_GOD, cdata(CDATA_X, CHARA_PLAYER), cdata(CDATA_Y, CHARA_PLAYER), 0
							inv(INV_ITEM_PARAM1, ci) = 8
							encadd ci, ENCHANT_PROC * EXT_ENCHANTMENT + ENCHANT_PROC_GRAVITY_SPHERE, 150, 0, 1, 0, 1
						}
						if ( gdata(GDATA_HOUR) >= 6 & gdata(GDATA_HOUR) < 12 ) {
							flt
							itemcreate -1, ITEM_ID_TEAR_OF_GOD, cdata(CDATA_X, CHARA_PLAYER), cdata(CDATA_Y, CHARA_PLAYER), 0
							inv(INV_ITEM_PARAM1, ci) = 9
							encadd ci, ENCHANT_ELEMENTAL_DMG * EXT_ENCHANTMENT + SKILL_RES_MAGIC, 300, 0, 1, 0, 1
						}
						if ( gdata(GDATA_HOUR) >= 12 & gdata(GDATA_HOUR) < 18 ) {
							flt
							itemcreate -1, ITEM_ID_TEAR_OF_GOD, cdata(CDATA_X, CHARA_PLAYER), cdata(CDATA_Y, CHARA_PLAYER), 0
							inv(INV_ITEM_PARAM1, ci) = 10
							encadd ci, ENCHANT_PIERCING_CHANCE, 200, 0, 1, 0, 1
						}
						if ( gdata(GDATA_HOUR) >= 18 & gdata(GDATA_HOUR) < 24 ) {
							flt
							itemcreate -1, ITEM_ID_TEAR_OF_GOD, cdata(CDATA_X, CHARA_PLAYER), cdata(CDATA_Y, CHARA_PLAYER), 0
							inv(INV_ITEM_PARAM1, ci) = 11
							encadd ci, ENCHANT_REMOTE_BLOW, 250, 0, 1, 0, 1
						}
						goto *chat_end
					}
					goto *chat_end
				}
				goto *chat_end
			}
		}
		if ( gdata(GDATA_FLAG_SUB_SOCKS_THIEF) == 12 ) {
			if ( gdata(GDATA_FLAG_SUB_URCAGUARY_THE_TENACIOUS_GEM) == 1 ) {
				chatMore lang("靴下泥棒をぶっ飛ばしてきたって？フハハハ！アンタやるじゃないか、見直したよ！その調子で靴下の調達も頼むよ。", "You beat down the sock thief? Fuhaha! I see you in a whole new light! Now, as per our agreement, please deliver the socks I requested.")
				gdata(GDATA_FLAG_SUB_URCAGUARY_THE_TENACIOUS_GEM) = 2
				txt_questupdate
				goto *chat_end
			}
		}
		if ( gdata(GDATA_FLAG_SUB_SOCKS_THIEF) < 12 ) {
			chatList 0, lang("騎士団に入りたい", "I wish to join the Knights.")
			chatList 1, lang("口説きに来た", "I came to seduce you.")
			chatList 2, lang("特にない", "Not particularly.")
			buff = lang("おう、アタシになんか用か？", "Oh, do you have some sort of business with me?")
			gosub *chat_select
			if ( chatval == 0 ) {
				chatList 0, lang("残念だ", "That's too bad.")
				chatList 1, lang("雑用で構わない", "I'll do anything!")
				buff = lang("あー、悪い。そう言って盗みに入った不届き者がいてなぁ。今は身内以外の入団を認めてないんだよ。", "Ah, sorry. That's just what the last person said, and he turned out to be a thief. So, we're not accepting anyone we don't already know at the moment.")
				gosub *chat_select
				if ( chatval == 1 ) {
					chatMore lang("雑用？うむむ…そういうことなら、試しに少し働いてもらおうか。", "Anything? Hmm... Alright, we'll make you a probationary member and give you a little trial.")
					chatMore lang("とりあえず今言った泥棒は北東の雪原へ逃げていってね。まだ雪原を越えた辺りに潜伏しているかもしれない、見かけたら成敗しときな。もし真人間のふりをしていても、靴下を見せれば正体を現すだろうよ。後はそいつに盗まれた靴下30枚分を調達してきてくれ。", "The thief I mentioned escaped through the snowfields to the northeast. He might not have made it through, but if you see him, punish him. I'm sure he'll show his true colors if you show him a sock. Anyways, please supply us with 30 socks as replacements for what the thief took.")
					if ( gdata(GDATA_FLAG_SUB_URCAGUARY_THE_TENACIOUS_GEM) == 0 ) {
						gdata(GDATA_FLAG_SUB_URCAGUARY_THE_TENACIOUS_GEM) = 1
						txt_questupdate
					}
					goto *chat_end
				}
				goto *chat_end
			}
			if ( chatval == 1 ) {
				chatMore lang("フハハ！面白い冗談を言うじゃないか、照れちまうよ！", "Fuhaha! What a funny joke. You're going to embarrass me!")
				chatList 0, lang("おうちかえぅ", "(Leave)")
				chatList 1, lang("冗談じゃない", "I wasn't joking.")
				buff = lang("さ、お子ちゃまはおうちに帰りな。", "Now, go on and leave, child.")
				gosub *chat_select
				if ( chatval == 0 ) {
					chatMore lang("はいはい。いい子でちゅねー。", "Yes, yes. That's a good child."), strbye
					goto *chat_end
				}
				if ( chatval == 1 ) {
					chatMore lang("フッハハハハハ！フハハハァー！…いや、悪いねぇ。アタシにとっちゃ冗談の域を出てないのさ。", "Fuhahahahaha! Fuhahaha-! ...Ah, sorry. That was just too much."), strbye
					goto *chat_end
				}
			}
			goto *chat_end
		}
		goto *chat_end
	}
	if ( _switch_val == CREATURE_ID_BELPHAT_THE_COSMIC_SWORD | _switch_sw ) {
		_switch_sw = 0
		if ( gdata(GDATA_AREA) == AREA_CHAOS_CRADLE ) {
			if ( gdata(GDATA_FLAG_SUB_BELPHAT_THE_COSMIC_SWORD) >= 1000 ) {
				if ( gdata(GDATA_FLAG_MAIN) >= 575 ) {
					chatMore lang("クロやんも腕を上げたものだ。昔ちょっと見せただけの宇宙剣術をしっかりものにしたうえで、独自のアレンジを加えているとは。", "Sorry, this is untranslated sentence."), strbye
					goto *chat_end
				}
			}
		}
		if ( gdata(GDATA_FLAG_SUB_BELPHAT_THE_COSMIC_SWORD) == 1000 ) {
			kaiwa = rnd(8)
			if ( kaiwa == 0 ) {
				chatMore lang("まじかよ、クロやん…うちの家宝の剣のイミテーション作ってるじゃないか。おそろいのつもりなんだろうけど…気まずいなぁ。前回勝手に家宝持ち出したこと親父に叱られたから、今回は持ってきてないんだよな。", "Sorry, this is untranslated sentence."), strbye
			}
			if ( kaiwa == 1 ) {
				chatMore lang("惑星ユゴスを訪れた時、スペースハンターのボッヘリト星人が外来種であるミ=ゴの駆除をしていてね。抵抗するミ=ゴもいたが、訓練された犬の３倍の能力を持つボッヘリト星人には次々と狩られていった。その手伝いの後のミ=ゴ鍋は旨かったなぁ。", "Sorry, this is untranslated sentence."), strbye
			}
			if ( kaiwa == 2 ) {
				chatMore lang("バイアクヘー星間旅行サービスも利用したことがあるんだが、あれは精神しか旅行できないから食べ歩きに不向きなんだよなぁ。事前準備も色々と面倒だし。", "Sorry, this is untranslated sentence."), strbye
			}
			if ( kaiwa == 3 ) {
				chatMore lang("惑星サイクラノーシュを訪れた時は大変だった。現地のキノコ料理をご馳走になったまではいいんだが、勝手に彼らのボスの配偶者に選ばれてしまって。慌てて逃げ出したよ。", "Sorry, this is untranslated sentence."), strbye
			}
			if ( kaiwa == 4 ) {
				chatMore lang("惑星トゥンツァに行った時、ちょうどそこの神の生誕祭をやっていてな。ラッキーだと思ったら、振る舞われたのが亜硫酸スープ。一応飲んだけど、舌がピリピリして味わうどころじゃなかった。", "Sorry, this is untranslated sentence."), strbye
			}
			if ( kaiwa == 5 ) {
				chatMore lang("物も人も星すらも食い尽くして宇宙を渡り歩く宇宙最凶生物…デベロンダッタ星人とよく間違われて攻撃されるんだ。宇宙食べ歩きには危険がいっぱいだな。", "Sorry, this is untranslated sentence."), strbye
			}
			if ( kaiwa == 6 ) {
				chatMore lang("お土産にジェラミス星人のたこやきも用意していたんだが、あんまり暴れるものだから来る途中で全部食べてしまったよ。仕方がないから代わりにイス焼きを大量に買ってきた。", "Sorry, this is untranslated sentence."), strbye
			}
			if ( kaiwa == 7 ) {
				chatMore lang("猫とかいう、ニャリン星人に似た生物がこの星には大勢いるな。前に来た時はすごく驚いた。スンバラリア星を侵略した強豪と聞いていたからな…。", "Sorry, this is untranslated sentence."), strbye
			}
			goto *chat_end
		}
		if ( gdata(GDATA_AREA) == AREA_CHAOS_CRADLE ) {
			if ( gdata(GDATA_FLAG_MAIN) >= 515 ) {
				chatList 0, lang("知らん", "I have no idea.")
				chatList 1, lang("案内するよ", "Let me take you to him.")
				buff = lang("クロやん…いったい今どこにいるんだ…。", "Kuro... Where could you be...")
				gosub *chat_select
				if ( chatval != 1 ) {
					goto *chat_end
				}
				if ( get_freeally() == 0 ) {
					txt lang("仲間の最大数に達しているため、これ以上連れていけない…。", "Your party is already full. You can't invite someone anymore.")
					goto *chat_end
				}
				chatMore lang("なんだって？それは助かる！ではちゃんと案内してくれたら礼をしよう。", "You know where he is? Thank you so much! If you take me to him, I'll make sure to reward you.")
				rc = tc
				gosub *add_ally
				cbitmod CHARA_BIT_GUARD_TEMP, rc, 1
				r1 = rc
				gosub *charaRefresh
				if ( gdata(GDATA_FLAG_MAIN) < 520 ) {
					gdata(GDATA_FLAG_MAIN) = 520
				}
				gdata(GDATA_FLAG_SUB_BELPHAT_THE_COSMIC_SWORD) = 1
				goto *chat_end
			}
			if ( gdata(GDATA_FLAG_MAIN) < 515 ) {
				chatMore lang("わが名はベルファート。どこにでもいる、普通の宇宙剣客だ。この星には以前ふらっと立ち寄ったぐらいで場所もわからなかったのだが、宇宙ガイドとかいう人物に案内されて再び訪れることができた。", "My name is Belphat. I'm an ordinary space swordsman. I visited this planet once before by accident, and with the help of a guide, managed to find my way here again.")
				chatMore lang("そうしてこの地でかつての友人を探している途中、ガイドを名乗る妖精に出会ったので尋ねてみたのだが。…知らないと一蹴されてしまってね。何でもいいから知らないか、とすがるうちに気が付いた。こいつからは隠し事をしている臭いがする。ボロを出すまで徹底的に問い詰めてやるつもりだ。", "While looking for the friend that I found here before, I met this fairy. He calls himself a guide, so I asked for assistance... He immediately turned me down saying he didn't know the person. That's fine, but I noticed something. He has a smell as if he's hiding something. I'm going to keep questioning him until I can find out what it is.")
				gdata(GDATA_FLAG_MAIN) = 515
				goto *chat_end
			}
			goto *chat_end
		}
		goto *chat_end
	}
	if ( _switch_val == CREATURE_ID_KUROYA_THE_LOOKING_UNIVERSE | _switch_sw ) {
		_switch_sw = 0
		if ( gdata(GDATA_AREA) == AREA_CHAOS_CRADLE ) {
			if ( gdata(GDATA_FLAG_MAIN) >= 580 ) {
				chatMore lang("あー…腕に自信がないなら、次の階層はあんまり近寄らないほうがいいかもしれないね。", "Sorry, this is untranslated sentence."), strbye
				goto *chat_end
			}
			if ( gdata(GDATA_FLAG_MAIN) == 575 ) {
				chatMore lang("いやー。駄目元でも交渉してみるものだね。おっと、こっちの話さ。", "Sorry, this is untranslated sentence."), strbye
				gdata(GDATA_FLAG_MAIN) = 580
				goto *chat_end
			}
			goto *chat_end
		}
		if ( gdata(GDATA_FLAG_SUB_BELPHAT_THE_COSMIC_SWORD) == 1 ) {
			if ( findallyguard(CREATURE_ID_BELPHAT_THE_COSMIC_SWORD) != (-1) ) {
				chara_vanquish findallyguard(CREATURE_ID_BELPHAT_THE_COSMIC_SWORD)
				flt
				characreate -1, CREATURE_ID_BELPHAT_THE_COSMIC_SWORD, 6, 12
				cdata(CDATA_ROLE, rc) = ROLE_SPECIAL
				chatMore lang("少年の頃、僕には異星の友人がいてね。彼が母星に帰ってから数十年…別れ際に再会を誓ったけれど、僕はもうこんなおじさんになってしまった。生きている間にもう一度会いたいものだね…。", "When I was a boy, I had a friend from a different planet. It's been decades now since he returned to his home world... When we parted, we vowed to reunite someday, but I've already grown old. I hope to meet him once again while I'm still alive...")
				chatMore lang("DNAスキャン…外見は変わっているが間違いない。クロやん！", "Scanning DNA... Your appearance has changed, but that's definitely you, Kuro!"), strmore, findchara(CREATURE_ID_BELPHAT_THE_COSMIC_SWORD)
				chatMore lang("え、誰！？", "W-who are you?!"), strmore, findchara(CREATURE_ID_KUROYA_THE_LOOKING_UNIVERSE)
				chatMore lang("…いや、待てよ。その呼び方は…わが友、ベルっちではないか？", "...Hold on. Calling me Kuro... Are you my friend Bel?"), strmore, findchara(CREATURE_ID_KUROYA_THE_LOOKING_UNIVERSE)
				chatMore lang("いかにも。…しかしクロやんも変わったな。体毛が白くなり皮膚が収縮している。まさか病気か？", "Indeed... But you've really changed, Kuro. Your hair is all white and your skin is wrinkled. Are you sick?"), strmore, findchara(CREATURE_ID_BELPHAT_THE_COSMIC_SWORD)
				chatMore lang("お前がなかなか戻ってこないから老化したんだよ！そう言うベルっちも変わりすぎだ！昔はもっと丸っこくて小さくてボーッっとした感じだったろ！一皮剥けたとかそういうレベルじゃないぞ。", "I got old because you took so long to come back! But you've changed too, Bel! You used to be smaller and far more round! It's like your skin has all peeled off!"), strmore, findchara(CREATURE_ID_KUROYA_THE_LOOKING_UNIVERSE)
				chatMore lang("ああ。82回脱皮した。", "It has. 82 times, actually."), strmore, findchara(CREATURE_ID_BELPHAT_THE_COSMIC_SWORD)
				chatMore lang("剥けすぎだろ…。", "That's too much..."), strmore, findchara(CREATURE_ID_KUROYA_THE_LOOKING_UNIVERSE)
				chatMore lang("いかんいかん。話が長くなってしまう。先に、ここまで案内してくれた恩人に礼をしなきゃな。お土産の一部を受け取って…おっと。この星では足元に転がすのだったな。", "It happens. Let's sit down and catch up. But first, I need to thank the person that led me here. Here, take this as a gift... Whoops. I almost forget its customary to place gifts at other's feet on this planet."), strmore, findchara(CREATURE_ID_BELPHAT_THE_COSMIC_SWORD)
				flt
				itemcreate -1, ITEM_ID_AMULET_OF_YEKUB, cdata(CDATA_X, CHARA_PLAYER), cdata(CDATA_Y, CHARA_PLAYER), 0
				flt
				itemcreate -1, ITEM_ID_GIFT, cdata(CDATA_X, CHARA_PLAYER), cdata(CDATA_Y, CHARA_PLAYER), 3
				inv(INV_ITEM_PARAM4, ci) = 4
				flt
				itemcreate -1, ITEM_ID_YITH_YAKI, cdata(CDATA_X, CHARA_PLAYER), cdata(CDATA_Y, CHARA_PLAYER), 2
				txt_questitem
				gdata(GDATA_FLAG_SUB_BELPHAT_THE_COSMIC_SWORD) = 1000
				txt_questcompleted
				goto *chat_end
			}
		}
		kaiwa = 0
		item_find ITEM_ID_SOCKS, 3, 1
		if ( stat != (-1) ) {
			ci = stat
			if ( inv(INV_ITEM_NUM, ci) >= 1 ) {
				if ( ibit(ITEM_BIT_NO_DROP, ci) != 1 ) {
					kaiwa = 1
				}
			}
		}
		if ( kaiwa == 1 ) {
			chatList 0, lang("あげないよ", "No way.")
			chatList 1, lang(itemname(ci) + "を交換", "(Hand over " + itemname(ci) + ".)")
			buff = lang("おや…？君、靴下を持っているみたいだね。提案なんだけれど、その靴下１枚と信仰の巻物３枚を交換してくれないかな？", "Oh...? It seems you have some socks with you. I have a proposal for you. Why don't you trade me one of those socks in exchange for three scrolls of faith?")
			gosub *chat_select
			if ( chatval != 1 ) {
				chatMore lang("それは…残念だね。", "That's... too bad.")
				goto *chat_end
			}
			if ( chatval == 1 ) {
				inv(INV_ITEM_NUM, ci) -= 1
				gosub *calcBurdenPc
				txt_questitem
				flt
				itemcreate -1, ITEM_ID_SCROLL_FAITH, cdata(CDATA_X, CHARA_PLAYER), cdata(CDATA_Y, CHARA_PLAYER), 3
				if ( gdata(GDATA_FLAG_SUB_URCAGUARY_THE_TENACIOUS_GEM) >= 1 ) {
					if ( gdata(GDATA_FLAG_SUB_SOCKS_THIEF) <= 10 ) {
						chatList 0, lang("靴下泥棒か？", "Are you the sock thief?")
					}
				}
				chatList 1, lang("ほどほどに", "Everything in moderation.")
				chatList 2, lang("同志よ", "You're a man after my own heart.")
				buff = lang("いやぁ、最近はすっかりくつしたの虜で…。クライアントに引き渡すのが惜しいくらいだね。", "My, I've been completely captivated by socks lately... It's a shame to make you turn it over.")
				gosub *chat_select
				if ( chatval == 2 ) {
					chatMore lang("気が遠くなるほどの快楽…いいよね。焦りも苛立ちも、くつしたを嗅いでいる間は忘れられる。", "How wonderful... The pleasure is simply overwhelming. When sniffing these socks, all my impatience and irritation just disappears.")
					goto *chat_end
				}
				if ( chatval == 0 ) {
					chatMore lang("！！", "!!")
					chatList 1, lang("それならよし", "That's okay then.")
					chatList 2, lang("もはや問答無用", "It's too late to discuss it now.")
					buff = lang("まさか雪原を越えて追手が来ていたとは…。ただ訂正をさせてもらうと、僕は靴下たちを盗んだわけじゃないんだ。床に無惨に脱ぎ散らかされていた可哀想な靴下たちを保護したに過ぎないんだ。", "I can't believe someone pursued me through the snow fields... But if you'd allow me to make a correction there, I didn't steal them. I simply protected the poor socks that had been strewn around so carelessly.")
					gosub *chat_select
					if ( chatval == 2 ) {
						chatMore lang("…実力行使か！仕方がない。ソックスソードマン、いざ参る！", "...Then you leave me no choice. I'll use force! Face the Sock Swordsman!")
						cdata(CDATA_RELATION, tc) = -3
						cdata(CDATA_AI_AGGRO, tc) = 80
						cdata(CDATA_TARGET, tc) = 0
						gdata(GDATA_FLAG_SUB_SOCKS_THIEF) = 11
					}
					else {
						chatMore lang("そう。靴下の匂いが、僕を呼んでいるのさ…。", "Yes. The smell of socks calls to me...")
					}
					goto *chat_end
				}
				goto *chat_end
			}
			goto *chat_end
		}
		if ( kaiwa == 0 ) {
			if ( gdata(GDATA_FLAG_SUB_BELPHAT_THE_COSMIC_SWORD) >= 1000 ) {
				chatMore lang("ベルっちの旅行話は、相変わらず内容がＢ級でゾクゾクするねぇ。本当に…また会えたんだなって実感が湧いてくるよ。子供の頃も、よくわからない固有名詞に戸惑いながら聞いていたっけ。ああ、懐かしいなぁ…。涙が出てきそうだ。", "Sorry, this is untranslated sentence.")
				goto *chat_end
			}
			chatMore lang("この神の艦は空を飛び、イルヴァの外…宇宙をも航行できるのだとか。宇宙…行ってみたいものだね。", "This warship of the gods can fly in the sky, even outside Ylva... Perhaps even travel the universe. I'd like that... Seeing the universe.")
			chatMore lang("少年の頃、僕には異星の友人がいてね。彼が母星に帰ってから数十年…別れ際に再会を誓ったけれど、僕はもうこんなおじさんになってしまった。生きている間にもう一度会いたいものだね…。", "When I was a boy, I had a friend from a different planet. It's been decades now since he returned to his home world... When we parted, we vowed to reunite someday, but I've already grown old. I hope to meet him once again while I'm still alive...")
			chatMore lang("宇宙を航行できるというこの艦を見ていると切なさを感じるとともに、友人の話を聞いて宇宙に思いを馳せていた頃に戻ったような…そんな気分になれるんだ。", "Seeing this ship, which can travel the universe, and thinking about my old friend... it fills me with pain and sadness.")
			goto *chat_end
		}
		goto *chat_end
	}
	if ( _switch_val == CREATURE_ID_FRON_THE_TOUR_PLANNER | _switch_sw ) {
		_switch_sw = 0
		chatMore lang("より良いツアーのプランを組み立てるには、常に各地の現状を把握しておく必要があります。それがたとえ火の中、水の中、草の中、森の中、土の中や雲の中だろうと。ツアープランナーはお客様の護衛がないぶんガイドよりも身軽ですが、未開拓地域の調査や力ずくでの交渉といった業務も多いため、高い戦闘力が要求されます。", "Sorry, this is untranslated sentence.")
		goto *chat_end
	}
	if ( _switch_val == CREATURE_ID_RENAI_THE_OVER_MESHERA | _switch_sw ) {
		_switch_sw = 0
		if ( gdata(GDATA_FLAG_SUB_REGULUS_ZANAN) >= 1004 ) {
			chatMore lang("兄さんは昔から過保護で…わたしのためによく無茶もしていました。わたしの存在が足枷になっているんじゃないか、と最近思うんです。", "Sorry, this is untranslated sentence.")
			goto *chat_end
		}
		if ( gdata(GDATA_FLAG_SUB_REGULUS_ZANAN) == 1003 ) {
			chatMore lang("あの、" + cdatan(CDATAN_NAME, CHARA_PLAYER) + "さん？兄さんの知り合いだったんですね。その節は兄がご迷惑をお掛けしたみたいですみません…。", "Sorry, this is untranslated sentence.")
			chatMore lang("今でこそ人型を保ってますけど、メシェーラの侵食が無くなったわけではないので、勝手に触手が出たり突然腕が膨張したりわたしが弱ると身体を乗っ取られたりするんです。兄さんが毎晩神経を接続して調整はしてくれてるんですけど…。", "Sorry, this is untranslated sentence.")
			chatMore lang("兄と毎晩接続…な、なんか卑猥ですね。", "Sorry, this is untranslated sentence.")
			gdata(GDATA_FLAG_SUB_REGULUS_ZANAN) = 1004
			goto *chat_end
		}
		chatMore lang("…わたしに近寄らない方がいいですよ。", "Sorry, this is untranslated sentence.")
		goto *chat_end
	}
	if ( _switch_val == CREATURE_ID_REGULUS_THE_ALTERED | _switch_sw ) {
		_switch_sw = 0
		if ( gdata(GDATA_FLAG_SUB_REGULUS_ZANAN) >= 1003 ) {
			chatMore lang("こんな身体じゃ故郷にももう戻れん。幸い身体能力は向上しているから、このまま二人で冒険者としてやっていこうと思っているんだ。", "Sorry, this is untranslated sentence.")
			goto *chat_end
		}
		if ( gdata(GDATA_FLAG_SUB_REGULUS_ZANAN) == 1002 ) {
			chatMore lang("お、" + cdatan(CDATAN_NAME, CHARA_PLAYER) + "！レナイが！ついにオレの妹が見つかったんだ！苦労したよ本当に…。見つけた時にはもう身体が異形化しててさ、意識もほぼ無くて襲い掛かってきたんだぜ。", "Sorry, this is untranslated sentence.")
			chatMore lang("結論から言うと、ギリギリまで同化されることで神経を接続し、コントロールを菌から乗っ取ることでなんとか奪還できた。二人分同時に制御できるという保証はなかったから、完全にイチかバチかだったけどな。", "Sorry, this is untranslated sentence.")
			chatMore lang("ああ、オレがメシェーラを制御できるのは薬物と人体改造で神経系を強化されているかららしい。あんたと研究施設に行った時見つけた手帳に、そう書いていた…そうだ、この手帳やるよ。何かの手がかりにと思って持っていたけど、もう必要なさそうだしな。燃やすなり売り払うなり、ザナンの軍部をゆする材料にするなり好きにしてくれ。", "Sorry, this is untranslated sentence.")
			flt
			itemcreate -1, ITEM_ID_RESEARCHERS_DIARY, cdata(CDATA_X, CHARA_PLAYER), cdata(CDATA_Y, CHARA_PLAYER), 0
			txt_questitem
			gdata(GDATA_FLAG_SUB_REGULUS_ZANAN) = 1003
			goto *chat_end
		}
		if ( gdata(GDATA_FLAG_SUB_REGULUS_ZANAN) >= 1000 ) {
			if ( gdata(GDATA_LEVEL) == 1 ) {
				chatMore lang("あれからあちこちの地域に行って聞き込みをしているんだけど、今のところ何も手がかりないんだよな。…早く探し出してやらないと。あいつは昔から寂しがり屋なんだ。", "Sorry, this is untranslated sentence.")
				goto *chat_end
			}
		}
		if ( gdata(GDATA_FLAG_SUB_REGULUS_ZANAN) == 100 ) {
			if ( gdata(GDATA_LEVEL) == 1 ) {
				chatMore lang("１６番独房には内側から破られた形跡があった。レナイはどこかできっと生きている。まだ希望はあるはずだ…。", "There was evidence that someone broke out of cell 16. Renai must be alive out there somewhere. There's still hope...")
				goto *chat_end
			}
		}
		if ( gdata(GDATA_FLAG_SUB_REGULUS_ZANAN) == 4 ) {
			if ( gdata(GDATA_LEVEL) == 100 ) {
				chatMore lang("オレが囚われていたのは１４番独房。妹の隣の部屋だった。すぐ隣にいるっていうのに、オレには根拠のない励ましの言葉をかけるくらいしかできなかった…。", "I was kept in cell 14. It was right next to my sister's cell. There may not have been any truth to them, but I used to constantly whisper her words of encouragement...")
				gdata(GDATA_FLAG_SUB_REGULUS_ZANAN) = 5
			}
		}
		if ( gdata(GDATA_AREA) == AREA_NT_SOUTH_BORDER ) {
			if ( gdata(GDATA_LEVEL) == 100 ) {
				if ( gdata(GDATA_FLAG_SUB_REGULUS_ZANAN) == 3 ) {
					chatMore lang("酷い目にあった…殺人的な加速だったな…。道理で冒険者にしか使わせないはずだ、市民なんかが乗ったら負荷で死にかねない。", "Gods, that was terrible... Such acceleration... No wonder adventurers are the only ones allowed to use it. It might kill a normal citizen.")
					chatMore lang("…とは言え実験場には着いたな。ここでは旧型メシェーラの生体強化能力に着目した兵器の開発・実験が行われていた。素体にされていたのは人間…オレもその一人だ。", "...But we did make it. This research institution was studying the organism strengthening effect of Meshera. One \"ingredient\" of their research was humans... and I'm one of them.")
					chatMore lang("オレは体内のメシェーラを制御するための改造手術が終了した後に隙を見て逃げ出せたんだが、最奥の１６番独房にはオレの妹の『レナイ』がまだ囚われているはずだ。…逃げるのに必死で、まさか迎えに来るのがこんなに遅れるとはな。", "After my the operation to control the Meshera within my body, I found a chance to escape and took it. My younger sister, Renai, should still be here within cell 16... I was so frantic while trying to escape that I didn't think to save her. I hope we're not too late.")
					chatMore lang("軍がさじを投げたほどの状況では望みが薄いが…オレのように適合している可能性もある。他の連中もだ。もし適合できずに苦しんでいたのなら…その時は、楽にしてやりたい。", "If the army has given up on this place then the chances are slim, but... There's a chance she may have been able to adapt, just like me.")
					chatMore lang("撤退のタイミングはあんたに任せる。またアレに乗ることになるけど、それはもう仕方ない。後は…ん？", "I'll leave deciding when to leave to you. I don't really want to ride that thing again, but I suppose there's no other choice. Afterwards... Hmm?")
					chatMore lang("…厄介だな。被験者の動きを止めるための強力な神経ガスが散布されているみたいだ。大方、研究員が収容区画に撒いたんだろうが、入口付近にまで漏れてきているとは。注意したほうがいいだろう。", "...This isn't good. It looks like they released some sort of nerve gas to try to immobilize the test subjects. I expect most of it was released near the subjects themselves, but it appears that some has leaked even near the entrance. Be careful.")
					gdata(GDATA_FLAG_SUB_REGULUS_ZANAN) = 4
				}
			}
		}
		if ( gdata(GDATA_AREA) == AREA_NT_SOUTH_BORDER ) {
			if ( gdata(GDATA_LEVEL) == 1 ) {
				if ( gdata(GDATA_FLAG_SUB_REGULUS_ZANAN) <= 2 ) {
					chatMore lang("あんたが" + cdatan(CDATAN_AKA, CHARA_PLAYER) + cdatan(CDATAN_NAME, CHARA_PLAYER) + "だな。オレがエユルだ。よろしくな。", "You must be " + cdatan(CDATAN_AKA, CHARA_PLAYER) + " " + cdatan(CDATAN_NAME, CHARA_PLAYER) + ". I'm Regulus. Nice to meet you.")
					chatMore lang("渡された資料を読んだんだが、神から借りてきた核駆動の超音速の乗り物であっと言う間に目的地まで移動できるらしい。なんだか凄そうだな。", "I'm not sure if you've read the materials you were given, but it sounds like we're going to use some kind of vehicle borrowed from the gods to get to our destination in the blink of an eye. Pretty exciting.")
				}
				chatList 0, lang("ちょっと待って", "Hold on a minute.")
				chatList 1, lang("出発", "Let's go.")
				if ( gdata(GDATA_FLAG_SUB_REGULUS_ZANAN) <= 3 ) {
					buff = lang("そろそろ出発しようか？", "Shall we get going?")
				}
				if ( gdata(GDATA_FLAG_SUB_REGULUS_ZANAN) > 3 ) {
					buff = lang("またアレに乗らなきゃいけないのか…。", "We've got to get on that thing again don't we...")
				}
				gosub *chat_select
				if ( gdata(GDATA_FLAG_SUB_REGULUS_ZANAN) <= 2 ) {
					gdata(GDATA_FLAG_SUB_REGULUS_ZANAN) = 3
				}
				if ( chatval == 1 ) {
					if ( gdata(GDATA_FLAG_DUEL_TARGET) > 0 ) {
						snd SOUNDLIST_FAIL1
						txt_duel2
						goto *chat_end
					}
					mapidou = 100
					mdata(MDATA_DOWNSTAIRS_POS) = cdata(CDATA_Y, CHARA_PLAYER) * 1000 + cdata(CDATA_X, CHARA_PLAYER)
					gdata(GDATA_TELEPORT_AREA) = AREA_NT_SOUTH_BORDER
					gdata(GDATA_TELEPORT_LEVEL) = 100
					levelexitby = 2
					gdata(GDATA_LEVEL_START_ON) = 7
					mapstartx = 4
					mapstarty = 4
					dbg_skipevent = 1
					gdata(GDATA_HOUR) += 2
					gosub *advance_hour
					dbg_skipevent = 0
					chatteleport = 1
					goto *chat_end
				}
				else {
					chatMore lang("オーケー。ここで待ってるからな。", "Okay. I'll be here when you're ready.")
				}
			}
		}
		goto *chat_end
	}
	if ( _switch_val == CREATURE_ID_NERES_THE_AMNESIAC | _switch_sw ) {
		_switch_sw = 0
		if ( gdata(GDATA_AREA) == AREA_WAR_GROUND ) {
			chatMore lang("リューツェ君を守って何かと戦っていたのは憶えている。その後光に包まれてこのわけのわからない場所に…。", "Huh."), strbye
			chatMore lang("クソッ。獣が散々食い散らかした跡みたいに、記憶が断片しか残っていないなんて。それも、ぐちゃぐちゃでほとんど繋がらないときたわ…！", "Huh."), strbye
			goto *chat_end
		}
		if ( gdata(GDATA_AREA) == AREA_CHAOS_CRADLE ) {
			if ( neres == 100 ) {
				chatMore lang("チッ…置いてきたリューツェ君が心配になってきたわ。", "Huh."), strbye
				goto *chat_end
			}
			if ( neres == 0 ) {
				chatMore lang("この世界のこと教えてあげるって言うからついてきたけど、何なのよここは。私、都合よく護衛に使われてる気がするんだけど。", "Huh."), strbye
				neres = 100
				goto *chat_end
			}
		}
		goto *chat_end
	}
	if ( _switch_val == CREATURE_ID_RYUTYE_THE_AMNESIAC | _switch_sw ) {
		_switch_sw = 0
		if ( gdata(GDATA_AREA) == AREA_WAR_GROUND ) {
			if ( gdata(STARTING_GDATA_FLAG + 321) == 0 ) {
				chatMore lang("は、初めまして。", "Huh.")
				chatMore lang("僕はリューツェ…っていう名前らしいです。…ごめんなさい、自分の名前もよく憶えていないんです。", "Huh."), strbye
				chatMore lang("あなたは…ええと、" + cdatan(CDATAN_NAME, CHARA_PLAYER) + "さんっていうんですね。あちこちを冒険されているんですか？羨ましいです、僕なんて屋敷から全然…あれ？なんだっけ…。僕は、今まで、「どういうふうに生きてきた」んだっけ…？", "Huh."), strbye
				gdata(STARTING_GDATA_FLAG + 321) = 1
				goto *chat_end
			}
			chatMore lang("ネレスちゃんがイライラしている気持ちもわかるんです。大切なものをいくつも失っていて…それが何なのか気が付くことができなくて…こうなった原因もわからなくて…とても、もどかしいんです。", "Huh."), strbye
			goto *chat_end
		}
		goto *chat_end
	}
	if ( _switch_val == CREATURE_ID_MELGET_THE_INFORMER | _switch_sw ) {
		_switch_sw = 0
		if ( gdata(GDATA_AREA) == AREA_CHAOS_CRADLE ) {
			if ( gdata(GDATA_FLAG_MAIN) >= 600 ) {
				chatMore lang("さぁて、神の間にはどんな秘密が隠されてるのかなー？ふふふ、秘密を暴くのって楽しいもんね！", "Huh."), strbye
				goto *chat_end
			}
			if ( gdata(GDATA_FLAG_MAIN) == 595 ) {
				chatMore lang("へぇー。ロスリアの連中になかなか出くわさないと思ったら、本隊はまだ上の階層にいるんだ。やっぱり少数精鋭が身軽だよね！あまりに大所帯だと思うように進めないんじゃないかなぁ。", "Huh."), strbye
				gdata(GDATA_FLAG_MAIN) = 600
				goto *chat_end
			}
			goto *chat_end
		}
		if ( gdata(GDATA_DAY) == 1 | gdata(GDATA_DAY) == 15 ) {
			if ( gdata(GDATA_FLAG_MELGET_SCORE) != (-1) ) {
				chatMore lang("問題数ももっと増やさなきゃなぁ…。あ、次回のクイズは次の1日と15日にやるからね。本職のほうは明日からやるよ。", "I will perform next quiz on next 1st and 15th.")
				goto *chat_end
			}
			chatMore lang("イエーイ！冒険者4択クイズ〜！ルールは簡単、10問連続の4択クイズに素早く正解しようっ！かかった時間と正解数で得点が決まるけど、制限時間は60秒。それを過ぎるといくら正解していても0点になるから気をつけて！ええっとキミなら…ティリス大陸にまつわる問題でいこうか。", "Yeah! I will put 10 quiz to you...the time limit is 60 seconds!")
			chatList 0, lang("やらないよ", "Not ready.")
			chatList 1, lang("ＯＫ！", "All right!")
			buff = lang("それじゃあ準備はいいかな？問題文は下の方に出すからね！", "Ready? I will put out the question text statement at the bottom.")
			gosub *chat_select
			if ( chatval != 1 ) {
				chatMore lang("なんてこったい。", "Sorry!")
				goto *chat_end
			}
			snd SOUNDLIST_WHISTLE
			txtef COLOR_RED
			txt lang("スタート！", "Start!")
			music = MUSICLIST_MCARENA
			gosub *music_play
			startsec = timeGetTime() / 1000
			repeat 35
				qi = rnd(cnt + 1)
				qp(cnt) = qp(qi)
				qp(qi) = cnt
			loop
			repeat 10
				if ( qp(cnt) == 0 ) {
					txtsetquiz0 4
				}
				if ( qp(cnt) == 1 ) {
					txtsetquiz1 4
				}
				if ( qp(cnt) == 2 ) {
					txtsetquiz2 4
				}
				if ( qp(cnt) == 3 ) {
					txtsetquiz3 4
				}
				if ( qp(cnt) == 4 ) {
					txtsetquiz4 4
				}
				if ( qp(cnt) == 5 ) {
					txtsetquiz5 4
				}
				if ( qp(cnt) == 6 ) {
					txtsetquiz6 4
				}
				if ( qp(cnt) == 7 ) {
					txtsetquiz7 4
				}
				if ( qp(cnt) == 8 ) {
					txtsetquiz8 4
				}
				if ( qp(cnt) == 9 ) {
					txtsetquiz9 4
				}
				if ( qp(cnt) == 10 ) {
					txtsetquiz10 4
				}
				if ( qp(cnt) == 11 ) {
					txtsetquiz11 4
				}
				if ( qp(cnt) == 12 ) {
					txtsetquiz12 4
				}
				if ( qp(cnt) == 13 ) {
					txtsetquiz13 4
				}
				if ( qp(cnt) == 14 ) {
					txtsetquiz14 4
				}
				if ( qp(cnt) == 15 ) {
					txtsetquiz15 4
				}
				if ( qp(cnt) == 16 ) {
					txtsetquiz16 4
				}
				if ( qp(cnt) == 17 ) {
					txtsetquiz17 4
				}
				if ( qp(cnt) == 18 ) {
					txtsetquiz18 4
				}
				if ( qp(cnt) == 19 ) {
					txtsetquiz19 4
				}
				if ( qp(cnt) == 20 ) {
					txtsetquiz20 4
				}
				if ( qp(cnt) == 21 ) {
					txtsetquiz21 4
				}
				if ( qp(cnt) == 22 ) {
					txtsetquiz22 4
				}
				if ( qp(cnt) == 23 ) {
					txtsetquiz23 4
				}
				if ( qp(cnt) == 24 ) {
					txtsetquiz24 4
				}
				if ( qp(cnt) == 25 ) {
					txtsetquiz25 4
				}
				if ( qp(cnt) == 26 ) {
					txtsetquiz26 4
				}
				if ( qp(cnt) == 27 ) {
					txtsetquiz27 4
				}
				if ( qp(cnt) == 28 ) {
					txtsetquiz28 4
				}
				if ( qp(cnt) == 29 ) {
					txtsetquiz29 4
				}
				if ( qp(cnt) == 30 ) {
					txtsetquiz30 4
				}
				if ( qp(cnt) == 31 ) {
					txtsetquiz31 4
				}
				if ( qp(cnt) == 32 ) {
					txtsetquiz32 4
				}
				if ( qp(cnt) == 33 ) {
					txtsetquiz33 4
				}
				if ( qp(cnt) == 34 ) {
					txtsetquiz34 4
				}
				repeat 4
					promptAdd s(cnt), key_select(cnt)
				loop
				val = promptx, prompty, 310, 0
				gosub *prompt_key
				if ( rtval == seitou ) {
					snd SOUNDLIST_ENC
					seikai++
				}
				else {
					snd SOUNDLIST_QUIZBAD
				}
				msg_newline
			loop
			endsec = timeGetTime() / 1000 - startsec
			snd SOUNDLIST_GONG
			gosub *music_play
			gdata(GDATA_FLAG_MELGET_SCORE) = limit(60 - endsec, 0, 60) * seikai
			chatMore lang("お疲れ！経過時間は" + endsec + "秒、正解数は" + seikai + "だね。", "Cheers for good work! Elapsed time " + endsec + " seconds, the number of correct answers was " + seikai + ".")
			seikai = 0
			endsec = 0
			startsec = 0
			if ( gdata(GDATA_FLAG_MELGET_SCORE) > gdata(GDATA_FLAG_MELGET_HISCORE) ) {
				chatMore lang("最終スコアは" + gdata(GDATA_FLAG_MELGET_SCORE) + "点だよ！今までの最高記録は" + gdata(GDATA_FLAG_MELGET_HISCORE) + "点だから…新記録だね！おめでとう！", "Your score is " + gdata(GDATA_FLAG_MELGET_SCORE) + " points! It's a new record!!")
				gdata(GDATA_FLAG_MELGET_HISCORE) = gdata(GDATA_FLAG_MELGET_SCORE)
			}
			else {
				chatMore lang("最終スコアは" + gdata(GDATA_FLAG_MELGET_SCORE) + "点！…うーん、最高記録である" + gdata(GDATA_FLAG_MELGET_HISCORE) + "点は更新できなかったか。また挑戦してね〜。", "Your score is " + gdata(GDATA_FLAG_MELGET_SCORE) + " points. Next time, try to beat the record of " + gdata(GDATA_FLAG_MELGET_HISCORE) + " points!")
			}
			if ( gdata(GDATA_FLAG_MELGET_SCORE) >= 200 ) {
				chatMore lang("200点超えたから、一応努力賞出しておくね。一応、ね。", "Since you scored at least 200 points, I'll give you an Effort Award.")
				flt
				itemcreate -1, ITEM_ID_PLATINUM_COIN, cdata(CDATA_X, CHARA_PLAYER), cdata(CDATA_Y, CHARA_PLAYER), 2
				txt_questitem
			}
			gosub *music_play
			autosave = 1 * (gdata(GDATA_AREA) != AREA_SHOW_HOUSE)
			goto *chat_end
		}
		chatList 0, lang("さようなら", "Goodbye.")
		if ( cdata(CDATA_GOLD, CHARA_PLAYER) >= 10000 ) {
			chatList 1, lang("他冒険者の所持品(10000gp)", "Tell me of some adventurer's inventory. (10000gp)")
		}
		if ( cdata(CDATA_GOLD, CHARA_PLAYER) >= 500 ) {
			chatList 2, lang("今月の豆知識(500gp)", "Tell me your monthly knowledge. (500gp)")
		}
		buff = lang("あー、色々しゃべっちゃいたくてウズウズするなぁ！どうしようかなー。何を教えちゃおうかなー？", "Oh, I want to talk about so many things, I'm so excited! What should I do? What should I teach?")
		gosub *chat_select
		if ( chatval == 1 ) {
			chatMore lang("うーん…全部教えるのもつまらないし、キミ以外の冒険者が現在持っている固定アーティファクトや貴重品を「ひとつまで」教えてあげる。メモの準備はいい？一度しか言わないよ。", "Well, teaching you everything would be boring, rather I'll tell you about fixed artifacts and valuable items that other adventurers have. Ready to take notes? I'll only say it once.")
			cdata(CDATA_GOLD, CHARA_PLAYER) -= 10000
			snd SOUNDLIST_PAYGOLD1
			repeat MAX_CHARA_ADVENTURER
				rc = cnt
				if ( cdata(CDATA_ROLE, rc) != ROLE_ADVENTURER ) {
					continue
				}
				f = 0
				inv_getheader rc
				repeat 20
					ci = invhead + rnd(invrange)
					if ( inv(INV_ITEM_NUM, ci) == 0 ) {
						continue
					}
					if ( inv(INV_ITEM_QUALITY, ci) != FIX_QUALITY_UNIQUE & ibit(ITEM_BIT_PRECIOUS, ci) != 1 ) {
						continue
					}
					if ( inv(INV_ITEM_NUM, ci) != 0 ) {
						if ( cdata(CDATA_AI_ITEM, rc) == ci ) {
							cdata(CDATA_AI_ITEM, rc) = 0
						}
						inv(INV_ITEM_NUM, ci) = 0
						f = 1
						valn = itemname(ci)
						break
					}
				loop
				if ( f == 0 ) {
					chatMore lang(cdatan(CDATAN_AKA, rc) + " " + cdatan(CDATAN_NAME, rc) + " は貴重品を持っていないよ。", cdatan(CDATAN_AKA, rc) + " " + cdatan(CDATAN_NAME, rc) + " has no valuable items.")
				}
				if ( f == 1 ) {
					chatMore lang(cdatan(CDATAN_AKA, rc) + " " + cdatan(CDATAN_NAME, rc) + " は" + valn + "を持っているよ。", cdatan(CDATAN_AKA, rc) + " " + cdatan(CDATAN_NAME, rc) + " has " + valn + ".")
				}
			loop
			autosave = 1 * (gdata(GDATA_AREA) != AREA_SHOW_HOUSE)
			goto *chat_end
		}
		if ( chatval == 2 ) {
			cdata(CDATA_GOLD, CHARA_PLAYER) -= 500
			snd SOUNDLIST_PAYGOLD1
			if ( gdata(GDATA_MONTH) == 1 ) {
				chatMore lang("私、チョコレートとか嫌いだから。だからバレンタインの中止を願ったんだけど、そしたら願いの女神が手作りチョコをよこしてきたの。もったいないから仕方なく食べたけど、願いの女神も色々と大変ね…。", "I hate things like chocolate. So I wished for Valentine's Day to be discontinued, then the Wish Goddess gave me some handmade chocolate. It would be a waste so I reluctantly ate it but... The Wish Goddess is also very troublesome.")
			}
			if ( gdata(GDATA_MONTH) == 2 ) {
				chatMore lang("とあるドラゴンハンターの攻撃は、ドラゴン類に対して１割ほど与えるダメージが多いの。ドラゴンにはドラゴンの攻撃が効果抜群…というわけではなくて、単純に強い殺意で力が入ってるんでしょうね。", "Sorry, this is untranslated sentence.")
			}
			if ( gdata(GDATA_MONTH) == 3 ) {
				chatMore lang("ザナンの実験施設の収容者リストを見ていて気がついたんだけど、全員の名前をつなげて読むと文章になるの。すごい偶然だと思わない？", "I was looking through the inmate list of the experimental facility in Xana, and when reading all the names it became a sentence. Don't you think that's too much of a coincidence?")
			}
			if ( gdata(GDATA_MONTH) == 4 ) {
				chatMore lang("中央神殿の神様はどれだけジュア狂なのかしら。目の前で癒しの女神に色々セクハラしようとしたけど、絶対に防衛されちゃうの。壁の向こうからでも察知して阻止するのよ？神様って怖い。", "Sorry, this is untranslated sentence.")
			}
			if ( gdata(GDATA_MONTH) == 5 ) {
				chatMore lang("天使たちの中には輝く羽ペンを所持している者がいるけれど、特定の街や施設に滞在している天使は絶対に羽ペンを持っていないのよ。", "Sorry, this is untranslated sentence.")
			}
			if ( gdata(GDATA_MONTH) == 6 ) {
				chatMore lang("カードが欲しくて砂漠の塔にいた神様に喧嘩売ったら、戦闘中に不幸の日が訪れたの。慌てて逃げ出したけど、それからしばらく大変だったなぁ。", "Sorry, this is untranslated sentence.")
			}
			if ( gdata(GDATA_MONTH) == 7 ) {
				chatMore lang("宇宙ミミズクは、撫でると気持ち悪いくらい喜ぶの。それも、仲が良くなれば良くなるほど激しくね…。", "Sorry, this is untranslated sentence.")
			}
			if ( gdata(GDATA_MONTH) == 8 ) {
				chatMore lang("栗を粗末にした者の前に現れる巨人は、栗をぶつけると大怪我を負うみたい。私もぶつけてみたけどすっごく痛がってたよ。", "Sorry, this is untranslated sentence.")
			}
			if ( gdata(GDATA_MONTH) == 9 ) {
				chatMore lang("錬金術士を名乗る人々は、栗を投げる際に必ず「うに」だと言い張るの。まぁだからと言って特に何か変わるわけでもないんだけど。", "Sorry, this is untranslated sentence.")
			}
			if ( gdata(GDATA_MONTH) == 10 ) {
				chatMore lang("宇宙に思いを馳せている誰かさんは、実は裏で老若男女問わず靴下収集を行っているの。せっかくだから私も靴下をアイテムと交換してもらったわ。", "Sorry, this is untranslated sentence.")
			}
			if ( gdata(GDATA_MONTH) == 11 ) {
				chatMore lang("丘の民の集落長は、あることないこと言いふらして気に入らない相手を社会的に抹殺しているの。４月馬鹿でもないのに不正確な情報をわざと流すなんて、情報屋として見過ごせないよ…！", "Sorry, this is untranslated sentence.")
			}
			if ( gdata(GDATA_MONTH) == 12 ) {
				chatMore lang("この前ツアープランナーのお姉さんを見かけたんだけど、数日で街から去って行ったわ。ツアーの下準備で絶えずあちこちを回っているみたいだから、運がいいとキミも会えるかもね。", "Sorry, this is untranslated sentence.")
			}
			goto *chat_end
		}
		goto *chat_end
	}
	if ( _switch_val == CREATURE_ID_MELUGAST_AO_I_THE_DIMENSION_DRIVER | _switch_sw ) {
		_switch_sw = 0
		if ( gdata(GDATA_AREA) == AREA_CHAOS_CRADLE ) {
			if ( gdata(GDATA_FLAG_MAIN) == 735 ) {
				chatMore lang("どうだ、次元アンカーの威力は？物理的な力では絶対に抜け出せないぞ。", "Sorry, this is untranslated sentence.")
				chatMore lang("こちらガベラだ。通信状況は良好のようだな。" + cdatan(CDATAN_NAME, CHARA_PLAYER) + "、あの怪物がテスカトリポカなのか？", "Sorry, this is untranslated sentence.")
				chatMore lang("えっ、違う？？まぁいい。ロスリアでの戦闘直後、急に心配になってな。こいつを飛ばして正解だった。", "Sorry, this is untranslated sentence.")
				chatList 1, lang("これなら勝てる！", "I appreciate it!")
				chatList 2, lang("無理だ、下がれ！", "This place is dangerous!")
				chatList 3, lang("A0-Iって何？", "What is A0-I?")
				buff = lang("奴の移動は封じた。畳みかけるぞ！", "I sealed his movements. Interrogate him!")
				gosub *chat_select
				if ( chatval == 1 ) {
					chatMore lang("ああ勝てるさ、俺たちなら！", "Yes, we can win!")
				}
				if ( chatval == 2 ) {
					chatMore lang("無理だのなんだの言ってたら科学は進歩しないんだよ！", "Sorry, this is untranslated sentence.")
				}
				if ( chatval == 3 ) {
					chatMore lang("よくぞ聞いてくれた。次元歪曲ユニットは勿論、重射撃装備、電子戦装備、増加装甲、追加推進装置、さらに自律戦闘通信機の特殊電波システム、イェルス超重力砲の小型改良版…束縛の悪魔との交戦データを参考に理論化した次元アンカー！その全てのオプションを実装したメルガストがA0-Iだ。これだけの同時装備を可能にしたのは生体ハードポイント理論からのデータ逆輸入によるところが大きく、俺の技術の集大成とも言える存在で特筆すべきは…おっと、解説している場合ではないな。", "Sorry, this is untranslated sentence.")
				}
				goto *chat_end
			}
			if ( gdata(GDATA_FLAG_MAIN) == 745 ) {
				chatMore lang("しぶといやつだな…。完全に無力化するのは難しいかもしれん。", "Pretty stubborn, huh?... Might prove difficult to perfectly disable it.")
				goto *chat_end
			}
			if ( gdata(GDATA_FLAG_MAIN) == 755 ) {
				chatMore lang("終わったようだな…なにもかも。", "It seems to be over... everything.")
				goto *chat_end
			}
		}
		goto *chat_end
	}
	if ( _switch_val == CREATURE_ID_BETHEL_THE_WHITE_HAWK | _switch_sw ) {
		_switch_sw = 0
		if ( gdata(GDATA_FLAG_MAIN) >= 760 ) {
			chatMore lang("ラーネイレ…。", "Larnneire...")
			goto *chat_end
		}
		if ( gdata(GDATA_AREA) == AREA_CHAOS_CRADLE ) {
			if ( gdata(GDATA_FLAG_MAIN) == 725 ) {
				chatMore lang("ふと胸騒ぎがして降りてみたが、まさか目と鼻の先にあったとは。60層はあるものだと思っていた。", "Sorry, this is untranslated sentence.")
				chatList 1, lang("助かる！", "I appreciate it!")
				chatList 2, lang("危ないよ！", "This place is dangerous!")
				chatList 3, lang("ラーネイレたちが探していたよ", "Larnneire was looking for you.")
				buff = lang("…あれが噂に聞く混沌の神か？" + cdatan(CDATAN_AKA, CHARA_PLAYER) + "、加勢するぞ。", "Sorry, this is untranslated sentence.")
				gosub *chat_select
				if ( chatval == 1 ) {
					chatMore lang("猫の手ならぬ、鷹の翼も借りたい、といったところか。", "Sorry, this is untranslated sentence.")
				}
				if ( chatval == 2 ) {
					chatMore lang("ふっ…危険は承知の上だ。私も今や冒険者の端くれだからな。", "Sorry, this is untranslated sentence.")
				}
				if ( chatval == 3 ) {
					chatMore lang("ラーネイレが？彼女には悪いが、こいつを片づけるまで辛抱してもらう！", "Sorry, this is untranslated sentence.")
				}
				goto *chat_end
			}
			if ( gdata(GDATA_FLAG_MAIN) == 735 ) {
				chatMore lang("今、奴が何かに拘束されたように見えたが…。", "Sorry, this is untranslated sentence.")
				goto *chat_end
			}
			if ( gdata(GDATA_FLAG_MAIN) == 745 ) {
				chatMore lang("いくら移動を封じたとはいえ、倒せないのでは…。", "Sorry, this is untranslated sentence.")
				goto *chat_end
			}
			if ( gdata(GDATA_FLAG_MAIN) == 755 ) {
				chatMore lang("あれが凶獣の能力か…。人間が受けたら即座に廃人だな。", "Sorry, this is untranslated sentence.")
				goto *chat_end
			}
			if ( gdata(GDATA_FLAG_MAIN) >= 660 ) {
				chatMore lang("神の間、決戦因子、か。どうにも胡散臭いものを感じる。進むのをためらうほどにな。", "Sorry, this is untranslated sentence."), strbye
				goto *chat_end
			}
			else {
				chatMore lang("君は…ひょっとして" + cdatan(CDATAN_AKA, CHARA_PLAYER) + "か？こんなところで知り合いに会うとは奇遇だな。", "Sorry, this is untranslated sentence.")
				chatMore lang("せめて昔の勘を取り戻すまで、私はこの階層で鍛錬するつもりだ。今でも力不足を感じるのに、あと何層あるのかわかったものじゃないからな。", "Sorry, this is untranslated sentence."), strbye
				gdata(GDATA_FLAG_MAIN) = 660
				goto *chat_end
			}
		}
		goto *chat_end
	}
	if ( _switch_val == CREATURE_ID_MAILE_THE_MARIONETTE_SHAMAN | _switch_sw ) {
		_switch_sw = 0
		chatList 0, lang("そんなものはない", "There is no such thing.")
		chatList 1, lang("最深攻略ネフィアの記憶", "Memory of the deepest Nefia.")
		chatList 2, lang("所属ギルドのこと", "Memory of belonging Guild.")
		chatList 3, lang("旅に出る前のこと", "Memory of before leaving on a journey.")
		chatList 4, lang("善の心・悪の心", "Conscience and malice.")
		chatList 5, lang("仲間との関係", "Relationship with ally.")
		chatList 6, lang("自分の技術と経験", "My skills and experience.")
		chatList 7, lang("仲間の技術と経験", "Ally skills and experience.")
		chatList 8, lang("仲間の営業技術", "Ally business feats.")
		chatList 9, lang("生きている武器の能力と経験", "Memory of living weapon.")
		buff = lang("さぁ、消したい記憶のことだけ念じるのです。貴方の頭からも、この世界からも、痕跡を残さず綺麗に消してあげましょう。", "Think the only thing of memory you want to erase. Also from your head, even from this world, I will clean off without leaving a trace.")
		gosub *chat_select
		if ( chatval >= 1 & chatval <= 4 ) {
			snd SOUNDLIST_CURSE2
		}
		if ( chatval == 1 ) {
			snd SOUNDLIST_WRITE1
			txtef COLOR_RED
			txt lang("[システム]原因不明のエラーによりglobaldata189の値が初期化されました。再計算を行います…。", "[System]By unknown error, globaldata189 has been initialized.")
			gdata(GDATA_DEEPEST_LEVEL) = gdata(GDATA_FLAG_MAIN) * 1 / 4 + 1
			txt_questupdate
			dmgsan CHARA_PLAYER, 100
			chatMore lang("これで、またひとつ…。", "With this, I'm one step closer...")
			autosave = 1 * (gdata(GDATA_AREA) != AREA_SHOW_HOUSE)
		}
		if ( chatval == 2 ) {
			snd SOUNDLIST_WRITE1
			txtef COLOR_RED
			txt lang("[システム]原因不明のエラーによりglobaldata263の値が初期化されました。", "[System]By unknown error, globaldata263 has been initialized.")
			txtef COLOR_RED
			txt lang("[システム]原因不明のエラーによりglobaldata264の値が初期化されました。", "[System]By unknown error, globaldata264 has been initialized.")
			txtef COLOR_RED
			txt lang("[システム]原因不明のエラーによりglobaldata265の値が初期化されました。", "[System]By unknown error, globaldata265 has been initialized.")
			txtef COLOR_RED
			txt lang("[システム]原因不明のエラーによりglobaldata266の値が初期化されました。", "[System]By unknown error, globaldata266 has been initialized.")
			txtef COLOR_RED
			txt lang("[システム]原因不明のエラーによりglobaldata269の値が初期化されました。", "[System]By unknown error, globaldata269 has been initialized.")
			txtef COLOR_RED
			txt lang("[システム]原因不明のエラーによりglobaldata469の値が初期化されました。", "[System]By unknown error, globaldata469 has been initialized.")
			txtef COLOR_RED
			txt lang("[システム]原因不明のエラーによりglobaldata470の値が初期化されました。", "[System]By unknown error, globaldata470 has been initialized.")
			txtef COLOR_RED
			txt lang("[システム]原因不明のエラーによりglobaldata128の値が初期化されました。", "[System]By unknown error, globaldata128 has been initialized.")
			gdata(GDATA_RANK_GUILD) = 1000000
			gdata(GDATA_FLAG_GUILD_THIEF) = 0
			gdata(GDATA_FLAG_GUILD_FIGHTER) = 0
			gdata(GDATA_FLAG_GUILD_MAGE) = 0
			gdata(GDATA_FLAG_GUILD_MAGE_NORMA) = 0
			gdata(GDATA_FLAG_GUILD_THIEF_NORMA) = 0
			gdata(GDATA_FLAG_SUB_GUILD_MAGE) = 0
			gdata(GDATA_FLAG_SUB_GUILD_THIEF) = 0
			gdata(GDATA_FLAG_SUB_GUILD_FIGHTER) = 0
			gdata(GDATA_FLAG_SUB_FIGHTER_1) = 0
			gdata(GDATA_FLAG_SUB_MAGE_1) = 0
			gdata(GDATA_FLAG_SUB_THIEF_1) = 0
			txt_questupdate
			dmgsan CHARA_PLAYER, 100
			chatMore lang("これで、またひとつ…。", "With this, I'm one step closer...")
			autosave = 1 * (gdata(GDATA_AREA) != AREA_SHOW_HOUSE)
		}
		if ( chatval == 3 ) {
			txtef COLOR_RED
			txt lang("[システム]原因不明のエラーによりglobalpcdata161の値が初期化されました。", "[System]By unknown error, globalpcdata161 has been initialized.")
			txtef COLOR_RED
			txt lang("[システム]原因不明のエラーによりglobalpcdata162の値が初期化されました。", "[System]By unknown error, globalpcdata162 has been initialized.")
			cdata(CDATA_BACKGROUND_PART_A1, CHARA_PLAYER) = 5
			cdata(CDATA_BACKGROUND_PART_A2, CHARA_PLAYER) = 29
			dmgsan CHARA_PLAYER, 100
			chatMore lang("これで、またひとつ…。", "With this, I'm one step closer...")
			autosave = 1 * (gdata(GDATA_AREA) != AREA_SHOW_HOUSE)
		}
		if ( chatval == 4 ) {
			snd SOUNDLIST_WRITE1
			txtef COLOR_RED
			txt lang("[システム]原因不明のエラーによりglobaltrait162の値が初期化されました。", "[System]By unknown error, globaltdata162 has been initialized.")
			txtef COLOR_RED
			txt lang("[システム]原因不明のエラーによりglobaltrait169の値が初期化されました。", "[System]By unknown error, globaltdata169 has been initialized.")
			trait(TRAIT_OTHER_WICKED) = 0
			trait(TRAIT_OTHER_SAINT) = 0
			dmgsan CHARA_PLAYER, 100
			chatMore lang("これで、またひとつ…。", "With this, I'm one step closer...")
			autosave = 1 * (gdata(GDATA_AREA) != AREA_SHOW_HOUSE)
		}
		if ( chatval == 5 ) {
			allyctrl = 7
			gosub *com_ally
			if ( stat != (-1) ) {
				rc = stat
				snd SOUNDLIST_CURSE2
				txtef COLOR_RED
				txt lang("[システム]原因不明のエラーによりglobalrcdata17の値が初期化されました。", "[System]By unknown error, globalrdata17 has been initialized.")
				txtef COLOR_RED
				txt lang("[システム]原因不明のエラーによりglobalrcdata169の値が初期化されました。", "[System]By unknown error, globalrdata169 has been initialized.")
				txtef COLOR_RED
				txt lang("[システム]原因不明のエラーによりglobalrcbit961が削除されました。", "[System]By unknown error, globalbdata961 has been initialized.")
				cdata(CDATA_IMPRESSION, rc) = 50
				cdata(CDATA_MASTER_SERVANT, rc) = 50
				cbitmod CHARA_BIT_MARRIED, rc, 0
				if ( cdata(CDATA_EXIST, rc) == CHAR_STATE_ALIVE ) {
					txtef COLOR_PURPLE
					txt lang(name(rc) + "は、初めて会ったような顔であなたを見ている…。", name(tc) + " is looking at you for the first time met such a face...")
				}
				dmgsan CHARA_PLAYER, 100
				chatMore lang("これで、またひとつ…。", "With this, I'm one step closer...")
				autosave = 1 * (gdata(GDATA_AREA) != AREA_SHOW_HOUSE)
			}
		}
		if ( chatval == 6 ) {
			snd SOUNDLIST_CURSE2
			txtef COLOR_RED
			txt lang("[システム]原因不明のエラーによりglobalpcdata198の値が再計算されました。", "[System]By unknown error, globaltdata162 has been initialized.")
			txtef COLOR_RED
			txt lang("[システム]原因不明のエラーによりglobalpcdata199の値が再計算されました。", "[System]By unknown error, globaltdata169 has been initialized.")
			r1 = CHARA_PLAYER
			gosub *calcMaileINITService
			cdata(CDATA_INIT_ATTR, CHARA_PLAYER) = sorg(SKILL_ATTR_STR, CHARA_PLAYER) + sorg(SKILL_ATTR_CON, CHARA_PLAYER) + sorg(SKILL_ATTR_DEX, CHARA_PLAYER) + sorg(SKILL_ATTR_PER, CHARA_PLAYER) + sorg(SKILL_ATTR_LER, CHARA_PLAYER) + sorg(SKILL_ATTR_WIL, CHARA_PLAYER) + sorg(SKILL_ATTR_MAG, CHARA_PLAYER) + sorg(SKILL_ATTR_CHA, CHARA_PLAYER)
			cdata(CDATA_INIT_SPEED, CHARA_PLAYER) = sorg(SKILL_ATTR_SPD, CHARA_PLAYER)
			r1 = CHARA_PLAYER
			gosub *charaRefresh
			dmgsan CHARA_PLAYER, 100
			chatMore lang("これで、またひとつ…。", "With this, I'm one step closer...")
		}
		if ( chatval == 7 ) {
			allyctrl = 7
			gosub *com_ally
			if ( stat != (-1) ) {
				rc = stat
				snd SOUNDLIST_CURSE2
				txtef COLOR_RED
				txt lang("[システム]原因不明のエラーによりglobalcdata198の値が再計算されました。", "[System]By unknown error, globaltdata162 has been initialized.")
				txtef COLOR_RED
				txt lang("[システム]原因不明のエラーによりglobalcdata199の値が再計算されました。", "[System]By unknown error, globaltdata169 has been initialized.")
				r1 = rc
				gosub *calcMaileINITService
				cdata(CDATA_INIT_ATTR, rc) = sorg(SKILL_ATTR_STR, rc) + sorg(SKILL_ATTR_CON, rc) + sorg(SKILL_ATTR_DEX, rc) + sorg(SKILL_ATTR_PER, rc) + sorg(SKILL_ATTR_LER, rc) + sorg(SKILL_ATTR_WIL, rc) + sorg(SKILL_ATTR_MAG, rc) + sorg(SKILL_ATTR_CHA, rc)
				cdata(CDATA_INIT_SPEED, rc) = sorg(SKILL_ATTR_SPD, rc)
				r1 = rc
				gosub *charaRefresh
				dmgsan rc, 100
				chatMore lang("これで、またひとつ…。", "With this, I'm one step closer...")
			}
		}
		if ( chatval == 8 ) {
			allyctrl = 7
			gosub *com_ally
			if ( stat != (-1) ) {
				rc = stat
				snd SOUNDLIST_CURSE2
				txtef COLOR_RED
				txt lang("[システム]原因不明のエラーによりglobalcdata989の値が初期化されました。", "[System]By unknown error, globalrdata989 has been initialized.")
				txtef COLOR_RED
				txt lang("[システム]原因不明のエラーによりglobalcdata990の値が初期化されました。", "[System]By unknown error, globalrdata990 has been initialized.")
				txtef COLOR_RED
				txt lang("[システム]原因不明のエラーによりglobalcdata991の値が初期化されました。", "[System]By unknown error, globalrdata991 has been initialized.")
				txtef COLOR_RED
				txt lang("[システム]原因不明のエラーによりglobalcdata992の値が初期化されました。", "[System]By unknown error, globalrdata993 has been initialized.")
				txtef COLOR_RED
				txt lang("[システム]原因不明のエラーによりglobalcdata994の値が初期化されました。", "[System]By unknown error, globalrdata994 has been initialized.")
				if ( cbit(CHARA_BIT_SHOP_ELEGANCE, rc) ) {
					skillmod SKILL_ATTR_CHA, rc, -30000
				}
				cbitmod CHARA_BIT_SHOP_ELEGANCE, rc, 0
				cbitmod CHARA_BIT_SHOP_AESTHETIC_SENSE, rc, 0
				cbitmod CHARA_BIT_SHOP_SALES_ROUTE, rc, 0
				cbitmod CHARA_BIT_SHOP_STRONG_ALLY, rc, 0
				cbitmod CHARA_BIT_SHOP_BUSINESS_SMILE, rc, 0
				cdata(CDATA_SALES_FEATS, rc) = 0
				r1 = rc
				gosub *charaRefresh
				dmgsan rc, 100
				chatMore lang("これで、またひとつ…。", "With this, I'm one step closer...")
			}
		}
		if ( chatval == 9 ) {
			invsubroutine = 1
			invctrl = 23, 20
			snd SOUNDLIST_INV
			gosub *com_inventory
			f = stat
			if ( ibit(ITEM_BIT_NO_DROP, ci) ) {
				snd SOUNDLIST_FAIL1
				txt_nodrop
				f = 0
			}
			if ( f == 1 ) {
				snd SOUNDLIST_CURSE2
				txtef COLOR_RED
				txt lang("[システム]原因不明のエラーによりglobalinvdata25の値が初期化されました。", "[System]By unknown error, globalinvdata25 has been initialized.")
				txtef COLOR_RED
				txt lang("[システム]原因不明のエラーによりglobalinvdata26の値が初期化されました。", "[System]By unknown error, globalinvdata26 has been initialized.")
				inv(INV_ITEM_EXP, ci) = 0
				inv(INV_ITEM_GROWTH, ci) = 1
				if ( inv(INV_ITEM_LEVEL, ci) > 0 ) {
					inv(INV_ITEM_LEVEL, ci) = 0
				}
				repeat RANGE_INV_ITEM_ENCHANT
					inv(STARTING_INV_ITEM_ENCHANT + cnt * 2 + 1, ci) = 0
					inv(STARTING_INV_ITEM_ENCHANT + cnt * 2, ci) = 0
				loop
				r1 = CHARA_PLAYER
				gosub *charaRefresh
				chatMore lang("これで、またひとつ…。", "With this, I'm one step closer...")
			}
		}
		goto *chat_end
	}
	if ( _switch_val == CREATURE_ID_HALION_THE_EXTREMIST | _switch_sw ) {
		_switch_sw = 0
		kaiwa = rnd(5)
		if ( kaiwa == 0 ) {
			chatMore lang("旅の途中、「憎しみの連鎖を断つために、何をされてもやり返さずに許しなさい」とかしつこく説教してくる善人がいてな。頭にきて小石を投げつけたら、罵倒されまくった挙句ガードを呼ばれたんだが、これは一体どういうことなんだ。全然許されなかったんだが。", "Huh."), strbye
		}
		if ( kaiwa == 1 ) {
			chatMore lang("実を言えば、俺は森が災厄の根源という説を最初は信じていた。エーテルの風が病を招くのも事実だったからだ。ならば森に住む我々が迫害されるのも仕方がないと思い、理不尽な仕打ちにも耐えてきた。ずっと、ずっとな。だからこそ真相を知った時…エレアを悪者にするために流されたデマだと知った時、俺ははらわたが煮えくり返る思いだった…！", "Woah!"), strbye
		}
		if ( kaiwa == 2 ) {
			chatMore lang("「来る者は拒まず」と言うが、何も考えずに受け入れるというのも考え物だな…。規模が大きくなりすぎて、構成員ひとりひとりの実態が把握できたもんじゃない。", "Sorry, this is untranslated sentence."), strbye
		}
		if ( kaiwa == 3 ) {
			chatMore lang("決起を始めた頃、罪悪感や同情から支援を申し出てくる者はそれなりにいたんだ。世間では我関せずといった態度の者が多かったが、支援者も一定数いるということを知って俺は感動した！まぁ、台無しになったけどな…。", "Sorry, this is untranslated sentence."), strbye
		}
		if ( kaiwa == 4 ) {
			chatMore lang("このルオザは、戦争で火をつけられて滅んだ土地らしいな。親近感がないとは言わないが、エレアは別にザナンと戦争をしていたわけではないからな…。殴り合って怪我するのと、一方的に殴られて怪我するくらいの違いがあるぞ。", "Sorry, this is untranslated sentence."), strbye
		}
		goto *chat_end
	}
	if ( _switch_val == CREATURE_ID_SHURAIDA_THE_EXPERT_MERC | _switch_sw ) {
		_switch_sw = 0
		if ( gdata(GDATA_AREA) == AREA_CHAOS_CRADLE ) {
			if ( gdata(GDATA_FLAG_MAIN) >= 610 ) {
				chatMore lang("これ以上の階層は正直厳しい。もう少し探索したら我々は撤退する予定だ。", "Huh."), strbye
				goto *chat_end
			}
			if ( gdata(GDATA_FLAG_MAIN) == 605 ) {
				chatMore lang("お前は…よくここまで来れたな。こちらは特に腕の立つメンバーを揃えてきたが、火力が全く足りない。ボランティアで、報酬も出ないので金も足りない。", "Huh."), strbye
				gdata(GDATA_FLAG_MAIN) = 610
				goto *chat_end
			}
			goto *chat_end
		}
		if ( gdata(GDATA_FLAG_SUB_REGULUS_KIKKASU) >= 1000 ) {
			if ( gdata(GDATA_LEVEL) == 60 ) {
				chatMore lang("うちの傭兵たちは戦争に加担しないことにしている。だが傭兵団の維持にはそれなりに金がかかる…モンスター討伐依頼は稼ぎどころってわけだ。", "Our mercenary group has decided not to support the war. But maintaining a group of mercenaries requires money... So we will still take requests for the elimination of monsters.")
				goto *chat_end
			}
		}
		if ( gdata(GDATA_FLAG_SUB_REGULUS_KIKKASU) == 100 ) {
			if ( gdata(GDATA_LEVEL) == 60 ) {
				chatMore lang("お疲れ様、と言っておこうか。冒険者をよこしてもらったのは正解だった。俺たちだけでは戦力が足りなかっただろう。", "Good work out there. I'm glad we brought in an adventurer. We wouldn't have been able to defeat that thing by ourselves.")
				chatMore lang("俺たち傭兵は、残党の処理と地域一帯の消毒までが任務だ。お前はもう戻って報酬を貰うといい。", "Our mercenary group will take care of getting rid of the leftovers and sterilizing the area. You should head back and get your reward.")
				goto *chat_end
			}
		}
		if ( gdata(GDATA_FLAG_SUB_REGULUS_KIKKASU) == 4 ) {
			if ( gdata(GDATA_LEVEL) == 100 ) {
				chatMore lang("悪魔一体一体がこの程度の力を持つとすると…別働隊が心配だな。上手くやってくれているといいが。", "If a single demon can have that much power... I'm worried about the other teams. I hope they're doing well.")
				gdata(GDATA_FLAG_SUB_REGULUS_KIKKASU) = 5
				goto *chat_end
			}
		}
		if ( gdata(GDATA_FLAG_SUB_REGULUS_KIKKASU) == 3 ) {
			if ( gdata(GDATA_LEVEL) == 100 ) {
				chatMore lang("…ひどい有様だ。首都が近く、小さいながらも賑やかな街だったと聞くが。", "...This is terrible. Even with the capital so close, I heard this was a small but lively town.")
				chatMore lang("物音から察するに相当数のアンデッドが徘徊しているようだ。物陰には気をつけろ。細菌の影響は…薬が効いているようだ。今のところ粘膜からの出血は最低限に抑えられているが、ダメージが蓄積すればどうなるかわからん。", "From what I can hear, it seems there's a large number of undead walking about. Be careful of the shadows. As for the bacteria's influence... Well, the medicine appears to be working. The bleeding has been kept to a minimum, but I don't know what will happen if we stay here too long.")
				chatMore lang("地の利だけじゃない。敵の物量・耐久性からも考えて持久戦は不利だ。お前の制圧能力にもよるが、ある程度片づけたら切り込んだほうが得策だろう。", "Given our enemy, a prolonged fight is not to our advantage. It all depends on you, but putting the demon down quickly would be best in my opinion.")
				chatMore lang("行くぞ、作戦開始だ。", "Let's go. Begin the operation.")
				gdata(GDATA_FLAG_SUB_REGULUS_KIKKASU) = 4
				goto *chat_end
			}
		}
		if ( gdata(GDATA_FLAG_SUB_REGULUS_KIKKASU) > 0 ) {
			if ( gdata(GDATA_FLAG_SUB_REGULUS_KIKKASU) < 100 ) {
				if ( gdata(GDATA_LEVEL) == 60 ) {
					if ( gdata(GDATA_FLAG_SUB_REGULUS_KIKKASU) == 2 ) {
						chatMore lang("お前がパルミアから寄越された冒険者だな。", "You must be the adventurer sent by Palmia.")
						chatMore lang("今回のターゲットは魔力を用いて細菌を制御する悪魔だ。制御範囲外では毒性が大きく落ちるようだな。とは言え感染力は侮れない。", "Our target is a demon that controls bacteria via magical means. The toxicity seems to decrease tremendously once out of his area of control. Even so, we can't take this lightly.")
						chatMore lang("我々が使う小型艇に消毒装置を用意してもらった。つまり、単なる移動手段ではなく感染拡大を防止する役割も持つわけだ。敵陣に直接乗りつけて破壊されるわけにはいかない。", "I've prepared equipment to sterilize the small boat we'll be using. In other words, we'll be able to prevent bringing any infections back with us. Now, we can't just advance directly to the enemy.")
						chatMore lang("ツアーコンダクターの情報によると、付近の鍾乳洞が街の井戸に繋がっているらしい。そこから突入し、ターゲットを討ち取る算段だ。俺の仲間は全員小型艇に乗り込んで待機している。いつでも出撃可能だ。", "According to the tour guide's information, the nearby limestone caves lead to the town's well. We'll enter from there. The rest of the group are waiting on the boat we'll be taking. We can leave whenever you're ready.")
					}
					chatList 0, lang("ちょっと待って", "Hold on.")
					chatList 1, lang("大丈夫", "Let's do it.")
					buff = lang("準備はいいか？", "Ready to go?")
					gosub *chat_select
					if ( gdata(GDATA_FLAG_SUB_REGULUS_KIKKASU) < 3 ) {
						gdata(GDATA_FLAG_SUB_REGULUS_KIKKASU) = 3
					}
					if ( chatval == 1 ) {
						if ( gdata(GDATA_FLAG_SUB_REGULUS_KIKKASU) == 3 ) {
							chatMore lang("報告を見る限り、毒や出血といった症状が予想される。これを飲んでおけ、ザナンから提供してもらった薬だ。あくまで症状を緩和するためのものだがな。", "From our reports, we can expect symptoms to include bleeding and poisoning. You can drink this medicine we received from Zanan which will treat the symptoms.")
						}
						snd SOUNDLIST_DRINK1
						if ( gdata(GDATA_FLAG_SUB_REGULUS_KIKKASU) == 3 ) {
							chatMore lang("…よし！着いてこい。", "...Alright! Let's head out.")
						}
						if ( gdata(GDATA_FLAG_DUEL_TARGET) > 0 ) {
							snd SOUNDLIST_FAIL1
							txt_duel2
							goto *chat_end
						}
						mapidou = 100
						gdata(GDATA_TELEPORT_AREA) = AREA_DOCK
						gdata(GDATA_TELEPORT_LEVEL) = 100
						levelexitby = 2
						gdata(GDATA_LEVEL_START_ON) = 7
						mapstartx = 5
						mapstarty = 52
						dbg_skipevent = 1
						gdata(GDATA_HOUR) += 2
						gosub *advance_hour
						dbg_skipevent = 0
						chatteleport = 1
						goto *chat_end
					}
					else {
						chatMore lang("急げよ。ターゲットが移動してからでは遅いからな。", "Be quick. Our target may leave if we're too slow.")
						goto *chat_end
					}
					goto *chat_end
				}
			}
		}
		goto *chat_end
	}
	if ( _switch_val == CREATURE_ID_MANYTIA_THE_ADVENTURE_MERCHANT | _switch_sw ) {
		_switch_sw = 0
		if ( cdata(CDATA_GOLD, CHARA_PLAYER) <= 99999 ) {
			chatMore lang("10万ぽっちも持っていないんですかぁ…。特に喋ることはないです。", "You don't even have 100,000gp... I have no business with you.")
			goto *chat_end
		}
		if ( gdata(GDATA_AREA) == AREA_WAR_GROUND ) {
			if ( gdata(GDATA_FLAG_SUB_MANYTIA_THE_ADVENTURE_MERCHANT) == 3 ) {
				chatMore lang("「昔々、ネフィアが生まれるよりも昔のお話。神々は戦争でマナが乱れた大陸を、危険なのでイルヴァから隔離し結界を張ることにしました」", "Sorry, this is untranslated sentence.")
				chatMore lang("「神々は大陸に住んでいた人々に移住を勧め、ほとんどの人がそれに従いました。しかし、丘の民は違いました。愛着のある丘に断固として残ろうとする者と、惜しみながらも丘を離れようとする者にわかれたのです」", "Sorry, this is untranslated sentence.")
				chatMore lang("「争いと迷いの末に、私達のご先祖様は新たな技術と素材を求め別大陸に渡ることを選びました。別大陸に渡ったご先祖様が後ろを振り返ると、大陸が光に包まれて空へと昇っていくところでした」", "Sorry, this is untranslated sentence.")
				chatMore lang("「あなたが空を見上げたなら思い出しなさい。あの空のどこかに始まりの丘…ルストールがあり、今もなお丘の民がそこで暮らしているかもしれないことを」", "Sorry, this is untranslated sentence.")
				chatMore lang("…伝説どおりだったとは思いませんでしたぁ。ロストイルヴァは本当にあったんだ！ルストールもまだ残っているんですかねぇ？", "Sorry, this is untranslated sentence.")
				gdata(GDATA_FLAG_SUB_MANYTIA_THE_ADVENTURE_MERCHANT) = 4
				goto *chat_end
			}
			chatList 0, lang("別に…", "Nothing in particular...")
			chatList 1, lang("機械のマニ", "Mani of Machine")
			chatList 2, lang("風のルルウィ", "Lulwy of Wind")
			chatList 3, lang("元素のイツパロトル", "Itzpalt of Element")
			chatList 4, lang("幸運のエヘカトル", "Ehekatl of Luck")
			chatList 5, lang("地のオパートス", "Opatos of Earth")
			chatList 6, lang("癒しのジュア", "Jure of Healing")
			chatList 7, lang("収穫のクミロミ", "Kumiromi of Harvest")
			chatList 8, lang("富のヤカテクト", "Yacatect of Wealth")
			buff = lang("各神のグッズはいかがですかぁ？どれも１０万ポッキリ！お得ですよぉ。", "Sorry, this is untranslated sentence.")
			gosub *chat_select
			if ( chatval == 0 ) {
				chatMore lang("またまたぁ…そんなつれないこと言っちゃってぇ。余ってるでしょう？お金。", "Sorry, this is untranslated sentence.")
				goto *chat_end
			}
			if ( chatval > 0 ) {
				dbid = 0
				if ( chatval == 1 ) {
					dbid = ITEM_ID_MANIS_ALARM_CLOCK
				}
				if ( chatval == 2 ) {
					dbid = ITEM_ID_LULWYS_PHOTO_COLLECTION
				}
				if ( chatval == 3 ) {
					dbid = ITEM_ID_ITZPALTS_SCULPTURE
				}
				if ( chatval == 4 ) {
					dbid = ITEM_ID_PAINTING_OF_EHEKATL_AND_SWORDFISH
				}
				if ( chatval == 5 ) {
					dbid = ITEM_ID_DOWSING_OPATOS
				}
				if ( chatval == 6 ) {
					dbid = ITEM_ID_JURES_BODY_PILLOW
				}
				if ( chatval == 7 ) {
					dbid = ITEM_ID_KUMIROMI_GURUMI
				}
				if ( chatval == 8 ) {
					dbid = ITEM_ID_YACATECTS_BANK
				}
				if ( dbid > 1 ) {
					snd SOUNDLIST_PAYGOLD1
					cdata(CDATA_GOLD, CHARA_PLAYER) -= 100000
					flt
					itemcreate -1, dbid, cdata(CDATA_X, CHARA_PLAYER), cdata(CDATA_Y, CHARA_PLAYER), 0
					inv(INV_ITEM_STATUS, ci) = ITEM_STATUS_NORMAL
					txt_questitem
					chatMore lang("お客さんもお目が高いですねぇ。うへへ…毎度ありですぅ。", "Thank you for your purchase!")
					dbid = 0
				}
			}
			goto *chat_end
		}
		if ( gdata(GDATA_AREA) == AREA_CHAOS_CRADLE ) {
			if ( gdata(GDATA_FLAG_MAIN) >= 560 ) {
				if ( gdata(GDATA_FLAG_SUB_MANYTIA_THE_ADVENTURE_MERCHANT) >= 3 ) {
					chatMore lang("本当はもっと売りたかったんですけど…。カギだけじゃなく私の靴下もつけるって条件で、前のお客さんが１ダースずつ買っていっちゃってですねぇ。もう在庫がないんです。こんなに捌けるなんて大誤算ですよぉ。", "Actually I wanted more to sell goods. However, since the previous customers bought one dozen, I'm no longer in stock.")
					goto *chat_end
				}
			}
			if ( gdata(GDATA_FLAG_MAIN) >= 560 ) {
				if ( gdata(GDATA_FLAG_SUB_MANYTIA_THE_ADVENTURE_MERCHANT) < 3 ) {
					chatList 0, lang("別に…", "Nothing in particular...")
					chatList 1, lang("もう片方も買いたい(99999gp)", "I want the other goods (99999gp)")
					buff = lang("うん？まだ何か御用ですかぁ？", "Yeah? Do you still need something?")
					gosub *chat_select
					if ( chatval == 1 ) {
						if ( gdata(GDATA_FLAG_SUB_MANYTIA_THE_ADVENTURE_MERCHANT) == 2 ) {
							flt
							itemcreate -1, ITEM_ID_POTION_SACRED_HEALER_JURE, cdata(CDATA_X, CHARA_PLAYER), cdata(CDATA_Y, CHARA_PLAYER), 3
							inv(INV_ITEM_STATUS, ci) = ITEM_STATUS_BLESSED
							flt
							itemcreate -1, ITEM_ID_SCROLL_HEALING_RAIN, cdata(CDATA_X, CHARA_PLAYER), cdata(CDATA_Y, CHARA_PLAYER), 5
							inv(INV_ITEM_STATUS, ci) = ITEM_STATUS_BLESSED
							flt
							itemcreate -1, ITEM_ID_SCROLL_MANA, cdata(CDATA_X, CHARA_PLAYER), cdata(CDATA_Y, CHARA_PLAYER), 5
							inv(INV_ITEM_STATUS, ci) = ITEM_STATUS_BLESSED
							flt
							itemcreate -1, ITEM_ID_FIRST_AID_KIT, cdata(CDATA_X, CHARA_PLAYER), cdata(CDATA_Y, CHARA_PLAYER), 2
							inv(INV_ITEM_STATUS, ci) = ITEM_STATUS_BLESSED
						}
						if ( gdata(GDATA_FLAG_SUB_MANYTIA_THE_ADVENTURE_MERCHANT) == 1 ) {
							flt
							itemcreate -1, ITEM_ID_SCROLL_VANISH_CURSE, cdata(CDATA_X, CHARA_PLAYER), cdata(CDATA_Y, CHARA_PLAYER), 3
							inv(INV_ITEM_STATUS, ci) = ITEM_STATUS_BLESSED
							flt
							itemcreate -1, ITEM_ID_SCROLL_RECHARGE, cdata(CDATA_X, CHARA_PLAYER), cdata(CDATA_Y, CHARA_PLAYER), 3
							inv(INV_ITEM_STATUS, ci) = ITEM_STATUS_BLESSED
							flt
							itemcreate -1, ITEM_ID_POTION_RESTORE_SPIRIT, cdata(CDATA_X, CHARA_PLAYER), cdata(CDATA_Y, CHARA_PLAYER), 3
							inv(INV_ITEM_STATUS, ci) = ITEM_STATUS_BLESSED
							flt
							itemcreate -1, ITEM_ID_POTION_RESTORE_BODY, cdata(CDATA_X, CHARA_PLAYER), cdata(CDATA_Y, CHARA_PLAYER), 3
							inv(INV_ITEM_STATUS, ci) = ITEM_STATUS_BLESSED
							flt
							itemcreate -1, ITEM_ID_ACIDPROOF_LIQUID, cdata(CDATA_X, CHARA_PLAYER), cdata(CDATA_Y, CHARA_PLAYER), 3
							inv(INV_ITEM_STATUS, ci) = ITEM_STATUS_BLESSED
							flt
							itemcreate -1, ITEM_ID_FIREPROOF_LIQUID, cdata(CDATA_X, CHARA_PLAYER), cdata(CDATA_Y, CHARA_PLAYER), 3
							inv(INV_ITEM_STATUS, ci) = ITEM_STATUS_BLESSED
							flt
							itemcreate -1, ITEM_ID_SPECIAL_AMMO_BOX, cdata(CDATA_X, CHARA_PLAYER), cdata(CDATA_Y, CHARA_PLAYER), 0
							inv(INV_ITEM_STATUS, ci) = ITEM_STATUS_BLESSED
						}
						snd SOUNDLIST_PAYGOLD1
						cdata(CDATA_GOLD, CHARA_PLAYER) -= 99999
						chatMore lang("へへへ…毎度ありですぅ。お客さん羽振りがいいですねぇ。", "Heeheehee... Thank you for your purchase! It's good to see repeat customers.")
						gdata(GDATA_FLAG_SUB_MANYTIA_THE_ADVENTURE_MERCHANT) = 3
						snd SOUNDLIST_COMPLETE1
						txt_questitem
						goto *chat_end
					}
					goto *chat_end
				}
			}
			if ( gdata(GDATA_FLAG_MAIN) <= 545 ) {
				chatMore lang("お客さん、この先に進みたいんですか？ここから先は危ないので封鎖してしまったんですよ。うちの商品を買ってくれるのなら、カギを渡してもいいですねぇ。悪い話じゃないと思うんですけど。", "Are you sure you want to proceed beyond this point? It's dangerous ahead so it was blockaded. If you're willing to buy some of my goods, I'll give you the key. Not a bad deal eh?")
				gdata(GDATA_FLAG_MAIN) = 550
				goto *chat_end
			}
			if ( gdata(GDATA_FLAG_MAIN) == 550 ) {
				chatList 0, lang("いらん", "I don't need it.")
				chatList 1, lang("回復アイテム詰め合わせ(99999gp)", "Recovery item assortment (99999gp)")
				chatList 2, lang("メンテナンス用品詰め合わせ(99999gp)", "Maintenance assortment (99999gp)")
				chatList 3, lang("殺してでもカギを奪い取る", "I'll take the key from your dead body.")
				buff = lang("さぁ、カギが欲しければ商品を買っていくしかないですよぉ。", "Well then, if you want the key there's no choice but to buy the goods.")
				gosub *chat_select
				if ( chatval == 3 ) {
					chatMore lang("殺されてでもカギは落とさないですねぇ。ちゃんと四次元ポケットに入れてるので。", "Even if you manage to kill me, I will not drop the key. The key is inside a 4-Dimensional Pocket.")
					goto *chat_end
				}
				if ( chatval == 1 | chatval == 2 ) {
					if ( chatval == 1 ) {
						flt
						itemcreate -1, ITEM_ID_POTION_SACRED_HEALER_JURE, cdata(CDATA_X, CHARA_PLAYER), cdata(CDATA_Y, CHARA_PLAYER), 3
						inv(INV_ITEM_STATUS, ci) = ITEM_STATUS_BLESSED
						flt
						itemcreate -1, ITEM_ID_SCROLL_HEALING_RAIN, cdata(CDATA_X, CHARA_PLAYER), cdata(CDATA_Y, CHARA_PLAYER), 5
						inv(INV_ITEM_STATUS, ci) = ITEM_STATUS_BLESSED
						flt
						itemcreate -1, ITEM_ID_SCROLL_MANA, cdata(CDATA_X, CHARA_PLAYER), cdata(CDATA_Y, CHARA_PLAYER), 5
						inv(INV_ITEM_STATUS, ci) = ITEM_STATUS_BLESSED
						flt
						itemcreate -1, ITEM_ID_FIRST_AID_KIT, cdata(CDATA_X, CHARA_PLAYER), cdata(CDATA_Y, CHARA_PLAYER), 2
						inv(INV_ITEM_STATUS, ci) = ITEM_STATUS_BLESSED
						gdata(GDATA_FLAG_SUB_MANYTIA_THE_ADVENTURE_MERCHANT) = 1
					}
					if ( chatval == 2 ) {
						flt
						itemcreate -1, ITEM_ID_SCROLL_VANISH_CURSE, cdata(CDATA_X, CHARA_PLAYER), cdata(CDATA_Y, CHARA_PLAYER), 3
						inv(INV_ITEM_STATUS, ci) = ITEM_STATUS_BLESSED
						flt
						itemcreate -1, ITEM_ID_SCROLL_RECHARGE, cdata(CDATA_X, CHARA_PLAYER), cdata(CDATA_Y, CHARA_PLAYER), 3
						inv(INV_ITEM_STATUS, ci) = ITEM_STATUS_BLESSED
						flt
						itemcreate -1, ITEM_ID_POTION_RESTORE_SPIRIT, cdata(CDATA_X, CHARA_PLAYER), cdata(CDATA_Y, CHARA_PLAYER), 3
						inv(INV_ITEM_STATUS, ci) = ITEM_STATUS_BLESSED
						flt
						itemcreate -1, ITEM_ID_POTION_RESTORE_BODY, cdata(CDATA_X, CHARA_PLAYER), cdata(CDATA_Y, CHARA_PLAYER), 3
						inv(INV_ITEM_STATUS, ci) = ITEM_STATUS_BLESSED
						flt
						itemcreate -1, ITEM_ID_ACIDPROOF_LIQUID, cdata(CDATA_X, CHARA_PLAYER), cdata(CDATA_Y, CHARA_PLAYER), 3
						inv(INV_ITEM_STATUS, ci) = ITEM_STATUS_BLESSED
						flt
						itemcreate -1, ITEM_ID_FIREPROOF_LIQUID, cdata(CDATA_X, CHARA_PLAYER), cdata(CDATA_Y, CHARA_PLAYER), 3
						inv(INV_ITEM_STATUS, ci) = ITEM_STATUS_BLESSED
						flt
						itemcreate -1, ITEM_ID_SPECIAL_AMMO_BOX, cdata(CDATA_X, CHARA_PLAYER), cdata(CDATA_Y, CHARA_PLAYER), 0
						inv(INV_ITEM_STATUS, ci) = ITEM_STATUS_BLESSED
						gdata(GDATA_FLAG_SUB_MANYTIA_THE_ADVENTURE_MERCHANT) = 2
					}
					snd SOUNDLIST_PAYGOLD1
					cdata(CDATA_GOLD, CHARA_PLAYER) -= 99999
					chatMore lang("はぁい、毎度ありです！じゃあカギも渡しておくですよ。", "Thank you for your purchase! Here's the key as well.")
					gdata(GDATA_FLAG_MAIN) = 560
					snd SOUNDLIST_COMPLETE1
					txt_questitem
					goto *chat_end
				}
			}
		}
		goto *chat_end
	}
	if ( _switch_val == CREATURE_ID_LANKATA_THE_LIGHTNING_OF_BLUE | _switch_sw ) {
		_switch_sw = 0
		if ( gdata(GDATA_AREA) == AREA_GUARDIAN_SHRINE ) {
			chatMore lang("父上は救助できましたが、身体を張って私を先に行かせた部下たちは、きっともう…。", "Sorry, this is untranslated sentence.")
			goto *chat_end
		}
		if ( gdata(GDATA_AREA) == AREA_AMUR_CAGE ) {
			if ( gdata(GDATA_FLAG_MAIN_CHAOS_CRADLE_34) == 0 ) {
				chatMore lang("父上…どこですか父上…。", "Father... Father where are you...")
			}
			if ( gdata(GDATA_FLAG_MAIN_CHAOS_CRADLE_34) != 0 ) {
				chatMore lang("私は…何ひとつ守れなかった…。任務も、父も、部下も、そして自分の命すらも。", "I couldn't protect anyone... I've failed my duty, my father, my subordinates and even myself...")
			}
			goto *chat_end
		}
		if ( gdata(GDATA_AREA) == AREA_CHAOS_CRADLE ) {
			if ( gdata(GDATA_FLAG_MAIN) == 575 | gdata(GDATA_FLAG_MAIN) == 580 | gdata(GDATA_FLAG_MAIN) == 585 ) {
				chatMore lang("そこの冒険者、止まってください。", "Hey you, adventurer, please stop.")
				chatList 0, lang("はく製を置いてこの世を去りなさい", "Sorry, this is untranslated sentence.")
				chatList 1, lang("嫌でも通してもらおう", "Even if it's unpleasant let's pass through.")
				chatList 2, lang("靴下くれないと暴れるよ", "If you don't give me a pair of socks I'll get mad!")
				chatList 3, lang("話せばわかる！", "I get it!")
				buff = lang("見てのとおり、ここは現在我々が占拠しています。速やかに武器を置いてこの階を去りなさい。", "As you can see, we now occupy this place. Put down your weapons and leave this place at once.")
				chatesc = 0
				gosub *chat_select
				if ( chatval == 2 ) {
					chatMore lang("！？貴方もですか…。", "Not you too!?")
				}
				if ( chatval >= 0 & chatval <= 2 ) {
					chatMore lang("我々が消耗しているとでも思っているのでしょうが…我々は物資を獲得したことにより、戦闘可能な状態に回復しています。一介の冒険者など敵ではありません。", "Sorry, this is untranslated sentence.")
				}
				if ( chatval == 3 ) {
					chatMore lang("警告はしました。これ以上の問答は無用です。", "I warned you. Any further dialogue is useless.")
				}
				gdata(GDATA_FLAG_MAIN) = 590
				txt lang(cdatan(CDATAN_NAME, tc) + "は自らにも言い聞かせるように叫んだ。", cdatan(CDATAN_NAME, tc) + " shouted as to remind herself.")
				txt lang("「総員、防衛を開始せよ！我々の使命を果たすため、その者を通すな。身体の動く限り戦いなさい！」", "Sorry, this is untranslated sentence.")
				snd SOUNDLIST_CHEER
				repeat MAX_CHARA_TOTAL
					if ( cdata(CDATA_EXIST, cnt) != CHAR_STATE_ALIVE ) {
						continue
					}
					if ( cdata(CDATA_RELATION, cnt) != (-3) ) {
						continue
					}
					addbuff cnt, BUFF_SPEED, 271 * 3 + 50, 75
					addbuff cnt, BUFF_HERO, 271 * 3 + 100, 75
					if ( cdata(CDATA_POWER_GAUGE, cnt) < 50 ) {
						cdata(CDATA_POWER_GAUGE, cnt) += 10
					}
				loop
				goto *chat_end
			}
			if ( gdata(GDATA_LEVEL) == 173 ) {
				chatMore lang("間に…合わなかった…。", "The time... has yet to come...")
				if ( gdata(GDATA_FLAG_MAIN_CHAOS_CRADLE_30) < 4 ) {
					chatMore lang("アンデッド兵器の突破に時間をかけすぎた…。", "It took too long to break through the undead arms.")
				}
				goto *chat_end
			}
		}
		goto *chat_end
	}
	if ( _switch_val == CREATURE_ID_ZISILION_THE_MINE_KING | _switch_sw ) {
		_switch_sw = 0
		if ( gdata(STARTING_GDATA_FLAG + 326) == 1 ) {
			chatMore lang("君、働いてるねぇ。僕は労働って素晴らしいと思うんだ。生活費を得られ、社会にも貢献できる…社会的生物として、「適度な」労働は喜ばしいものなんだ。僕はすでに一財産稼いでしまって、今さら労働する気になれないけどね…。", "Sorry, this is untranslated sentence.")
			chatMore lang("そんな僕にもささやかな楽しみがあってね。ここに立って関所を行き来する人々を眺め、その中でも頑張ってる感じの働き者にプラチナ硬貨をあげることなんだ。君にも何枚かあげよう。", "Sorry, this is untranslated sentence.")
			flt
			itemcreate -1, ITEM_ID_PLATINUM_COIN, cdata(CDATA_X, CHARA_PLAYER), cdata(CDATA_Y, CHARA_PLAYER), 3
			gdata(STARTING_GDATA_FLAG + 326) = 200
			txt_questitem
			goto *chat_end
		}
		if ( gdata(STARTING_GDATA_FLAG + 326) == 200 ) {
			chatMore lang("そう、がっつかないでくれよ…。明日また来てくれ。", "Yeah, don't be greedy... Come back tomorrow instead.")
			goto *chat_end
		}
		if ( gdata(STARTING_GDATA_FLAG + 326) == 100 ) {
			chatMore lang("君、まだ今日は街の依頼を達成していないようだな。達成したらまたおいで。", "Sorry, this is untranslated sentence.")
			goto *chat_end
		}
		chatMore lang("元気に働いているようだね。ううん…素晴らしい汗だ。頑張っている君にプラチナをあげよう。", "Sorry, this is untranslated sentence.")
		flt
		itemcreate -1, ITEM_ID_PLATINUM_COIN, cdata(CDATA_X, CHARA_PLAYER), cdata(CDATA_Y, CHARA_PLAYER), 3
		gdata(STARTING_GDATA_FLAG + 326) = 200
		txt_questitem
		chatMore lang("また、明日おいで。", "Come again tomorrow.")
		goto *chat_end
	}
	if ( _switch_val == CREATURE_ID_ALFRED_THE_CANGNAN_WIND | _switch_sw ) {
		_switch_sw = 0
		if ( gdata(GDATA_AREA) == AREA_GUARDIAN_SHRINE ) {
			chatMore lang("任務に失敗したうえ、後続隊を犠牲にしてまで生き延びてしまいましたか…。ヴァリウス様に合わせる顔がありませんね…。", "Sorry, this is untranslated sentence.")
			goto *chat_end
		}
		if ( gdata(GDATA_AREA) == AREA_AMUR_CAGE ) {
			chatMore "(" + name(tc) + lang("は見えない誰かに話しかけている…", " is stunned.") + ")"
			if ( gdata(GDATA_FLAG_MAIN_CHAOS_CRADLE_25) >= 1000 ) {
				chatMore lang("すみません。私が巻き込まなければランカータはまだこちらに来なかったでしょう。本当にすみませんでした。機嫌を直してください。", "Sorry, this is untranslated sentence.")
			}
			goto *chat_end
		}
		if ( gdata(GDATA_AREA) == AREA_CHAOS_CRADLE ) {
			chatMore lang("うぐがぁぁっ！いいですか…もし、辿り着いても…混沌の神は、まだ、倒しては…！あれは世界を…結束させるため必要なっ…！", "Sorry, this is untranslated sentence.")
			chatMore lang("あっ…がっ…。", "Ahhh...ughh...")
			animeload ANIMATION_OFFER, tc
			snd SOUNDLIST_BALL1
			txt lang(name(tc) + "の身体が弾け飛んだ。", name(tc) + " shatter" + _s(tc) + ".")
			dmghp tc, 99999, DAMAGE_FROM_SUICIDE
			gdata(GDATA_FLAG_MAIN) = 640
			gdata(GDATA_FLAG_MAIN_CHAOS_CRADLE_34) = 1
			chara_vanquish tc
		}
		goto *chat_end
	}
	if ( _switch_val == CREATURE_ID_AJETALIO_THE_SEMINAR_LECTURER | _switch_sw ) {
		_switch_sw = 0
		if ( gdata(STARTING_GDATA_FLAG + 330) == 100 ) {
			if ( gdata(STARTING_GDATA_FLAG + 329) == 1 ) {
				chatMore lang("生活講座担当、アジタリオ・ラーンクリスです。長いのでアジラーって呼んでください。みなさん、これからよろしく。", "Sorry, this is untranslated sentence.")
				chatMore lang("まずは冒険の基本中の基本、食料の調達方法について話しますね。", "Sorry, this is untranslated sentence.")
				chatMore lang("最初のうちは街の外で野原にEnterして、落ちているアピの実、栗、薬草を拾いましょう。これらは腐らない上に軽いので携帯食としても保存食としても優秀です。山菜も落ちていますが、これは２日で腐るので注意してください。咲いている花も食べられますが、いい値段なので売った方がいいでしょう。", "Sorry, this is untranslated sentence.")
				chatMore lang("あとは果物の木ですかね。これにbキー…bash（ぶつかる）することで果物が落ちてきます。種類にもよりますが、結構重いし半日前後で腐るので、早めに処理しましょう。腐らせるくらいなら、地面に置いて仲間に食べさせたほうがいいですね。", "Sorry, this is untranslated sentence.")
				chatMore lang("おっと。外で食料を集める時は野生動物に気をつけてください。強そうな動物や、実際強いと感じた相手からは無理せずエリア外まで逃げましょう。入りなおせば他にいくらでも拾えるので、目先の食料に眼が眩まないように。", "Sorry, this is untranslated sentence.")
				chatMore lang("長時間の冒険用に、宿屋で旅糧を買いこんでもいいですね。お腹が膨れるだけで強くはなれませんが、飢え死にするよりはいいでしょう。旅糧は緊急用にして、腐らず・腹持ちもよく・能力も鍛えられる食品…パン系を常備するのもありですね。どちらも結構お金がかかるので、余裕ができてから一考を。", "Sorry, this is untranslated sentence.")
				chatMore lang("街中でお腹が空いた場合は…街によってはパンが置いてあったり野菜が植えてあったります。行儀の悪いことですが、どうしてもお腹がすいている時はこっそり食べてしまいましょう。何もない街でも最悪、宿屋があれば食事はとれます。有料なうえに強くもなれませんけどね。", "Sorry, this is untranslated sentence.")
			}
			if ( gdata(STARTING_GDATA_FLAG + 329) == 2 ) {
				chatMore lang("今日は街の依頼などについて学びましょうか。", "Sorry, this is untranslated sentence.")
				chatMore lang("街の掲示板に触れてみれば、色々な依頼があることに気がつくと思います。達成すれば様々なアイテムやプラチナ硬貨、金貨、名声、発言力、カルマなどが得られます。ただし、失敗すると名声が低下します。ものによってはカルマも減って危険なので、最初から手当たり次第に依頼を受けるのはやめましょう。", "Sorry, this is untranslated sentence.")
				chatMore lang("給料と税金についても話しておきます。毎月１日と１５日に、家の給料箱へ給料や補給品が振り込まれます。税金を滞納していないと補給品の質がよくなるみたいですね。そして給料の額は冒険者としての各種ランキングによって決まります。ランキングについてはjキー…journal（日誌）で確認しましょう。", "Sorry, this is untranslated sentence.")
				chatMore lang("さて、レベル１０以上になると毎月１日に給料と一緒に税金の請求書も届くはずです。これはこのゼミから東にあるパルミア大使館に持っていくと支払えます。税金は所持金と所有物件から算出されます。もし悪人として生きていきたくても、最初のうちは毎月ちゃんと払ってください。４か月税金を滞納すると、カルマが減って一発アウトですから。", "Sorry, this is untranslated sentence.")
			}
			if ( gdata(STARTING_GDATA_FLAG + 329) == 3 ) {
				chatMore lang("今回は信仰について説明しますよ。神々の干渉がほとんどなかった時代には、いるのかもよくわからない存在に頼らないと自分を律することができない人や、架空の神をでっち上げて人々から金をむしり取る罰当たりもいたそうですが、現在のイルヴァは確実に存在する八柱の神によって統治されています。", "Sorry, this is untranslated sentence.")
				chatMore lang("神を信じ捧げものをすることで、能力の強化、特殊能力、神の化身、秘宝、武器といった具体的な恩恵を確実に授かることができます。俺は神に頼らないぞ！みたいな信条が特にないのなら、とりあえず誰かを信仰しておくべきでしょう。", "Sorry, this is untranslated sentence.")
				chatMore lang("神を信仰するなら、パルミアの北…つまりこのゼミから北東にある、神々の休戦地で行うといいですよ。祭壇の上でpキー…pray（祈る）すればその神の情報を見たうえで信仰するか否か選べます。信仰してその神が好むものを祭壇でEnterして捧げていけば、やがてご褒美のお告げがあるでしょう。", "Sorry, this is untranslated sentence.")
				chatMore lang("お告げがあったら、pray（祈る）すれば空からご褒美が降ってきます。もっとも、神の化身は信仰スキル１５、秘宝は信仰スキル２５、武器は信仰スキル４０が最低でも必要になりますけどね。", "Sorry, this is untranslated sentence.")
			}
			if ( gdata(STARTING_GDATA_FLAG + 329) == 4 ) {
				chatMore lang("さて、最後となる第４回では、本格的な生計の立て方について勉強しましょう。", "Sorry, this is untranslated sentence.")
				chatMore lang("迷宮に潜って金貨を取ってくるだけでは生計は成り立ちません。今時そんな、迷宮一本で生計を立てられるのは、レベル数百の迷宮を難なく攻略できる化け物くらいです。その化け物だって、強くなるまでにこつこつと稼いできたんですよ。そして、そんな強さになる頃には既に金には困らなくなっている。", "Sorry, this is untranslated sentence.")
				chatMore lang("強くなるにしても稼ぐにしても、兼業冒険者のほうがやれることが多いぶん有利ですよ。最初は街の依頼で元手を作り、店の権利書を手に入れることを目標にしましょう。微妙な性能で売値も大したことのないような装備でも、自分の店で売るとメイン収入に化けます。", "Sorry, this is untranslated sentence.")
				chatMore lang("店を構える際には、店主を任せるために交渉スキルを持つ仲間も用意しましょう。店物件は１店舗でも充分なので、早めに欲しい物件ですね。専門店を複数並べて収益を増加させる手もありますが、それは余裕ができてからでいいでしょう。", "Sorry, this is untranslated sentence.")
				chatMore lang("それと並行して、サブ収入として生産系のスキルや採掘、釣り、演奏などから好みのものを冒険の合間に上達させていきましょう。こだわりがなければ全部やったほうが効率がいいくらいです。迷宮でアイテムを集めるほどの戦力や気力が無いような時でも、これらの手段は使えますからね。", "Sorry, this is untranslated sentence.")
			}
			gdata(STARTING_GDATA_FLAG + 330) = 101
		}
		if ( gdata(STARTING_GDATA_FLAG + 329) == 1 ) {
			chatList 0, lang("食べちゃダメなものは？", "What things shouldn't I eat?")
			chatList 1, lang("お腹が減るとどうなるの？", "What happens when I get hungry?")
			chatList 2, lang("料理ってどうやるの？", "How do I cook?")
			chatList 3, lang("アジラーの好きな食べ物は？", "What's your favorite food?")
		}
		if ( gdata(STARTING_GDATA_FLAG + 329) == 2 ) {
			chatList 4, lang("どういう依頼を受ければいいの？", "Which quests should I undertake?")
			chatList 5, lang("カルマが減るとどうなるの？", "What happens when my karma gets low?")
			chatList 6, lang("発言力って？", "What is authority?")
			chatList 7, lang("街が大変なことになったら？", "What happens when all hell breaks loose inside towns?")
		}
		if ( gdata(STARTING_GDATA_FLAG + 329) == 3 ) {
			chatList 8, lang("祭壇がなくなったら？", "Could you tell me about altars?")
			chatList 9, lang("信仰スキルってどうやって上げるの？", "How do I increase the faith skill?")
			chatList 10, lang("おすすめの神様は？", "Which god do you recommend?")
			chatList 11, lang("アジラーの前髪は腐ってるの？", "Why are your forelocks so disgusting?")
		}
		if ( gdata(STARTING_GDATA_FLAG + 329) == 4 ) {
			chatList 12, lang("店以外のおすすめ物件は？", "Which buildings other than shops do you recommend?")
			chatList 13, lang("交易について教えて？", "Could you teach me about trade?")
			chatList 14, lang("お金に余裕が出てきたら？", "What should I do with extra money?")
			chatList 15, lang("お金があり余るようになったら？", "If I become rich, what should I spend my money on?")
		}
		buff = lang("何か質問はありますか？", "Any questions?")
		gosub *chat_select
		if ( chatval == 0 ) {
			chatMore lang("いい質問ですね！呪われているものは食べると吐いてしまい、逆にお腹が減ったり場合によっては即餓死したりします。呪われているかは鑑定することでわかりますが、空腹の仲間の足元に置いてみて食いつくかでもわかります。どんなにお腹が空いていても、仲間は呪われている食べ物には手を出しません。", "Now that's an excellent question! If you eat cursed food you'll begin to vomit, but on the other hand if you don't eat anything at all you will starve to death. You can find out if food is cursed by identifying it or letting your allies taste test the food for you. No matter how hungry they are, allies will not eat cursed food.")
			chatMore lang("あと、腐ったものを食べると能力が永続的に下がります。腐っていても消化できるようになる装備もありますが、クーラーボックスや四次元にしまって腐らないように対策しましょう。", "Also, if you eat rotten food your attributes will decrease. Even though there's equipment that helps with digesting rotten food, it's better to put your food inside a cooler box or a 4 dimensional pocket so it doesn't rot to begin with.")
			chatMore lang("ただし、特定のアンデッドの死体は見た目上腐っていなくても腐っているので気をつけて。骨のやつなんかは大丈夫ですが、動く死体系のやつらは腐っていますよ。", "However, some body parts of undead corpses that may not look rotten can still make you sick due to the nature of the undead, so be careful. Bones are fine though, but the rest of the corpse will be rotten.")
			chatMore lang("他にはエイリアンなどの寄生生物の死体を食べると寄生、輝くハリねずみやウィスプなんかはエーテル病を進行させます。発狂したり毒になる死体もあります。怖いですか？でもプチ系や馬系みたいに能力に経験値が入るものや、サソリや妖精みたいに属性耐性を得られる特殊なものもあるので、対策を用意したうえで色々食べて覚えていきましょう。", "Eating alien or parasitic corpses will give you parasites and eating shining hedgehogs or wisps will give you Ether disease. There's also corpses that will make you go mad or poison you. Are you scared yet? However eating putits, horses, or similar things can increase your abilities and give experience points, and eating scorpions, fairies or similar things can increase your elemental resistances. Remember all of this and plan ahead your meals.")
			gdata(STARTING_GDATA_FLAG + 330)++
		}
		if ( chatval == 1 ) {
			chatMore lang("死にますね。お腹の減っていることに気づかず歩き続けて死ぬ冒険者は多いんですよ。そんな馬鹿なことはないだろうと思うかもしれませんが、結構多いんです。餓死中になる前に、何か胃に入れておきましょう。特に戦闘中は食事するのが困難になるので、腹ごしらえを出来る時にしておいて下さい。", "You gotta eat or you'll die. There's a lot of adventurers that don't notice that they get hungry and starve to death during their travels. You'd think such foolishness wouldn't exist, but apparently it's quite common. If you're about to die from starvation, just eat something. Because it's difficult to eat during combat, try to eat whenever you're able to.")
			chatMore lang("ああ、仲間は主人から必要最低限の生命エネルギーを分けられているので、吐きすぎない限り餓死しませんよ。と言っても聴診器で診た時に青緑色なら、お腹が空いている証拠です。食料に結構余裕がある場合は与えたほうがいいでしょう。食べさせた方が強くなりますよ。", "Oh, and allies will share enough life energy with their master to keep them alive, and as long as they don't vomit too much they can't die from hunger. If you do a checkup with a stethoscope and the result is blueish-green, then the belly is empty. If it's possible, you should eat high quality food. Eating good food strengthens your body.")
			gdata(STARTING_GDATA_FLAG + 330)++
		}
		if ( chatval == 2 ) {
			chatMore lang("料理スキルがあるなら、調理器具を使うことで料理ができます。料理すると、腐るまでのタイムリミットと心身を鍛える効果が大幅に伸びるので、できるようになっておきたいですね。腐ったもので料理の練習をしてもいいでしょう。調理器具によって、どこまでの料理を作れるか限界があるので一度道具説明欄を見て下さい。", "If you have the Cooking skill, you can cook using cooking utensils. Cooked food decays much more slowly and strengthens you more, so it's a useful skill. Depending on the cooking utensils, there is a limit to how good of a dish you can make, so use [X] to examine them.")
			chatMore lang("料理とは少し違うけれど、ミキサーを使えば野菜や果物をジュースにすることもできますよ。お腹はあまり膨れませんが、その分多く栄養を摂取できます。呪われていたり腐っている物でも無害化して有効活用できます。", "It's a little different from cooking, but you can also turn fruits and vegetables into juice with a juice mixer. Although they aren't particularly filling, they're still nutritious. Even cursed or rotten things can be made into juice without any problems.")
			gdata(STARTING_GDATA_FLAG + 330)++
		}
		if ( chatval == 3 ) {
			chatMore lang("えぇぇ…僕の好物ですか？そ、そうですね。ハーブでしょうか。腐らないし軽いし、心身も鍛えられるんですよ。料理に合成すると最高ですね。", "My favorite kind of food? That'd be herbs. They're light, they don't rot, and they strengthen your mind and body. They're even more amazing when combined with other food.")
		}
		if ( chatval == 4 ) {
			chatMore lang("最初は調達依頼がオススメですね。必ず依頼物を確保してから受けること。街から街へ難なく移動できる食料・装備が整ったら、配達依頼もやっていきましょう。失敗するとカルマが減るので、移動日数をちゃんと計算に入れて受けましょう。", "At first, it's recommended to fulfill requests for items. Be sure to have the requested item handy. Once you have food and equipment and can travel between towns without difficulty, start doing delivery requests. If you fail, you'll lose karma, so check the deadline carefully.")
			chatMore lang("その辺の野外にいる野生動物を軽くあしらえるようになったら、収穫依頼もいいですね。作物を引き抜く際にちょっと身体も鍛えられます。ノルマの数倍のスコアを出せば報酬が増えたりブロンズ硬貨ももらえたりするんですけど、最初は難しいでしょうね。収穫依頼もこなせるようになったら、討伐依頼や短距離の護衛依頼に手を出してもいいかもしれません。", "If you can handle wild animals, you can also do harvest requests. Picking crops is a good way to get stronger. If you score several times the quota you'll get more rewards and bronze coins, but at first it'll be difficult. If you're strong enough, you might want to take requests for killing monsters or escort requests for nearby towns.")
			chatMore lang("芸人依頼は演奏スキルを最低でも５くらいにしてから挑みましょう。レベルの高い人に聴かせると殺されかねないので、練習でも本番でも聴かせる相手は選んで下さい。", "Start doing party requests after getting your perform skill to at least about 5. If you perform near high-level people, you may be killed, so please be careful who you perform near to, both when practicing and during a request.")
			gdata(STARTING_GDATA_FLAG + 330)++
		}
		if ( chatval == 5 ) {
			chatMore lang("カルマが−３１まで下がると、犯罪者として指名手配されます。街中のガードが一斉に殺しに来て、店の人も物を売ってくれなくなります。ガードを一蹴できる強さと、変装手段を確保するまではカルマを下げすぎないよう慎重に行動してください。", "If your karma is -31 or lower, you will be considered a criminal. Guards in towns will attack you and shopkeepers will refuse to do business with you. Be careful not to let your karma drop too low, unless you're strong enough to defeat guards and have a way to disguise yourself.")
			chatMore lang("もし、思いがけず犯罪者になってしまったら。このゼミから南西にある、ダルフィという街を拠点にして依頼などでカルマを上げてください。ダルフィにはガードがおらず、犯罪者でも店も使えますからね。", "If you accidentally become a criminal, raise your karma by taking requests in the city of Derphy, which is southwest of this seminar. There are no guards in Derphy, and the shopkeepers will still do business with you.")
			gdata(STARTING_GDATA_FLAG + 330)++
		}
		if ( chatval == 6 ) {
			chatMore lang("発言力は街への貢献度の証。そこの管理者や長に話しかけることで、発言力を使って街の管理代行を行うことができます。…と言ってもまだできたばかりの制度で、やれることは少ないんですけどね。現段階では、依頼のついでで貯まっていくものだと認識してください。", "Authority is a proof of the degree of contribution to the city. By talking to the manager or the chief there, you can use authority to manage the city. ...Although, to be honest, there's very little you can do with it at the present stage. Perhaps in the future some use will be added, but for now it's mostly just something that accumulates when completing requests.")
			gdata(STARTING_GDATA_FLAG + 330)++
		}
		if ( chatval == 7 ) {
			chatMore lang("街が大火事になったり、モンスターが湧いて虐殺が始まることがよくあります。よくないことだけど、よくあることなんです。…ごほん。火の消し方とモンスターの出現を止める方法を教えておきましょう。", "Fire blazes through the city, monsters rampage, complete genocide... Terrible. Also distressingly commonplace. Let me tell you how to put out fires and stop monsters from appearing.")
			chatMore lang("まず火の消し方。火が一つ二つなら、手持ちのポーション類をそこにＴキー（shift+t）…Throwすることで鎮火できます。水たまりを誰かが踏むと怒られるので、自分で踏んで消しておきましょう。ポーションを上手く投げられなかったり、火が四つ五つに増えてきたら、蜘蛛の巣や闇の霧、水系の魔法を使いましょう。杖版でもいいですけど。これらは対象範囲の火を消してくれます。そんなものは持っていなかったり、火が燃え広がりすぎている時は、雨の日までその街には近寄らないことをオススメします。", "First, how to put out fires. If there are only one or two, you can throw a potion with [T] and the puddle will put out the fire. If someone steps in a puddle you made, they'll get angry, so step on it yourself first to get rid of it. If there are five or so fires, use spells or rods of Web, Mist of Darkness, or Acid Ground. Any more than that and you should just leave the city and return when it's raining.")
			chatMore lang("続いてモンスターが湧く場合。井戸を飲んだ時に出てきたものは、倒してしまえば終わりです。しかしモンスターを無限に召喚する装備を付けた冒険者が徘徊していることがあります。これは、犯人を見つけてその装備を没収しましょう。", "If monsters appear when you drink from a well, you can just kill them. If they show up at other times, there might be a nearby adventurer wearing equipment that summons monsters. Track the adventurer down and trade for or pickpocket the equipment.")
			chatMore lang("エイリアンなどの寄生生物が腹から出てくることもあります。腹にいる間なら毒や染料、硫酸を飲むことで完全駆除できますよ。寄生されている人には渡せば素直に飲んでくれます。むしろ飲ませないと宿主が生きている限り無限に産まれてくるんです。", "Parasites like aliens can infest people. They can be removed by drinking poison, dye, or sulfuric acid. If you give one of those to an infested person, they'll drink it. If you don't, they'll spawn monsters forever, so be sure to cure everyone who's infested.")
			chatMore lang("寄生生物がすでに産まれすぎていたり、モンスターがモンスターを召喚したり、分裂して増殖しているケースもありますね。相手が倒せる強さなら、壁生成で囲って各個撃破しましょう。倒せない場合、街から脱出してください。５日ほどして様子を見に行くと、いなくなっているはずです。もし少し残っていたら、また日を改めましょう。", "Sometimes parasitic organisms or monsters that summon more monsters will overrun a town. If you can kill them, try using spells or rods of Wall Creation to isolate them and defeat them one by one. If not, just leave and wait about 5 days, and things should be back to normal when you return.")
			gdata(STARTING_GDATA_FLAG + 330)++
		}
		if ( chatval == 8 ) {
			chatMore lang("違う神の祭壇に捧げものをすることで、その祭壇を乗っ取って上書きすることができます。何も考えていないと、次に信仰したい神の祭壇が無くなることもあるでしょう。神の祭壇は特定の場所に置いてある分か、ネフィアでごく稀に生成されるものしかありません。後者が目当ての神のものである確率は単純に考えて八分の一です。代わりを確保していない状態で無計画に乗っ取るのは止めておきましょう。", "If you sacrifice to your god at the altar of a different god, your god can claim the altar. This gives extra piety, but be careful, or you might lose access to a god! You'd have to spend ages looking through Nefia to find an altar to them later. Just don't mess with the altars at the Truce Ground, alright?")
			gdata(STARTING_GDATA_FLAG + 330)++
		}
		if ( chatval == 9 ) {
			chatMore lang("信仰スキルは、夢を通じて神の偉大さを感じることで受動的に上昇します。また、信仰スキル１０以上の時にレベルアップすれば、広域技能の説法を習得できます。説法で聴衆を満足させることができれば、信仰スキルを能動的に上昇させられますよ。", "Faith is trained passively by meeting saints in your dreams. Also, if you have a Faith of 10 or higher, you can master the art of preaching. If you can preach successfully to an audience, you can actively train your Faith skill.")
			gdata(STARTING_GDATA_FLAG + 330)++
		}
		if ( chatval == 10 ) {
			chatMore lang("最初は、捧げものが簡単で生存能力を強化してくれるオパートスやジュア、生計を助けてくれるヤカテクトがいいでしょうね。アイテムを大人買いできる資金ができてきたらマニやルルウィ、イツパロトルも簡単です。エヘカトルは釣りができるようになってから、クミロミは農業ができるようになってからが無難です。", "At first, it'd be nice to worship Opatos or Jure, who are easy to gain piety with and enhance your survivability, and Yacatect to help make money. Mani, Lulwy, and Itzpalt are also easy when you can afford to buy items to offer to them. Ehekatl needs Fishing, and Kumiromi needs Gardening and a farm.")
			chatMore lang("多くの冒険者は、神々を何柱か信仰してご褒美をもらった後に最終信仰を決めていますね。全ての神を信仰コンプリートする者も少なくありません。神々は能力も性格も個性的なので、最終的には自分のスタイルに合っている神を選ぶといいでしょう。もちろん、面白さとか可愛さとかで決めてもいいんですけどね。", "Many adventurers collect rewards from all eight gods before deciding who to truly believe in. Gods have individual personalities, so you might want to stay with a god that fits your personality. Or you can just go with whatever sounds fun.")
			gdata(STARTING_GDATA_FLAG + 330)++
		}
		if ( chatval == 11 ) {
			chatMore lang("…これはファッションです。腐って変色しているわけではないのです。", "...This is fashion. It is not rotten and discolored.")
		}
		if ( chatval == 12 ) {
			chatMore lang("店以外の物件では畑、牧場がいいでしょう。前者は栽培スキル、後者は解剖学スキルが必要ですが、いいお小遣いになりますよ。特に畑は、充分な栽培スキルがあればハーブも増産できますしね。", "After the shop, it'd be nice to have farms and ranches. The former requires Gardening, while the latter requires Anatomy, but both are worthwhile. Especially farms, since you can grow herbs with enough Gardening.")
			gdata(STARTING_GDATA_FLAG + 330)++
		}
		if ( chatval == 13 ) {
			chatMore lang("交易には、各地の交易店でのみ売れる交易品が必要です。交易品は旅糧以外の（荷車）アイテムのことで、荷車に積まれます。街ごとに安いもの高いものが違うので、荷車の積載限界まで積んで別の街まで運び、差額を利用して稼ぐことになります。交易品を工具で自作したり、盗賊団から強奪すれば効率が上がります。", "Trade uses cargo items, which can only be sold to traders in towns and are carried in your cart like traveler's food. Each city has a type of cargo that's cheaper there, so you can fill your cart with it and sell it for a profit in another city. You can also craft cargo yourself, or defeat bandit groups and take their cargo.")
			chatMore lang("ただし、「交易だけ」で大儲けするのは大変です。生活費分くらいは余裕で稼げますが、基本は街から街へ移動するついでに併用して行うものですよ。なお、他所からの交易品を売却すると、額に応じて街の経済が活性化し、一時的に他店の品物数も増えます。そちら目当てで交易するのもいいでしょう。", "Still, it's hard to make a living solely through trade. It's generally more of a bit of extra profit for adventurers who'd be travelling between towns anyway. Selling cargo from distant places also boosts the economy of a town, so the local stores will have more things for sale.")
			gdata(STARTING_GDATA_FLAG + 330)++
		}
		if ( chatval == 14 ) {
			chatMore lang("所持金に余裕があるなら、地面に落ちている金貨は拾わずに仲間に拾わせるといいでしょう。勝手に訓練に行ってくれるようになります。…これは育成講座の分野ですかね？", "If you have plenty of money, when you find gold coins lying around, let your allies pick them up instead. When you're in a city, they'll spend the money on training to keep their skills sharp.")
			chatMore lang("後は、装備を強化して性能を底上げしていきましょう。＋６までは対応する巻物で強化できますが、武具店で＋１０まで強化できます。現行でいい感じの防具などは、ケチらずに強化しておくと後で仲間のお下がりとして重宝しますよ。また、装備している物の平均＋値は力の解放…ゲージ技の威力にも影響します。平均＋１０でダメージが５倍以上まで伸びるので、憶えておきましょう。", "It's also vitally important to enhance your equipment. Even if you get new gear later, you can give your old things to an ally. Scrolls can enhance gear up to +6, but a blacksmith can enhance gear up to +10. Also, the average enhancement level of your gear determines the power of Gauge Release attacks. Remember, a +10 weapon is at least five times stronger, and each + on everything else you have equipped makes you more durable.")
			chatMore lang("…っと。これは道具講座の分野ですね。つまり、お金は生計を立てるだけでなく、様々な戦力強化にも絡んでくる材料なんです。惜しまずにちゃんと使っていきましょう。先に安定した収入基盤さえ作っておけば、また稼げるんですから。", "Money isn't just important for survival, but also for getting stronger. The sooner you get a steady source of income, the better. Gotta spend money to make money, y'know.")
			gdata(STARTING_GDATA_FLAG + 330)++
		}
		if ( chatval == 15 ) {
			chatMore lang("お金があり余ってきたら、よく使う店に投資しましょう。自宅に招いてる店に投資するようにすれば、特定の街に縛られずに引っ越しができますよ。投資すると扱う品物の質や数が向上します。規模１５０もあれば十分でしょう。", "When you can afford it, invest in stores you use often. You can invite merchants to your house to have a better selection than you'd get in a city. Investing improves the quality and quantity of goods available. A rank of 150 should be enough.")
			chatMore lang("それでも余ったら？うーん…仲間を増やしてみるとか、複数の武具店やブラックマーケットにさらに投資するとか？特に何もなければ、貯金箱に入れておいたほうがいいですよ。現在の所持金に応じて税金が増えるだけですからね。", "With your remaining money... Well, you could hire more allies, invest in blacksmiths, or maybe a black market? If you don't need to spend the money, you should put it in a kitty bank. You're only taxed based on the money you're carrying.")
			gdata(STARTING_GDATA_FLAG + 330)++
		}
		if ( gdata(STARTING_GDATA_FLAG + 330) <= 102 ) {
			chatMore lang("じゃあ質問のある人は直接聞きに来てください。", "Now, if anyone has further questions, please come and ask directly.")
		}
		goto *chat_end
	}
	if ( _switch_val == CREATURE_ID_CRESCE_THE_SEMINAR_LECTURER | _switch_sw ) {
		_switch_sw = 0
		if ( gdata(STARTING_GDATA_FLAG + 330) == 100 ) {
			if ( gdata(STARTING_GDATA_FLAG + 329) == 1 ) {
				chatMore lang("道具講座担当のクレッシェ・ルカンよ。れっしぇーって呼んでね！", "Cresce Lucan, item instructor. Please, call me Cresce!")
				chatMore lang("冒険者を始めたばかりだと、どの道具が重要でどの道具がさほど重要でないのか、わからないと思うの。だから用意するべき道具を簡単に説明しておくわね。", "If you just started adventuring, you don't know which items are important and which ones aren't. So, I'll briefly explain the items you need.")
				chatMore lang("まずは１つずつでいいから持っておきたいものとして、紐、聴診器、コマンドフラッグ、ホイッスル。その辺で普通に拾えたり買えたりするけれど、後から手に入れようとするとなかなか見つからないのよね。", "First of all, you'll want a leash, a stethoscope, a command flag, and a whistle. You can buy them from general vendors, or occasionally find them in dungeons.")
				chatMore lang("音楽のディスク、カード、はく製などは、戦闘には関係ないけど集めておくと使う日が来るかも。後から揃えるのは大変なものだし、売るのはダブったものだけにしようね。", "Music discs and cards and such aren't useful in battle, but you might need them someday, so only sell duplicates.")
				chatMore lang("道具の効果は、「鑑定」することでわかるようになるの。鑑定の巻物や杖を使うか、街の魔術士さんに鑑定してもらいましょう。初めて見た道具は使う前にちゃんと鑑定してね。未鑑定だと売却価格も大幅に下がったりするわ。", "The effects of items will be revealed by \"identification\". Use spells, scrolls, or rods of identify, or pay a town wizard to identify your items. Be sure to identify items if you've never seen that type before, since completely unknown items sell for very little.")
				chatMore lang("あと、ネフィアの表層以外の階層には、深さに応じてまとまった額の金貨が落ちているの。道具を拾い集めるついでに回収しておくといいわ。", "Also, when exploring Nefia, remember that the more dangerous the dungeon, the more valuable the treasures you'll find.")
			}
			if ( gdata(STARTING_GDATA_FLAG + 329) == 2 ) {
				chatMore lang("今日は、普段持ち歩くべき道具についてお勉強しましょうね。", "Let's learn about the items that adventurers should always carry around.")
				chatMore lang("使わないものは置いていくとして回復とテレポート、食料とシェルターは忘れずに持っていって。杖は微妙に重いから気持ち少なめにね。アイテムを守るために耐火・耐冷ブランケットを１枚ずつ忘れずに。強い敵や未知の土地に挑む場合は、強化用のアイテムをいつもより多く。", "Remember to bring food with you, and always have sources of healing and teleportation onhand, as well as fireproof and coldproof blankets. When up against a strong enemy or heading into unknown territory, bring more supplies than normal.")
				chatMore lang("駆け出しの間は、１０ｓ以上あるような重いものは、四次元ミラーにでもしまっておいて。重量挙げスキルが育てばそのうち素で持てるようにもなるわ。戦利品を多く持ち帰るためにも、重量・枠に余裕を持ってね。", "Don't go into a dangerous place while burdened. Store heavy items with a 4-dimensional mirror. With higher Weight Lifting you can carry more, but don't lose track of the weight of your inventory while loading up on loot.")
				chatMore lang("いらない物を置くのはdキー…dropだけど、この時＊キーを押すと連続で物を置けるわ。調節する際に便利だから覚えておきましょう。", "If you don't need something, use [d] to drop it. If you press [*], you can drop multiple things in succession. It's handy for storing items.")
			}
			if ( gdata(STARTING_GDATA_FLAG + 329) == 3 ) {
				chatMore lang("第３回は、道具の状態について詳しく教えるわね。", "In this third course, I will tell you more about the states of items.")
				chatMore lang("信仰している神の祭壇に水を置くと、水が祝福されるの。神を信仰していない場合は、神の支配していない祭壇に水を置けばいいわ。祝福された水を混ぜることでどんな道具でも祝福できるのよ。１スタックまとめて効果があるから、巻物なんかには数十枚貯めてから混ぜましょう。", "Placing a bottle of water on your god's altar, or an unclaimed altar if you don't have a god, will bless the water. You can bless any item by mixing the blessed water with it. One bottle of water can bless an entire stack of items, so save up dozens of scrolls and bless them all at once.")
				chatMore lang("一方、悪夢や敵の呪いで装備が呪われることもあるわ。呪われた装備は外せないうえに、身に着けていると突然テレポートさせられたりダメージを受けたりするの。早めに解呪の魔法や道具を使うか、街の癒し手に解呪してもらいましょう。", "On the other hand, items can be cursed by a nightmare or an enemy's magic. Cursed equipment can't be removed and can have dangerous effects. Use a spell, scroll, or rod of remove curse, or ask a town healer to remove curses. A scroll of vanish curse will uncurse all your possessions.")
				chatMore lang("呪われている食べ物は吐いてしまうし、ポーションや巻物、杖は本来の効果が出なかったり弱まったりしてしまうわ。売値も下がってしまうから、特に理由がなければ祝福された解呪の巻物を使っておきましょう。祝福された解呪の巻物は所持品全部に解呪効果が出る優れものよ。", "Cursed food will make you vomit and cursed potions, scrolls, and rods will have a weakened or harmful effect. Cursed items also sell for less, so it's best to avoid curses as a rule.")
			}
			if ( gdata(STARTING_GDATA_FLAG + 329) == 4 ) {
				chatMore lang("最後となる第４回では、装備についてもう少し説明するわよ。", "In the 4th and final course I will explain a bit more about equipment.")
				chatMore lang("自然鑑定が発動するとわかるんだけど、装備には粗悪、良質、高品質、奇跡、神器、特別の６種があるわ。完全に鑑定すると、高品質には接頭語、奇跡には☆と『』、神器には☆と《》、特別には★と《》がつくの。", "There are six classes of equipment: bad, normal, great, miracle, godly, and unique. Great items have prefixes or suffixes, miracle and unique items have their names enclosed by <>, and godly items have their names enclosed by {}.")
				chatMore lang("高品質、奇跡、神器には特別な力…エンチャントがランダムで付与されるわ。奇跡と神器はランダムアーティファクトと呼ばれていて、高品質以下よりも本体性能もエンチャント面も上限が上なの。特別は固定アーティファクトと呼ばれ、性能が固定されているわ。", "Great, miracle, and godly items have random enchantments. Miracle and godly items are called \"random artifacts\" or \"randarts\", and are stronger than other items of the same type. Unique items are called \"fixed artifacts\" or \"fixedarts\", and their effects never vary.")
				chatMore lang("最終的には奇跡以降で装備欄を埋めることになるわね。高品質は奇跡にランクアップさせる方法もあるから、いいエンチャントがついていたら取っておいてね。", "It's possible to upgrade a great item to a miracle item, so if you see a great item with a nice enchantment, save it. Someday you'll be equipped with nothing but powerful artifacts...")
			}
			gdata(STARTING_GDATA_FLAG + 330) = 101
		}
		if ( gdata(STARTING_GDATA_FLAG + 329) == 1 ) {
			chatList 0, lang("集めるべき巻物は？", "Which kind of scrolls should I collect?")
			chatList 1, lang("集めるべきポーションは？", "Which kind of potions should I collect?")
			chatList 2, lang("寝具と調理器具はどれがいいの？", "Which beds and cooking utensils are good?")
			chatList 3, lang("れっしぇー歳いくつ？", "How old are you?")
		}
		if ( gdata(STARTING_GDATA_FLAG + 329) == 2 ) {
			chatList 4, lang("杖ってどうなの？", "Could you tell me about rods?")
			chatList 5, lang("重すぎるとどうなるの？", "What happens when I carry too much?")
			chatList 6, lang("持ち歩かないものはどうするの？", "Where should I store items?")
			chatList 7, lang("保持指定って何？", "What does Tag No-Drop mean?")
		}
		if ( gdata(STARTING_GDATA_FLAG + 329) == 3 ) {
			chatList 8, lang("他に祝福したほうがいい道具は？", "Which items should be blessed?")
			chatList 9, lang("呪った方がいい道具は？", "Is there a use for cursed items?")
			chatList 10, lang("＋１とかって何？", "What does +1 mean?")
			chatList 11, lang("れっしぇー恋人いないの？", "You got a lover?")
		}
		if ( gdata(STARTING_GDATA_FLAG + 329) == 4 ) {
			chatList 12, lang("いい装備の入手法は？", "How do I get some good gear?")
			chatList 13, lang("装備の素材って？", "What about equipment materials?")
			chatList 14, lang("マテリアルって何？", "What are crafting materials?")
			chatList 15, lang("合成の壺って？", "What about the pot for fusion?")
		}
		buff = lang("何か質問はあるかしら？", "Do you have any questions?")
		gosub *chat_select
		if ( chatval == 0 ) {
			chatMore lang("巻物はとても軽いうえに、スキルがなくても使えるから駆け出し時代に重宝するの。特に鑑定、素材変化、魔法の地図、物質感知、帰還、解呪、武器防具強化、不思議、マテリアル生成あたりをこつこつ集めておくと後で便利よ。よく出る割に単価の高い神託は、交換や売却にも使えるわ。", "Scrolls are lightweight and require no skills, so they're useful for new adventurers. Keep scrolls of identify, change material, magical map, detect objects, return, remove curse, weapon/armor enchanting, and wonder. Scrolls of oracle are valuable and can be sold or traded for items held by other adventurers.")
			chatMore lang("大抵は代用手段があるけれど、巻物は軽いから落ちてるのは全回収でオッケー。あと成長、能力獲得、羽の生えた巻物はレアよ。最初はなるべく使わずに、後で必要になる時まで温存しておきたいところね。家具の本棚は家に置くと本や巻物を収納できるから整理整頓に便利よ。", "Basic scrolls aren't as important later on, but they're light, so they can be kept for emergencies. The rarer scrolls are growth, gain attribute, and flying scrolls. If you find those, save them until you need them. Bookshelves in your house are a convenient way to store books and scrolls.")
			gdata(STARTING_GDATA_FLAG + 330)++
		}
		if ( chatval == 1 ) {
			chatMore lang("ポーションは軽くていっぱい持てるの。一部のポーションは魔道具スキルで効果が伸びるから取っておくといいわ。回復系とバフ系、デバフ系、状態異常系、空き瓶、耐酸性コーティング液、耐熱コーティング液…とにかく数を用意しておきたいわね。軽いから落ちてるのは全回収でオッケーよ。", "Potions are light, so you can carry plenty of them. Some potions are strengthened by your Magic Device skill. There are potions that heal or strengthen you, potions that damage or weaken enemies you throw them at, potions that fireproof or acidproof your equipment... There's quite a variety.")
			chatMore lang("あと水、エーテル抗体、潜在能力、下落、進化、ヘルメスの血、スピードリンクはレアだから取りこぼしのないようにね。家具の「ポーションの棚」は家に置くとポーションを収納できるから手に入れておきたいわ。", "Also, potions of water, cure corruption, descent, evolution, hermes' blood, and speed upper are rare, so hang onto them. If you have a rack of potions in your house, you can store potions in it.")
			gdata(STARTING_GDATA_FLAG + 330)++
		}
		if ( chatval == 2 ) {
			chatMore lang("寝具と調理器具にはランクがあって、それぞれ効果に差があるわ。最初は軽い低ランク品でもいいけれど、多少無理してでも高ランク品に替えていきたいわね。街中にある高ランク品を使うことも、視野に入れておいてね。", "Beds and cooking utensils have ranks, with higher ranks giving better results. If you identify them, you can examine them with [X] to see their rank. The best cooking utensil of all is the barbecue set, and the best kind of bed is the happy bed. Keep in mind that you can find such high-ranked tools in cities and use them even if they don't belong to you.")
			gdata(STARTING_GDATA_FLAG + 330)++
		}
		if ( chatval == 3 ) {
			chatMore lang("…。", "...")
			chatMore lang("そんな時に便利な道具がインサイトレンズよ！相手の年齢どころか、身長体重種族、そして能力値や弱点耐性まで丸わかり！道具の進歩って素晴らしいと思わない？", "A useful tool at such times is the insight lens! Not only can you see the age of the target, but their height, weight, race, stats, skills, and elemental resistances! Isn't modern technology incredible?")
		}
		if ( chatval == 4 ) {
			chatMore lang("杖の場合、魔道具スキルが効果だけでなく成功率にも影響するわ。微妙に重いし残り回数が違うとスタックしないから少な目にね。杖の残り回数は充填の巻物や技能の魔力の充填で増やせるわ。魔力の充填は魔道具スキルレベル２０以上の時レベルアップで習得よ。", "With rods, your Magic Device skill will affect both the effect and the success rate. They're heavier than scrolls and don't stack if they have different charges, but they can be recharged with scrolls and the Fill Charge ability. Draw Charge and Fill Charge are obtained when you level up if your Magic Device skill is at least 20.")
			chatMore lang("回復系と壁生成、テレポート、変化、鑑定の杖は便利ね。それでも残り回数を充填できるようになったら４、５本で充分かな。杖主体で戦う気がないのなら、攻撃系の杖は魔道具上げや残り回数の抽出、元素の神への捧げものに使うといいわ。", "Rods of healing, wall creation, teleport, change creature, and identify are useful. If you don't want to use attack magic rods, you could use Draw Charge on them, or sacrifice them to Itzpalt.")
			chatMore lang("支配の杖は敵を仲間に引き込むレア杖だけど、魔道具スキルのレベルが支配できる相手のレベルに関わってくるわ。スキルが低いと絶対成功しないから、使うつもりならスキルを上げておきましょう。", "Rods of domination are rare rods that turn enemies into permanent allies, but you need decent Magic Device skill for them to work on high-level opponents.")
			gdata(STARTING_GDATA_FLAG + 330)++
		}
		if ( chatval == 5 ) {
			chatMore lang("バックパックの重量に応じて重荷、圧迫、超過、潰れと変化していくの。重荷くらいなら問題ないけれど、圧迫以降は速度が大きく下がって戦闘が不利になるわ。超過になると歩いているだけでたまに大ダメージを受けるようになるから、そのまま行動してると事故死に一直線よ。どうしても超過で移動しなきゃいけない場合は、時々荷物を降ろして休憩しましょうね。", "Depending on the weight of your backpack, you'll go from Burden to Burden! to Overweight to Overweight!. Burden isn't too bad, but Overweight greatly decreases your speed and does constant damage. Carrying too much can and will kill you, especially when travelling, so be careful.")
			chatMore lang("ちなみに重量挙げスキルは、重荷以上の時にしか成長しないの。うまく荷物を調整して、普段は重荷で活動・強敵と戦う時は重荷解除、ってできるようにしておきたいわね。", "By the way, the Weight Lifting skill is only trained while Burdened or worse, but heavier loads don't train it faster. If you're fighting enemies while carrying a heavy load, you might want to drop excess items to get your normal speed back.")
			gdata(STARTING_GDATA_FLAG + 330)++
		}
		if ( chatval == 6 ) {
			chatMore lang("すぐに使わない道具は、わが家や倉庫に置いておきましょう。死んで落としたり、燃やされたりするわ。軽い巻物やポーションも半分くらいは保管しておいた方がいいわ。ただし場所によってものを置ける数に限界があるの。必要に応じて倉庫を建てるか、掃除されない場所に仮置きするといいわ。", "Store items you don't need to keep with you in your home or a storage house. That way they won't be lost or destroyed. However, you can only store so many items, depending on the type of building. If your house is full, you should build a storage house, or leave items in some other safe location.")
			chatMore lang("掃除されない場所かどうかは、不要なものを一週間ほど置いて確認してみましょう？大抵の街は置いたものが片づけられてしまうけれど、地下は対象外だったりするのよ。", "Don't leave your items in a town! They'll be cleared out within a week, at least for most towns. However, some towns have underground areas that are safe to use as storage.")
			chatMore lang("そうそう！置ける道具の種類数は、場所によって決まっているの。限界ギリギリのところに新しい物が生成されると、古い物がいくつか破壊されてしまうわ。これはマップだけじゃなくて、給料箱とかお店の金庫の中も同じなの。定期的に整理整頓して、余裕をもたせておきましょうね。", "Listen up! The number of items that can be stored at a building varies based on the type of building. Once you reach the limit, if new items are created, some of the old ones will be destroyed. That also goes for shop strongboxes and your salary box. Be careful with your item storage!")
			gdata(STARTING_GDATA_FLAG + 330)++
		}
		if ( chatval == 7 ) {
			chatMore lang("保持指定は、調べる…ｘキーで一覧を表示している最中に＊キーでできるわよ。もう一度＊キーで解除されるわ。", "Use [X] to open the Examine menu and then press [*] to toggle No-Drop for the selected item.")
			chatMore lang("保持指定をした道具は、「大事なもの」として扱われるわ。置いたり売ったりできなくなるから、紛失防止になるの。いくらでも指定できるから、貴重な道具や良い装備は忘れずに指定しておきましょうね？…漫然と道具整理していると、たまに手が滑るのよねぇ。", "Items tagged as No-Drop can't be dropped, sold, eaten, targeted by Draw Charge, etc. There's no limit, so tag all your valuable tools to prevent them from being accidentally lost.")
		}
		if ( chatval == 8 ) {
			chatMore lang("杖や巻物は祝福すると効果が強化されるのよ。特に成長、素材変化、羽の生えた巻物はまとめて祝福してから使いたいわ。", "Blessing rods and scrolls will enhance their effects. It's especially important for scrolls of growth, scrolls of change material and superior material, and flying scrolls.")
			chatMore lang("祝福された食品・飲み物は、たまに幸運の日が訪れることがあるの。でもそれ狙いでわざわざ祝福するほどではないわ。祝福されたポーションは効果が上昇するけれど、特に肉体・精神復活と潜在能力、ヘルメスの血は祝福してから使った方がいいわね。", "Sometimes eating blessed food will briefly increase your Luck, but don't waste holy water on that. Blessing potions increases the effect, especially for potions of restore body or mind, potential, and hermes' blood.")
			chatMore lang("祝福された武器は攻撃力と命中力が、防具は回避力と防御力がわずかにアップするわ。呪いで上書きされちゃうしまとめて祝福できないから、祝福された水が余っていない限り、他の道具に回した方が無難ね。", "Blessed weapons will be more accurate and powerful, and blessed armor will slightly increase your DV and PV. Curses overwrite blessings and you can't bless all your gear at once, so unless you have plenty of holy water you might want to save it for something else.")
			gdata(STARTING_GDATA_FLAG + 330)++
		}
		if ( chatval == 9 ) {
			chatMore lang("使えそうなのは装備を重くできる呪われた羽の巻物や、体重を重くできる呪われた鈍足とかかしら。呪縛の巻物で呪われた水を作っておくと、呪いたい時に便利よ。", "If you want your equipment to be heavier, you can use a cursed flying scroll. If you need to curse an item, you can read a scroll of curse or mix unholy water with it.")
			chatMore lang("ちなみに呪縛の巻物が呪うのは所持品からランダム。と、いうことは…？もし所持品が水だけなら…？", "Incidentally, scrolls of curse target a random item you're carrying or wearing. So, what if you drop everything but some bottles of water...?")
			gdata(STARTING_GDATA_FLAG + 330)++
		}
		if ( chatval == 10 ) {
			chatMore lang("＋値ね。基本的に、数値が高いと価格が跳ね上がるわ。食品なら料理、装備や家具なら高級な素材に素材変化するとさらに価格が上がるの。そして、栄養のある食品の場合は元々の能力鍛え効果も強化されるわよ。", "Enhancement value. The higher the number, the stronger and more valuable the item is. Food will strengthen you more, weapons will be more accurate, and other pieces of equipment will slightly improve your DV and PV. You can enhance equipment to +6 with scrolls, or to +10 at blacksmith shops.")
			chatMore lang("装備の場合は＋の数値分、性能が強化されているってことでもあるわ。武器なら攻撃力と命中力が、防具なら回避力と防御力が少しアップしているの。最大値は＋１０。強化の巻物を使うか、武具店で強化してもらえるわよ。", "Incidentally, the Cooking skill can also be used to improve the quality and value of food, while equipment and furniture can be improved by using a scroll to change their material to a better one.")
			chatMore lang("酸攻撃を受けると装備の＋値が減ったり−になったりするの。当然、性能も低下。素材変化で、一度でも耐酸能力のある素材に変えれば別の素材に変えても持続するわよ。もしくは耐酸性コーティング液を混ぜておきましょう。", "If you get hit with acid, your equipment will lose enhancement value, or even go into negatives. Naturally, this makes your gear less effective. Some materials are naturally acidproof, and changing an item's material can add acidproofing, but won't remove it. You can also mix acidproof liquid with your equipment.")
			gdata(STARTING_GDATA_FLAG + 330)++
		}
		if ( chatval == 11 ) {
			chatMore lang("喧嘩売ってんのか殺すぞ。", "Don't make me kill you. They'd dock my pay.")
		}
		if ( chatval == 12 ) {
			chatMore lang("エンチャントはランダムだから、とにかく数が重要ね。店や依頼で手に入れるだけじゃ足りないわ。こつこつネフィアで拾ったり、誰かから奪ったりしないと。その場合は、高品質以上を狙いましょう。鑑定できる道具を持っていれば、その場で確かめてもいいわね。", "Enchantments are random, but the number is important. It's not enough to just get everything from blacksmiths or requests. You can trade with other adventurers, but the best gear can be found in high-level Nefia. Spells, scrolls, or rods of identify let you examine items as you find them.")
			chatMore lang("軽い装備品なら、粗悪や良質でも自然鑑定上げに使えるかもしれないわね。でも重い装備はよっぽど重量と枠に余裕がない限り、高品質未満だとわかった瞬間捨てたほうがいいわ。その分他のものを拾いましょう。", "If equipment you find is light enough, you might want to keep it with you and identify it passively with Sense Quality. But unless a heavy item is at least Great quality, you should probably just leave it behind so you can carry more valuable loot.")
			chatMore lang("結婚指輪・首輪、羽、ソックス、スピードの指輪、パンティー、オーロラリング、ヴィンデールクローク、セブンリーグブーツ、フェアリーハットは軽くて固有効果も強いから、粗悪や良質でも拾い集めておきたいわね。特に結婚指輪・首輪は友好を深めるのにも使えるわ。", "Engagement rings and amulets, wings and feathers, sox, speed rings, panties, aurora rings, vindale cloaks, seven league boots, and fairy hats are lightweight and have unique, useful effects, so I'd pick them up regardless of quality. Especially engagement rings and amulets, since they can improve a relationship.")
			gdata(STARTING_GDATA_FLAG + 330)++
		}
		if ( chatval == 13 ) {
			chatMore lang("素材によって色々な効果があるわ。それに装備の能力も素材に応じて倍率がかかるの。倍率だから、元の性能が低いカテゴリ…指輪や首輪なんかは足りない耐性を補う素材を、元の性能が高いカテゴリは装備能力の高くなる素材を選ぶといいわ。", "Each material has a different effect, and can also strengthen or weaken different aspects of equipment. For jewelry, choose a material that improves your resistances. For weapons and armor, the material should improve their performance.")
			chatMore lang("素材変化の巻物はランダムだけど、祝福した方が上位の素材が出やすいの。他には素材槌っていう対応した素材に確定で変えるものもあるけれど…レアなのよねぇ。", "Scrolls that change material work in a fixed cycle of material types, with scrolls other than inferior material adding two additional materials to the cycle when blessed. There are also material kits that change an item to a specific material, but those are rare.")
			gdata(STARTING_GDATA_FLAG + 330)++
		}
		if ( chatval == 14 ) {
			chatMore lang("マテリアルは重さのない特殊な材料よ。そのままでは使えないけれど、錬金術の道具や工具、宝石加工ツール、裁縫セットで道具を自作する際に必要になるわ。今持っているマテリアルは、mキー…materialで確認できるの。", "Crafting materials are weightless and stored in your material inventory, which you can check with the [m] key. You can't interact with them like normal items. They're used with the Alchemy, Carpentry, Jeweler, and Tailoring skills.")
			chatMore lang("マテリアルはネフィア内にある採取スポットでsキー…search（探す）を行うと手に入るわ。採取スポットの種類に応じて釣り、採掘、栽培、生化学、探知のスキルが必要よ。浅い階層では上位のマテリアルは取れないことと、ネフィアのタイプによって取れる種類が変わることに気をつけて。あと、採取に成功しても失敗しても対応スキルに経験値が入るから、取っておきましょう。", "Material gathering spots can be found in Nefia and harvested by searching them with [s]. Depending on the type of spot you might need Fishing, Mining, Gardening, Gene Engineer, or Detection. You need to go deep into Nefia to get the best materials, and the types of materials that can be found depend on the type of Nefia. Harvesting also trains the related skill, even if you fail to collect materials.")
			chatMore lang("工作、錬金術、裁縫、宝石細工のスキルが上がれば、マテリアルで自作できるものも増えていくわ。自作することでも経験値が入るから、積極的に採取スポットで材料を集めていきましょう。仲良くなった仲間がスキルを持っていれば、マテリアルを集めてきてくれることもあるのよ。", "The higher your Carpentry, Alchemy, Tailoring, and Jeweler skills get, the more items you can make from more types of materials, letting you train your skills even higher, so be sure to collect all the materials you can. If your allies have certain skills, they'll collect materials as well.")
			gdata(STARTING_GDATA_FLAG + 330)++
		}
		if ( chatval == 15 ) {
			chatMore lang("合成の壺なんかを使うと、道具同士を合成して新しいものを自作したり、特殊効果を付与することができたりするわ。特定のスキルや道具が必要になるけれど、本当に色々なことが可能よ。一度確認してみるといいわ。", "A pot for fusion lets you combine items to make new ones or add a special effect to an item. You need specific skills and tools, but you can make a lot of useful things with it. Be sure to check it out at least once.")
			gdata(STARTING_GDATA_FLAG + 330)++
		}
		if ( gdata(STARTING_GDATA_FLAG + 330) <= 102 ) {
			chatMore lang("質問のある人はいるかしら？いたら聞きに来てね。", "Does anybody have more questions? If you do, come and ask.")
		}
		goto *chat_end
	}
	if ( _switch_val == CREATURE_ID_IDURU_THE_SEMINAR_LECTURER | _switch_sw ) {
		_switch_sw = 0
		if ( gdata(STARTING_GDATA_FLAG + 330) == 100 ) {
			if ( gdata(STARTING_GDATA_FLAG + 329) == 1 ) {
				chatMore lang("育成講座担当のイヅル・グンバイだ、よろしくな。師範とでも呼んでくれよ。さて、初回はcキー…characterで確認できる能力値について簡単に教えておくぞ。", "I'm Iduru Gumbye. Please call me \"Mr. Gumbye\". Welcome to the training lecture. Well, to start, let me briefly tell you about the character screen which you can check with [c].")
				chatMore lang("筋力や耐久といった値が主能力。潜在能力は、その能力がどのくらい伸びやすいかを示している。superb（素晴らしい）が最高で、hopeless（絶望的）が最低の状態だ。主能力は対応したスキルや能力、行動を行うことで自然に成長していくんだ。", "Things like Strength and Constitution are your main stats. Potential shows how easy it is to raise something. \"Superb\" is the best, \"Hopeless\" is the worst. Stats go up naturally by using corresponding skills and abilities.")
				chatMore lang("主能力の潜在を回復させるには、ランクの高い寝具で睡眠を取ることだ。寝る前に得た経験値が多いほど潜在も多く回復するけれど、睡眠を遅らせてまで経験値を稼ぐくらいなら早く寝たほうがいいぞ！規模の大きい魔法店が稀に入荷する、潜在能力のポーションを飲むのもいいけれど、レアゆえに供給がなかなか追いつかないだろうな。", "The potential of your stats is recovered when you sleep. High-quality beds recover more potential. Shops with a high rank occasionally stock potions of potential, but they're too rare to rely on.")
				chatMore lang("主能力に*マークがついているものは、装備によって能力維持…能力が低下しない状態になっている。上昇は普通にするから安心してくれ。能力維持されていないと、敵の弱体化技能や身体を痛めた影響で一時的に下がったりする。下がった主能力は肉体・精神復活の道具か魔法、街の癒し手で戻すといいぞ。", "Stats with a \"*\" next to them are sustained by your equipment, which protects them from being lowered by enemies. If your stats get lowered, use a spell or potion of restore body for physical stats, or restore mind for mental stats, or you can pay a town healer to restore them.")
				chatMore lang("スキルは、トレイナーにプラチナ硬貨を払うことで、習得したり潜在を回復させたりできるぞ。成長させるには経験値の入る行動が必要なんだ。どのスキルに経験値が入っているのかは、スキルトラック…スキルを*キーで登録すればわかりやすいな。", "You can learn new skills and restore skill potential by paying platinum coins to trainers in towns. This is very important for getting stronger. You can track your skills with [*] to keep track of their potentials.")
			}
			if ( gdata(STARTING_GDATA_FLAG + 329) == 2 ) {
				chatMore lang("今日は仲間…ペットと呼ぶ人もいるが…について軽く教えようか。", "Today's subject is allies... Or pets, as some people call them.")
				chatMore lang("仲間にできる数は主人の魅力が高まれば少しずつ増えていく。最大１５人まで増えるけれど、枠がないと依頼人やクエスト護衛対象を連れ歩けないから、最低１人分は空けておきたいな。", "The number of allies you can have will gradually increase with your Charisma. Eventually you'll reach the maximum of 15, but without a free slot you won't be able to do escort requests, so be sure to leave at least one space free.")
				chatMore lang("仲間は専門の店で買ったり、支配の魔法や杖で支配下に置いたり、モンスターボールで捕まえたりすることで増やせる。倒すことで仲間になる者や、信仰を深めると神からもらえる者もいるぞ。", "Allies can be found by reading a scroll of ally, using spells or rods of Domination, or by throwing a monster ball. Some monsters will join you if you defeat them, and the faithful can recieve divine allies from their gods.")
				chatMore lang("支配は魔法レベルや魔道具レベルが相手のレベルに比べて低いと成功しない。乱用は難しいけれど即、効果があるんだ。モンスターボールは特にスキルがなくても使えるけれど相手を瀕死にしないと成功しない。上手く使い分けよう。", "Domination is only possible if your Magic (for spells) or Magic Device skill (for rods) overpowers the enemy, but it works immediately. Monster balls don't require any particular skills, but only work if the opponent is near death. Keep it in mind.")
			}
			if ( gdata(STARTING_GDATA_FLAG + 329) == 3 ) {
				chatMore lang("前回に引き続き、仲間について説明しよう。応用編だぞ。", "Picking up where I left off last time, I will explain more advanced details about allies.")
				chatMore lang("仲間は能力を上げるだけではデコイにすらならないぞ。大抵は能力が同等以上の相手と戦うことになるわけだしな。ちゃんとした装備を与えてやろう。逆に言うと、装備が確保できていない状態で無理に仲間を戦闘に連れていくのはわざわざ殺しにいくようなものだ。", "Allies won't be able to survive if you ignore their gear. Be sure to equip them properly.")
				chatMore lang("育てるのは早期から並行してやっておきたいから、仲間をどんどん増やすのは構わない。ただ、装備が揃うまではお留守番させておこう。死なせると友好度も下がって嫌われちゃうぞ。生存率を上げるために、紐と聴診器は必ず使っておこう。仲間を回復するのに手いっぱいになるようなら、装備を見直したほうがいいぞ。", "It's good to have many allies, but don't recruit more unless you have equipment ready for them. If your allies die, your level of friendship with them will decrease. To help them stay alive, be sure to use a leash and a stethoscope on each of them.")
				chatMore lang("育て上げ、装備を固めた仲間は安心感が違うぞ。最終的には放っておいても神クラスを余裕で鎮圧するくらいになる。単純に攻撃手段も増えるしターゲットも分散するから、孤独を愛していない限り是非育成してみてくれ！", "A well-trained, well-equipped party is very strong, both because of the added damage of multiple attackers, and because crowds of enemies won't all be attacking a single person. Unless you're an extreme loner type, you should definitely recruit an ally or two!")
			}
			if ( gdata(STARTING_GDATA_FLAG + 329) == 4 ) {
				chatMore lang("もう第４回か…早いものだな。今までの話から、育成において潜在がどれだけ重要なのはわかってくれたかな？", "The final course already... Time sure flies. From what we have talked about, how important is potential in training?")
				chatMore lang("最終経験値は、元の経験値量をベースに、潜在と現在能力値によって増減するんだ。能力が低い間は少ない経験値と潜在でももりもり上がっていく。", "Experience gained in skills increases or decreases depending on potential and skill level. For low-level skills, even a small amount of experience and potential will help.")
				chatMore lang("だけどある程度能力が上がった後は、潜在や元の経験値量を上げないと最終経験値が微々たるものになってしまうんだ。切り捨てでゼロにすら成り得る。初回で教えたスキルトラックも使って、経験値の入り方を確認するのもいいだろうな。", "However, after the skill has improved to some extent, progress will drop off or halt completely unless you increase potential or do something more demanding. It might be good to use the skill tracker I mentioned in a previous course to monitor progress.")
				chatMore lang("元の経験値量については…主能力の「習得」が高いと、経験値が稀に増えることがある。あと、召喚された魔物や分裂体からは一切経験値が入らないので気をつけてくれ。こんなところかな？", "In addition, based on your Learning stat, there's a small chance for experience gained to be boosted. However, monsters that have been summoned or split off from other monsters will not provide experience.")
			}
			gdata(STARTING_GDATA_FLAG + 330) = 101
		}
		if ( gdata(STARTING_GDATA_FLAG + 329) == 1 ) {
			chatList 0, lang("おすすめのスキルは？", "Which skills do you recommend?")
			chatList 1, lang("技能って？", "Could you tell me about abilities?")
			chatList 2, lang("プラチナの入手法は？", "How do I gain platinum?")
			chatList 3, lang("師範って何？", "Could you tell me about masters?")
		}
		if ( gdata(STARTING_GDATA_FLAG + 329) == 2 ) {
			chatList 4, lang("仲間の能力を上げるには？", "How do I raise the attributes of my allies?")
			chatList 5, lang("仲間のスキルを上げるには？", "How do I raise the skills of my allies?")
			chatList 6, lang("仲間の潜在能力を高めるには？", "How do I improve the potentials of my allies?")
			chatList 7, lang("仲間が死んだら？", "What happens when my allies die?")
		}
		if ( gdata(STARTING_GDATA_FLAG + 329) == 3 ) {
			chatList 8, lang("友好度と主従度って？", "Could you tell me about Impress?")
			chatList 9, lang("タッグって何？", "What is tag organization?")
			chatList 10, lang("仲間の進化って？", "How do I evolve my allies?")
			chatList 11, lang("仲間にスキルを覚えさせるには？", "How do I make my allies learn new skills?")
		}
		if ( gdata(STARTING_GDATA_FLAG + 329) == 4 ) {
			chatList 12, lang("魔法を覚えるには？", "How do I learn magic?")
			chatList 13, lang("魔法の鍛え方は？", "How do I train magic?")
			chatList 14, lang("ＡＰとＩＮＩＴの関係は？", "Could you tell me about AP and INI?")
			chatList 15, lang("いづるんの実家って？", "How do I move my home?")
		}
		buff = lang("さぁ、質問はあるかい？", "So, do ya have any questions?")
		gosub *chat_select
		if ( chatval == 0 ) {
			chatMore lang("むうー…どのスキルも使い道があるからなぁ。優先的に取るべきなのは、生存力・成長力に関わる料理、持てる重量を増やす重量挙げ、出費を抑える交渉、他スキルの成長を助ける旅歩き、かな。", "Don't think like that. It's important to get every single skill. Still, you should prioritize some over others. Cooking to increase your stats, Weight Lifting to carry more items, Negotiation to help your finances, and Traveling to help all your skills grow.")
			chatMore lang("そこまで揃ったら、探索に役立つ自然鑑定、鍵開け、採掘、魔道具などのスキルを、そして目指すスタイルが決まったらそれに合わせたスキルを取ろうか。…まぁ、難しいことは考えず、全部取っても構わないぞ。早期から持っておけば他のスタイルに切り換えるのも楽だろうな。", "Once you have those, you might want adventure-related skills like Sense Quality, Lockpicking, Mining, Magic Device, and whatever sort of fighting style you prefer. ...Well, don't worry about it too much. Like I said, you want to get every skill eventually, so even switching your fighting style entirely wouldn't be a problem.")
			chatMore lang("街ごとにトレイナーの教えてくれるスキルは違うんだ。今挙げたスキルならここからすぐ北にあるヴェルニース、東南東にあるヨウィン、西北西にあるポート・カプールで全部揃うけれど、他の街のトレイナーにも確認してみるといいぞ。", "Each town's trainer teaches different skills. The skills I was talking about before can be learned in Vernis just north of here, Yowyn to the southeast, and Port Kapul to the northwest, but you should also check out the trainers in other cities.")
			gdata(STARTING_GDATA_FLAG + 330)++
		}
		if ( chatval == 1 ) {
			chatMore lang("例外もあるけれど、技能は主能力やスキルが一定値以上の時にレベルアップすると習得できるんだ。aキー…abilityから発動できる通常技能と、Ｗ(Shift+w)キー…Wideで発動できる広域技能がある。技能が増えてきたら、使わないものは*キーで非表示にしておくといいだろう。", "Most abilities are learned by leveling up with a stat or skill above a certain value. Normal abilities can be used with [a], and wide-area abilities can be used with [W]. Abilities you don't use can be hidden with [*].")
			gdata(STARTING_GDATA_FLAG + 330)++
		}
		if ( chatval == 2 ) {
			chatMore lang("うん！プラチナ硬貨は、主に依頼を達成した時に手に入るぞ。貰える枚数は依頼によって違うが、芸人依頼以外は名声１万とか２万とかごとに増えるからね。他にはネフィアを攻略したり、プラチナベルを倒すことでも手に入るけど、まぁ依頼報酬が基本かな。", "Platinum coins are mainly received by completing requests in towns. More difficult requests generally give more platinum coins. You can also get platinum coins by clearing Nefia or defeating a platina bell, but requests are the main source.")
			gdata(STARTING_GDATA_FLAG + 330)++
		}
		if ( chatval == 3 ) {
			chatMore lang("あー…それか。最初、イヅル・グンバイだからって「いづるん」というあだ名をつけられそうになってな。いい歳してそれは恥ずかしかったから、実家で呼ばれ慣れてる「師範」がいいと駄々をこねさせてもらった。", "Sorry, this is untranslated sentence.")
		}
		if ( chatval == 4 ) {
			chatMore lang("仲間の能力を上げたいなら、ランクの高い料理をこまめに与えるといいな。ハーブもいいぞ！潜在能力を高めに保っていれば、食事で能力値２００くらいまではスクスク成長するだろう。", "If you want to improve your allies' stats, feed them well-cooked dishes regularly. Herbs are good too! Also, be sure that they're able to buy training. An ally with the Pickpocket skill will collect extra money from defeated enemies to help cover the cost.")
			chatMore lang("聴診器を使えばわかるんだが、青緑色の時は食事可能、桃色の時は満腹だ。腹がすいたらすぐに食わせることができるように、料理は多く持っておくんだ。足りなきゃ果物の木やパン屋から調達しような。", "If you use a stethoscope on an ally, you can tell when they're hungry because their pink HP bar will turn turquoise. Keep plenty of food handy and feed them as soon as they get hungry. If you're low on food, collect fruit from fruit trees or buy food from bakeries.")
			gdata(STARTING_GDATA_FLAG + 330)++
		}
		if ( chatval == 5 ) {
			chatMore lang("スキルの潜在能力を高く維持して、対応した行動をとらせよう。特に、戦闘スキルは交戦しないとなかなか伸びないからな。育てたい仲間が交戦する前に、敵を片っ端から先制攻撃で倒したりしないように。経験を積む機会をちゃんと与えてやるのも育成のうちだぞ。", "Keep their skill potentials high and practice, practice, practice. You'll need to let them get into fights if you want to train their combat skills. And remember, defensive skills won't be trained if you're just defeating weak enemies with a single blow.")
			chatMore lang("一応、旅歩きスキルを覚えさせていれば旅の中で見識を深め、少しずつ他のスキルも成長していくな。だけどあくまで補助的な経験でしかないから、旅歩きだけで上げようとするのは逆にしんどいぞ。色々な経験をさせてやれるよう、心がけてれば自然と育つもんさ。", "With the Traveling skill, by traveling from town to town, all skills will slowly increase. However, Traveling by itself isn't enough to get stronger. Still, it'll add up over time. Every little bit helps.")
			chatMore lang("仲間に新しいスキルを覚えさせる方法はまたの機会に説明するよ。それまでに、誰がどのスキルを持っているかをちゃんと把握しておこう。街の情報屋で教えてもらえるぞ。", "Unfortunately, city trainers won't teach new skills to allies, but I'll explain a possible way to achieve that in another lesson. In the meantime, work on the skills they already have.")
			gdata(STARTING_GDATA_FLAG + 330)++
		}
		if ( chatval == 6 ) {
			chatMore lang("潜在能力が低いままだと、頑張っても経験値が少ないから効率が悪いんだ。お金や宝石類を持たせれば、街で勝手に訓練して主能力とスキルの潜在を高めるぞ。余ってる場合は拾わせてあげよう。", "Without potential, your allies won't get stronger. Let them pick up gold coins or give them ores like mica and rubynus to sell, and when in a town they'll buy training to increase the potential of their stats and skills.")
			chatMore lang("訓練に必要な費用は、当人の初期能力…ＩＮＩＴに応じて変わるんだ。ＩＮＩＴが低ければ低いほど、訓練費も少なくて済む。強く成長した後も初期能力依存だから増えない。むしろ魅力が高まればそこからさらに減るのさ。", "The cost of training depends on INI, the ally's initial power. Even as they grow stronger, the cost of training won't increase. In fact, as their Charisma goes up, the cost will decrease.")
			gdata(STARTING_GDATA_FLAG + 330)++
		}
		if ( chatval == 7 ) {
			chatMore lang("死んでしまった仲間は、街のバーテンダーが有料で蘇生してくれるぞ。復活の書か、復活の魔法があれば自分でも蘇生できるけど、まぁ前者はレアだし後者は使いこなせるようになるまでが大変だな。", "If your allies die, town bartenders will revive them for a fee. If you have a book of resurrection or can cast the spell Resurrection you can revive them yourself, but both of those are hard to come by.")
			gdata(STARTING_GDATA_FLAG + 330)++
		}
		if ( chatval == 8 ) {
			chatMore lang("仲間に活躍させたり、特定の贈り物をすることで友好度が上がる。友好度が高いと色々と判定が有利になるし、料理スキルがあれば朝食を、裁縫・大工スキルがあれば防具を作ってくれるようになったり、魂の友以上になると結婚もできるようになるんだ。媚薬をぶつけることでも上がるけれど、媚薬だけではお友達までにしかなれないから注意だぞ。", "Friendship increases by letting allies fight for you and by giving them gifts. With high friendship, allies with Cooking will cook breakfast, and allies with Tailoring and Carpentry will craft armor for you. If you become Soul Mates, you can marry an ally. You can also use an aphrodisiac to make someone like you, but I don't recommend it.")
			chatMore lang("地面にあるものを我慢させ、もし手を出したら押しのけることで、主従度が上がる。いわばシツケだな。色々と従順になるが、友好度でほぼ代用できる。主人として接するのか、対等な立場として接するのか。そこをハッキリさせる、くらいの感覚でいいんじゃないかな。", "Allies that have been instructed not to interact with items on the ground might sometimes do so anyway. For example, an ally that's hungry might start eating food on the ground. Depending on whether you push that ally away from the food or let them continue eating, it would affect your master/servant relationship. Do you want a submissive ally, or a willful one? ...Or maybe you don't care about that stuff and just want your ally to stop causing trouble? In that case, just use a tamer's whip on them.")
			gdata(STARTING_GDATA_FLAG + 330)++
		}
		if ( chatval == 9 ) {
			chatMore lang("タッグを組ませると、ベースにした仲間が移動権を握って行動を共にする。もし二人の攻撃間合いが一致していれば、追随側は移動を省略して攻撃に専念できるわけだ。一致していないと足を引っ張り合うことになるけれどな。強制的に速度が遅いほうに合わせられるから、なるべく速度の近い組み合わせにするといい。", "With a tag team, an ally occupies the same space as you or another ally. The one who makes the team moves and acts normally, so the ally who joins the tag team doesn't need to move around and can focus on attacking.")
			chatMore lang("似たような戦闘タイプ…特に近接型を組ませて戦闘効率を上げるのは基本だな。庇いあうことで生存力が上がり、取得物が分配されたりするので弱い仲間を強い仲間と組ませて保護してもいいぞ。", "It's important to keep the tactics used by allies in mind when forming a tag team. When done correctly, they can be much stronger. They'll also protect each other, so you can pair weak allies with strong allies to help them survive.")
			gdata(STARTING_GDATA_FLAG + 330)++
		}
		if ( chatval == 10 ) {
			chatMore lang("進化には特定のアイテムが必要なんだ。その仲間に対応しているかは使ってみないとわからないし、そもそも対応する進化アイテムがないやつも多い。進化アイテムは特定の敵が落とすぞ。友好度が高くないと進化を拒否されるから仲良くなっておこうな。", "Evolution requires special jewels called Evolution Hearts, which are dropped by certain enemies. Evolution is only available for certain kinds of creatures, and only if you've formed a strong bond of friendship with them.")
			chatMore lang("進化すると単純に能力が上がったり、新たな技能を習得するケースもある。姿や名前が変わるけれど、扱い的には元のままで変わっていないから誤解しちゃだめだぞ。", "Evolution increases stats and sometimes grants new abilities. It changes your ally's appearance and name, but it's still the same ally as before, so don't worry.")
			gdata(STARTING_GDATA_FLAG + 330)++
		}
		if ( chatval == 11 ) {
			chatMore lang("あまり浸透していないけれど、仲間にスキルを覚えさせる方法としては能力合成っていうのがあるんだ。他の仲間を分解して能力を移植する、生化学文明時代の技術だな。仲間のレベル以上の生化学スキルが必要だ。確か、ポート・カプールの学者が個人レベルでも使えるように研究していたはずだぞ。", "Though it's not well known, with knowledge of Gene Engineer it's possible for allies to learn new skills. It uses technology from the era of biochemistry civilization to decompose beings and transplant their abilities. I heard of it from a scholarly acquaintance of mine from Port Kapul.")
			chatMore lang("能力を合成することで、素体からスキルや装備部位を移植できる。さらに、素体の主能力が上回っていれば最大で３種類＆１０上昇する。料理で上がらなくなる前に、生化学を鍛えてこちらに切り替えていこう。間違って強くしたい方を分解しないように、話しかけて大事な仲間に指定しておくのを忘れずに。あと、視界内にいないと能力が上昇したかどうかわからないから気をつけてくれよ。", "Theoretically, you could transplant new skills and even body parts into an ally, as well as empower them. Of course, before doing anything that dangerous you'd want to talk to the ally you want to keep and make them a precious ally so they wouldn't end up getting accidentally decomposed!")
			gdata(STARTING_GDATA_FLAG + 330)++
		}
		if ( chatval == 12 ) {
			chatMore lang("魔法は、夢で覚えるか、不思議な巻物で覚えるか、魔法書を解読して覚えるかだ。前者ふたつはランダムなのでおまけ程度に考えて、魔法書をメインにしたいな。いずれにしても、手に入れたストックを使い切るとその魔法を再補充する必要があるぞ。", "Spells can be learned from dreams, from scrolls of wonder, or from spellbooks. The former two are random, so as a rule you'll get most of your spell stocks from spellbooks.")
			chatMore lang("魔法書には種類ごとに難易度があって、相応の読書スキルが必要なんだ。解読に失敗するとＭＰに大ダメージを受けたり魔物が召喚されたりすることもある。何度も失敗するレベルのものを強行したり、倒せない魔物が湧くと困る場所で読んだりしないように。", "Spellbooks have difficulty levels for each type, with more difficult books requiring a higher Literacy skill. Failing to read a book may drain your MP or summon dangerous enemies, so be careful where you read, and don't keep trying to study a book after failing repeatedly.")
			chatMore lang("解読で得られる魔法ストックの量は、暗記スキルで増えるから取っておこう。収穫と願いの魔法書以外は充填である程度使いまわすことができるし、一度解読したものは魔術士ギルドに入れば作家から予約して買えるぞ。", "Reading a spellbook increases your spell stocks based on your Memorization skill. Also, if you join the Mages' Guild, you can put in requests with their spell writer for copies of specific spellbooks, although you can't request spellbooks of Wizard's Harvest or Wish.")
			gdata(STARTING_GDATA_FLAG + 330)++
		}
		if ( chatval == 13 ) {
			chatMore lang("魔法は使うことで経験値が入り、レベルアップする。詠唱スキルが低いと詠唱成功率が微妙だから、積極的に唱えていこう。魔法にも潜在能力があって、cキーのリストから確認できるぞ。魔法の潜在能力は、スキルなどとは違い睡眠をとることで少しずつ回復していく。", "Casting spells enough times increases their level, which improves the spells' power and success rate. You can check the potential of your spells in the character menu accessed with [c]. The potential of spells is recovered when you sleep.")
			chatMore lang("街の魔術士にプラチナ硬貨を払えば、魔法実習ができる。実習ではストックを消費せずに複数の魔法に経験値が入るぞ。珍しい魔法や普段使っていない魔法も鍛えられるんだ。レベルアップすると詠唱成功率と効果が上昇するから最初に何回か受けておくのもいいだろう。ただし消費ＭＰもちょっと増えるから注意だ。", "You can pay a town wizard platinum coins for a magic practice session. This trains multiple spells without using spell stocks. It's a good way to quickly improve your spells. However, keep in mind that higher level spells cost slightly more MP to cast.")
			chatMore lang("ちなみに、仲間の魔法は種類に関係なく一括管理されているぞ。魔法レベル＝詠唱スキルレベルに簡略化されているから、その仲間の詠唱スキルを上げていこう。範囲魔法を使う場合は、自分も仲間も魔力制御スキルが必須レベルなので忘れずに。", "By the way, you don't have to worry about any of this for spellcasting allies. All they need is the Casting skill. Oh, and if you or your allies will be using bolt spells or area spells, the Control Magic skill is essential.")
			gdata(STARTING_GDATA_FLAG + 330)++
		}
		if ( chatval == 14 ) {
			chatMore lang("ＡＰっていうのは能力の覚醒に必要なポイントだ。一定の強さ以上の敵を倒すことで入手できるぞ。倒した時に何かがひらめくような感覚があるからわかるはずだ。", "AP are Awakening Points, which you can get by defeating strong enemies. You'll see a quick flash when you gain AP.")
			chatMore lang("入手には色々と細かい条件があるけれど、だいたいＩＮＩＴや速度が自分より高い相手が対象になるんだ。つまり、ＩＮＩＴが低い…最初は弱い者ほどＡＰが貯まりやすいってことだな。", "To put it simply, gaining AP is mostly based on INI, particularly Speed INI. That is, someone who started out weak and slow will have a head start gaining AP.")
			chatMore lang("噂ではＡＰを使って能力強化やスキル成長、特殊なフィート取得ができるって話だけれど…。少なくともノースティリスでそんなことができるという者は知らないぞ。もし本当なら、育成のために積極的に強い敵を倒してＡＰを入手していきたいな。", "It's rumored that AP can be used to improve your skills, gain new abilities, and unlock unique powers... However, I don't think there's anyone in North Tyris capable of doing such a thing. Maybe someday, if you travel to new lands, you might discover the secret of AP...")
			gdata(STARTING_GDATA_FLAG + 330)++
		}
		if ( chatval == 15 ) {
			chatMore lang("恥ずかしいから師範と呼んでほしい…！！", "Sorry, this is untranslated sentence.")
			chatMore lang("あー…実家の道場はずっと南の方にあってね。有料だけど仲間を枠から外して預けることができる。冒険している間に少しずつ鍛えてもらえるし、有料で全員まとめて潜在を回復させたりもできる。宣伝じゃないけど、まぁ活用してみてくれ。", "Sorry, this is untranslated sentence.")
		}
		if ( gdata(STARTING_GDATA_FLAG + 330) <= 102 ) {
			chatMore lang("何か質問があったら聞きに来てくれ。", "If you have any more questions, please come and ask.")
		}
		goto *chat_end
	}
	if ( _switch_val == CREATURE_ID_MITO_THE_SEMINAR_LECTURER | _switch_sw ) {
		_switch_sw = 0
		if ( gdata(STARTING_GDATA_FLAG + 330) == 100 ) {
			if ( gdata(STARTING_GDATA_FLAG + 329) == 1 ) {
				chatMore lang("こんにちは！ミトリンこと、戦闘講座担当ミト・リディアンだよ。よろしくね。", "Hello! I'm Mito Lydian, combat course instructor. Let's begin!")
				chatMore lang("戦闘は、生計を整えて道具をそろえて育成した先にあるものだから、他の先生たちの講座を先に体験してからのほうがスムーズかもね。", "Because battle comes after earning a living and learning about items, it might be easier to hear other teachers' lectures first.")
				chatMore lang("そもそも、ある程度準備が整うまでは、街の討伐依頼すら危険だよ！無理な戦闘はしないでね。体力を一度に数割削ってくるような相手に出会ったら、返しで倒す自信がない限りすぐに逃げよう。手こずるような相手を複数相手にするのも避けようね。敵がうじゃうじゃいるところに突撃なんてもってのほかだよ。", "In the first place, until you've prepared yourself, even combat requests in cities will be dangerous! Don't get into fights you can't win, and don't stick around if the odds are against you. If you run into an enemy that's much stronger than you, or you're outnumbered by many foes, retreat!")
				chatMore lang("初心者だと、攻撃が全然当たらない相手や、ダメージをほとんど与えられない相手に、ムキになって殴りかかっている間に敵に囲まれたり体力を削られていくパターンもあるよ。少しずつでいいから相手の特性を覚えていって、優先順位を考えて動けるようになろうね。", "If you're a careless novice, you might get surrounded and beaten senseless by enemies that you can barely scratch or can't even touch. Study your opponents, keep their capabilities in mind, and prioritize your targets accordingly.")
			}
			if ( gdata(STARTING_GDATA_FLAG + 329) == 2 ) {
				chatMore lang("戦闘講座始めるよー。今日もがんばろうね！", "Time to start the battle course. Let's do our best today too!")
				chatMore lang("んー…。まず、強い冒険者っていうのは能力値が高いって意味ではないの。能力値が１００あっても１０００あっても、能力値の劣る相手にしか勝てないんじゃ強いとは言えないよね。そんなの野生動物と変わらないよ。", "Hmm... First of all, a strong adventurer does not mean that the ability value is high. Even if the ability value is 100 or even 1000, it can not be said that it is strong if you can win against only those with inferior ability values. It's no different from wild animals to be like that.")
				chatMore lang("本当に強い冒険者は、あらゆる物の使い方を知っているわ。個々の要素の力を最大限に引き出して、自分の数倍の能力を持つ相手を安定して殺すの。勝てないほどの差があっても、相手の戦い方を見極めたうえで生還して次につなげ、最後には勝つんだよ。", "A truly strong adventurer knows how to use everything at their disposal. To maximize the power of each individual element and reliably kill opponents several times their own strength. To survive even against a seemingly unbeatable opponent, figure out a strategy to use against them, and then triumph.")
				chatMore lang("事前準備の段階からもう戦闘は始まっているんだよ。防御は固めず回復手段も逃走手段も用意せずに戦いに行くのは、冒険じゃなくて自殺行為だってことを覚えておいてね。", "The most important part of any battle is not the fight itself, but the preparation before the fight. Setting out without defensive gear or means of healing and escaping isn't \"adventure\", it's suicide.")
			}
			if ( gdata(STARTING_GDATA_FLAG + 329) == 3 ) {
				chatMore lang("戦闘講座第３回…ともなると、そろそろみんなも自分の得意武器や戦闘スタイルが固まってきた頃じゃない？今日はメインウェポン以上に大切な、サブウェポンについて教えるね。", "The third combat lecture... So, by now you've all found weapons and combat styles that suit you, right? Today's lesson will be about the importance of having \"sub weapons\" in addition to the main weapon.")
				chatMore lang("今はまだ単純に武器で殴ったり魔法の矢を撃ったりするだけでいいかもしれない。でも冒険を進めていくうちに、物理攻撃に強い敵や魔法に強い敵、属性攻撃を無効化する敵なんかと戦うことになるの。そうした時にサブウェポンとして別系統の攻撃手段がないと、有効打を与えられずに死ぬほど苦労することになるよ。", "It may be fine to just swing a weapon or shoot a magic arrow for now, but as you continue to adventure, you'll fight enemies that are strong against physical attacks, enemies that are strong against magic, and enemies that are immune to elemental attacks. If you don't have an alternate means of attacking at that point, you'll be in trouble.")
				chatMore lang("物理型なら武器のエンチャントで属性攻撃ができるから、得意スキルに依存する無属性攻撃技能をひとつくらいでいいよ。魔法使いなら攻撃魔法を魔法属性とそれ以外に好きな属性からひとつ選ぶ感じで。範囲攻撃魔法も使えるようになっておこう。", "Enemies with strong physical defenses can still be damaged by a weapon's elemental damage, so fighters can cover multiple angles that way. If you're a spellcaster, you can use one Magic-element spell like Magic Dart in addition to the element of your choice. It's also good to have beam and area spells.")
				chatMore lang("攻撃手段が異なる仲間を複数そろえて、仲間自体をサブウェポンみたいに使うって手もあるね。相性の悪い相手の時は回復に専念することになっちゃうけど。とにかく、勝ち筋を増やしておいて損はないよ。", "There are other ways of organizing different means of attack and using them like sub weapons. For example, against a magic-resistant enemy, a spellcaster could fall back and focus on healing a fighter ally. Go with whatever works for you, as long as you're prepared for enemies with a variety of defenses.")
			}
			if ( gdata(STARTING_GDATA_FLAG + 329) == 4 ) {
				chatMore lang("みんなはこの先、冒険の中で本当に色々な敵と戦うことになるよ。単純なステータスや防御力や回避力だけじゃない、特殊な能力を持っていたりする敵も多いから、対策を知らないと苦戦するかも。", "You're eventually going to run into all kinds of enemies in your travels. Enemies that can dodge or block attacks, enemies that can resist magic, and even enemies with unique abilities, so you're bound to run into trouble if you don't at least have a backup plan.")
				chatMore lang("相手が『』《》つきじゃないなら、状態異常や変化の杖でどうにでも処理できるんだけど、ね。最後となる、第４回では具体的にそういう厄介な敵の対処法を教えるね。", "If the enemy does not have <> or {} you can handle anything with a rod of change monster, but in this final session we will teach how to deal with certain particularly troublesome enemies.")
			}
			gdata(STARTING_GDATA_FLAG + 330) = 101
		}
		if ( gdata(STARTING_GDATA_FLAG + 329) == 1 ) {
			chatList 0, lang("上手く逃げるには？", "How do I escape combat successfully?")
			chatList 1, lang("敵の強さを知るには？", "How do I know the strength of enemies?")
			chatList 2, lang("どのくらいの難易度に挑めばいいの？", "How difficult should an enemy be before I challenge them?")
			chatList 3, lang("相手が速すぎる場合は？", "What do I do when the enemy is too fast?")
		}
		if ( gdata(STARTING_GDATA_FLAG + 329) == 2 ) {
			chatList 4, lang("防御を固めるって？", "How do I improve my defense?")
			chatList 5, lang("回復手段って？", "How do I heal?")
			chatList 6, lang("状態異常の対策方法は？", "How do I get rid of abnormal status effects?")
			chatList 7, lang("ミトリンは好きな人いるの？", "Do you have someone you like?")
		}
		if ( gdata(STARTING_GDATA_FLAG + 329) == 3 ) {
			chatList 8, lang("回避力が高い相手はどうすればいい？", "How do I deal with enemies with high evasion?")
			chatList 9, lang("防御力が高い相手はどうすればいい？", "How do I deal with enemies with high defense?")
			chatList 10, lang("回復力が高い相手はどうすればいい？", "How do I deal with enemies with high recovery abilities?")
			chatList 11, lang("アイテムを上手く投げるには？", "How do I skillfully throw items?")
		}
		if ( gdata(STARTING_GDATA_FLAG + 329) == 4 ) {
			chatList 12, lang("カウンターしてくる敵の対策は？", "How do I deal with enemies that counter?")
			chatList 13, lang("自爆する敵の対策は？", "How do I deal with self-destructing enemies?")
			chatList 14, lang("分裂する敵の対策は？", "How do I deal with enemies that split themselves?")
			chatList 15, lang("透明な敵の対策は？", "How do I deal with invisible enemies?")
		}
		buff = lang("質問があれば、何でも言ってね？", "If you have any more questions, just ask away.")
		gosub *chat_select
		if ( chatval == 0 ) {
			chatMore lang("テレポートが基本だけど、巻物は盲目の時には読めないし、魔法は混乱の時や沈黙を受けている時には使えないよ。両方を用意しておくか、確実に杖を使えるようにしておこう。", "Teleporting is the easiest, but it can be blocked. Scrolls can't be read if you're blind, while spells can't be cast if you're silenced and are difficult to cast if you're confused. Rods of teleportation can be used reliably with good Magic Device skill, but some places simply block teleportation entirely.")
			chatMore lang("ただ、テレポートはどこに飛ぶかランダムだから死んじゃう寸前じゃなくて、余裕を持って使おう。ショートテレポートや空間歪曲はすぐ近くに移動する可能性が特に高いから、過信しないようにね。", "However, where you end up when teleporting is random, so try to use it before things get too bad and make sure to have enough room around you before using it. Short Teleport and Dimensional Move have a high chance of only moving you a short distance, so don't get too overconfident.")
			chatMore lang("敵との距離が離れている場合は、壁生成や扉生成でさえぎって追撃を防ぐのも有効だよ。モグラの魔物や、名前に『』や《》がつく変異種には破壊されちゃうけどね。", "Keeping your distance from enemies and utilizing walls and doors to obstruct their path when they're chasing you is also effective. However, certain special enemies can destroy things in their path.")
			gdata(STARTING_GDATA_FLAG + 330)++
		}
		if ( chatval == 1 ) {
			chatMore lang("＊キーで「見る」と、相手とのおおよそのレベル差がわかるよ。でも装備や戦い方で体感的な強さが大きく変わるから、本当に目安でしかないの。インサイトレンズっていう道具を使えば相手の能力値は確認できるけど…。", "Press [*] to look at your target and get a description of their level compared to yours. However, it's only a guidance and a fight can drastically change depending on the gear you use. You can however use an insight lens to find out more detailed statistics about your target.")
			chatMore lang("攻撃方法とかは、実際に戦って覚えるしかないの。名前や見た目からある程度推測できる部分もあるよ。行動を把握する前に力任せに倒しちゃうと、後でパワーアップして出てきた時に痛い目を見るかも…？相手の力を見極めて知識として蓄積していくのも、戦闘では大事なことだよ。", "You can guess at an opponent's abilities from their name and appearance, but the only surefire way to learn what they can do is to fight them and learn firsthand. But if you just take out enemies without paying attention to their abilities, you might be in for a painful surprise later on. It's important to learn and remember just what kind of threat is posed by each type of foe you battle.")
			gdata(STARTING_GDATA_FLAG + 330)++
		}
		if ( chatval == 2 ) {
			chatMore lang("最初の最初は、街の外…野外にEnterして、食料を拾いつつ野生動物と戦ってみよう。囲まれないように気をつけてね、死んじゃうよ。やどかりやかぶと虫を安定して倒せるようになってきたら、このゼミのすぐ北西にある「子犬の洞窟」に挑戦してみよう。底まで潜るのに必要な食料や補助アイテムの量を、感覚でつかんでおこうね。", "In the beginning, in the wilderness outside the city, you can fight against wild animals while gathering food. Be careful not to be surrounded, or you'll die. Later, when you're stronger, you can challenge the \"Puppy Cave\" just northwest of this seminar. Be sure to bring enough food and supplies before going deep into dungeons.")
			chatMore lang("子犬の洞窟を楽々探索できるようになったら、その辺の手ごろなネフィアに挑戦してみて。冒険者として、自分がどの辺りまで潜れる力があるのかは定期的に把握しておこう。準備万端ならそうそう死にはしないし、きつかったら撤退して、挑む階層を少し下げればいいからね。", "If you find the Puppy Cave easy, try exploring low-level Nefia around that area. As an adventurer, try to have an idea of how dangerous of a Nefia you can explore safely. If you're having trouble, retreat and go back to less dangerous Nefia.")
			chatMore lang("覚えておいてほしいのは、ネフィアの入口の階層レベルは挑戦推奨レベルとは違う、あくまでひとつの目安ってこと。一定以上の階層じゃないと出ないアイテムやマテリアルもあるから…積極的に深層を目指して冒険者として成長していこうね！", "Remember, the level of a Nefia doesn't mean the recommended level for an adventurer, it's only a general guide. Also, some items and materials can only be found in Nefia of a certain level. Work to become stronger and conquer the most dangerous Nefia!")
			gdata(STARTING_GDATA_FLAG + 330)++
		}
		if ( chatval == 3 ) {
			chatMore lang("主能力の速度が行動回数に影響しているの。この差が大きいと敵に連続で行動されちゃう。攻撃が激しくなるのは当然として、行動ターンが多く回ってくるから体力の自然回復も増えるんだよ。加速や鈍足、乗馬を使って差を埋めようね。", "Your Speed stat determines how quickly you act. An enemy much faster than you will be able to attack you repeatedly. An extremely fast enemy could heal damage faster than you could inflict it. Increase your speed with potions, rods, and spells of Speed. The Riding skill is also an option.")
			chatMore lang("ただ、行動ターンが多く回ってくるってことは毒や出血、地面の酸でもりもり削られるってことでもあるの。速いけど体力の少ない敵は、染料や毒薬をぶつければあっけなく倒せたりするから試してみてね！", "However, effects like poison, cuts, and acid floors occur on an enemy's time, not your time. You might be able to defeat a fast but weak enemy by throwing dyes or poisons. Give it a try!")
			gdata(STARTING_GDATA_FLAG + 330)++
		}
		if ( chatval == 4 ) {
			chatMore lang("物理攻撃に対する強さとして、回避力のＤＶと防御力のＰＶがあるね。回避力を捨てて防御力だけ上げるか、回避力を上げて最低限の防御力は確保するか選ぼう。全ての物理攻撃を完全回避するのはむずかしいから、防御力を捨てる選択肢はないかなぁ。聖なる盾やフェザーで補ってもいいけどね。", "To protect against physical attacks, you have DV, Defense Value, and PV, Protection Value. DV helps you dodge attacks, and PV reduces the damage you take. You might want to specialize in one or the other, although it's hard to dodge every single attack, so I wouldn't recommend ignoring PV altogether.")
			chatMore lang("あとは、各属性の耐性も少しずつ上げていこう。全く耐性のない属性攻撃は致命傷になるよ。火炎と冷気に至っては、耐性が低いと属性攻撃で持ち物を失うことがあるの。ダメージは減らせないけど、耐火ブランケットと耐冷ブランケットを持っておけば回数分持ち物を守ってくれるよ。余裕があれば仲間にも持たせてあげてね。", "Later on, you'll want to increase your elemental resistances. Having no resistance to an element can prove fatal. With less than Superb resistance to fire and ice, you might even lose items, although you can prevent this with fireproof and coldproof blankets. If you have extra blankets, you can give them to allies.")
			chatMore lang("最終的には全部の耐性を素晴らしい耐性まで上げたいけれど、揃うまでは属性耐性のポーションや魔法で補ったり、複数の装備を付け替えて対応することも考えようね。", "It'd be great to have every resistance at Superb, but that might take a long time. Casting Attribute Shield and drinking potions of resistance can help in the meantime, or you can rearrange your equipment if you know an enemy that uses a specific element is ahead.")
			gdata(STARTING_GDATA_FLAG + 330)++
		}
		if ( chatval == 5 ) {
			chatMore lang("実用的な回復手段をどれだけ用意できるか…これも重要だね。最低でも一度にＨＰを半分以上回復させる手段がないと、思わぬダメージを受けた時に立て直すのが難しいよ。杖、魔法、ポーション、特定の技能。それぞれ一長一短があるからこのうち２つ以上は使いこなせるようにしておこう。巻物は…回復量が伸びないから最初のうちだけかな。", "Recovery measures are very important. If you don't have a way to recover at least 50% of your HP, you'll be in trouble if you get ambushed. Rods, spells, scrolls, potions, and certain abilities can heal you. Each has advantages and disadvantages, so it's good to use at least two kinds. Scrolls are only useful for beginners, though, since they only heal a fixed amount.")
			chatMore lang("残りＨＰの管理は死なないための基本だよ。仲間にはちゃんと聴診器を使っておこうね。コールファミリアという技能を使えば仲間を退避させることもできるよ。", "Managing HP is important to stay alive. Be sure to use a stethoscope on your allies. In a pinch, you can send allies home with the Call Familiar ability.")
			chatMore lang("ＭＰの回復は魔力の杖でいいとして…ＳＰの急激な回復は難しいから消耗に気をつけてね。リジェネレーションで自動回復量を上げることも考えよう。最後の手段として、祈りがチャージされていればpキー…pray(祈る)でＨＰ・ＭＰ・ＳＰを全回復できるから神への捧げものはしておこうね。", "You can recover MP with a scroll or rod of mana, but it's difficult to recover SP. You can recover a little SP passively by casting Regeneration, or actively by casting Restore Body. As a last resort, if you have a god and your prayer is charged, you can recover all HP/MP/SP by praying with [p].")
			gdata(STARTING_GDATA_FLAG + 330)++
		}
		if ( chatval == 6 ) {
			chatMore lang("状態異常は色々あるけれど、戦闘においては属性攻撃で発症したりするね。耐性が低かったり何度も受けると、長引いたり効果が増したりするの。だいたいはターン経過で消えるけど、回復を行うことでさらに短くできるよ。", "Status ailments can be caused by various things, but in battle the most common cause would be elemental attacks. With low resistance or many attacks, the duration will be increased. Status ailments go away over time, but you can cure most statuses instantly with healing effects.")
			chatMore lang("無効化するエンチャントのついた装備を身に着けるのが理想的だけど、それまでは無効効果のあるバフをあらかじめかけておくくらいかなぁ。麻痺や睡眠は行動不能になるし、盲目は何も見えなくなるし、混乱時に魔法を使うと自滅するし、毒や出血は放っておくと死にかけるし、どれも危険だよ。", "Ideally you'd wear equipment with an enchantment that grants immunity, but until then you can use buffs that prevent statuses. For example, Hero prevents Fear and Confusion, and Concentration prevents Sleep and Confusion.")
			chatMore lang("逆に、相手に麻痺や盲目をかけることができればかなり有利に戦えるってことだよね。『』や《》のついている相手にはほぼ効かないけど、効く相手には一発で効くから、無力化したい相手に状態異常ポーションをぶつけたりしてみよう。", "On the other hand, if you can paralyze or blind an opponent, you'll have an easy fight. It's nearly impossible on <> or {} enemies, but otherwise it's a reliable tactic to neutralize your foes.")
			gdata(STARTING_GDATA_FLAG + 330)++
		}
		if ( chatval == 7 ) {
			chatMore lang("へっ！？", "Ehh!?")
			chatMore lang("…。", "...")
			chatMore lang("ひ、秘密ぅ…。", "It's a s-secret...")
		}
		if ( chatval == 8 ) {
			chatMore lang("種族特性で回避力が元から高いモンスターがいるんだよね。わかりやすいのだと、コウモリとか。魔法は必中だから魔法使いだとあんまり問題ないんだけどね。", "Some kinds of enemies, like bats, have high evasive power. They'll dodge most normal attacks, so use magic or abilities.")
			chatMore lang("会心の一撃が出れば物理攻撃も必中だけど、出るまで殴り続けるのも大変だよ。通常攻撃を介さないタイプの攻撃技能は必中だから試してみてね。他には…睡眠状態にすれば避けられないよ。", "You could just try attacking them repeatedly until you eventually hit them, but there's no time for that in serious combat. Abilities and spells never miss, so use those instead. Of course, sleeping enemies can't dodge attacks...")
			gdata(STARTING_GDATA_FLAG + 330)++
		}
		if ( chatval == 9 ) {
			chatMore lang("種族特性で防御力が元から高いモンスターがいるんだよね。わかりやすいのだと、やどかりとか。魔法は防御無視だから魔法使いだとあんまり問題ないんだけどね。", "Some kinds of enemies are nearly immune to physical attacks. Of course, a mage's spells bypass such defenses.")
			chatMore lang("完全貫通が出れば防御力の大半を無視できるけれど、装備に完全貫通エンチャントがないとまず出ないよ。通常攻撃を介さないタイプの攻撃技能の中には、防御無視のもあるから試してみてね。防御力を下げる魔法やアイテムも使おう。", "If you land a *vorpal* hit on an enemy, most of their defenses will be bypassed, but it requires the \"absolute piercing attack\" enchantment on your equipment to happen. You can also use spells and thrown potions to weaken enemies' defenses.")
			gdata(STARTING_GDATA_FLAG + 330)++
		}
		if ( chatval == 10 ) {
			chatMore lang("回復行動を連打する、倒すのが困難な相手とも戦うことがあるかもね。ちょっとやそっと火力を上げたくらいじゃ突破できないけれど、だったら瞬間火力を大幅に上げればいいの。腐ったトマトをぶつけたり、一部の技能を使うことで激怒状態になるよ。激怒状態では与えるダメージも受けるダメージも２倍…あとはわかるかな？", "You might encounter an opponent who heals himself every time he's near death. Against an enemy like that, the Fury status, which doubles damage dealt and received, is useful. You can give your party the Fury status with the Rampage ability, and inflict it by throwing a tomato. ...Get the idea?")
			chatMore lang("あとは相手にターンを回さないのも有効だね。時を止めている間に準備をしたり、麻痺が入った瞬間を狙って畳みかけよう。『』《》つきにも鈍足は低確率で入るから、速度差をつけて行動回数を増やしてもいいね。", "Preventing the enemy from acting also gives you a chance to recover. Enemies with <> or {} are highly resistant to bad statuses, so you could try boosting your speed instead.")
			chatMore lang("ＨＰ下のパワーゲージが貯まると、技能の力の解放で必中・防御無視のゲージ技が出せるのは知ってるかな？そして、突撃体勢の仲間はゲージ技を使うけれど、迎撃体勢にすると使わない。…つまり、迎撃で仲間にゲージを貯めさせてタイミングよくコマンドフラッグで切り替えれば、全員でゲージ技を連続して叩き込めるんだよ。", "If the gauge under your HP bar reaches 100%, you can use <Gauge Release> to perform a powerful attack. Also, pets set to Onslaught will use <Gauge Release>, but pets set to Intercept will not. In other words, with careful use of a command flag, your party could save up and unleash multiple powerful attacks at once.")
			chatMore lang("最後に、持久戦になるけどマナを吸収する武器で攻撃し続けて、マナの反動で大ダメージを与えるって手もあるね。今挙げたのはどれも同時に行えるから、ギリギリまで削ってから重複させれば突破できると思うよ。ただし、事前に準備していないとできない戦法だってことは忘れないでね？", "Finally, although it'd take a long time, if you use weapons or abilities that drain MP, you could eventually kill an enemy by draining all its MP to cause magic reaction. However, it's a tactic that needs to be prepared in advance.")
			gdata(STARTING_GDATA_FLAG + 330)++
		}
		if ( chatval == 11 ) {
			chatMore lang("バックパック内の物をＴキー（shift+t）…Throwで投げつける場合は、投擲スキルを鍛えておこうね。ポーションやモンスターボール、投擲アイテムを外さずにぶつけられるよ。距離が遠いほど外れやすいから、投擲が低い間はなるべく至近距離から投げよう。", "You can throw carried items with [T]. This uses, and trains, the Throwing skill. Potions, monster balls, and other items can be thrown directly from your backpack. Unless you have good Throwing skill, you'll want to be close to an enemy when throwing an item.")
			chatMore lang("重量物をぶつける攻撃は、必中＆防御無視だから意外なところで役に立つかもね。基本は重いものほどダメージが大きいけれど、それとは別に出血させる栗や属性ダメージを与えるアイテムなんかもあるよ。", "Throwing a heavy object might be useful since it bypasses defense. There are also other items, such as chestnuts, that have special effects when thrown.")
			gdata(STARTING_GDATA_FLAG + 330)++
		}
		if ( chatval == 12 ) {
			chatMore lang("物理攻撃した時に棘が刺さるタイプの敵は、もちろん遠距離から攻撃すればオーケーだよ。通常攻撃を介さない攻撃技能でも大丈夫。魔法を反射してくる敵は魔法の属性まで反射してくるから、自分の耐性が低かったり状態異常を無効にできない属性の魔法で攻撃するのはやめておこう。", "Some enemies are covered in thorns that cut you if you melee them. Use a spell or ranged attack to fight them. There's a similar defense against spells, but it's quite rare.")
			chatMore lang("それから、射撃に対して先制射撃でカウンターしてくる敵もいるよ。これは状態異常で射撃できないようにしちゃえば大丈夫！…どれも１発１発のカウンターダメージは大したものじゃないけれど、連続攻撃するのはやめておこうね。", "There are also enemies that instantly counter ranged attacks with their own ranged attack. However, you're safe if they're unable to attack because of a status condition. One counterattack won't do much damage, but they add up, so don't fight carelessly.")
			gdata(STARTING_GDATA_FLAG + 330)++
		}
		if ( chatval == 13 ) {
			chatMore lang("隣接した時に自爆する敵と、ダメージを受けた時に自爆する敵がいるよ。爆弾岩はその両方を兼ね備えているね。遠距離から先制攻撃で仕留めるか、それができないならポーションを投げたり水魔法を使って濡らそう。濡れていると自爆できないからね。", "Some enemies explode when low on health. They also generally explode when a nearby enemy explodes. A type of enemy called \"bomb rocks\" can appear in large numbers and explode in a massive and incredibly deadly chain reaction. Fight exploding enemies from a good ways off, or you can use a thrown potion or water spell to soak them. Wet enemies can't explode.")
			gdata(STARTING_GDATA_FLAG + 330)++
		}
		if ( chatval == 14 ) {
			chatMore lang("状態異常の時でも分裂する敵と、状態異常の時は分裂しない敵がいるよ。どちらにしてもある程度大きいダメージを与えると分裂するから、一撃で削り取れない場合は、先にスリップダメージで削ろう。それが面倒なら、その敵の周囲を壁生成で囲っちゃおう。スペースがないと分裂できないからね。", "Some enemies split into multiple enemies when hit. Some of these won't split if they have a status condition, but not all. You can try slowly weakening it before killing it with a single blow, or use a spell or rod of Wall Creation so that it has no room to split off.")
			chatMore lang("分裂体は何も装備していないし何もドロップしない、そして経験値も得られないから、わざと分裂させる価値はないかな。さっさと本体を片づけちゃおう。", "Incidentally, monsters that split off from another monster drop no items and give no experience, so don't bother trying to split them on purpose.")
			gdata(STARTING_GDATA_FLAG + 330)++
		}
		if ( chatval == 15 ) {
			chatMore lang("最終的には透明視を可能にするエンチャントのついた装備が欲しいね。それまでは、何かいると感じたら物質感知の巻物・魔法を使って見つけよう。後手に回っちゃうけどね。", "Finding a helmet or ring that lets you see invisible enemies is important, but until you get one you can use a scroll or spell of Detect Objects. It'll do as a temporary measure.")
			chatMore lang("他には、濡れ状態にすれば透明が解除されるよ。水魔法とかで辺りに水を撒き散らせるなら、やってみよう。", "You can temporarily turn invisible foes visible by getting them wet. You can throw cheap potions or use water magic from spells or rods.")
			gdata(STARTING_GDATA_FLAG + 330)++
		}
		if ( gdata(STARTING_GDATA_FLAG + 330) <= 102 ) {
			chatMore lang("質問がある人は聞きに来てねー！", "People with questions, come over to ask!")
		}
		goto *chat_end
	}
	if ( _switch_val == CREATURE_ID_PART_TIME_WORKER_THE_RED_SWORD | _switch_sw ) {
		_switch_sw = 0
		if ( gdata(STARTING_GDATA_FLAG + 331) + gdata(STARTING_GDATA_FLAG + 332) + gdata(STARTING_GDATA_FLAG + 333) + gdata(STARTING_GDATA_FLAG + 334) + gdata(STARTING_GDATA_FLAG + 335) + gdata(STARTING_GDATA_FLAG + 336) + gdata(STARTING_GDATA_FLAG + 337) + gdata(STARTING_GDATA_FLAG + 338) + gdata(STARTING_GDATA_FLAG + 339) + gdata(STARTING_GDATA_FLAG + 340) + gdata(STARTING_GDATA_FLAG + 341) + gdata(STARTING_GDATA_FLAG + 342) + gdata(STARTING_GDATA_FLAG + 343) + gdata(STARTING_GDATA_FLAG + 344) + gdata(STARTING_GDATA_FLAG + 345) + gdata(STARTING_GDATA_FLAG + 346) == 1600 ) {
			chatMore lang("！！", "!!")
			chatMore lang("全ての講座を修了したキミには、赤剣先生の問題を…昔なら受けてもらうところなんだけどね。", "Looks like you've completed every single course. Well done. You kinda remind me of myself from back in the day...")
			chatMore lang("はい、これ努力賞。これからも頑張ってね！", "I'll give you a reward for your efforts. Good luck in the future!")
			flt
			itemcreate -1, ITEM_ID_CROWN_POINT, cdata(CDATA_X, CHARA_PLAYER), cdata(CDATA_Y, CHARA_PLAYER), 0
			txt_questitem
			snd SOUNDLIST_COMPLETE1
			gdata(STARTING_GDATA_FLAG + 346) = 1000
			goto *chat_end
		}
		if ( gdata(STARTING_GDATA_FLAG + 330) != 0 ) {
			chatMore lang("一度にたくさん覚えるのは大変だよね？だから同じ人が受講できるのは一日に一回までなんだよ。今日教わったことをさっそく活かしてみよう！", "It's tough to memorize a lot at once, isn't it? That's why you can only take one course a day. Make the most of what you learned today!")
			goto *chat_end
		}
		chatMore lang("冒険ゼミで、キミも最高の冒険生活を始めてみない？", "Want to attend an adventure seminar and begin your awesome adventuring life?")
		chatList 0, lang("結構です", "I'm fine thanks.")
		chatList 1, lang("冒険ゼミ・生活講座", "Adventure seminar - Daily life course.")
		chatList 2, lang("冒険ゼミ・道具講座", "Adventure seminar - Item course.")
		chatList 3, lang("冒険ゼミ・育成講座", "Adventure seminar - Training course.")
		chatList 4, lang("冒険ゼミ・戦闘講座", "Adventure seminar - Combat course.")
		buff = lang("キミに合った講座を選んで、華麗にスタートダッシュを決めよう！", "The course fit for you has been chosen. What a magnificent decision!")
		gosub *chat_select
		if ( chatval > 0 & chatval <= 4 ) {
			gdata(STARTING_GDATA_FLAG + 328) = chatval
			gp1 = 200
			gp2 = 800
			gp3 = 1800
			gp4 = 3200
			if ( gdata(STARTING_GDATA_FLAG + 328) == 1 ) {
				if ( gdata(STARTING_GDATA_FLAG + 331) >= 100 ) {
					gp1 = 50
				}
				if ( gdata(STARTING_GDATA_FLAG + 332) >= 100 ) {
					gp2 = 50
				}
				if ( gdata(STARTING_GDATA_FLAG + 333) >= 100 ) {
					gp3 = 50
				}
				if ( gdata(STARTING_GDATA_FLAG + 334) >= 100 ) {
					gp4 = 50
				}
			}
			if ( gdata(STARTING_GDATA_FLAG + 328) == 2 ) {
				if ( gdata(STARTING_GDATA_FLAG + 335) >= 100 ) {
					gp1 = 50
				}
				if ( gdata(STARTING_GDATA_FLAG + 336) >= 100 ) {
					gp2 = 50
				}
				if ( gdata(STARTING_GDATA_FLAG + 337) >= 100 ) {
					gp3 = 50
				}
				if ( gdata(STARTING_GDATA_FLAG + 338) >= 100 ) {
					gp4 = 50
				}
			}
			if ( gdata(STARTING_GDATA_FLAG + 328) == 3 ) {
				if ( gdata(STARTING_GDATA_FLAG + 339) >= 100 ) {
					gp1 = 50
				}
				if ( gdata(STARTING_GDATA_FLAG + 340) >= 100 ) {
					gp2 = 50
				}
				if ( gdata(STARTING_GDATA_FLAG + 341) >= 100 ) {
					gp3 = 50
				}
				if ( gdata(STARTING_GDATA_FLAG + 342) >= 100 ) {
					gp4 = 50
				}
			}
			if ( gdata(STARTING_GDATA_FLAG + 328) == 4 ) {
				if ( gdata(STARTING_GDATA_FLAG + 343) >= 100 ) {
					gp1 = 50
				}
				if ( gdata(STARTING_GDATA_FLAG + 344) >= 100 ) {
					gp2 = 50
				}
				if ( gdata(STARTING_GDATA_FLAG + 345) >= 100 ) {
					gp3 = 50
				}
				if ( gdata(STARTING_GDATA_FLAG + 346) >= 100 ) {
					gp4 = 50
				}
			}
			chatList 0, lang("やっぱり受けない", "I changed my mind.")
			chatList 1, lang("初回 （" + gp1 + "gp）", "First Time (" + gp1 + "gp).")
			chatList 2, lang("第2回（" + gp2 + "gp）必要レベル2", "Second Time (" + gp2 + "gp) - Level 2 required.")
			chatList 3, lang("第3回（" + gp3 + "gp）必要レベル4", "Third Time (" + gp3 + "gp) - Level 4 required.")
			chatList 4, lang("第4回（" + gp4 + "gp）必要レベル6", "Forth Time (" + gp4 + "gp) - Level 6 required.")
			buff = lang("キミの受けたい講座はどれかな？順番に受けるのがオススメ！", "Which course do you want to attend? Receiving them in order is recommended!")
			gosub *chat_select
			if ( chatval > 0 & chatval <= 4 ) {
				gdata(STARTING_GDATA_FLAG + 329) = chatval
				if ( gdata(STARTING_GDATA_FLAG + 329) == 1 ) {
					gp0 = gp1
				}
				if ( gdata(STARTING_GDATA_FLAG + 329) == 2 ) {
					gp0 = gp2
				}
				if ( gdata(STARTING_GDATA_FLAG + 329) == 3 ) {
					gp0 = gp3
				}
				if ( gdata(STARTING_GDATA_FLAG + 329) == 4 ) {
					gp0 = gp4
				}
				if ( cdata(CDATA_LEVEL, CHARA_PLAYER) < gdata(STARTING_GDATA_FLAG + 329) * 2 - 2 | cdata(CDATA_GOLD, CHARA_PLAYER) < gp0 ) {
					chatMore lang("あれ？条件を満たしていないね。よく確認しよう！", "Oh? You don't satisfy the requirements. Let's check again!")
					goto *chat_end
				}
				if ( gdata(GDATA_FLAG_DUEL_TARGET) > 0 ) {
					snd SOUNDLIST_FAIL1
					txt_duel2
					goto *chat_end
				}
				chatMore lang("しっかり勉強してきてね！聞き流したらお金がムダになっちゃうぞ！", "Make sure to study hard now! If you don't pay attention you'll just waste your money!")
				gdata(STARTING_GDATA_FLAG + 330) = 100
				snd SOUNDLIST_PAYGOLD1
				cdata(CDATA_GOLD, CHARA_PLAYER) -= gp0
				mdata(MDATA_DOWNSTAIRS_POS) = cdata(CDATA_Y, CHARA_PLAYER) * 1000 + cdata(CDATA_X, CHARA_PLAYER)
				gdata(GDATA_TELEPORT_AREA) = AREA_SEMINAR
				gdata(GDATA_TELEPORT_LEVEL) = gdata(STARTING_GDATA_FLAG + 328) + 1
				levelexitby = 2
				gdata(GDATA_LEVEL_START_ON) = 7
				mapstartx = 11
				mapstarty = 6
				autosave = 1 * (gdata(GDATA_AREA) != AREA_SHOW_HOUSE)
				chatteleport = 1
				goto *chat_end
			}
		}
		goto *chat_end
	}
	if ( _switch_val == CREATURE_ID_KARATA_THE_SEMINAR_MASCOT | _switch_sw ) {
		_switch_sw = 0
		karata = 0
		if ( gdata(STARTING_GDATA_FLAG + 328) == 1 ) {
			if ( gdata(STARTING_GDATA_FLAG + 329) == 1 ) {
				if ( gdata(STARTING_GDATA_FLAG + 331) == 0 ) {
					if ( gdata(STARTING_GDATA_FLAG + 330) >= 104 ) {
						karata = 1
					}
				}
			}
		}
		if ( gdata(STARTING_GDATA_FLAG + 328) == 1 ) {
			if ( gdata(STARTING_GDATA_FLAG + 329) == 2 ) {
				if ( gdata(STARTING_GDATA_FLAG + 332) == 0 ) {
					if ( gdata(STARTING_GDATA_FLAG + 330) >= 105 ) {
						karata = 2
					}
				}
			}
		}
		if ( gdata(STARTING_GDATA_FLAG + 328) == 1 ) {
			if ( gdata(STARTING_GDATA_FLAG + 329) == 3 ) {
				if ( gdata(STARTING_GDATA_FLAG + 333) == 0 ) {
					if ( gdata(STARTING_GDATA_FLAG + 330) >= 104 ) {
						karata = 3
					}
				}
			}
		}
		if ( gdata(STARTING_GDATA_FLAG + 328) == 1 ) {
			if ( gdata(STARTING_GDATA_FLAG + 329) == 4 ) {
				if ( gdata(STARTING_GDATA_FLAG + 334) == 0 ) {
					if ( gdata(STARTING_GDATA_FLAG + 330) >= 105 ) {
						karata = 4
					}
				}
			}
		}
		if ( gdata(STARTING_GDATA_FLAG + 328) == 2 ) {
			if ( gdata(STARTING_GDATA_FLAG + 329) == 1 ) {
				if ( gdata(STARTING_GDATA_FLAG + 335) == 0 ) {
					if ( gdata(STARTING_GDATA_FLAG + 330) >= 104 ) {
						karata = 5
					}
				}
			}
		}
		if ( gdata(STARTING_GDATA_FLAG + 328) == 2 ) {
			if ( gdata(STARTING_GDATA_FLAG + 329) == 2 ) {
				if ( gdata(STARTING_GDATA_FLAG + 336) == 0 ) {
					if ( gdata(STARTING_GDATA_FLAG + 330) >= 104 ) {
						karata = 6
					}
				}
			}
		}
		if ( gdata(STARTING_GDATA_FLAG + 328) == 2 ) {
			if ( gdata(STARTING_GDATA_FLAG + 329) == 3 ) {
				if ( gdata(STARTING_GDATA_FLAG + 337) == 0 ) {
					if ( gdata(STARTING_GDATA_FLAG + 330) >= 104 ) {
						karata = 7
					}
				}
			}
		}
		if ( gdata(STARTING_GDATA_FLAG + 328) == 2 ) {
			if ( gdata(STARTING_GDATA_FLAG + 329) == 4 ) {
				if ( gdata(STARTING_GDATA_FLAG + 338) == 0 ) {
					if ( gdata(STARTING_GDATA_FLAG + 330) >= 105 ) {
						karata = 8
					}
				}
			}
		}
		if ( gdata(STARTING_GDATA_FLAG + 328) == 3 ) {
			if ( gdata(STARTING_GDATA_FLAG + 329) == 1 ) {
				if ( gdata(STARTING_GDATA_FLAG + 339) == 0 ) {
					if ( gdata(STARTING_GDATA_FLAG + 330) >= 104 ) {
						karata = 9
					}
				}
			}
		}
		if ( gdata(STARTING_GDATA_FLAG + 328) == 3 ) {
			if ( gdata(STARTING_GDATA_FLAG + 329) == 2 ) {
				if ( gdata(STARTING_GDATA_FLAG + 340) == 0 ) {
					if ( gdata(STARTING_GDATA_FLAG + 330) >= 105 ) {
						karata = 10
					}
				}
			}
		}
		if ( gdata(STARTING_GDATA_FLAG + 328) == 3 ) {
			if ( gdata(STARTING_GDATA_FLAG + 329) == 3 ) {
				if ( gdata(STARTING_GDATA_FLAG + 341) == 0 ) {
					if ( gdata(STARTING_GDATA_FLAG + 330) >= 105 ) {
						karata = 11
					}
				}
			}
		}
		if ( gdata(STARTING_GDATA_FLAG + 328) == 3 ) {
			if ( gdata(STARTING_GDATA_FLAG + 329) == 4 ) {
				if ( gdata(STARTING_GDATA_FLAG + 342) == 0 ) {
					if ( gdata(STARTING_GDATA_FLAG + 330) >= 104 ) {
						karata = 12
					}
				}
			}
		}
		if ( gdata(STARTING_GDATA_FLAG + 328) == 4 ) {
			if ( gdata(STARTING_GDATA_FLAG + 329) == 1 ) {
				if ( gdata(STARTING_GDATA_FLAG + 343) == 0 ) {
					if ( gdata(STARTING_GDATA_FLAG + 330) >= 105 ) {
						karata = 13
					}
				}
			}
		}
		if ( gdata(STARTING_GDATA_FLAG + 328) == 4 ) {
			if ( gdata(STARTING_GDATA_FLAG + 329) == 2 ) {
				if ( gdata(STARTING_GDATA_FLAG + 344) == 0 ) {
					if ( gdata(STARTING_GDATA_FLAG + 330) >= 104 ) {
						karata = 14
					}
				}
			}
		}
		if ( gdata(STARTING_GDATA_FLAG + 328) == 4 ) {
			if ( gdata(STARTING_GDATA_FLAG + 329) == 3 ) {
				if ( gdata(STARTING_GDATA_FLAG + 345) == 0 ) {
					if ( gdata(STARTING_GDATA_FLAG + 330) >= 105 ) {
						karata = 15
					}
				}
			}
		}
		if ( gdata(STARTING_GDATA_FLAG + 328) == 4 ) {
			if ( gdata(STARTING_GDATA_FLAG + 329) == 4 ) {
				if ( gdata(STARTING_GDATA_FLAG + 346) == 0 ) {
					if ( gdata(STARTING_GDATA_FLAG + 330) >= 105 ) {
						karata = 16
					}
				}
			}
		}
		if ( karata > 0 ) {
			chatMore lang("キミはとても勉強熱心だから！ささやかながら努力賞をあげちゃうね！", "Because you've studied well, here's a little something for all your effort!")
			if ( karata == 1 ) {
				gdata(STARTING_GDATA_FLAG + 331) = 100
				flt
				itemcreate -1, ITEM_ID_PORTABLE_COOKING_TOOL, cdata(CDATA_X, CHARA_PLAYER), cdata(CDATA_Y, CHARA_PLAYER), 0
				inv(INV_ITEM_STATUS, ci) = ITEM_STATUS_NORMAL
				flt
				itemcreate -1, ITEM_ID_HEALTHY_LEAF, cdata(CDATA_X, CHARA_PLAYER), cdata(CDATA_Y, CHARA_PLAYER), 3
				inv(INV_ITEM_STATUS, ci) = ITEM_STATUS_NORMAL
			}
			if ( karata == 2 ) {
				gdata(STARTING_GDATA_FLAG + 332) = 100
				flt
				itemcreate -1, ITEM_ID_PLATINUM_COIN, cdata(CDATA_X, CHARA_PLAYER), cdata(CDATA_Y, CHARA_PLAYER), 0
			}
			if ( karata == 3 ) {
				gdata(STARTING_GDATA_FLAG + 333) = 100
				flt
				itemcreate -1, ITEM_ID_SCROLL_FAITH, cdata(CDATA_X, CHARA_PLAYER), cdata(CDATA_Y, CHARA_PLAYER), 0
				inv(INV_ITEM_STATUS, ci) = ITEM_STATUS_BLESSED
			}
			if ( karata == 4 ) {
				gdata(STARTING_GDATA_FLAG + 334) = 100
				flt
				itemcreate -1, ITEM_ID_CURARIA, cdata(CDATA_X, CHARA_PLAYER), cdata(CDATA_Y, CHARA_PLAYER), 0
				inv(INV_ITEM_STATUS, ci) = ITEM_STATUS_NORMAL
			}
			if ( karata == 5 ) {
				gdata(STARTING_GDATA_FLAG + 335) = 100
				flt
				itemcreate -1, ITEM_ID_SCROLL_IDENTIFY, cdata(CDATA_X, CHARA_PLAYER), cdata(CDATA_Y, CHARA_PLAYER), 3
				inv(INV_ITEM_STATUS, ci) = ITEM_STATUS_NORMAL
			}
			if ( karata == 6 ) {
				gdata(STARTING_GDATA_FLAG + 336) = 100
				flt
				itemcreate -1, ITEM_ID_POTION_VITALITY, cdata(CDATA_X, CHARA_PLAYER), cdata(CDATA_Y, CHARA_PLAYER), 2
				inv(INV_ITEM_STATUS, ci) = ITEM_STATUS_BLESSED
			}
			if ( karata == 7 ) {
				gdata(STARTING_GDATA_FLAG + 337) = 100
				flt
				itemcreate -1, ITEM_ID_FIREPROOF_LIQUID, cdata(CDATA_X, CHARA_PLAYER), cdata(CDATA_Y, CHARA_PLAYER), 0
				inv(INV_ITEM_STATUS, ci) = ITEM_STATUS_NORMAL
			}
			if ( karata == 8 ) {
				gdata(STARTING_GDATA_FLAG + 338) = 100
				flt
				itemcreate -1, ITEM_ID_SCROLL_GAIN_MATERIAL, cdata(CDATA_X, CHARA_PLAYER), cdata(CDATA_Y, CHARA_PLAYER), 3
				inv(INV_ITEM_STATUS, ci) = ITEM_STATUS_NORMAL
			}
			if ( karata == 9 ) {
				gdata(STARTING_GDATA_FLAG + 339) = 100
				flt
				itemcreate -1, ITEM_ID_PLATINUM_COIN, cdata(CDATA_X, CHARA_PLAYER), cdata(CDATA_Y, CHARA_PLAYER), 0
			}
			if ( karata == 10 ) {
				gdata(STARTING_GDATA_FLAG + 340) = 100
				flt
				itemcreate -1, ITEM_ID_RAW_RUBYNUS_ORE, cdata(CDATA_X, CHARA_PLAYER), cdata(CDATA_Y, CHARA_PLAYER), 5
			}
			if ( karata == 11 ) {
				gdata(STARTING_GDATA_FLAG + 341) = 100
				flt
				itemcreate -1, ITEM_ID_LOVE_POTION, cdata(CDATA_X, CHARA_PLAYER), cdata(CDATA_Y, CHARA_PLAYER), 0
				inv(INV_ITEM_STATUS, ci) = ITEM_STATUS_BLESSED
			}
			if ( karata == 12 ) {
				gdata(STARTING_GDATA_FLAG + 342) = 100
				flt
				itemcreate -1, ITEM_ID_SCROLL_WONDER, cdata(CDATA_X, CHARA_PLAYER), cdata(CDATA_Y, CHARA_PLAYER), 0
				inv(INV_ITEM_STATUS, ci) = ITEM_STATUS_BLESSED
			}
			if ( karata == 13 ) {
				gdata(STARTING_GDATA_FLAG + 343) = 100
				flt
				itemcreate -1, ITEM_ID_SCROLL_TELEPORTATION, cdata(CDATA_X, CHARA_PLAYER), cdata(CDATA_Y, CHARA_PLAYER), 3
				inv(INV_ITEM_STATUS, ci) = ITEM_STATUS_NORMAL
			}
			if ( karata == 14 ) {
				gdata(STARTING_GDATA_FLAG + 344) = 100
				flt
				itemcreate -1, ITEM_ID_POTION_RESISTANCE, cdata(CDATA_X, CHARA_PLAYER), cdata(CDATA_Y, CHARA_PLAYER), 2
				inv(INV_ITEM_STATUS, ci) = ITEM_STATUS_NORMAL
			}
			if ( karata == 15 ) {
				gdata(STARTING_GDATA_FLAG + 345) = 100
				flt
				itemcreate -1, ITEM_ID_MAGISTUS, cdata(CDATA_X, CHARA_PLAYER), cdata(CDATA_Y, CHARA_PLAYER), 0
				inv(INV_ITEM_PARAM2, ci) = 15
				inv(INV_ITEM_STATUS, ci) = ITEM_STATUS_NORMAL
			}
			if ( karata == 16 ) {
				gdata(STARTING_GDATA_FLAG + 346) = 100
				flt
				itemcreate -1, ITEM_ID_ROD_CHANGE_CREATURE, cdata(CDATA_X, CHARA_PLAYER), cdata(CDATA_Y, CHARA_PLAYER), 0
				inv(INV_ITEM_STATUS, ci) = ITEM_STATUS_BLESSED
			}
			item_identify ci, ITEM_KNOWN_FULL
			snd SOUNDLIST_COMPLETE1
			txt_questitem
			goto *chat_end
		}
		chatMore lang("う〜ん…。勉強熱心な子には、つい努力賞をあげたくなっちゃうカラ…。", "Well... To a kid that earnestly studies, I want to reward that effort...")
		chatMore lang("それはさておき。", "Aside from that.")
		if ( gdata(STARTING_GDATA_FLAG + 329) == 1 ) {
			chatMore lang("カラ太は宝箱のツクモガミなのだから！宝箱に擬態しているミミックとは、似て非なるモノなの！", "Sorry, this is untranslated sentence.")
			chatMore lang("昔はタヌキとかライオンとか、マスコットの先輩もいたんだけど、みんな退職しちゃった…。", "Sorry, this is untranslated sentence.")
		}
		if ( gdata(STARTING_GDATA_FLAG + 329) == 2 ) {
			chatMore lang("冒険ゼミはバネッサコーポレーションという会社の一部なのだから！ちなみに、カラ太をスカウトしたのは創始者のバネッサなんだー。", "Sorry, this is untranslated sentence.")
		}
		if ( gdata(STARTING_GDATA_FLAG + 329) == 3 ) {
			chatMore lang("ゼミ創始者のバネッサはさらなる冒険を求め、友達のガイドを連れて宇宙に旅立ったのだから！いつ帰ってくるのかな？寂しい…。", "Sorry, this is untranslated sentence.")
		}
		if ( gdata(STARTING_GDATA_FLAG + 329) == 4 ) {
			chatMore lang("バネッサコーポレーションは冒険者にお給料が払われるように国と交渉したり、ギルドのスポンサーもやっていたりするから！冒険者の地位を上げるために色々がんばっているんだー。", "Sorry, this is untranslated sentence.")
		}
		goto *chat_end
	}
	if ( _switch_val == CREATURE_ID_SSIL_THE_UNDEAD_WITCH | _switch_sw ) {
		_switch_sw = 0
		if ( gdata(GDATA_FLAG_SUB_THE_LIFE_IN_THIS_WORLD) > 10 ) {
			chatMore lang("これ以降はまだ準備中ですじゃ。今のうちに集めておいてほしいですのう。", "It's still being prepared. I really want to gather it now though.")
			goto *chat_end
		}
		if ( gdata(GDATA_FLAG_SUB_THE_LIFE_IN_THIS_WORLD) >= 1 & gdata(GDATA_FLAG_SUB_THE_LIFE_IN_THIS_WORLD) <= 10 ) {
			item_find ITEM_ID_DECK, 3, 1
			if ( stat == (-1) ) {
				chatMore lang("おや、デッキを持っていないようですのう。", "Well, my my! Ye don't seem to have any deck with ye.")
				goto *chat_end
			}
			syurui = 0
			repeat 1000
				if ( card(0, cnt) == 0 ) {
					continue
				}
				syurui++
			loop
			if ( gdata(GDATA_FLAG_SUB_THE_LIFE_IN_THIS_WORLD) == 1 ) {
				chatMore lang("10年20年などあっという間に過ぎるものですじゃ。この家も、越してきたばかりの頃は店だったのですよ。棚の奥に50年以上前のお菓子も入っておるでしょうなぁ。", "Sorry, this is untranslated sentence.")
			}
			if ( gdata(GDATA_FLAG_SUB_THE_LIFE_IN_THIS_WORLD) == 2 ) {
				chatMore lang("赤き義眼の魔女を知っておりますか。歳は大きく違えど、あれはわたしの知人なのですじゃ。愛する夫と末永く過ごすため、力を代償とする義眼まで埋め込むとはいやはや。若いとはいいものですのう。", "Sorry, this is untranslated sentence.")
			}
			if ( gdata(GDATA_FLAG_SUB_THE_LIFE_IN_THIS_WORLD) == 3 ) {
				chatMore lang("こうしていると思い出しますのう。昔、ブラッドランナーという方がよく来てくださったのですじゃ。騎士見習いとして王宮に勤めることになったと言っておりましたが、その後どうなったか…おっと、あれは以前の文明の出来事でしたなぁ。時が過ぎるのは早いものですじゃ。", "Sorry, this is untranslated sentence.")
			}
			if ( gdata(GDATA_FLAG_SUB_THE_LIFE_IN_THIS_WORLD) == 4 ) {
				chatMore lang("ついこの間まではエウダーナという国に住んでおりました。弟子もおったのですよ。ええ、森の中で行き倒れていた孤児でしたのう。研究方面はからっきしでしたが戦闘魔法の才能は抜群でした。", "Sorry, this is untranslated sentence.")
			}
			if ( gdata(GDATA_FLAG_SUB_THE_LIFE_IN_THIS_WORLD) == 5 ) {
				chatMore lang("わたしの弟子ですがねぇ、成長後は軍に入ってしまって。戦争の道具にされてしまったのですじゃ。他国の兵士を魔法で次々に蹂躙し新たな孤児を生む弟子の姿を見て、わたしは幻滅し国を去りました。弟子がその後どうなったのかは知りませぬ。生きていれば今頃わたしのような老いぼれでしょうなぁ。", "Sorry, this is untranslated sentence.")
			}
			if ( gdata(GDATA_FLAG_SUB_THE_LIFE_IN_THIS_WORLD) == 6 ) {
				chatMore lang("わたしが研究をしているのは下らない戦争のためではなく、ましてや誰かを助けるためでもありませんのじゃ。全ては可能性の追求のため。ひひひ…そのためなら他人の定めた倫理や禁忌など邪魔なだけですじゃ。そうは思いませんかのう？", "Sorry, this is untranslated sentence.")
			}
			if ( gdata(GDATA_FLAG_SUB_THE_LIFE_IN_THIS_WORLD) == 7 ) {
				chatMore lang("その昔、海辺で暮らしていた頃の話ですがね。色々あって子亀を助けたら、海のお姫様に会うことになったのですじゃ。数万年ごとに子供の姿へ戻ることを繰り返し、悠久の時を生きてきたと言っておりましたなぁ。本当だとしたらまるでクラゲの一種ですのう。今も海の底で暮らしておるのでしょうか。", "Sorry, this is untranslated sentence.")
			}
			if ( gdata(GDATA_FLAG_SUB_THE_LIFE_IN_THIS_WORLD) == 8 ) {
				chatMore lang("生化学文明の滅亡後は酷かったですのう。世界中が、変異したモンスターで溢れ、無法地帯となっておりました。わずかに生き残った普通の生物も、汚染された環境に適応できず次々と死んでいきましたねぇ。てっきり世界は終わってしまったものと考えておりました。まさか長い年月をかけて、様々な種族が汚染に適応した超生命となり、新たな文明まで築き上げるとは…驚きですじゃ。", "Sorry, this is untranslated sentence.")
			}
			if ( gdata(GDATA_FLAG_SUB_THE_LIFE_IN_THIS_WORLD) == 9 ) {
				chatMore lang("滅亡時期に活動していたネクロマンサーたちも今ではすっかり影を潜めておりますねぇ。それなりの数が生き残っているはずですがのう。いえ、彼らの偵察用アンデッドがちょくちょく研究を邪魔しにきて迷惑でしたがねぇ。", "Sorry, this is untranslated sentence.")
			}
			if ( gdata(GDATA_FLAG_SUB_THE_LIFE_IN_THIS_WORLD) == 10 ) {
				chatMore lang("シエラ・テールは過去の技術が一堂に会した奇妙な文明ですじゃ。神によって魔法が再び世界に広まり体系化され、錬金術が発達し、遺跡では機械群が大量に発掘され再起動までしております。そしてレム・イドがもたらした生化学技術。何かの意図を感じますのう。ひひっ…大きなことが起きる前触れかもしれませんなぁ。", "Sorry, this is untranslated sentence.")
			}
			if ( syurui >= gdata(GDATA_FLAG_SUB_THE_LIFE_IN_THIS_WORLD) * 50 ) {
				chatMore lang("おや、カードを持ってきてくれたのですか？こんな婆のために、有難いことですなぁ。では少し拝見させて頂きますのじゃ。", "Sorry, this is untranslated sentence.")
				redraw 0
				gosub *screen_draw
				gosub *screen_fade
				gsel 4
				pos 0, 0
				picload exedir + "graphic\\face2" + devfile + ".bmp", 1
				gsel 0
				chatMore lang("ひぃーっひゃっひゃっ…！これはお礼ですじゃ。受け取ってくだされ。", "Hee hee hee! This is a token of my gratitude. Please take it.")
				flt
				itemcreate -1, ITEM_ID_KNEADED_SWEETS_OF_WITCH, cdata(CDATA_X, CHARA_PLAYER), cdata(CDATA_Y, CHARA_PLAYER), 0
				gdata(GDATA_FLAG_SUB_THE_LIFE_IN_THIS_WORLD)++
				txt_questitem
				if ( gdata(GDATA_FLAG_SUB_THE_LIFE_IN_THIS_WORLD) == 2 ) {
					flt
					itemcreate -1, ITEM_ID_INSIGHT_LENS, cdata(CDATA_X, CHARA_PLAYER), cdata(CDATA_Y, CHARA_PLAYER), 10
				}
				if ( gdata(GDATA_FLAG_SUB_THE_LIFE_IN_THIS_WORLD) == 3 ) {
					flt
					itemcreate -1, ITEM_ID_POTION_POTENTIAL, cdata(CDATA_X, CHARA_PLAYER), cdata(CDATA_Y, CHARA_PLAYER), 7
				}
				if ( gdata(GDATA_FLAG_SUB_THE_LIFE_IN_THIS_WORLD) == 4 ) {
					flt
					itemcreate -1, ITEM_ID_ASTRAL_LIGHT_PEN, cdata(CDATA_X, CHARA_PLAYER), cdata(CDATA_Y, CHARA_PLAYER), 2
				}
				if ( gdata(GDATA_FLAG_SUB_THE_LIFE_IN_THIS_WORLD) == 5 ) {
					flt
					itemcreate -1, ITEM_ID_POTION_SOMA, cdata(CDATA_X, CHARA_PLAYER), cdata(CDATA_Y, CHARA_PLAYER), 3
				}
				if ( gdata(GDATA_FLAG_SUB_THE_LIFE_IN_THIS_WORLD) == 6 ) {
					flt
					itemcreate -1, ITEM_ID_POTION_NEKTAR, cdata(CDATA_X, CHARA_PLAYER), cdata(CDATA_Y, CHARA_PLAYER), 3
				}
				if ( gdata(GDATA_FLAG_SUB_THE_LIFE_IN_THIS_WORLD) == 7 ) {
					flt
					itemcreate -1, ITEM_ID_POTION_DISASTER, cdata(CDATA_X, CHARA_PLAYER), cdata(CDATA_Y, CHARA_PLAYER), 5
				}
				if ( gdata(GDATA_FLAG_SUB_THE_LIFE_IN_THIS_WORLD) == 8 ) {
					flt
					itemcreate -1, ITEM_ID_POTION_AQUA_SANCTIO, cdata(CDATA_X, CHARA_PLAYER), cdata(CDATA_Y, CHARA_PLAYER), 8
				}
				if ( gdata(GDATA_FLAG_SUB_THE_LIFE_IN_THIS_WORLD) == 9 ) {
					flt
					itemcreate -1, ITEM_ID_FLYING_SCROLL, cdata(CDATA_X, CHARA_PLAYER), cdata(CDATA_Y, CHARA_PLAYER), 5
				}
				if ( gdata(GDATA_FLAG_SUB_THE_LIFE_IN_THIS_WORLD) == 10 ) {
					flt
					itemcreate -1, ITEM_ID_BOTTLE_HERMES_BLOOD, cdata(CDATA_X, CHARA_PLAYER), cdata(CDATA_Y, CHARA_PLAYER), 2
				}
				if ( gdata(GDATA_FLAG_SUB_THE_LIFE_IN_THIS_WORLD) == 11 ) {
					flt
					itemcreate -1, ITEM_ID_TREASURE_MAP, cdata(CDATA_X, CHARA_PLAYER), cdata(CDATA_Y, CHARA_PLAYER), 5
				}
				if ( gdata(GDATA_FLAG_SUB_THE_LIFE_IN_THIS_WORLD) == 12 ) {
					flt
					itemcreate -1, ITEM_ID_SCROLL_GROWTH, cdata(CDATA_X, CHARA_PLAYER), cdata(CDATA_Y, CHARA_PLAYER), 4
				}
				if ( gdata(GDATA_FLAG_SUB_THE_LIFE_IN_THIS_WORLD) == 13 ) {
					flt
					itemcreate -1, ITEM_ID_MAGIC_FRUIT, cdata(CDATA_X, CHARA_PLAYER), cdata(CDATA_Y, CHARA_PLAYER), 2
				}
				if ( gdata(GDATA_FLAG_SUB_THE_LIFE_IN_THIS_WORLD) == 14 ) {
					flt
					itemcreate -1, ITEM_ID_HERO_CHEESE, cdata(CDATA_X, CHARA_PLAYER), cdata(CDATA_Y, CHARA_PLAYER), 2
				}
				if ( gdata(GDATA_FLAG_SUB_THE_LIFE_IN_THIS_WORLD) == 15 ) {
					flt
					itemcreate -1, ITEM_ID_POTION_DESCENT, cdata(CDATA_X, CHARA_PLAYER), cdata(CDATA_Y, CHARA_PLAYER), 3
				}
				if ( gdata(GDATA_FLAG_SUB_THE_LIFE_IN_THIS_WORLD) == 16 ) {
					flt
					itemcreate -1, ITEM_ID_HAPPY_APPLE, cdata(CDATA_X, CHARA_PLAYER), cdata(CDATA_Y, CHARA_PLAYER), 2
				}
				chatMore lang("いひひ…次は" + gdata(GDATA_FLAG_SUB_THE_LIFE_IN_THIS_WORLD) * 50 + "種類まで集めたらまた見せてくだされ。", "Sorry, this is untranslated sentence."), strbye
				goto *chat_end
			}
			else {
				chatMore lang("ところで、今デッキに入っているカードは" + syurui + "種類のようですのう。ひひ…" + gdata(GDATA_FLAG_SUB_THE_LIFE_IN_THIS_WORLD) * 50 + "種類まで集めたらまた見せてくだされ。", "Sorry, this is untranslated sentence."), strbye
				goto *chat_end
			}
		}
		if ( gdata(GDATA_FLAG_SUB_THE_LIFE_IN_THIS_WORLD) == 0 ) {
			chatMore lang("おやおや、訪問者とは珍しいこともあるものですじゃ。皆薄気味悪がって近寄らんものですがのう。", "Sorry, this is untranslated sentence.")
			chatMore lang("ひひっ、まぁゆっくりしていってくだされ。わたしはアンデッド化しておりますが、旅人を取って食ったりはしませんですじゃ。襲われたら抵抗くらいはするかもしれませんがな…ひひひ。", "Sorry, this is untranslated sentence.")
			chatMore lang("そうじゃ…この死にぞこないの婆のために、一つ頼まれてくれませぬか。カード…というものは、今の世にもありますじゃろう？そうですじゃ、生物の情報が記された…デッキに入れるものですじゃ。こう、森奥で死んだように長く暮らしておりますとなぁ。不意に、現代にはどんなものが生きているのか気になるのですよ。", "Sorry, this is untranslated sentence.")
			chatMore lang("なぁに、悪いことには使いませぬ…まずは50種類以上のカードをデッキに入れて、見せていただけたならお礼をいたしますじゃ。もちろん、気の向いた時で構いませぬ。いひひ…なにせもうかなりの歳ですからなぁ。月日の流れが大層早く感じられまして、ねぇ。", "Sorry, this is untranslated sentence."), strbye
			gdata(GDATA_FLAG_SUB_THE_LIFE_IN_THIS_WORLD) = 1
			txt_questupdate
			goto *chat_end
		}
		goto *chat_end
	}
	if ( _switch_val == CREATURE_ID_AIKAGE_THE_SHINOBI_MASK | _switch_sw ) {
		_switch_sw = 0
		if ( gdata(GDATA_FLAG_MAIN) == 605 | gdata(GDATA_FLAG_MAIN) == 610 | gdata(GDATA_FLAG_MAIN) == 615 ) {
			chatMore lang("冒険者か…！いいところに来てくれた。", "An adventurer! You've come to the right place.")
			chatList 0, lang("気が向いたら", "See you later.")
			chatList 1, lang("逃げればいいんじゃ？", "See you later.")
			chatList 2, lang("お前は7層で倒したはず", "See you later.")
			buff = lang("俺たちは混沌の手の者に魔術で操られ、露払いをさせられていたのだが…。術者が死んだことにより、同じく操られていたアンデッド兵器が暴れ始めたのだ。鎮圧に手を貸してくれ！", "Sorry, this is untranslated sentence.")
			gosub *chat_select
			if ( chatval == 0 ) {
				chatMore lang("頼むぞ！", "I beg of you!")
			}
			if ( chatval == 1 ) {
				chatMore lang("操られている時に横で見ていてわかったが、こいつらは危険だ。後から来る者たちのためにも排除しておきたい。", "Sorry, this is untranslated sentence.")
			}
			if ( chatval == 2 ) {
				chatMore lang("残念だったな、分身の術だよ。", "What a disappointment my child's technique is.")
			}
			gdata(GDATA_FLAG_MAIN) = 620
		}
		goto *chat_end
	}
	if ( _switch_val == CREATURE_ID_ENTHUMESIS | _switch_sw ) {
		_switch_sw = 0
		chatMore lang("お父さん…お父さん…。", "Daddy... Daddy...!")
		if ( gdata(GDATA_FLAG_MAIN) < 710 ) {
			goto *chat_unique_enthumesis
		}
		goto *chat_end
	}
	if ( _switch_val == CREATURE_ID_ALSAPIA_THE_MURDERER_MASK | _switch_sw ) {
		_switch_sw = 0
		if ( gdata(GDATA_AREA) == AREA_AMUR_CAGE ) {
			chatMore lang("死んだことで両親と再会できるなんて。これで、あいつらを何度でも殺せるんだ…。", "I met my parents here again. Thanks, I can kill them many times.")
			goto *chat_end
		}
		chatMore lang("冒険者発見。第一陣と第二陣を突破してこんなところまで来ているなんて。", "I found you. I am surprised that you are already here.")
		chatList 0, lang("そこに冒険があるから", "Because there is an adventure here.")
		chatList 1, lang("もちろん報酬目当てだよ", "Of course I want a reward.")
		chatList 2, lang("レシマスの秘宝をわが物とするためだ", "Because I want a treasure of Lesimas.")
		chatList 3, lang("君に会うため", "It was to meet you.")
		buff = lang("ただでさえ危険なネフィアで、刺客にも狙われているのに。どうして進み続けるの？パルミアの命令？", "You are targeted by assassins. Why do you keep going? Is it Palmia's order?")
		chatesc = 0
		gosub *chat_select
		if ( chatval >= 0 & chatval <= 2 ) {
			chatMore lang("…そう。やっぱり、あなたにはここで消えてもらう。", "So... This place will be your graveyard.")
		}
		else {
			chatMore lang("…？？？とりあえず、あなたにはここで消えてもらう。", "...??? Whatever. This place will be your graveyard.")
		}
		goto *chat_end
	}
	if ( _switch_val == CREATURE_ID_GILPHEM_THE_MAGIC_STEEL | _switch_sw ) {
		_switch_sw = 0
		if ( gdata(GDATA_AREA) == AREA_AMUR_CAGE ) {
			chatMore lang("ゼーム様トイッショ。嬉シイ。ゼーム様タノシソウ。嬉シイ。", "<Zeome> seems to be having fun. I'm glad.")
			goto *chat_end
		}
		chatMore lang("我ハ、ゼーム様ニヨッテ作ラレタガーディアン。ゼーム様ノ邪魔ヲスル者ハ排除スル。", "I am a guardian of <Zeome>. I will eliminate you.")
		goto *chat_end
	}
	if ( _switch_val == CREATURE_ID_BURT_THE_BURNING_ADVENTURER_SOUL | _switch_sw ) {
		_switch_sw = 0
		if ( burt == 1 ) {
			chatMore lang("街の外は危険だ。だがもしお前が冒険したいのなら、俺に止める権利はない。", "Sorry, this is untranslated sentence.")
		}
		if ( burt == 0 ) {
			chatMore lang("…ここから見える海の向こうの景色が好きだったんだ。でも今ではどんな景色だったのか思い出せない。海の向こうも奴らに喰われて黒く塗りつぶされてしまった。", "Sorry, this is untranslated sentence.")
			chatMore lang("俺たちもかろうじて生き残っているだけて、やがて忘却に呑まれてしまうだろう。それがおそらく運命なんだ。", "Sorry, this is untranslated sentence.")
			chatMore lang("だが作物はこの街の中でだって栽培できるし、水もまだ井戸から汲むことができる。俺は最後の瞬間まで足掻いてみせるさ。", "Sorry, this is untranslated sentence.")
			burt = 1
		}
		goto *chat_end
	}
	if ( _switch_val == CREATURE_ID_ALLEN_THE_RESEARCHER | _switch_sw ) {
		_switch_sw = 0
		if ( gdata(GDATA_FLAG_SUB_RESEARCH_DESTRUCTION_CRISIS) == 1 ) {
			chatMore lang("みんなが無事に戻ってきたらバーの酒で一杯やりたいよ。恐怖は旨い酒を飲んで忘れるに限る。", "Sorry, this is untranslated sentence.")
		}
		if ( gdata(GDATA_FLAG_SUB_RESEARCH_DESTRUCTION_CRISIS) == 0 ) {
			chatMore lang("おや、旅人かい？…ひとつ頼まれてくれないか。", "Oh, are you a traveler? ...Can I ask you one thing?")
			chatMore lang("負傷した俺を置いて、仲間がラスキリスに再調査に行ってしまったんだ。あそこはヤバイ。状況を打開する手がかりを探すとか言っていたけど、もう俺たちでどうにかなるものじゃないことは分かっているんだ。", "Sorry, this is untranslated sentence.")
			chatList 0, lang("考えさせて", "Let me think about it.")
			chatList 1, lang("わかった", "Alright.")
			buff = lang("隊長はこの事態に焦っている。なんとか説得してみんなを連れ戻してきてくれ…！", "Sorry, this is untranslated sentence.")
			gosub *chat_select
			if ( chatval == 1 ) {
				chatMore lang("調査隊長の名前はラエスだ。君は強そうだけど、黒い獣にはくれぐれも気をつけてくれ。", "Sorry, this is untranslated sentence.")
				gdata(GDATA_FLAG_SUB_RESEARCH_DESTRUCTION_CRISIS) = 1
				txt_questupdate
			}
			else {
				chatMore lang("お願いだ…。一部、過激なのもいるけどみんな気のいいやつなんだ。", "Sorry, this is untranslated sentence.")
			}
		}
		goto *chat_end
	}
	if ( _switch_val == CREATURE_ID_BYSYMLHA_THE_AMBER_EYES | _switch_sw ) {
		_switch_sw = 0
		chatList 0, lang("今のままで大丈夫", "It is OK as it is now.")
		chatList 1, lang("楽がしたい…", "I wish I could ease.")
		if ( gdata(GDATA_FLAG_GAME_MODE) == GAMEMODE_OVERDOSE ) {
			chatList 2, lang("経験値倍率を変えたい", "I wish change magnification of exp.")
		}
		if ( gdata(GDATA_FLAG_GAME_MODE) == GAMEMODE_PURGE ) {
			chatList 3, lang("残機数を変えたい", "I wish change number of remaining lives.")
		}
		buff = lang("この宇宙は苦難で満ちているのです。私と一緒に…少しでも楽な方へと堕ちていきませんか？", "Hey... you can change to an easier game mode than now...")
		gosub *chat_select
		if ( chatval == 1 ) {
			chatMore lang("ふふふ…♪もうこの宇宙には戻ってこれませんけど、構いませんよね？さぁ、一度そっと目を閉じて。…そして開いて、私の瞳孔を見つめるのです。", "You can not return to the original game mode. Now, please look at my eyes.")
			goto *com_change_gamemode
		}
		if ( chatval == 2 ) {
			chatList 0, lang("3倍にする（デフォルト）", "Change to 3-fold.")
			chatList 1, lang("5倍にする", "Change to 5-fold.")
			chatList 2, lang("10倍にする", "Change to 10-fold.")
			chatList 3, lang("20倍にする", "Change to 20-fold.")
			chatList 4, lang("30倍にする", "Change to 30-fold.")
			buff = lang("アハァ♪わかりますよ、ええわかりますとも。物足りないのでしょう？さぁ、倍率を迷う必要なんてありません。どうせ、遅かれ早かれ最終的には最大倍率を選ぶのですから。", "Aha.. I understand you. I know that you are unsatisfactory! Well, there is no need to get lost. Anyway, sooner or later you will ultimately choose the maximum magnification.")
			gosub *chat_select
			if ( chatval == 0 ) {
				snd SOUNDLIST_LOAD
				chatMore lang("ん〜？これで本当にいいんですかぁ？", "What...? Is this really OK?"), strbye
				gdata(GDATA_FLAG_OVERDOSE_MODE_EXP_MULT) = 0
			}
			if ( chatval == 1 ) {
				snd SOUNDLIST_LOAD
				chatMore lang("欲望の解放にブレーキをかけているのですね。かわいい〜♪", "Oh...You are braking the release of desire. Cute!"), strbye
				gdata(GDATA_FLAG_OVERDOSE_MODE_EXP_MULT) = 2
			}
			if ( chatval == 2 ) {
				snd SOUNDLIST_LOAD
				chatMore lang("中途半端が一番体によくないものです…。選び直さなくていいんですか…？", "The halfway is the most bad thing. Do not you have to select again...?"), strbye
				gdata(GDATA_FLAG_OVERDOSE_MODE_EXP_MULT) = 7
			}
			if ( chatval == 3 ) {
				snd SOUNDLIST_LOAD
				chatMore lang("「昔はそうだったから」セーフなんですよね？でも今は更に上があるんですよ？", "It is safe, because it used to be so, is not it? So are you really satisfied?"), strbye
				gdata(GDATA_FLAG_OVERDOSE_MODE_EXP_MULT) = 17
			}
			if ( chatval == 4 ) {
				snd SOUNDLIST_LOAD
				chatMore lang("いいんですよ…自分自身で選んだ快楽で、頭おかしくなっちゃいましょうねぇ♪", "It's ok...Please be crazy with head pleasure you chose...!"), strbye
				gdata(GDATA_FLAG_OVERDOSE_MODE_EXP_MULT) = 27
			}
			goto *chat_end
		}
		if ( chatval == 3 ) {
			chatList 0, lang("残機0にする（デフォルト）", "I do not need it.")
			chatList 1, lang("残機3にする", "Get 3 remaining lives.")
			chatList 2, lang("残機9にする", "Get 9 remaining lives.")
			chatList 3, lang("残機20にする", "Get 20 remaining lives.")
			chatList 4, lang("残機99にする", "Get 99 remaining lives.")
			buff = lang("ほら、いくつ欲しいんですか…言ってくれなきゃわかりませんよ？足りなくなっても、いくらでも補充してさしあげますからね…。", "Here, how many do you want...? I do not know unless you tell me. When that is no longer enough, I will refill and give you...")
			gosub *chat_select
			if ( chatval == 0 ) {
				snd SOUNDLIST_LOAD
				chatMore lang("あらあら。いまさらプライドを見せたところで無意味でしょう？", "Oh dear... Even if you show pride, it's too late."), strbye
				gdata(GDATA_FLAG_REMAINING_LIVES) = 0
			}
			if ( chatval == 1 ) {
				snd SOUNDLIST_LOAD
				chatMore lang("欲望の解放にブレーキをかけているのですね。かわいい〜♪", "Oh...You are braking the release of desire. Cute!"), strbye
				gdata(GDATA_FLAG_REMAINING_LIVES) = 3
			}
			if ( chatval == 2 ) {
				snd SOUNDLIST_LOAD
				chatMore lang("中途半端が一番体によくないものです…。選び直さなくていいんですか…？", "The halfway is the most bad thing. Do not you have to select again...?"), strbye
				gdata(GDATA_FLAG_REMAINING_LIVES) = 9
			}
			if ( chatval == 3 ) {
				snd SOUNDLIST_LOAD
				chatMore lang("これっぽっちで不安になりませんか？もっと増やさなくていいんですか…？", "Will not you be anxious only by this? Do not you have to increase more...?"), strbye
				gdata(GDATA_FLAG_REMAINING_LIVES) = 20
			}
			if ( chatval == 4 ) {
				snd SOUNDLIST_LOAD
				chatMore lang("悪魔もびっくりですよ？本当に…本当に欲張りさぁん♪", "What hell! Really, really greedy..!"), strbye
				gdata(GDATA_FLAG_REMAINING_LIVES) = 99
			}
			goto *chat_end
		}
		chatMore lang("適度な苦難こそが人を成長させる…そして、苦難を乗り越えなければ得られない悦びもある…。ええ、わかっていますとも。頭ではわかっていても…私の身体がわかってくれないのです。", "I already know. Just right difficulties will make people grow. And there are pleasures that can not be gained unless you overcome difficulties..."), strbye
		goto *chat_end
	}
	if ( _switch_val == CREATURE_ID_CARTER_THE_SKILLED_FOOT | _switch_sw ) {
		_switch_sw = 0
		chatList 0, lang("ここで暮らしているの？", "Do you live in this place?")
		chatList 1, lang("谷の奥はどうなっているの？", "What is happening inside the valley?")
		buff = lang("ラスキリスは古くから旅人の通り道でな。こんなことになる前は、道端にちらほらと商人もおったものじゃ。", "Raskilis has been known as a traveler's path for a while now. However before that, it also occasionally had merchants on its roadside.")
		gosub *chat_select
		if ( chatval == 0 ) {
			chatMore lang("ああ。誰かが製作中だったキャンプ地を利用させてもらっておる。自給自足生活も悪くない。", "Oh. I'm making use of this campsite that somebody made. A self-sufficient life isn't bad either.")
			goto *chat_end
		}
		if ( chatval == 1 ) {
			chatMore lang("道を外れた奥地はまだまだ未開じゃ。軽い気持ちで入っていった冒険者は、大体帰ってこなかったな。", "The area hasn't been explored past the entrance to the interior. Carefree adventures who go inside largely haven't returned.")
			goto *chat_end
		}
		goto *chat_end
	}
	if ( _switch_val == CREATURE_ID_NANCY_THE_WANDERLUST | _switch_sw ) {
		_switch_sw = 0
		if ( nan == 1 ) {
			chatMore lang("実は次の移住先を探しているの。ここも、いつまで安全かわからないでしょう？", "To tell you the truth, I'm looking for yet another place to live. Even here, you can't really say how long you'll be safe, you know?")
			goto *chat_end
		}
		if ( nan == 0 ) {
			chatMore lang("私達の大切なものを奪っていく悪魔の獣…", "Devilish beasts which rob all that is precious to us...")
			chatMore lang("と言っても、何が消えたのかすらもう思い出せないのですが。", "Although I say that, I can't really recall anything that has disappeared.")
			chatMore lang("西にあるザイールも被害を受け、街として機能しなくなったので、仕方がなくここに移住したの。", "Zaile to the west has also been damaged and can't properly function as a city anymore. I had no other choice but to migrate here.")
			nan = 1
			goto *chat_end
		}
		goto *chat_end
	}
	if ( _switch_val == CREATURE_ID_TONI_THE_ANGLER | _switch_sw ) {
		_switch_sw = 0
		chatList 0, lang("調子はどう？", "How's it going?")
		chatList 1, lang("どこの水辺でも釣れるのでは？", "Which waterfront can you catch fish on?")
		buff = lang("魚の釣れる場所には目印にウキを浮かべているよ。参考にしてくれ。", "I'm floating over a place where you can fish. Please use that as a reference.")
		gosub *chat_select
		if ( chatval == 0 ) {
			chatMore lang("それが…なんか前は釣れなかった魚や物が釣れるようになっているんだ。獣の影響で、環境に変化が生じたのかもしれないな。", "Hmm... since earlier I'm not able to catch anything I should be able to, fish and things of the sort. Perhaps the environment is changing due to the influence of the beasts here.")
			goto *chat_end
		}
		if ( chatval == 1 ) {
			chatMore lang("ハハ、いいね。キミは水辺ならどこでも魚が釣れる世界から来たのかい？", "Haha, nice one. Do you come from a world where you can just catch fish anywhere in the water?")
			goto *chat_end
		}
		goto *chat_end
	}
	if ( _switch_val == CREATURE_ID_BLACK_GAUNTLET_LEOLD | _switch_sw ) {
		_switch_sw = 0
		if ( gdata(GDATA_AREA) == AREA_CHAOS_CRADLE ) {
			if ( gdata(GDATA_LEVEL) == 179 ) {
				if ( gdata(GDATA_FLAG_MAIN) == 715 ) {
					chatMore lang("おかしいな…やはり弱すぎるぞ。最初は誤差だと思っていたが、いくらなんでも予測と違いすぎる。", "That was too easy. Way too easy. I thought it would be close to what we expected at the beginning, but this is just... not what we thought it would be.")
					chatMore lang("死体に残存する神力量も少な…なんだこれは！？離れろ！", "There's also very little divine power left in the bod- what's going on?! Everyone get away!")
					goto *chat_end
				}
				if ( gdata(GDATA_FLAG_MAIN) == 720 ) {
					chatMore lang("まさか…エンテュメイシスが吸収していた神の一柱が、分離・復活したのか！？", "Is the a god that Enthumesis absorbed splitting away and reviving itself?!")
					chatMore lang("…いや、違う。寄生していたんだ。こいつが、エンテュメイシスのため込んだ神力を吸収していたんだッ！", "No, that's not it. It's a parasite. It's absorbing all the divine power that was stored in Enthumesis!")
					chatMore lang("来光の牙を使うにしても、枷をかけて閉じ込めるにしても、どうにか弱らせる必要がある。産まれたばかりでヨタヨタしているが、奴から感じる力は超神級だ。迂闊に近づくなよ" + cdatan(CDATAN_NAME, CHARA_PLAYER) + "！", "We'll need to weaken it before using the Origin of Light or to trap it with a fetter. It's still clumsy because it's still a newborn, but the power coming off of it is definitely beyond that of a regular god. " + cdatan(CDATAN_NAME, CHARA_PLAYER) + "! Don't get too close to it!")
					cdata(CDATA_AI_DISTANCE, tc) = 3
					goto *chat_end
				}
				if ( gdata(GDATA_FLAG_MAIN) == 725 ) {
					chatMore lang("ちっ…俺たちだけでは手に負えないな。", "Damn, this thing is out of our league.")
					goto *chat_end
				}
				if ( gdata(GDATA_FLAG_MAIN) == 735 ) {
					chatMore lang("なんだ今の攻撃は！？", "What was that attack just now?!")
					goto *chat_end
				}
				if ( gdata(GDATA_FLAG_MAIN) == 745 ) {
					chatMore lang("駄目だ、決定打が足りない！", "This is no good! Our attacks aren't doing enough!")
					goto *chat_end
				}
				if ( gdata(GDATA_FLAG_MAIN) == 755 ) {
					chatMore lang("止まったのか…？", "Did... did we stop it?")
					goto *chat_end
				}
				if ( gdata(GDATA_FLAG_MAIN) >= 760 ) {
					chatMore lang("再生能力まで消してくれれば、殺して来光の牙を使えたんだが…もう爺さんが限界のようだな。凶獣とやらも崩壊しかかっている。術者が行動不能になった時に自壊するよう、安全装置が組み込まれていたようだ。とりあえず爺さんについては、仲間のところまで俺の化身が送り届けるぞ。", "We might've been able to use the Origin of Light if we get rid of that regeneration, but it looks like that old man's reached his limit. That beast is also not going to last much longer. It was probably made to self-destruct when its user is incapacitated. For now, I'll just send that old man back with a servant of mine.")
					chatMore lang("ノルンから連絡がいっているはずだが、俺からも他の神々に報告をしておきたい。もう動かなくなったとはいえ、こいつが何者なのか調べたり、今後どうするのか相談もしなきゃいけないしな。一度、神の間から出るぞ。", "Norne's going to report to the gods, but I'll have to do that too. We need to find out what that was even if it's not moving anymore, and we also need to decide what to do from now on. Come on, let's get out of here.")
					if ( gdata(GDATA_FLAG_DUEL_TARGET) > 0 ) {
						gdata(GDATA_FLAG_DUEL_TARGET) = 0
					}
					mdata(MDATA_DOWNSTAIRS_POS) = cdata(CDATA_Y, CHARA_PLAYER) * 1000 + cdata(CDATA_X, CHARA_PLAYER)
					gdata(GDATA_TELEPORT_AREA) = AREA_CHAOS_CRADLE
					gdata(GDATA_TELEPORT_LEVEL) = 178
					levelexitby = 2
					gdata(GDATA_LEVEL_START_ON) = 7
					mapstartx = 10
					mapstarty = 13
					chatteleport = 1
					goto *chat_end
				}
				goto *chat_end
			}
		}
		if ( gdata(GDATA_AREA) == AREA_CHAOS_CRADLE ) {
			if ( gdata(GDATA_LEVEL) == 178 ) {
				if ( gdata(GDATA_FLAG_MAIN) >= 715 ) {
					if ( gdata(GDATA_FLAG_MAIN) >= 760 ) {
						chatList 0, lang("ちゃんと警備してよ", "Keep a close eye on that thing, will you?")
						if ( gdata(GDATA_FLAG_LEOLD_LOCATION_STATE) < 8 ) {
							chatList 1, lang("ご褒美は？", "Where's my reward?")
						}
						buff = lang("アクシデントもあったが、エンテュメイシスは倒せた。お前は決戦因子としてよくやってくれたよ。後は俺たちに任せてくれ。", "It didn't go without a hitch, but what matters is that Enthumesis has been defeated. You can leave the rest to me.")
						gosub *chat_select
						if ( chatval == 0 ) {
							chatMore lang("お前は心配性だな…。大丈夫だ、やつは身体の動かし方すら概念レベルで忘れている。出てこられるわけがない。仮に、外側から出そうとする者が来ても、神の間と物理的につながっているのはこの扉のみ。そしてこの階層は神力が使える。つまりソピアーが常闇の杖で事前に感知してくれるのさ。", "You don't have to worry about that. It can't even move its body properly - there's no chance that it'll get out from here. Even if someone from the outside tried to bring it out, Sophia will know. The door here is the sole entryway into God's Prison, and divine power can be use here perfectly well.")
							chatMore lang("警備は完璧だ。お前はいつもの生活に戻ってくれ。", "You can leave the guarding to me. You go back to your stuff now.")
						}
						if ( chatval == 1 ) {
							chatMore lang("褒美か。そうだな。", "A reward? Sure, I guess.")
							if ( gdata(GDATA_FLAG_LEOLD_LOCATION_STATE) < 6 ) {
								gdata(GDATA_FLAG_LEOLD_LOCATION_STATE) = 6
								txt_questitem
								flt
								itemcreate -1, ITEM_ID_WAKE_UP_OF_NEFIA, cdata(CDATA_X, CHARA_PLAYER), cdata(CDATA_Y, CHARA_PLAYER), 0
								chatMore lang("…宝玉を渡しておこう。近辺のネフィアを活性化させ、内部のモンスターの力を引き出すことができる。役に立つかはわからんが、副次効果としてネフィアの核も手に入れることができるだろう。", "You can have this gem. It awakens nearby Nefia and brings out the potential of the monsters within them. It also enables you to find the core of Nefia - though I don't know if you'll have any use for those.")
							}
							chatList 0, lang("いらん", "Don't want it.")
							chatList 1, lang("爪の♂", "Taloned male.")
							chatList 2, lang("爪の♀", "Taloned female.")
							chatList 3, lang("牙の♂", "Fanged male.")
							chatList 4, lang("牙の♀", "Fanged female.")
							buff = lang("合計2体までなら化身をくれてやってもいいがどうする？爪の鋭い奴と牙がすごい奴がいるんだが。", "I can give you up to two servants. How 'bout it? There are ones with sharp talons and some with really impressive teeth.")
							gosub *chat_select
							if ( get_freeally() == 0 ) {
								chatMore lang("む。そもそも仲間の最大数に達しているから連れていけないのか。", "Hmm. It looks like your party is already full and you can't invite someone anymore.")
						goto *chat_end
					}
							if ( chatval == 0 ) {
								chatMore lang("そうか…。", "I see.")
							}
							if ( chatval >= 1 & chatval <= 4 ) {
								gdata(GDATA_FLAG_LEOLD_LOCATION_STATE)++
								if ( chatval == 1 ) {
									p = CREATURE_ID_TALON_SOLDIER
									sex = 0
								}
								if ( chatval == 2 ) {
									p = CREATURE_ID_TALON_SOLDIER
									sex = 1
								}
								if ( chatval == 3 ) {
									p = CREATURE_ID_FIN_CROCODILE
									sex = 0
								}
								if ( chatval == 4 ) {
									p = CREATURE_ID_FIN_CROCODILE
									sex = 1
								}
								if ( p == CREATURE_ID_TALON_SOLDIER ) {
									txt lang("この獣爪兵はとても好戦的なうえ、煙の中でも視野を確保できるようだ。", "This soldier is very aggressive and seems to be able to see its targets perfectly clearly through smoke.")
								}
								if ( p == CREATURE_ID_FIN_CROCODILE ) {
									txt lang("このワニは泳ぎがとても得意なようだ。", "This crocodile seems to be very good at swimming.")
								}
								flt
								novoidlv = 1
								characreate -1, p, cdata(CDATA_X, CHARA_PLAYER), cdata(CDATA_Y, CHARA_PLAYER)
								cdata(CDATA_SEX, rc) = sex
								wishally = 100
								gosub *add_ally
							}
						}
						goto *chat_end
					}
					chatList 0, lang("ああ", "Yes.")
					chatList 1, lang("いや…", "No...")
					if ( gdata(GDATA_FLAG_MAIN) == 715 | gdata(GDATA_FLAG_MAIN) == 720 ) {
						buff = lang("来たな。イベントの続きをやるぞ。本来はエンテュメイシスを倒した直後にそのまま起きるものだからな。", "You're back. Let's get on with the rest of the event. This was supposed to happen immediately after defeating Enthumesis.")
					}
					if ( gdata(GDATA_FLAG_MAIN) > 720 ) {
						buff = lang("神の間に行くか？", "Head down to God's Prison?")
					}
					gosub *chat_select
					if ( chatval == 0 ) {
						if ( gdata(GDATA_FLAG_DUEL_TARGET) > 0 ) {
							snd SOUNDLIST_FAIL1
							txt_duel2
							goto *chat_end
						}
						mdata(MDATA_DOWNSTAIRS_POS) = cdata(CDATA_Y, CHARA_PLAYER) * 1000 + cdata(CDATA_X, CHARA_PLAYER)
						gdata(GDATA_TELEPORT_AREA) = AREA_CHAOS_CRADLE
						gdata(GDATA_TELEPORT_LEVEL) = 179
						levelexitby = 2
						gdata(GDATA_LEVEL_START_ON) = 7
						mapstartx = 10
						mapstarty = 13
						chatteleport = 1
						goto *chat_end
					}
					goto *chat_end
				}
				if ( gdata(GDATA_FLAG_MAIN) >= 680 & gdata(GDATA_FLAG_MAIN) < 715 ) {
					if ( gdata(GDATA_FLAG_MAIN) < 700 ) {
						chatList 0, lang("次は何をすればいい？", "What do I have to do next?")
					}
					if ( gdata(GDATA_FLAG_MAIN) <= 685 ) {
						chatList 1, lang("それ知ってた", "I knew that already.")
					}
					if ( gdata(GDATA_FLAG_MAIN) <= 685 ) {
						chatList 2, lang("テスカトリポカが混沌の神じゃないの？", "Isn't Tezcatlipoca the God of Chaos?")
					}
					if ( gdata(GDATA_FLAG_LEOLD_LOCATION_STATE) < 7 ) {
						chatList 3, lang("勝ったご褒美は？", "What do I get if we win?")
					}
					if ( gdata(GDATA_FLAG_MAIN) >= 700 & gdata(GDATA_FLAG_MAIN) < 720 ) {
						chatList 5, lang("もうちょっと待ってて", "Hang on a sec.")
					}
					if ( gdata(GDATA_FLAG_MAIN) >= 700 & gdata(GDATA_FLAG_MAIN) < 715 ) {
						chatList 4, lang("【神の間へ降りる】", "<Head down to God's Prison>")
					}
					if ( gdata(GDATA_FLAG_MAIN) == 680 ) {
						buff = lang("それにしても我…いや俺がテスカトリポカだとは思わなかっただろう。騙されたな？", "You didn't think I was Tezcatlipoca, did you? Gotcha.")
					}
					if ( gdata(GDATA_FLAG_MAIN) > 680 ) {
						buff = lang("神の間で決戦因子と共に戦えるように、受肉して神力を使わず純粋に鍛え上げた…それがこのレオルドとしての姿だ。混沌の神にどこまで通用するかはわからんがな。", "What you see here - the person you call Leold - is a physical form that I had created and trained up without any use of divine power. All so that I could fight alongside the Factors in God's Prison. I don't know how much of that effort will pay off against the God of Chaos though.")
					}
					if ( gdata(GDATA_FLAG_MAIN) == 680 ) {
						gdata(GDATA_FLAG_MAIN) = 685
					}
					gosub *chat_select
					if ( chatval == 0 ) {
						chatMore lang("ソピアーが中心になって決戦準備を進めている。準備ができ次第、神の間に突入してもらうことになるだろう。気になるなら進捗を確認しに行ってくれ。", "Sophia and the others are preparing for the final confrontation. You're probably going to have to fight in God's Prison when the time comes. You can go check to see if how they're doing with the preparations if you want.")
					}
					if ( chatval == 1 ) {
						chatMore lang("う、嘘だろ？", "You... you're kidding...")
						chatMore lang("ネタバレしたのは誰だ。…シナアか！？", "Who let the cat out of the bag?! Was it Sinaha?!")
						txtef COLOR_YELLOW
						txt lang("シナア「うみゃっ！？」", "Sinaha: \"Mew!?\"")
					}
					if ( chatval == 2 ) {
						chatMore lang("誰がそんなこと言ったんだ。混沌の神は混沌の神、テスカトリポカはテスカトリポカで全くの別神だぞ。誰かの推測でも鵜呑みにしたか？", "Who told you that? The God of Chaos and Tezcatlipoca are completely separate and different. You shouldn't believe every rumour that you hear.")
						chatMore lang("俺は滅亡が迫っていることを決戦因子候補たちに警告し、神の間を目指して必要な力を示すように指示したが…俺自身が滅ぼすなんて一言も言っていないだろう。そもそも神の間に囚われていたら神力で外界に呼びかけること自体が不可能だ。", "When danger drew close, I did warn all the people who were candidates as Factors and tell them to head to God's Prison. I did not say anything about destroying anything myself, did I? Besides, it would've been impossible to summon anybody in the outside world if I were trapped in the Prison.")
						chatMore lang("確定情報と不確定情報は混同せず、ちゃんと分けて整理したほうがいいぞ。勘違いを招くからな。", "You should always be careful about separating facts from assumptions, or else you'll get things wrong again.")
					}
					if ( chatval == 4 ) {
						chatMore lang("神の間では記録ができないらしい。回復アイテム、補給用アイテム、装備の見直…いや、前にも言ったからもう分かっているか。", "It looks like you're not going to be able to save while you're inside there. Do you have all your healing and buffing items? What about your equipment? ...No, I think I've told you all that already, haven't I?")
						chatMore lang("混沌の神エンテュメイシス討伐。ついにこの時が来た。よし…俺も覚悟を決めたぞ。行こう、" + cdatan(CDATAN_NAME, CHARA_PLAYER) + "！", "The time to defeat Enthumesis has finally come. Alright. I think I'm ready too. Let's go, " + cdatan(CDATAN_NAME, CHARA_PLAYER) + "!")
						if ( gdata(GDATA_FLAG_DUEL_TARGET) > 0 ) {
							snd SOUNDLIST_FAIL1
							txt_duel2
							goto *chat_end
						}
						autosave = 1 * (gdata(GDATA_AREA) != AREA_SHOW_HOUSE)
						mdata(MDATA_DOWNSTAIRS_POS) = cdata(CDATA_Y, CHARA_PLAYER) * 1000 + cdata(CDATA_X, CHARA_PLAYER)
						gdata(GDATA_TELEPORT_AREA) = AREA_CHAOS_CRADLE
						gdata(GDATA_TELEPORT_LEVEL) = 179
						levelexitby = 2
						gdata(GDATA_LEVEL_START_ON) = 7
						mapstartx = 10
						mapstarty = 13
						chatteleport = 1
						goto *chat_end
					}
					if ( chatval == 3 ) {
						chatMore lang("褒美か。アーティファクトなら戦闘で落としたものを持っていけ。", "A reward? You can have this artifact that it dropped.")
						if ( gdata(GDATA_FLAG_LEOLD_LOCATION_STATE) == 6 ) {
							chatMore lang("宝玉も渡しただろう？覚醒の宝玉だ。", "I gave you a gem, right? The gemstone of awakening.")
						}
						if ( gdata(GDATA_FLAG_LEOLD_LOCATION_STATE) < 6 ) {
							gdata(GDATA_FLAG_LEOLD_LOCATION_STATE) = 6
							txt_questitem
							flt
							itemcreate -1, ITEM_ID_WAKE_UP_OF_NEFIA, cdata(CDATA_X, CHARA_PLAYER), cdata(CDATA_Y, CHARA_PLAYER), 0
							chatMore lang("…宝玉を渡しておこう。近辺のネフィアを活性化させ、内部のモンスターの力を引き出すことができる。役に立つかはわからんが、副次効果としてネフィアの核も手に入れることができるだろう。", "You can have this gem. It awakens nearby Nefia and brings out the potential of the monsters within them. It also enables you to find the core of Nefia - though I don't know if you'll have any use for those.")
						}
						chatList 0, lang("保留", "Maybe later.")
						chatList 1, lang("爪の♂", "Taloned male.")
						chatList 2, lang("爪の♀", "Taloned female.")
						chatList 3, lang("牙の♂", "Fanged male.")
						chatList 4, lang("牙の♀", "Fanged female.")
						chatList 5, lang("全部だ！", "I want all of them!")
						buff = lang("あとは化身の1体くらいならくれてやってもいいがどうする？爪の鋭い奴と牙がすごい奴がいるんだが。", "You can have one more servant. How 'bout it? There are ones with sharp talons and some with really impressive teeth.")
						gosub *chat_select
						if ( get_freeally() == 0 ) {
							chatMore lang("む。そもそも仲間の最大数に達しているから連れていけないのか。", "Hmm. It looks like your party is already full and you can't invite someone anymore.")
							goto *chat_end
						}
						if ( chatval == 0 ) {
							chatMore lang("そうか…。あと言っておくが、俺は光玉は持ってないからな。", "Okay then. And just so that you know, I don't have any god jewels.")
						}
						if ( chatval == 5 ) {
							chatMore lang("欲張りだな。混沌の神を討伐したらもう1体くれてやるから勘弁してくれ。", "Greedy, aren't you? I'll give you just one more after we defeat the God of Chaos, okay?")
						}
						if ( chatval >= 1 & chatval <= 4 ) {
							gdata(GDATA_FLAG_LEOLD_LOCATION_STATE) = 7
							if ( chatval == 1 ) {
								p = CREATURE_ID_TALON_SOLDIER
								sex = 0
							}
							if ( chatval == 2 ) {
								p = CREATURE_ID_TALON_SOLDIER
								sex = 1
							}
							if ( chatval == 3 ) {
								p = CREATURE_ID_FIN_CROCODILE
								sex = 0
							}
							if ( chatval == 4 ) {
								p = CREATURE_ID_FIN_CROCODILE
								sex = 1
							}
							if ( p == CREATURE_ID_TALON_SOLDIER ) {
								txt lang("この獣爪兵はとても好戦的なうえ、煙の中でも視野を確保できるようだ。", "This soldier is very aggressive and seems to be able to see its targets perfectly clearly through smoke.")
							}
							if ( p == CREATURE_ID_FIN_CROCODILE ) {
								txt lang("このワニは泳ぎがとても得意なようだ。", "This crocodile seems to be very good at swimming.")
							}
							flt
							novoidlv = 1
							characreate -1, p, cdata(CDATA_X, CHARA_PLAYER), cdata(CDATA_Y, CHARA_PLAYER)
							cdata(CDATA_SEX, rc) = sex
							wishally = 100
							gosub *add_ally
						}
					}
					goto *chat_end
				}
				if ( gdata(GDATA_FLAG_MAIN) == 665 ) {
					chatList 0, lang("ここで何してるの？", "What are you doing here?")
					chatList 1, lang("二番乗りじゃなくて？", "First? I'm not the second?")
					buff = lang("よくここまで辿り着いたな。" + cdatan(CDATAN_AKA, CHARA_PLAYER) + cdatan(CDATAN_NAME, CHARA_PLAYER) + "、お前が一番乗りだ。", "Good to see you here, " + cdatan(CDATAN_AKA, CHARA_PLAYER) + " " + cdatan(CDATAN_NAME, CHARA_PLAYER) + ". You're the first.")
					chatesc = 1
					gosub *chat_select
					chatMore lang("俺は決戦因子の選定役だ。ずっと伏せてきたが、これが八柱神から与えられた使命でな。そのために強者の育成に力を尽くしてきた。", "I've been hiding and watching to choose the Factors. It's the job delegated to me by the Eight Gods. That's why I've been training and helping the strong all the time.")
					if ( gdata(GDATA_FLAG_LEOLD_LOCATION_STATE) == 1 ) {
						gdata(GDATA_FLAG_LEOLD_LOCATION_STATE) = 2
						chatMore lang("しかし、まさか初対面の冒険者が来るとはな。俺の立場がないぞ…。", "But to think that an adventurer that I've never met before would be here. Impressive. You put my efforts to shame.")
					}
					chatMore lang("すぐ下が神の間に続いている。神の間では記録ができないらしい。回復アイテム、補給用アイテム、装備の見直し、メンバーの入れ替え…入念に準備をするんだ。用意ができたら話しかけてくれ、案内する。", "God's Prison is right ahead. I've heard that you won't be able to save in there. Make sure that you have all your healing and buffing items, and give your equipment and party a lookover. You can't be over-prepared for what's ahead. When you're ready, come talk to me and I'll take you there.")
					if ( gdata(GDATA_FLAG_LEOLD_LOCATION_STATE) < 5 ) {
						gdata(GDATA_FLAG_LEOLD_LOCATION_STATE) = 5
					}
					gdata(GDATA_FLAG_MAIN) = 670
					goto *chat_end
				}
				if ( gdata(GDATA_FLAG_MAIN) == 670 | gdata(GDATA_FLAG_MAIN) == 675 ) {
					chatList 0, lang("用意してくる", "Still making preparations.")
					chatList 1, lang("力の覚醒", "Awaken powers.")
					chatList 2, lang("【テスカトリポカと戦う】", "<Fight Tezcatlipoca>")
					buff = lang("どうした？", "Yeah?")
					gosub *chat_select
					if ( gdata(GDATA_FLAG_LEOLD_LOCATION_STATE) < 5 ) {
						gdata(GDATA_FLAG_LEOLD_LOCATION_STATE) = 5
					}
					if ( chatval == 1 ) {
						chatMore lang("ここでやると色々と処理が面倒くさくてな。悪いがウールム・レゾンまで来てくれ。", "That's going to be too much trouble here. If you want that, you'll have to come with me to Ulm-Leson.")
					}
					if ( chatval == 2 ) {
						chatMore lang("ん？…まぁ、いいだろう。先にテスカトリポカについて話をしておこう。", "Huh? Well, sure, I guess. But I should tell you about Tezcatlipoca before that.")
						chatMore lang("テスカトリポカは争いを好む軍神だ。元々はエヘカトルやイツパロトルと同じ地域で生まれた神だったらしいが。エヘカトルとは長年の好敵手で、代が変わっても殺し合ったり作ったものを壊し合ったり時に怪物討伐で共闘したりを繰り返してきたとされる。", "Tezcatlipoca is the conflict-loving God of War. It's said that he was born in the same domain as Ehekatl and Itzpalt. Forever the rival of Ehekatl, they would fight and kill each other generation after generation, but also fight alongside each other to slay monsters.")
						chatMore lang("特に初代は狡猾な奴だったらしい。具体的には、初代の男のエヘカトルを騙して特殊な呪われた酒を飲ませ、エヘカトルが悪酔いして実の妹と気持ちいいこと漬けになったところで暴露して追放に追い込んだりな。", "It's said that the first generation of Tezcatlipoca was extremely cunning. He tricked the first Ehekatl into drinking a special cursed wine and made him have a little tail with his own little sister, then exposed the scandal to exile him.")
						chatMore lang("とにかく油断をするなということだ。単純な戦闘力だけではなく、騙されるという危険があるのだから。では、いくぞ。", "Anyway, you just have to be careful of him. Tezcatlipoca isn't just about combat prowess - you also have to be careful not to get tricked. Now, let's go.")
						evadd EVENT_TEZCATLIPOCA
					}
					goto *chat_end
				}
				goto *chat_end
			}
		}
		if ( gdata(GDATA_FLAG_LEOLD_LOCATION_STATE) == 5 ) {
			chatMore lang("いいか" + cdatan(CDATAN_NAME, CHARA_PLAYER) + "、お前は強い。その辺りの雑魚では相手にならず、戦いに飢え、取り返しのつかないことをしてしまう日がいつか来るかもしれない。…こいつを渡しておく。", "You're strong, " + cdatan(CDATAN_NAME, CHARA_PLAYER) + ". The time may come when monsters are no longer any match for you and you lust to fight something stronger. When that time comes, use this.")
			txt_questitem
			flt
			itemcreate -1, ITEM_ID_WAKE_UP_OF_NEFIA, cdata(CDATA_X, CHARA_PLAYER), cdata(CDATA_Y, CHARA_PLAYER), 0
			chatMore lang("その宝玉は近辺のネフィアを活性化させ、内部のモンスターの力を引き出すことができる。役に立つかはわからんが、副次効果としてネフィアの核も手に入れることができるだろう。", "This gem awakens nearby Nefia and brings out the potential of the monsters within them. It also enables you to find the core of Nefia - though I don't know if you'll have any use for those.")
			chatMore lang("…言っておくが、お前だけにこれを渡しているわけではないからな。勘違いするなよ。", "Don't think you're the only one I've given this to, though. Because you're not."), strbye
			gdata(GDATA_FLAG_LEOLD_LOCATION_STATE) = 6
		}
		if ( gdata(GDATA_FLAG_MAIN) >= 365 ) {
			if ( gdata(GDATA_FLAG_LEOLD_LOCATION_STATE) <= 1 ) {
				chatMore lang("…！なかなかいい面構えをしている。こんな強者と今まで巡り会えなかったとは、俺もついていなかったな。", "You! You've got the look of someone strong. Just my luck that it would take me this long to meet someone as strong as you.")
				chatMore lang("名前は…そうか、" + cdatan(CDATAN_NAME, CHARA_PLAYER) + "というのか。お前がこの地で生き延び強くなれるよう、少し助力をしてやろう。", "Your name is...? " + cdatan(CDATAN_NAME, CHARA_PLAYER) + "? I see. Well then, " + cdatan(CDATAN_NAME, CHARA_PLAYER) + ", I can lend you a hand if you want so that you can survive in these lands.")
				chatMore lang("そうそう。強者といえば、銀熊という異名の冒険者は特に見込みがあったんだが、止めるのも聞かずに大陸中央の巨城に乗り込んでしまった。いくら強くても人の話を聞かないやつは駄目だな。", "Speaking of strong, I saw a particularly promising adventurer called the Silver Bear. But she completely ignored me and headed straight into the Cradle of Chaos at the centre of the continent. Strength isn't going to make up for that lack of attention to others.")
				gdata(GDATA_FLAG_LEOLD_LOCATION_STATE) = 5
			}
			if ( gdata(GDATA_FLAG_LEOLD_LOCATION_STATE) >= 2 & gdata(GDATA_FLAG_LEOLD_LOCATION_STATE) <= 4 ) {
				chatMore lang("こっちに来てから、お前にまた会える日を待っていたぞ。他にも見込みのある冒険者が数名いたが…どうもな。", "I've been waiting for you ever since I got here. There are a few other promising adventurers, but well...")
				chatMore lang("銀熊という異名の冒険者は特に見込みがあったんだが、俺の話も聞かずに大陸中央の巨城に乗り込んでしまった。いくら強くても人の話を聞かないやつは駄目だな。", "There was one called the Silver Bear, but she completely ignored me and headed straight into the Cradle of Chaos at the centre of the continent. Strength isn't going to make up for that lack of attention to others.")
				gdata(GDATA_FLAG_LEOLD_LOCATION_STATE) = 5
			}
		}
		else {
			if ( gdata(GDATA_FLAG_LEOLD_LOCATION_STATE) == 1 ) {
				chatMore lang("…！なかなかいい面構えをしている。俺の見込み違いでなければ、お前は相当強くなれそうだ。", "You! You've got the look of someone strong. And if I'm not wrong about you, you're going to get really strong.")
				chatMore lang("名前は…そうか、" + cdatan(CDATAN_NAME, CHARA_PLAYER) + "というのか。お前がこの地で生き延び強くなれるよう、少し助力をしてやろう。", "Your name is...? " + cdatan(CDATAN_NAME, CHARA_PLAYER) + "? I see. Well then, " + cdatan(CDATAN_NAME, CHARA_PLAYER) + ", I can lend you a hand if you want so that you can survive in these lands.")
				gdata(GDATA_FLAG_LEOLD_LOCATION_STATE) = 2
			}
			if ( gdata(GDATA_FLAG_LEOLD_LOCATION_STATE) == 3 & gdata(GDATA_AREA) == AREA_RUOZA ) {
				chatMore lang("おお" + cdatan(CDATAN_NAME, CHARA_PLAYER) + "、お前もこっちに来てたのか。修行したいなら大陸中央にある遺跡がお勧めだぞ。メルガスに駐屯しているイェルス軍が管理していて入れないかもしれないがな。", "Ah, " + cdatan(CDATAN_NAME, CHARA_PLAYER) + ", I see you're here too. If you want to train yourself, you should try the Nefia in the center of the continent. But you might not be able to get in because the Yerles army stationed at Melugas have it locked down.")
				gdata(GDATA_FLAG_LEOLD_LOCATION_STATE) = 4
			}
		}
		chatList 0, lang("今はいい", "I'm okay for now.")
		chatList 1, lang("冒険の知恵", "Adventuring Advice")
		if ( gdata(GDATA_FLAG_LEOLD_LOCATION_STATE) >= 4 ) {
			chatList 2, lang("力の覚醒", "Awaken latent powers.")
		}
		if ( gdata(GDATA_FLAG_LEOLD_JOB_STAGE) <= 0 ) {
			chatList 3, lang("目標が欲しい", "I want an objective.")
		}
		if ( gdata(GDATA_FLAG_LEOLD_JOB_STAGE) == 2 ) {
			chatList 4, lang("目標を達成した", "I have completed the objective.")
		}
		buff = lang("現状に甘んじることなく、心と体を鍛え更なる高みを目指すのだ。何か俺に手伝えることはあるか？", "Never grow complacent - always strive to train your body and mind to reach new heights. Anything I can do to help?")
		gosub *chat_select
		if ( chatval == 1 ) {
			chatList 0, lang("食料について", "Food.")
			chatList 1, lang("仲間について", "Companions.")
			chatList 2, lang("アイテムについて", "Items.")
			chatList 3, lang("生活について", "Life.")
			chatList 4, lang("その他", "Other things.")
			buff = lang("聞きたいことはどれだ？", "What would you like to know about?")
			gosub *chat_select
			if ( chatval == 0 ) {
				chatMore lang("成長にいいのはハーブや出来のいい料理だ。だがどうしても食料に困ったら、ワールドマップ上の平原でマップに入り野草や実を拾うといいだろう。ちなみに宿屋での食事は安価で腹いっぱい食えるが栄養はないからな。", "Herbs and well-cooked dishes are great for attribute growth. If you're having trouble finding food though, try entering an empty area from the world map and looking for wild plants or fruit. Oh, and by the way. While you can get a cheap and satiating meal from any inn, those meals provide no nourishment whatsoever.")
				chatMore lang("ただしパンや旅糧、アピの実や芋などの一部を除いて食べ物は大体腐る。無理に腐ったものや呪われたものを食べても、吐いて余計に腹が減るし体も弱るぞ。", "Most food will eventually rot, though there are some exceptions such as api nuts, bread, rations, and potatoes.")
				chatMore lang("そして何度も吐いていると拒食症になってしまう。拒食症の間は何を食べても吐いてしまい、飲み物しか喉を通らない。こうなると充分な睡眠をとって自然治療するか、死ぬしかないから気を付けろ。", "After vomiting multiple times, you might become anorexic. You'll vomit up anything you eat during that time, so try to get by on liquids. You can cure it naturally by getting enough sleep, but watch out, as the only other way to get rid of it is to die.")
				goto *chat_end
			}
			if ( chatval == 1 ) {
				chatMore lang("最初は弱い仲間も鍛えればかなり戦力になるぞ。お前の魅力が高くなればより多くの仲間を連れ歩けるだろう。", "Although companions might start out pretty weak, with enough training, they can become quit formidable. With a higher Charisma value, you can bring along more companions.")
				chatMore lang("仲間を戦闘に参加させるなら、いい食べ物やいいアイテムを渡して強化することは必須だ。ただし鉱石や結婚指輪など、一部のアイテムは渡すと返してもらえないぞ。", "If you intend for them to join you in battle, it's essential that you feed your companions good food and give them good equipment. However, if you give them things such as ore and engagement jewelry, you won't be able to get those items back.")
				chatMore lang("あと、浮遊していない仲間は水を飲もうとして井戸に落ちて死んでしまうことがあるから気をつけろ。死んだり待機している仲間は酒場で復帰させることが出来るから覚えておけ。", "Also, a companion who can't float may fall to their death when attempting to drink water from a well, so be careful. Keep in mind that you can revive dead pets or retrieve pets on stand-by at any bar.")
				goto *chat_end
			}
			if ( chatval == 2 ) {
				chatMore lang("鑑定は大事だぞ。知らずに呪われたアイテムを使用するとろくなことにならないからな。特に、呪われた装備を着けると突然テレポートしたり、魔物を呼び寄せてしまったりする。他人が呪われた装備をしている場合は解呪の巻物を渡したり解呪の杖を振ったりするといいだろう。", "It's important that you get items appraised. Otherwise, you may end up using items that are cursed without even realizing it. Wearing equipment that is cursed may cause you to teleport randomly or summon monsters. When others are wearing cursed equipment, you may way to give them a scroll of uncurse or use a rod of uncurse on them to uncurse the equipment.")
				chatMore lang("火炎属性・冷気属性の攻撃を受けると、持っているアイテムの一部が破壊されることがある。それと耐酸処理がされていない装備は酸属性のダメージで劣化することがある。防ぐには対応したアイテムが必要だ。前者は耐性を整えることでも防げるがな。", "When you take fire or ice damage, some of your items may be destroyed. The integrity of equipment that isn't acid resistant may be damaged when you take acid damage. It's important that you obtain the items needed to stop this from happening. The former can be stopped with resistances alone, though.")
				chatMore lang("祝福された水を調合（Bキー）でアイテムに使用すると、使用されたアイテムが呪われていても祝福されたアイテムに変化するぞ。祝福されたアイテムは大抵強化されるが、効果が変わらないものもある。装備アイテムならば素材変化させるアイテムを使うと基本性能が大きく変わるぞ。冒険するならば、アイテムもいいものを揃えたいところだな。", "When you Mix(B key) blessed water it turns an item into a blessed one even if it's cursed. Most of the time blessed items are stronger, but some things don't change. If you use a change material item on an piece of equipment the base stats change. If you're going to travel, best to find good stuff to use.")
				goto *chat_end
			}
			if ( chatval == 3 ) {
				chatMore lang("外に出て＊キーで辺りを見回してみろ。大体の地形は感じ取れるはずだ。大抵の街や施設では定期的に掃除と維持修復が行われている。長くアイテムを置いておくと片づけられてしまうから注意しろ。逆に、破壊するともう元に戻らない施設もあるから慎重にな。", "Press the * key on the outer world map. You can get a feel for your surroundings. Towns that have government boards are cleaned and repaired at intervals. You'll lose items you leave laying around for too long. Other places, like this one, on the other hand... they won't be fixed if you destroy them.")
				chatMore lang("街や演奏会場にはカジノ系アイテムが置いてあることがある。これを使うとブラックジャックをプレイ出来るぞ。景品に「エーテル抗体のポーション」など貴重なアイテムがあるが、ディーラーは手強い。相当な運かイカサマ技術がなければ苦戦するだろうな。", "There are Casino related items in towns and party halls. If you use this you can play some blackjack. You can win prizes like potions of cure corruption but the dealer is tough. It'll be a tough going without a lot of luck or cheating.")
				chatMore lang("街では依頼を受けられるが、アイテムが揃うまでは討伐依頼は避け、他の簡単な依頼を受けるのが賢明だろう。ちなみに配達依頼は簡単だが失敗すると大きな罪に問われる。期限に気をつけることだ。罪を負うと負のカルマが蓄積していき、-31になる頃には指名手配されているだろう。", "You can take up quests in towns, but I recommend you to pass on the extermination quests until you have better gear and just do the simple quests. Delivery quests are easy by the way, but failing incurs big penalties. Be careful of the time limit. The more crimes you commit the lower your Karma goes, you'll be a wanted criminal if it goes below -31.")
				goto *chat_end
			}
			if ( chatval == 4 ) {
				chatMore lang("基本的に状態異常は時間経過や回復魔法・アイテムで少しずつ治っていく。しかし寄生の場合は毒薬や染料、硫酸を飲めば治療することが出来る。他人が寄生されている場合でも、それらを渡せば自分から飲んでくれるはずだ。", "Basically, status effects can be restored by either waiting for time to pass or using restorative magic and items to recover bit by bit. Except being impregnated you need to drink poison, dyes or acids to cure it. If others are infect as well, if you give it to them they'll drink it.")
				chatMore lang("それと、他の冒険者は俺と違って執念深い。うっかり怒らせると、倒してもマップを変えても出会うたびに襲い掛かってくるだろう。そうなるとアイテムや魔法で変装するしかないぞ。仲が悪いと自宅に放火されたりするらしいな。", "Also, unlike me, other Adventurers are vicious. If you somehow make them angry, they'll still come after you even after defeating them or changing maps. If that happens the only thing you can do is disguise yourself with magic or objects. They'll set fire to your house if they aren't your friend.")
				chatMore lang("成長には休息も重要だ。冒険が一段落したらなるべく質のいいベッドで寝るといいだろう。ただしベッドは「使わなければ」意味がないぞ！寝てる間に装備が呪われたりしたら、すぐに癒し手のところへ行き解呪してもらうんだな。", "Resting is important to growth. After you complete an adventure you should sleep in the best you can find. But it's meaningless unless you use it! If your equipment is cursed while you sleep, you should quickly get over to a healer to uncurse it.")
			}
			chatMore lang("まぁ、冒険者ギルドに所属しているならお前もマニュアルを持っているだろう。他にも色々と参考になることが書いてあるから、Shiftキーを押しながら？で読み返しておけ。", "Well, if you're a member of the Adventurer's guild then you probably already have a manual. There's a bunch of other stuff to check out written there, so hold down the shift key and press ? to read over it.")
			goto *chat_end
		}
		if ( chatval == 3 ) {
			if ( gdata(GDATA_FLAG_LEOLD_JOB_TIER) < 15 ) {
				gdata(GDATA_FLAG_LEOLD_JOB_TIER) = 15
			}
			chatMore lang("そうだな…。ひとまずレベル" + gdata(GDATA_FLAG_LEOLD_JOB_TIER) + "以上の敵モンスターを倒すことを目標にしてみてくれ。敵以外はノーカウントだからな。", "All right. Try to beat the enemy monsters of level " + gdata(GDATA_FLAG_LEOLD_JOB_TIER) + " and above. Nothing besides enemies count.")
			gdata(GDATA_FLAG_LEOLD_JOB_STAGE) = 1
			txt_questupdate
			goto *chat_end
		}
		if ( chatval == 4 ) {
			gdata(GDATA_FLAG_LEOLD_JOB_TIER) += 5
			chatMore lang("よしよし…よくやったじゃないか！祝いにこれをやろう。", "Alright... Well done! Let's celebrate with these.")
			flt
			itemcreate -1, ITEM_ID_MUSIC_TICKET, cdata(CDATA_X, CHARA_PLAYER), cdata(CDATA_Y, CHARA_PLAYER), limit(gdata(GDATA_FLAG_LEOLD_JOB_TIER) * 5 + 100, 100, 3000)
			flt
			itemcreate -1, ITEM_ID_BRONZE_COIN, cdata(CDATA_X, CHARA_PLAYER), cdata(CDATA_Y, CHARA_PLAYER), 0
			txt_questitem
			snd SOUNDLIST_COMPLETE1
			if ( gdata(GDATA_FLAG_LEOLD_JOB_TIER) >= 2005 ) {
				chatMore lang("もうお前はレベルがどうとかいう域には収まらない。これ以上の目標は、お前が自分で見つけていくんだ。", "You no longer fit into the levels we can provide. You'll have to search for higher level objectives yourself.")
				gdata(GDATA_FLAG_LEOLD_JOB_STAGE) = 1000
				txt_questupdate
				goto *chat_end
			}
			chatMore lang("次はレベル" + gdata(GDATA_FLAG_LEOLD_JOB_TIER) + "以上の敵モンスターを倒すことを目標にしてみてくれ。急がなくてもいいからな。", "For the next objective, try beating enemy monsters of level " + gdata(GDATA_FLAG_LEOLD_JOB_TIER) + " and above. There's no rush, so take your time.")
			gdata(GDATA_FLAG_LEOLD_JOB_STAGE) = 1
			txt_questupdate
			goto *chat_end
		}
		if ( chatval == 2 ) {
			chatList 0, lang("自分の力を覚醒", "I want to awaken my own powers.")
			chatList 1, lang("仲間の力を覚醒", "I want to awaken an ally's power.")
			buff = lang("強敵との死闘の中でこそ得られる特別な経験もある。しかし大抵そのままでは形にならず、記憶の海に埋もれてしまうものだ。そんな経験を組み合わせて俺が新たな力として覚醒させてやろう。", "There is a powerful form of experience gained from engaging powerful enemies in a life-or-death struggle. However, it typically does not take form and is buried within the seas of your memory. I can take those memories and use them to awaken new powers within you.")
			gosub *chat_select
			if ( chatval == 0 ) {
				goto *chat_unique_leold_awaken
			}
			if ( chatval == 1 ) {
				chatList 0, lang("速度上昇", "Increase speed.")
				chatList 5, lang("生命力上昇", "Increase life.")
				chatList 1, lang("フィート取得", "Acquire feats.")
				chatList 2, lang("魔法や技能の会得", "Learn spells and special abilities.")
				chatList 3, lang("戦闘スタイル変更・品質上昇", "Change battle style/increase character quality.")
				chatList 4, lang("スキルボーナスの獲得", "Convert AP into bonus points.")
				buff = lang("どういった力に変えるんだ？", "What form do you want your powers to take?")
				gosub *chat_select
				if ( chatval == 5 ) {
					chatMore lang("よし、現在の素の生命力や資質に応じたAPを消費して、生命力を10上げるぞ。誰の生命力を上昇させるんだ？", "Alright, I can raise an ally's life by 10 by consuming AP depending on element's life and bit. Who's it gonna be?")
					leoval = -2
					goto *chat_unique_leold_done
				}
				if ( chatval == 4 ) {
					chatMore lang("AP500をスキルボーナス100に変換する。誰を対象にするんだ？", "100 bonus points will cost 500AP. Who's it gonna be?")
					leoval = -1
					leoap = 500
					goto *chat_unique_leold_done
				}
				if ( chatval == 0 ) {
					chatMore lang("よし、APを現在の素の速度と同じだけ消費して速度を30上げるぞ。誰の速度を上昇させるんだ？", "Alright, I can raise an ally's speed by 30 by consuming as much AP as the current speed. Who's it gonna be?")
					leoval = 0
					goto *chat_unique_leold_done
				}
				if ( chatval == 1 ) {
					chatList 0, lang("魅惑(消費AP1500)[直接攻撃してきた敵が朦朧]", "Charm (1500AP) [Dim enemies attacking at close range]")
					chatList 2, lang("底力(消費AP1500)[HP減るほど最終与ダメージ上昇]", "Brave (1500AP) [Increase damage dealt as HP decreases]")
					chatList 1, lang("意地(消費AP1800)[HP減るほど回避・軽減率上昇]", "Obstinate (1800AP) [Increase evasion, damage mitigation as HP decreases]")
					chatList 3, lang("障壁(消費AP2000)[ダメージ分MP消費し攻撃無効化]", "Barrier (2000AP) [Negate attacks with equal amount of MP]")
					buff = lang("どのフィートを取得するんだ？", "Which feat do you want?")
					gosub *chat_select
					if ( chatval == 0 ) {
						leoap = 1500
						leoval = 101
						goto *chat_unique_leold_done
					}
					if ( chatval == 1 ) {
						leoap = 1800
						leoval = 102
						goto *chat_unique_leold_done
					}
					if ( chatval == 2 ) {
						leoap = 1500
						leoval = 103
						goto *chat_unique_leold_done
					}
					if ( chatval == 3 ) {
						leoap = 2000
						leoval = 104
						goto *chat_unique_leold_done
					}
					goto *chat_end
				}
				if ( chatval == 2 ) {
					chatList 0, lang("罵倒(消費AP100)", "Insult (100AP)")
					chatList 1, lang("魔力の集積(消費AP600)", "Crystal Spear (600AP)")
					chatList 2, lang("空間歪曲(消費AP100)", "Dimensional Move (100AP)")
					chatList 3, lang("挑発(消費AP200)", "Provoke (200AP)")
					chatList 4, lang("チャージ(消費AP1000)", "Charge (1000AP)")
					chatList 5, lang("タクティカルアーツ(消費AP600)", "Tactical Martial Arts (600AP)")
					chatList 6, lang("タクティカルアタック(消費AP400)", "Tactical Attack (400AP)")
					chatList 7, lang("タクティカルヒール(消費AP500)", "Tactical Heal (500AP)")
					chatList 8, lang("タクティカルカース(消費AP500)", "Tactical Curse (500AP)")
					chatList 9, lang("零の間撃(消費AP500)", "Zero Shoot (500AP)")
					chatList 10, lang("ストラックアウト(消費AP500)", "Struck Out (500AP)")
					chatList 11, lang("可変放射(消費AP400)", "Variable Breath (300AP)")
					chatList 12, lang("範囲魔法可変術式(消費AP800)", "Variable Storm (800AP)")
					buff = lang("どの魔法や技能を覚えさせるんだ？", "Which spells and abilities do you want your ally to learn?")
					gosub *chat_select
					if ( chatval == 0 ) {
						leoval = 1
						leoap = 100
						goto *chat_unique_leold_done
					}
					if ( chatval == 1 ) {
						leoval = 2
						leoap = 600
						goto *chat_unique_leold_done
					}
					if ( chatval == 2 ) {
						leoval = 4
						leoap = 100
						goto *chat_unique_leold_done
					}
					if ( chatval == 3 ) {
						leoval = 14
						leoap = 200
						goto *chat_unique_leold_done
					}
					if ( chatval == 4 ) {
						leoval = 7
						leoap = 1000
						goto *chat_unique_leold_done
					}
					if ( chatval == 5 ) {
						leoval = 6
						leoap = 600
						goto *chat_unique_leold_done
					}
					if ( chatval == 6 ) {
						leoval = 5
						leoap = 400
						goto *chat_unique_leold_done
					}
					if ( chatval == 7 ) {
						leoval = 3
						leoap = 500
						goto *chat_unique_leold_done
					}
					if ( chatval == 8 ) {
						leoval = 15
						leoap = 500
						goto *chat_unique_leold_done
					}
					if ( chatval == 9 ) {
						leoval = 20
						leoap = 500
						goto *chat_unique_leold_done
					}
					if ( chatval == 10 ) {
						leoval = 21
						leoap = 500
						goto *chat_unique_leold_done
					}
					if ( chatval == 11 ) {
						leoval = 16
						leoap = 400
						goto *chat_unique_leold_done
					}
					if ( chatval == 12 ) {
						leoval = 17
						leoap = 800
						goto *chat_unique_leold_done
					}
					goto *chat_end
				}
				if ( chatval == 3 ) {
					chatList 0, lang("近接攻撃頻度増加(消費AP30)", "Increased frequency of melee attacks (30AP)")
					chatList 1, lang("遠隔攻撃頻度増加(消費AP30)", "Increased frequency of ranged attacks (30AP)")
					chatList 9, lang("物理攻撃矢魔法化(消費AP200)", "Use dart spell instead of regular attack (200AP)")
					chatList 2, lang("適正距離＋1(消費AP10)", "Preferred distance +1 (10AP)")
					chatList 3, lang("適正距離−1(消費AP10)", "Preferred distance -1 (10AP)")
					chatList 4, lang("移動確率＋10％(消費AP5)", "Movement probability +10% (5AP)")
					chatList 5, lang("移動確率−10％(消費AP5)", "Movement probability -10% (5AP)")
					chatList 6, lang("魔法の使用封印/解除(消費AP20)", "Allow/disallow spell usage (20AP)")
					chatList 7, lang("技能の使用封印/解除(消費AP20)", "Allow/disallow ability usage (20AP)")
					chatList 8, lang("キャラ品質上昇(消費AP1000)", "Increase character quality (1000AP)")
					buff = lang("どう変更させるんだ？ちなみにこれらは、後で打ち消しても前に消費したAPは戻ってこない。気をつけろ。", "How do you want them to change? Careful now, AP spent on these will never get refunded even if you pick the same option again.")
					gosub *chat_select
					if ( chatval == 0 ) {
						leoval = 8
						leoap = 30
						goto *chat_unique_leold_done
					}
					if ( chatval == 1 ) {
						leoval = 9
						leoap = 30
						goto *chat_unique_leold_done
					}
					if ( chatval == 2 ) {
						leoval = 1000
						leoap = 10
						goto *chat_unique_leold_done
					}
					if ( chatval == 3 ) {
						leoval = 1001
						leoap = 10
						goto *chat_unique_leold_done
					}
					if ( chatval == 4 ) {
						leoval = 1002
						leoap = 5
						goto *chat_unique_leold_done
					}
					if ( chatval == 5 ) {
						leoval = 1003
						leoap = 5
						goto *chat_unique_leold_done
					}
					if ( chatval == 6 ) {
						leoval = 1004
						leoap = 20
						goto *chat_unique_leold_done
					}
					if ( chatval == 7 ) {
						leoval = 1005
						leoap = 20
						goto *chat_unique_leold_done
					}
					if ( chatval == 8 ) {
						leoval = 1006
						leoap = 1000
						goto *chat_unique_leold_done
					}
					if ( chatval == 9 ) {
						leoval = 10
						leoap = 200
						goto *chat_unique_leold_done
					}
					goto *chat_end
				}
			}
			goto *chat_end
		}
		goto *chat_end
	}
*chat_unique_SWEND1
	chatMore lang("…(あなたの言葉を聞いていない)", "(" + he(tc) + " ignores you...)"), strbye
	goto *chat_end

*chat_unique_leold_limb
	if ( gdata(GDATA_FLAG_DIALOG_LEOLD) == 0 ) {
		gdata(GDATA_FLAG_DIALOG_LEOLD) = 1
		chatMore lang("なに…装備部位を、か？ああ、できないことはないぞ！俺が以前研究していた生体ハードポイント理論を応用すれば充分可能だ…未完成の技術だがな。生体ハードポイントの研究は特定部位の支持力を強化し必要に応じて義手や義足、義頭のようなアタッチメントを介することで本来は装備できないものも装着できるようにすることを目的としていた。しかし、この地で用意できる機材では制御がどうしても不安定になってしまうために中止となってしまってな。本体の細胞から新しく生やした方がよほど確実でコストも抑えられるし拒絶反応もないというのも大きな理由だ。一応、アタッチメントを用いる場合は本体と神経接続するため、本来の肉体に装備したものと遜色なく操れるようになるが、逆に取り外しを困難としてしまっている。理論上は…おっと、すまん。このまま解説すると長くなってしまうな。", "A new equipment slot, is it? Ah, I just might be able to do it! Let's see. If I apply my previous biological hard point theory... Originally it was meant to strengthen a body part or add an additional part via an attachment similar to the power arm, but it had to be canceled for various reasons. We can use your own cells for the part, and then integrate it into your nervous system. Theoretically, we... Oops, sorry about that. I didn't mean to ramble on.")
	}
	chatList 0, lang("やめとく", "Let's not.")
	chatList 1, lang("自分が試す", "Try it on me.")
	chatList 2, lang("仲間が試す", "Try it on my companion.")
	buff = lang("それで…誰が試すんだ？", "So... Who is giving it a try?")
	gosub *chat_select
	c = -1
	if ( chatval == 1 ) {
		c = 0
	}
	if ( chatval == 2 ) {
		ikoru = 1000
		allyctrl = 3
		gosub *com_ally
		ikoru = 0
		if ( stat != (-1) ) {
			c = stat
		}
		listmax = 0
	}
	if ( c >= 0 ) {
		r1 = c
		tuikabui = 0
		repeat MAX_EQUIP_SLOT_TOTAL, CDATA_STARTING_EQUIP_SLOTS
			if ( cdata(cnt, r1) != 0 ) {
				tuikabui++
			}
		loop
		if ( tuikabui > 14 ) {
			txt lang("「これ以上は装着するところが無いな」", cnvtalk("There's nowhere else to attach any limbs."))
			goto *chat_end
		}
		tuikabui = 0
		cost1 = sorg(SKILL_ATTR_LIFE, r1) / 30 + 5
		if ( r1 < MAX_CHARA_FOLLOWER ) {
			if ( r1 != CHARA_PLAYER ) {
				cost1 /= 4
			}
		}
		cost2 = sorg(SKILL_ATTR_LIFE, r1) / 30 + 13
		if ( r1 < MAX_CHARA_FOLLOWER ) {
			if ( r1 != CHARA_PLAYER ) {
				cost2 /= 4
			}
		}
		cost3 = sorg(SKILL_ATTR_LIFE, r1) / 30 + 7
		if ( r1 < MAX_CHARA_FOLLOWER ) {
			if ( r1 != CHARA_PLAYER ) {
				cost3 /= 4
			}
		}
		cost4 = sorg(SKILL_ATTR_LIFE, r1) / 25 + 20
		if ( r1 < MAX_CHARA_FOLLOWER ) {
			if ( r1 != CHARA_PLAYER ) {
				cost4 /= 2
			}
		}
		cost5 = sorg(SKILL_ATTR_LIFE, r1) / 20 + 22
		if ( r1 < MAX_CHARA_FOLLOWER ) {
			if ( r1 != CHARA_PLAYER ) {
				cost5 /= 4
			}
		}
		cost6 = sorg(SKILL_ATTR_LIFE, r1) / 30 + 13
		if ( r1 < MAX_CHARA_FOLLOWER ) {
			if ( r1 != CHARA_PLAYER ) {
				cost6 /= 4
			}
		}
		cost7 = sorg(SKILL_ATTR_LIFE, r1) / 25 + 15
		if ( r1 < MAX_CHARA_FOLLOWER ) {
			if ( r1 != CHARA_PLAYER ) {
				cost7 /= 4
			}
		}
		cost8 = sorg(SKILL_ATTR_LIFE, r1) / 30 + 3
		if ( r1 < MAX_CHARA_FOLLOWER ) {
			if ( r1 != CHARA_PLAYER ) {
				cost8 /= 4
			}
		}
		cost9 = sorg(SKILL_ATTR_LIFE, r1) / 30 + 4
		if ( r1 < MAX_CHARA_FOLLOWER ) {
			if ( r1 != CHARA_PLAYER ) {
				cost9 /= 4
			}
		}
		chatList 0, lang("やっぱりやめる", "Cancel")
		chatList 1, lang("頭（減少生命力" + cost1 + ")", "Head(Life -" + cost1 + ")")
		chatList 2, lang("首（減少生命力" + cost2 + ")", "Neck(Life -" + cost2 + ")")
		chatList 3, lang("背中（減少生命力" + cost3 + ")", "Back(Life -" + cost3 + ")")
		chatList 4, lang("胴体（減少生命力" + cost4 + ")", "Chest(Life -" + cost4 + ")")
		chatList 5, lang("手（減少生命力" + cost5 + ")", "Hand(Life -" + cost5 + ")")
		chatList 6, lang("指（減少生命力" + cost6 + ")", "Finger(Life -" + cost6 + ")")
		chatList 7, lang("腕（減少生命力" + cost7 + ")", "Arm(Life -" + cost7 + ")")
		chatList 8, lang("腰（減少生命力" + cost8 + ")", "Waist(Life -" + cost8 + ")")
		chatList 9, lang("足（減少生命力" + cost9 + ")", "Leg(Life -" + cost9 + ")")
		buff = lang("装備可能にする箇所ごとに、肉体への負担が違ってくる…よく考えてくれ。選んだらすぐに取り掛かるぞ。", "The toll on your life will differ depending on the body part... so please choose wisely. We will start right away once you decide!")
		gosub *chat_select
		if ( chatval > 0 ) {
			gbui = chatval
			if ( gbui == 1 ) {
				gcost = cost1
				cost1 = 0
			}
			if ( gbui == 2 ) {
				gcost = cost2
				cost3 = 0
			}
			if ( gbui == 3 ) {
				gcost = cost3
				cost3 = 0
			}
			if ( gbui == 4 ) {
				gcost = cost4
				cost4 = 0
			}
			if ( gbui == 5 ) {
				gcost = cost5
				cost5 = 0
			}
			if ( gbui == 6 ) {
				gcost = cost6
				cost6 = 0
			}
			if ( gbui == 7 ) {
				gcost = cost7
				cost7 = 0
			}
			if ( gbui == 8 ) {
				gcost = cost8
				cost8 = 0
			}
			if ( gbui == 9 ) {
				gcost = cost9
				cost9 = 0
			}
			if ( sorg(SKILL_ATTR_LIFE, r1) <= gcost ) {
				txt lang("「こんな生命力では耐えられんぞ。中止だ中止！」", "\"" + he(r1) + " can't endure another procedure! Stop, stop!\"")
				goto *chat_end
			}
			redraw 0
			gosub *screen_draw
			gosub *screen_fade
			gsel 4
			pos 0, 0
			picload exedir + "graphic\\face1" + devfile + ".bmp", 1
			gsel 0
			skillmod SKILL_ATTR_LIFE, r1, (-1000) * gcost
			gcost = 0
			repeat MAX_EQUIP_SLOT_TOTAL, CDATA_STARTING_EQUIP_SLOTS
				if ( cdata(cnt, r1) != 0 ) {
					continue
				}
				if ( gbui == 1 ) {
					cdata(cnt, r1) = EQUIP_SLOT_HEAD * EXT_EQUIP_SLOTS
					if ( cm ) {
						break
					}
					else {
						txt lang(name(r1) + "は新たな" + bodyn(EQUIP_SLOT_HEAD) + "を獲得した！", name(r1) + " grow" + _s(r1) + " a new " + bodyn(EQUIP_SLOT_HEAD) + "!")
						break
					}
				}
				if ( gbui == 2 ) {
					cdata(cnt, r1) = EQUIP_SLOT_NECK * EXT_EQUIP_SLOTS
					if ( cm ) {
						break
					}
					else {
						txt lang(name(r1) + "は新たな" + bodyn(EQUIP_SLOT_NECK) + "を獲得した！", name(r1) + " grow" + _s(r1) + " a new " + bodyn(EQUIP_SLOT_NECK) + "!")
						break
					}
				}
				if ( gbui == 3 ) {
					cdata(cnt, r1) = EQUIP_SLOT_BACK * EXT_EQUIP_SLOTS
					if ( cm ) {
						break
					}
					else {
						txt lang(name(r1) + "は新たな" + bodyn(EQUIP_SLOT_BACK) + "を獲得した！", name(r1) + " grow" + _s(r1) + " a new " + bodyn(EQUIP_SLOT_BACK) + "!")
						break
					}
				}
				if ( gbui == 4 ) {
					cdata(cnt, r1) = EQUIP_SLOT_BODY * EXT_EQUIP_SLOTS
					if ( cm ) {
						break
					}
					else {
						txt lang(name(r1) + "は新たな" + bodyn(EQUIP_SLOT_BODY) + "を獲得した！", name(r1) + " grow" + _s(r1) + " a new " + bodyn(EQUIP_SLOT_BODY) + "!")
						break
					}
				}
				if ( gbui == 5 ) {
					cdata(cnt, r1) = EQUIP_SLOT_HAND * EXT_EQUIP_SLOTS
					if ( cm ) {
						break
					}
					else {
						txt lang(name(r1) + "は新たな" + bodyn(EQUIP_SLOT_HAND) + "を獲得した！", name(r1) + " grow" + _s(r1) + " a new " + bodyn(EQUIP_SLOT_HAND) + "!")
						break
					}
				}
				if ( gbui == 6 ) {
					cdata(cnt, r1) = EQUIP_SLOT_RING * EXT_EQUIP_SLOTS
					if ( cm ) {
						break
					}
					else {
						txt lang(name(r1) + "は新たな" + bodyn(EQUIP_SLOT_RING) + "を獲得した！", name(r1) + " grow" + _s(r1) + " a new " + bodyn(EQUIP_SLOT_RING) + "!")
						break
					}
				}
				if ( gbui == 7 ) {
					cdata(cnt, r1) = EQUIP_SLOT_ARM * EXT_EQUIP_SLOTS
					if ( cm ) {
						break
					}
					else {
						txt lang(name(r1) + "は新たな" + bodyn(EQUIP_SLOT_ARM) + "を獲得した！", name(r1) + " grow" + _s(r1) + " a new " + bodyn(EQUIP_SLOT_ARM) + "!")
						break
					}
				}
				if ( gbui == 8 ) {
					cdata(cnt, r1) = EQUIP_SLOT_WAIST * EXT_EQUIP_SLOTS
					if ( cm ) {
						break
					}
					else {
						txt lang(name(r1) + "は新たな" + bodyn(EQUIP_SLOT_WAIST) + "を獲得した！", name(r1) + " grow" + _s(r1) + " a new " + bodyn(EQUIP_SLOT_WAIST) + "!")
						break
					}
				}
				if ( gbui == 9 ) {
					cdata(cnt, r1) = EQUIP_SLOT_LEG * EXT_EQUIP_SLOTS
					if ( cm ) {
						break
					}
					else {
						txt lang(name(r1) + "は新たな" + bodyn(EQUIP_SLOT_LEG) + "を獲得した！", name(r1) + " grow" + _s(r1) + " a new " + bodyn(EQUIP_SLOT_LEG) + "!")
						break
					}
				}
				break
			loop
			gbui = 0
			gosub *calcBodyFix
			r1 = c
			gosub *charaRefresh
			cbitmod CHARA_BIT_ALTERED_LIMBS, c, 1
			snd SOUNDLIST_COMPLETE1
			txt lang("「完了だ。馴染み具合にも問題はないだろう」", cnvtalk("All done. There should be no chance of rejection."))
		}
	}
	goto *chat_end

*com_change_gamemode
	pos 0, 0
	gmode 0
	gcopy selbufb, 0, 0, windoww, windowh
	redraw 0
	cs = 0
	cs_bk = -1
	page = 0
	pagesize = 0
	gsel selbufh
	pos 0, 0
	picload exedir + "graphic\\bg37.bmp", 1
	pos 0, 0
	gzoom windoww, windowh - 88, selbufh, 0, 0, 640, 480
	gsel 0
	windowshadow = 1

*com_change_gamemode_loop
	redraw 0
	s = lang("モードの変更（一方通行）", "Balance Change(one-way) "), strhint3b
	display_window (windoww - 680) / 2 + inf_screenx, winposy(500, 1) + 20, 680, 400
	display_topic lang("モードの候補", "Mode"), wx + 28, wy + 30
	display_topic lang("各モードの説明", "Detail"), wx + 178, wy + 30
	s = lang("吸い込まれそうな瞳孔の奥に、別の宇宙が見える…。", "You can see another universe in the back of her eyes...")
	gosub *screen_drawMsg2
	listn(0, 0) = lang("Essential", "Essential")
	listn(0, 1) = lang("Loss", "Loss")
	listn(0, 2) = lang("Overdose", "Overdose")
	listn(0, 3) = lang("Natural", "Natural")
	listn(0, 4) = lang("Abnormal", "Abnormal")
	listn(0, 5) = lang("Purge", "Purge")
	listn(0, 6) = lang("キャンセル", "*Cancel*")
	font lang(cfg_font1, cfg_font2), 14 - en * 2, 0
	repeat 7
		key_list(cnt) = key_select(cnt)
		keyrange = cnt + 1
		pos wx + 38, wy + 66 + cnt * 19 - 2
		gcopy 3, cnt * 24 + 72, 30, 24, 18
		cs_list listn(0, cnt), wx + 64, wy + 66 + cnt * 19 - 1, 19
	loop
	font lang(cfg_font1, cfg_font2), 13 - en * 2, 0
	if ( listn(0, cs) == listn(0, 0) ) {
		s = lang("★Essentialモードはこのソフトの本質的なモードで、", "Essential is the primary mode of the game, which all other modes")
		pos wx + 165, wy + 66
		mes s
		s = lang("他のゲームモードは全てこれがベースになっています。", "are based on. Balances changes are constantly made based on this mode")
		pos wx + 165, wy + 81
		mes s
		s = lang("システム面の穴を埋め同格要素の差を縮める方向で調整が常に行われており、", "in order to bring various gameplay elements in line with each other.")
		pos wx + 165, wy + 96
		mes s
		s = lang("バランス変動が多い反面、ロールプレイとある程度の実益を両立したい人、", "Despite balance changes, this mode is good for those who wish to")
		pos wx + 165, wy + 111
		mes s
		s = lang("育成に力を入れたい人におすすめです。", "roleplay while having a challenge and a sense of achievement.")
		pos wx + 165, wy + 126
		mes s
		if ( gdata(GDATA_FLAG_GAME_MODE) == GAMEMODE_ESSENTIAL | gdata(GDATA_FLAG_GAME_MODE) == GAMEMODE_OVERDOSE | gdata(GDATA_FLAG_GAME_MODE) == GAMEMODE_PURGE ) {
			s = lang("【選択できません】", "Not selectable")
			pos wx + 200, wy + 156
			mes s
		}
	}
	if ( listn(0, cs) == listn(0, 1) ) {
		s = lang("★Lossモードはデータ喪失の危険性が非常に高いモードです。", "Loss mode is a mode in which chance of data loss is very high.")
		pos wx + 165, wy + 66
		mes s
		s = lang("一度死ねば、這い上がることはできずそこで終了。", "In loss mode, player death is permanent, and the save data")
		pos wx + 165, wy + 81
		mes s
		s = lang("そのセーブデータを読み込めなくなるのが特徴です。", "will no longer be available. Exiting without using the save and")
		pos wx + 165, wy + 96
		mes s
		s = lang("さらにEscキーかSでのセーブで終了しないとロード時にペナルティがあります。", "exit option from the ESC menu will result in a penalty at load time.")
		pos wx + 165, wy + 111
		mes s
		s = lang("ローグライク本格派の人以外にはおすすめできません。", "This mode is for those who want the authentic roguelike experience.")
		pos wx + 165, wy + 126
		mes s
		if ( gdata(GDATA_FLAG_GAME_MODE) == GAMEMODE_LOSS | gdata(GDATA_FLAG_GAME_MODE) == GAMEMODE_NATURAL | gdata(GDATA_FLAG_GAME_MODE) == GAMEMODE_ESSENTIAL | gdata(GDATA_FLAG_GAME_MODE) == GAMEMODE_OVERDOSE | gdata(GDATA_FLAG_GAME_MODE) == GAMEMODE_PURGE ) {
			s = lang("【選択できません】", "Not selectable")
			pos wx + 200, wy + 156
			mes s
		}
	}
	if ( listn(0, cs) == listn(0, 2) ) {
		s = lang("★Overdoseモードは基本部分はEssentialそのままに、得られる", "Overdose is almost the same as Essential, but all experience gains")
		pos wx + 165, wy + 66
		mes s
		s = lang("能力経験値、スキル経験値、魔法経験値が大幅増加する超低難度モードです。", "(skill, magic, level) can be increased. The default is 3x, and")
		pos wx + 165, wy + 81
		mes s
		s = lang("デフォルトの増加倍率は3倍ですが、とある場所で最大30倍にまで変更可能。", "it can be changed up to 30x at a certain place. In other words,")
		pos wx + 165, wy + 96
		mes s
		s = lang("じっくり楽しまずにさっさとクリアしたい、とにかく楽をしたいなど、", "it's easy mode. This mode is best for those who just want to take it easy")
		pos wx + 165, wy + 111
		mes s
		s = lang("飽きが早くなることを問題としない人にのみ、おすすめです。", "and clear the game, or those who quickly get bored. Be warned that after")
		pos wx + 165, wy + 126
		mes s
		s = lang("この成長速度に慣れると他では満足できなくなる恐れがあります。", "getting used to the experience rate in Overdose, it may be hard to go")
		pos wx + 165, wy + 141
		mes s
		s = lang("遺伝子を残すこと(アイテム引継ぎ2週目)ができず、スコアも0になります。", "back to another mode. Final score will be 0, and genes are disabled.")
		pos wx + 165, wy + 155
		mes s

		if ( gdata(GDATA_FLAG_GAME_MODE) == GAMEMODE_OVERDOSE | gdata(GDATA_FLAG_GAME_MODE) == GAMEMODE_PURGE ) {
			s = lang("【選択できません】", "Not selectable")
			pos wx + 200, wy + 185
			mes s
		}
	}
	if ( listn(0, cs) == listn(0, 3) ) {
		s = lang("★Naturalモードは基本部分はEssentialですが、", "Natural is identical to Essential mode, except that exiting without")
		pos wx + 165, wy + 66
		mes s
		s = lang("EscキーかSでのセーブで終了しないとロード時にペナルティがあります。", "using the save and exit option from the ESC menu will result in a")
		pos wx + 165, wy + 81
		mes s
		s = lang("それ以外の点ではEssentialと何も変わりません。", "penalty at load time. This is the only difference. Recommended for")
		pos wx + 165, wy + 96
		mes s
		s = lang("悪い結果が出てもやり直しをせずそのまま受け止められる人、", "those who want a moderate difficulty and who can accept the results")
		pos wx + 165, wy + 111
		mes s
		s = lang("適度な難しさを求める人におすすめです。", "of less than ideal outcomes.")
		pos wx + 165, wy + 126
		mes s
		if ( gdata(GDATA_FLAG_GAME_MODE) == GAMEMODE_NATURAL | gdata(GDATA_FLAG_GAME_MODE) == GAMEMODE_ESSENTIAL | gdata(GDATA_FLAG_GAME_MODE) == GAMEMODE_OVERDOSE | gdata(GDATA_FLAG_GAME_MODE) == GAMEMODE_PURGE ) {
			s = lang("【選択できません】", "Not selectable")
			pos wx + 200, wy + 156
			mes s
		}
	}
	if ( listn(0, cs) == listn(0, 4) ) {
		s = lang("★Abnormalモードは死亡時のペナルティの増加やセーブロードの制限、", "Abnormal mode increases the penalty for death and places a restriction")
		pos wx + 165, wy + 66
		mes s
		s = lang("その他さまざまな危険要素が増えている異常なモードです。地道な積み重ねや", "on loading. There are also various other additional dangerous elements")
		pos wx + 165, wy + 81
		mes s
		s = lang("慎重なプレイングを楽しめる人、もしくは貴重品を失うスリルやショックすら", "added in Abnormal mode. This mode is best for those strange people who")
		pos wx + 165, wy + 96
		mes s
		s = lang("楽しめる変態な人におすすめです。特にメリットはありませんが、", "enjoy careful, steady progress, and who like the thrill of the chance")
		pos wx + 165, wy + 111
		mes s
		s = lang("クリア時のスコアが20倍になります。", "of losing their valuables. There are no special bonuses, but the final")
		pos wx + 165, wy + 126
		mes s
		s = lang("EscキーかSでのセーブで終了しないとロード時にペナルティあり。", "score will be multiplied by 20. Exiting without using the save and exit")
		pos wx + 165, wy + 141
		mes s
		if ( en ) {
			s = "option from the ESC menu will result in a penalty at load time."
			pos wx + 165, wy + 156
			mes s
		}
		if ( gdata(GDATA_FLAG_GAME_MODE) == GAMEMODE_ABNORMAL | gdata(GDATA_FLAG_GAME_MODE) == GAMEMODE_LOSS | gdata(GDATA_FLAG_GAME_MODE) == GAMEMODE_NATURAL | gdata(GDATA_FLAG_GAME_MODE) == GAMEMODE_ESSENTIAL | gdata(GDATA_FLAG_GAME_MODE) == GAMEMODE_OVERDOSE | gdata(GDATA_FLAG_GAME_MODE) == GAMEMODE_PURGE ) {
			s = lang("【選択できません】", "Not selectable")
			pos wx + 200, wy + 171
			mes s
		}
	}
	if ( listn(0, cs) == listn(0, 5) ) {
		s = lang("★Purgeモードはバランス調整から切り離されたゲームモードです。", "Purge is an unbalanced game mode.")
		pos wx + 165, wy + 66
		mes s
		s = lang("遺伝子を残すこと(アイテム引継ぎ2週目)ができず、スコアも0になります。", "- Can not make genes and your score is always 0.")
		pos wx + 165, wy + 81
		mes s
		s = lang("「都合のいい結果が出るまでひたすらやり直す作業こそが楽しい」", "- Reloading with F2 for save-scumming. Auto-save disabled.")
		pos wx + 165, wy + 96
		mes s
		s = lang("「ゲームとは放置で自動カンストするくらい楽なほうが没入できるもの」", "- AFK leveling as in idle games.")
		pos wx + 165, wy + 111
		mes s
		s = lang("「バランスブレイカーによって他の要素がゴミ同然になっていても、", "- Insta-kill things with purge-mode exclusive actions.")
		pos wx + 165, wy + 126
		mes s
		s = lang("オフラインゲームならそのままにしておくべき」", "- Extra bonus points and starting gold.")
		pos wx + 165, wy + 141
		mes s
		s = lang("「むしろバランスブレイカーがあって使うかどうかは選ばせるのが理想」", "- Rare loot trigger always on.")
		pos wx + 165, wy + 156
		mes s
		s = lang("「強敵との死闘なんて楽しくない。ストレスフリーに蹴散らす戦闘が至高」", "- Potential and experience changes.")
		pos wx + 165, wy + 171
		mes s
		s = lang("といった価値観の人は、絶対にこのモード以外を選ばないでください。", "- NPCs take 999999 damage when vomiting with negative satiety.")
		pos wx + 165, wy + 186
		mes s
		if ( gdata(GDATA_FLAG_GAME_MODE) == GAMEMODE_PURGE ) {
			s = lang("【選択できません】", "Not selectable")
			pos wx + 200, wy + 216
			mes s
		}
	}
	if ( listn(0, cs) == listn(0, 6) ) {
		s = lang("自分が自分でいられなくなるような気がして、ぞくりと震えた。", "You trembled with feeling you could not stay by yourself.")
		pos wx + 165, wy + 66
		mes s
		s = lang("そっと目をそらす…。", "You distract your eyes...")
		pos wx + 165, wy + 81
		mes s
	}
	cs_bk = cs
	redraw 1
	await cfg_wait1
	key_check
	cursor_check
	if ( key == key_select(0) ) {
		if ( gdata(GDATA_FLAG_GAME_MODE) == GAMEMODE_ESSENTIAL | gdata(GDATA_FLAG_GAME_MODE) == GAMEMODE_OVERDOSE | gdata(GDATA_FLAG_GAME_MODE) == GAMEMODE_PURGE ) {
			snd SOUNDLIST_FAIL1
		}
		else {
			gdata(GDATA_FLAG_GAME_MODE) = GAMEMODE_ESSENTIAL
			goto *com_change_gamemode_finish
		}
	}
	if ( key == key_select(1) ) {
		if ( gdata(GDATA_FLAG_GAME_MODE) == GAMEMODE_LOSS | gdata(GDATA_FLAG_GAME_MODE) == GAMEMODE_NATURAL | gdata(GDATA_FLAG_GAME_MODE) == GAMEMODE_ESSENTIAL | gdata(GDATA_FLAG_GAME_MODE) == GAMEMODE_OVERDOSE | gdata(GDATA_FLAG_GAME_MODE) == GAMEMODE_PURGE ) {
			snd SOUNDLIST_FAIL1
		}
		else {
			gdata(GDATA_FLAG_GAME_MODE) = GAMEMODE_LOSS
			goto *com_change_gamemode_finish
		}
	}
	if ( key == key_select(2) ) {
		if ( gdata(GDATA_FLAG_GAME_MODE) == GAMEMODE_OVERDOSE | gdata(GDATA_FLAG_GAME_MODE) == GAMEMODE_PURGE ) {
			snd SOUNDLIST_FAIL1
		}
		else {
			gdata(GDATA_FLAG_GAME_MODE) = GAMEMODE_OVERDOSE
			goto *com_change_gamemode_finish
		}
	}
	if ( key == key_select(3) ) {
		if ( gdata(GDATA_FLAG_GAME_MODE) == GAMEMODE_NATURAL | gdata(GDATA_FLAG_GAME_MODE) == GAMEMODE_ESSENTIAL | gdata(GDATA_FLAG_GAME_MODE) == GAMEMODE_OVERDOSE | gdata(GDATA_FLAG_GAME_MODE) == GAMEMODE_PURGE ) {
			snd SOUNDLIST_FAIL1
		}
		else {
			gdata(GDATA_FLAG_GAME_MODE) = GAMEMODE_NATURAL
			goto *com_change_gamemode_finish
		}
	}
	if ( key == key_select(4) ) {
		if ( gdata(GDATA_FLAG_GAME_MODE) == GAMEMODE_ABNORMAL | gdata(GDATA_FLAG_GAME_MODE) == GAMEMODE_LOSS | gdata(GDATA_FLAG_GAME_MODE) == GAMEMODE_NATURAL | gdata(GDATA_FLAG_GAME_MODE) == GAMEMODE_ESSENTIAL | gdata(GDATA_FLAG_GAME_MODE) == GAMEMODE_OVERDOSE | gdata(GDATA_FLAG_GAME_MODE) == GAMEMODE_PURGE ) {
			snd SOUNDLIST_FAIL1
		}
		else {
			gdata(GDATA_FLAG_GAME_MODE) = GAMEMODE_ABNORMAL
			goto *com_change_gamemode_finish
		}
	}
	if ( key == key_select(5) ) {
		if ( gdata(GDATA_FLAG_GAME_MODE) == GAMEMODE_PURGE ) {
			snd SOUNDLIST_FAIL1
		}
		else {
			gdata(GDATA_FLAG_GAME_MODE) = GAMEMODE_PURGE
			goto *com_change_gamemode_finish
		}
	}
	if ( key == key_select(6) ) {
		return
	}
	if ( key == key_cancel ) {
		return
	}
	goto *com_change_gamemode_loop

*com_change_gamemode_finish
	snd SOUNDLIST_OK1
	redraw 0
	gosub *screen_draw
	gosub *screen_fade
	gsel 4
	pos 0, 0
	picload exedir + "graphic\\face2" + devfile + ".bmp", 1
	gsel 0
	gmode 0
	pos 0, 0
	gcopy selbufb, 0, 0, windoww, windowh
	gmode 2
	snd SOUNDLIST_LOAD
	chatMore lang("あはははははっ！本当に選んでしまったのですね…♪ようこそ、新しい宇宙へ。", "Hahahaha! You really chose it...! Welcome to the new universe!!")
	if ( gdata(GDATA_FLAG_GAME_MODE) >= GAMEMODE_ESSENTIAL & gdata(GDATA_FLAG_GAME_MODE) <= GAMEMODE_NATURAL ) {
		chatMore lang("予言してあげます。一度楽することを選んだあなたは…これでもすぐに満足できなくなるのです。うふふ、ここからさらに堕ちていくのですよ？その時が楽しみですね…。", "I will predict. You chose to go easy... you will not be satisfied with this at once. You will fall further from here. I am looking forward to that time...")
	}
	if ( gdata(GDATA_FLAG_GAME_MODE) == GAMEMODE_PURGE ) {
		chatMore lang("ふふっ♪堕ちるところまで堕ちましたね…。でもいつか、きっとこれでも満足できなくなるのです。それまでの残り少ない時間…存分に快楽に身を委ねるといいのです。", "You fell to the limit...! Someday, you certainly will not be satisfied with this. The remaining time until then... entrust yourself to pleasure.")
		txt_questitem
		flt
		itemcreate -1, ITEM_ID_GOLD_PIECE, cdata(CDATA_X, CHARA_PLAYER), cdata(CDATA_Y, CHARA_PLAYER), 1000000
		dbg_noautosave = 1
		cdata(CDATA_SKILLPOINT, CHARA_PLAYER) += 10000
		if ( spact(SKILL_SPACT_WIN - STARTING_SKILL_SPACT) == 0 ) {
			spact(SKILL_SPACT_WIN - STARTING_SKILL_SPACT) = 1
			txtmore
			txtef COLOR_YELLOW
			txt lang("あなたは「" + skillname(SKILL_SPACT_WIN) + "」の能力を得た。", "You have learned a new ability, " + skillname(SKILL_SPACT_WIN) + ".")
			if ( spact(SKILL_SPACT_PURGE - STARTING_SKILL_SPACT) == 0 ) {
				spact(SKILL_SPACT_PURGE - STARTING_SKILL_SPACT) = 1
				txtmore
				txtef COLOR_YELLOW
				txt lang("あなたは「" + skillname(SKILL_SPACT_PURGE) + "」の能力を得た。", "You have learned a new ability, " + skillname(SKILL_SPACT_PURGE) + ".")
			}
		}
	}
	return

*chat_unique_leold_maxspeed
	snd SOUNDLIST_FAIL1
	chatMore lang("すまん。今の俺ではこれ以上鍛えることができないようだ。", "Sorry, but I don't think I can train you any further right now.")
	goto *chat_unique

*chat_unique_leold_lack_ap
	snd SOUNDLIST_FAIL1
	chatMore lang("…こりゃもっとAP貯めないと無理だな。APを貯めるには、レベルに関係なく初期ステータス(INIT)で数段上回る敵を倒す必要がある。", "...I can't do that unless you save up more AP. You'll need to defeat enemies with high INIT, regardless of their level, to gain AP.")
	goto *chat_unique

*chat_unique_leold_done
	if ( leoval != (-2) ) {
		allyctrl = 3
		leoleo = 1
		gosub *com_ally
	}
	if ( leoval == (-2) ) {
		allyctrl = 3
		leoleo = 2
		gosub *com_ally
	}
	leoleo = 0
	if ( stat != (-1) ) {
		c = stat
		snd SOUNDLIST_OK1
		txtnew
		if ( leoval == 0 ) {
			leoap = sorg(SKILL_ATTR_SPD, c)
		}
		if ( leoval == (-2) ) {
			leoap = sorg(SKILL_ATTR_LIFE, c) * 2 + 300
			if ( cbit(CHARA_BIT_ARMOUR, c) ) {
				leoap += 300
			}
			if ( cbit(CHARA_BIT_RES_ELEMENTAL, c) ) {
				leoap += 500
			}
			if ( cbit(CHARA_BIT_METAL, c) ) {
				leoap += 800
			}
		}
		if ( leoval == (-1) ) {
			if ( cdata(CDATA_AP_CURRENT, c) < leoap ) {
				goto *chat_unique_leold_lack_ap
			}
			snd SOUNDLIST_PRAY1
			cdata(CDATA_AP_CURRENT, c) -= leoap
			cdata(CDATA_SKILLPOINT, c) += 100
			chatMore lang("そらよ！", "All done!")
			leoap = 0
			goto *chat_unique
		}
		if ( leoval == (-2) ) {
			if ( cdata(CDATA_AP_CURRENT, c) < leoap ) {
				goto *chat_unique_leold_lack_ap
			}
			if ( sorg(SKILL_ATTR_LIFE, c) > 300 ) {
				goto *chat_unique_leold_maxspeed
			}
			snd SOUNDLIST_PRAY1
			cdata(CDATA_AP_CURRENT, c) -= leoap
			skillmod SKILL_ATTR_LIFE, c, 10000
			chatMore lang("そらよ！", "All done!")
			leoap = 0
			goto *chat_unique
		}
		if ( leoval == 0 ) {
			if ( cdata(CDATA_AP_CURRENT, c) < leoap ) {
				goto *chat_unique_leold_lack_ap
			}
			if ( sorg(SKILL_ATTR_SPD, c) > 500 & gdata(GDATA_FLAG_MAIN) < 350 ) {
				goto *chat_unique_leold_maxspeed
			}
			if ( sorg(SKILL_ATTR_SPD, c) > 800 & gdata(GDATA_FLAG_MAIN) >= 350 ) {
				goto *chat_unique_leold_maxspeed
			}
			snd SOUNDLIST_PRAY1
			cdata(CDATA_AP_CURRENT, c) -= leoap
			skillmod SKILL_ATTR_SPD, c, 30000
			chatMore lang("そらよ！", "All done!")
			leoap = 0
			goto *chat_unique
		}
		if ( leoval >= 1 & leoval < 100 ) {
			if ( leoval == 1 ) {
				bitp = CHARA_BIT_AWAKE_INSULT
			}
			if ( leoval == 2 ) {
				bitp = CHARA_BIT_AWAKE_CRYSTAL_SPEAR
			}
			if ( leoval == 3 ) {
				bitp = CHARA_BIT_AWAKE_TACTICAL_HEAL
			}
			if ( leoval == 4 ) {
				bitp = CHARA_BIT_AWAKE_DIMENSIONAL_MOVE
			}
			if ( leoval == 5 ) {
				bitp = CHARA_BIT_AWAKE_TACTICAL_ATTACK
			}
			if ( leoval == 6 ) {
				bitp = CHARA_BIT_AWAKE_TACTICAL_MARTIAL_ARTS
			}
			if ( leoval == 7 ) {
				bitp = CHARA_BIT_AWAKE_CHARGE_ATTACK
			}
			if ( leoval == 8 ) {
				bitp = CHARA_BIT_AWAKE_PROXIMITY_ATTACK
			}
			if ( leoval == 9 ) {
				bitp = CHARA_BIT_AWAKE_RANGED_ATTACK
			}
			if ( leoval == 10 ) {
				bitp = CHARA_BIT_AWAKE_MAGIC_ATTACK
			}
			if ( leoval == 14 ) {
				bitp = CHARA_BIT_AWAKE_PROVOKE
			}
			if ( leoval == 15 ) {
				bitp = CHARA_BIT_AWAKE_TACTICAL_CURSE
			}
			if ( leoval == 16 ) {
				bitp = CHARA_BIT_AWAKE_VARIABLE_BREATH
			}
			if ( leoval == 17 ) {
				bitp = CHARA_BIT_AWAKE_VARIABLE_STORM
			}
			if ( leoval == 20 ) {
				bitp = CHARA_BIT_AWAKE_ZERO_SHOOT
			}
			if ( leoval == 21 ) {
				bitp = CHARA_BIT_AWAKE_STRUCK_OUT
			}
			if ( cbit(bitp, c) ) {
				cbitmod bitp, c, 0
				cdata(CDATA_AP_CURRENT, c) += leoap
				txt lang(cdatan(CDATAN_NAME, c) + "は力の使い方を忘れた。", cdatan(CDATAN_NAME, c) + " forgot how to use that power.")
			}
			else {
				if ( cdata(CDATA_AP_CURRENT, c) < leoap ) {
					goto *chat_unique_leold_lack_ap
				}
				chatMore lang("そらよ！同じものをもう一度覚えさせようとすると逆に忘れてしまうから気をつけろよ。忘れる場合はAPを消費しないし、覚えるのに使ったAPも戻ってくるぞ。", "All done! Trying to learn the same thing again will make you forget it. Forgetting it won't cost AP, and will also refund the AP spent on it in the first place.")
				snd SOUNDLIST_PRAY1
				cdata(CDATA_AP_CURRENT, c) -= leoap
				cbitmod bitp, c, 1
				txt lang(cdatan(CDATAN_NAME, c) + "は新たな力に目覚めた。", cdatan(CDATAN_NAME, c) + " awakened to a new power.")
			}
			leoap = 0
			goto *chat_unique
		}
		if ( leoval >= 1000 & leoval < 2000 ) {
			if ( cdata(CDATA_AP_CURRENT, c) < leoap ) {
				goto *chat_unique_leold_lack_ap
			}
			snd SOUNDLIST_PRAY1
			cdata(CDATA_AP_CURRENT, c) -= leoap
			if ( leoval == 1000 ) {
				cdata(CDATA_AI_DISTANCE, c) += 1
				if ( cdata(CDATA_AI_DISTANCE, c) >= 10 ) {
					cdata(CDATA_AI_DISTANCE, c) = 10
				}
				txt lang(cdatan(CDATAN_NAME, c) + "の適正距離が" + cdata(CDATA_AI_DISTANCE, c) + "になった。", cdatan(CDATAN_NAME, c) + "'s preferred distance became " + cdata(CDATA_AI_DISTANCE, c) + ".")
			}
			if ( leoval == 1001 ) {
				cdata(CDATA_AI_DISTANCE, c) -= 1
				if ( cdata(CDATA_AI_DISTANCE, c) <= 1 ) {
					cdata(CDATA_AI_DISTANCE, c) = 1
				}
				txt lang(cdatan(CDATAN_NAME, c) + "の適正距離が" + cdata(CDATA_AI_DISTANCE, c) + "になった。", cdatan(CDATAN_NAME, c) + "'s preferred distance became " + cdata(CDATA_AI_DISTANCE, c) + ".")
			}
			if ( leoval == 1002 ) {
				cdata(CDATA_AI_MOVE_FREQ, c) += 10
				if ( cdata(CDATA_AI_MOVE_FREQ, c) >= 100 ) {
					cdata(CDATA_AI_MOVE_FREQ, c) = 100
				}
				txt lang(cdatan(CDATAN_NAME, c) + "の移動確率が" + cdata(CDATA_AI_MOVE_FREQ, c) + "になった。", cdatan(CDATAN_NAME, c) + "'s movement probability became " + cdata(CDATA_AI_MOVE_FREQ, c) + ".")
			}
			if ( leoval == 1003 ) {
				cdata(CDATA_AI_MOVE_FREQ, c) -= 10
				if ( cdata(CDATA_AI_MOVE_FREQ, c) <= 0 ) {
					cdata(CDATA_AI_MOVE_FREQ, c) = 0
				}
				txt lang(cdatan(CDATAN_NAME, c) + "の移動確率が" + cdata(CDATA_AI_MOVE_FREQ, c) + "になった。", cdatan(CDATAN_NAME, c) + "'s movement probability became " + cdata(CDATA_AI_MOVE_FREQ, c) + ".")
			}
			if ( leoval == 1004 ) {
				if ( cdata(CDATA_SEALED_MAGIC, c) == 1 ) {
					cdata(CDATA_SEALED_MAGIC, c) = 0
					txt lang(cdatan(CDATAN_NAME, c) + "は魔法封印を解除した。", cdatan(CDATAN_NAME, c) + " is now allowed to use spells.")
				}
				else {
					cdata(CDATA_SEALED_MAGIC, c) = 1
					txt lang(cdatan(CDATAN_NAME, c) + "は魔法を封印した。", cdatan(CDATAN_NAME, c) + " is now forbidden from using spells.")
				}
			}
			if ( leoval == 1005 ) {
				if ( cdata(CDATA_SEALED_ABILITY, c) == 1 ) {
					cdata(CDATA_SEALED_ABILITY, c) = 0
					txt lang(cdatan(CDATAN_NAME, c) + "は技能封印を解除した。", cdatan(CDATAN_NAME, c) + " is now allowed to use special abilities.")
				}
				else {
					cdata(CDATA_SEALED_ABILITY, c) = 1
					txt lang(cdatan(CDATAN_NAME, c) + "は技能を封印した。", cdatan(CDATAN_NAME, c) + " is now forbidden from using special actions.")
				}
			}
			if ( leoval == 1006 ) {
				if ( cdata(CDATA_QUALITY, c) >= FIX_QUALITY_MIRACLE ) {
					cdata(CDATA_AP_CURRENT, c) += leoap
					txt_nothinghappens
				}
				if ( cdata(CDATA_QUALITY, c) < FIX_QUALITY_MIRACLE ) {
					cdata(CDATA_QUALITY, c) = FIX_QUALITY_MIRACLE
					txt lang(cdatan(CDATAN_NAME, c) + "はランクアップした！", cdatan(CDATAN_NAME, c) + "'s character quality was increased!")
					cdatan(CDATAN_NAME, c) = lang("《", "{") + cdatan(CDATAN_NAME, c) + lang("》", "}")
				}
			}
		}
		if ( leoval > 100 & leoval < 1000 ) {
			if ( leoval == 101 ) {
				bitp = CHARA_BIT_AWAKE_DIM_ATTACKER
			}
			if ( leoval == 102 ) {
				bitp = CHARA_BIT_AWAKE_NEAR_DEATH_EVASION
			}
			if ( leoval == 103 ) {
				bitp = CHARA_BIT_AWAKE_NEAR_DEATH_DAMAGE
			}
			if ( leoval == 104 ) {
				bitp = CHARA_BIT_AWAKE_MP_BARRIER
			}
			if ( cbit(bitp, c) ) {
				chatMore lang("そのフィートは既に身についているみたいだな。APに還元してやろう。", "Looks like you already have that feat. I'll return the AP to you.")
				cbitmod bitp, c, 0
				snd SOUNDLIST_PRAY1
				cdata(CDATA_AP_CURRENT, c) += leoap
			}
			else {
				aphantei = 0
				if ( cbit(CHARA_BIT_AWAKE_DIM_ATTACKER, c) ) {
					aphantei += 1
				}
				if ( cbit(CHARA_BIT_AWAKE_NEAR_DEATH_EVASION, c) ) {
					aphantei += 1
				}
				if ( cbit(CHARA_BIT_AWAKE_NEAR_DEATH_DAMAGE, c) ) {
					aphantei += 1
				}
				if ( cbit(CHARA_BIT_AWAKE_MP_BARRIER, c) ) {
					aphantei += 1
				}
				if ( aphantei >= 2 ) {
					chatMore lang("…これ以上のフィートの獲得は不可能のようだ。既に身についているフィートを選択して、一度APに還元する必要があるな。", "Looks like there's no more room for new feats. You'll have to select an existing one to turn it back into AP to make room for another.")
				}
				else {
					if ( cdata(CDATA_AP_CURRENT, c) < leoap ) {
						goto *chat_unique_leold_lack_ap
					}
					snd SOUNDLIST_PRAY1
					cdata(CDATA_AP_CURRENT, c) -= leoap
					cbitmod bitp, c, 1
					chatMore lang("そらよ！あとでフィートを確認してみな。", "All done! It should be on your list of feats now.")
					txt lang(cdatan(CDATAN_NAME, c) + "は新たなフィートを取得した。", cdatan(CDATAN_NAME, c) + " acquired a new feat.")
				}
			}
		}
		aphantei = 0
	}
	leoap = 0
	goto *chat_unique

*chat_unique_leold_awaken
	c = CHARA_PLAYER
	hpcost = sorg(SKILL_ATTR_LIFE, c) * 2 + 300
	if ( cbit(CHARA_BIT_ARMOUR, c) ) {
		hpcost += 300
	}
	if ( cbit(CHARA_BIT_RES_ELEMENTAL, c) ) {
		hpcost += 500
	}
	if ( cbit(CHARA_BIT_METAL, c) ) {
		hpcost += 800
	}
	chatList 0, lang("速度20上昇(消費AP" + sorg(SKILL_ATTR_SPD, CHARA_PLAYER) + ")", "Increase speed by 20. (" + sorg(SKILL_ATTR_SPD, CHARA_PLAYER) + "AP)")
	chatList 4, lang("生命力10上昇(消費AP" + hpcost + ")", "Increase life by 10. (cost " + hpcost + "AP)")
	chatList 1, lang("フィート取得", "Acquire feats.")
	chatList 2, lang("技能の会得", "Learn special abilities.")
	chatList 3, lang("スキルボーナス100獲得(消費AP1500)", "Gain 100 bonus points. (1500AP)")
	buff = lang("覚醒に必要なポイント…APは残り" + cdata(CDATA_AP_CURRENT, c) + "だ。どう使うんだ？", "You have... " + cdata(CDATA_AP_CURRENT, c) + " Awakening Points left. How do you want to use them?")
	gosub *chat_select
	if ( chatval == 3 ) {
		if ( cdata(CDATA_AP_CURRENT, c) < 1500 ) {
			goto *chat_unique_leold_lack_ap
		}
		snd SOUNDLIST_PRAY1
		cdata(CDATA_AP_CURRENT, c) -= 1500
		cdata(CDATA_SKILLPOINT, c) += 100
		chatMore lang("そらよ！", "All done!")
		goto *chat_unique
	}
	if ( chatval == 4 ) {
		hpcost = sorg(SKILL_ATTR_LIFE, c) * 2 + 300
		if ( cbit(CHARA_BIT_ARMOUR, c) ) {
			hpcost += 300
		}
		if ( cbit(CHARA_BIT_RES_ELEMENTAL, c) ) {
			hpcost += 500
		}
		if ( cbit(CHARA_BIT_METAL, c) ) {
			hpcost += 800
		}
		leoap = hpcost
		if ( sorg(SKILL_ATTR_LIFE, c) >= 300 ) {
			goto *chat_unique_leold_maxspeed
		}
		if ( cdata(CDATA_AP_CURRENT, c) < leoap ) {
			goto *chat_unique_leold_lack_ap
		}
		snd SOUNDLIST_PRAY1
		cdata(CDATA_AP_CURRENT, c) -= leoap
		skillmod SKILL_ATTR_LIFE, c, 10000
		chatMore lang("そらよ！", "All done!")
		goto *chat_unique
	}
	if ( chatval == 0 ) {
		leoap = sorg(SKILL_ATTR_SPD, c)
		if ( sorg(SKILL_ATTR_SPD, c) > 500 & gdata(GDATA_FLAG_MAIN) < 350 ) {
			goto *chat_unique_leold_maxspeed
		}
		if ( sorg(SKILL_ATTR_SPD, c) > 800 & gdata(GDATA_FLAG_MAIN) >= 350 ) {
			goto *chat_unique_leold_maxspeed
		}
		if ( cdata(CDATA_AP_CURRENT, c) < leoap ) {
			goto *chat_unique_leold_lack_ap
		}
		snd SOUNDLIST_PRAY1
		cdata(CDATA_AP_CURRENT, c) -= leoap
		skillmod SKILL_ATTR_SPD, c, 20000
		chatMore lang("そらよ！", "All done!")
		goto *chat_unique
	}
	if ( chatval == 1 ) {
		chatList 0, lang("魅惑(消費AP1500)[直接攻撃してきた敵が朦朧]", "Charm (1500AP) [Dim enemies attacking at close range]")
		chatList 2, lang("底力(消費AP1500)[HP減るほど最終与ダメージ上昇]", "Brave (1500AP) [Increase damage dealt as HP decreases]")
		chatList 1, lang("意地(消費AP1800)[HP減るほど回避・軽減率上昇]", "Obstinate (1800AP) [Increase evasion, damage mitigation as HP decreases]")
		chatList 3, lang("障壁(消費AP2000)[ダメージ分MP消費し攻撃無効化]", "Barrier (2000AP) [Negate attacks with equal amount of MP]")
		buff = lang("どのフィートを獲得するんだ？既に獲得している物を選ぶと外してAPに戻すことができるぞ。", "Which feat would you like? If it's something you already know, the AP will be returned to you.")
		gosub *chat_select
		leoap = 0
		if ( chatval == 0 ) {
			leoap = 1500
			bitp = CHARA_BIT_AWAKE_DIM_ATTACKER
		}
		if ( chatval == 1 ) {
			leoap = 1800
			bitp = CHARA_BIT_AWAKE_NEAR_DEATH_EVASION
		}
		if ( chatval == 2 ) {
			leoap = 1500
			bitp = CHARA_BIT_AWAKE_NEAR_DEATH_DAMAGE
		}
		if ( chatval == 3 ) {
			leoap = 2000
			bitp = CHARA_BIT_AWAKE_MP_BARRIER
		}
		if ( leoap == 0 ) {
			goto *chat_end
		}
		if ( cbit(bitp, c) ) {
			chatMore lang("そのフィートは既に身についているみたいだな。APに還元してやろう。", "Looks like you already have that feat. I'll return the AP to you.")
			cbitmod bitp, c, 0
			snd SOUNDLIST_PRAY1
			cdata(CDATA_AP_CURRENT, c) += leoap
		}
		else {
			aphantei = 0
			if ( cbit(CHARA_BIT_AWAKE_DIM_ATTACKER, c) ) {
				aphantei += 1
			}
			if ( cbit(CHARA_BIT_AWAKE_NEAR_DEATH_EVASION, c) ) {
				aphantei += 1
			}
			if ( cbit(CHARA_BIT_AWAKE_NEAR_DEATH_DAMAGE, c) ) {
				aphantei += 1
			}
			if ( cbit(CHARA_BIT_AWAKE_MP_BARRIER, c) ) {
				aphantei += 1
			}
			if ( aphantei >= 2 ) {
				chatMore lang("…これ以上のフィートの獲得は不可能のようだ。既に身についているフィートを選択して、一度APに還元する必要があるな。", "Looks like there's no more room for new feats. You'll have to select an existing one to turn it back into AP to make room for another.")
			}
			else {
				if ( cdata(CDATA_AP_CURRENT, c) < leoap ) {
					goto *chat_unique_leold_lack_ap
				}
				snd SOUNDLIST_PRAY1
				cdata(CDATA_AP_CURRENT, c) -= leoap
				cbitmod bitp, c, 1
				chatMore lang("そらよ！あとでフィートを確認してみな。", "All done! It should be on your list of feats now.")
				txt lang(cdatan(CDATAN_NAME, c) + "は新しい力を手に入れた。", cdatan(CDATAN_NAME, c) + " obtained a new power.")
			}
		}
		aphantei = 0
		goto *chat_unique
	}
	if ( chatval == 2 ) {
		chatList 0, lang("やめる", "Cancel")
		if ( gdata(GDATA_FLAG_AP_FEAT_CONTINUOUS_ATTACK) == 0 ) {
			chatList 1, lang("高速ラッシュ(消費AP100)[弱威力連続攻撃]", "Continuous Attacks (100AP) [Weak series of attacks]")
		}
		if ( gdata(GDATA_FLAG_AP_FEAT_PROVOKE) == 0 ) {
			chatList 2, lang("挑発(消費AP300)[自分をターゲットにさせる]", "Provoke (AP300) [Make enemies target self]")
		}
		if ( gdata(GDATA_FLAG_AP_FEAT_METAL_GUARD) == 0 ) {
			chatList 3, lang("メタルコート(消費AP500)[一度だけ受けるダメージ1/10]", "Metal Guard (500AP) [Next attack received deals 1/10 damage]")
		}
		if ( gdata(GDATA_FLAG_AP_FEAT_SYNCHRO_HEARTS) == 0 ) {
			chatList 4, lang("魂のシンクロ(消費AP800)[瀕死時、好感度依存仲間強化/回復]", "Synchro Hearts (800AP) [Impress-dependent ally heal/buff when low on health]")
		}
		if ( gdata(GDATA_FLAG_AP_FEAT_CHARGE) == 0 ) {
			chatList 5, lang("チャージ(消費AP1000)[一度だけ物理/魔法/放射の攻撃強化]", "Charge (AP1000) [Buff next attack/spell/breath]")
		}
		buff = lang("どの技能を会得するんだ？会得した物はAPに戻すことができないからよく考えるんだぞ。", "Which special action do you want to learn? Pick carefully, because once learned the AP cannot be refunded.")
		gosub *chat_select
		leoap = 0
		if ( chatval == 0 ) {
			goto *chat_unique
		}
		if ( chatval == 1 ) {
			leoap = 100
		}
		if ( chatval == 2 ) {
			leoap = 300
		}
		if ( chatval == 3 ) {
			leoap = 500
		}
		if ( chatval == 4 ) {
			leoap = 800
		}
		if ( chatval == 5 ) {
			leoap = 1000
		}
		if ( leoap == 0 ) {
			goto *chat_end
		}
		if ( cdata(CDATA_AP_CURRENT, c) < leoap ) {
			goto *chat_unique_leold_lack_ap
		}
		snd SOUNDLIST_PRAY1
		cdata(CDATA_AP_CURRENT, c) -= leoap
		chatMore lang("そらよ！実際に使ってちゃんと効果を確認しておくんだぞ。", "All done! You'll have to try it out for yourself to see how it works.")
		if ( leoap == 100 ) {
			gdata(GDATA_FLAG_AP_FEAT_CONTINUOUS_ATTACK) = 10
			if ( spact(SKILL_SPACT_CONTINUOUS_ATTACKS - STARTING_SKILL_SPACT) == 0 ) {
				spact(SKILL_SPACT_CONTINUOUS_ATTACKS - STARTING_SKILL_SPACT) = 1
				txtmore
				txtef COLOR_YELLOW
				txt lang("あなたは「" + skillname(SKILL_SPACT_CONTINUOUS_ATTACKS) + "」の能力を得た。", "You have learned a new ability, " + skillname(SKILL_SPACT_CONTINUOUS_ATTACKS) + ".")
			}
		}
		if ( leoap == 300 ) {
			gdata(GDATA_FLAG_AP_FEAT_PROVOKE) = 10
			if ( spact(SKILL_SPACT_PROVOKE - STARTING_SKILL_SPACT) == 0 ) {
				spact(SKILL_SPACT_PROVOKE - STARTING_SKILL_SPACT) = 1
				txtmore
				txtef COLOR_YELLOW
				txt lang("あなたは「" + skillname(SKILL_SPACT_PROVOKE) + "」の能力を得た。", "You have learned a new ability, " + skillname(SKILL_SPACT_PROVOKE) + ".")
			}
		}
		if ( leoap == 500 ) {
			gdata(GDATA_FLAG_AP_FEAT_METAL_GUARD) = 10
			if ( spact(SKILL_SPACT_METAL_GUARD - STARTING_SKILL_SPACT) == 0 ) {
				spact(SKILL_SPACT_METAL_GUARD - STARTING_SKILL_SPACT) = 1
				txtmore
				txtef COLOR_YELLOW
				txt lang("あなたは「" + skillname(SKILL_SPACT_METAL_GUARD) + "」の能力を得た。", "You have learned a new ability, " + skillname(SKILL_SPACT_METAL_GUARD) + ".")
			}
		}
		if ( leoap == 800 ) {
			gdata(GDATA_FLAG_AP_FEAT_SYNCHRO_HEARTS) = 10
			if ( spact(SKILL_SPACT_SYNCHRO_HEARTS - STARTING_SKILL_SPACT) == 0 ) {
				spact(SKILL_SPACT_SYNCHRO_HEARTS - STARTING_SKILL_SPACT) = 1
				txtmore
				txtef COLOR_YELLOW
				txt lang("あなたは「" + skillname(SKILL_SPACT_SYNCHRO_HEARTS) + "」の能力を得た。", "You have learned a new ability, " + skillname(SKILL_SPACT_SYNCHRO_HEARTS) + ".")
			}
		}
		if ( leoap == 1000 ) {
			gdata(GDATA_FLAG_AP_FEAT_CHARGE) = 10
			if ( spact(SKILL_SPACT_CHARGE - STARTING_SKILL_SPACT) == 0 ) {
				spact(SKILL_SPACT_CHARGE - STARTING_SKILL_SPACT) = 1
				txtmore
				txtef COLOR_YELLOW
				txt lang("あなたは「" + skillname(SKILL_SPACT_CHARGE) + "」の能力を得た。", "You have learned a new ability, " + skillname(SKILL_SPACT_CHARGE) + ".")
			}
		}
		leoap = 0
		goto *chat_unique
	}
	goto *chat_unique

*evochat_portrait
	if ( cdata(CDATA_FACE, tc) > 0 ) {
		buff = lang("(現在の立ち姿はface" + cdata(CDATA_FACE, tc) + "だ)", "(Currently using face" + cdata(CDATA_FACE, tc) + ")")
	}
	if ( cdata(CDATA_FACE, tc) == 0 ) {
		buff = lang("(現在、立ち姿は決まっていない)", "(no Setting)")
	}
	chatList 1, lang("次へ>>>", ">>>")
	chatList 0, lang("<<<前へ", "<<<")
	chatList 2, lang("戻る", "Cancel")
	chatesc = 1
	gosub *chat_select
	if ( chatval == 1 | chatval == 0 ) {
		snd SOUNDLIST_CURSOR1
		tatiebk = cdata(CDATA_FACE, tc)
		if ( chatval == 1 ) {
			cdata(CDATA_FACE, tc)++
		}
		if ( chatval == 0 ) {
			cdata(CDATA_FACE, tc)--
		}
		if ( cdata(CDATA_FACE, tc) > 40 ) {
			cdata(CDATA_FACE, tc) = 40
			goto *evochat_portrait
		}
		if ( cdata(CDATA_FACE, tc) <= 0 ) {
			cdata(CDATA_FACE, tc) = 0
			goto *evochat_portrait
		}
		ss = exedir + "\\user\\graphic2\\face" + cdata(CDATA_FACE, tc) + "_B.bmp"
		if ( cdata(CDATA_EMO_ICON, tc) \ 100 == 6 ) {
			ss = exedir + "\\user\\graphic2\\face" + cdata(CDATA_FACE, tc) + "_F.bmp"
		}
		if ( cdata(CDATA_EMO_ICON, tc) \ 100 == 17 ) {
			ss = exedir + "\\user\\graphic2\\face" + cdata(CDATA_FACE, tc) + "_H.bmp"
		}
		if ( cdata(CDATA_HP, tc) < cdata(CDATA_MAX_HP, tc) / 2 | cdata(CDATA_EMO_ICON, tc) \ 100 == 26 ) {
			ss = exedir + "\\user\\graphic2\\face" + cdata(CDATA_FACE, tc) + "_E.bmp"
		}
		if ( cdata(CDATA_EMO_ICON, tc) \ 100 == 18 | cdata(CDATA_CONDITION_ANGRY, tc) > 0 ) {
			ss = exedir + "\\user\\graphic2\\face" + cdata(CDATA_FACE, tc) + "_A.bmp"
		}
		if ( cdata(CDATA_EMO_ICON, tc) \ 100 == 21 ) {
			ss = exedir + "\\user\\graphic2\\face" + cdata(CDATA_FACE, tc) + "_Q.bmp"
		}
		exist ss
		if ( strsize == (-1) ) {
			cdata(CDATA_FACE, tc) = tatiebk
			goto *evochat_portrait
		}
		s = exedir + "\\user\\graphic2\\face" + cdata(CDATA_FACE, tc) + "_B.bmp"
		if ( cdata(CDATA_EMO_ICON, tc) \ 100 == 6 ) {
			s = exedir + "\\user\\graphic2\\face" + cdata(CDATA_FACE, tc) + "_F.bmp"
		}
		if ( cdata(CDATA_EMO_ICON, tc) \ 100 == 17 ) {
			s = exedir + "\\user\\graphic2\\face" + cdata(CDATA_FACE, tc) + "_H.bmp"
		}
		if ( cdata(CDATA_HP, tc) < cdata(CDATA_MAX_HP, tc) / 2 | cdata(CDATA_EMO_ICON, tc) \ 100 == 26 ) {
			s = exedir + "\\user\\graphic2\\face" + cdata(CDATA_FACE, tc) + "_E.bmp"
		}
		if ( cdata(CDATA_EMO_ICON, tc) \ 100 == 18 | cdata(CDATA_CONDITION_ANGRY, tc) > 0 ) {
			ss = exedir + "\\user\\graphic2\\face" + cdata(CDATA_FACE, tc) + "_A.bmp"
		}
		if ( cdata(CDATA_EMO_ICON, tc) \ 100 == 21 ) {
			ss = exedir + "\\user\\graphic2\\face" + cdata(CDATA_FACE, tc) + "_Q.bmp"
		}
		exist s
		if ( strsize == (-1) ) {
			p = cdata(CDATA_PIC, tc) \ COLOR_TINT_MULT + cdata(CDATA_CHARA_PIC, tc) * COLOR_TINT_MULT, (cdata(CDATA_PIC, tc) - cdata(CDATA_CHARA_PIC, tc) * COLOR_TINT_MULT) / COLOR_TINT_MULT
			chara_preparepic p, p(1)
			pos wx + 82, wy + 125 - chipc(CHIPC_F, p)
			gmode 2, chipc(CHIPC_WIDTH, p), chipc(CHIPC_HEIGHT, p)
			grotate 5, 0, 960, 0, chipc(CHIPC_WIDTH, p) * 2, chipc(CHIPC_HEIGHT, p) * 2
		}
		else {
			if ( chatpicloaded == 0 ) {
				gsel 4
				pos 0, 0
				picload s, 1
				gsel 0
				chatpicloaded = 1
			}
		}
		goto *evochat_portrait
	}
	goto *chat_default

*sqMother_1
	chatList 1, lang("エーテル抗体を1本渡す", "(Hand her a potion of cure corruption.)")
	chatList 0, strbye
	gosub *chat_select
	if ( chatval != 1 ) {
		return 0
	}
	inv_find ITEM_ID_POTION_CURE_CORRUPTION, CHARA_PLAYER
	if ( stat == (-1) ) {
		chatMore lang("うそつき！", "Liar!")
		return 0
	}
	inv(INV_ITEM_NUM, stat)--
	txt lang("エーテル抗体を1本渡した。", "You give her a potion.")
	snd SOUNDLIST_EQUIP1
	chatMore lang("え…あ、ありがと〜！！おかあさん…薬だよ。これでよくなるよね？", "R-Really? Mommy, mommy! " + cdatan(CDATAN_NAME, CHARA_PLAYER) + " gave us a cure! Are you gonna be okay now?")
	return 1

*chat_unique_enthumesis
	chatMore lang("累計放出量から予測した状態を、ソピアーから聞いていたが…それよりもだいぶ弱っているようだ。", "Sorry, this is untranslated sentence."), strmore, findchara(CREATURE_ID_BLACK_GAUNTLET_LEOLD)
	chatMore lang("一度でいいから会いたいよ…。どうすれば会えるの？こいつらの知識を取り込めばわかるの？", "Sorry, this is untranslated sentence."), strmore, findchara(CREATURE_ID_ENTHUMESIS)
	chatMore lang("情けをかけるのは危険だ。仕留めるぞ。", "Sorry, this is untranslated sentence."), strmore, findchara(CREATURE_ID_BLACK_GAUNTLET_LEOLD)
	gdata(GDATA_FLAG_MAIN) = 710
	txt_questupdate
	goto *chat_end

*chat_unique_lankata
	music = MUSICLIST_MCBOSS
	gosub *music_play
	flt
	novoidlv = 1
	characreate -1, CREATURE_ID_LANKATA_THE_LIGHTNING_OF_BLUE, cdata(CDATA_X, CHARA_PLAYER), cdata(CDATA_Y, CHARA_PLAYER)
	cdata(CDATA_RELATION, rc) = 0
	cdata(CDATA_RELATION_ORG, rc) = 0
	cdata(CDATA_ROLE, rc) = ROLE_SPECIAL
	gdata(GDATA_FLAG_MAIN) = 640
	gdata(GDATA_FLAG_MAIN_CHAOS_CRADLE_25) = 100
	gdata(GDATA_FLAG_MAIN_CHAOS_CRADLE_34) = 100
	chatMore lang("やっと会えた…！父上っ！", "Finally we meet, father!"), strmore, findchara(CREATURE_ID_LANKATA_THE_LIGHTNING_OF_BLUE)
	chatMore lang("ふふっ…最期に…娘の声が聞こえる…なんて。もう、目が…かすんで…きました。", "Heh... I'm dying but I can hear my daughter's voice somehow. Oh, my vision... is already... getting... blurry."), strmore, findchara(CREATURE_ID_ALFRED_THE_CANGNAN_WIND)
	chatMore lang("そこの冒険者…少しどいていてください。", "You're in my way Adventurer, make way please."), strmore, findchara(CREATURE_ID_LANKATA_THE_LIGHTNING_OF_BLUE)
	chatMore lang("新型緩和薬を投与…効くといいのですが。", "The new pain killer has been administered. However, I wonder if it's effective..."), strmore, findchara(CREATURE_ID_LANKATA_THE_LIGHTNING_OF_BLUE)
	chatMore lang("…。", "..."), strmore, findchara(CREATURE_ID_LANKATA_THE_LIGHTNING_OF_BLUE)
	chatMore lang("この様子だと、薬が回り切る前に肉体が崩壊しそうですね…。今、ここで次元炉の摘出を行います。耐えてください、父上！", "In this state the body will break down before the medicine manages to take effect... For now let's remove the dimensional reactor. Please endure, father!"), strmore, findchara(CREATURE_ID_LANKATA_THE_LIGHTNING_OF_BLUE)
	redraw 0
	gosub *screen_draw
	gosub *screen_fade
	gsel 4
	pos 0, 0
	picload exedir + "graphic\\face2" + devfile + ".bmp", 1
	gsel 0
	chatMore lang("…。", "..."), strmore, findchara(CREATURE_ID_LANKATA_THE_LIGHTNING_OF_BLUE)
	music = MUSICLIST_MCVICTORY
	gosub *music_play
	chatMore lang("私は…助かったのですか？", "I-I'm saved?"), strmore, findchara(CREATURE_ID_ALFRED_THE_CANGNAN_WIND)
	chatMore lang("父上…！よかった、本当によかった…。", "Oh, I'm so glad, father!"), strmore, findchara(CREATURE_ID_LANKATA_THE_LIGHTNING_OF_BLUE)
	chatMore lang("ランカータ、なぜ貴方がここに？衛生兵なのに一人でここまで来たのですか？", "Why are you here Lankata? The medic came here on their own?"), strmore, findchara(CREATURE_ID_ALFRED_THE_CANGNAN_WIND)
	chatMore lang("その話は後です。さぁ、脱出しましょう。", "We'll talk about that later. Let's escape first."), strmore, findchara(CREATURE_ID_LANKATA_THE_LIGHTNING_OF_BLUE)
	chatMore lang("おっといけません。その前に。", "Uh-oh, we can't go that way."), strmore, findchara(CREATURE_ID_LANKATA_THE_LIGHTNING_OF_BLUE)
	chatMore lang("名も知らぬ冒険者…貴方が露払いをしていなければ、私はきっと間に合わなかったでしょう。貴方は降りかかる火の粉を払っただけでしょうが、結果的に助かりました。感謝します。", "Sorry, this is untranslated sentence."), strmore, findchara(CREATURE_ID_LANKATA_THE_LIGHTNING_OF_BLUE)
	snd SOUNDLIST_TELEPORT1
	txt lang(name(tc) + "は次元の扉を開けた。", name(tc) + " opens a dimensional door.")
	chara_vanquish findchara(CREATURE_ID_LANKATA_THE_LIGHTNING_OF_BLUE)
	chara_vanquish findchara(CREATURE_ID_ALFRED_THE_CANGNAN_WIND)
	gosub *music_play
	goto *chat_end

*chat_evOpening
	skillgain CHARA_PLAYER, csskillinit, 1
	skillmod csskillinit, CHARA_PLAYER, 9000
	modgrowth CHARA_PLAYER, csskillinit, 83
	csskillinit = 0
	autosave = 1 * (gdata(GDATA_AREA) != AREA_SHOW_HOUSE)
	if ( lomiaseaster ) {
		cdata(CDATA_CONDITION_BLIND, CHARA_PLAYER) = 100
		chatMore lang("この洞窟…雨をしのぐにはちょうどいいわ。ロミアス、危険がないか奥を調べて来て。", "This cave... it's a good place to keep out of the rain. Lomias, check the inner chamber to be sure there is no danger lurking here."), strmore, findchara(CREATURE_ID_LARNNEIRE_THE_LISTENER_OF_WIND)
		chatMore lang("わかった。ここで待っていろ", "Okay. Wait here."), strmore, findchara(CREATURE_ID_LOMIAS_THE_MESSENGER_FROM_VINDALE)
		gosub *screen_draw
		await 3000
		txtnew
		txtef COLOR_RED
		txt lang("何かは殺された。", "Something is killed.")
		txt lang("「ぐわぁ」", cnvtalk("Uggghhh!"))
		snd SOUNDLIST_KILL1
		spillblood 28, 6, 10
		flt
		itemcreate -1, ITEM_ID_BEGGARS_PENDANT, 28, 6, 0
		gosub *screen_draw
		await 500
		await 500
		chatMore lang("…今の音は？ …ロミアス、大丈夫？", "...what was that sound? ...Lomias, are you alright?"), strmore, findchara(CREATURE_ID_LARNNEIRE_THE_LISTENER_OF_WIND)
		chatMore lang("ああ、問題ない。どうやらこの洞窟は昔、誰かが住んでいたようだな。奥を見て来たが、今はもう使われていないようだ。", "It's nothing. Looks like this cave is long abandoned. It's a good place to stay."), strmore, findchara(CREATURE_ID_LOMIAS_THE_MESSENGER_FROM_VINDALE)
		chatMore lang("そう、ならば都合がいいわ。…あら、あなた何を持っているの？ …キャーッ、プチじゃない！", "I see, that's convenient for us... wait Lomias, what are you carrying?... Argh! Putits!"), strmore, findchara(CREATURE_ID_LARNNEIRE_THE_LISTENER_OF_WIND)
		chatMore lang("こいつらか？心配する必要はない。以前、人間にペットとして飼われていたのだろう、ふふ…私によくなついているようだ。", "Don't worry. It appears these putits had been kept as pets by someone. They are kind of... cute."), strmore, findchara(CREATURE_ID_LOMIAS_THE_MESSENGER_FROM_VINDALE)
		chatMore lang("うふ！あなたにも優しいところがあるのね。…来て。どうやら怪我人が意識を取り戻したみたいよ。", "Huh, sounds like even you have a soft spot... Come here, the injured is about to wake up."), strmore, findchara(CREATURE_ID_LARNNEIRE_THE_LISTENER_OF_WIND)
		await 1500
		redraw 0
		gosub *screen_draw
		gosub *screen_fade
		gsel 4
		pos 0, 0
		picload exedir + "graphic\\face1" + devfile + ".bmp", 1
		gsel 0
		cdata(CDATA_CONDITION_BLIND, CHARA_PLAYER) = 0
		txt lang(" 夢…か… ", "It was... a dream...?")
	}
	else {
		txtnew
	}
	txt lang("あなたは意識をとりもどした。", "You regain consciousness.")
	gdata(GDATA_ADVENTURER_ORACLE) = 0
	if ( gdata(GDATA_FLAG_GAME_MODE) == GAMEMODE_PURGE ) {
		flt
		itemcreate -1, ITEM_ID_GOLD_PIECE, cdata(CDATA_X, CHARA_PLAYER), cdata(CDATA_Y, CHARA_PLAYER), 1000000
	}
	chatMore lang("…意識が…もう戻ったのか？ 驚いたな。君の回復を待つために、我々の急を要する旅がいつまで中断されるのか、気を揉んでいたのだが。", "...you...you're awake already? Remarkable. I was beginning to worry that nursing a lowly adventurer would bring our urgent travel to a halt."), strmore, findchara(CREATURE_ID_LOMIAS_THE_MESSENGER_FROM_VINDALE)
	chatMore lang("君は重傷を負い川辺に倒れていた。宵闇が辺りを覆う前に、癒し手の力を持つ我々に発見されたのは、全くよくできた偶然だ。", "You were badly wounded, passed out on the bank of a river. It was fortunate that we found you before the dark mantle of night enveloped this whole valley, almost as if Ehekatl, the goddess of luck herself had her eyes upon you.")
	chatMore lang(" …そんな物珍しげな顔をするな。君の察する通り、我々は異形の森の民だ。エレアは…シエラ・テールの高潔なる異端者は、他種族の詮索に付き合う無駄な時間をあいにく持ち合わせていないが、君は、我々に拾われた幸運をもっと素直に喜ぶべきだな。瀕死の君を回復させることは、ここにいるラーネイレ以外の何者にも不可能だっただろう。なにせ彼女はエレアの…", "...stop your curious eyes. Yes, we are children of Vindale, which they call the Heretical Forest. Though we Eleas, noble but blameless \"heretics\", aren't keen to spend idle time responding to every senseless question about our race, you should be more thankful for your fate. If it weren't for the lady Larnneire who cured your mortal wound, you wouldn't even be hearing my tirade. For the lady is no ordinary Elea and only she can...")
	chatMore lang("ロミアス、喋りすぎよ。たとえ意識の朦朧とした怪我人が相手だとしても。", "You talk too much Lomias, even though the one injured before you is still dazed."), strmore, findchara(CREATURE_ID_LARNNEIRE_THE_LISTENER_OF_WIND)
	chatMore lang("…そうだな。私の悪い癖だ、わかってはいる。…さて、" + cdatan(CDATAN_NAME, CHARA_PLAYER) + "といったな、", "...yes, it's a bad habit of mine. Well, " + cdatan(CDATAN_NAME, CHARA_PLAYER) + "..."), strmore, findchara(CREATURE_ID_LOMIAS_THE_MESSENGER_FROM_VINDALE)
	mdata(MDATA_MUSIC) = MUSICLIST_MCHOME
	gosub *music_play
	goto *chat_unique

*chat_evReached
	chatMore lang("無事に到着できてほっとした" + _yo() + _thanks(2), "We made it! Thank you!")
	goto *chat_end

*chat_default
	listmax = 0
	if ( buff == "" ) {
		gosub *random_talk
		if ( evochat == 0 ) {
			customtalk tc, DBMODE_FLAVOR_DIALOG
			if ( stat ) {
				gosub *convert_word
			}
		}
		else {
			if ( cdata(CDATA_EVOCHAT_POINTS, tc) >= 10 ) {
				hyouzyou = 3
			}
		}
		if ( cdata(CDATA_INTEREST, tc) > 0 ) {
			if ( cdata(CDATA_RELATION, tc) != 10 ) {
				if ( tc >= MAX_CHARA_FOLLOWER ) {
					if ( rnd(3) == 0 ) {
						if ( cdata(CDATA_IMPRESSION, tc) < 100 ) {
							if ( rnd(sdata(SKILL_ATTR_CHA, CHARA_PLAYER) + 1) > 10 ) {
								modimp tc, rnd(3)
							}
							else {
								modimp tc, rnd(3) * (-1)
							}
						}
					}
					cdata(CDATA_INTEREST, tc) -= rnd(30)
					cdata(CDATA_INTEREST_RENEW, tc) = gdata(GDATA_HOUR) + gdata(GDATA_DAY) * 24 + gdata(GDATA_MONTH) * 24 * 30 + gdata(GDATA_YEAR) * 24 * 30 * 12 + 8
				}
			}
		}
	}
	if ( kinenflag == 1 ) {
		chatList 0, lang("ふたりの特別な日", "Today is our special anniversary!")
		chatList 1, lang("何かあったっけ？", "Was there anything special today?")
		chatList 2, lang("えーとアレだよアレアレ", "Well, today is... hmmm....")
		chatList 3, lang("どうでもいい", "It does not matter.")
		chatList 4, lang("世界最後の日", "Today is the end of days.")
		buff = lang("…今日は何の日？", "Care to guess what day it is?")
		chatesc = 0
		gosub *chat_select
		if ( chatval != 4 ) {
			flt
			itemcreate -1, ITEM_ID_PRESENT, cdata(CDATA_X, CHARA_PLAYER), cdata(CDATA_Y, CHARA_PLAYER), 0
			inv(INV_ITEM_STATUS, ci) = ITEM_STATUS_NORMAL
		}
		if ( chatval == 0 ) {
			chatMore lang("ふふん♪", "That's right!")
			cdata(CDATA_EMO_ICON, tc) = 17 + 100 * 3
			cdata(CDATA_EVOCHAT_POINTS, tc) = 10
			chatMore lang("(" + name(tc) + "は上機嫌だ！)", "(" + name(tc) + " is a good mood!)")
			goto *chat_end
		}
		if ( chatval == 1 ) {
			cdata(CDATA_EMO_ICON, tc) = 18 + 100 * 3
			cdata(CDATA_EVOCHAT_POINTS, tc) = -5
			chatMore lang("…別に！", "There is... nothing in particular!")
			chatMore lang("(" + name(tc) + "はなぜか不機嫌になった)", "(" + name(tc) + " got in a bad mood for some reason...)")
			goto *chat_end
		}
		if ( chatval == 2 ) {
			cdata(CDATA_EMO_ICON, tc) = 11 + 100 * 3
			chatList 0, lang("アレ！", "I do not remember...")
			chatList 1, lang("コレ！", "Please give me a hint.")
			chatList 2, lang("ソレ！", "By the way, the weather is nice today.")
			chatList 3, lang("もしかして記念日…だっけ？", "Was it some sort of... anniversary?")
			chatList 4, lang("何だっけ、ここまで出てるんだけどなー！", "Please wait until I recollect the answer.")
			buff = lang("…どれ？", "So what?")
			chatesc = 0
			gosub *chat_select
			chatMore lang("もういい。", "Whatever, forget it.")
			chatMore lang("(" + name(tc) + "は呆れている…)", "(" + name(tc) + " is disgusted with you...)")
			goto *chat_end
		}
		if ( chatval == 3 ) {
			cdata(CDATA_EMO_ICON, tc) = 26 + 100 * 3
			cdata(CDATA_EVOCHAT_POINTS, tc) = -10
			chatMore lang("どうでもよくない…！", "That won't do...!")
			chatMore lang("(" + name(tc) + "は悲しくなった)", "(" + name(tc) + " feels sad.)")
			cdata(CDATA_EMO_ICON, tc) = 13 + 100 * 3
			goto *chat_end
		}
		if ( chatval == 4 ) {
			cdata(CDATA_EMO_ICON, tc) = 20 + 100 * 3
			chatList 0, lang("ごめん寝ぼけてた", "I'm sorry. I was still half asleep.")
			chatList 1, lang("【もうおしまいだぁ…！】", "<It's over...!>")
			buff = lang("えっ！?", "What!?")
			chatesc = 0
			gosub *chat_select
			if ( chatval == 0 ) {
				chatMore lang("こら！", "Hey, you!")
				goto *chat_end
			}
			if ( chatval == 1 ) {
				chatMore lang("希望はある！明日のために戦おう！", "There is still hope! Let's fight for tomorrow!")
				gdata(STARTING_GDATA_FLAG + 380) = 1
				goto *chat_end
			}
		}
		goto *chat_end
	}
	if ( evochat == 1 ) {
		if ( cdata(CDATA_EVOCHAT_POINTS, tc) >= 10 ) {
			hyouzyou = 3
		}
		if ( hyouzyou == 0 ) {
			customtalk tc, DBMODE_FLAVOR_DIALOG_B
			if ( stat ) {
				gosub *convert_word
			}
			else {
				if ( rnd(2) == 0 ) {
					buff = lang("(" + name(tc) + "は少し緊張しているようだ)", "(" + name(tc) + " seems to be a bit nervous.)")
				}
				else {
					buff = lang("二人きり…" + _da(3) + "。", "It's just the two of us...")
				}
			}
		}
		if ( hyouzyou == 2 ) {
			customtalk tc, DBMODE_FLAVOR_DIALOG_E
			if ( stat ) {
				gosub *convert_word
			}
			else {
				if ( rnd(2) == 0 ) {
					buff = lang("(" + name(tc) + "は反応に困っている…)", "(" + name(tc) + " seems to be embarrassed.)")
				}
				else {
					buff = lang("こ、こんなところで冗談はやめて" + _kure(3) + "。", "P...Please quit the joke in a place like this!")
				}
			}
		}
		if ( hyouzyou == 1 ) {
			customtalk tc, DBMODE_FLAVOR_DIALOG_F
			if ( stat ) {
				gosub *convert_word
			}
			else {
				if ( rnd(2) == 0 ) {
					buff = lang("(" + name(tc) + "は喜んでいる！)", "(" + name(tc) + " is pleased.)")
				}
				else {
					buff = lang("こういうの、すごく嬉しい" + _yo(3) + "…。", "This kind of thing is really nice...")
				}
			}
		}
		if ( hyouzyou == 3 ) {
			snd SOUNDLIST_MIND000
			customtalk tc, DBMODE_FLAVOR_DIALOG_H
			if ( stat ) {
				gosub *convert_word
			}
			else {
				if ( rnd(2) == 0 ) {
					buff = lang("(" + name(tc) + "は幸せな表情であなたをじっと見ている)", "(" + name(tc) + " is staring at you with a happy expression.)")
				}
				else {
					buff = lang(cdatan(CDATAN_NAME, CHARA_PLAYER) + "…" + _ore(3) + "は今とても幸せ" + _da(3) + "。", cdatan(CDATAN_NAME, CHARA_PLAYER) + "... I am very happy now.")
				}
			}
		}
	}
	if ( evochat == 2 ) {
		if ( hyouzyou == 0 ) {
			msg_newline
			msgtemp = "  "
			msg_newline
			msgtemp = "  "
			msg_newline
			msgtemp = "  "
			msg_newline
			msgtemp = "  "
			customtalk tc, DBMODE_FLAVOR_HUG
			if ( stat ) {
				gosub *convert_word
			}
			if ( gdata(GDATA_CUSTOM_TALK) == 100 ) {
				if ( rnd(3) == 0 ) {
					txt lang(name(tc) + "は力を抜いた…。", name(tc) + " seems to be a little pounding.")
				}
				else {
					if ( rnd(3) == 0 ) {
						txt lang("「甘えん坊さん！」", name(tc) + " is staring at you with a happy expression.")
					}
					else {
						txt lang(name(tc) + "の鼓動が伝わってくる…。", name(tc) + " seems to be a little pounding.")
					}
				}
			}
		}
		if ( hyouzyou == 1 ) {
			msg_newline
			msgtemp = "  "
			msg_newline
			msgtemp = "  "
			msg_newline
			msgtemp = "  "
			msg_newline
			msgtemp = "  "
			customtalk tc, DBMODE_FLAVOR_NADE
			if ( stat ) {
				gosub *convert_word
			}
			if ( gdata(GDATA_CUSTOM_TALK) == 100 ) {
				if ( rnd(3) == 0 ) {
					txt lang(name(tc) + "はリラックスしているようだ。", name(tc) + " seems to be a little relaxed.")
				}
				else {
					if ( rnd(3) == 0 ) {
						txt lang("「へへ…」", name(tc) + " is staring at you with a happy expression.")
					}
					else {
						txt lang(name(tc) + "はそっと撫で返してきた。", name(tc) + " gently strokes you.")
					}
				}
			}
		}
		if ( hyouzyou == 7 ) {
			msg_newline
			msgtemp = "  "
			msg_newline
			msgtemp = "  "
			msg_newline
			msgtemp = "  "
			msg_newline
			msgtemp = "  "
			customtalk tc, DBMODE_FLAVOR_KISS
			if ( stat ) {
				gosub *convert_word
			}
			if ( gdata(GDATA_CUSTOM_TALK) == 100 ) {
				if ( rnd(3) == 0 ) {
					txt lang(name(tc) + "はうっとりしている…。", name(tc) + " is staring at you with a happy expression.")
				}
				else {
					if ( rnd(3) == 0 ) {
						txt lang("「そんなにがっつかなくても…♪」", name(tc) + " is staring at you with a happy expression.")
					}
					else {
						txt lang("「キスだけでいい" + _noka(3) + "？」", name(tc) + " is staring at you with a happy expression.")
					}
				}
			}
		}
		if ( hyouzyou == 5 ) {
			msg_newline
			msgtemp = "  "
			msg_newline
			msgtemp = "  "
			msg_newline
			msgtemp = "  "
			msg_newline
			msgtemp = "  "
			customtalk tc, DBMODE_FLAVOR_DIALOG_E
			if ( stat ) {
				gosub *convert_word
			}
			if ( gdata(GDATA_CUSTOM_TALK) == 100 ) {
				if ( rnd(3) == 0 ) {
					txt lang(name(tc) + "は呆気にとられている。", name(tc) + " is taken aback.")
				}
				else {
					if ( rnd(3) == 0 ) {
						txt lang("「？？？」", cnvtalk("???"))
					}
					else {
						txt lang("「ええっ！？」", cnvtalk("What!?"))
					}
				}
			}
		}
		if ( hyouzyou == 6 ) {
			msg_newline
			msgtemp = "  "
			msg_newline
			msgtemp = "  "
			msg_newline
			msgtemp = "  "
			msg_newline
			msgtemp = "  "
			customtalk tc, DBMODE_FLAVOR_EX_REACT
			if ( stat ) {
				gosub *convert_word
			}
			if ( gdata(GDATA_CUSTOM_TALK) == 100 ) {
				if ( rnd(3) == 0 ) {
					txt lang(name(tc) + "は悪戯っぽい表情を浮かべた。", name(tc) + " is staring at you with a happy expression.")
				}
				else {
					if ( rnd(3) == 0 ) {
						txt lang("「ちょっと落ち着いて！」", name(tc) + " is staring at you with a happy expression.")
					}
					else {
						txt lang("「もうっ…」", name(tc) + " is staring at you with a happy expression.")
					}
				}
			}
		}
	}
	if ( cdata(CDATA_ROLE, tc) == ROLE_MAID ) {
		if ( gdata(GDATA_GUEST) > 0 ) {
			chatList 58, lang("客に会う", "Yes, I'll meet the guest now.")
			chatList 59, lang("追い返す", "I don't want to meet anyone.")
		}
	}
	if ( evochat == 1 ) {
		if ( cdata(CDATA_EVOCHAT_POINTS, CHARA_PLAYER) > 0 & cdata(CDATA_EVOCHAT_POINTS, tc) < 10 ) {
			chatList 78, lang("優しくする", "<Be kind>")
			chatList 79, lang("困らせる", "<To embarrass>")
			if ( cdata(CDATA_GOLD, CHARA_PLAYER) >= 100000 ) {
				chatList 80, lang("10万gpあげる（現在" + cdata(CDATA_GOLD, tc) + "gp所持）", "<Pass 100,000gp>")
			}
			if ( cdata(CDATA_EVOCHAT_POINTS, CHARA_PLAYER) >= 4 ) {
				chatList 87, lang("【暴走する】", "<<Get excited>>")
			}
		}
		chatList 81, lang("おしまい", "<End evochat>")
	}
	if ( evochat == 2 ) {
		if ( cdata(CDATA_EVOCHAT_POINTS, CHARA_PLAYER) > 0 & cdata(CDATA_EVOCHAT_POINTS, tc) < 10 ) {
			customtalk tc, DBMODE_FLAVOR_EX_ACT
			if ( iroiro == "" ) {
				iroiro = lang("色々する", "(Various things)")
			}
			chatList 88, lang("抱きつく", "<<Hug>>")
			chatList 89, lang("なでなでする", "<<Pat>>")
			chatList 90, lang("キスしまくる", "<<Kiss>>")
			chatList 91, lang(iroiro + " ", "<<" + iroiro + ">>")
		}
		chatList 92, lang("我に返る", "<Return>")
	}
	if ( evochat == 0 ) {
		if ( tc < MAX_CHARA_FOLLOWER ) {
			if ( cbit(CHARA_BIT_BODYGUARD, tc) == 0 ) {
				if ( cbit(CHARA_BIT_GUARD_TEMP, tc) == 0 ) {
					if ( cbit(CHARA_BIT_NECRO, tc) == 0 ) {
						if ( cbit(CHARA_BIT_LIVESTOCK, tc) == 0 ) {
							if ( cdata(CDATA_HUNGER, CHARA_PLAYER) <= 10000 & cdata(CDATA_HUNGER, tc) <= 6000 & cdata(CDATA_IMPRESSION, tc) >= 100 & cbit(CHARA_BIT_ANOREXIA, tc) != 1 & cbit(CHARA_BIT_ANOREXIA, CHARA_PLAYER) != 1 ) {
								chatList 84, lang("一緒に食事する", "Let's have a meal together.")
							}
							if ( cdata(CDATA_MATERIAL1_COUNTER, tc) > 200 | cdata(CDATA_MATERIAL2_COUNTER, tc) > 200 | cdata(CDATA_MATERIAL3_COUNTER, tc) > 200 | cdata(CDATA_MATERIAL4_COUNTER, tc) > 200 | cdata(CDATA_MATERIAL5_COUNTER, tc) > 200 ) {
								chatList 66, lang("マテリアルを受け取る", "Receive materials.")
							}
						}
					}
				}
			}
		}
		if ( cdata(CDATA_INTEREST, tc) > 0 & chatval(1) == 0 ) {
			chatList 1, lang("話がしたい", "Let's talk.")
		}
		if ( cdata(CDATA_ROLE, tc) >= ROLE_SHOP_MIN & cdata(CDATA_ROLE, tc) < ROLE_GUEST_MIN | cdata(CDATA_ROLE, tc) == ROLE_GUEST_MERCHANT ) {
			chatList 10, lang("買いたい", "I want to buy something.")
			chatList 11, lang("売りたい", "I want to sell something.")
			if ( cdata(CDATA_ROLE, tc) == ROLE_SHOP_WANDER ) {
				chatList 31, lang("襲撃するよ", "Prepare to die!")
			}
			if ( cdata(CDATA_ROLE, tc) == ROLE_SHOP_BLACKMARKET ) {
				chatList 86, lang("「キセル」が欲しい", "I want a kiseru.")
			}
			if ( cdata(CDATA_ROLE, tc) != ROLE_SHOP_WANDER & cdata(CDATA_ROLE, tc) != ROLE_SHOP_TRADE ) {
				chatList 12, lang("投資したい", "Need someone to invest in your shop?")
			}
		}
		if ( cdata(CDATA_ROLE, tc) == ROLE_BARTENDER ) {
			chatList 93, lang("飲み物を注文する", "Bring me something to drink.") + " (" + calcmealvalue() + strgold + ")"
			chatList 33, lang("仲間を呼び戻す", "Call back my allies.")
		}
		if ( cdata(CDATA_ROLE, tc) == ROLE_SLAVER ) {
			if ( get_freeally() != 0 ) {
				chatList 36, lang("奴隷を買う", "I want to buy a slave.")
			}
			chatList 37, lang("奴隷を売る", "I want to sell a slave.")
		}
		if ( cdata(CDATA_ROLE, tc) == ROLE_HORSE_MASTER ) {
			if ( get_freeally() != 0 ) {
				chatList 57, lang("馬を買う", "I want to buy a horse.")
			}
		}
		if ( tc < MAX_CHARA_FOLLOWER ) {
			if ( cbit(CHARA_BIT_BODYGUARD, tc) == 0 ) {
				if ( cbit(CHARA_BIT_GUARD_TEMP, tc) == 0 ) {
					if ( cbit(CHARA_BIT_NECRO, tc) == 0 ) {
						if ( cbit(CHARA_BIT_LIVESTOCK, tc) == 0 ) {
							chatList 34, lang("街で待機しろ", "Wait in town.")
							chatList 76, lang("立ち姿を変える", "Change the atmosphere.")
							if ( cdata(CDATA_EVOCHAT_POINTS, CHARA_PLAYER) > 0 & cdata(CDATA_EVOCHAT_POINTS, tc) < 10 & cdata(CDATA_IMPRESSION, tc) >= 100 ) {
								chatList 77, lang("【evochat】", "<evochat>")
							}
							if ( cdata(CDATA_PRECIOUS_ALLY, tc) == 0 ) {
								chatList 67, lang("大事な仲間に指定", "Designate as a precious ally.")
							}
							if ( cdata(CDATA_PRECIOUS_ALLY, tc) == 1 ) {
								chatList 68, lang("大事な仲間指定を解除", "Cancel precious ally status.")
							}
							if ( cdata(CDATA_TAMER_WHIP_PICKUP, tc) != 10 ) {
								chatList 71, lang("足元のアイテム我慢", "Don't pick up items off the ground.")
							}
							if ( cdata(CDATA_TAMER_WHIP_PICKUP, tc) == 10 ) {
								chatList 72, lang("アイテム我慢解除", "Do as you like with items on the ground.")
							}
							if ( cdata(CDATA_MASTER_SERVANT, tc) >= 150 ) {
								chatList 94, lang("特殊指示を出す", "Give special instructions.")
							}
							if ( cbit(CHARA_BIT_MARRIED, tc) == 0 ) {
								chatList 38, lang("婚約を申し込む", "May I ask for your hand?")
							}
							else {
								if ( gdata(GDATA_SLEEP) >= 15 ) {
									chatList 39, lang("遺伝子を残す", "Let's make a gene.")
								}
							}
							if ( cdata(CDATA_TXT, tc) != 0 ) {
								if ( cbit(CHARA_BIT_SHUT_UP, tc) == 0 ) {
									chatList 48, lang("黙らせる", "Shut up.")
								}
								else {
									chatList 48, lang("喋らせる", "You can speak now.")
								}
							}
							if ( cdata(CDATA_PRECIOUS_ALLY, tc) == 0 ) {
								chatList 35, lang("縁を切る", "I'm going to abandon you.")
							}

							/********** ANNA CUSTOM - BEGINNING **********/

							chatList 998, "Other"

							/********** ANNA CUSTOM - ENDING **********/

						}
					}
				}
			}
		}
		if ( cbit(CHARA_BIT_LIVESTOCK, tc) == 1 & gdata(GDATA_AREA) != AREA_SHOW_HOUSE ) {
			if ( cdata(CDATA_INTEREST, tc) > 0 ) {
				chatList 96, lang("芸を仕込む (アイテム消費)", "Teach a new trick. (consume item)")
			}
			if ( cdata(CDATA_GOD, CHARA_PLAYER) != GOD_EYTH ) {
				chatList 97, lang("家畜を神に捧げる", "Offer livestock to your god.")
			}
		}		
		if ( cdata(CDATA_ROLE, tc) == ROLE_SHOP_WEAPON | cdata(CDATA_ROLE, tc) == ROLE_SHOP_ARMOR ) {
			chatList 54, lang("矢弾の充填", "I need ammo for my weapon.")
			chatList 63, lang("武具の強化", "I want to harden my equipment.")
			chatList 64, lang("武具の軽量化", "I want to make my equipment ligher.")
			chatList 95, lang("武具の重量化", "I want to make my equipment heavier.")

			/********** ANNA CUSTOM - BEGINNING **********/ // Can Change Item Sprites In Home.

			if ( mdata(MDATA_TYPE) == MAP_TYPE_HOME & TweakData(TWEAK_CONVENIENCE_CHANGE_ITEM_SPRITE_HOME, TWEAK_CATEGORY_CONVENIENCE) == 1 ) {
				chatList 999, lang("アイテムの名前・外見変更（ブロンズ1枚）", "(1 Bronze) I want to change the appearance/name of an item.")
			}

			/********** ANNA CUSTOM - ENDING **********/

		}
		if ( cdata(CDATA_ROLE, tc) == ROLE_SHOP_INN ) {
			if ( cdata(CDATA_ID, tc) != CREATURE_ID_BARTENDER2 & cdata(CDATA_ID, tc) != CREATURE_ID_CLERK ) {
				chatList 13, lang("食事をとる", "Bring me something to eat.") + " (" + calcmealvalue() + strgold + ")"
				chatList 83, lang("スペシャルメニューを頼む (ブロンズ硬貨1枚)", "Bring me a special dish. (1 bronze) ")
				if ( gdata(GDATA_WEATHER) == WEATHER_ETHER | gdata(GDATA_WEATHER) == WEATHER_HARD_RAIN | gdata(GDATA_WEATHER) == WEATHER_SNOW ) {
					chatList 43, lang("シェルターに入る", "Take me to the shelter.")
				}
			}
		}
		if ( cdata(CDATA_ROLE, tc) == ROLE_IDENTIFIER ) {
			chatList 75, lang("魔法実習を受けたい", "Attend a magic practice.")
			chatList 14, lang("鑑定したい", "I need you to identify an item.") + " (" + calcidentifyvalue(0) + strgold + ")"
			chatList 15, lang("全て鑑定してほしい", "Identify all of my stuff.") + " (" + calcidentifyvalue(1) + strgold + ")"
			chatList 16, lang("調査したい", "Investigate an item.") + " (" + calcidentifyvalue(2) + strgold + ")"
		}
		if ( cdata(CDATA_ROLE, tc) == ROLE_TRAINER ) {
			chatList 17, lang("訓練したい", "Train me.")
			chatList 30, lang("新しい能力を覚えたい", "What skills can you teach me?")
		}
		if ( cdata(CDATA_ROLE, tc) == ROLE_MAYOR ) {
			if ( mdata(MDATA_CITY_COMPLAINTS) == 0 ) {
				chatList 73, lang("街の管理代行（必要発言力" + mdata(MDATA_CITY_AUTHORITY) + "/2000）", "I want on behalf of the town management.(Authority" + mdata(MDATA_CITY_AUTHORITY) + "/2000)")
			}
			if ( mdata(MDATA_CITY_COMPLAINTS) > 0 ) {
				chatList 74, lang("街の管理コマンド", "I want to run the town management.")
			}
		}
		if ( cdata(CDATA_ROLE, tc) == ROLE_INFORMER ) {
			chatList 18, lang("冒険者の情報", "Show me the list of adventurers.")
			chatList 47, lang("仲間の調査", "I want you to investigate one of my allies.")
			if ( gdata(STARTING_GDATA_FLAG + 322) == 0 & gdata(STARTING_GDATA_FLAG + 323) == 0 ) {
				chatList 82, lang("【誕生日を教える】", "[ I will inform my birthday.]")
			}
			clientguide
			if ( stat != 0 ) {
				repeat stat
					chatList 10000 + cnt, lang(cdatan(CDATAN_NAME, rtval(cnt)) + "の居場所を聞く(100Gold)", "Where is " + cdatan(CDATAN_NAME, rtval(cnt)) + "?(100Gold)")
				loop
			}
		}
		if ( cdata(CDATA_ROLE, tc) == ROLE_HEALER ) {
			chatList 19, lang("能力の復元", "Restore my attributes.") + " (" + calcrestorecost() + strgold + ")"
			chatList 62, lang("装備の解呪", "I want to uncurse equipments.") + " (" + calcrestorecostc() + strgold + ")"
		}
		if ( cdata(CDATA_ROLE, tc) == ROLE_ADVENTURER ) {
			chatList 20, lang("アイテム交換", "Are you interested in trade?")
			if ( cbit(CHARA_BIT_HIRED, tc) == 0 ) {
				chatList 50, lang("護衛を依頼する", "I want to hire you.")
				chatList 51, lang("仲間に誘う", "Join me!")
			}
		}
	}
	if ( cdata(CDATA_ROLE, tc) == ROLE_ARENA_MASTER ) {
		chatList 21, lang("試合に出る[決闘]", "I'm entering the arena. [Duel]")
		chatList 22, lang("試合に出る[ランブル]", "I'm entering the arena. [Rumble]")
		chatList 23, lang("成績を聞く", "Tell me my scores.")
	}
	if ( cdata(CDATA_ROLE, tc) == ROLE_PET_ARENA_MASTER ) {
		chatList 40, lang("ペットデュエル", "I want to register my pet. [Duel]")
		chatList 41, lang("チームバトル", "I want to register my team. [Team]")
		chatList 49, lang("EXバトル", "I want to see extra teams. [Ex Battle]")
		chatList 42, lang("成績を聞く", "Tell me my scores.")
	}
	if ( cdata(CDATA_ROLE, tc) == ROLE_MAID ) {
		chatList 45, lang("家の名前を考えてくれ", "Think of a nice name for my house.")
	}
	if ( cdata(CDATA_ROLE, tc) == ROLE_SISTER ) {
		chatList 46, lang("免罪符を買いたい", "I want to buy an indulgence.")
	}
	tradecheck tc

	/********** ORIGINAL - BEGINNING **********

	if ( stat ) {

	 ********** ORIGINAL - ENDING **********/

	/********** BLOODYSHADE CUSTOM - BEGINNING **********/ // Prevent adventurers with quests having 2 trade entries

	if ( stat & cdata(CDATA_ROLE, tc) != ROLE_ADVENTURER ) {

	/********** BLOODYSHADE CUSTOM - ENDING **********/

		chatList 20, lang("アイテム交換", "Are you interested in trade?")
	}
	if ( cdata(CDATA_ROLE, tc) == ROLE_GUARD ) {
		if ( gdata(GDATA_AREA) == AREA_HOME ) {
			chatList 85, lang("邪魔者を追い出したい", "I want to send the guests away.")
		}
		clientguide
		if ( stat != 0 ) {
			repeat stat
				chatList 10000 + cnt, lang(cdatan(CDATAN_NAME, rtval(cnt)) + "の居場所を聞く", "Where is " + cdatan(CDATAN_NAME, rtval(cnt)) + "?")
			loop
		}
		if ( itemfind(CHARA_PLAYER, ITEM_ID_WALLET) != (-1) ) {
			chatList 32, lang("落し物の財布を届ける", "Here is a lost wallet I found.")
		}
		else {
			if ( itemfind(CHARA_PLAYER, ITEM_ID_SUITCASE) != (-1) ) {
				chatList 32, lang("落し物のカバンを届ける。", "Here is a lost suitcase I found.")
			}
		}
	}
	if ( cdata(CDATA_ROLE, tc) == ROLE_RETURNER ) {
		chatList 53, lang("帰還したい", "I want to return.")
	}
	if ( cdata(CDATA_ROLE, tc) == ROLE_SHOP_BOOK_RESERVE ) {
		if ( gdata(GDATA_FLAG_GUILD_MAGE) != 0 | gdata(GDATA_AREA) == AREA_YLVA_LIBRARY ) {
			chatList 55, lang("魔法書の予約", "I want to reserve some books.")
		}
	}
	if ( cdata(CDATA_CONDITION_DRUNK, tc) != 0 ) {
		if ( gdata(GDATA_AREA) != AREA_SHOW_HOUSE ) {
			if ( tc >= MAX_CHARA_FOLLOWER ) {
				if ( evid() == (-1) ) {
					chatList 56, lang("気持ちいいことしない？", "Interested in a little tail t'night?")
				}
			}
		}
	}
	if ( cdata(CDATA_ID, tc) == CREATURE_ID_PROSTITUTE ) {
		if ( evid() == (-1) ) {
			chatList 60, lang("暗い場所に移ろう", "I'll buy you.")
		}
	}
	if ( cdata(CDATA_ROLE, tc) == ROLE_CARAVAN_MASTER ) {
		chatList 61, lang("観察する", "Observe caravan.")
	}
	if ( cdata(CDATA_ID, tc) == CREATURE_ID_CAPTAIN ) {
		if ( gdata(GDATA_FLAG_MAIN) == 362 ) {
			if ( gdata(GDATA_AREA) == AREA_PORT_KAPUL ) {
				if ( tc > MAX_CHARA_FOLLOWER ) {
					chatList 65, lang("紹介状を見せる", "(Show the letter of introduction)")
				}
			}
		}
	}
	if ( cdata(CDATA_ID, tc) == CREATURE_ID_DETECTIVE | cdata(CDATA_ID, tc) == CREATURE_ID_WEREWOLF_DETECTIVE ) {
		if ( tc > MAX_CHARA_FOLLOWER ) {
			chatList 70, lang("身辺調査", "Background checks")
		}
	}
	if ( mdata(MDATA_WEREWOLF_STAGE) == 1 ) {
		if ( cdata(CDATA_ID, tc) == CREATURE_ID_CITIZEN | cdata(CDATA_ID, tc) == CREATURE_ID_CITIZEN2 | cdata(CDATA_ID, tc) == CREATURE_ID_CITIZEN4 | cdata(CDATA_ID, tc) == CREATURE_ID_CITIZEN3 | cdata(CDATA_ID, tc) == CREATURE_ID_WEREWOLF | cdata(CDATA_ID, tc) == CREATURE_ID_FOX_SPIRIT | cdata(CDATA_ID, tc) == CREATURE_ID_SUNBARARIAN | cdata(CDATA_ID, tc) == CREATURE_ID_DETECTIVE | cdata(CDATA_ID, tc) == CREATURE_ID_WEREWOLF_DETECTIVE | cdata(CDATA_ROLE, tc) == ROLE_ADVENTURER ) {
			if ( tc > MAX_CHARA_FOLLOWER ) {
				if ( cdata(CDATA_ROLE, tc) != ROLE_SPECIAL ) {
					if ( gdata(GDATA_AREA) != AREA_HOME ) {
						chatList 69, lang("汝は人狼なりや？", "Are you a werewolf?")
					}
				}
			}
		}
	}
	f = 0
	deliver = -1, -1
	if ( gdata(GDATA_LEVEL) == 1 ) {
		repeat gdata(GDATA_CLIENT)
			if ( qdata(QDATA_MAP, cnt) == gdata(GDATA_AREA) ) {
				if ( qdata(QDATA_CLIENT, cnt) == tc ) {
					rq = cnt
					f = 1
					break
				}
			}
		loop
	}
	if ( f == 1 ) {
		repeat gdata(GDATA_CLIENT)
			if ( qdata(QDATA_EXIST, cnt) == QUEST_TYPE_NONE ) {
				continue
			}
			if ( qdata(QDATA_STATUS, cnt) != QUEST_STATE_ONGOING ) {
				continue
			}
			if ( qdata(QDATA_TYPE, cnt) == QUEST_SUBTYPE_DELIVER ) {
				if ( qdata(QDATA_DEST_CLIENT, cnt) == rq ) {
					inv_getheader 0
					p = qdata(QDATA_DEST_ITEM, cnt)
					deliver = cnt
					repeat invrange, invhead
						if ( inv(INV_ITEM_NUM, cnt) == 0 ) {
							continue
						}
						if ( inv(INV_ITEM_ID, cnt) == p ) {
							deliver(1) = cnt
							break
						}
					loop
				}
			}
		loop
		if ( qdata(QDATA_STATUS, rq) == QUEST_STATE_SUCCESS ) {
			val = 3
			gosub *talk_quest
			gosub *quest_success
		}
		else {
			if ( qdata(QDATA_TYPE, rq) == QUEST_SUBTYPE_SUPPLY & qdata(QDATA_STATUS, rq) == QUEST_STATE_ONGOING ) {
				supply = -1
				inv_getheader 0
				repeat invrange, invhead
					if ( inv(INV_ITEM_NUM, cnt) == 0 ) {
						continue
					}
					if ( ibit(ITEM_BIT_NO_DROP, cnt) ) {
						continue
					}
					if ( qdata(QDATA_EXIST, rq) == QUEST_TYPE_COOK ) {
						if ( refitem(inv(INV_ITEM_ID, cnt), DBSPEC_TYPE) == FILTER_ITEM_FOOD ) {
							if ( inv(INV_ITEM_PARAM1, cnt) / 1000 == qdata(QDATA_PARAM1, rq) ) {
								if ( inv(INV_ITEM_PARAM2, cnt) == qdata(QDATA_PARAM2, rq) ) {
									supply = cnt
									break
								}
							}
						}
					}
					if ( qdata(QDATA_EXIST, rq) == QUEST_TYPE_SUPPLY | qdata(QDATA_EXIST, rq) == QUEST_TYPE_COLLECT ) {
						if ( inv(INV_ITEM_ID, cnt) == qdata(QDATA_DEST_ITEM, rq) ) {
							supply = cnt
							break
						}
					}
				loop
				if ( supply != (-1) ) {
					chatList 26, lang(itemname(supply, 1) + "を納入する", "Here is the " + itemname(supply, 1) + " you wanted.")
				}
				else {
					chatList 24, lang("依頼について", "About the work.")
				}
			}
			else {
				if ( qdata(QDATA_EXIST, rq) != QUEST_TYPE_NONE ) {
					chatList 24, lang("依頼について", "About the work.")
				}
			}
		}
	}
	if ( deliver != (-1) & deliver(1) != (-1) ) {
		chatList 25, lang("配達物を渡す", "Here's your delivery.")
	}
	else {
		if ( cdata(CDATA_EMO_ICON, tc) == 22 + 100 ) {
			if ( qdata(QDATA_QUEST_TARGET, cdata(CDATA_QUEST_NPC, tc) - 1) != 0 ) {
				qdata(QDATA_QUEST_TARGET, cdata(CDATA_QUEST_NPC, tc) - 1) = 0
			}
		}
	}
	if ( gdata(GDATA_AREA) == AREA_HOME ) {
		if ( tc >= 57 ) {
			if ( cdata(CDATA_ROLE, tc) != ROLE_NONE ) {
				if ( cdata(CDATA_ROLE, tc) < ROLE_GUEST_BEGGAR | cdata(CDATA_ROLE, tc) >= MAX_ROLE_GUEST ) {
					if ( evid() == (-1) ) {
						chatList 44, lang("解雇する", "You are fired.")
					}
				}
			}
		}
	}
	if ( cdata(CDATA_ROLE, tc) == ROLE_SHOP_NOYEL ) {
		if ( gdata(GDATA_FLAG_SUB_MOTHER) == 1000 ) {
			rc = findchara(CREATURE_ID_PAELS_MOM_LILY)
			if ( rc != CHARA_PLAYER ) {
				if ( cdata(CDATA_EXIST, rc) == CHAR_STATE_ALIVE ) {
					chatList 52, lang("パエルの母を売る", "I want to sell Pael's mom.")
				}
			}
		}
	}
	if ( evochat == 0 ) {
		chatList 0, strbye
	}
	chatid = 0
	chatesc = 1
	gosub *chat_select
	if ( chatval == 10 | chatval == 11 ) {
		if ( cdata(CDATA_ROLE, tc) >= ROLE_SHOP_MIN & cdata(CDATA_ROLE, tc) < ROLE_GUEST_MIN | cdata(CDATA_ROLE, tc) == ROLE_GUEST_MERCHANT ) {
			if ( cdata(CDATA_KARMA, CHARA_PLAYER) < (-30) ) {
				if ( gdata(GDATA_AREA) != AREA_DERPHY ) {
					if ( gdata(GDATA_AREA) != AREA_HOME ) {
						if ( cbit(CHARA_BIT_INCOGNITO, CHARA_PLAYER) == 0 ) {
							chatMore lang("犯罪者に売る物はない" + _yo(), "I don't have business with criminals.")
							goto *chat_default
						}
					}
				}
			}
		}
	}
	if ( chatval == 1 ) {
		buff = ""
		goto *chat_default
	}
	if ( chatval == 10 ) {
		invctrl = 11
		invfile = cdata(CDATA_ROLE_FILE_ID, tc)
		gosub *shop
		screenupdate = -1
		gosub *screen_draw
		cs = 0
		buff = ""
		goto *chat_default
	}
	if ( chatval == 11 ) {
		invctrl = 12
		invfile = cdata(CDATA_ROLE_FILE_ID, tc)
		gosub *shop
		cc = CHARA_PLAYER
		screenupdate = -1
		gosub *screen_draw
		cs = 0
		buff = ""
		goto *chat_default
	}
	if ( chatval == 12 ) {
		goto *chat_invest
	}
	if ( chatval == 13 ) {
		if ( cdata(CDATA_GOLD, CHARA_PLAYER) < calcmealvalue() ) {
			buff = strnogold
			goto *chat_default
		}
		if ( cdata(CDATA_HUNGER, CHARA_PLAYER) >= 15000 ) {
			buff = lang("腹が減っているようにはみえない" + _yo(), "You don't seem that hungry.")
			goto *chat_default
		}
		snd SOUNDLIST_PAYGOLD1
		cdata(CDATA_GOLD, CHARA_PLAYER) -= calcmealvalue()
		snd SOUNDLIST_EAT1
		cdata(CDATA_HUNGER, CHARA_PLAYER) = 15000
		buff = lang(_dozo(), "Here you are.")
		txt lang("なかなか美味しかった。", "It was tasty."), lang("悪くない。", "Not bad at all."), lang("あなたは舌鼓をうった。", "You smack your lips.")
		gosub *eat_finish
		chara_anorexia 0
		goto *chat_default
	}
	if ( chatval == 83 ) {
		item_find ITEM_ID_BRONZE_COIN, 3, 1
		if ( stat != (-1) ) {
			ci = stat
			if ( inv(INV_ITEM_NUM, ci) >= 1 ) {
				if ( cdata(CDATA_HUNGER, CHARA_PLAYER) >= 15000 ) {
					buff = lang("腹が減っているようにはみえない" + _yo(), "You don't seem that hungry.")
					goto *chat_default
				}
				inv(INV_ITEM_NUM, ci)--
				snd SOUNDLIST_PAYGOLD1
				chatMore lang(_dozo(), "Here you are.")
				repeat MAX_CHARA_TOTAL
					if ( cdata(CDATA_EXIST, cnt) != CHAR_STATE_ALIVE ) {
						continue
					}
					if ( cnt >= MAX_CHARA_FOLLOWER ) {
						continue
					}
					tc = cnt
					if ( cdata(CDATA_CONDITION_SLEEP, tc) != 0 | cdata(CDATA_CONDITION_DIM, tc) >= 60 | cdata(CDATA_CONDITION_BLIND, tc) != 0 | cdata(CDATA_CONDITION_PARALYZE, tc) != 0 | cdata(CDATA_CONDITION_SUFFOCATION, tc) != 0 | cdata(CDATA_CONDITION_BRAINWASH, tc) != 0 ) {
						continue
					}
					if ( dist(cdata(CDATA_X, CHARA_PLAYER), cdata(CDATA_Y, CHARA_PLAYER), cdata(CDATA_X, tc), cdata(CDATA_Y, tc)) > sdataref(SKILL_DATAREF_TG_RANGE, SKILL_SPACT_CHEER) \ EXT_SDATAREF + 1 ) {
						continue
					}
					if ( fov_los(cdata(CDATA_X, CHARA_PLAYER), cdata(CDATA_Y, CHARA_PLAYER), cdata(CDATA_X, tc), cdata(CDATA_Y, tc)) == 0 ) {
						continue
					}
					if ( tc == CHARA_PLAYER | rnd(2) == 0 ) {
						snd SOUNDLIST_EAT1
					}
					cdata(CDATA_EMO_ICON, tc) = 6 + 100 * 3
					addbuff tc, BUFF_GROW_STRENGTH, 20, 1500
					addbuff tc, BUFF_GROW_CONSTITUTION, 20, 1500
					addbuff tc, BUFF_GROW_DEXTERITY, 20, 1500
					addbuff tc, BUFF_GROW_PERCEPTION, 20, 1500
					addbuff tc, BUFF_GROW_LEARNING, 20, 1500
					addbuff tc, BUFF_GROW_WILL, 20, 1500
					addbuff tc, BUFF_GROW_MAGIC, 20, 1500
					addbuff tc, BUFF_GROW_CHARISMA, 20, 1500
					addbuff tc, BUFF_GROW_SPEED, 20, 1500
					chara_anorexia tc
					if ( cdata(CDATA_HUNGER, tc) < 15000 ) {
						cdata(CDATA_HUNGER, tc) = 15000
					}
				loop
				txtef COLOR_GREEN
				txt lang("すごく美味しい！", "Delicious!"), lang("これは凄くいける！", "Gee what a good taste!"), lang("とてもいい味だ！", "It tasted pretty good!")
				cc = CHARA_PLAYER
				gosub *eat_finish
				goto *chat_end
			}
		}
		buff = lang("冷やかし" + _ka(1), "You kidding?")
		goto *chat_default
	}
	if ( chatval == 93 ) {
		if ( cdata(CDATA_GOLD, CHARA_PLAYER) < calcmealvalue() ) {
			buff = strnogold
			goto *chat_default
		}
		if ( cdata(CDATA_THIRST, CHARA_PLAYER) >= 15000 ) {
			buff = lang("喉が渇いているようにはみえない" + _yo(), "You don't seem that thirsty.")
			goto *chat_default
		}
		snd SOUNDLIST_PAYGOLD1
		cdata(CDATA_GOLD, CHARA_PLAYER) -= calcmealvalue()
		snd SOUNDLIST_DRINK1
		cdata(CDATA_THIRST, CHARA_PLAYER) = 15000
		if ( cdata(CDATA_HUNGER, CHARA_PLAYER) < 15000 - 1000 ) {
			cdata(CDATA_HUNGER, CHARA_PLAYER) += 1000
		}
		buff = lang(_dozo(), "Here you are.")
		txt lang("なかなか美味しかった。", "It was tasty."), lang("悪くない。", "Not bad at all."), lang("あなたは舌鼓をうった。", "You smack your lips.")
		goto *chat_default
	}
	if ( chatval == 94 ) {
		chatList 0, lang("別行動時は(遠距離)散策", "Roam while breaking apart.")
		chatList 1, lang("別行動時は(近距離)散策", "Dull while breaking apart.")
		chatList 2, lang("別行動時は直立不動で待機", "Stand while breaking apart.")
		chatList 3, lang("別行動時でも随行", "Follow while breaking apart.")
		chatList 4, lang("本職を優先", "Do main job while accompany.")
		chatList 5, lang("気が向いたら路上演奏", "Perform.")
		chatList 6, lang("たまに布教活動", "Propagate greatness of god.")
		chatList 7, lang("時々ダンス披露", "Dance.")
		chatList 8, lang("暇ならかたつむり駆除", "Exterminate snail.")
		chatList 9, lang("客を見繕って売春", "Do prostitution.")
		chatList 10, lang("街での訓練は禁止", "Do not train in town")
		txt lang("…どんな指示を出そうか？", "What kind of instructions should I give...?")
		gosub *chat_select
		if ( chatval >= 0 & chatval <= 10 ) {
			cdata(CDATA_AI_CALM, tc) = chatval + 1
			txt lang(cdatan(CDATAN_NAME, tc) + "に指示した。", "You instructed " + cdatan(CDATAN_NAME, tc) + ".")
		}
		goto *chat_default
	}
	if ( chatval == 85 ) {
		txtnew
		txt lang("誰を追い出す？", "Who do you drive out?")
		allyctrl = 3
		gosub *com_listNpc
		if ( stat == (-1) ) {
			goto *chat_end
		}
		hometc = stat
		txt lang(cdatan(CDATAN_NAME, hometc) + "を追い出した。", cdatan(CDATAN_NAME, hometc) + " " + is(tc) + " moved to the location.")
		snd SOUNDLIST_BASH1
		chara_vanquish hometc
		kaiwa = rnd(4)
		if ( kaiwa == 0 ) {
			txtef COLOR_YELLOW
			txt cdatan(CDATAN_NAME, tc) + lang("「お帰りはこちら！」", " " + cnvtalk("Go back!"))
		}
		if ( kaiwa == 1 ) {
			txtef COLOR_YELLOW
			txt cdatan(CDATAN_NAME, tc) + lang("「おうちかえれ！」", " " + cnvtalk("Go home!"))
		}
		if ( kaiwa == 2 ) {
			txtef COLOR_YELLOW
			txt cdatan(CDATAN_NAME, tc) + lang("「また会う日まで！」", " " + cnvtalk("Get out of here!"))
		}
		if ( kaiwa == 3 ) {
			txtef COLOR_YELLOW
			txt cdatan(CDATAN_NAME, tc) + lang("「またのご訪問を！」", " " + cnvtalk("See you again!"))
		}
		goto *chat_end
	}
	if ( chatval == 86 ) {
		value = (-cdata(CDATA_KARMA, CHARA_PLAYER) + 200) / 5 * (cdata(CDATA_DRUG_DEPENDENCE, CHARA_PLAYER) + 300)
		chatMore lang("…。", "...")
		buff = lang("うちのキセルは特別製" + _da() + "値段は" + value + "gold" + _ga(3) + "、欲しい" + _noka(1), "Our kiseru is special made. Price is " + value + "gp.")
		if ( cdata(CDATA_GOLD, CHARA_PLAYER) >= value ) {
			chatList 1, lang("欲しい…", "I want it...")
		}
		chatList 0, lang("いらない", "I'll pass.")
		chatesc = 1
		gosub *chat_select
		if ( chatval != 1 ) {
			buff = lang("冷やかし" + _ka(1), "You kidding?")
			goto *chat_default
		}
		snd SOUNDLIST_PAYGOLD1
		cdata(CDATA_GOLD, CHARA_PLAYER) -= value
		chatMore lang("お客さんも悪い人間" + _dana(), "Quite the bad egg, aren't you?")
		flt
		itemcreate -1, ITEM_ID_DRUG_KISERU, cdata(CDATA_X, CHARA_PLAYER), cdata(CDATA_Y, CHARA_PLAYER), 0
		txt_questitem
		goto *chat_end
	}
	if ( chatval >= 14 & chatval < 17 ) {
		if ( cdata(CDATA_GOLD, CHARA_PLAYER) < calcidentifyvalue(chatval - 14) ) {
			buff = strnogold
			goto *chat_default
		}
		inv_getheader 0
		p = 0
		repeat invrange, invhead
			if ( inv(INV_ITEM_NUM, cnt) == 0 ) {
				continue
			}
			if ( inv(INV_ITEM_KNOWN, cnt) < ITEM_KNOWN_FULL ) {
				p++
			}
		loop
		if ( p == 0 ) {
			buff = lang("鑑定するアイテムはないみたい" + _da(), "Your items have already been identified.")
			goto *chat_default
		}
		if ( chatval == 15 ) {
			cdata(CDATA_GOLD, CHARA_PLAYER) -= calcidentifyvalue(1)
			inv_getheader 0
			p = 0, 0
			p = 0, 0
			repeat invrange, invhead
				if ( inv(INV_ITEM_NUM, cnt) == 0 ) {
					continue
				}
				if ( inv(INV_ITEM_KNOWN, cnt) < ITEM_KNOWN_FULL ) {
					item_identify cnt, -1, 250
					item_stack CHARA_PLAYER, cnt, 1
					p(1)++
					if ( idtresult >= 3 ) {
						p++
					}
				}
			loop
			txt lang("" + p(1) + "個の未判明のアイテムのうち、" + p + "個のアイテムが完全に判明した。", "" + p + " out of " + p(1) + " unknown items are fully identified.")
			buff = lang("鑑定結果はこの通り" + _da(), "Here, I have finished identifying your stuff.")
		}
		else {
			if ( chatval == 14 ) {
				efp = 250
			}
			else {
				efp = 1000
			}
			efid = SKILL_SPELL_IDENTIFY
			gosub *effect
			if ( efcancel == 1 ) {
				buff = lang("冷やかし" + _ka(1), "You kidding?")
				goto *chat_default
			}
			if ( idtresult >= 3 ) {
				buff = lang("鑑定結果はこの通り" + _da(), "Here, I have finished identifying your stuff.")
			}
			else {
				buff = lang("さらなる知識を求めるのなら、調査する必要が" + _aru(), "You need to investigate it to gain more knowledge.")
			}
			cdata(CDATA_GOLD, CHARA_PLAYER) -= calcidentifyvalue(chatval - 14)
		}
		snd SOUNDLIST_PAYGOLD1
		goto *chat_default
	}
	if ( chatval == 17 ) {
		csctrl = 2
		goto *chat_train
	}
	if ( chatval == 18 ) {
		gosub *com_listAdv
		buff = lang("お目当ての情報は見つかった" + _kana(), "Done?")
		goto *chat_default
	}
	if ( chatval == 19 ) {
		if ( cdata(CDATA_GOLD, CHARA_PLAYER) < calcrestorecost() ) {
			buff = strnogold
			goto *chat_default
		}
		snd SOUNDLIST_PAYGOLD1
		cdata(CDATA_GOLD, CHARA_PLAYER) -= calcrestorecost()
		tcbk = tc
		repeat MAX_CHARA_FOLLOWER
			if ( cdata(CDATA_EXIST, cnt) != CHAR_STATE_ALIVE ) {
				continue
			}
			tc = cnt
			efid = SKILL_SPELL_RESTORE_BODY
			efp = 100
			gosub *effect
			txtmore
			efid = SKILL_SPELL_RESTORE_SPIRIT
			efp = 100
			gosub *effect
		loop
		tc = tcbk
		gosub *chat_refresh
		buff = lang("治療が完了し" + _ta(), "Treatment done. Take care!")
		goto *chat_default
	}
	if ( chatval == 20 ) {
		invsubroutine = 1
		inv_getheader tc
		repeat invrange, invhead
			if ( inv(INV_ITEM_NUM, cnt) != 0 ) {
				inv(INV_ITEM_KNOWN, cnt) = ITEM_KNOWN_FULL
			}
		loop
		invctrl = 20, 0
		gosub *com_inventory
		if ( stat == 0 ) {
			buff = lang("冷やかし" + _ka(1), "You kidding?")
			goto *chat_default
		}
		buff = lang(_thanks(2), "Thanks!")
		goto *chat_default
	}
	if ( chatval == 21 | chatval == 22 ) {
		if ( gdata(GDATA_RIDER) != 0 ) {
			cell_findspace cdata(CDATA_X, CHARA_PLAYER), cdata(CDATA_Y, CHARA_PLAYER), 1
			if ( stat == 0 ) {
				txt lang("降りるスペースがない。", "There's no place to get off.")
				goto *chat_end
			}
			cell_setchara gdata(GDATA_RIDER), rtval, rtval(1)
			txt lang(name(gdata(GDATA_RIDER)) + "から降りた。", "You dismount from " + name(gdata(GDATA_RIDER)) + ".")
			ride_end
		}
		if ( cdata(CDATA_IN_TAGTEAM, CHARA_PLAYER) != 0 ) {
			cell_findspace cdata(CDATA_X, CHARA_PLAYER), cdata(CDATA_Y, CHARA_PLAYER), 1
			if ( stat == 0 ) {
				txt lang("タッグを解散するスペースがない。", "There's not enough space to dissolve the tag-team.")
				goto *chat_end
			}
			ttc = cdata(CDATA_TAGTEAM_PARTNER, CHARA_PLAYER)
			cell_setchara ttc, rtval, rtval(1)
			tag_end 0
		}
		gdata(GDATA_QUEST_FAME) = calcfame(0, (220 - gdata(GDATA_RANK_ARENA) / 50) * (100 + limit(adata(ADATA_ARENA_WIN, gdata(GDATA_AREA)), 0, cdata(CDATA_LEVEL, CHARA_PLAYER))) / 100 + 2)
		listmax = 0
		randomize adata(ADATA_ARENA_RENEW1, gdata(GDATA_AREA))
		if ( chatval == 21 ) {
			if ( adata(ADATA_ARENA_RENEW1, gdata(GDATA_AREA)) > gdata(GDATA_HOUR) + gdata(GDATA_DAY) * 24 + gdata(GDATA_MONTH) * 24 * 30 + gdata(GDATA_YEAR) * 24 * 30 * 12 ) {
				buff = lang("残念だが、今日の試合はもう終了し" + _ta(), "The game is over today. Come again tomorrow.")
				goto *chat_default
			}
			randomize adata(ADATA_RANDOM_SEED, gdata(GDATA_AREA))
			exrand_randomize adata(ADATA_RANDOM_SEED, gdata(GDATA_AREA))
			repeat 50
				arenaop = 0, (100 - gdata(GDATA_RANK_ARENA) / 100) / 3 + 1, 3
				if ( gdata(GDATA_RANK_ARENA) / 100 < 30 ) {
					arenaop(2) = 4
				}
				if ( gdata(GDATA_RANK_ARENA) / 100 < 10 ) {
					arenaop(2) = 5
				}
				if ( gdata(GDATA_RANK_ARENA) / 100 == 1 ) {
					arenaop(1) += adata(ADATA_ARENA_WIN, gdata(GDATA_AREA))
				}
				minlevel = limit(arenaop(1) / 3 * 2, 1, 150)
				flt arenaop(1)
				fixlv = arenaop(2)
				characreate MAX_CHARA_NC, CREATURE_ID_BUG, -3, 0
				if ( cmshade ) {
					continue
				}
				if ( cdata(CDATA_ID, rc) == CREATURE_ID_PASCAL ) {
					continue
				}
				if ( cdata(CDATA_ID, rc) == CREATURE_ID_WING_SNAIL ) {
					continue
				}
				if ( cdata(CDATA_ID, rc) == CREATURE_ID_MURDER_KNIGHT ) {
					continue
				}
				if ( cdata(CDATA_ID, rc) == CREATURE_ID_LITYOU ) {
					continue
				}
				if ( cdata(CDATA_ID, rc) == CREATURE_ID_MAD_SCIENTIST ) {
					continue
				}
				if ( cdata(CDATA_ID, rc) == CREATURE_ID_ISCA_THE_FALLEN_ANGEL ) {
					continue
				}
				if ( cdata(CDATA_ID, rc) == CREATURE_ID_DUNGEON_CLEANER ) {
					continue
				}
				if ( cdata(CDATA_ID, rc) == CREATURE_ID_GODA_THE_CAPTAIN_OF_ORC ) {
					continue
				}
				if ( cdata(CDATA_LEVEL, rc) < minlevel ) {
					continue
				}
				if ( cdata(CDATA_RELATION_ORG, rc) != (-3) ) {
					continue
				}
				break
			loop
			arenaop(1) = cdata(CDATA_ID, rc)
			if ( gdata(GDATA_RANK_ARENA) / 100 == 1 & adata(ADATA_ARENA_WIN, gdata(GDATA_AREA)) >= 29 ) {
				chatMore lang("ようこそアリーナのチャンピオン！" + _kimi(3) + "と戦うため、強力な挑戦者がやってきている" + _yo(2), "Welcome! A powerful challenger has come to fight with you!")
			}
			buff = lang("今日の対戦相手は" + refchara(cdata(CDATA_ID, rc), DBSPEC_CHARA_NAME_ORG, 1) + _da() + "挑戦する" + _noka(1), "You got " + cdatan(CDATAN_NAME, rc) + " today. What'ya say?")
		}
		else {
			if ( adata(ADATA_ARENA_RENEW2, gdata(GDATA_AREA)) > gdata(GDATA_HOUR) + gdata(GDATA_DAY) * 24 + gdata(GDATA_MONTH) * 24 * 30 + gdata(GDATA_YEAR) * 24 * 30 * 12 ) {
				buff = lang("残念だが、今日の試合はもう終了し" + _ta(), "The game is over today. Come again tomorrow.")
				goto *chat_default
			}
			arenaop = 1, (100 - gdata(GDATA_RANK_ARENA) / 100) / 2 + 1
			if ( gdata(GDATA_RANK_ARENA) / 100 == 1 ) {
				arenaop(1) += adata(ADATA_ARENA_WIN, gdata(GDATA_AREA))
			}
			if ( gdata(GDATA_RANK_ARENA) / 100 == 1 & adata(ADATA_ARENA_WIN, gdata(GDATA_AREA)) >= 29 ) {
				chatMore lang("ようこそアリーナのチャンピオン！" + _kimi(3) + "と戦うため、強力な挑戦者たちがやってきている" + _yo(2), "Welcome! Powerful challengers have come to fight with you!")
			}
			buff = lang("対戦相手はレベル" + arenaop(1) + "の相手複数" + _da() + "挑戦する" + _noka(1), "Your play is a group of monster around level " + arenaop(1) + ". Sounds easy huh?")
		}
		chatList 1, lang("挑戦する", "Alright.")
		chatList 0, lang("やめる", "I'll pass.")
		chatesc = 1
		gosub *chat_select
		if ( chatval != 1 ) {
			buff = lang("用があるときは声をかけて" + _kure(), "Alright. Call me if you changed your mind.")
			goto *chat_default
		}
		if ( gdata(GDATA_FLAG_DUEL_TARGET) > 0 ) {
			snd SOUNDLIST_FAIL1
			txt_duel2
			goto *chat_end
		}
		if ( arenaop == 0 ) {
			adata(ADATA_ARENA_RENEW1, gdata(GDATA_AREA)) = gdata(GDATA_HOUR) + gdata(GDATA_DAY) * 24 + gdata(GDATA_MONTH) * 24 * 30 + gdata(GDATA_YEAR) * 24 * 30 * 12 + 24
		}
		if ( arenaop == 1 ) {
			adata(ADATA_ARENA_RENEW2, gdata(GDATA_AREA)) = gdata(GDATA_HOUR) + gdata(GDATA_DAY) * 24 + gdata(GDATA_MONTH) * 24 * 30 + gdata(GDATA_YEAR) * 24 * 30 * 12 + 24
		}
		gdata(GDATA_QUEST) = QUEST_SUBTYPE_ELIMINATE, 1, 0, 1
		gdata(GDATA_RETURN_AREA) = gdata(GDATA_AREA), gdata(GDATA_LEVEL), cdata(CDATA_X, CHARA_PLAYER), cdata(CDATA_Y, CHARA_PLAYER)
		gdata(GDATA_TELEPORT_AREA) = AREA_ARENA
		gdata(GDATA_TELEPORT_LEVEL) = 1
		levelexitby = 2
		chatteleport = 1
		goto *chat_end
	}
	if ( chatval == 40 | chatval == 41 | chatval == 49 ) {
		arenaimport = 0
		gdata(GDATA_QUEST_FAME) = calcfame(0, (220 - gdata(GDATA_RANK_PET_ARENA) / 50) * (50 + limit(adata(ADATA_PET_ARENA_WIN, gdata(GDATA_AREA)), 0, 50)) / 100 + 2)
		if ( chatval == 49 ) {
			comctrl = 1
			gosub *com_import
			if ( stat == 0 ) {
				buff = lang("用があるときは声をかけて" + _kure(), "Alright. Call me if you changed your mind.")
				goto *chat_default
			}
			arenaimport = 1
		}
		listmax = 0
		if ( chatval == 40 ) {
			arenaop = 0, 1, (100 - gdata(GDATA_RANK_PET_ARENA) / 100) / 3 * 2 + 3
			if ( gdata(GDATA_RANK_PET_ARENA) / 100 == 1 ) {
				arenaop(2) += adata(ADATA_PET_ARENA_WIN, gdata(GDATA_AREA))
			}
			if ( gdata(GDATA_RANK_PET_ARENA) / 100 == 1 & adata(ADATA_PET_ARENA_WIN, gdata(GDATA_AREA)) >= 29 ) {
				chatMore lang("ようこそペットの王！" + _kimi(3) + "のペットと戦うため、強力な挑戦者がやってきている" + _yo(2), "Welcome! A powerful challenger has come to fight with your pet!")
			}
			buff = lang("一対一の戦いで、対戦相手はレベル" + arenaop(2) + "の相手" + _da() + "挑戦する" + _noka(1), "The opponent is around level " + arenaop(2) + ". Want to give it a try?")
		}
		if ( chatval == 41 ) {
			arenaop = 0, 2, (100 - gdata(GDATA_RANK_PET_ARENA) / 100) / 2 + 1
			arenaop(1) = rnd(9 - 1) + 2
			if ( gdata(GDATA_RANK_PET_ARENA) / 100 == 1 ) {
				arenaop(2) += adata(ADATA_PET_ARENA_WIN, gdata(GDATA_AREA))
			}
			if ( gdata(GDATA_RANK_PET_ARENA) / 100 == 1 & adata(ADATA_PET_ARENA_WIN, gdata(GDATA_AREA)) >= 29 ) {
				chatMore lang("ようこそペットの王！" + _kimi(3) + "のペットと戦うため、強力な挑戦者がやってきている" + _yo(2), "Welcome! A powerful challenger has come to fight with your pet!")
			}
			buff = lang("" + arenaop(1) + "人同士のチームバトルで、対戦相手はレベル" + arenaop(2) + "の相手複数" + _da() + "挑戦する" + _noka(1), "It's a " + arenaop(1) + " vs " + arenaop(1) + " match. The opponent's group is formed by the pets less than " + arenaop(2) + " levels. What you say?")
		}
		if ( chatval == 49 ) {
			arenaop = 1, 2, rtval(1)
			enemylv = rtval(1)
			arenaop(1) = rtval
			buff = lang("" + arenaop(1) + "人同士のチームバトルで、対戦相手はレベル" + arenaop(2) + "以下の相手複数" + _da() + "挑戦する" + _noka(1), "It's a " + arenaop(1) + " vs " + arenaop(1) + " match. The opponent's group is formed by the pets less than " + arenaop(2) + " levels. What you say?")
		}
		chatList 1, lang("挑戦する", "I'll send my pet.")
		chatList 0, lang("やめる", "I'll pass.")
		chatesc = 1
		gosub *chat_select
		if ( chatval != 1 ) {
			buff = lang("用があるときは声をかけて" + _kure(), "Alright. Call me if you changed your mind.")
			goto *chat_default
		}
		if ( gdata(GDATA_FLAG_DUEL_TARGET) > 0 ) {
			snd SOUNDLIST_FAIL1
			txt_duel2
			goto *chat_end
		}
		dim followerexist, MAX_CHARA_FOLLOWER
		repeat MAX_CHARA_FOLLOWER
			followerexist(cnt) = cdata(CDATA_EXIST, cnt)
		loop
		allyctrl = 2
		gosub *com_ally
		if ( stat == (-1) ) {
			buff = lang("用があるときは声をかけて" + _kure(), "Alright. Call me if you changed your mind.")
			goto *chat_default
		}
		gdata(GDATA_QUEST) = QUEST_SUBTYPE_DELIVER, 0, 0, 1
		gdata(GDATA_RETURN_AREA) = gdata(GDATA_AREA), gdata(GDATA_LEVEL), cdata(CDATA_X, CHARA_PLAYER), cdata(CDATA_Y, CHARA_PLAYER)
		gdata(GDATA_TELEPORT_AREA) = AREA_PET_ARENA
		gdata(GDATA_TELEPORT_LEVEL) = 1
		levelexitby = 2
		chatteleport = 1
		goto *chat_end
	}
	if ( chatval == 42 ) {
		buff = lang("現在は" + adata(ADATA_PET_ARENA_WIN, gdata(GDATA_AREA)) + "連勝中" + _da() + "5連勝,20連勝,100連勝毎にボーナスを与え" + _ru(), "Your winning streak has reached " + adata(ADATA_PET_ARENA_WIN, gdata(GDATA_AREA)) + " matches now. Keep the audience excited. You get nice bonus at every 5th and 20th wins in a row.")
		goto *chat_default
	}
	if ( chatval == 23 ) {
		buff = lang("現在は" + adata(ADATA_ARENA_WIN, gdata(GDATA_AREA)) + "連勝中" + _da() + "5連勝,20連勝毎,100連勝毎にボーナスを与え" + _ru(), "Your winning streak has reached " + adata(ADATA_ARENA_WIN, gdata(GDATA_AREA)) + " matches now. Keep the audience excited. You get nice bonus at every 5th and 20th wins in a row.")
		goto *chat_default
	}
	if ( chatval == 24 ) {
		goto *chat_quest
	}
	if ( chatval == 25 ) {
		gosub *chara_adjustInv
		ti = stat
		item_copy deliver(1), ti
		inv(INV_ITEM_NUM, ti) = 1
		ci = ti
		rc = tc
		gosub *chara_item
		rq = deliver
		inv(INV_ITEM_NUM, deliver(1))--
		txt lang(itemname(deliver(1), 1) + "を手渡した。", "You hand over " + itemname(deliver(1), 1) + ".")
		val = 3
		gosub *talk_quest
		gosub *quest_success
		gosub *calcBurdenPc
		goto *chat_default
	}
	if ( chatval == 26 ) {
		gosub *chara_adjustInv
		ti = stat
		item_copy supply, ti
		inv(INV_ITEM_NUM, ti) = 1
		cbitmod CHARA_BIT_POISON_FLAG, tc, 1
		ci = ti
		rc = tc
		gosub *chara_item
		inv(INV_ITEM_NUM, supply)--
		txt lang(itemname(supply, 1) + "を手渡した。", "You hand over " + itemname(supply, 1) + ".")
		val = 3
		gosub *talk_quest
		gosub *quest_success
		gosub *calcBurdenPc
		goto *chat_default
	}
	if ( chatval == 30 ) {
		csctrl = 3
		goto *chat_train
	}
	if ( chatval == 31 ) {
		listmax = 0
		buff = lang(_rob(2), "Oh crap. Another bandit trying to spoil my business! Form up, mercenaries.")
		chatList 1, lang("神に祈れ", "Pray to your god.")
		chatList 0, lang("いや、冗談です", "W-Wait! I was just kidding.")
		chatesc = 1
		gosub *chat_select
		if ( chatval != 1 ) {
			buff = lang("冷やかし" + _ka(1), "You kidding?")
			goto *chat_default
		}
		gohostile
		goto *chat_end
	}
	if ( chatval == 32 ) {
		listmax = 0
		p = itemfind(CHARA_PLAYER, ITEM_ID_WALLET)
		if ( p == (-1) ) {
			p = itemfind(CHARA_PLAYER, ITEM_ID_SUITCASE)
		}
		inv(INV_ITEM_NUM, p)--
		if ( inv(INV_ITEM_PARAM1, p) == 0 ) {
			buff = lang("む…中身が空っぽ" + _dana(2), "Hmm! It's empty!")
			chatList 0, lang("しまった…", "Oops...!")
			chatesc = 1
			gosub *chat_select
			modkarma CHARA_PLAYER, -5
		}
		else {
			buff = lang("わざわざ落し物を届けてくれた" + _noka() + _kimi(3) + "は市民の模範" + _da() + _thanks(), "How nice of you to take the trouble to bring it. You're a model citizen indeed!")
			chatList 0, lang("当然のことだ", "It's nothing.")
			chatesc = 1
			gosub *chat_select
			modkarma CHARA_PLAYER, 5
			gdata(GDATA_WALLET)++
			if ( gdata(GDATA_WALLET) >= 10 ) {
				chatMore lang("む、また" + _kimi(3) + _ka() + "随分と頻繁に財布を見つけられるもの" + _dana(), "Oh, it's you again? How come you find the wallets so often?")
				buff = lang("（…あやしい）", "(...suspicious)")
				chatList 0, lang("ぎくっ", "I really found it on the street!")
				chatesc = 1
				gosub *chat_select
				modkarma CHARA_PLAYER, -5
			}
		}
		gosub *calcBurdenPc
		buff = ""
		goto *chat_default
	}
	if ( chatval == 33 ) {
		allyctrl = 0
		gosub *com_ally
		if ( stat != (-1) ) {
			rc = stat
			if ( cdata(CDATA_EXIST, rc) == CHAR_STATE_ALIVE ) {
				buff = lang("そいつは呼び戻す必要はないよう" + _da(), "Huh? You don't need to do that.")
				goto *chat_default
			}
			if ( cdata(CDATA_EXIST, rc) == CHAR_STATE_ALLY_DEAD ) {
				if ( cdata(CDATA_CAN_REVIVE, rc) > 2 ) {
					cdata(CDATA_CAN_REVIVE, rc) = 0
				}
				if ( cdata(CDATA_CAN_REVIVE, rc) <= 0 ) {
					buff = lang("まだこっちに来ていない" + _na() + "一度、野外の空気でも吸ってきたらどう" + _kana(), "It can not be revived until you switch area.")
					goto *chat_default
				}
			}
			f = get_freeallyne()
			if ( f == 0 ) {
				txt lang("仲間の最大数に達しているため、呼び戻せない。", "Your party is full. You can't invite anyone else.")
				goto *chat_default
			}
			listmax = 0
			buff = lang("そいつを呼び戻すには、" + calcresurrectvalue(rc) + strgold + "必要" + _da(), "Alright. We took good care of your pet. It will cost you " + calcresurrectvalue(rc) + "gp.")
			if ( cdata(CDATA_GOLD, CHARA_PLAYER) >= calcresurrectvalue(rc) ) {
				chatList 1, lang("呼び戻す", "I'll pay.")
			}
			chatList 0, lang("やめる", "Never mind.")
			chatesc = 1
			gosub *chat_select
			if ( chatval == 1 ) {
				snd SOUNDLIST_PAYGOLD1
				cdata(CDATA_GOLD, CHARA_PLAYER) -= calcresurrectvalue(rc)
				buff = lang("(バーテンが店の奥から" + name(rc) + "を連れてきた)" + _dozo(), "(" + name(tc) + " brings " + name(rc) + " from the stable.) There you go.")
				cdata(CDATA_CAN_REVIVE, rc)--
				gosub *resurrect_ally
			}
			else {
				buff = lang("冷やかし" + _ka(1), "You kidding?")
			}
		}
		else {
			buff = lang("冷やかし" + _ka(1), "You kidding?")
		}
		goto *chat_default
	}

	/********** ANNA CUSTOM - BEGINNING **********/

	if ( chatval == 998 ) {
		gosub *PetMenu
		goto *chat_end
	}

	/********** ANNA CUSTOM - ENDING **********/

	if ( chatval == 34 ) {
		chatMore lang("(あなたは、" + name(tc) + "に街で待っているように指示した)", "(You order " + name(tc) + " to wait in town.)")
		map(cdata(CDATA_X, tc), cdata(CDATA_Y, tc), 1) = 0
		cdata(CDATA_EXIST, tc) = CHAR_STATE_ALLY_WAIT
		cdata(CDATA_AREA, tc) = AREA_NONE
		if ( cdata(CDATA_IN_TAGTEAM, tc) == (-1) ) {
			ttc = cdata(CDATA_TAGTEAM_PARTNER, tc)
			cell_setchara ttc, cdata(CDATA_X, tc), cdata(CDATA_Y, tc)
			tag_end tc
		}
		if ( cdata(CDATA_IN_TAGTEAM, tc) == 1 ) {
			ttc = cdata(CDATA_TAGTEAM_PARTNER, tc)
			tag_end tc
			cell_movechara ttc, cdata(CDATA_X, ttc), cdata(CDATA_Y, ttc)
		}
		goto *chat_end
	}
	if ( chatval == 66 ) {
		txt lang(name(tc) + "は冒険の途中で集めたマテリアルを手渡してきた。", name(tc) + " handed over the materials " + he(tc) + " has gathered during your adventures.")
		customtalk tc, DBMODE_FLAVOR_MATERIAL
		gosub *convert_word
		msg_halt
		snd SOUNDLIST_ALERT1
		snd SOUNDLIST_ALERT1
		snd SOUNDLIST_ALERT1
		m1 = 0
		m2 = 0
		m3 = 0
		m4 = 0
		m5 = 0

		repeat 500
			if ( cdata(CDATA_MATERIAL1_COUNTER, tc) < 40 ) {
				break
			}
			if ( cdata(CDATA_MATERIAL1_COUNTER, tc) >= 40 ) {
				matgetmain MATERIAL_PEBBLE, 1, 6
				cdata(CDATA_MATERIAL1_COUNTER, tc) -= 40
				m1++
			}
			if ( cdata(CDATA_MATERIAL1_COUNTER, tc) >= 100 ) {
				matgetmain MATERIAL_FINE_STONE, 1, 6
				cdata(CDATA_MATERIAL1_COUNTER, tc) -= 100
				m2++
			}
			if ( cdata(CDATA_MATERIAL1_COUNTER, tc) >= 120 ) {
				matgetmain MATERIAL_ETHER_FRAGMENT, 1, 6
				cdata(CDATA_MATERIAL1_COUNTER, tc) -= 120
				m3++
			}
			if ( cdata(CDATA_MATERIAL1_COUNTER, tc) >= 150 ) {
				matgetmain MATERIAL_ELEMENT_FRAGMENT, 1, 6
				cdata(CDATA_MATERIAL1_COUNTER, tc) -= 150
				m4++
			}
			if ( cdata(CDATA_MATERIAL1_COUNTER, tc) >= 150 ) {
				matgetmain MATERIAL_CHAOS_STONE, 1, 6
				cdata(CDATA_MATERIAL1_COUNTER, tc) -= 150
				m5++
			}
		loop

		if ( m1 > 0 ) {
			txtef COLOR_BROWN
			txt lang("マテリアル:石ころを" + m1 + "個受け取った。", "You get " + m1 + " Pebble.")
		}
		if ( m2 > 0 ) {
			txtef COLOR_BROWN
			txt lang("マテリアル:上等な石を" + m2 + "個受け取った。", "You get " + m2 + " Fine stone.")
		}
		if ( m3 > 0 ) {
			txtef COLOR_BROWN
			txt lang("マテリアル:エーテルの欠片を" + m3 + "個受け取った。", "You get " + m3 + " Ether fragment.")
		}
		if ( m4 > 0 ) {
			txtef COLOR_BROWN
			txt lang("マテリアル:風切石を" + m4 + "個受け取った。", "You get " + m4 + " Element fragment.")
		}
		if ( m5 > 0 ) {
			txtef COLOR_BROWN
			txt lang("マテリアル:混沌の石を" + m5 + "個受け取った。", "You get " + m5 + " Chaos stone.")
		}

		m1 = 0
		m2 = 0
		m3 = 0
		m4 = 0
		m5 = 0
		m6 = 0
		m7 = 0

		repeat 500
			if ( cdata(CDATA_MATERIAL2_COUNTER, tc) < 20 ) {
				break
			}
			if ( cdata(CDATA_MATERIAL2_COUNTER, tc) >= 20 ) {
				matgetmain MATERIAL_WATERDROP, 1, 6
				cdata(CDATA_MATERIAL2_COUNTER, tc) -= 20
				m1++
			}
			if ( cdata(CDATA_MATERIAL2_COUNTER, tc) >= 60 ) {
				matgetmain MATERIAL_HOT_WATER, 1, 6
				cdata(CDATA_MATERIAL2_COUNTER, tc) -= 40
				m2++
			}
			if ( cdata(CDATA_MATERIAL2_COUNTER, tc) >= 80 ) {
				matgetmain MATERIAL_SNOW, 1, 6
				cdata(CDATA_MATERIAL2_COUNTER, tc) -= 80
				m3++
			}
			if ( cdata(CDATA_MATERIAL2_COUNTER, tc) >= 100 ) {
				matgetmain MATERIAL_WITCHS_TEAR, 1, 6
				cdata(CDATA_MATERIAL2_COUNTER, tc) -= 100
				m4++
			}
			if ( cdata(CDATA_MATERIAL2_COUNTER, tc) >= 120 ) {
				matgetmain MATERIAL_ANGELS_TEAR, 1, 6
				cdata(CDATA_MATERIAL2_COUNTER, tc) -= 120
				m5++
			}
		loop

		if ( m1 > 0 ) {
			txtef COLOR_SKY_BLUE
			txt lang("マテリアル:水滴を" + m1 + "個受け取った。", "You get " + m1 + " Waterdrop.")
		}
		if ( m2 > 0 ) {
			txtef COLOR_SKY_BLUE
			txt lang("マテリアル:お湯を" + m2 + "個受け取った。", "You get " + m2 + " Hot water.")
		}
		if ( m3 > 0 ) {
			txtef COLOR_SKY_BLUE
			txt lang("マテリアル:雪を" + m3 + "個受け取った。", "You get " + m3 + " Snow.")
		}
		if ( m4 > 0 ) {
			txtef COLOR_SKY_BLUE
			txt lang("マテリアル:魔女の涙を" + m4 + "個受け取った。", "You get " + m4 + " Witch's tear.")
		}
		if ( m5 > 0 ) {
			txtef COLOR_SKY_BLUE
			txt lang("マテリアル:天使の涙を" + m5 + "個受け取った。", "You get " + m5 + " Angel's tear.")
		}

		m1 = 0
		m2 = 0
		m3 = 0
		m4 = 0
		m5 = 0

		repeat 500
			if ( cdata(CDATA_MATERIAL3_COUNTER, tc) < 30 ) {
				break
			}
			if ( cdata(CDATA_MATERIAL3_COUNTER, tc) >= 30 ) {
				matgetmain MATERIAL_STICK, 1, 6
				cdata(CDATA_MATERIAL3_COUNTER, tc) -= 30
				m1++
			}
			if ( cdata(CDATA_MATERIAL3_COUNTER, tc) >= 100 ) {
				matgetmain MATERIAL_BRANCH, 1, 6
				cdata(CDATA_MATERIAL3_COUNTER, tc) -= 40
				m2++
			}
			if ( cdata(CDATA_MATERIAL3_COUNTER, tc) >= 120 ) {
				matgetmain MATERIAL_HOLY_WEED, 1, 6
				cdata(CDATA_MATERIAL3_COUNTER, tc) -= 120
				m3++
			}
			if ( cdata(CDATA_MATERIAL3_COUNTER, tc) >= 130 ) {
				matgetmain MATERIAL_SHINING_WEED, 1, 6
				cdata(CDATA_MATERIAL3_COUNTER, tc) -= 130
				m4++
			}
			if ( cdata(CDATA_MATERIAL3_COUNTER, tc) >= 150 ) {
				matgetmain MATERIAL_SAP_OF_YAGGDRASIL, 1, 6
				cdata(CDATA_MATERIAL3_COUNTER, tc) -= 150
				m5++
			}
		loop

		if ( m1 > 0 ) {
			txtef COLOR_LIGHT_GREEN
			txt lang("マテリアル:杖を" + m1 + "個受け取った。", "You get " + m1 + " Stick.")
		}
		if ( m2 > 0 ) {
			txtef COLOR_LIGHT_GREEN
			txt lang("マテリアル:枝を" + m2 + "個受け取った。", "You get " + m2 + " Branch.")
		}
		if ( m3 > 0 ) {
			txtef COLOR_LIGHT_GREEN
			txt lang("マテリアル:聖なる草を" + m3 + "個受け取った。", "You get " + m3 + " Holy weed.")
		}
		if ( m4 > 0 ) {
			txtef COLOR_LIGHT_GREEN
			txt lang("マテリアル:ヒカリソウを" + m4 + "個受け取った。", "You get " + m4 + " Shining weed.")
		}
		if ( m5 > 0 ) {
			txtef COLOR_LIGHT_GREEN
			txt lang("マテリアル:世界樹の樹液を" + m5 + "個受け取った。", "You get " + m5 + " Sap of Yaggdrasil.")
		}

		m1 = 0
		m2 = 0
		m3 = 0
		m4 = 0
		m5 = 0

		repeat 500
			if ( cdata(CDATA_MATERIAL4_COUNTER, tc) < 40 ) {
				break
			}
			if ( cdata(CDATA_MATERIAL4_COUNTER, tc) >= 40 ) {
				matgetmain MATERIAL_HUMAN_GENE, 1, 6
				cdata(CDATA_MATERIAL4_COUNTER, tc) -= 40
				m1++
			}
			if ( cdata(CDATA_MATERIAL4_COUNTER, tc) >= 100 ) {
				matgetmain MATERIAL_TROLL_GENE, 1, 6
				cdata(CDATA_MATERIAL4_COUNTER, tc) -= 100
				m2++
			}
			if ( cdata(CDATA_MATERIAL4_COUNTER, tc) >= 120 ) {
				matgetmain MATERIAL_RABBITS_TAIL, 1, 6
				cdata(CDATA_MATERIAL4_COUNTER, tc) -= 120
				m3++
			}
			if ( cdata(CDATA_MATERIAL4_COUNTER, tc) >= 120 ) {
				matgetmain MATERIAL_WITCHS_EYE, 1, 6
				cdata(CDATA_MATERIAL4_COUNTER, tc) -= 120
				m4++
			}
			if ( cdata(CDATA_MATERIAL4_COUNTER, tc) >= 130 ) {
				matgetmain MATERIAL_FAIRY_DUST, 1, 6
				cdata(CDATA_MATERIAL4_COUNTER, tc) -= 130
				m5++
			}
		loop

		if ( m1 > 0 ) {
			txtef COLOR_PINK
			txt lang("マテリアル:ヒトの遺伝子を" + m1 + "個受け取った。", "You get " + m1 + " Human gene.")
		}
		if ( m2 > 0 ) {
			txtef COLOR_PINK
			txt lang("マテリアル:トロールの遺伝子を" + m2 + "個受け取った。", "You get " + m2 + " Troll gene.")
		}
		if ( m3 > 0 ) {
			txtef COLOR_PINK
			txt lang("マテリアル:ウサギの尻尾を" + m3 + "個受け取った。", "You get " + m3 + " Rabbit's tail.")
		}
		if ( m4 > 0 ) {
			txtef COLOR_PINK
			txt lang("マテリアル:魔女の瞳を" + m4 + "個受け取った。", "You get " + m4 + " Witch's eye.")
		}
		if ( m5 > 0 ) {
			txtef COLOR_PINK
			txt lang("マテリアル:フェアリーダストを" + m5 + "個受け取った。", "You get " + m5 + " Fairy dust.")
		}

		m1 = 0
		m2 = 0
		m3 = 0
		m4 = 0
		m5 = 0

		repeat 500
			if ( cdata(CDATA_MATERIAL5_COUNTER, tc) < 40 ) {
				break
			}
			if ( cdata(CDATA_MATERIAL5_COUNTER, tc) >= 40 ) {
				matgetmain MATERIAL_CLOTH, 1, 6
				cdata(CDATA_MATERIAL5_COUNTER, tc) -= 40
				m1++
			}
			if ( cdata(CDATA_MATERIAL5_COUNTER, tc) >= 50 ) {
				matgetmain MATERIAL_PAPER, 1, 6
				cdata(CDATA_MATERIAL5_COUNTER, tc) -= 50
				m2++
			}
			if ( cdata(CDATA_MATERIAL5_COUNTER, tc) >= 100 ) {
				matgetmain MATERIAL_YELLING_MADMAN, 1, 6
				cdata(CDATA_MATERIAL5_COUNTER, tc) -= 100
				m3++
			}
			if ( cdata(CDATA_MATERIAL5_COUNTER, tc) >= 120 ) {
				matgetmain MATERIAL_MAGIC_INK, 1, 6
				cdata(CDATA_MATERIAL5_COUNTER, tc) -= 120
				m4++
			}
			if ( cdata(CDATA_MATERIAL5_COUNTER, tc) >= 120 ) {
				matgetmain MATERIAL_MAGIC_MASS, 1, 6
				cdata(CDATA_MATERIAL5_COUNTER, tc) -= 120
				m5++
			}
			if ( cdata(CDATA_MATERIAL5_COUNTER, tc) >= 150 ) {
				matgetmain MATERIAL_GENERATOR, 1, 6
				cdata(CDATA_MATERIAL5_COUNTER, tc) -= 150
				m6++
			}
			if ( cdata(CDATA_MATERIAL5_COUNTER, tc) >= 150 ) {
				matgetmain MATERIAL_ELECTRICITY, 1, 6
				cdata(CDATA_MATERIAL5_COUNTER, tc) -= 150
				m7++
			}
		loop

		if ( m1 > 0 ) {
			txtef COLOR_YELLOW
			txt lang("マテリアル:布きれを" + m1 + "個受け取った。", "You get " + m1 + " Cloth.")
		}
		if ( m2 > 0 ) {
			txtef COLOR_YELLOW
			txt lang("マテリアル:紙を" + m2 + "個受け取った。", "You get " + m2 + " Paper.")
		}
		if ( m3 > 0 ) {
			txtef COLOR_YELLOW
			txt lang("マテリアル:わめく狂人を" + m3 + "個受け取った。", "You get " + m3 + " Yelling madman.")
		}
		if ( m4 > 0 ) {
			txtef COLOR_YELLOW
			txt lang("マテリアル:魔法のインクを" + m4 + "個受け取った。", "You get " + m4 + " Magic ink.")
		}
		if ( m5 > 0 ) {
			txtef COLOR_YELLOW
			txt lang("マテリアル:マジックマスを" + m5 + "個受け取った。", "You get " + m5 + " Magic mass.")
		}
		if ( m6 > 0 ) {
			txtef COLOR_YELLOW
			txt lang("マテリアル:生成機械を" + m6 + "個受け取った。", "You get " + m6 + " Generator.")
		}
		if ( m7 > 0 ) {
			txtef COLOR_YELLOW
			txt lang("マテリアル:電気を" + m7 + "個受け取った。", "You get " + m7 + " Electricity.")
		}

		m1 = 0
		m2 = 0
		m3 = 0
		m4 = 0
		m5 = 0
		m6 = 0
		m7 = 0
		customtalk tc, DBMODE_FLAVOR_DIALOG
		if ( stat ) {
			gosub *convert_word
		}
		goto *chat_default
	}
	if ( chatval == 76 ) {
		goto *evochat_portrait
	}
	if ( chatval == 77 ) {
		await 500
		txtef COLOR_GREEN
		txt lang("あなたと" + cdatan(CDATAN_NAME, tc) + "は二人だけの世界に突入した。", "You and " + cdatan(CDATAN_NAME, tc) + " entered a world only for the two of you.")
		music = MUSICLIST_MCWEDDING
		gosub *music_play
		await 500
		evochat = 1
		if ( gdata(GDATA_WEATHER) == WEATHER_RAIN ) {
			envwprev = 75 + 1
		}
		if ( gdata(GDATA_WEATHER) == WEATHER_HARD_RAIN ) {
			envwprev = 76 + 1
		}
		if ( gdata(GDATA_WEATHER) == WEATHER_ETHER ) {
			envwprev = 77 + 1
		}
		DSSTOP 7 + 6
		DSRELEASE 7 + 6
		DSSTOP 7 + 6 + 1
		DSRELEASE 7 + 6 + 1
		DSSTOP 7 + 6 + 2
		DSRELEASE 7 + 6 + 2
		DSSTOP 7 + 6 + 3
		DSRELEASE 7 + 6 + 3
		DSSTOP lpfilewind
		DSRELEASE lpfilewind
		goto *chat_default
	}
	if ( chatval == 78 ) {
		cdata(CDATA_EVOCHAT_POINTS, CHARA_PLAYER)--
		cdata(CDATA_EVOCHAT_POINTS, tc)++
		if ( rnd(cdata(CDATA_IMPRESSION, tc)) > 75 ) {
			cdata(CDATA_EVOCHAT_POINTS, tc)++
		}
		hyouzyou = 1
		cdata(CDATA_EMO_ICON, tc) = 6 + 100 * 3
		snd SOUNDLIST_ATK_MIND
		goto *chat_default
	}
	if ( chatval == 79 ) {
		cdata(CDATA_EVOCHAT_POINTS, CHARA_PLAYER)--
		if ( cdata(CDATA_MASTER_SERVANT2, tc) < 0 ) {
			if ( rnd(-cdata(CDATA_MASTER_SERVANT2, tc)) > rnd(5) ) {
				cdata(CDATA_EVOCHAT_POINTS, tc) += 2
			}
		}
		hyouzyou = 2
		cdata(CDATA_EMO_ICON, tc) = 26 + 100 * 3
		snd SOUNDLIST_FIZZLE
		goto *chat_default
	}
	if ( chatval == 80 ) {
		cdata(CDATA_EVOCHAT_POINTS, CHARA_PLAYER)--
		cdata(CDATA_EVOCHAT_POINTS, tc)++
		if ( rnd(cdata(CDATA_GOLD, tc) + 1) < 100000 ) {
			cdata(CDATA_EVOCHAT_POINTS, tc)++
		}
		cdata(CDATA_GOLD, CHARA_PLAYER) -= 100000
		cdata(CDATA_GOLD, tc) += 100000
		hyouzyou = 1
		cdata(CDATA_EMO_ICON, tc) = 6 + 100 * 3
		snd SOUNDLIST_GETGOLD1
		goto *chat_default
	}
	if ( chatval == 81 ) {
		gosub *music_play
		goto *chat_end
	}
	if ( chatval == 87 ) {
		redraw 0
		gosub *screen_draw
		gosub *screen_fade
		gsel 4
		pos 0, 0
		picload exedir + "graphic\\face1" + devfile + ".bmp", 1
		gsel 0
		evochat = 2
		hyouzyou = 5
		cdata(CDATA_EMO_ICON, tc) = 21 + 100 * 3
		snd SOUNDLIST_ATK_FIRE
		goto *chat_default
	}
	if ( chatval == 88 ) {
		hyouzyou = 0
		cdata(CDATA_EMO_ICON, cc) = 0
		snd SOUNDLIST_HEART1
		snd SOUNDLIST_HEART1
		snd SOUNDLIST_HEART1
		snd SOUNDLIST_HEART1
		goto *chat_default
	}
	if ( chatval == 89 ) {
		hyouzyou = 1
		cdata(CDATA_EMO_ICON, tc) = 6 + 100 * 3
		snd SOUNDLIST_INV
		await 500
		snd SOUNDLIST_INV
		goto *chat_default
	}
	if ( chatval == 90 ) {
		hyouzyou = 7
		cdata(CDATA_EMO_ICON, tc) = 17 + 100 * 3
		snd SOUNDLIST_WATER2
		await 400
		snd SOUNDLIST_WATER2
		goto *chat_default
	}
	if ( chatval == 91 ) {
		hyouzyou = 6
		cdata(CDATA_EMO_ICON, tc) = 18 + 100 * 3
		snd SOUNDLIST_DING3
		goto *chat_default
	}
	if ( chatval == 92 ) {
		cdata(CDATA_EVOCHAT_POINTS, CHARA_PLAYER) -= 4
		cdata(CDATA_EVOCHAT_POINTS, tc) += 8
		evochat = 1
		hyouzyou = 2
		if ( cdata(CDATA_EVOCHAT_POINTS, tc) >= 10 ) {
			cdata(CDATA_EMO_ICON, tc) = 17 + 100 * 3
		}
		else {
			cdata(CDATA_EMO_ICON, tc) = 26 + 100 * 3
		}
		snd SOUNDLIST_FIRE1
		goto *chat_default
	}
	if ( chatval == 67 ) {
		if ( cdata(CDATA_IMPRESSION, tc) >= 150 ) {
			chatMore lang("(" + name(tc) + "は当然だとばかりに胸を張った)", "(" + name(tc) + " puffs out " + his(tc) + " chest with pride.)")
		}
		if ( cdata(CDATA_IMPRESSION, tc) >= 100 & cdata(CDATA_IMPRESSION, tc) < 150 ) {
			chatMore lang("(" + name(tc) + "は少し照れくさそうだ)", "(" + name(tc) + " looks a little embarrassed.)")
		}
		if ( cdata(CDATA_IMPRESSION, tc) >= 0 & cdata(CDATA_IMPRESSION, tc) < 100 ) {
			chatMore lang("(" + name(tc) + "はちょっと驚いている)", "(" + name(tc) + " looks surprised.)")
		}
		if ( cdata(CDATA_IMPRESSION, tc) < 0 ) {
			chatMore lang("(" + name(tc) + "は気持ち悪そうに舌打ちした)", "(" + name(tc) + " clicks " + his(tc) + " tongue disapprovingly.)")
		}
		cdata(CDATA_PRECIOUS_ALLY, tc) = 1
		goto *chat_end
	}
	if ( chatval == 68 ) {
		if ( cdata(CDATA_IMPRESSION, tc) >= 150 ) {
			chatMore lang("(" + name(tc) + "は軽く絶望している…)", "(" + name(tc) + " looks depressed...)")
		}
		if ( cdata(CDATA_IMPRESSION, tc) >= 100 & cdata(CDATA_IMPRESSION, tc) < 150 ) {
			chatMore lang("(" + name(tc) + "は考え込んでいる…)", "(" + name(tc) + " appears to be lost in thought...)")
		}
		if ( cdata(CDATA_IMPRESSION, tc) >= 0 & cdata(CDATA_IMPRESSION, tc) < 100 ) {
			chatMore lang("(" + name(tc) + "は怯えている…)", "(" + name(tc) + " looks scared...)")
		}
		if ( cdata(CDATA_IMPRESSION, tc) < 0 ) {
			chatMore lang("(" + name(tc) + "は唾を吐き捨てた)", "(" + name(tc) + " spits on the ground.)")
		}
		cdata(CDATA_PRECIOUS_ALLY, tc) = 0
		goto *chat_end
	}
	if ( chatval == 71 ) {
		chatMore lang("(" + name(tc) + "に、足元のアイテムを我慢するよう指示した)", "(You instructed " + name(tc) + " to not pick up items off the ground.)")
		cdata(CDATA_TAMER_WHIP_PICKUP, tc) = 10
		goto *chat_end
	}
	if ( chatval == 72 ) {
		chatMore lang("(" + name(tc) + "に、足元のアイテムを我慢しなくていいことを伝えた)", "(You instructed " + name(tc) + " to do as they like with items on the ground.)")
		cdata(CDATA_TAMER_WHIP_PICKUP, tc) = 0
		goto *chat_end
	}
	if ( chatval == 35 ) {
		listmax = 0
		buff = lang("(" + name(tc) + "は悲しそうな目であなたを見ている。本当に縁を切る？)", "(" + name(tc) + " looks at you with a sad expression. Really abandon " + him(tc) + "? )")
		chatList 1, lang("切る", "Yes.")
		chatList 0, lang("やめる", "No.")
		chatesc = 1
		gosub *chat_select
		if ( chatval == 1 ) {
			txt lang("" + name(tc) + "と別れた…", "You abandoned " + name(tc) + "...")
			map(cdata(CDATA_X, tc), cdata(CDATA_Y, tc), 1) = 0
			if ( cdata(CDATA_IN_TAGTEAM, tc) == (-1) ) {
				ttc = cdata(CDATA_TAGTEAM_PARTNER, tc)
				cell_setchara ttc, cdata(CDATA_X, tc), cdata(CDATA_Y, tc)
				tag_end tc
			}
			if ( cdata(CDATA_IN_TAGTEAM, tc) == 1 ) {
				ttc = cdata(CDATA_TAGTEAM_PARTNER, tc)
				tag_end tc
				cell_movechara ttc, cdata(CDATA_X, ttc), cdata(CDATA_Y, ttc)
			}

			/********** ANNA CUSTOM - BEGINNING **********/

			AllyID = tc
			gosub *DeleteAIInfo

			/********** ANNA CUSTOM - ENDING **********/

			del_chara tc
			goto *chat_end
		}
		buff = ""
		goto *chat_default
	}
	if ( chatval == 36 | chatval == 57 ) {
		goto *chat_slave
	}
	if ( chatval == 96 ) {
		tcbk = tc
		invsubroutine = 1
		invctrl = 23, 4
		snd SOUNDLIST_INV
		gosub *com_inventory
		if ( stat == 1 ) {
			if ( ibit(ITEM_BIT_NO_DROP, ci) ) {
				snd SOUNDLIST_FAIL1
				txt_nodrop
				goto *chat_end
			}
			item_separate ci
			chatMore lang("なるほど…。", "I see...")
			chatMore lang("(" + name(tc) + "は" + ioriginalnameref(inv(INV_ITEM_ID, ci)) + "を使った芸を覚えた)", "(" + name(tc) + " learned a new trick with the " + ioriginalnameref(inv(INV_ITEM_ID, ci)) + ")")
			inv(INV_ITEM_NUM, ci)--
			gosub *calcBurdenPc
			snd SOUNDLIST_DING3
			skillexp SKILL_ATTR_PER, CHARA_PLAYER, 30
			skillexp SKILL_ATTR_PER, tc, 30
			modimp2 tc, 10
			cdata(CDATA_INTEREST, tc) -= 30
		}
		goto *chat_default
	}
	if ( chatval == 97 ) {
		listmax = 0
		buff = lang("(" + name(tc) + "は悲しそうな目であなたを見ている。本当に縁を切る？)", "(" + name(tc) + " looks at you sadly. Really abandon " + him(tc) + "? )")
		buff = lang("(" + name(tc) + "をあなたの神に贈る？)", "( Really offer " + him(tc) + " to your god? )")
		chatList 1, lang("贈る", "Yes.")
		chatList 0, lang("やめておく", "No.")
		chatesc = 1
		gosub *chat_select
		if ( chatval == 1 ) {
			txt lang("あなたは" + name(tc) + "を" + godname(cdata(CDATA_GOD, CHARA_PLAYER)) + "に捧げ、その名を唱えた。", "You offer " + name(tc) + " to " + godname(cdata(CDATA_GOD, CHARA_PLAYER)) + ".")
			if ( cdata(CDATA_IMPRESSION, tc) < 100 ) {
				chatMore lang("お先に！", "See you!")
			}
			if ( cdata(CDATA_IMPRESSION, tc) >= 100 & cdata(CDATA_IMPRESSION, tc) < 150 ) {
				chatMore lang("行ってくる" + _yo(3) + "。", "I'm going!")
			}
			if ( cdata(CDATA_IMPRESSION, tc) >= 150 ) {
				chatMore lang("また会おう" + _ne(3) + "。", "See you again!")
			}
			snd SOUNDLIST_OFFER2
			animeid = ANIMATION_OFFER
			tc = tc
			gosub *anime
			map(cdata(CDATA_X, tc), cdata(CDATA_Y, tc), 1) = 0
			txt lang(name(tc) + "はまばゆく輝いて消えた。", name(tc) + " glowed brightly and disappeared.")
			txtgod cdata(CDATA_GOD, CHARA_PLAYER), GOD_TEXT_OFFER_GREAT
			modpiety 15 * (cdata(CDATA_BRUSH_LEVEL, tc) + 1)
			skillexp SKILL_NORMAL_FAITH, CHARA_PLAYER, limit(cdata(CDATA_IMPRESSION, tc), 1, 300)

			/********** ANNA CUSTOM - BEGINNING **********/

			AllyID = tc
			gosub *DeleteAIInfo

			/********** ANNA CUSTOM - ENDING **********/

			del_chara tc
			goto *chat_end
		}
		buff = ""
		goto *chat_default
	}
	if ( chatval == 37 ) {
		allyctrl = 1
		gosub *com_ally
		if ( stat != (-1) ) {
			rc = stat
			listmax = 0
			buff = lang("なかなかの身体つき" + _dana() + calcslavevalue(rc) * 2 / 3 + strgold + "でどう" + _da(1), "Let me see... Hmm, this one's got a nice figure. I'll give you " + calcslavevalue(rc) * 2 / 3 + "gp.")
			chatList 1, lang("売る", "Deal.")
			chatList 0, lang("やめる", "No way.")
			chatesc = 1
			gosub *chat_select
			if ( chatval == 1 ) {

				/********** ANNA CUSTOM - BEGINNING **********/

				AllyID = rc
				gosub *DeleteAIInfo

				/********** ANNA CUSTOM - ENDING **********/

				txt lang(cdatan(CDATAN_NAME, rc) + "を売り飛ばした。", "You sell off " + cnven(cdatan(CDATAN_NAME, rc)) + ".")
				snd SOUNDLIST_GETGOLD1
				cdata(CDATA_GOLD, CHARA_PLAYER) += calcslavevalue(rc) * 2 / 3
				if ( cdata(CDATA_EXIST, rc) == CHAR_STATE_ALIVE ) {
					map(cdata(CDATA_X, rc), cdata(CDATA_Y, rc), 1) = 0
				}
				if ( cbit(CHARA_BIT_BODYGUARD, rc) == 1 ) {
					evadd EVENT_CLIENT_DEAD, cdata(CDATA_ID, rc)
				}
				del_chara rc
				buff = lang(_thanks(2), "Thanks!")
			}
			else {
				buff = lang("冷やかし" + _ka(1), "You kidding?")
			}
		}
		else {
			buff = lang("冷やかし" + _ka(1), "You kidding?")
		}
		goto *chat_default
	}
	if ( chatval == 38 ) {
		if ( cdata(CDATA_ID, tc) == CREATURE_ID_JURE | cdata(CDATA_ID, tc) == CREATURE_ID_BLESSED_JURE ) {
			repeat MAX_CHARA_TOTAL
				if ( cdata(CDATA_EXIST, cnt) != CHAR_STATE_ALIVE ) {
					continue
				}
				if ( cdata(CDATA_ID, cnt) == CREATURE_ID_ROVID ) {
					snd SOUNDLIST_AMMO
					txt lang(cdatan(CDATAN_NAME, cnt) + "「私が許しませんよ！」", cdatan(CDATAN_NAME, cnt) + " says: " + cnvtalk("I won't allow it!"))
					goto *chat_end
					break
				}
			loop
		}
		if ( cdata(CDATA_IMPRESSION, tc) < 200 ) {
			buff = lang("(" + name(tc) + "はやんわりと断った)", "(" + name(tc) + " gently refuses your proposal.)")
			goto *chat_default
		}
		cbitmod CHARA_BIT_MARRIED, tc, 1
		chatMore lang("はい…喜んで。", "With pleasure.")
		gdata(GDATA_FLAG_TIMES_MARRIED)++
		cdata(CDATA_JOIN_DATE_MONTH, tc) = gdata(GDATA_MONTH)
		cdata(CDATA_JOIN_DATE_DAY, tc) = gdata(GDATA_DAY)
		cdata(CDATA_JOIN_DATE_YEAR, tc) = gdata(GDATA_YEAR)
		marry = tc
		evadd EVENT_MARRY
		goto *chat_end
	}
	if ( chatval == 39 ) {
		if ( gdata(GDATA_FLAG_GAME_MODE) == GAMEMODE_OVERDOSE | gdata(GDATA_FLAG_GAME_MODE) == GAMEMODE_PURGE ) {
			snd SOUNDLIST_FAIL1
			txt lang("このゲームモードでは遺伝子を残せない。", "You can not create a gene in this game mode.")
			goto *chat_end
		}
		if ( gdata(GDATA_AREA) == AREA_SHELTER ) {
			chatMore lang("こんな場所では嫌よ", "Not here!")
			goto *chat_end
		}
		chatMore lang("いやん、あなたったら…", "*blush*")
		if ( cdata(CDATA_ID, tc) == CREATURE_ID_JURE | cdata(CDATA_ID, tc) == CREATURE_ID_BLESSED_JURE ) {
			repeat MAX_CHARA_TOTAL
				if ( cdata(CDATA_EXIST, cnt) != CHAR_STATE_ALIVE ) {
					continue
				}
				if ( cdata(CDATA_ID, cnt) == CREATURE_ID_ROVID ) {
					snd SOUNDLIST_AMMO
					txt lang(cdatan(CDATAN_NAME, cnt) + "「やめなさい！ジュア様が嫌だと言っているでしょう！」", cdatan(CDATAN_NAME, cnt) + " says: " + cnvtalk("Stop this at once! Can't you see that Lady Jure doesn't want this?!"))
					goto *chat_end
					break
				}
			loop
		}
		cbitmod CHARA_BIT_MAKE_GENE, tc, 1
		if ( gdata(GDATA_WIZARD) == 0 ) {
			gdata(GDATA_SLEEP_GENE) = tc
		}
		goto *chat_end
	}
	if ( chatval == 43 ) {
		chatMore lang("悪天候時はシェルターを無料で開放している" + _nda() + "すみやかに避難して" + _kure(), "The shelter is free to use for anyone. Here, come in.")
		if ( gdata(GDATA_FLAG_DUEL_TARGET) > 0 ) {
			snd SOUNDLIST_FAIL1
			txt_duel2
			goto *chat_end
		}
		gdata(GDATA_RETURN_AREA) = gdata(GDATA_AREA), gdata(GDATA_LEVEL), cdata(CDATA_X, CHARA_PLAYER), cdata(CDATA_Y, CHARA_PLAYER)
		gdata(GDATA_TELEPORT_AREA) = AREA_SHELTER
		gdata(GDATA_TELEPORT_LEVEL) = 1
		levelexitby = 2
		chatteleport = 1
		snd SOUNDLIST_EXITMAP1
		goto *chat_end
	}
	if ( chatval == 44 ) {
		listmax = 0
		buff = lang("(" + name(tc) + "は悲しそうな目であなたを見ている。本当に縁を切る？)", "(" + name(tc) + " looks at you with a sad expression. Really dismiss " + him(tc) + "? )")
		chatList 1, lang("切る", "Yes.")
		chatList 0, lang("やめる", "No.")
		chatesc = 1
		gosub *chat_select
		if ( chatval == 1 ) {
			txt lang("" + name(tc) + "を解雇した… ", "You dismiss " + name(tc) + ".")
			chara_vanquish tc
			calccosthire
			goto *chat_end
		}
		buff = ""
		goto *chat_default
	}
	if ( chatval == 45 ) {
		mdatan(MDATAN_NAME) = random_title()
		s = lang("の家", "Home"), lang("邸", "Mansion"), lang("城", "Shack"), lang("ハーレム", "Nest"), lang("の巣窟", "Base"), lang("ハウス", "Hideout"), lang("ホーム", "Dome"), lang("の住処", "Hut"), lang("宅", "Cabin"), lang("の隠れ家", "Hovel"), lang("ドーム", "Shed")
		if ( ( jp & rnd(5) ) | ( en & rnd(3) ) ) {
			mdatan(MDATAN_NAME) += lang("", " ") + s(rnd(10))
		}
		screenupdate = -1
		gosub *screen_refreshFull
		buff = lang("そう" + _dana() + "これからこの家の名前は" + mdatan(MDATAN_NAME) + _da(), "Hey, I've come up a good idea! \"" + mdatan(MDATAN_NAME) + "\", doesn't it sound so charming?")
		goto *chat_default
	}
	if ( chatval == 46 ) {
		if ( cdata(CDATA_KARMA, CHARA_PLAYER) >= (-30) ) {
			buff = lang("その程度の罪なら自分でなんとかしなさい。", "You karma isn't that low. Come back after you have committed more crimes!")
			goto *chat_default
		}
		listmax = 0
		buff = lang("免罪符を希望する" + _noka(1) + calcguiltvalue() + strgold + "かかるけどいいの" + _kana(1), "In the authority of all the saints, I will grant you an indulgence, for money of course. The price is " + calcguiltvalue() + "gp.")
		if ( cdata(CDATA_GOLD, CHARA_PLAYER) >= calcguiltvalue() ) {
			chatList 1, lang("買う", "Deal.")
		}
		chatList 0, lang("やめる", "The price is too high.")
		chatesc = 1
		gosub *chat_select
		if ( chatval == 1 ) {
			snd SOUNDLIST_PAYGOLD1
			cdata(CDATA_GOLD, CHARA_PLAYER) -= calcguiltvalue()
			modkarma CHARA_PLAYER, (cdata(CDATA_KARMA, CHARA_PLAYER) - (-30)) * (-1) + 1
			buff = lang(_thanks(2), "Thanks!")
		}
		else {
			buff = lang("冷やかし" + _ka(1), "You kidding?")
		}
		goto *chat_default
	}
	if ( chatval == 47 ) {
		tcchat = tc
		allyctrl = 4
		gosub *com_ally
		if ( stat != (-1) ) {
			rc = stat
			listmax = 0
			buff = lang("100 goldかかるけどいい" + _ka(1), "It will cost you 100gp.")
			if ( cdata(CDATA_GOLD, CHARA_PLAYER) >= 100 ) {
				chatList 1, lang("調査する", "Investigate.")
			}
			chatList 0, lang("やめる", "No way!")
			chatesc = 1
			gosub *chat_select
			if ( chatval == 1 ) {
				snd SOUNDLIST_PAYGOLD1
				cdata(CDATA_GOLD, CHARA_PLAYER) -= 100
				screenupdate = -1
				gosub *screen_draw
				tc = tcbk
				cc = rc
				csctrl = 4
				snd SOUNDLIST_POP2
				gosub *com_charainfo
				cc = CHARA_PLAYER
				gosub *chat_refresh
				buff = ""
			}
			else {
				buff = lang("冷やかし" + _ka(1), "You kidding?")
			}
		}
		else {
			buff = lang("冷やかし" + _ka(1), "You kidding?")
		}
		tc = tcchat
		goto *chat_default
	}
	if ( chatval == 82 ) {
		buff = lang("後で変更できないけど大丈夫" + _ka(1), "It can not be changed later. OK?")
		chatList 0, lang("やめる", "Wait...")
		chatList 1, lang("教える", "OK!")
		chatesc = 1
		gosub *chat_select
		if ( chatval == 1 ) {
			gdata(STARTING_GDATA_FLAG + 322) = 12
			chatMore lang("何月" + _ka(1), "Which month?")
			display_msg screenmsgy, 1
			val = (windoww - 200) / 2 + inf_screenx, winposy(60), 8, 1, gdata(STARTING_GDATA_FLAG + 322)
			inputlog = "" + gdata(STARTING_GDATA_FLAG + 322)
			gosub *prompt_word
			in = int(inputlog)
			if ( in > 12 ) {
				in = 12
			}
			if ( in == 0 | rtval == (-1) ) {
				gdata(STARTING_GDATA_FLAG + 322) = 0
				goto *chat_default
			}
			gdata(STARTING_GDATA_FLAG + 323) = 31
			chatMore lang("それで、何日？", "Wow. Which day?")
			display_msg screenmsgy, 1
			val = (windoww - 200) / 2 + inf_screenx, winposy(60), 8, 1, gdata(STARTING_GDATA_FLAG + 323)
			inputlog = "" + gdata(STARTING_GDATA_FLAG + 323)
			gosub *prompt_word
			in2 = int(inputlog)
			if ( in2 > 31 ) {
				in2 = 31
			}
			if ( in2 == 0 | rtval == (-1) ) {
				gdata(STARTING_GDATA_FLAG + 323) = 0
				goto *chat_default
			}
			gdata(STARTING_GDATA_FLAG + 322) = in
			gdata(STARTING_GDATA_FLAG + 323) = in2
			buff = lang("誕生日は" + gdata(STARTING_GDATA_FLAG + 322) + "月" + gdata(STARTING_GDATA_FLAG + 323) + "日で間違いない" + _kana(1), "Your birthday is " + gdata(STARTING_GDATA_FLAG + 322) + " / " + gdata(STARTING_GDATA_FLAG + 323) + ".")
			chatList 0, lang("間違えた", "I made a mistake.")
			chatList 1, lang("間違いない", "Yes.")
			chatesc = 1
			gosub *chat_select
			if ( chatval == 1 ) {
				snd SOUNDLIST_ENC
				chatMore lang("なるほど！みんなにも教えてあげ" + _ru(2), "I see! I'll also tell everyone!")
				gosub *chat_refresh
				buff = ""
			}
			else {
				gdata(STARTING_GDATA_FLAG + 322) = 0
				gdata(STARTING_GDATA_FLAG + 323) = 0
				buff = lang("冷やかし" + _ka(1), "You kidding?")
			}
		}
		else {
			buff = lang("冷やかし" + _ka(1), "You kidding?")
		}
		goto *chat_default
	}
	if ( chatval == 84 ) {
		tcbk = tc
		invsubroutine = 1
		invctrl = 23, 17
		snd SOUNDLIST_INV
		gosub *com_inventory
		if ( stat == 1 ) {
			cdata(CDATA_EMO_ICON, tc) = 0
			meal = 100
			waitbk = cfg_animewait
			if ( cfg_animewait > 0 ) {
				cfg_animewait = 0
			}
			listmax = 0
			chatMore lang("(仲良く料理を分け合った…)", "(Shared food with your good friend...)")
			snd SOUNDLIST_EAT1
			chatMore lang("(もぐもぐ)", "(Munching)")
			inv(INV_ITEM_NUM, ci)++
			cc = tcbk
			gosub *insta_eat
			cdata(CDATA_EMO_ICON, tc) = 6 + 100 * 3
			customtalk tcbk, DBMODE_FLAVOR_MEAL
			if ( stat ) {
				gosub *convert_word
			}
			else {
				kaiwa = rnd(3)
				if ( inv(INV_ITEM_PARAM2, ci) < 8 ) {
					if ( kaiwa == 0 ) {
						chatMore lang("美味しい" + _na(3) + "！", "Delicious!")
					}
					if ( kaiwa == 1 ) {
						chatMore lang("これはいけ" + _ru(3) + "！", "Gee what a good taste!")
					}
					if ( kaiwa == 2 ) {
						chatMore lang("また食べたい" + _yo(3) + "。", "It tasted pretty good!")
					}
				}
				else {
					if ( kaiwa == 0 ) {
						chatMore lang("最高に美味しい" + _yo(3) + "！", "Wow! Terrific food!")
					}
					if ( kaiwa == 1 ) {
						chatMore lang("まさに絶品" + _dana(3) + "！", "Yummy! Absolutely yummy!")
					}
					if ( kaiwa == 2 ) {
						chatMore lang("なんだか幸せ" + _dana(3) + "。", "It tasted like seventh heaven!")
					}
				}
				kaiwa = 0
			}
			snd SOUNDLIST_EAT1
			cc = CHARA_PLAYER
			gosub *insta_eat
			tc = tcbk
			meal = 0
			cfg_animewait = waitbk
		}
		goto *chat_default
	}
	if ( chatval == 48 ) {
		if ( cbit(CHARA_BIT_SHUT_UP, tc) == 0 ) {
			cbitmod CHARA_BIT_SHUT_UP, tc, 1
			buff = "(" + lang(name(tc) + "はしゅんとなった…", name(tc) + " stops talking...") + ")"
		}
		else {
			buff = "(" + lang(name(tc) + "はあなたに抱きついた", name(tc) + " hugs you.") + ")"
			cbitmod CHARA_BIT_SHUT_UP, tc, 0
		}
		chatid = -1
		goto *chat_default
	}
	if ( chatval == 50 ) {
		buff = lang(_ore(3) + "の剣が必要な" + _noka(1) + "そう" + _dana(3) + "、" + calchireadv(tc) + strgold + "払うならば、7日間護衛を引き受け" + _ru(), "I will take the job for " + calchireadv(tc) + "gp, for seven days.")
		if ( cdata(CDATA_GOLD, CHARA_PLAYER) >= calchireadv(tc) ) {
			chatList 1, lang("頼む", "Sounds fair enough.")
		}
		chatList 0, lang("やめる", "Some other time.")
		chatesc = 1
		gosub *chat_select
		if ( chatval == 1 ) {
			snd SOUNDLIST_PAYGOLD1
			cdata(CDATA_GOLD, CHARA_PLAYER) -= calchireadv(tc)
			cdata(CDATA_RELATION, tc) = 10
			cbitmod CHARA_BIT_HIRED, tc, 1
			cdata(CDATA_HIRE_DATE, tc) = gdata(GDATA_HOUR) + gdata(GDATA_DAY) * 24 + gdata(GDATA_MONTH) * 24 * 30 + gdata(GDATA_YEAR) * 24 * 30 * 12 + 24 * 7
			cdata(CDATA_FRIENDSHIP, tc)++
			snd SOUNDLIST_PRAY1
			txtef COLOR_YELLOW
			txt lang(name(tc) + "を雇った。", "You hired " + name(tc) + ".")
			buff = lang(_thanks(2), "Thanks!")
		}
		else {
			buff = lang("冷やかし" + _ka(1), "You kidding?")
		}
		goto *chat_default
	}
	if ( chatval == 51 ) {
		if ( cdata(CDATA_LEVEL, CHARA_PLAYER) * 3 / 2 + 10 < cdata(CDATA_LEVEL, tc) ) {
			buff = lang(_kimi(3) + "の仲間になれと？あまりにも力の差がありすぎる" + _na(), "Huh? You are no match for me.")
			goto *chat_default
		}
		if ( cdata(CDATA_IMPRESSION, tc) >= 200 & cdata(CDATA_FRIENDSHIP, tc) > 0 ) {
			chatMore lang(_kimi(3) + "となら上手くやっていけそう" + _da() + _yoro(2), "Sure, I guess you and I can make a good team.")
			f = get_freeally()
			if ( f == 0 ) {
				buff = lang("これ以上仲間を連れて行けないよう" + _da() + "人数を調整してまた来て" + _kure(), "It seems your party is already full. Come see me again when you're ready.")
				goto *chat_default
			}
			rc = tc
			gosub *add_ally
			cdata(CDATA_ROLE, rc) = ROLE_NONE
			cdata(CDATA_AREA, rc) = AREA_NONE
			cdata(CDATA_IMPRESSION, tc) = 100
			rc = oc
			gosub *adv_generate
			goto *chat_end
		}
		buff = lang(_kimi(3) + "の仲間になれと？悪い" + _ga(3) + "お断り" + _da(), "Huh? What made you think I'd want to join you? I don't even know you well.")
		goto *chat_default
	}
	if ( chatval == 52 ) {
		listmax = 0
		buff = lang("ほほう、モンスターの顔をした人間か。見世物としてなかなかいけそうだ。金貨50000枚で買い取ろう。", "Look what we have! A woman who got a monster's face. It'll be a good show. Wanna sell me for 50000 gold coins?")
		chatList 1, lang("売る", "Sure, take her.")
		chatList 0, lang("やめる", "You cold bastard.")
		chatesc = 1
		gosub *chat_select
		if ( chatval == 1 ) {
			txt lang("パエルの母親を売った…", "You sell Pael's mom...")
			modkarma CHARA_PLAYER, -20
			snd SOUNDLIST_GETGOLD1
			cdata(CDATA_GOLD, CHARA_PLAYER) += 50000
			gdata(GDATA_FLAG_SUB_MOTHER) = 1002
			rc = findchara(CREATURE_ID_PAELS_MOM_LILY)
			cdata(CDATA_AI_CALM, rc) = 3
			cdata(CDATA_RELATION, rc) = 0
			cdata(CDATA_X_ORG, rc) = 48
			cdata(CDATA_Y_ORG, rc) = 18
			cell_movechara rc, 48, 18
			buff = lang(_thanks(2), "Thanks!")
		}
		else {
			buff = lang("冷やかし" + _ka(1), "You kidding?")
		}
		goto *chat_default
	}
	if ( chatval == 53 ) {
		chatMore lang("ここからふもとに下りるのは不便だから、ボランティアで帰還サービスをやってい" + _ru() + _kimi(3) + "も帰還サービスを希望" + _kana(), "I'm practicing a spell of return. Would you like to take my service?")
		gosub *com_return
		goto *chat_end
	}
	if ( chatval == 54 ) {
		if ( calccostreload(CHARA_PLAYER) == 0 ) {
			buff = lang("充填する必要はないみたい" + _da(), "Reload what? You don't have any ammo in your inventory.")
			goto *chat_default
		}
		if ( adata(ADATA_SHOP_SALE_RESTRICTION, gdata(GDATA_AREA)) == 100 ) {
			buff = lang("今は在庫の準備中" + _da(), "It is currently in preparation.")
			goto *chat_default
		}
		buff = lang("そう" + _dana(3) + "、全員の特殊矢弾を補充すると" + calccostreload(CHARA_PLAYER) + strgold + _da(), "Sure, let me check what type of ammo you need... Okay, reloading all of your ammo will cost " + calccostreload(CHARA_PLAYER) + "gp.")
		if ( cdata(CDATA_GOLD, CHARA_PLAYER) >= calccostreload(CHARA_PLAYER) ) {
			chatList 1, lang("頼む", "Alright.")
		}
		chatList 0, lang("やめる", "Another time.")
		chatesc = 1
		gosub *chat_select
		if ( chatval == 1 ) {
			snd SOUNDLIST_PAYGOLD1
			cdata(CDATA_GOLD, CHARA_PLAYER) -= calccostreload(CHARA_PLAYER)
			p = calccostreload(0, 1)
			adata(ADATA_SHOP_SALE_RESTRICTION, gdata(GDATA_AREA)) = 100
			buff = lang(_thanks(2), "Thanks!")
		}
		else {
			buff = lang("冷やかし" + _ka(1), "You kidding?")
		}
		goto *chat_default
	}
	if ( chatval == 55 ) {
		screenupdate = -1
		gosub *screen_draw
		invctrl = 0
		gosub *com_reserve
		buff = ""
		goto *chat_default
	}
	if ( chatval == 56 ) {
		chatList 1, lang("はじめる", "Let's do it.")
		chatList 0, lang("やめる", "W-Wait...")
		buff = lang("なかなかの体つき" + _dana() + "よし、買" + _u(2), "You are... quite attractive. I'll buy you.")
		gosub *chat_select
		if ( chatval != 1 ) {
			buff = lang("冷やかし" + _ka(1), "You kidding?")
			goto *chat_default
		}
		chatMore lang("いく" + _yo(2), "Okay, no turning back now!"), lang("うふふ", "Come on!")
		gosub *sexsex
		goto *chat_end
	}
	if ( chatval == 58 ) {
		if ( gdata(GDATA_TIME_STOP_TIME) == 0 ) {
			gdata(GDATA_FLAG_HOUSE_VISITORS)++
			evadd EVENT_VISITOR
			goto *chat_end
		}
	}
	if ( chatval == 59 ) {
		gdata(GDATA_GUEST)--
		chatMore lang("追い返す" + _yo(), "Alright.")
		buff = ""
		goto *chat_default
	}
	if ( chatval == 60 ) {
		sexvalue = sdata(SKILL_ATTR_CHA, tc) * 25 + 100 + cdata(CDATA_FAME, CHARA_PLAYER) / 10
		if ( cdata(CDATA_GOLD, CHARA_PLAYER) >= sexvalue ) {
			chatList 1, lang("はじめる", "Let's do it.")
		}
		chatList 0, lang("やめる", "W-Wait...")
		buff = lang("そう" + _dana() + "金貨" + sexvalue + "枚を前払いで" + _kure(), "Okay sweetie, I need " + sexvalue + "gp upfront.")
		gosub *chat_select
		if ( chatval != 1 ) {
			buff = lang("冷やかし" + _ka(1), "You kidding?")
			goto *chat_default
		}
		snd SOUNDLIST_PAYGOLD1
		cdata(CDATA_GOLD, cc) -= sexvalue
		cdata(CDATA_GOLD, tc) += sexvalue
		chatMore lang("いく" + _yo(2), "Okay, no turning back now!"), lang("うふふ", "Come on!")
		cc = tc
		tc = CHARA_PLAYER
		gosub *sexsex
		cc = CHARA_PLAYER
		goto *chat_end
	}
	if ( chatval == 61 ) {
		if ( gdata(GDATA_FLAG_MAIN) >= 200 ) {
			if ( gdata(GDATA_AREA) == AREA_NT_SOUTH_BORDER ) {
				p = 45, 0
			}
			if ( gdata(GDATA_AREA) == AREA_ST_NORTH_BORDER ) {
				p = 43, 0
			}
			repeat 10
				if ( p(cnt) == 0 ) {
					chatList 0, lang("やめる", "Stop it.")
					break
				}
				chatList p(cnt), mapname(p(cnt))
			loop
			buff = lang("(キャラバンの隊長は忙しそうでこちらに気付いていない。今ならキャラバンの荷物に紛れ込んで関所を突破できるだろう。どこ行きの荷物に紛れ込む？)", "(The Captain of the caravan appears to be busy and hasn't noticed you. If you slip in with the cargo now, you can probably make it across the border. Which way are you headed?)")
			gosub *chat_select
			if ( chatval <= 0 ) {
				goto *chat_end
			}
			if ( gdata(GDATA_FLAG_DUEL_TARGET) > 0 ) {
				snd SOUNDLIST_FAIL1
				txt_duel2
				goto *chat_end
			}
			if ( gdata(GDATA_FLAG_MAIN) == 350 ) {
				if ( gdata(GDATA_AREA) == AREA_ST_NORTH_BORDER ) {
					gdata(GDATA_FLAG_MAIN) = 351
				}
			}
			gdata(GDATA_TELEPORT_AREA) = adata(ADATA_PARENT, chatval)
			gdata(GDATA_TELEPORT_LEVEL) = 1
			levelexitby = 4
			prevsekai = gdata(GDATA_WORLD)
			gdata(GDATA_WORLD_RENEW) = 1
			gdata(GDATA_WORLD) = adata(ADATA_PARENT, chatval)
			gdata(GDATA_WORLD_X) = adata(ADATA_X, chatval), adata(ADATA_Y, chatval)
			if ( gdata(GDATA_FLAG_MAIN) == 351 ) {
				gdata(GDATA_WORLD_X) = adata(ADATA_X, AREA_YOWYN), adata(ADATA_Y, AREA_YOWYN)
			}
			fixtransfermap = 1
			chatteleport = 1
			goto *chat_end
		}
		chatMore lang("(暇そうにしていたキャラバンの隊長は、あなたの視線に気が付いた。)", "(The bored caravan master notices your glance.)")
		chatMore lang("おや？君、ひょっとしてこの国から出ていきたいのかな？それは無理だよ。今は国境が封鎖されていて、お偉いさんの一団くらいしか通れないんだ。封鎖が解除されたらすぐに交易商たちを運ばなければならないので、私も毎日ここで待っているんだが…。", "Oh? You want to get out of this country? Unfortunately that's impossible because of the border blockade. Only important people can pass. I've been waiting here every day because I must escort these traders immediately, in case the blockade happens to be temporary lifted."), strbye
		chatMore lang("仮に封鎖が解除されても冒険者は通れないんじゃないかな。ただの交易商なら私が乗せて行ってもいいんだが、私も責任ある立場だからね。冒険者なんて危なくて運べないよ。", "Adventurers cannot pass even if the blockade is temporarily lifted. If you are a trader, I can bring you to South Tyris, but if you're an adventurer I can't bring you because I'm afraid you'd try to snatch our cargo.")
		goto *chat_end
	}
	if ( chatval == 62 ) {
		if ( cdata(CDATA_GOLD, CHARA_PLAYER) < calcrestorecostc() ) {
			buff = strnogold
			goto *chat_default
		}
		snd SOUNDLIST_PAYGOLD1
		cdata(CDATA_GOLD, CHARA_PLAYER) -= calcrestorecostc()
		tcbk = tc
		repeat MAX_CHARA_FOLLOWER
			if ( cdata(CDATA_EXIST, cnt) != CHAR_STATE_ALIVE ) {
				continue
			}
			tc = cnt
			efid = SKILL_SPELL_UNCURSE
			efp = 5000
			gosub *effect
		loop
		tc = tcbk
		gosub *chat_refresh
		buff = lang("解呪が完了し" + _ta(), "Curses removed. Take care!")
		goto *chat_default
	}

	/********** ANNA CUSTOM - BEGINNING **********/ // Can Change Item Sprites In Home.

	if ( chatval == 999 & TweakData(TWEAK_CONVENIENCE_CHANGE_ITEM_SPRITE_HOME, TWEAK_CATEGORY_CONVENIENCE) == 1 ) {
		chatMore lang("そんなことか…まぁよい。手間賃としてブロンズ硬貨を1枚もらう。", "What? ...Fine. I'll do it for 1 bronze coin.")
		item_find ITEM_ID_BRONZE_COIN, 3, 1
		if ( stat != (-1) ) {
			cigp = stat
			if ( inv(INV_ITEM_NUM, cigp) >= 1 ) {
				invsubroutine = 1
				invctrl = 23, 10
				snd SOUNDLIST_INV
				gosub *com_inventory
				if ( key == key_cancel ) {
					goto *chat_end
				}
				if ( stat == 1 ) {
					chatMore lang("それで、何番の計画通りに作り変えればよいのじゃ。", "Okay. Enter the blueprint number that you want me to use.")
					txt lang(" (user\\item内のプラン番号を1~33で入力。21~33は48*96サイズ用。0で元に戻す) ", " (Enter the number of the sprite inside the useritem folder. Sprites 21-33 are 48*96 in size. Enter 0 to set it to the default.) ")
					val = (windoww - 100) / 2 + inf_screenx, winposy(90), 5, 0, 0
					inputlog = ""
					gosub *prompt_word
					if ( inv(INV_ITEM_PIC, ci) < xy2pic(0, 27) | inv(INV_ITEM_PIC, ci) > xy2pic(32, 27) ) {
						inv(INV_ITEM_PROPERTY, ci) = inv(INV_ITEM_PIC, ci) + 10
					}
					if ( inputlog == "0" ) {
						if ( inv(INV_ITEM_PARAM4, ci) != 0 ) {
							inv(INV_ITEM_PARAM4, ci) = 0
						}
						if ( inv(INV_ITEM_PROPERTY, ci) > PROP_SPECIAL ) {
							inv(INV_ITEM_PIC, ci) = inv(INV_ITEM_PROPERTY, ci) - 10
							inv(INV_ITEM_PROPERTY, ci) = PROP_NONE
							txtef COLOR_GREEN
							txt lang("元に戻した。", "You returned it to its original appearance.")
						}
					}
					else {
						if ( inputlog == "1" ) {
							inv(INV_ITEM_PARAM4, ci) = 1
							inv(INV_ITEM_PIC, ci) = xy2pic(0, 27)
						}
						if ( inputlog == "2" ) {
							inv(INV_ITEM_PARAM4, ci) = 2
							inv(INV_ITEM_PIC, ci) = xy2pic(1, 27)
						}
						if ( inputlog == "3" ) {
							inv(INV_ITEM_PARAM4, ci) = 3
							inv(INV_ITEM_PIC, ci) = xy2pic(2, 27)
						}
						if ( inputlog == "4" ) {
							inv(INV_ITEM_PARAM4, ci) = 4
							inv(INV_ITEM_PIC, ci) = xy2pic(3, 27)
						}
						if ( inputlog == "5" ) {
							inv(INV_ITEM_PARAM4, ci) = 5
							inv(INV_ITEM_PIC, ci) = xy2pic(4, 27)
						}
						if ( inputlog == "6" ) {
							inv(INV_ITEM_PARAM4, ci) = 6
							inv(INV_ITEM_PIC, ci) = xy2pic(5, 27)
						}
						if ( inputlog == "7" ) {
							inv(INV_ITEM_PARAM4, ci) = 7
							inv(INV_ITEM_PIC, ci) = xy2pic(6, 27)
						}
						if ( inputlog == "8" ) {
							inv(INV_ITEM_PARAM4, ci) = 8
							inv(INV_ITEM_PIC, ci) = xy2pic(7, 27)
						}
						if ( inputlog == "9" ) {
							inv(INV_ITEM_PARAM4, ci) = 9
							inv(INV_ITEM_PIC, ci) = xy2pic(8, 27)
						}
						if ( inputlog == "10" ) {
							inv(INV_ITEM_PARAM4, ci) = 10
							inv(INV_ITEM_PIC, ci) = xy2pic(9, 27)
						}
						if ( inputlog == "11" ) {
							inv(INV_ITEM_PARAM4, ci) = 11
							inv(INV_ITEM_PIC, ci) = xy2pic(10, 27)
						}
						if ( inputlog == "12" ) {
							inv(INV_ITEM_PARAM4, ci) = 12
							inv(INV_ITEM_PIC, ci) = xy2pic(11, 27)
						}
						if ( inputlog == "13" ) {
							inv(INV_ITEM_PARAM4, ci) = 13
							inv(INV_ITEM_PIC, ci) = xy2pic(12, 27)
						}
						if ( inputlog == "14" ) {
							inv(INV_ITEM_PARAM4, ci) = 14
							inv(INV_ITEM_PIC, ci) = xy2pic(13, 27)
						}
						if ( inputlog == "15" ) {
							inv(INV_ITEM_PARAM4, ci) = 15
							inv(INV_ITEM_PIC, ci) = xy2pic(14, 27)
						}
						if ( inputlog == "16" ) {
							inv(INV_ITEM_PARAM4, ci) = 16
							inv(INV_ITEM_PIC, ci) = xy2pic(15, 27)
						}
						if ( inputlog == "17" ) {
							inv(INV_ITEM_PARAM4, ci) = 17
							inv(INV_ITEM_PIC, ci) = xy2pic(16, 27)
						}
						if ( inputlog == "18" ) {
							inv(INV_ITEM_PARAM4, ci) = 18
							inv(INV_ITEM_PIC, ci) = xy2pic(17, 27)
						}
						if ( inputlog == "19" ) {
							inv(INV_ITEM_PARAM4, ci) = 19
							inv(INV_ITEM_PIC, ci) = xy2pic(18, 27)
						}
						if ( inputlog == "20" ) {
							inv(INV_ITEM_PARAM4, ci) = 20
							inv(INV_ITEM_PIC, ci) = xy2pic(19, 27)
						}
						if ( inputlog == "21" ) {
							inv(INV_ITEM_PARAM4, ci) = 21
							inv(INV_ITEM_PIC, ci) = xy2pic(20, 27)
						}
						if ( inputlog == "22" ) {
							inv(INV_ITEM_PARAM4, ci) = 22
							inv(INV_ITEM_PIC, ci) = xy2pic(21, 27)
						}
						if ( inputlog == "23" ) {
							inv(INV_ITEM_PARAM4, ci) = 23
							inv(INV_ITEM_PIC, ci) = xy2pic(22, 27)
						}
						if ( inputlog == "24" ) {
							inv(INV_ITEM_PARAM4, ci) = 24
							inv(INV_ITEM_PIC, ci) = xy2pic(23, 27)
						}
						if ( inputlog == "25" ) {
							inv(INV_ITEM_PARAM4, ci) = 25
							inv(INV_ITEM_PIC, ci) = xy2pic(24, 27)
						}
						if ( inputlog == "26" ) {
							inv(INV_ITEM_PARAM4, ci) = 26
							inv(INV_ITEM_PIC, ci) = xy2pic(25, 27)
						}
						if ( inputlog == "27" ) {
							inv(INV_ITEM_PARAM4, ci) = 27
							inv(INV_ITEM_PIC, ci) = xy2pic(26, 27)
						}
						if ( inputlog == "28" ) {
							inv(INV_ITEM_PARAM4, ci) = 28
							inv(INV_ITEM_PIC, ci) = xy2pic(27, 27)
						}
						if ( inputlog == "29" ) {
							inv(INV_ITEM_PARAM4, ci) = 29
							inv(INV_ITEM_PIC, ci) = xy2pic(28, 27)
						}
						if ( inputlog == "30" ) {
							inv(INV_ITEM_PARAM4, ci) = 30
							inv(INV_ITEM_PIC, ci) = xy2pic(29, 27)
						}
						if ( inputlog == "31" ) {
							inv(INV_ITEM_PARAM4, ci) = 31
							inv(INV_ITEM_PIC, ci) = xy2pic(30, 27)
						}
						if ( inputlog == "32" ) {
							inv(INV_ITEM_PARAM4, ci) = 32
							inv(INV_ITEM_PIC, ci) = xy2pic(31, 27)
						}
						if ( inputlog == "33" ) {
							inv(INV_ITEM_PARAM4, ci) = 33
							inv(INV_ITEM_PIC, ci) = xy2pic(32, 27)
						}
						if ( inv(INV_ITEM_PIC, ci) >= xy2pic(0, 27) & inv(INV_ITEM_PIC, ci) <= xy2pic(32, 27) ) {
							gsel 1
							folder = exedir + "user\\item\\"
							dirlist buff, folder + "plan*.bmp"
							notesel buff
							repeat stat
								noteget file, cnt
								p = int(strmid(file, 4, instr(file, 4, "."))) + 890
								pos p \ 33 * inf_tiles, p / 33 * inf_tiles
								picload folder + file, 1
							loop
							gsel 0
						}
					}
					chatMore lang("ほれ。", "Done.")
					snd SOUNDLIST_BUILD1
					inv(INV_ITEM_NUM, cigp)--
				}
				else {
					obvious = 0
				}
				goto *chat_end
			}
		}
		chatMore lang("…持っておらんのか！", "That is not enough.")
		gosub *screen_draw
	}

	/********** ANNA CUSTOM - ENDING **********/

	if ( chatval == 63 ) {
		invsubroutine = 1
		invctrl = 23, 18
		snd SOUNDLIST_INV
		gosub *com_inventory
		if ( stat == 1 ) {
			wlv = inv(INV_ITEM_LEVEL, ci) + 1
			wcost = limit(wlv * wlv * sqrt(wlv) * 300 + 1000, 1000, 500000)
			if ( gdata(GDATA_FLAG_GUILD_FIGHTER) ) {
				wcost /= 2
			}
			if ( inv(INV_ITEM_LEVEL, ci) > 9 ) {
				buff = lang("こいつはちょっと無理です。", "It is sort of impossible at this stage.")
				goto *chat_default
			}
			listmax = 0
			if ( cdata(CDATA_GOLD, CHARA_PLAYER) >= wcost ) {
				chatList 1, lang("強化する", "Enhance equipment.")
			}
			chatList 0, lang("やめる", "Never mind.")
			buff = lang("これを強化するには" + wcost + "goldかかるけどいいかな。", "It will cost you " + wcost + " gold.")
			chatesc = 1
			gosub *chat_select
			if ( chatval == 1 ) {
				snd SOUNDLIST_PAYGOLD1
				cdata(CDATA_GOLD, CHARA_PLAYER) -= wcost
				snd SOUNDLIST_DING2
				txt lang(itemname(ci) + "は強化された。", itemname(ci) + " " + is2(inv(INV_ITEM_NUM, ci)) + " surrounded by a golden aura.")
				inv(INV_ITEM_LEVEL, ci)++
				r1 = CHARA_PLAYER
				gosub *charaRefresh
				buff = lang("強化完了！", "Enhancement done!")
			}
			else {
				buff = lang("冷やかし" + _ka(1), "You kidding?")
			}
		}
		else {
			buff = lang("冷やかし" + _ka(1), "You kidding?")
		}
		goto *chat_default
	}
	if ( chatval == 64 ) {
		invsubroutine = 1
		invctrl = 23, 18
		snd SOUNDLIST_INV
		gosub *com_inventory
		if ( stat == 1 ) {
			wcost = 12000
			listmax = 0
			if ( cdata(CDATA_GOLD, CHARA_PLAYER) >= wcost ) {
				chatList 1, lang("0.1s軽くする", "Make equipment 0.1s lighter.")
			}
			if ( cdata(CDATA_GOLD, CHARA_PLAYER) >= wcost * 10 ) {
				chatList 2, lang("1.0s軽くする", "Make equipment 1.0s lighter.")
			}
			chatList 0, lang("やめる", "Never mind.")
			buff = lang("これを軽くするには0.1sにつき" + wcost + "goldかかるけどいいかな。", "You will cost " + wcost + "gp per 0.1s.")
			chatesc = 1
			gosub *chat_select
			if ( chatval == 1 ) {
				snd SOUNDLIST_PAYGOLD1
				cdata(CDATA_GOLD, CHARA_PLAYER) -= wcost
				snd SOUNDLIST_DING2
				txt lang(itemname(ci) + "は少し軽くなった。", itemname(ci) + " becomes lighter.")
				inv(INV_ITEM_WEIGHT, ci) -= 100
				if ( inv(INV_ITEM_WEIGHT, ci) < 10 ) {
					inv(INV_ITEM_WEIGHT, ci) = 10
				}
				r1 = CHARA_PLAYER
				gosub *charaRefresh
				buff = lang("軽量化完了！", "Weight reduction completed!")
			}
			else {
				if ( chatval == 2 ) {
					snd SOUNDLIST_PAYGOLD1
					cdata(CDATA_GOLD, CHARA_PLAYER) -= wcost * 10
					snd SOUNDLIST_DING2
					txt lang(itemname(ci) + "は少し軽くなった。", itemname(ci) + " becomes lighter.")
					inv(INV_ITEM_WEIGHT, ci) -= 1000
					if ( inv(INV_ITEM_WEIGHT, ci) < 10 ) {
						inv(INV_ITEM_WEIGHT, ci) = 10
					}
					r1 = CHARA_PLAYER
					gosub *charaRefresh
					buff = lang("軽量化完了！", "Weight reduction completed!")
				}
				else {
					buff = lang("冷やかし" + _ka(1), "You kidding?")
				}
			}
		}
		else {
			buff = lang("冷やかし" + _ka(1), "You kidding?")
		}
		goto *chat_default
	}
	if ( chatval == 95 ) {
		invsubroutine = 1
		invctrl = 23, 18
		snd SOUNDLIST_INV
		gosub *com_inventory
		if ( stat == 1 ) {
			wcost = 4000
			if ( inv(INV_ITEM_WEIGHT, ci) > 100000 ) {
				buff = lang("こいつはちょっと無理です。", "It is sort of impossible at this stage.")
				goto *chat_default
			}
			listmax = 0
			if ( cdata(CDATA_GOLD, CHARA_PLAYER) >= wcost ) {
				chatList 1, lang("0.1s重くする", "Make equipment 0.1s heavier.")
			}
			if ( cdata(CDATA_GOLD, CHARA_PLAYER) >= wcost * 10 ) {
				chatList 2, lang("1.0s重くする", "Make equipment 1.0s heavier.")
			}
			chatList 0, lang("やめる", "Never mind.")
			buff = lang("これを重くするには0.1sにつき" + wcost + "goldかかるけどいいかな。", "It will cost you " + wcost + "gp per 0.1s.")
			chatesc = 1
			gosub *chat_select
			if ( chatval == 1 ) {
				snd SOUNDLIST_PAYGOLD1
				cdata(CDATA_GOLD, CHARA_PLAYER) -= wcost
				snd SOUNDLIST_DING2
				txt lang(itemname(ci) + "は少し重くなった。", itemname(ci) + " becomes heavier.")
				inv(INV_ITEM_WEIGHT, ci) += 100
				r1 = CHARA_PLAYER
				gosub *charaRefresh
				buff = lang("重量化完了！", "Weighting completed!")
			}
			else {
				if ( chatval == 2 ) {
					snd SOUNDLIST_PAYGOLD1
					cdata(CDATA_GOLD, CHARA_PLAYER) -= wcost * 10
					snd SOUNDLIST_DING2
					txt lang(itemname(ci) + "は少し重くなった。", itemname(ci) + " becomes heavier.")
					inv(INV_ITEM_WEIGHT, ci) += 1000
					r1 = CHARA_PLAYER
					gosub *charaRefresh
					buff = lang("重量化完了！", "Weighting completed!")
				}
				else {
					buff = lang("冷やかし" + _ka(1), "You kidding?")
				}
			}
		}
		else {
			buff = lang("冷やかし" + _ka(1), "You kidding?")
		}
		goto *chat_default
	}
	if ( chatval == 65 ) {
		chatList 0, lang("乗船する", "(Board the ship)")
		chatList 1, lang("ちょっと待って", "Hold on.")
		buff = lang("この紹介状は…なるほど、わかった。さっさと船に乗ってくれ。すぐに出航する。", "This letter of introduction... I see. Alright, hop aboard. We'll set sail immediately.")
		gosub *chat_select
		if ( chatval == 0 ) {
			if ( gdata(GDATA_FLAG_DUEL_TARGET) > 0 ) {
				snd SOUNDLIST_FAIL1
				txt_duel2
				goto *chat_end
			}
			gdata(GDATA_TELEPORT_AREA) = AREA_LOST_YLVA
			gdata(GDATA_TELEPORT_LEVEL) = 1
			levelexitby = 4
			prevsekai = gdata(GDATA_WORLD)
			gdata(GDATA_WORLD_RENEW) = 1
			gdata(GDATA_WORLD) = AREA_LOST_YLVA
			gdata(GDATA_WORLD_X) = adata(ADATA_X, AREA_ULM_LESON), adata(ADATA_Y, AREA_ULM_LESON)
			fixtransfermap = 1
			chatteleport = 1
			goto *chat_end
		}
		buff = lang("冷やかし" + _ka(1), "You kidding?")
		goto *chat_end
	}
	if ( chatval == 69 ) {
		if ( cdata(CDATA_ID, tc) == CREATURE_ID_DETECTIVE | cdata(CDATA_ID, tc) == CREATURE_ID_WEREWOLF_DETECTIVE ) {
			buff = lang("この" + _ore(3) + "が人狼？なかなか面白い推理" + _da(3) + "。", "You think I'm a werewolf? That's an interesting deduction.")
		}
		else {
			if ( cdata(CDATA_TONE, tc) == 0 ) {
				buff = lang("馬鹿馬鹿しい。ここに人狼なんているわけない" + _daro(3) + "、確率的に考えて。いたら、かなりのレアケース" + _yo(3) + "。", "Ridiculous. There's no way there'd be a werewolf here. Think about it, they're quite rare.")
			}
			if ( cdata(CDATA_TONE, tc) == 1 ) {
				buff = lang("ち、違う！" + _ore(3) + "は人狼じゃない" + _yo(3) + "、信じて" + _kure(3) + "！", "I-I'm not! I'm not a werewolf! Please believe me!")
			}
			if ( cdata(CDATA_TONE, tc) == 2 ) {
				buff = lang("処刑は1日に1回まで" + _da(3) + "。無駄にしないよう、色々な可能性を考慮してから決めるといい" + _yo(3) + "。", "You can only execute one person a day. If you don't want to be wasteful, you should consider all the possibilities.")
			}
			if ( cdata(CDATA_TONE, tc) == 3 ) {
				buff = lang("…。", "...")
			}
			if ( cdata(CDATA_TONE, tc) == 4 ) {
				buff = lang("どうして" + _ore(3) + "にその質問をしたのか気になる" + _yo(3) + "。答えられないなら" + _kimi(3) + "が人狼側と勘繰られても仕方ない" + _nda(3) + "。", "Why even bother asking? Even if I say no, you're still going to be suspicious of me.")
			}
			if ( cdata(CDATA_TONE, tc) == 5 ) {
				buff = lang("もし" + _ore(3) + "を処刑することでこの街のためになる情報が得られるのなら、吊ればいい" + _daro(3) + "。", "If you have evidence saying I should be executed then do something already.")
			}
			if ( cdata(CDATA_TONE, tc) == 6 ) {
				buff = lang("そういえば、あまり見ない顔の人が一人いた" + _yo(3) + "。でも人狼じゃなくて狐って可能性もある" + _kana(3) + "？", "Come to think of it, there is someone I haven't seen before. But maybe it's a kitsune instead of a werewolf?")
			}
		}
		chatList 0, lang("さようなら", "Bye.")
		if ( mdata(MDATA_WEREWOLF_STAGE) == 1 ) {
			if ( gdata(GDATA_HOUR) != 11 ) {
				chatList 1, lang("" + cdatan(CDATAN_NAME, tc) + "は人狼だ！", "This person is a werewolf!")
			}
		}
		chatesc = 1
		gosub *chat_select
		if ( chatval == 1 ) {
			modimp tc, -5
			txtef COLOR_PURPLE
			txt lang("" + cdatan(CDATAN_NAME, tc) + "に疑いの目が向けられた。", cdatan(CDATAN_NAME, tc) + " was suspected around.")
			cdata(CDATA_VOTES_RECEIVED, tc) = rnd(2) + 2
			goto *chat_end
		}
		else {
			goto *chat_end
		}
		goto *chat_end
	}
	if ( chatval == 73 ) {
		if ( mdata(MDATA_CITY_AUTHORITY) < 2000 ) {
			chatMore lang("そんなこと言われても。", "Please contribute to more town.")
			goto *chat_end
		}
		snd SOUNDLIST_COMPLETE1
		chatMore lang("ワアーォ、" + cdatan(CDATAN_AKA, CHARA_PLAYER) + cdatan(CDATAN_NAME, CHARA_PLAYER) + "。是非" + _tanomu(3) + "！", "By all means, please!")
		mdata(MDATA_CITY_COMPLAINTS) = limit(mdata(MDATA_CITY_WATER_POLLUTION) - 15 + mdata(MDATA_CITY_ETHER_CORRUPTION) - 15 + mdata(MDATA_CITY_TAXES), 1, 99)
		goto *chat_end
	}
	if ( chatval == 74 ) {
		chatList 0, lang("キャンセル", "Cancel")
		chatList 1, lang("政策の実施", "Policy implementation")
		chatList 2, lang("法律整備", "Law development")
		chatList 3, lang("周辺施設の建設", "Construction of the facility")
		buff = lang("どういう管理を行う" + _noka(3) + "？", "What the management are you going to do ?")
		gosub *chat_select
		if ( chatval == 1 ) {
			chatList 0, lang("キャンセル", "Cancel")
			if ( gdata(GDATA_NEXT_VOTE) > gdata(GDATA_HOUR) + gdata(GDATA_DAY) * 24 + gdata(GDATA_MONTH) * 24 * 30 + gdata(GDATA_YEAR) * 24 * 30 * 12 ) {
				chatList 1, lang("貢献度の高い有権者に追加投票権（発言力50消費）", "Revival of the right to vote(Authority:50) ")
			}
			chatList 2, lang("準備中", "Cancel")
			chatList 3, lang("準備中", "Cancel")
			buff = lang("どういう政策を行う" + _noka(3) + "？", "What the policy are you going to do ?")
			gosub *chat_select
			if ( chatval == 1 ) {
				if ( mdata(MDATA_CITY_AUTHORITY) < 50 ) {
					chatMore lang(_kimi(3) + "にそんな発言力は無い" + _na(3) + "。", "Your authority is insufficient.")
				}
				else {
					snd SOUNDLIST_DING2
					gdata(GDATA_NEXT_VOTE) = gdata(GDATA_HOUR) + gdata(GDATA_DAY) * 24 + gdata(GDATA_MONTH) * 24 * 30 + gdata(GDATA_YEAR) * 24 * 30 * 12
					afterau = mdata(MDATA_CITY_AUTHORITY) - 50
					txt lang("発言力" + mdata(MDATA_CITY_AUTHORITY) + "→" + afterau + " ", "Authority :" + mdata(MDATA_CITY_AUTHORITY) + " -> " + afterau + " ")
					mdata(MDATA_CITY_AUTHORITY) -= 50
				}
			}
			goto *chat_end
		}
		if ( chatval == 2 ) {
			chatMore lang("未実装。", "Sorry, this is undeveloped.")
		}
		if ( chatval == 3 ) {
			chatMore lang("開発中！", "Sorry, this is undeveloped.")
		}
		goto *chat_end
	}
	if ( chatval == 75 ) {
		chatList 0, lang("やっぱりやめる", "Cancel")
		chatList 1, lang("ソーサラー実習（攻撃魔法）", "Sorcerer Training (Attack Magic)")
		chatList 2, lang("ウォーロック実習（上位攻撃魔法）", "Warlock Training (High Lvl Atk Magic)")
		chatList 3, lang("エンチャンター実習（付与魔法）", "Enchanter Training (Buffing Magic)")
		chatList 4, lang("ヒーラー実習（回復魔法）", "Healer Training (Healing Magic)")
		chatList 5, lang("シャーマン実習（特殊魔法）", "Shaman Training (Special Magic)")
		chatList 6, lang("メイジ実習（探索魔法）", "Mage Training (Exploration Magic)")
		buff = lang("実習によって経験値を得られる魔法が違う" + _yo(3) + "。", "Which magic practice are you going to do?")
		gosub *chat_select
		if ( chatval >= 1 ) {
			gdata(GDATA_TEMPORARY_FLAGS) = 11111111
			zisyu = chatval
			plat = 0
			repeat MAX_SPELL - STARTING_SKILL_SPELL, STARTING_SKILL_SPELL
				if ( spell(cnt - STARTING_SKILL_SPELL) <= 0 ) {
					continue
				}
				if ( zisyu == 1 ) {
					if ( sdataref(SKILL_DATAREF_TYPE, cnt) != SKILL_TYPE_ARROW & sdataref(SKILL_DATAREF_TYPE, cnt) != SKILL_TYPE_BOLT ) {
						continue
					}
				}
				if ( zisyu == 2 ) {
					if ( sdataref(SKILL_DATAREF_TYPE, cnt) != SKILL_TYPE_BALL & cnt != SKILL_SPELL_METEOR | cnt == SKILL_SPELL_HEALING_RAIN ) {
						continue
					}
				}
				if ( zisyu == 3 ) {
					if ( sdataref(SKILL_DATAREF_TYPE, cnt) / EXT_SDATAREF != 1 ) {
						continue
					}
				}
				if ( zisyu == 4 ) {
					if ( sdataref(SKILL_DATAREF_TYPE, cnt) != SKILL_TYPE_HEAL & cnt != SKILL_SPELL_HOLY_LIGHT & cnt != SKILL_SPELL_VANQUISH_HEX & cnt != SKILL_SPELL_UNCURSE & cnt != SKILL_SPELL_HEALING_RAIN & cnt != SKILL_SPELL_SENSE_OBJECT & cnt != SKILL_SPELL_RESTORE_BODY & cnt != SKILL_SPELL_RESTORE_SPIRIT & cnt != SKILL_SPELL_RESURRECTION ) {
						continue
					}
				}
				if ( zisyu == 5 ) {
					if ( sdataref(SKILL_DATAREF_TYPE, cnt) != SKILL_TYPE_SUMMON & cnt != SKILL_SPELL_MUTATION & cnt != SKILL_SPELL_FIRE_WALL & cnt != SKILL_SPELL_ACID_GROUND & cnt != SKILL_SPELL_MIST_OF_DARKNESS & cnt != SKILL_SPELL_MIST_OF_DAZZLING & cnt != SKILL_SPELL_WEB & cnt != SKILL_SPELL_ORACLE & cnt != SKILL_SPELL_DOMINATE ) {
						continue
					}
				}
				if ( zisyu == 6 ) {
					if ( sdataref(SKILL_DATAREF_TYPE, cnt) != SKILL_TYPE_TELEPORT & sdataref(SKILL_DATAREF_TYPE, cnt) != SKILL_TYPE_SP | cnt == SKILL_SPELL_WIZARDS_HARVEST | cnt == SKILL_SPELL_WISH | cnt == SKILL_SPELL_HOLY_LIGHT | cnt == SKILL_SPELL_VANQUISH_HEX | cnt == SKILL_SPELL_UNCURSE | cnt == SKILL_SPELL_SENSE_OBJECT | cnt == SKILL_SPELL_RESTORE_BODY | cnt == SKILL_SPELL_RESTORE_SPIRIT | cnt == SKILL_SPELL_RESURRECTION | cnt == SKILL_SPELL_METEOR | cnt == SKILL_SPELL_MUTATION | cnt == SKILL_SPELL_FIRE_WALL | cnt == SKILL_SPELL_ACID_GROUND | cnt == SKILL_SPELL_MIST_OF_DARKNESS | cnt == SKILL_SPELL_MIST_OF_DAZZLING | cnt == SKILL_SPELL_WEB | cnt == SKILL_SPELL_ORACLE | cnt == SKILL_SPELL_DOMINATE ) {
						continue
					}
				}
				plat += sdata(cnt, CHARA_PLAYER)
			loop
			plat = limit((plat + 1) / 150 + 2, 3, 10)
			if ( cdata(CDATA_PLATINUM, CHARA_PLAYER) >= plat ) {
				chatList 1, lang("いいよ", "Sure.")
			}
			chatList 0, lang("だめ", "Cancel.")
			buff = lang("この実習には" + plat + strplat + "かかるけどいい" + _kana(1), "This practice will cost you " + plat + "pp.")
			gosub *chat_select
			if ( chatval >= 1 ) {
				repeat MAX_SPELL - STARTING_SKILL_SPELL, STARTING_SKILL_SPELL
					if ( spell(cnt - STARTING_SKILL_SPELL) <= 0 ) {
						continue
					}
					if ( zisyu == 1 ) {
						if ( sdataref(SKILL_DATAREF_TYPE, cnt) != SKILL_TYPE_ARROW & sdataref(SKILL_DATAREF_TYPE, cnt) != SKILL_TYPE_BOLT ) {
							continue
						}
					}
					if ( zisyu == 2 ) {
						if ( sdataref(SKILL_DATAREF_TYPE, cnt) != SKILL_TYPE_BALL & cnt != SKILL_SPELL_METEOR | cnt == SKILL_SPELL_HEALING_RAIN ) {
							continue
						}
					}
					if ( zisyu == 3 ) {
						if ( sdataref(SKILL_DATAREF_TYPE, cnt) / EXT_SDATAREF != 1 ) {
							continue
						}
					}
					if ( zisyu == 4 ) {
						if ( sdataref(SKILL_DATAREF_TYPE, cnt) != SKILL_TYPE_HEAL & cnt != SKILL_SPELL_HOLY_LIGHT & cnt != SKILL_SPELL_VANQUISH_HEX & cnt != SKILL_SPELL_UNCURSE & cnt != SKILL_SPELL_HEALING_RAIN & cnt != SKILL_SPELL_SENSE_OBJECT & cnt != SKILL_SPELL_RESTORE_BODY & cnt != SKILL_SPELL_RESTORE_SPIRIT & cnt != SKILL_SPELL_RESURRECTION ) {
							continue
						}
					}
					if ( zisyu == 5 ) {
						if ( sdataref(SKILL_DATAREF_TYPE, cnt) != SKILL_TYPE_SUMMON & cnt != SKILL_SPELL_MUTATION & cnt != SKILL_SPELL_FIRE_WALL & cnt != SKILL_SPELL_ACID_GROUND & cnt != SKILL_SPELL_MIST_OF_DARKNESS & cnt != SKILL_SPELL_MIST_OF_DAZZLING & cnt != SKILL_SPELL_WEB & cnt != SKILL_SPELL_ORACLE & cnt != SKILL_SPELL_DOMINATE ) {
							continue
						}
					}
					if ( zisyu == 6 ) {
						if ( sdataref(SKILL_DATAREF_TYPE, cnt) != SKILL_TYPE_TELEPORT & sdataref(SKILL_DATAREF_TYPE, cnt) != SKILL_TYPE_SP | cnt == SKILL_SPELL_WIZARDS_HARVEST | cnt == SKILL_SPELL_WISH | cnt == SKILL_SPELL_HOLY_LIGHT | cnt == SKILL_SPELL_VANQUISH_HEX | cnt == SKILL_SPELL_UNCURSE | cnt == SKILL_SPELL_SENSE_OBJECT | cnt == SKILL_SPELL_RESTORE_BODY | cnt == SKILL_SPELL_RESTORE_SPIRIT | cnt == SKILL_SPELL_RESURRECTION | cnt == SKILL_SPELL_METEOR | cnt == SKILL_SPELL_MUTATION | cnt == SKILL_SPELL_FIRE_WALL | cnt == SKILL_SPELL_ACID_GROUND | cnt == SKILL_SPELL_MIST_OF_DARKNESS | cnt == SKILL_SPELL_MIST_OF_DAZZLING | cnt == SKILL_SPELL_WEB | cnt == SKILL_SPELL_ORACLE | cnt == SKILL_SPELL_DOMINATE ) {
							continue
						}
					}
					skillexp cnt, CHARA_PLAYER, 1000 + sdata(SKILL_ATTR_LER, CHARA_PLAYER) * 2
				loop
				cdata(CDATA_PLATINUM, CHARA_PLAYER) -= plat
				snd SOUNDLIST_DING3
				chatMore lang("実習は完了し" + _ta() + "潜在能力が落ちているはずなので、ゆっくり休んで" + _kure(), "The practice is now complete.")
				plat = 0
			}
		}
		gdata(GDATA_TEMPORARY_FLAGS) = 0
		goto *chat_end
	}
	if ( chatval == 70 ) {
		if ( cdata(CDATA_ROLE_SHOP_LEVEL, tc) <= 0 ) {
			repeat 50
				wolfp = rnd(gdata(GDATA_CROWD) + 1) + MAX_CHARA_SAVE
				if ( wolfp >= MAX_CHARA_TOTAL ) {
					continue cnt
				}
				if ( wolfp == tc ) {
					continue cnt
				}
				if ( wolfp == CHARA_PLAYER ) {
					continue cnt
				}
				if ( wolfp < MAX_CHARA_FOLLOWER ) {
					continue cnt
				}
				if ( cdata(CDATA_ROLE, wolfp) == ROLE_SHOP_TRADE ) {
					continue cnt
				}
				if ( cdata(CDATA_ID, wolfp) == CREATURE_ID_CITIZEN | cdata(CDATA_ID, wolfp) == CREATURE_ID_CITIZEN2 | cdata(CDATA_ID, wolfp) == CREATURE_ID_CITIZEN4 | cdata(CDATA_ID, wolfp) == CREATURE_ID_CITIZEN3 | cdata(CDATA_ID, wolfp) == CREATURE_ID_WEREWOLF | cdata(CDATA_ID, wolfp) == CREATURE_ID_FOX_SPIRIT | cdata(CDATA_ID, wolfp) == CREATURE_ID_SUNBARARIAN | cdata(CDATA_ID, wolfp) == CREATURE_ID_DETECTIVE | cdata(CDATA_ID, wolfp) == CREATURE_ID_WEREWOLF_DETECTIVE ) {
					cdata(CDATA_ROLE_SHOP_LEVEL, tc) = wolfp
					break
				}
			loop
			if ( cdata(CDATA_ID, wolfp) != CREATURE_ID_CITIZEN & cdata(CDATA_ID, wolfp) != CREATURE_ID_CITIZEN2 & cdata(CDATA_ID, wolfp) != CREATURE_ID_CITIZEN4 & cdata(CDATA_ID, wolfp) != CREATURE_ID_CITIZEN3 & cdata(CDATA_ID, wolfp) != CREATURE_ID_WEREWOLF & cdata(CDATA_ID, wolfp) != CREATURE_ID_FOX_SPIRIT & cdata(CDATA_ID, wolfp) != CREATURE_ID_SUNBARARIAN & cdata(CDATA_ID, wolfp) != CREATURE_ID_DETECTIVE & cdata(CDATA_ID, wolfp) != CREATURE_ID_WEREWOLF_DETECTIVE ) {
				cdata(CDATA_ROLE_SHOP_LEVEL, tc) = -1
			}
		}
		if ( cdata(CDATA_ROLE_SHOP_LEVEL, tc) > 0 ) {
			if ( cdata(CDATA_SANITY, tc) >= 5 | cdata(CDATA_ID, tc) == CREATURE_ID_WEREWOLF_DETECTIVE ) {
				chatMore lang("身辺調査をしてみた結果、どうも" + cdatan(CDATAN_NAME, cdata(CDATA_ROLE_SHOP_LEVEL, tc)) + "は正真正銘の人間のよう" + _da(), "From what we've gathered from our investigation, " + cdatan(CDATAN_NAME, cdata(CDATA_ROLE_SHOP_LEVEL, tc)) + " is most definitely a genuine human.")
				goto *chat_end
			}
			else {
				if ( cdata(CDATA_ID, cdata(CDATA_ROLE_SHOP_LEVEL, tc)) == CREATURE_ID_WEREWOLF | cdata(CDATA_ID, cdata(CDATA_ROLE_SHOP_LEVEL, tc)) == CREATURE_ID_FOX_SPIRIT | cdata(CDATA_ID, cdata(CDATA_ROLE_SHOP_LEVEL, tc)) == CREATURE_ID_SUNBARARIAN | cdata(CDATA_ID, cdata(CDATA_ROLE_SHOP_LEVEL, tc)) == CREATURE_ID_WEREWOLF_DETECTIVE ) {
					chatMore lang("身辺調査をしてみた結果、どうも" + cdatan(CDATAN_NAME, cdata(CDATA_ROLE_SHOP_LEVEL, tc)) + "は人に化けた魔物のよう" + _da() + "ヤツには気を付けて" + _kure(), "From what we've gathered from our investigation, " + cdatan(CDATAN_NAME, cdata(CDATA_ROLE_SHOP_LEVEL, tc)) + " is a monster disguising itself as a human.")
					goto *chat_end
				}
				if ( cdata(CDATA_ID, cdata(CDATA_ROLE_SHOP_LEVEL, tc)) == CREATURE_ID_CITIZEN | cdata(CDATA_ID, cdata(CDATA_ROLE_SHOP_LEVEL, tc)) == CREATURE_ID_CITIZEN2 | cdata(CDATA_ID, cdata(CDATA_ROLE_SHOP_LEVEL, tc)) == CREATURE_ID_CITIZEN4 | cdata(CDATA_ID, cdata(CDATA_ROLE_SHOP_LEVEL, tc)) == CREATURE_ID_CITIZEN3 | cdata(CDATA_ID, cdata(CDATA_ROLE_SHOP_LEVEL, tc)) == CREATURE_ID_DETECTIVE ) {
					chatMore lang("身辺調査をしてみた結果、どうも" + cdatan(CDATAN_NAME, cdata(CDATA_ROLE_SHOP_LEVEL, tc)) + "は正真正銘の人間のよう" + _da(), "From what we've gathered from our investigation, " + cdatan(CDATAN_NAME, cdata(CDATA_ROLE_SHOP_LEVEL, tc)) + " is most definitely a genuine human.")
					goto *chat_end
				}
			}
		}
		else {
			chatMore lang("現在は特に調査している人物はいない" + _na(), "We're not presently investigating anyone.")
			goto *chat_end
		}
		goto *chat_end
	}
	if ( chatval >= 10000 ) {
		clientguide
		rc = rtval(chatval - 10000)
		p = direction(cdata(CDATA_X, CHARA_PLAYER), cdata(CDATA_Y, CHARA_PLAYER), cdata(CDATA_X, rc), cdata(CDATA_Y, rc))
		if ( p == 1 ) {
			s = lang("西", "west")
		}
		else {
			if ( p == 2 ) {
				s = lang("東", "east")
			}
			else {
				if ( p == 3 ) {
					s = lang("北", "north")
				}
				else {
					s = lang("南", "south")
				}
			}
		}
		p = dist(cdata(CDATA_X, CHARA_PLAYER), cdata(CDATA_Y, CHARA_PLAYER), cdata(CDATA_X, rc), cdata(CDATA_Y, rc))
		repeat 1
			if ( rc == tc ) {
				s = lang("冷やかし" + _ka(1), "You kidding?")
				break
			}
			if ( cdata(CDATA_EXIST, rc) != CHAR_STATE_ALIVE ) {
				s = lang("奴なら今は死んでいる" + _yo(2), "Oh forget it, dead for now.")
				break
			}
			if ( p < 6 ) {
				s = lang(cdatan(CDATAN_NAME, rc) + "ならすぐ近くにいる" + _yo() + s + "の方を向いてごらん。", "Oh look carefully before asking, just turn " + s + ".")
				break
			}
			if ( p < 12 ) {
				s = lang("ちょっと前に" + s + "の方で見かけた" + _yo(), "I saw " + cdatan(CDATAN_NAME, rc) + " just a minute ago. Try " + s + ".")
				break
			}
			if ( p < 20 ) {
				s = lang(cdatan(CDATAN_NAME, rc) + "なら" + s + "の方角を探してごらん。", "Walk to " + s + " for a while, you'll find " + cdatan(CDATAN_NAME, rc) + ".")
				break
			}
			if ( p < 35 ) {
				s = lang(cdatan(CDATAN_NAME, rc) + "に会いたいのなら、" + s + "にかなり歩く必要があ" + _ru(), "If you want to meet " + cdatan(CDATAN_NAME, rc) + ", you have to considerably walk to " + s + ".")
				break
			}
			s = lang(cdatan(CDATAN_NAME, rc) + _ka(3) + "、ここから" + s + "の物凄く離れた場所にいるはず" + _da(), "You need to walk long way to " + s + " to meet " + cdatan(CDATAN_NAME, rc) + ".")
			break
		loop
		buff = s
		if ( cdata(CDATA_ROLE, tc) == ROLE_INFORMER ) {
			snd SOUNDLIST_PAYGOLD1
			cdata(CDATA_GOLD, CHARA_PLAYER) -= 100
		}
		goto *chat_default
	}
	if ( evid() == EVENT_SHOP_WANDER ) {
		levelexitby = 4
		chatteleport = 1
		snd SOUNDLIST_EXITMAP1
	}
	goto *chat_end

*chat_slave
	repeat 10
		if ( dorei == 2 ) {
			dorei2 = limit(cdata(CDATA_LEVEL, CHARA_PLAYER) / 2 + 5, 6, 130)
		}
		if ( dorei == 1 ) {
			dorei2 = limit(cdata(CDATA_LEVEL, CHARA_PLAYER) / 4 + 5, 6, 50)
		}
		if ( dorei == 0 ) {
			dorei2 = 5
		}
		flt dorei2
		fixlv = FIX_QUALITY_GOOD
		if ( cdata(CDATA_ROLE, tc) == ROLE_SLAVER ) {
			fltn "man"
		}
		else {
			fltn "horse"
		}
		characreate MAX_CHARA_NC, CREATURE_ID_BUG, -3, 0
		if ( cdata(CDATA_LEVEL, MAX_CHARA_NC) == 0 ) {
			chara_vanquish MAX_CHARA_NC
			continue
		}
		break
	loop
	listmax = 0
	buff = lang("そう" + _dana() + "" + cdatan(CDATAN_NAME, MAX_CHARA_NC) + "を" + calcslavevalue(MAX_CHARA_NC) + strgold + "でどう" + _da(1), "Okay. Let me check the stable... How about " + cnven(cdatan(CDATAN_NAME, MAX_CHARA_NC)) + " for " + calcslavevalue(MAX_CHARA_NC) + "gp. I'd say it's quite a bargain!")
	if ( cdata(CDATA_LEVEL, CHARA_PLAYER) >= 4 ) {
		chatList 2, lang("カタログAを見る(レベル" + limit(cdata(CDATA_LEVEL, CHARA_PLAYER) / 2 + 5, 6, 130) + "以下)", "Catalog A (Level < " + limit(cdata(CDATA_LEVEL, CHARA_PLAYER) / 2 + 5, 6, 130) + ")")
	}
	if ( cdata(CDATA_LEVEL, CHARA_PLAYER) >= 4 ) {
		chatList 3, lang("カタログBを見る(レベル" + limit(cdata(CDATA_LEVEL, CHARA_PLAYER) / 4 + 5, 6, 50) + "以下)", "Catalog B (Level < " + limit(cdata(CDATA_LEVEL, CHARA_PLAYER) / 4 + 5, 6, 50) + ")")
	}
	chatList 4, lang("カタログCを見る(レベル5以下)", "Catalog C (Level < 5)")
	if ( cdata(CDATA_GOLD, CHARA_PLAYER) >= calcslavevalue(MAX_CHARA_NC) ) {
		chatList 1, lang("買い取る", "I'll pay.")
	}
	chatList 0, lang("やめる", "Never mind.")
	chatesc = 1
	gosub *chat_select
	if ( chatval == 1 ) {
		txt lang(cdatan(CDATAN_NAME, MAX_CHARA_NC) + "を買い取った。", "You buy " + cnven(cdatan(CDATAN_NAME, MAX_CHARA_NC)) + ".")
		snd SOUNDLIST_PAYGOLD1
		cdata(CDATA_GOLD, CHARA_PLAYER) -= calcslavevalue(MAX_CHARA_NC)
		rc = MAX_CHARA_NC
		gosub *add_ally
		buff = lang(_thanks(2), "Thanks!")
		goto *chat_end
	}
	if ( chatval == 2 ) {
		dorei = 2
		goto *chat_slave
	}
	if ( chatval == 3 ) {
		dorei = 1
		goto *chat_slave
	}
	if ( chatval == 4 ) {
		dorei = 0
		goto *chat_slave
	}
	buff = lang("冷やかし" + _ka(1), "You kidding?")
	goto *chat_default

*chat_quest
	if ( qdata(QDATA_STATUS, rq) == QUEST_STATE_ONGOING ) {
		buff = lang("頼んでいた依頼は順調" + _kana(1), "What about my contract? Is everything alright?")
		goto *chat_default
	}
	val = 1
	gosub *talk_quest
	listmax = 0
	chatList 1, lang("受諾する", "I will take the job.")
	chatList 0, lang("やめる", "Not now.")
	chatesc = 1
	gosub *chat_select
	if ( chatval == 1 ) {
		p = 0
		repeat gdata(GDATA_CLIENT)
			if ( qdata(QDATA_EXIST, cnt) == QUEST_TYPE_NONE ) {
				continue
			}
			if ( qdata(QDATA_STATUS, cnt) != QUEST_STATE_NONE ) {
				p++
			}
		loop
		if ( p >= 5 ) {
			buff = lang("未完了の依頼が多すぎじゃない" + _kana(1) + "この仕事は、安心してまかせられない" + _yo(), "Hey, you've got quite a few unfinished contracts. See me again when you have finished them.")
			goto *chat_default
		}
		repeat 5
			p = gdata(GDATA_QUEST_POOL + cnt)
			f = 0
			repeat 5
				if ( gdata(GDATA_QUEST_POOL + cnt) == p ) {
					f++
				}
			loop
			if ( qdata(QDATA_STATUS, p) == QUEST_STATE_NONE | f > 1 ) {
				gdata(GDATA_QUEST_POOL + cnt) = rq
				break
			}
		loop
		if ( qdata(QDATA_EXIST, rq) == QUEST_TYPE_DELIVER ) {
			if ( inv_getfreeid(CHARA_PLAYER) == (-1) ) {
				buff = lang("どうやらバックパックが一杯のよう" + _da() + "持ち物を整理してまた来て" + _kure(), "It seems your backpack is already full. Come see me again when you're ready.")
				goto *chat_default
			}
		}
		if ( qdata(QDATA_EXIST, rq) == QUEST_TYPE_ESCORT ) {
			f = get_freeally()
			if ( f == 0 ) {
				buff = lang("これ以上仲間を連れて行けないよう" + _da() + "人数を調整してまた来て" + _kure(), "It seems your party is already full. Come see me again when you're ready.")
				goto *chat_default
			}
			repeat
				if ( cnt == 99 ) {
					dbid = CREATURE_ID_TOWN_CHILD
				}
				else {
					dbid = 0
				}
				flt qdata(QDATA_LEVEL, rq) + cnt, 1
				fltn "man"
				characreate MAX_CHARA_NC, dbid, -3, 0
				f = stat
				if ( f == 1 ) {
					repeat MAX_CHARA_FOLLOWER
						if ( cdata(CDATA_EXIST, cnt) == CHAR_STATE_DEAD ) {
							continue
						}
						if ( cdata(CDATA_ID, cnt) == cdata(CDATA_ID, rc) ) {
							if ( cbit(CHARA_BIT_BODYGUARD, cnt) == 1 ) {
								f = 0
								break
							}
						}
					loop
				}
				if ( f == 1 ) {
					break
				}
			loop
			rc = MAX_CHARA_NC
			gosub *add_ally
			cbitmod CHARA_BIT_BODYGUARD, rc, 1
			qdata(QDATA_PARAM2, rq) = cdata(CDATA_ID, rc)
		}
		qdata(QDATA_STATUS, rq) = QUEST_STATE_ONGOING
		if ( qdata(QDATA_DEADLINE, rq) == (-1) ) {
			goto *chat_instaQuest
		}
		buff = lang(_thanks() + "期待してい" + _ru(), "Thanks. I'm counting on you.")
		if ( qdata(QDATA_EXIST, rq) == QUEST_TYPE_DELIVER ) {
			qdata(QDATA_QUEST_TARGET, qdata(QDATA_DEST_CLIENT, rq))++
			flt
			itemcreate 0, qdata(QDATA_DEST_ITEM, rq), cdata(CDATA_X, CHARA_PLAYER), cdata(CDATA_Y, CHARA_PLAYER), 0
			txt lang(itemname(ci, 1) + "をバックパックに入れた。", "You put " + itemname(ci, 1) + " in your backpack.")
			snd SOUNDLIST_INV
			gosub *calcBurdenPc
			buff = lang("これが依頼の品物" + _da() + "期限には十分気をつけて" + _kure(), "Here's the package. Be aware of the deadline. I don't want to report you to the guards.")
		}
	}
	else {
		buff = lang("冷やかし" + _ka(1), "You kidding?")
	}
	goto *chat_default

*chat_instaQuest
	if ( qdata(QDATA_EXIST, rq) == QUEST_TYPE_HUNT | qdata(QDATA_EXIST, rq) == QUEST_TYPE_HUNTEX ) {
		chatMore lang("では、早速案内するので、モンスターを一匹残らず退治して" + _kure(), "Great! I'll guide you to the place, kill them all!")
	}
	if ( qdata(QDATA_EXIST, rq) == QUEST_TYPE_HARVEST ) {
		chatMore lang("畑までは案内するから、しっかりと期限内に作物を納入して" + _kure(), "Fine. I'll take you to my farm.")
	}
	if ( qdata(QDATA_EXIST, rq) == QUEST_TYPE_MINEFIELD ) {
		chatMore lang("案内するからついて来て" + _kure() + "頼むから罠に引っかかって死なないで" + _kure(), "Please follow my lead. I don't want you to get caught in a trap and die.")
	}
	if ( qdata(QDATA_EXIST, rq) == QUEST_TYPE_PARTY ) {
		chatMore lang("ついて来て" + _kure() + "パーティー会場まで案内する" + _yo(), "Alright, I'll take you to the party now.")
	}
	if ( gdata(GDATA_FLAG_DUEL_TARGET) > 0 ) {
		snd SOUNDLIST_FAIL1
		txt_duel2
		goto *chat_end
	}
	gdata(GDATA_QUEST) = qdata(QDATA_EXIST, rq), qdata(QDATA_TYPE, rq), rq, 1
	gdata(GDATA_RETURN_AREA) = gdata(GDATA_AREA), gdata(GDATA_LEVEL), cdata(CDATA_X, CHARA_PLAYER), cdata(CDATA_Y, CHARA_PLAYER)
	gdata(GDATA_TELEPORT_AREA) = AREA_QUEST
	gdata(GDATA_TELEPORT_LEVEL) = 1
	levelexitby = 2
	chatteleport = 1
	goto *chat_end

*chat_train
	tcbk = tc
	menucycle = 0
	gosub *com_charainfo
	gosub *chat_refresh
	if ( csskill == (-1) ) {
		buff = lang("訓練が必要なときは、声をかけて" + _kure(), "Come see me again when you need more training.")
		goto *chat_default
	}
	listmax = 0
	if ( csctrl == 2 ) {
		buff = lang(skillname(csskill) + "の能力を訓練するには" + calctraincost(csskill, cc) + strplat + "かかるけどいい" + _kana(1), "Training " + skillname(csskill) + " will cost you " + calctraincost(csskill, cc) + "pp.")
		if ( cdata(CDATA_PLATINUM, CHARA_PLAYER) >= calctraincost(csskill, cc) ) {
			chatList 1, lang("訓練する", "Train me.")
		}
	}
	else {
		buff = lang(skillname(csskill) + "の能力を習得するには" + calclearncost(csskill, cc) + strplat + "かかるけどいい" + _kana(1), "Learning " + skillname(csskill) + " will cost you " + calclearncost(csskill, cc) + "pp.")
		item_find ITEM_ID_SKILL_TICKET, 3, 1
		if ( stat != (-1) ) {
			ci = stat
			if ( inv(INV_ITEM_NUM, ci) >= 1 ) {
				chatList 2, lang("スキルチケットで習得する", "Teach me the skill in exchange for a skill ticket.")
			}
		}
		if ( cdata(CDATA_PLATINUM, CHARA_PLAYER) >= calclearncost(csskill, cc) ) {
			chatList 1, lang("習得する", "Teach me the skill.")
		}
	}
	chatList 0, lang("やめる", "Never mind.")
	chatesc = 1
	gosub *chat_select
	if ( chatval == 1 | chatval == 2 ) {
		snd SOUNDLIST_PAYGOLD1
		if ( csctrl == 2 ) {
			cdata(CDATA_PLATINUM, CHARA_PLAYER) -= calctraincost(csskill, cc)
			modgrowth cc, csskill, 100
			buff = lang("訓練は完了し" + _ta() + "潜在能力が伸びているはずなので、後は自分で鍛えて" + _kure(), "Well done. You've got more room to develop than anyone else I've ever drilled. Keep training.")
			screenupdate = -1
			gosub *screen_draw
			tc = tcbk
			goto *chat_train
		}
		else {
			if ( chatval == 1 ) {
				cdata(CDATA_PLATINUM, CHARA_PLAYER) -= calclearncost(csskill, cc)
			}
			if ( chatval == 2 ) {
				item_find ITEM_ID_SKILL_TICKET, 3, 1
				if ( stat != (-1) ) {
					ci = stat
					inv(INV_ITEM_NUM, ci)--
				}
			}
			skillgain cc, csskill
			gdata(GDATA_LEARNED)++
			buff = lang("可能な限りの知識は教え" + _ta() + "後は存分に訓練して" + _kure(), "I've taught you all that I know of the skill. Now develop it by yourself.")
		}
	}
	else {
		buff = lang("訓練が必要なときは、声をかけて" + _kure(), "Come see me again when you need more training.")
	}
	goto *chat_default

*chat_invest
	listmax = 0
	buff = lang("投資をしてくれる" + _noka(1) + "これだけかかるけどいいの" + _kana(1), "Oh, do you want to invest in my shop? It will cost you " + calcinvestvalue() + " golds. I hope you got the money.")
	if ( cdata(CDATA_GOLD, CHARA_PLAYER) >= calcinvestvalue() ) {
		chatList 1, lang("投資する(" + calcinvestvalue() + strgold + ")", "Invest (" + calcinvestvalue() + strgold + ")")
	}
	if ( cdata(CDATA_GOLD, CHARA_PLAYER) >= calcinvestvalue50() ) {
		chatList 2, lang("50規模投資する(" + calcinvestvalue50() + strgold + ")", "Invest 50 (" + calcinvestvalue50() + strgold + ")")
	}
	chatList 0, lang("やめる", "Reject")
	chatesc = 1
	gosub *chat_select
	if ( chatval == 1 ) {
		snd SOUNDLIST_PAYGOLD1
		cdata(CDATA_GOLD, CHARA_PLAYER) -= calcinvestvalue()
		gosub *expInvesting
		cdata(CDATA_ROLE_SHOP_LEVEL, tc) += rnd(2) + 2
		repeat MAX_CHARA_FOLLOWER - 1, 1
			if ( cdata(CDATA_EXIST, cnt) != CHAR_STATE_ALIVE ) {
				continue
			}
			if ( dist(cdata(CDATA_X, cc), cdata(CDATA_Y, cc), cdata(CDATA_X, cnt), cdata(CDATA_Y, cnt)) > sdataref(SKILL_DATAREF_TG_RANGE, SKILL_SPACT_CHEER) \ EXT_SDATAREF + 1 ) {
				continue
			}
			if ( fov_los(cdata(CDATA_X, cc), cdata(CDATA_Y, cc), cdata(CDATA_X, cnt), cdata(CDATA_Y, cnt)) == 0 ) {
				continue
			}
			skillexp SKILL_NORMAL_INVESTING, cnt, 300
		loop
		buff = lang(_thanks(2), "Thanks!")
	}
	if ( chatval == 2 ) {
		snd SOUNDLIST_PAYGOLD1
		cdata(CDATA_GOLD, CHARA_PLAYER) -= calcinvestvalue50()
		repeat 20
			gosub *expInvesting
		loop
		cdata(CDATA_ROLE_SHOP_LEVEL, tc) += 50
		repeat MAX_CHARA_FOLLOWER - 1, 1
			if ( cdata(CDATA_EXIST, cnt) != CHAR_STATE_ALIVE ) {
				continue
			}
			if ( dist(cdata(CDATA_X, cc), cdata(CDATA_Y, cc), cdata(CDATA_X, cnt), cdata(CDATA_Y, cnt)) > sdataref(SKILL_DATAREF_TG_RANGE, SKILL_SPACT_CHEER) \ EXT_SDATAREF + 1 ) {
				continue
			}
			if ( fov_los(cdata(CDATA_X, cc), cdata(CDATA_Y, cc), cdata(CDATA_X, cnt), cdata(CDATA_Y, cnt)) == 0 ) {
				continue
			}
			skillexp SKILL_NORMAL_INVESTING, cnt, 6000
		loop
		buff = lang(_thanks(2), "Thanks!")
	}
	if ( chatval != 2 & chatval != 1 ) {
		buff = lang("冷やかし" + _ka(1), "You kidding?")
	}
	if ( gdata(GDATA_AREA) == AREA_HOME ) {
		calccosthire
	}
	goto *chat_default

*chat_end
	questteleport = 0
	hyouzyou = 0
	if ( evochat >= 1 ) {
		redraw 0
		gosub *screen_draw
		gosub *screen_fade
		gsel 4
		pos 0, 0
		picload exedir + "graphic\\face1" + devfile + ".bmp", 1
		gsel 0
		evochat = 0
	}
	if ( cdata(CDATA_EVOCHAT_POINTS, tc) >= 10 ) {
		cdata(CDATA_EMO_ICON, tc) = 17 + 100 * 3
		cdata(CDATA_EVOCHAT_POINTS, tc) = 10
	}
	if ( scenemode == 0 ) {
		screenupdate = -1
		gosub *screen_draw
	}
	return

*chat_select
	cs_bk = -1
	key_list = key_enter
	repeat listmax
		key_list(cnt) = key_select(cnt)
		keyrange++
	loop
	keyrange = listmax
	key = ""
	objprm 0, ""
	keylog = ""
	gosub *chat_draw
*chat_select_WHILE1
	gosub *chat_draw2
	font lang(cfg_font1, cfg_font2), 14 - en * 2, 0
	cs_listbk
	repeat keyrange
		if ( cs == cnt ) {
			color 100, 160, 250
		}
		else {
			color 255, 255, 255
		}
		noteget s, cnt
		if ( evochat != 2 ) {
			x = wx + 136
			y = wy + wh - 56 - keyrange * 19 + cnt * 19 + 2
		}
		if ( evochat == 2 ) {
			x = wx + 66
			y = wy + wh - 56 - keyrange * 19 + cnt * 19 + 2
		}
		display_key x, y, cnt
		cs_list listn(0, cnt), x + 30, y, 18, 4, 0
	loop
	cs_bk = cs
	redraw 1
	await cfg_wait1
	key_check
	cursor_check
	stick a, 128
	if ( a == 128 ) {
		if ( scenemode ) {
			scene_cut = 1
			goto *chat_select_WEND1
		}
	}
	p = -1
	repeat keyrange
		if ( key == key_select(cnt) ) {
			p = list(0, cnt)
			break
		}
	loop
	if ( p != (-1) ) {
		chatval = p
		goto *chat_select_WEND1
	}
	if ( key == key_cancel ) {
		if ( chatesc == 1 ) {
			chatval = -1
			goto *chat_select_WEND1
		}
	}
	goto *chat_select_WHILE1
*chat_select_WEND1
	snd SOUNDLIST_MORE1
	cs = 0
	listmax = 0
	return

*chat_draw
	if ( scenemode == 0 ) {
		screenupdate = -1
		gosub *screen_draw
		cs = 0
	}
	talk_conv buff, 56 - en * 3
	chatpicloaded = 0
	redraw 0
	if ( evochat != 2 ) {
		wx = (windoww - 600) / 2 + inf_screenx
		wy = winposy(380)
		ww = 600
		wh = 380
	}
	if ( evochat == 2 ) {
		wx = (windoww - (-280)) / 2 + inf_screenx
		wy = winposy(280)
		ww = 1480
		wh = 280
	}
	if ( evochat != 2 ) {
		gmode 6, , , 80
		pos wx + 4, wy - 16
		gcopy 7, 0, 0, 600, 380
	}
	if ( evochat == 2 ) {
		gmode 6, , , 80
		pos wx + 4 + 750, wy - 16 - 100
		gcopy 7, 0, 0, 1480, 280
	}
*chat_draw2
	redraw 0
	gmode 2
	pos wx, wy - 20
	gcopy 7, 0, 0, 600, 380
	if ( cdata(CDATA_PORTRAIT, tc) >= 0 | scenemode & cdata(CDATA_FACE, tc) == 0 ) {
		if ( cdata(CDATA_PORTRAIT, tc) < 80 ) {
			p = cdata(CDATA_SEX, tc) * 80 + cdata(CDATA_PORTRAIT, tc)
		}
		else {
			p = cdata(CDATA_SEX, tc) * 80 + cdata(CDATA_PORTRAIT, tc) - 80
		}
		if ( scenemode ) {
			p = int(actor(1, rc))
			if ( p >= 160 ) {
				p = p - 160
			}
		}
		if ( evochat != 2 ) {
			pos wx + 42, wy + 42
			gzoom 80, 112, 4, p \ 16 * 48, p / 16 * 72, 48, 72
		}
		if ( evochat == 2 ) {
			pos windoww / 2 - 80, windowh - 88 - 224
			gzoom 160, 224, 4, p \ 16 * 48, p / 16 * 72, 48, 72, 1
		}
	}
	else {
		if ( cdata(CDATA_FACE, tc) == 0 ) {
			s = exedir + "user\\graphic\\face" + abs(cdata(CDATA_PORTRAIT, tc) + 1) + ".bmp"
		}
		if ( cdata(CDATA_FACE, tc) > 0 ) {
			s = exedir + "\\user\\graphic2\\face" + cdata(CDATA_FACE, tc) + "_B.bmp"
			if ( hyouzyou > 0 ) {
				if ( hyouzyou == 7 ) {
					s = exedir + "\\user\\graphic2\\face" + cdata(CDATA_FACE, tc) + "_H.bmp"
				}
				if ( hyouzyou == 6 ) {
						s = exedir + "\\user\\graphic2\\face" + cdata(CDATA_FACE, tc) + "_Q.bmp"
				}
				if ( hyouzyou == 5 ) {
						s = exedir + "\\user\\graphic2\\face" + cdata(CDATA_FACE, tc) + "_A.bmp"
				}
				if ( hyouzyou == 4 ) {
					s = exedir + "\\user\\graphic2\\face" + cdata(CDATA_FACE, tc) + "_B.bmp"
				}
				if ( hyouzyou == 3 ) {
					await 1000
					s = exedir + "\\user\\graphic2\\face" + cdata(CDATA_FACE, tc) + "_H.bmp"
				}
				if ( hyouzyou == 1 ) {
					hyouzyou = 4
					await 1000
					s = exedir + "\\user\\graphic2\\face" + cdata(CDATA_FACE, tc) + "_F.bmp"
				}
				if ( hyouzyou == 2 ) {
					hyouzyou = 4
					await 1000
					s = exedir + "\\user\\graphic2\\face" + cdata(CDATA_FACE, tc) + "_E.bmp"
				}
			}
			if ( cdata(CDATA_EMO_ICON, tc) \ 100 == 18 | cdata(CDATA_CONDITION_ANGRY, tc) > 0 ) {
				s = exedir + "\\user\\graphic2\\face" + cdata(CDATA_FACE, tc) + "_A.bmp"
			}
			if ( cdata(CDATA_EMO_ICON, tc) \ 100 == 21 ) {
				s = exedir + "\\user\\graphic2\\face" + cdata(CDATA_FACE, tc) + "_Q.bmp"
			}
			if ( cdata(CDATA_EMO_ICON, tc) \ 100 == 6 ) {
				s = exedir + "\\user\\graphic2\\face" + cdata(CDATA_FACE, tc) + "_F.bmp"
			}
			if ( cdata(CDATA_EMO_ICON, tc) \ 100 == 17 ) {
				s = exedir + "\\user\\graphic2\\face" + cdata(CDATA_FACE, tc) + "_H.bmp"
			}
			if ( cdata(CDATA_HP, tc) < cdata(CDATA_MAX_HP, tc) / 2 | cdata(CDATA_EMO_ICON, tc) \ 100 == 26 ) {
				s = exedir + "\\user\\graphic2\\face" + cdata(CDATA_FACE, tc) + "_E.bmp"
			}
		}
		exist s
		if ( cdata(CDATA_FACE, tc) > 0 ) {
			if ( strsize == (-1) ) {
				p = cdata(CDATA_PIC, tc) \ COLOR_TINT_MULT + cdata(CDATA_CHARA_PIC, tc) * COLOR_TINT_MULT, (cdata(CDATA_PIC, tc) - cdata(CDATA_CHARA_PIC, tc) * COLOR_TINT_MULT) / COLOR_TINT_MULT
				chara_preparepic p, p(1)
				if ( evochat != 2 ) {
					pos wx + 82, wy + 125 - chipc(CHIPC_F, p)
					gmode 2, chipc(CHIPC_WIDTH, p), chipc(CHIPC_HEIGHT, p)
					grotate 5, 0, 960, 0, chipc(CHIPC_WIDTH, p) * 2, chipc(CHIPC_HEIGHT, p) * 2
				}
				if ( evochat == 2 ) {
					pos windoww / 2, windowh - 88 - chipc(CHIPC_HEIGHT, p) * 3
					gmode 2, chipc(CHIPC_WIDTH, p), chipc(CHIPC_HEIGHT, p)
					grotate 5, 0, 960, 0, chipc(CHIPC_WIDTH, p) * 6, chipc(CHIPC_HEIGHT, p) * 6
				}
			}
			else {
				if ( chatpicloaded == 0 ) {
					gsel 4
					pos 0, 0
					picload s, 1
					gsel 0
					chatpicloaded = 1
				}
				if ( evochat != 2 ) {
					pos windoww - 300, windowh - 588
					gcopy 4, 0, 0, 300, 500
				}
				if ( evochat == 2 ) {
					pos windoww / 2 - 150, windowh - 588
					gcopy 4, 0, 0, 300, 500
				}
			}
		}
		if ( cdata(CDATA_FACE, tc) == 0 ) {
			if ( strsize == (-1) ) {
				p = cdata(CDATA_PIC, tc) \ COLOR_TINT_MULT + cdata(CDATA_CHARA_PIC, tc) * COLOR_TINT_MULT, (cdata(CDATA_PIC, tc) - cdata(CDATA_CHARA_PIC, tc) * COLOR_TINT_MULT) / COLOR_TINT_MULT
				chara_preparepic p, p(1)
				if ( evochat != 2 ) {
					pos wx + 82, wy + 125 - chipc(CHIPC_F, p)
					gmode 2, chipc(CHIPC_WIDTH, p), chipc(CHIPC_HEIGHT, p)
					grotate 5, 0, 960, 0, chipc(CHIPC_WIDTH, p) * 2, chipc(CHIPC_HEIGHT, p) * 2
				}
				if ( evochat == 2 ) {
					pos windoww / 2, windowh - 88 - chipc(CHIPC_HEIGHT, p) * 3
					gmode 2, chipc(CHIPC_WIDTH, p), chipc(CHIPC_HEIGHT, p)
					grotate 5, 0, 960, 0, chipc(CHIPC_WIDTH, p) * 6, chipc(CHIPC_HEIGHT, p) * 6
				}
			}
			else {
				s = exedir + "user\\graphic\\face" + abs(cdata(CDATA_PORTRAIT, tc) + 1) + ".bmp"
				if ( chatpicloaded == 0 ) {
					gsel 4
					pos 0, 0
					picload s, 1
					gsel 0
					chatpicloaded = 1
				}
				if ( evochat != 2 ) {
					pos wx + 42, wy + 42
					gzoom 80, 112, 4, 0, 0, 80, 112
				}
				if ( evochat == 2 ) {
					pos windoww / 2 - 80, windowh - 88 - 224
					gzoom 160, 224, 4, 0, 0, 80, 112, 1
				}
			}
		}
	}
	font lang(cfg_font1, cfg_font2), 10 - en * 2, 0
	color 0, 0, 0
	if ( scenemode == 0 & evochat != 2 ) {
		if ( cdata(CDATA_SPRITE_SIZE_MILK, tc) < 0 ) {
			pos wx + 35, wy + 160
			mes lang("size:" + cdata(CDATA_SPRITE_SIZE_MILK, tc) + " ", "size:" + cdata(CDATA_SPRITE_SIZE_MILK, tc) + " ")
		}
		display_topic lang("友好", "Impress"), wx + 28, wy + 170
		if ( evochat == 0 ) {
			display_topic lang("興味", "Attract"), wx + 28, wy + 225
			if ( tc < MAX_CHARA_FOLLOWER ) {
				display_topic lang("記念日", "Anniversary"), wx + 28, wy + 280
			}
		}
		if ( evochat == 1 ) {
			display_topic lang("行動力", "Action"), wx + 28, wy + 225
			display_topic lang("幸福度", "Happiness"), wx + 28, wy + 280
		}
	}
	if ( ohanasi6 == 100 ) {
		font lang(cfg_font1, cfg_font2), 13 - en * 2, 0
		color 20, 10, 5
		if ( ohanasi2 >= 0 ) {
			gosub *setHistory1
			pos wx + 200, wy + 70
			mes s
		}
		if ( ohanasi2 != 0 ) {
			gosub *setHistory2
			pos wx + 200, wy + 70 + 1 * 15
			mes s
		}
		if ( ohanasi3 != 0 ) {
			gosub *setHistory3
			pos wx + 200, wy + 70 + 2 * 15
			mes s
		}
		if ( ohanasi4 != 0 ) {
			gosub *setHistory4
			pos wx + 200, wy + 70 + 3 * 15
			mes s
		}
		if ( ohanasi5 != 0 ) {
			gosub *setHistory5
			pos wx + 200, wy + 70 + 4 * 15
			mes s
		}
	}
	font lang(cfg_font1, cfg_font2), 12 + sizefix - en * 2, 1
	color 20, 10, 5
	if ( cdatan(CDATAN_AKA, tc) == "" ) {
		s = cdatan(CDATAN_NAME, tc) + " "
	}
	else {
		s = lang(cdatan(CDATAN_AKA, tc) + " " + cdatan(CDATAN_NAME, tc) + " ", cdatan(CDATAN_NAME, tc) + " of " + cdatan(CDATAN_AKA, tc) + " ")
	}
	if ( evochat != 2 ) {
		if ( cdatan(CDATAN_NEWSEX, tc) == lang("両性具有", "hermaphrodite") ) {
			s += lang("両性具有", "hermaphrodite")
		}
		if ( cdatan(CDATAN_NEWSEX, tc) == lang("なし", "none") ) {
			s += lang("性別なし", "none")
		}
		if ( cdatan(CDATAN_NEWSEX, tc) == lang("男性", "male") ) {
			s += lang("男性", "male")
		}
		if ( cdatan(CDATAN_NEWSEX, tc) == lang("女性", "female") ) {
			s += lang("女性", "female")
		}
		if ( cdatan(CDATAN_NEWSEX, tc) == lang("自称男性", "trans-male") ) {
			s += lang("自称男性", "trans-male")
		}
		if ( cdatan(CDATAN_NEWSEX, tc) == lang("自称女性", "trans-female") ) {
			s += lang("自称女性", "trans-female")
		}
		if ( cdatan(CDATAN_NEWSEX, tc) == "" ) {
			if ( cdata(CDATA_SEX, tc) == 0 ) {
				s += cnven(strmale)
			}
			else {
				s += cnven(strfemale)
			}
		}
		if ( cdatan(CDATAN_AKA, tc) != "" ) {
			s += lang(" 名声 ", " Fame: ") + cdata(CDATA_FAME, tc)
		}
		if ( cdata(CDATA_ROLE, tc) == ROLE_SHOP_TRADE ) {
			if ( cdata(CDATA_ROLE_SHOP_LEVEL, tc) == 0 ) {
				cdata(CDATA_ROLE_SHOP_LEVEL, tc) = 10
			}
		}
		if ( cdata(CDATA_ROLE, tc) >= ROLE_SHOP_MIN & cdata(CDATA_ROLE, tc) < ROLE_GUEST_MIN | cdata(CDATA_ROLE, tc) == ROLE_GUEST_MERCHANT ) {
			s += lang(" 店の規模:", " Shop Rank:") + cdata(CDATA_ROLE_SHOP_LEVEL, tc) + "\n     Restocks in: " + ( cdata(CDATA_ROLE_RESTOCK, tc) - (gdata(GDATA_HOUR) + gdata(GDATA_DAY) * 24 + gdata(GDATA_MONTH) * 24 * 30 + gdata(GDATA_YEAR) * 24 * 30 * 12)) + " hours"
		}
		if ( gdata(GDATA_GOD_DETECT) ) {
			s += " (" + godname(cdata(CDATA_GOD, tc)) + ")"
		}
		if ( scenemode ) {
			s = actor(0, rc)
		}
	}
	if ( evochat != 2 ) {
		pos wx + 120, wy + 16
		mes s
	}
	if ( evochat == 2 ) {
		pos wx + 50, wy + 16
		mes s
	}
	font lang(cfg_font1, cfg_font2), 13 - en * 2, 0
	color 20, 10, 5
	if ( scenemode == 0 & evochat != 2 ) {
		if ( chatval(2) == 1 ) {
			s = _impression(implevel(cdata(CDATA_IMPRESSION, tc)))
			if ( cdata(CDATA_IMPRESSION, tc) < 150 ) {
				s(1) = "" + cdata(CDATA_IMPRESSION, tc)
			}
			else {
				s(1) = "???"
			}
			pos wx + 32, wy + 198
			mes "(" + s(1) + ")" + s
			if ( tc < MAX_CHARA_FOLLOWER | cbit(CHARA_BIT_LIVESTOCK, tc) == 1 ) {
				s = _impression2(implevel2(cdata(CDATA_MASTER_SERVANT, tc)))
				s(1) = "" + cdata(CDATA_MASTER_SERVANT, tc)
				pos wx + 32, wy + 212
				mes "(" + s(1) + ")" + s
				if ( cdata(CDATA_JOIN_DATE_MONTH, tc) == 0 ) {
					cdata(CDATA_JOIN_DATE_MONTH, tc) = gdata(GDATA_MONTH)
				}
				if ( cdata(CDATA_JOIN_DATE_DAY, tc) == 0 ) {
					cdata(CDATA_JOIN_DATE_DAY, tc) = gdata(GDATA_DAY)
				}
				if ( cdata(CDATA_JOIN_DATE_YEAR, tc) == 0 ) {
					cdata(CDATA_JOIN_DATE_YEAR, tc) = gdata(GDATA_YEAR)
				}
				if ( evochat == 0 ) {
					pos wx + 50, wy + 310
					mes "" + cdata(CDATA_JOIN_DATE_MONTH, tc) + "/" + cdata(CDATA_JOIN_DATE_DAY, tc)
				}
			}
			if ( evochat == 1 ) {
				if ( cdata(CDATA_EVOCHAT_POINTS, CHARA_PLAYER) > 0 ) {
					repeat cdata(CDATA_EVOCHAT_POINTS, CHARA_PLAYER)
						pos wx + 26 + cnt * 8, wy + 255
						gcopy 3, 784, 360, 16, 16
					loop
				}
				if ( cdata(CDATA_EVOCHAT_POINTS, tc) > 0 ) {
					repeat cdata(CDATA_EVOCHAT_POINTS, tc)
						pos wx + 26 + cnt * 8, wy + 310
						gcopy 3, 768, 360, 16, 16
					loop
				}
			}
			if ( evochat == 0 ) {
				if ( cdata(CDATA_INTEREST, tc) >= 0 ) {
					repeat cdata(CDATA_INTEREST, tc) / 5 + 1
						pos wx + 26 + cnt * 4, wy + 255
						gcopy 3, 16, 360, 16, 16
					loop
				}
			}
		}
		else {
			color 0, 0, 0
			pos wx + 60, wy + 198
			mes "-"
			pos wx + 60, wy + 245
			mes "-"
		}
	}
	font lang(cfg_font1, cfg_font2), 14 - en * 2, 0
	color 20, 10, 5
	notesel buff
	if ( evochat != 2 ) {
		repeat noteinfo(0)
			p = cnt
			x = wx + 150
			y = wy + 43 + cnt * 19
			noteget s, p
			pos x, y
			mes s
		loop
	}
	return

*shop_init
	if ( tc > CHARA_PLAYER ) {
		if ( cdata(CDATA_ROLE, tc) == ROLE_SHOP_TRADE ) {
			gosub *shop_tradePrice
		}
	}
	mode = MODELIST_SHOP
	file = "shoptmp.s2"
	fmode = 4
	gosub *game_ctrlFile
	if ( cdata(CDATA_ROLE_FILE_ID, tc) == 0 ) {
		if ( cdata(CDATA_ROLE, tc) == ROLE_SHOP_WANDER | cdata(CDATA_ROLE, tc) == ROLE_GUEST_MERCHANT ) {
			cdata(CDATA_ROLE_FILE_ID, tc) = 1
		}
		else {
			gdata(GDATA_COUNT_SHOP)++
			cdata(CDATA_ROLE_FILE_ID, tc) = gdata(GDATA_COUNT_SHOP)
		}
		gosub *shop_restock
	}
	else {
		file = "shop" + invfile + ".s2"
		existwrapper exedir + "tmp\\" + file
		if ( strsize == (-1) | gdata(GDATA_HOUR) + gdata(GDATA_DAY) * 24 + gdata(GDATA_MONTH) * 24 * 30 + gdata(GDATA_YEAR) * 24 * 30 * 12 >= cdata(CDATA_ROLE_RESTOCK, tc) ) {
			gosub *shop_restock
		}
		else {
			fmode = 3
			gosub *game_ctrlFile
		}
	}
	invfile = cdata(CDATA_ROLE_FILE_ID, tc)
	goto *shop_end

*shop
	mode = MODELIST_SHOP
	file = "shoptmp.s2"
	fmode = 4
	gosub *game_ctrlFile
	file = "shop" + invfile + ".s2"
	fmode = 3
	gosub *game_ctrlFile
	shoptrade = 0
	if ( tc > CHARA_PLAYER ) {
		if ( cdata(CDATA_ROLE, tc) == ROLE_SHOP_TRADE ) {
			shoptrade = 1
		}
	}
	goto *com_inventory

*shop_end
	file = "shop" + invfile + ".s2"
	fmode = 4
	gosub *game_ctrlFile
	file = "shoptmp.s2"
	fmode = 3
	gosub *game_ctrlFile
	mode = MODELIST_MAIN
	return

*shop_restock
	inv_getheader -1
	repeat invrange, invhead
		inv(INV_ITEM_NUM, cnt) = 0
	loop
	p = 40 + cdata(CDATA_ROLE_SHOP_LEVEL, tc) * 2 / 3
	if ( p > 120 ) {
		p = 120
	}
	if ( cdata(CDATA_ROLE, tc) == ROLE_SHOP_BLACKMARKET ) {
		p = 7 + limit(cdata(CDATA_ROLE_SHOP_LEVEL, tc) / 7, 1, 30)
	}
	if ( cdata(CDATA_ROLE, tc) == ROLE_SHOP_ARMOR ) {
		p = 15 + limit(cdata(CDATA_ROLE_SHOP_LEVEL, tc) / 7, 1, 120)
	}
	if ( cdata(CDATA_ROLE, tc) == ROLE_SHOP_WANDER ) {
		p = 6 + rnd(4)
	}
	if ( cdata(CDATA_ROLE, tc) == ROLE_GUEST_MERCHANT ) {
		p = 6 + rnd(4)
	}
	if ( cdata(CDATA_ROLE, tc) == ROLE_SHOP_MIROK ) {
		p = 21
	}
	if ( cdata(CDATA_ROLE, tc) == ROLE_SHOP_MOUNTAIN2 ) {
		p /= 2
	}
	if ( cdata(CDATA_ROLE, tc) == ROLE_SHOP_STOKE ) {
		p = 18
	}
	if ( cdata(CDATA_ROLE, tc) == ROLE_SHOP_MOYER ) {
		p /= 4
	}
	if ( cdata(CDATA_FAME, tc) > 0 ) {
		if ( cdata(CDATA_ROLE, tc) != ROLE_SHOP_WANDER & cdata(CDATA_ROLE, tc) != ROLE_GUEST_MERCHANT & cdata(CDATA_ROLE, tc) != ROLE_SHOP_STOKE & cdata(CDATA_ROLE, tc) != ROLE_SHOP_MOYER ) {
			p += limit(cdata(CDATA_FAME, tc) / 3000, 0, 20)
			cdata(CDATA_FAME, tc) = 0
		}
	}
	repeat p
		flt calcobjlv(cdata(CDATA_ROLE_SHOP_LEVEL, tc)), calcfixlv(FIX_QUALITY_GOOD)
		dbid = 0
		if ( cdata(CDATA_ROLE, tc) == ROLE_SHOP_MAGIC ) {
			p = rnd(3)
			if ( p == 0 ) {
				flttypeminor = FILTER_ITEM_POTION_HEAL
			}
			if ( p == 1 ) {
				flttypemajor = FILTER_ITEM_SCROLL
			}
			if ( p == 2 ) {
				flttypemajor = FILTER_ITEM_POTION
			}
			if ( rnd(7) == 0 ) {
				flttypemajor = FILTER_ITEM_SPELLBOOK
			}
			if ( rnd(15) == 0 ) {
				flttypemajor = FILTER_ITEM_BOOK
			}
		}
		if ( cdata(CDATA_ROLE, tc) == ROLE_SHOP_SISTER ) {
			dbid = ITEM_ID_SISTERS_LOVE_FUELED_LUNCH
		}
		if ( cdata(CDATA_ROLE, tc) == ROLE_SHOP_BOOK_RESERVE ) {
			listmax = 0
			repeat MAX_DB
				if ( itemmemory(2, cnt) > 1 ) {
					list(0, listmax) = cnt
					listmax++
				}
			loop
			if ( listmax == 0 ) {
				return
			}
			dbid = list(0, rnd(listmax))
		}
		if ( cdata(CDATA_ROLE, tc) == ROLE_SHOP_NOYEL ) {
			p = rnd(3)
			if ( p == 0 ) {
				flttypemajor = FILTER_ITEM_TOOL
			}
			if ( p == 1 ) {
				flttypemajor = FILTER_ACCESSORY_RING
			}
			if ( p == 2 ) {
				flttypemajor = FILTER_ACCESSORY_AMULET
			}
			if ( rnd(3) == 0 ) {
				fixlv = FIX_QUALITY_GREAT
			}
			if ( rnd(10) == 0 ) {
				fixlv = FIX_QUALITY_MIRACLE
			}
		}
		if ( cdata(CDATA_ROLE, tc) == ROLE_SHOP_GENERAL ) {
			p = rnd(5)
			if ( p == 0 ) {
				flttypemajor = FILTER_AMMO
			}
			if ( p == 1 ) {
				flttypemajor = FILTER_FURNITURE
			}
			if ( p == 2 ) {
				flttypemajor = FILTER_CLOAK
			}
			if ( p == 3 ) {
				flttypemajor = FILTER_ORE
			}
			if ( p == 4 ) {
				flttypemajor = FILTER_ITEM_TOOL
			}
			if ( rnd(20) == 0 ) {
				dbid = ITEM_ID_SMALL_GAMBLE_CHEST
			}
			if ( rnd(8) == 0 ) {
				flttypemajor = FILTER_CARGO_FOOD
			}
			if ( rnd(10) == 0 ) {
				dbid = isetdeed(rnd(length(isetdeed)))
			}
			if ( rnd(20) == 0 ) {
				dbid = ITEM_ID_DEED_PROPERTY_TRANSFER
			}
			if ( gdata(GDATA_MONTH) == 2 ) {
				if ( rnd(2) == 0 ) {
					dbid = ITEM_ID_HANDMADE_CHOCOLATE_KIT
				}
			}
			if ( gdata(GDATA_MONTH) == 12 ) {
				if ( gdata(GDATA_DAY) <= 25 ) {
					if ( rnd(2) == 0 ) {
						dbid = ITEM_ID_CHRISTMAS_CAKE_SET
					}
				}
			}
			if ( gdata(GDATA_MONTH) == 12 ) {
				if ( gdata(GDATA_DAY) > 25 ) {
					if ( rnd(20) == 0 ) {
						dbid = ITEM_ID_CHRISTMAS_CAKE_SET
					}
				}
			}
			if ( cnt == 1 ) {
				if ( rnd(4) != 0 ) {
					dbid = ITEM_ID_MONSTER_BALL
				}
			}
		}
		if ( cdata(CDATA_ROLE, tc) == ROLE_SHOP_BAKERY ) {
			if ( rnd(3) != 0 ) {
				flttypeminor = FILTER_ITEM_FOOD_BREAD
			}
			else {
				flttypeminor = FILTER_ITEM_FOOD_PASTA
			}
		}
		if ( cdata(CDATA_ROLE, tc) == ROLE_SHOP_FOOD ) {
			if ( cdata(CDATA_ID, tc) != CREATURE_ID_AILE_THE_ATTENDANT ) {
				if ( rnd(3) != 0 ) {
					continue
				}
			}
			if ( cdata(CDATA_ID, tc) == CREATURE_ID_AILE_THE_ATTENDANT ) {
				if ( rnd(5) != 0 ) {
					continue
				}
			}
			flttypemajor = FILTER_ITEM_FOOD
			if ( rnd(5) == 0 ) {
				flttypemajor = FILTER_CARGO_FOOD
			}
			if ( cdata(CDATA_ID, tc) == CREATURE_ID_AILE_THE_ATTENDANT ) {
				if ( rnd(5) == 0 ) {
					dbid = ITEM_ID_MINIATURE_BLIMP
				}
				if ( rnd(10) == 0 ) {
					dbid = ITEM_ID_WING
				}
			}
		}
		if ( cdata(CDATA_ROLE, tc) == ROLE_SHOP_BLACKMARKET ) {
			flttypemajor = fsetwear(rnd(length(fsetwear)))
			fixlv = FIX_QUALITY_GREAT
			if ( rnd(limit(cdata(CDATA_ROLE_SHOP_LEVEL, tc) / 10, 1, 400) + 200) > rnd(1000) ) {
				fixlv = FIX_QUALITY_MIRACLE
			}
		}
		if ( cdata(CDATA_ROLE, tc) == ROLE_SHOP_WANDER | cdata(CDATA_ROLE, tc) == ROLE_GUEST_MERCHANT ) {
			flttypemajor = fsetwear(rnd(length(fsetwear)))
			fixlv = FIX_QUALITY_GREAT
			if ( rnd(2) == 0 ) {
				fixlv = FIX_QUALITY_MIRACLE
			}
		}
		if ( cdata(CDATA_ROLE, tc) == ROLE_SHOP_INN ) {
			if ( cdata(CDATA_ID, tc) == CREATURE_ID_BARTENDER2 ) {
				flttypemajor = FILTER_ITEM_SPELLBOOK
			}
			if ( cdata(CDATA_ID, tc) == CREATURE_ID_BARTENDER2 ) {
				if ( rnd(2) == 0 ) {
					flttypeminor = FILTER_ITEM_POTION_ALE
				}
			}
			if ( cdata(CDATA_ID, tc) != CREATURE_ID_BARTENDER2 ) {
				flttypemajor = FILTER_CARGO_FOOD
			}
			if ( cdata(CDATA_ID, tc) != CREATURE_ID_CLERK ) {
				if ( rnd(4) ) {
					flttypeminor = FILTER_ITEM_POTION_ALE
				}
			}
			if ( cdata(CDATA_ID, tc) != CREATURE_ID_BARTENDER2 & cdata(CDATA_ID, tc) != CREATURE_ID_CLERK ) {
				if ( rnd(10) == 0 ) {
					dbid = ITEM_ID_SMALL_GAMBLE_CHEST
				}
				if ( rnd(30) == 0 ) {
					dbid = isetdrinkinn(rnd(length(isetdrinkinn)))
				}
			}
		}
		if ( cdata(CDATA_ROLE, tc) == ROLE_SHOP_GOODS ) {
			flttypemajor = FILTER_ITEM_ROD
			if ( rnd(3) == 0 ) {
				flttypemajor = fsetwear(rnd(length(fsetwear)))
			}
			if ( rnd(3) == 0 ) {
				flttypemajor = FILTER_FURNITURE
			}
			if ( rnd(5) == 0 ) {
				flttypemajor = FILTER_ITEM_FOOD
			}
			if ( rnd(4) == 0 ) {
				flttypemajor = FILTER_ITEM_SCROLL
			}
			if ( rnd(15) == 0 ) {
				flttypemajor = FILTER_ITEM_BOOK
			}
			if ( rnd(10) == 0 ) {
				flttypemajor = FILTER_CARGO_FOOD
			}
			if ( rnd(10) == 0 ) {
				dbid = isetdeed(rnd(length(isetdeed)))
			}
			if ( rnd(20) == 0 ) {
				dbid = ITEM_ID_DEED_PROPERTY_TRANSFER
			}
			if ( rnd(15) == 0 ) {
				dbid = ITEM_ID_DEED_HEIRSHIP
			}
		}
		if ( cdata(CDATA_ROLE, tc) == ROLE_SHOP_ARMOR ) {
			if ( rnd(limit(cdata(CDATA_ROLE_SHOP_LEVEL, tc), 1, 1000) + 200) > rnd(1000) ) {
				fixlv = FIX_QUALITY_GREAT
			}
			p = rnd(6)
			if ( p == 0 ) {
				flttypemajor = FILTER_ARMOR
			}
			if ( p == 1 ) {
				flttypemajor = FILTER_HELM
			}
			if ( p == 2 ) {
				flttypemajor = FILTER_GLOVES
			}
			if ( p == 3 ) {
				flttypemajor = FILTER_BOOTS
			}
			if ( p == 4 ) {
				flttypemajor = FILTER_SHIELD
			}
			if ( p == 5 ) {
				flttypemajor = FILTER_GIRDLE
			}
			if ( rnd(3) == 0 ) {
				if ( rnd(3) == 0 ) {
					flttypemajor = FILTER_WEAPON
				}
				else {
					flttypemajor = FILTER_RANGE
				}
			}
		}
		if ( cdata(CDATA_ROLE, tc) == ROLE_SHOP_TRADE ) {
			if ( cdata(CDATA_ID, tc) != CREATURE_ID_CLERK ) {
				flttypemajor = FILTER_CARGO_TRADE
			}
			if ( cdata(CDATA_ID, tc) == CREATURE_ID_CLERK ) {
				if ( rnd(2) == 0 ) {
					dbid = ITEM_ID_RABBIT_FOOT
				}
				else {
					dbid = ITEM_ID_PAINTING_ERUPTION
				}
			}
		}
		if ( cdata(CDATA_ROLE, tc) == ROLE_SHOP_THIEF ) {
			flttypemajor = FILTER_ITEM_TOOL
			if ( rnd(2) == 0 ) {
				dbid = ITEM_ID_LOCKPICK
			}
			if ( rnd(2) == 0 ) {
				dbid = ITEM_ID_DISGUISE_SET
			}
		}
		if ( cdata(CDATA_ROLE, tc) == ROLE_SHOP_SALESPERSON ) {
			if ( rnd(4) == 0 ) {
				flttypemajor = FILTER_RANGE
			}
			if ( rnd(5) == 0 ) {
				flttypemajor = FILTER_AMMO
			}
			if ( rnd(3) == 0 ) {
				flttypemajor = FILTER_ITEM_FOOD
			}
			fltn "sf"
		}
		if ( cdata(CDATA_ROLE, tc) == ROLE_SHOP_DEED ) {
			if ( rnd(2) != 0 ) {
				continue
			}
			flttypemajor = FILTER_ITEM_BOOK
			if ( rnd(3) == 0 ) {
				dbid = isetdeed(rnd(length(isetdeed)))
			}
			if ( rnd(5) == 0 ) {
				dbid = ITEM_ID_DEED_PROPERTY_TRANSFER
			}
			if ( rnd(5) == 0 ) {
				dbid = ITEM_ID_DEED_HEIRSHIP
			}
			if ( rnd(5) == 0 ) {
				dbid = ITEM_ID_DEED_HOME_RELOCATION
			}
			if ( rnd(15) == 0 ) {
				dbid = ITEM_ID_DEED_DUNGEON
			}
		}
		if ( cdata(CDATA_ROLE, tc) == ROLE_SHOP_MOUNTAIN2 ) {
			fltn "spshop"
			if ( rnd(20) == 0 ) {
				dbid = ITEM_ID_EVITEM
			}
			if ( cnt == 0 ) {
				dbid = ITEM_ID_SCROLL_GROWTH
			}
			if ( cnt == 1 ) {
				dbid = ITEM_ID_POTION_POTENTIAL
			}
		}
		if ( cdata(CDATA_ROLE, tc) == ROLE_SHOP_FESTIVAL ) {
			fltn "fest"
			if ( rnd(12) == 0 ) {
				dbid = ITEM_ID_UPSTAIRS
			}
			if ( rnd(12) == 0 ) {
				dbid = ITEM_ID_DOWNSTAIRS
			}
			if ( rnd(5) == 0 ) {
				dbid = ITEM_ID_BOTTLE_SODA
			}
			if ( rnd(5) == 0 ) {
				dbid = ITEM_ID_YITH_YAKI
			}
			if ( gdata(GDATA_AREA) == AREA_NOYEL ) {
				if ( rnd(12) == 0 ) {
					dbid = ITEM_ID_FESTIVAL_WREATH
				}
			}
			if ( gdata(GDATA_AREA) == AREA_NOYEL ) {
				if ( rnd(12) == 0 ) {
					dbid = ITEM_ID_NEW_YEARS_DECORATION
				}
			}
			if ( gdata(GDATA_AREA) == AREA_NOYEL ) {
				if ( rnd(12) == 0 ) {
					dbid = ITEM_ID_MINIATURE_TREE
				}
			}
			if ( gdata(GDATA_AREA) == AREA_NOYEL ) {
				if ( rnd(12) == 0 ) {
					dbid = ITEM_ID_DEER_HEAD
				}
			}
			if ( gdata(GDATA_AREA) == AREA_NOYEL ) {
				if ( rnd(12) == 0 ) {
					dbid = ITEM_ID_FUR_CARPET
				}
			}
			if ( gdata(GDATA_AREA) == AREA_LUDUS ) {
				if ( rnd(12) == 0 ) {
					dbid = ITEM_ID_LIGHTSABRE
				}
			}
			if ( gdata(GDATA_AREA) == AREA_LUDUS ) {
				if ( rnd(12) == 0 ) {
					dbid = ITEM_ID_LASER_GUN
				}
			}
			if ( gdata(GDATA_AREA) == AREA_LUDUS ) {
				if ( rnd(12) == 0 ) {
					dbid = ITEM_ID_KOMA_INU2
				}
			}
			if ( gdata(GDATA_AREA) == AREA_LUDUS ) {
				if ( rnd(12) == 0 ) {
					dbid = ITEM_ID_KOMA_INU
				}
			}
			if ( gdata(GDATA_AREA) == AREA_LUDUS ) {
				if ( rnd(5) == 0 ) {
					dbid = ITEM_ID_SHAVED_ICE
				}
			}
		}
		if ( cdata(CDATA_ROLE, tc) == ROLE_SHOP_MOYER ) {
			dbid = ITEM_ID_MONSTER_BALL
		}
		if ( cdata(CDATA_ROLE, tc) == ROLE_SHOP_MOUNTAIN1 ) {
			dbid = ITEM_ID_BOTTLE_DYE
		}
		if ( cdata(CDATA_ROLE, tc) == ROLE_SHOP_OFFICE ) {
			flttypemajor = FILTER_FURNITURE
			if ( cdata(CDATA_ID, tc) != CREATURE_ID_CLERK ) {
				if ( cnt == 0 ) {
					dbid = ITEM_ID_HEIR_TRUNK
				}
				if ( cnt == 1 ) {
					dbid = ITEM_ID_SHOP_STRONGBOX
				}
				if ( cnt == 2 ) {
					dbid = ITEM_ID_REGISTER
				}
				if ( cnt == 3 ) {
					dbid = ITEM_ID_SALARY_CHEST
				}
				if ( cnt == 4 ) {
					dbid = ITEM_ID_FREEZER
				}
				if ( cnt == 5 ) {
					dbid = ITEM_ID_PLAYBACK_DISC
				}
				if ( cnt == 6 ) {
					dbid = ITEM_ID_HOUSE_BOARD
				}
				if ( cnt == 7 ) {
					dbid = ITEM_ID_DECK
				}
				if ( cnt > 10 ) {
					if ( rnd(3) != 0 ) {
						continue
					}
				}
				if ( cnt == 19 ) {
					dbid = ITEM_ID_RED_TREASURE_MACHINE
				}
				if ( cnt == 20 ) {
					dbid = ITEM_ID_BLUE_TREASURE_MACHINE
				}
				if ( cnt == 21 ) {
					dbid = ITEM_ID_TAX_MASTERS_TAX_BOX
				}
				if ( cnt == 22 ) {
					dbid = ITEM_ID_1_2_MILLION_TAX_CERTIFICATE
				}
				if ( cnt == 23 ) {
					dbid = ITEM_ID_12_MILLION_TAX_CERTIFICATE
				}
			}
		}
		if ( cdata(CDATA_ROLE, tc) == ROLE_SHOP_FISH ) {
			dbid = ITEM_ID_BAIT
		}
		if ( cdata(CDATA_ROLE, tc) == ROLE_SHOP_MIROK ) {
			if ( cnt == 0 ) {
				dbid = ITEM_ID_SCROLL_GROWTH
			}
			if ( cnt == 1 ) {
				dbid = ITEM_ID_SCROLL_FAITH
			}
			if ( cnt == 2 ) {
				dbid = ITEM_ID_SCROLL_SUPERIOR_MATERIAL
			}
			if ( cnt == 3 ) {
				dbid = ITEM_ID_ROD_DOMINATION
			}
			if ( cnt == 4 ) {
				dbid = ITEM_ID_ARTIFACT_SEED
			}
			if ( cnt == 5 ) {
				dbid = ITEM_ID_PRESIDENTS_CHAIR
			}
			if ( cnt == 6 ) {
				dbid = ITEM_ID_BILL
			}
			if ( cnt == 7 ) {
				dbid = ITEM_ID_POTION_CURE_CORRUPTION
			}
			if ( cnt == 8 ) {
				dbid = ITEM_ID_BOTTLE_WATER
			}
			if ( cnt == 9 ) {
				dbid = ITEM_ID_TAX_MASTERS_TAX_BOX
			}
			if ( cnt == 10 ) {
				dbid = ITEM_ID_CAT_SISTERS_DIARY
			}
			if ( cnt == 11 ) {
				dbid = ITEM_ID_LITTLE_SISTERS_DIARY
			}
			if ( cnt == 12 ) {
				dbid = ITEM_ID_GIRLS_DIARY
			}
			if ( cnt == 13 ) {
				dbid = ITEM_ID_SHRINE_GATE
			}
			if ( cnt == 14 ) {
				dbid = ITEM_ID_BOTTLE_HERMES_BLOOD
			}
			if ( cnt == 15 ) {
				dbid = ITEM_ID_SAGES_HELM
			}
			if ( cnt == 16 ) {
				dbid = ITEM_ID_DIABLOS
			}
			if ( cnt == 17 ) {
				dbid = ITEM_ID_LICENCE_THE_VOID_EXPLORER
			}
			if ( cnt == 18 ) {
				dbid = ITEM_ID_GAROKS_HAMMER
			}
			if ( cnt == 19 ) {
				dbid = ITEM_ID_SHIELD_TONFA
			}
			if ( cnt == 20 ) {
				dbid = ITEM_ID_ELEMENTS_EYES
			}
			if ( cnt > 20 ) {
				continue
			}
		}
		if ( cdata(CDATA_ROLE, tc) == ROLE_SHOP_STOKE ) {
			if ( cnt == 0 ) {
				dbid = ITEM_ID_VERNIS_ORIGINAL
			}
			if ( cnt == 1 ) {
				dbid = ITEM_ID_STOMAFILLIA
			}
			if ( cnt == 2 ) {
				dbid = ITEM_ID_CURARIA
			}
			if ( cnt == 3 ) {
				dbid = ITEM_ID_ALRAUNIA
			}
			if ( cnt == 4 ) {
				dbid = ITEM_ID_SPENSEWEED
			}
			if ( cnt == 5 ) {
				dbid = ITEM_ID_MAREILON
			}
			if ( cnt == 6 ) {
				dbid = ITEM_ID_MORGIA
			}
			if ( cnt == 7 ) {
				dbid = ITEM_ID_OLDER_SISTERS_DIARY
			}
			if ( cnt == 8 ) {
				dbid = ITEM_ID_BUTLERS_DIARY
			}
			if ( cnt == 9 ) {
				dbid = ITEM_ID_DOG_SISTERS_DIARY
			}
			if ( cnt == 10 ) {
				dbid = ITEM_ID_FIXITY_ANCHOR
			}
			if ( cnt == 11 ) {
				dbid = ITEM_ID_NECROMANTIS
			}
			if ( cnt == 12 ) {
				dbid = ITEM_ID_BOTTLE_SPEED_UPPER
			}
			if ( cnt == 13 ) {
				dbid = ITEM_ID_STRADIVARIUS
			}
			if ( cnt == 14 ) {
				dbid = ITEM_ID_VALKOINEN_KUOLEMA
			}
			if ( cnt == 15 ) {
				dbid = ITEM_ID_HERO_CHEESE
			}
			if ( cnt == 16 ) {
				dbid = ITEM_ID_MAGIC_FRUIT
			}
			if ( cnt == 17 ) {
				dbid = ITEM_ID_HAPPY_APPLE
			}
			if ( cnt > 17 ) {
				continue
			}
		}
		itemcreate -1, dbid, -1, -1, 0
		if ( stat == 0 ) {
			break
		}
		if ( cdata(CDATA_ROLE, tc) == ROLE_SHOP_MIROK ) {
			inv(INV_ITEM_NUM, ci) = 1
			inv(INV_ITEM_STATUS, ci) = ITEM_STATUS_NORMAL
			if ( inv(INV_ITEM_ID, ci) == ITEM_ID_ROD_DOMINATION ) {
				inv(INV_ITEM_CHARGE, ci) = 4
			}
			continue
		}
		if ( cdata(CDATA_ROLE, tc) == ROLE_SHOP_STOKE ) {
			inv(INV_ITEM_NUM, ci) = 1
			inv(INV_ITEM_STATUS, ci) = ITEM_STATUS_NORMAL
			continue
		}
		f = 0
		if ( instr(filter_item(inv(INV_ITEM_ID, ci)), 0, "/neg/") != (-1) ) {
			f = 1
		}
		if ( instr(filter_item(inv(INV_ITEM_ID, ci)), 0, "/noshop/") != (-1) ) {
			if ( cdata(CDATA_ROLE, tc) != ROLE_SHOP_MOUNTAIN2 ) {
				f = 1
			}
		}
		if ( f ) {
			inv(INV_ITEM_NUM, ci) = 0
			continue
		}
		if ( cdata(CDATA_ROLE, tc) == ROLE_SHOP_OFFICE ) {
			flttypemajor = FILTER_FURNITURE
		}
		gosub *item_quantity
		inv(INV_ITEM_NUM, ci) = rnd(rtval) + 1
		if ( cdata(CDATA_ROLE, tc) == ROLE_SHOP_BAKERY ) {
			if ( rnd(5) <= 2 ) {
				inv(INV_ITEM_NUM, ci) = limit(rnd(cdata(CDATA_ROLE_SHOP_LEVEL, tc) + 1) / 30 + 1, 1, 3) + rnd(2)
			}
		}
		if ( cdata(CDATA_ROLE, tc) == ROLE_SHOP_TRADE ) {
			p = trate(inv(INV_ITEM_PARAM1, ci))
			if ( p <= 70 ) {
				inv(INV_ITEM_NUM, ci) = inv(INV_ITEM_NUM, ci) * 200 / 100
			}
			if ( p <= 50 ) {
				inv(INV_ITEM_NUM, ci) = inv(INV_ITEM_NUM, ci) * 200 / 100
			}
			if ( p >= 80 ) {
				inv(INV_ITEM_NUM, ci) = inv(INV_ITEM_NUM, ci) / 2 + 1
				if ( rnd(2) ) {
					inv(INV_ITEM_NUM, ci) = 0
					continue
				}
			}
			if ( p >= 100 ) {
				inv(INV_ITEM_NUM, ci) = inv(INV_ITEM_NUM, ci) / 2 + 1
				if ( rnd(3) ) {
					inv(INV_ITEM_NUM, ci) = 0
					continue
				}
			}
			inv(INV_ITEM_NUM, ci) = inv(INV_ITEM_NUM, ci) * (100 + cdata(CDATA_ROLE_SHOP_LEVEL, tc)) / 75 + 1
		}
		p = refitem(inv(INV_ITEM_ID, ci), DBSPEC_TYPE)
		if ( inv(INV_ITEM_STATUS, ci) == ITEM_STATUS_CURSED | inv(INV_ITEM_STATUS, ci) == ITEM_STATUS_DOOMED ) {
			inv(INV_ITEM_NUM, ci) = 0
			continue
		}
		if ( inv(INV_ITEM_STATUS, ci) == ITEM_STATUS_BLESSED ) {
			inv(INV_ITEM_NUM, ci) = 1
		}
		if ( p == FILTER_ITEM_POTION ) {
			if ( inv(INV_ITEM_ID, ci) == ITEM_ID_BOTTLE_WATER ) {
				inv(INV_ITEM_NUM, ci) = 0
			}
		}
		if ( p == FILTER_ITEM_FOOD ) {
			if ( refitem(inv(INV_ITEM_ID, ci), DBSPEC_TYPE_MINOR) == FILTER_ITEM_SEED ) {
				if ( rnd(5) ) {
					inv(INV_ITEM_NUM, ci) = 0
				}
			}
		}
		if ( cdata(CDATA_ROLE, tc) == ROLE_SHOP_MOUNTAIN2 ) {
			inv(INV_ITEM_VALUE, ci) = limit(inv(INV_ITEM_VALUE, ci), 1, 1000000) * 50
			if ( inv(INV_ITEM_ID, ci) == ITEM_ID_GIFT ) {
				inv(INV_ITEM_VALUE, ci) *= 10
			}
		}
		if ( inv(INV_ITEM_ID, ci) == ITEM_ID_CHRISTMAS_CAKE_SET ) {
			if ( gdata(GDATA_MONTH) != 12 | gdata(GDATA_DAY) > 25 ) {
				inv(INV_ITEM_VALUE, ci) = inv(INV_ITEM_VALUE, ci) / 2
			}
		}
		if ( cdata(CDATA_ROLE, tc) == ROLE_SHOP_NOYEL ) {
			inv(INV_ITEM_VALUE, ci) *= 2
		}
		if ( cdata(CDATA_ROLE, tc) == ROLE_SHOP_BLACKMARKET ) {
			if ( gdata(GDATA_FLAG_GUILD_THIEF) != 0 ) {
				inv(INV_ITEM_VALUE, ci) *= 2
			}
			else {
				inv(INV_ITEM_VALUE, ci) *= 3
			}
		}
		if ( cdata(CDATA_ROLE, tc) == ROLE_SHOP_WANDER ) {
			inv(INV_ITEM_VALUE, ci) *= 2
		}
		if ( cdata(CDATA_ROLE, tc) == ROLE_GUEST_MERCHANT ) {
			inv(INV_ITEM_VALUE, ci) = inv(INV_ITEM_VALUE, ci) * 4 / 5
		}
		if ( cdata(CDATA_ROLE, tc) == ROLE_SHOP_BOOK_RESERVE ) {
			inv(INV_ITEM_VALUE, ci) = inv(INV_ITEM_VALUE, ci) * 3 / 2
			if ( gdata(GDATA_AREA) == AREA_YLVA_LIBRARY ) {
				inv(INV_ITEM_VALUE, ci) = inv(INV_ITEM_VALUE, ci) * 3
			}
		}
		if ( cdata(CDATA_ROLE, tc) == ROLE_SHOP_MOYER ) {
			inv(INV_ITEM_VALUE, ci) *= 2
		}
	loop
	cdata(CDATA_ROLE_RESTOCK, tc) = gdata(GDATA_HOUR) + gdata(GDATA_DAY) * 24 + gdata(GDATA_MONTH) * 24 * 30 + gdata(GDATA_YEAR) * 24 * 30 * 12 + 48 * (1 + (cdata(CDATA_ROLE, tc) == ROLE_SHOP_TRADE))
	if ( cdata(CDATA_ROLE, tc) == ROLE_SHOP_TRADE ) {
		cdata(CDATA_ROLE_RESTOCK, tc) = gdata(GDATA_HOUR) + gdata(GDATA_DAY) * 24 + gdata(GDATA_MONTH) * 24 * 30 + gdata(GDATA_YEAR) * 24 * 30 * 12 + 168
	}
	return

*item_quantity
	p = refitem(inv(INV_ITEM_ID, ci), DBSPEC_TYPE)
	i = refitem(inv(INV_ITEM_ID, ci), DBSPEC_RARE_LEVEL)
	rtval = 1
	repeat 1
		if ( i <= 100 ) {
			break
		}
		if ( p == FILTER_ITEM_FOOD ) {
			rtval = 1
			break
		}
		if ( p == FILTER_CARGO_TRADE ) {
			rtval = i / 200
			break
		}
		if ( p >= FILTER_CARGO ) {
			rtval = i / 100
			break
		}
		if ( p == FILTER_ITEM_POTION ) {
			rtval = i / 100
			break
		}
		if ( p == FILTER_ITEM_SCROLL ) {
			rtval = i / 100
			break
		}
		if ( p == FILTER_FURNITURE ) {
			rtval = i / 200
			break
		}
		if ( p == FILTER_JUNK ) {
			rtval = i / 80
			break
		}
		if ( p == FILTER_ITEM_TOOL ) {
			rtval = i / 500
			break
		}
	loop
	if ( dbid == ITEM_ID_SMALL_GAMBLE_CHEST ) {
		rtval = rnd(8)
	}
	if ( rtval < 1 ) {
		rtval = 1
		return
	}
	return

*shop_tradePrice
	dim trate, 9
	repeat 9
		trate(cnt) = 100
	loop
	if ( gdata(GDATA_AREA) == AREA_ZAILE ) {
		trate(0) = 110
		trate(1) = 60
		trate(3) = 75
		trate(2) = 80
		trate(6) = 180
		trate(7) = 170
		trate(8) = 150
		trate(9) = 90
	}
	if ( gdata(GDATA_AREA) == AREA_VERNIS ) {
		trate(0) = 110
		trate(1) = 60
		trate(3) = 75
		trate(2) = 80
		trate(6) = 180
		trate(7) = 170
		trate(8) = 150
		trate(9) = 90
	}
	if ( gdata(GDATA_AREA) == AREA_PORT_KAPUL ) {
		trate(0) = 60
		trate(1) = 120
		trate(4) = 150
		trate(5) = 60
		trate(2) = 130
		trate(6) = 190
		trate(7) = 180
	}
	if ( gdata(GDATA_AREA) == AREA_PALMIA ) {
		trate(0) = 140
		trate(2) = 130
		trate(4) = 130
		trate(1) = 85
		trate(6) = 160
		trate(7) = 70
	}
	if ( gdata(GDATA_AREA) == AREA_YOWYN ) {
		trate(0) = 160
		trate(3) = 60
		trate(2) = 80
		trate(6) = 170
		trate(7) = 105
	}
	if ( gdata(GDATA_AREA) == AREA_DERPHY ) {
		trate(0) = 70
		trate(3) = 50
		trate(5) = 140
		trate(2) = 60
		trate(6) = 170
		trate(7) = 135
	}
	if ( gdata(GDATA_AREA) == AREA_NOYEL ) {
		trate(1) = 165
		trate(0) = 160
		trate(3) = 150
		trate(5) = 150
		trate(2) = 145
		trate(6) = 60
		trate(7) = 140
		trate(9) = 150
	}
	if ( gdata(GDATA_AREA) == AREA_LUMIEST ) {
		trate(1) = 150
		trate(0) = 150
		trate(3) = 120
		trate(5) = 140
		trate(2) = 140
		trate(6) = 130
		trate(7) = 50
		trate(8) = 160
	}
	if ( gdata(GDATA_AREA) == AREA_EIREL ) {
		trate(0) = 150
		trate(1) = 60
		trate(3) = 130
		trate(2) = 140
		trate(6) = 90
		trate(7) = 150
	}
	if ( gdata(GDATA_AREA) == AREA_MELKAWN ) {
		trate(0) = 130
		trate(1) = 80
		trate(4) = 80
		trate(5) = 140
		trate(2) = 80
		trate(6) = 130
		trate(7) = 80
	}
	if ( gdata(GDATA_AREA) == AREA_KURUALM ) {
		trate(0) = 80
		trate(2) = 60
		trate(4) = 70
		trate(1) = 70
		trate(6) = 140
		trate(7) = 70
	}
	if ( gdata(GDATA_AREA) == AREA_MELUGAS ) {
		trate(1) = 120
		trate(3) = 150
		trate(5) = 160
		trate(2) = 160
		trate(6) = 140
		trate(7) = 120
		trate(8) = 70
		trate(9) = 180
	}
	if ( gdata(GDATA_AREA) == AREA_VALM ) {
		trate(0) = 50
		trate(3) = 120
		trate(5) = 150
		trate(2) = 130
		trate(6) = 170
		trate(7) = 140
	}
	if ( gdata(GDATA_AREA) == AREA_ARCBELC ) {
		trate(0) = 120
		trate(3) = 140
		trate(5) = 130
		trate(2) = 120
		trate(6) = 150
		trate(7) = 70
		trate(8) = 60
		trate(9) = 150
	}
	if ( gdata(GDATA_AREA) == AREA_LUDUS ) {
		trate(1) = 180
		trate(0) = 130
		trate(3) = 180
		trate(5) = 50
		trate(2) = 70
		trate(6) = 190
		trate(7) = 120
	}
	randomize (gdata(GDATA_HOUR) + gdata(GDATA_DAY) * 24 + gdata(GDATA_MONTH) * 24 * 30 + gdata(GDATA_YEAR) * 24 * 30 * 12) / 100
	repeat 10
		trate(cnt) += rnd(15) - rnd(15)
	loop
	randomize
	return

