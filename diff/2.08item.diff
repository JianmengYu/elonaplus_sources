--- 2.05-custom-gx/db_item.hsp	2021-12-12 15:46:33.744780600 -0800
+++ 2.08-borscht/db_item.clean.hsp	2021-12-19 14:41:18.965986500 -0800
@@ -1,12 +1,620 @@
 *db_item
 	if ( dbmode != DBMODE_FIND ) {
-		goto *db_item_set
+		goto *label_3484
 	}
 	dbmax = 0
 	dbsum = 0
-//*db_item_DYING_CICADA
+//*db_item_SPELLBOOK_OF_THUNDER_VORTEX
+	if ( 30 > objlv ) {
+		goto *db_item_SPELLBOOK_OF_ECLIPSE_JAIL
+	}
+	if ( fltselect != 0 ) {
+		goto *db_item_SPELLBOOK_OF_ECLIPSE_JAIL
+	}
+	if ( flttypemajor != FILTER_NOTHING ) {
+		if ( flttypemajor != FILTER_ITEM_SPELLBOOK ) {
+			goto *db_item_SPELLBOOK_OF_ECLIPSE_JAIL
+		}
+	}
+	if ( flttypeminor != FILTER_NOTHING ) {
+		if ( flttypeminor != FILTER_NONE ) {
+			goto *db_item_SPELLBOOK_OF_ECLIPSE_JAIL
+		}
+	}
+	if ( filtermax != 0 ) {
+		dbtmp = 1
+		repeat filtermax
+			if ( instr(filter_item(ITEM_ID_SPELLBOOK_OF_THUNDER_VORTEX), 0, filtern(cnt)) == (-1) ) {
+				dbtmp = 0
+				break
+			}
+		loop
+		if ( dbtmp == 0 ) {
+			goto *db_item_SPELLBOOK_OF_ECLIPSE_JAIL
+		}
+	}
+	dbsum += 700000 / (1000 + abs(objlv - 30) * 0) + 1
+	dblist(0, dbmax) = ITEM_ID_SPELLBOOK_OF_THUNDER_VORTEX, dbsum
+	dbmax++
+*db_item_SPELLBOOK_OF_ECLIPSE_JAIL
+	if ( 35 > objlv ) {
+		goto *db_item_SPELLBOOK_OF_NETHER_ROAR
+	}
+	if ( fltselect != 0 ) {
+		goto *db_item_SPELLBOOK_OF_NETHER_ROAR
+	}
+	if ( flttypemajor != FILTER_NOTHING ) {
+		if ( flttypemajor != FILTER_ITEM_SPELLBOOK ) {
+			goto *db_item_SPELLBOOK_OF_NETHER_ROAR
+		}
+	}
+	if ( flttypeminor != FILTER_NOTHING ) {
+		if ( flttypeminor != FILTER_NONE ) {
+			goto *db_item_SPELLBOOK_OF_NETHER_ROAR
+		}
+	}
+	if ( filtermax != 0 ) {
+		dbtmp = 1
+		repeat filtermax
+			if ( instr(filter_item(ITEM_ID_SPELLBOOK_OF_ECLIPSE_JAIL), 0, filtern(cnt)) == (-1) ) {
+				dbtmp = 0
+				break
+			}
+		loop
+		if ( dbtmp == 0 ) {
+			goto *db_item_SPELLBOOK_OF_NETHER_ROAR
+		}
+	}
+	dbsum += 700000 / (1000 + abs(objlv - 35) * 0) + 1
+	dblist(0, dbmax) = ITEM_ID_SPELLBOOK_OF_ECLIPSE_JAIL, dbsum
+	dbmax++
+*db_item_SPELLBOOK_OF_NETHER_ROAR
+	if ( 35 > objlv ) {
+		goto *db_item_SPELLBOOK_OF_POISON_STORM
+	}
+	if ( fltselect != 0 ) {
+		goto *db_item_SPELLBOOK_OF_POISON_STORM
+	}
+	if ( flttypemajor != FILTER_NOTHING ) {
+		if ( flttypemajor != FILTER_ITEM_SPELLBOOK ) {
+			goto *db_item_SPELLBOOK_OF_POISON_STORM
+		}
+	}
+	if ( flttypeminor != FILTER_NOTHING ) {
+		if ( flttypeminor != FILTER_NONE ) {
+			goto *db_item_SPELLBOOK_OF_POISON_STORM
+		}
+	}
+	if ( filtermax != 0 ) {
+		dbtmp = 1
+		repeat filtermax
+			if ( instr(filter_item(ITEM_ID_SPELLBOOK_OF_NETHER_ROAR), 0, filtern(cnt)) == (-1) ) {
+				dbtmp = 0
+				break
+			}
+		loop
+		if ( dbtmp == 0 ) {
+			goto *db_item_SPELLBOOK_OF_POISON_STORM
+		}
+	}
+	dbsum += 700000 / (1000 + abs(objlv - 35) * 0) + 1
+	dblist(0, dbmax) = ITEM_ID_SPELLBOOK_OF_NETHER_ROAR, dbsum
+	dbmax++
+*db_item_SPELLBOOK_OF_POISON_STORM
+	if ( 35 > objlv ) {
+		goto *db_item_SPELLBOOK_OF_BUBBLE_STORM
+	}
+	if ( fltselect != 0 ) {
+		goto *db_item_SPELLBOOK_OF_BUBBLE_STORM
+	}
+	if ( flttypemajor != FILTER_NOTHING ) {
+		if ( flttypemajor != FILTER_ITEM_SPELLBOOK ) {
+			goto *db_item_SPELLBOOK_OF_BUBBLE_STORM
+		}
+	}
+	if ( flttypeminor != FILTER_NOTHING ) {
+		if ( flttypeminor != FILTER_NONE ) {
+			goto *db_item_SPELLBOOK_OF_BUBBLE_STORM
+		}
+	}
+	if ( filtermax != 0 ) {
+		dbtmp = 1
+		repeat filtermax
+			if ( instr(filter_item(ITEM_ID_SPELLBOOK_OF_POISON_STORM), 0, filtern(cnt)) == (-1) ) {
+				dbtmp = 0
+				break
+			}
+		loop
+		if ( dbtmp == 0 ) {
+			goto *db_item_SPELLBOOK_OF_BUBBLE_STORM
+		}
+	}
+	dbsum += 700000 / (1000 + abs(objlv - 35) * 0) + 1
+	dblist(0, dbmax) = ITEM_ID_SPELLBOOK_OF_POISON_STORM, dbsum
+	dbmax++
+*db_item_SPELLBOOK_OF_BUBBLE_STORM
+	if ( 40 > objlv ) {
+		goto *db_item_SPELLBOOK_OF_ILLUSION_ROAR
+	}
+	if ( fltselect != 0 ) {
+		goto *db_item_SPELLBOOK_OF_ILLUSION_ROAR
+	}
+	if ( flttypemajor != FILTER_NOTHING ) {
+		if ( flttypemajor != FILTER_ITEM_SPELLBOOK ) {
+			goto *db_item_SPELLBOOK_OF_ILLUSION_ROAR
+		}
+	}
+	if ( flttypeminor != FILTER_NOTHING ) {
+		if ( flttypeminor != FILTER_NONE ) {
+			goto *db_item_SPELLBOOK_OF_ILLUSION_ROAR
+		}
+	}
+	if ( filtermax != 0 ) {
+		dbtmp = 1
+		repeat filtermax
+			if ( instr(filter_item(ITEM_ID_SPELLBOOK_OF_BUBBLE_STORM), 0, filtern(cnt)) == (-1) ) {
+				dbtmp = 0
+				break
+			}
+		loop
+		if ( dbtmp == 0 ) {
+			goto *db_item_SPELLBOOK_OF_ILLUSION_ROAR
+		}
+	}
+	dbsum += 700000 / (1000 + abs(objlv - 40) * 0) + 1
+	dblist(0, dbmax) = ITEM_ID_SPELLBOOK_OF_BUBBLE_STORM, dbsum
+	dbmax++
+*db_item_SPELLBOOK_OF_ILLUSION_ROAR
+	if ( 35 > objlv ) {
+		goto *db_item_SPELLBOOK_OF_ANGUISH_JAIL
+	}
+	if ( fltselect != 0 ) {
+		goto *db_item_SPELLBOOK_OF_ANGUISH_JAIL
+	}
+	if ( flttypemajor != FILTER_NOTHING ) {
+		if ( flttypemajor != FILTER_ITEM_SPELLBOOK ) {
+			goto *db_item_SPELLBOOK_OF_ANGUISH_JAIL
+		}
+	}
+	if ( flttypeminor != FILTER_NOTHING ) {
+		if ( flttypeminor != FILTER_NONE ) {
+			goto *db_item_SPELLBOOK_OF_ANGUISH_JAIL
+		}
+	}
+	if ( filtermax != 0 ) {
+		dbtmp = 1
+		repeat filtermax
+			if ( instr(filter_item(ITEM_ID_SPELLBOOK_OF_ILLUSION_ROAR), 0, filtern(cnt)) == (-1) ) {
+				dbtmp = 0
+				break
+			}
+		loop
+		if ( dbtmp == 0 ) {
+			goto *db_item_SPELLBOOK_OF_ANGUISH_JAIL
+		}
+	}
+	dbsum += 700000 / (1000 + abs(objlv - 35) * 0) + 1
+	dblist(0, dbmax) = ITEM_ID_SPELLBOOK_OF_ILLUSION_ROAR, dbsum
+	dbmax++
+*db_item_SPELLBOOK_OF_ANGUISH_JAIL
+	if ( 35 > objlv ) {
+		goto *db_item_SPELLBOOK_OF_NETHER_BOLT
+	}
+	if ( fltselect != 0 ) {
+		goto *db_item_SPELLBOOK_OF_NETHER_BOLT
+	}
+	if ( flttypemajor != FILTER_NOTHING ) {
+		if ( flttypemajor != FILTER_ITEM_SPELLBOOK ) {
+			goto *db_item_SPELLBOOK_OF_NETHER_BOLT
+		}
+	}
+	if ( flttypeminor != FILTER_NOTHING ) {
+		if ( flttypeminor != FILTER_NONE ) {
+			goto *db_item_SPELLBOOK_OF_NETHER_BOLT
+		}
+	}
+	if ( filtermax != 0 ) {
+		dbtmp = 1
+		repeat filtermax
+			if ( instr(filter_item(ITEM_ID_SPELLBOOK_OF_ANGUISH_JAIL), 0, filtern(cnt)) == (-1) ) {
+				dbtmp = 0
+				break
+			}
+		loop
+		if ( dbtmp == 0 ) {
+			goto *db_item_SPELLBOOK_OF_NETHER_BOLT
+		}
+	}
+	dbsum += 700000 / (1000 + abs(objlv - 35) * 0) + 1
+	dblist(0, dbmax) = ITEM_ID_SPELLBOOK_OF_ANGUISH_JAIL, dbsum
+	dbmax++
+*db_item_SPELLBOOK_OF_NETHER_BOLT
+	if ( 18 > objlv ) {
+		goto *db_item_SPELLBOOK_OF_POISON_BOLT
+	}
+	if ( fltselect != 0 ) {
+		goto *db_item_SPELLBOOK_OF_POISON_BOLT
+	}
+	if ( flttypemajor != FILTER_NOTHING ) {
+		if ( flttypemajor != FILTER_ITEM_SPELLBOOK ) {
+			goto *db_item_SPELLBOOK_OF_POISON_BOLT
+		}
+	}
+	if ( flttypeminor != FILTER_NOTHING ) {
+		if ( flttypeminor != FILTER_NONE ) {
+			goto *db_item_SPELLBOOK_OF_POISON_BOLT
+		}
+	}
+	if ( filtermax != 0 ) {
+		dbtmp = 1
+		repeat filtermax
+			if ( instr(filter_item(ITEM_ID_SPELLBOOK_OF_NETHER_BOLT), 0, filtern(cnt)) == (-1) ) {
+				dbtmp = 0
+				break
+			}
+		loop
+		if ( dbtmp == 0 ) {
+			goto *db_item_SPELLBOOK_OF_POISON_BOLT
+		}
+	}
+	dbsum += 1000000 / (1000 + abs(objlv - 18) * 0) + 1
+	dblist(0, dbmax) = ITEM_ID_SPELLBOOK_OF_NETHER_BOLT, dbsum
+	dbmax++
+*db_item_SPELLBOOK_OF_POISON_BOLT
+	if ( 18 > objlv ) {
+		goto *db_item_SPELLBOOK_OF_SOUND_BOLT
+	}
+	if ( fltselect != 0 ) {
+		goto *db_item_SPELLBOOK_OF_SOUND_BOLT
+	}
+	if ( flttypemajor != FILTER_NOTHING ) {
+		if ( flttypemajor != FILTER_ITEM_SPELLBOOK ) {
+			goto *db_item_SPELLBOOK_OF_SOUND_BOLT
+		}
+	}
+	if ( flttypeminor != FILTER_NOTHING ) {
+		if ( flttypeminor != FILTER_NONE ) {
+			goto *db_item_SPELLBOOK_OF_SOUND_BOLT
+		}
+	}
+	if ( filtermax != 0 ) {
+		dbtmp = 1
+		repeat filtermax
+			if ( instr(filter_item(ITEM_ID_SPELLBOOK_OF_POISON_BOLT), 0, filtern(cnt)) == (-1) ) {
+				dbtmp = 0
+				break
+			}
+		loop
+		if ( dbtmp == 0 ) {
+			goto *db_item_SPELLBOOK_OF_SOUND_BOLT
+		}
+	}
+	dbsum += 1000000 / (1000 + abs(objlv - 18) * 0) + 1
+	dblist(0, dbmax) = ITEM_ID_SPELLBOOK_OF_POISON_BOLT, dbsum
+	dbmax++
+*db_item_SPELLBOOK_OF_SOUND_BOLT
+	if ( 18 > objlv ) {
+		goto *db_item_SPELLBOOK_OF_CHAOS_BOLT
+	}
+	if ( fltselect != 0 ) {
+		goto *db_item_SPELLBOOK_OF_CHAOS_BOLT
+	}
+	if ( flttypemajor != FILTER_NOTHING ) {
+		if ( flttypemajor != FILTER_ITEM_SPELLBOOK ) {
+			goto *db_item_SPELLBOOK_OF_CHAOS_BOLT
+		}
+	}
+	if ( flttypeminor != FILTER_NOTHING ) {
+		if ( flttypeminor != FILTER_NONE ) {
+			goto *db_item_SPELLBOOK_OF_CHAOS_BOLT
+		}
+	}
+	if ( filtermax != 0 ) {
+		dbtmp = 1
+		repeat filtermax
+			if ( instr(filter_item(ITEM_ID_SPELLBOOK_OF_SOUND_BOLT), 0, filtern(cnt)) == (-1) ) {
+				dbtmp = 0
+				break
+			}
+		loop
+		if ( dbtmp == 0 ) {
+			goto *db_item_SPELLBOOK_OF_CHAOS_BOLT
+		}
+	}
+	dbsum += 1000000 / (1000 + abs(objlv - 18) * 0) + 1
+	dblist(0, dbmax) = ITEM_ID_SPELLBOOK_OF_SOUND_BOLT, dbsum
+	dbmax++
+*db_item_SPELLBOOK_OF_CHAOS_BOLT
+	if ( 18 > objlv ) {
+		goto *db_item_SPELLBOOK_OF_NERVE_BOLT
+	}
+	if ( fltselect != 0 ) {
+		goto *db_item_SPELLBOOK_OF_NERVE_BOLT
+	}
+	if ( flttypemajor != FILTER_NOTHING ) {
+		if ( flttypemajor != FILTER_ITEM_SPELLBOOK ) {
+			goto *db_item_SPELLBOOK_OF_NERVE_BOLT
+		}
+	}
+	if ( flttypeminor != FILTER_NOTHING ) {
+		if ( flttypeminor != FILTER_NONE ) {
+			goto *db_item_SPELLBOOK_OF_NERVE_BOLT
+		}
+	}
+	if ( filtermax != 0 ) {
+		dbtmp = 1
+		repeat filtermax
+			if ( instr(filter_item(ITEM_ID_SPELLBOOK_OF_CHAOS_BOLT), 0, filtern(cnt)) == (-1) ) {
+				dbtmp = 0
+				break
+			}
+		loop
+		if ( dbtmp == 0 ) {
+			goto *db_item_SPELLBOOK_OF_NERVE_BOLT
+		}
+	}
+	dbsum += 1000000 / (1000 + abs(objlv - 18) * 0) + 1
+	dblist(0, dbmax) = ITEM_ID_SPELLBOOK_OF_CHAOS_BOLT, dbsum
+	dbmax++
+*db_item_SPELLBOOK_OF_NERVE_BOLT
+	if ( 18 > objlv ) {
+		goto *db_item_SPELLBOOK_OF_FIRE_CLAW
+	}
+	if ( fltselect != 0 ) {
+		goto *db_item_SPELLBOOK_OF_FIRE_CLAW
+	}
+	if ( flttypemajor != FILTER_NOTHING ) {
+		if ( flttypemajor != FILTER_ITEM_SPELLBOOK ) {
+			goto *db_item_SPELLBOOK_OF_FIRE_CLAW
+		}
+	}
+	if ( flttypeminor != FILTER_NOTHING ) {
+		if ( flttypeminor != FILTER_NONE ) {
+			goto *db_item_SPELLBOOK_OF_FIRE_CLAW
+		}
+	}
+	if ( filtermax != 0 ) {
+		dbtmp = 1
+		repeat filtermax
+			if ( instr(filter_item(ITEM_ID_SPELLBOOK_OF_NERVE_BOLT), 0, filtern(cnt)) == (-1) ) {
+				dbtmp = 0
+				break
+			}
+		loop
+		if ( dbtmp == 0 ) {
+			goto *db_item_SPELLBOOK_OF_FIRE_CLAW
+		}
+	}
+	dbsum += 1000000 / (1000 + abs(objlv - 18) * 0) + 1
+	dblist(0, dbmax) = ITEM_ID_SPELLBOOK_OF_NERVE_BOLT, dbsum
+	dbmax++
+*db_item_SPELLBOOK_OF_FIRE_CLAW
+	if ( 5 > objlv ) {
+		goto *db_item_SPELLBOOK_OF_COLD_BLADE
+	}
+	if ( fltselect != 0 ) {
+		goto *db_item_SPELLBOOK_OF_COLD_BLADE
+	}
+	if ( flttypemajor != FILTER_NOTHING ) {
+		if ( flttypemajor != FILTER_ITEM_SPELLBOOK ) {
+			goto *db_item_SPELLBOOK_OF_COLD_BLADE
+		}
+	}
+	if ( flttypeminor != FILTER_NOTHING ) {
+		if ( flttypeminor != FILTER_NONE ) {
+			goto *db_item_SPELLBOOK_OF_COLD_BLADE
+		}
+	}
+	if ( filtermax != 0 ) {
+		dbtmp = 1
+		repeat filtermax
+			if ( instr(filter_item(ITEM_ID_SPELLBOOK_OF_FIRE_CLAW), 0, filtern(cnt)) == (-1) ) {
+				dbtmp = 0
+				break
+			}
+		loop
+		if ( dbtmp == 0 ) {
+			goto *db_item_SPELLBOOK_OF_COLD_BLADE
+		}
+	}
+	dbsum += 1000000 / (1000 + abs(objlv - 5) * 0) + 1
+	dblist(0, dbmax) = ITEM_ID_SPELLBOOK_OF_FIRE_CLAW, dbsum
+	dbmax++
+*db_item_SPELLBOOK_OF_COLD_BLADE
+	if ( 5 > objlv ) {
+		goto *db_item_SPELLBOOK_OF_LIGHTNING_SPEAR
+	}
+	if ( fltselect != 0 ) {
+		goto *db_item_SPELLBOOK_OF_LIGHTNING_SPEAR
+	}
+	if ( flttypemajor != FILTER_NOTHING ) {
+		if ( flttypemajor != FILTER_ITEM_SPELLBOOK ) {
+			goto *db_item_SPELLBOOK_OF_LIGHTNING_SPEAR
+		}
+	}
+	if ( flttypeminor != FILTER_NOTHING ) {
+		if ( flttypeminor != FILTER_NONE ) {
+			goto *db_item_SPELLBOOK_OF_LIGHTNING_SPEAR
+		}
+	}
+	if ( filtermax != 0 ) {
+		dbtmp = 1
+		repeat filtermax
+			if ( instr(filter_item(ITEM_ID_SPELLBOOK_OF_COLD_BLADE), 0, filtern(cnt)) == (-1) ) {
+				dbtmp = 0
+				break
+			}
+		loop
+		if ( dbtmp == 0 ) {
+			goto *db_item_SPELLBOOK_OF_LIGHTNING_SPEAR
+		}
+	}
+	dbsum += 1000000 / (1000 + abs(objlv - 5) * 0) + 1
+	dblist(0, dbmax) = ITEM_ID_SPELLBOOK_OF_COLD_BLADE, dbsum
+	dbmax++
+*db_item_SPELLBOOK_OF_LIGHTNING_SPEAR
+	if ( 5 > objlv ) {
+		goto *db_item_SPELLBOOK_OF_MIND_THORN
+	}
+	if ( fltselect != 0 ) {
+		goto *db_item_SPELLBOOK_OF_MIND_THORN
+	}
+	if ( flttypemajor != FILTER_NOTHING ) {
+		if ( flttypemajor != FILTER_ITEM_SPELLBOOK ) {
+			goto *db_item_SPELLBOOK_OF_MIND_THORN
+		}
+	}
+	if ( flttypeminor != FILTER_NOTHING ) {
+		if ( flttypeminor != FILTER_NONE ) {
+			goto *db_item_SPELLBOOK_OF_MIND_THORN
+		}
+	}
+	if ( filtermax != 0 ) {
+		dbtmp = 1
+		repeat filtermax
+			if ( instr(filter_item(ITEM_ID_SPELLBOOK_OF_LIGHTNING_SPEAR), 0, filtern(cnt)) == (-1) ) {
+				dbtmp = 0
+				break
+			}
+		loop
+		if ( dbtmp == 0 ) {
+			goto *db_item_SPELLBOOK_OF_MIND_THORN
+		}
+	}
+	dbsum += 1000000 / (1000 + abs(objlv - 5) * 0) + 1
+	dblist(0, dbmax) = ITEM_ID_SPELLBOOK_OF_LIGHTNING_SPEAR, dbsum
+	dbmax++
+*db_item_SPELLBOOK_OF_MIND_THORN
+	if ( 10 > objlv ) {
+		goto *db_item_SPELLBOOK_OF_POISON_MUCUS
+	}
+	if ( fltselect != 0 ) {
+		goto *db_item_SPELLBOOK_OF_POISON_MUCUS
+	}
+	if ( flttypemajor != FILTER_NOTHING ) {
+		if ( flttypemajor != FILTER_ITEM_SPELLBOOK ) {
+			goto *db_item_SPELLBOOK_OF_POISON_MUCUS
+		}
+	}
+	if ( flttypeminor != FILTER_NOTHING ) {
+		if ( flttypeminor != FILTER_NONE ) {
+			goto *db_item_SPELLBOOK_OF_POISON_MUCUS
+		}
+	}
+	if ( filtermax != 0 ) {
+		dbtmp = 1
+		repeat filtermax
+			if ( instr(filter_item(ITEM_ID_SPELLBOOK_OF_MIND_THORN), 0, filtern(cnt)) == (-1) ) {
+				dbtmp = 0
+				break
+			}
+		loop
+		if ( dbtmp == 0 ) {
+			goto *db_item_SPELLBOOK_OF_POISON_MUCUS
+		}
+	}
+	dbsum += 1000000 / (1000 + abs(objlv - 10) * 0) + 1
+	dblist(0, dbmax) = ITEM_ID_SPELLBOOK_OF_MIND_THORN, dbsum
+	dbmax++
+*db_item_SPELLBOOK_OF_POISON_MUCUS
+	if ( 10 > objlv ) {
+		goto *db_item_SPELLBOOK_OF_SOUND_CANNONBALL
+	}
+	if ( fltselect != 0 ) {
+		goto *db_item_SPELLBOOK_OF_SOUND_CANNONBALL
+	}
+	if ( flttypemajor != FILTER_NOTHING ) {
+		if ( flttypemajor != FILTER_ITEM_SPELLBOOK ) {
+			goto *db_item_SPELLBOOK_OF_SOUND_CANNONBALL
+		}
+	}
+	if ( flttypeminor != FILTER_NOTHING ) {
+		if ( flttypeminor != FILTER_NONE ) {
+			goto *db_item_SPELLBOOK_OF_SOUND_CANNONBALL
+		}
+	}
+	if ( filtermax != 0 ) {
+		dbtmp = 1
+		repeat filtermax
+			if ( instr(filter_item(ITEM_ID_SPELLBOOK_OF_POISON_MUCUS), 0, filtern(cnt)) == (-1) ) {
+				dbtmp = 0
+				break
+			}
+		loop
+		if ( dbtmp == 0 ) {
+			goto *db_item_SPELLBOOK_OF_SOUND_CANNONBALL
+		}
+	}
+	dbsum += 1000000 / (1000 + abs(objlv - 10) * 0) + 1
+	dblist(0, dbmax) = ITEM_ID_SPELLBOOK_OF_POISON_MUCUS, dbsum
+	dbmax++
+*db_item_SPELLBOOK_OF_SOUND_CANNONBALL
+	if ( 10 > objlv ) {
+		goto *db_item_SPELLBOOK_OF_HYDRO_FANG
+	}
+	if ( fltselect != 0 ) {
+		goto *db_item_SPELLBOOK_OF_HYDRO_FANG
+	}
+	if ( flttypemajor != FILTER_NOTHING ) {
+		if ( flttypemajor != FILTER_ITEM_SPELLBOOK ) {
+			goto *db_item_SPELLBOOK_OF_HYDRO_FANG
+		}
+	}
+	if ( flttypeminor != FILTER_NOTHING ) {
+		if ( flttypeminor != FILTER_NONE ) {
+			goto *db_item_SPELLBOOK_OF_HYDRO_FANG
+		}
+	}
+	if ( filtermax != 0 ) {
+		dbtmp = 1
+		repeat filtermax
+			if ( instr(filter_item(ITEM_ID_SPELLBOOK_OF_SOUND_CANNONBALL), 0, filtern(cnt)) == (-1) ) {
+				dbtmp = 0
+				break
+			}
+		loop
+		if ( dbtmp == 0 ) {
+			goto *db_item_SPELLBOOK_OF_HYDRO_FANG
+		}
+	}
+	dbsum += 1000000 / (1000 + abs(objlv - 10) * 0) + 1
+	dblist(0, dbmax) = ITEM_ID_SPELLBOOK_OF_SOUND_CANNONBALL, dbsum
+	dbmax++
+*db_item_SPELLBOOK_OF_HYDRO_FANG
+	if ( 15 > objlv ) {
+		goto *db_item_DYING_CICADA
+	}
+	if ( fltselect != 0 ) {
+		goto *db_item_DYING_CICADA
+	}
+	if ( flttypemajor != FILTER_NOTHING ) {
+		if ( flttypemajor != FILTER_ITEM_SPELLBOOK ) {
+			goto *db_item_DYING_CICADA
+		}
+	}
+	if ( flttypeminor != FILTER_NOTHING ) {
+		if ( flttypeminor != FILTER_NONE ) {
+			goto *db_item_DYING_CICADA
+		}
+	}
+	if ( filtermax != 0 ) {
+		dbtmp = 1
+		repeat filtermax
+			if ( instr(filter_item(ITEM_ID_SPELLBOOK_OF_HYDRO_FANG), 0, filtern(cnt)) == (-1) ) {
+				dbtmp = 0
+				break
+			}
+		loop
+		if ( dbtmp == 0 ) {
+			goto *db_item_DYING_CICADA
+		}
+	}
+	dbsum += 1000000 / (1000 + abs(objlv - 15) * 0) + 1
+	dblist(0, dbmax) = ITEM_ID_SPELLBOOK_OF_HYDRO_FANG, dbsum
+	dbmax++
+*db_item_DYING_CICADA
 	if ( 1 > objlv ) {
 		goto *db_item_M01_GARNET
 	}
 	if ( fltselect != 1 ) {
 		goto *db_item_M01_GARNET
@@ -1929,16 +2537,16 @@
 		goto *db_item_EPECLAIR
 	}
 	if ( fltselect != 2 ) {
 		goto *db_item_EPECLAIR
 	}
-	if ( flttypemajor != 0 ) {
+	if ( flttypemajor != FILTER_NOTHING ) {
 		if ( flttypemajor != FILTER_WEAPON ) {
 			goto *db_item_EPECLAIR
 		}
 	}
-	if ( flttypeminor != 0 ) {
+	if ( flttypeminor != FILTER_NOTHING ) {
 		if ( flttypeminor != FILTER_WEAPON_SHORTSWORD ) {
 			goto *db_item_EPECLAIR
 		}
 	}
 	if ( filtermax != 0 ) {
@@ -1961,17 +2569,17 @@
 		goto *db_item_GOUTEN
 	}
 	if ( fltselect != 2 ) {
 		goto *db_item_GOUTEN
 	}
-	if ( flttypemajor != 0 ) {
-		if ( flttypemajor != 10000 ) {
+	if ( flttypemajor != FILTER_NOTHING ) {
+		if ( flttypemajor != FILTER_WEAPON ) {
 			goto *db_item_GOUTEN
 		}
 	}
-	if ( flttypeminor != 0 ) {
-		if ( flttypeminor != 10002 ) {
+	if ( flttypeminor != FILTER_NOTHING ) {
+		if ( flttypeminor != FILTER_WEAPON_LONGSWORD ) {
 			goto *db_item_GOUTEN
 		}
 	}
 	if ( filtermax != 0 ) {
 		dbtmp = 1
@@ -1993,17 +2601,17 @@
 		goto *db_item_DGT_101
 	}
 	if ( fltselect != 2 ) {
 		goto *db_item_DGT_101
 	}
-	if ( flttypemajor != 0 ) {
-		if ( flttypemajor != 10000 ) {
+	if ( flttypemajor != FILTER_NOTHING ) {
+		if ( flttypemajor != FILTER_WEAPON ) {
 			goto *db_item_DGT_101
 		}
 	}
-	if ( flttypeminor != 0 ) {
-		if ( flttypeminor != 10007 ) {
+	if ( flttypeminor != FILTER_NOTHING ) {
+		if ( flttypeminor != FILTER_WEAPON_POLEARM ) {
 			goto *db_item_DGT_101
 		}
 	}
 	if ( filtermax != 0 ) {
 		dbtmp = 1
@@ -2025,17 +2633,17 @@
 		goto *db_item_NUMENIUS
 	}
 	if ( fltselect != 2 ) {
 		goto *db_item_NUMENIUS
 	}
-	if ( flttypemajor != 0 ) {
-		if ( flttypemajor != 10000 ) {
+	if ( flttypemajor != FILTER_NOTHING ) {
+		if ( flttypemajor != FILTER_WEAPON ) {
 			goto *db_item_NUMENIUS
 		}
 	}
-	if ( flttypeminor != 0 ) {
-		if ( flttypeminor != 10010 ) {
+	if ( flttypeminor != FILTER_NOTHING ) {
+		if ( flttypeminor != FILTER_WEAPON_LARGE_AXE ) {
 			goto *db_item_NUMENIUS
 		}
 	}
 	if ( filtermax != 0 ) {
 		dbtmp = 1
@@ -2057,17 +2665,17 @@
 		goto *db_item_ENGOKU
 	}
 	if ( fltselect != 2 ) {
 		goto *db_item_ENGOKU
 	}
-	if ( flttypemajor != 0 ) {
-		if ( flttypemajor != 10000 ) {
+	if ( flttypemajor != FILTER_NOTHING ) {
+		if ( flttypemajor != FILTER_WEAPON ) {
 			goto *db_item_ENGOKU
 		}
 	}
-	if ( flttypeminor != 0 ) {
-		if ( flttypeminor != 10011 ) {
+	if ( flttypeminor != FILTER_NOTHING ) {
+		if ( flttypeminor != FILTER_WEAPON_SICKLE ) {
 			goto *db_item_ENGOKU
 		}
 	}
 	if ( filtermax != 0 ) {
 		dbtmp = 1
@@ -2089,17 +2697,17 @@
 		goto *db_item_POWER_TRIANGLE
 	}
 	if ( fltselect != 2 ) {
 		goto *db_item_POWER_TRIANGLE
 	}
-	if ( flttypemajor != 0 ) {
-		if ( flttypemajor != 10000 ) {
+	if ( flttypemajor != FILTER_NOTHING ) {
+		if ( flttypemajor != FILTER_WEAPON ) {
 			goto *db_item_POWER_TRIANGLE
 		}
 	}
-	if ( flttypeminor != 0 ) {
-		if ( flttypeminor != 10006 ) {
+	if ( flttypeminor != FILTER_NOTHING ) {
+		if ( flttypeminor != FILTER_WEAPON_STAVE ) {
 			goto *db_item_POWER_TRIANGLE
 		}
 	}
 	if ( filtermax != 0 ) {
 		dbtmp = 1
@@ -2121,17 +2729,17 @@
 		goto *db_item_CROSS_RAIL
 	}
 	if ( fltselect != 2 ) {
 		goto *db_item_CROSS_RAIL
 	}
-	if ( flttypemajor != 0 ) {
-		if ( flttypemajor != 10000 ) {
+	if ( flttypemajor != FILTER_NOTHING ) {
+		if ( flttypemajor != FILTER_WEAPON ) {
 			goto *db_item_CROSS_RAIL
 		}
 	}
-	if ( flttypeminor != 0 ) {
-		if ( flttypeminor != 10006 ) {
+	if ( flttypeminor != FILTER_NOTHING ) {
+		if ( flttypeminor != FILTER_WEAPON_STAVE ) {
 			goto *db_item_CROSS_RAIL
 		}
 	}
 	if ( filtermax != 0 ) {
 		dbtmp = 1
@@ -2153,17 +2761,17 @@
 		goto *db_item_NAZUNAS_SOX
 	}
 	if ( fltselect != 2 ) {
 		goto *db_item_NAZUNAS_SOX
 	}
-	if ( flttypemajor != 0 ) {
-		if ( flttypemajor != 24000 ) {
+	if ( flttypemajor != FILTER_NOTHING ) {
+		if ( flttypemajor != FILTER_RANGE ) {
 			goto *db_item_NAZUNAS_SOX
 		}
 	}
-	if ( flttypeminor != 0 ) {
-		if ( flttypeminor != 24003 ) {
+	if ( flttypeminor != FILTER_NOTHING ) {
+		if ( flttypeminor != FILTER_RANGE_CROSSBOW ) {
 			goto *db_item_NAZUNAS_SOX
 		}
 	}
 	if ( filtermax != 0 ) {
 		dbtmp = 1
@@ -2185,17 +2793,17 @@
 		goto *db_item_SCORPIERCE
 	}
 	if ( fltselect != 2 ) {
 		goto *db_item_SCORPIERCE
 	}
-	if ( flttypemajor != 0 ) {
-		if ( flttypemajor != 10000 ) {
+	if ( flttypemajor != FILTER_NOTHING ) {
+		if ( flttypemajor != FILTER_WEAPON ) {
 			goto *db_item_SCORPIERCE
 		}
 	}
-	if ( flttypeminor != 0 ) {
-		if ( flttypeminor != 10004 ) {
+	if ( flttypeminor != FILTER_NOTHING ) {
+		if ( flttypeminor != FILTER_WEAPON_CLUB ) {
 			goto *db_item_SCORPIERCE
 		}
 	}
 	if ( filtermax != 0 ) {
 		dbtmp = 1
@@ -2217,17 +2825,17 @@
 		goto *db_item_YOMI_TO
 	}
 	if ( fltselect != 2 ) {
 		goto *db_item_YOMI_TO
 	}
-	if ( flttypemajor != 0 ) {
-		if ( flttypemajor != 24000 ) {
+	if ( flttypemajor != FILTER_NOTHING ) {
+		if ( flttypemajor != FILTER_RANGE ) {
 			goto *db_item_YOMI_TO
 		}
 	}
-	if ( flttypeminor != 0 ) {
-		if ( flttypeminor != 24003 ) {
+	if ( flttypeminor != FILTER_NOTHING ) {
+		if ( flttypeminor != FILTER_RANGE_CROSSBOW ) {
 			goto *db_item_YOMI_TO
 		}
 	}
 	if ( filtermax != 0 ) {
 		dbtmp = 1
@@ -2249,17 +2857,17 @@
 		goto *db_item_RINKHALS
 	}
 	if ( fltselect != 2 ) {
 		goto *db_item_RINKHALS
 	}
-	if ( flttypemajor != 0 ) {
-		if ( flttypemajor != 24000 ) {
+	if ( flttypemajor != FILTER_NOTHING ) {
+		if ( flttypemajor != FILTER_RANGE ) {
 			goto *db_item_RINKHALS
 		}
 	}
-	if ( flttypeminor != 0 ) {
-		if ( flttypeminor != 24030 ) {
+	if ( flttypeminor != FILTER_NOTHING ) {
+		if ( flttypeminor != FILTER_RANGE_ROCK_THROW ) {
 			goto *db_item_RINKHALS
 		}
 	}
 	if ( filtermax != 0 ) {
 		dbtmp = 1
@@ -2281,17 +2889,17 @@
 		goto *db_item_LINGS_BOW
 	}
 	if ( fltselect != 2 ) {
 		goto *db_item_LINGS_BOW
 	}
-	if ( flttypemajor != 0 ) {
-		if ( flttypemajor != 24000 ) {
+	if ( flttypemajor != FILTER_NOTHING ) {
+		if ( flttypemajor != FILTER_RANGE ) {
 			goto *db_item_LINGS_BOW
 		}
 	}
-	if ( flttypeminor != 0 ) {
-		if ( flttypeminor != 24003 ) {
+	if ( flttypeminor != FILTER_NOTHING ) {
+		if ( flttypeminor != FILTER_RANGE_CROSSBOW ) {
 			goto *db_item_LINGS_BOW
 		}
 	}
 	if ( filtermax != 0 ) {
 		dbtmp = 1
@@ -2313,17 +2921,17 @@
 		goto *db_item_DISINFECTANT
 	}
 	if ( fltselect != 2 ) {
 		goto *db_item_DISINFECTANT
 	}
-	if ( flttypemajor != 0 ) {
-		if ( flttypemajor != 24000 ) {
+	if ( flttypemajor != FILTER_NOTHING ) {
+		if ( flttypemajor != FILTER_RANGE ) {
 			goto *db_item_DISINFECTANT
 		}
 	}
-	if ( flttypeminor != 0 ) {
-		if ( flttypeminor != 24001 ) {
+	if ( flttypeminor != FILTER_NOTHING ) {
+		if ( flttypeminor != FILTER_RANGE_SHORTBOW ) {
 			goto *db_item_DISINFECTANT
 		}
 	}
 	if ( filtermax != 0 ) {
 		dbtmp = 1
@@ -2884,23 +3492,23 @@
 	dbsum += 100000 / (1000 + abs(objlv - 1) * 10) + 1
 	dblist(0, dbmax) = ITEM_ID_TWIG, dbsum
 	dbmax++
 *db_item_FANE
 	if ( 1 > objlv ) {
-		goto *db_item_CHICURY
+		goto *db_item_CHICORY
 	}
 	if ( fltselect != 1 ) {
-		goto *db_item_CHICURY
+		goto *db_item_CHICORY
 	}
 	if ( flttypemajor != FILTER_NOTHING ) {
 		if ( flttypemajor != FILTER_ITEM_FOOD ) {
-			goto *db_item_CHICURY
+			goto *db_item_CHICORY
 		}
 	}
 	if ( flttypeminor != FILTER_NOTHING ) {
 		if ( flttypeminor != FILTER_NONE ) {
-			goto *db_item_CHICURY
+			goto *db_item_CHICORY
 		}
 	}
 	if ( filtermax != 0 ) {
 		dbtmp = 1
 		repeat filtermax
@@ -2908,17 +3516,17 @@
 				dbtmp = 0
 				break
 			}
 		loop
 		if ( dbtmp == 0 ) {
-			goto *db_item_CHICURY
+			goto *db_item_CHICORY
 		}
 	}
 	dbsum += 1000000 / (1000 + abs(objlv - 1) * 10) + 1
 	dblist(0, dbmax) = ITEM_ID_FANE, dbsum
 	dbmax++
-*db_item_CHICURY
+*db_item_CHICORY
 	if ( 1 > objlv ) {
 		goto *db_item_CURE_CRYSTAL
 	}
 	if ( fltselect != 1 ) {
 		goto *db_item_CURE_CRYSTAL
@@ -2980,23 +3588,23 @@
 	dbsum += 200000 / (1000 + abs(objlv - 1) * 0) + 1
 	dblist(0, dbmax) = ITEM_ID_CURE_CRYSTAL, dbsum
 	dbmax++
 *db_item_FIXITY_ANCHOR
 	if ( 30 > objlv ) {
-		goto *db_item_PROPERTY_TRANSFER_DEED
+		goto *db_item_DEED_PROPERTY_TRANSFER
 	}
 	if ( fltselect != 3 ) {
-		goto *db_item_PROPERTY_TRANSFER_DEED
+		goto *db_item_DEED_PROPERTY_TRANSFER
 	}
 	if ( flttypemajor != FILTER_NOTHING ) {
 		if ( flttypemajor != FILTER_ITEM_TOOL ) {
-			goto *db_item_PROPERTY_TRANSFER_DEED
+			goto *db_item_DEED_PROPERTY_TRANSFER
 		}
 	}
 	if ( flttypeminor != FILTER_NOTHING ) {
 		if ( flttypeminor != FILTER_NONE ) {
-			goto *db_item_PROPERTY_TRANSFER_DEED
+			goto *db_item_DEED_PROPERTY_TRANSFER
 		}
 	}
 	if ( filtermax != 0 ) {
 		dbtmp = 1
 		repeat filtermax
@@ -3004,17 +3612,17 @@
 				dbtmp = 0
 				break
 			}
 		loop
 		if ( dbtmp == 0 ) {
-			goto *db_item_PROPERTY_TRANSFER_DEED
+			goto *db_item_DEED_PROPERTY_TRANSFER
 		}
 	}
 	dbsum += 1000000 / (1000 + abs(objlv - 30) * 10) + 1
 	dblist(0, dbmax) = ITEM_ID_FIXITY_ANCHOR, dbsum
 	dbmax++
-*db_item_PROPERTY_TRANSFER_DEED
+*db_item_DEED_PROPERTY_TRANSFER
 	if ( 1 > objlv ) {
 		goto *db_item_BOMB_BARREL
 	}
 	if ( fltselect != 1 ) {
 		goto *db_item_BOMB_BARREL
@@ -3652,23 +4260,23 @@
 	dbsum += 10000 / (1000 + abs(objlv - 1) * 0) + 1
 	dblist(0, dbmax) = ITEM_ID_URINE, dbsum
 	dbmax++
 *db_item_BIO_BATTERY
 	if ( 1 > objlv ) {
-		goto *db_item_INJECT_BUNKER
+		goto *db_item_NYOI_MIMIKAKI
 	}
 	if ( fltselect != 0 ) {
-		goto *db_item_INJECT_BUNKER
+		goto *db_item_NYOI_MIMIKAKI
 	}
 	if ( flttypemajor != FILTER_NOTHING ) {
 		if ( flttypemajor != FILTER_JUNK ) {
-			goto *db_item_INJECT_BUNKER
+			goto *db_item_NYOI_MIMIKAKI
 		}
 	}
 	if ( flttypeminor != FILTER_NOTHING ) {
 		if ( flttypeminor != FILTER_NONE ) {
-			goto *db_item_INJECT_BUNKER
+			goto *db_item_NYOI_MIMIKAKI
 		}
 	}
 	if ( filtermax != 0 ) {
 		dbtmp = 1
 		repeat filtermax
@@ -3676,17 +4284,17 @@
 				dbtmp = 0
 				break
 			}
 		loop
 		if ( dbtmp == 0 ) {
-			goto *db_item_INJECT_BUNKER
+			goto *db_item_NYOI_MIMIKAKI
 		}
 	}
 	dbsum += 1000000 / (1000 + abs(objlv - 1) * 10) + 1
 	dblist(0, dbmax) = ITEM_ID_BIO_BATTERY, dbsum
 	dbmax++
-*db_item_INJECT_BUNKER
+*db_item_NYOI_MIMIKAKI
 	if ( 1 > objlv ) {
 		goto *db_item_MAGIC_RESTRAINT
 	}
 	if ( fltselect != 3 ) {
 		goto *db_item_MAGIC_RESTRAINT
@@ -6243,11 +6851,11 @@
 	}
 	dbsum += 1000000 / (1000 + abs(objlv - 65) * 10) + 1
 	dblist(0, dbmax) = ITEM_ID_SASANQUA_SICKLE, dbsum
 	dbmax++
 *db_item_SPELLBOOK_WATER_BEAM
-	if ( 30 > objlv ) {
+	if ( 24 > objlv ) {
 		goto *db_item_ROD_BUBBLE_BALL
 	}
 	if ( fltselect != 0 ) {
 		goto *db_item_ROD_BUBBLE_BALL
 	}
@@ -6271,11 +6879,11 @@
 		loop
 		if ( dbtmp == 0 ) {
 			goto *db_item_ROD_BUBBLE_BALL
 		}
 	}
-	dbsum += 300000 / (1000 + abs(objlv - 30) * 0) + 1
+	dbsum += 1000000 / (1000 + abs(objlv - 24) * 0) + 1
 	dblist(0, dbmax) = ITEM_ID_SPELLBOOK_WATER_BEAM, dbsum
 	dbmax++
 *db_item_ROD_BUBBLE_BALL
 	if ( 45 > objlv ) {
 		goto *db_item_ATOMIC_LAUNCHER
@@ -10564,23 +11172,23 @@
 	dbsum += 1000000 / (1000 + abs(objlv - 50) * 10) + 1
 	dblist(0, dbmax) = ITEM_ID_GRAVITY_AXE, dbsum
 	dbmax++
 *db_item_DRAKE_ROD
 	if ( 15 > objlv ) {
-		goto *db_item_DEED_REMOVAL_DEED
+		goto *db_item_DEED_HOME_RELOCATION
 	}
 	if ( fltselect != 3 ) {
-		goto *db_item_DEED_REMOVAL_DEED
+		goto *db_item_DEED_HOME_RELOCATION
 	}
 	if ( flttypemajor != FILTER_NOTHING ) {
 		if ( flttypemajor != FILTER_WEAPON ) {
-			goto *db_item_DEED_REMOVAL_DEED
+			goto *db_item_DEED_HOME_RELOCATION
 		}
 	}
 	if ( flttypeminor != FILTER_NOTHING ) {
 		if ( flttypeminor != FILTER_WEAPON_STAVE ) {
-			goto *db_item_DEED_REMOVAL_DEED
+			goto *db_item_DEED_HOME_RELOCATION
 		}
 	}
 	if ( filtermax != 0 ) {
 		dbtmp = 1
 		repeat filtermax
@@ -10588,17 +11196,17 @@
 				dbtmp = 0
 				break
 			}
 		loop
 		if ( dbtmp == 0 ) {
-			goto *db_item_DEED_REMOVAL_DEED
+			goto *db_item_DEED_HOME_RELOCATION
 		}
 	}
 	dbsum += 1000000 / (1000 + abs(objlv - 15) * 10) + 1
 	dblist(0, dbmax) = ITEM_ID_DRAKE_ROD, dbsum
 	dbmax++
-*db_item_DEED_REMOVAL_DEED
+*db_item_DEED_HOME_RELOCATION
 	if ( 1 > objlv ) {
 		goto *db_item_MYSTERIOUS_DIARY
 	}
 	if ( fltselect != 1 ) {
 		goto *db_item_MYSTERIOUS_DIARY
@@ -17023,15 +17631,15 @@
 		loop
 		if ( dbtmp == 0 ) {
 			goto *db_item_SPELLBOOK_MAGIC_BALL
 		}
 	}
-	dbsum += 300000 / (1000 + abs(objlv - 20) * 0) + 1
+	dbsum += 1000000 / (1000 + abs(objlv - 20) * 0) + 1
 	dblist(0, dbmax) = ITEM_ID_SPELLBOOK_MAGIC_LASER, dbsum
 	dbmax++
 *db_item_SPELLBOOK_MAGIC_BALL
-	if ( 30 > objlv ) {
+	if ( 25 > objlv ) {
 		goto *db_item_AXE_OF_DESTRUCTION
 	}
 	if ( fltselect != 0 ) {
 		goto *db_item_AXE_OF_DESTRUCTION
 	}
@@ -17055,11 +17663,11 @@
 		loop
 		if ( dbtmp == 0 ) {
 			goto *db_item_AXE_OF_DESTRUCTION
 		}
 	}
-	dbsum += 300000 / (1000 + abs(objlv - 30) * 0) + 1
+	dbsum += 700000 / (1000 + abs(objlv - 25) * 0) + 1
 	dblist(0, dbmax) = ITEM_ID_SPELLBOOK_MAGIC_BALL, dbsum
 	dbmax++
 *db_item_AXE_OF_DESTRUCTION
 	if ( 30 > objlv ) {
 		goto *db_item_EASTERN_PARTITION
@@ -20719,11 +21327,11 @@
 		if ( flttypemajor != FILTER_ITEM_ROD ) {
 			goto *db_item_MODERN_RACK
 		}
 	}
 	if ( flttypeminor != FILTER_NOTHING ) {
-		if ( flttypeminor != FILTER_ITEM_ROD_UTILITY ) {
+		if ( flttypeminor != FILTER_ITEM_ROD ) {
 			goto *db_item_MODERN_RACK
 		}
 	}
 	if ( filtermax != 0 ) {
 		dbtmp = 1
@@ -21071,11 +21679,11 @@
 		if ( flttypemajor != FILTER_ITEM_ROD ) {
 			goto *db_item_SPELLBOOK_FIRE_WALL
 		}
 	}
 	if ( flttypeminor != FILTER_NOTHING ) {
-		if ( flttypeminor != FILTER_ITEM_ROD_ENVIRONMENTAL ) {
+		if ( flttypeminor != FILTER_ITEM_ROD ) {
 			goto *db_item_SPELLBOOK_FIRE_WALL
 		}
 	}
 	if ( filtermax != 0 ) {
 		dbtmp = 1
@@ -21231,11 +21839,11 @@
 		if ( flttypemajor != FILTER_ITEM_ROD ) {
 			goto *db_item_SPELLBOOK_ACID_GROUND
 		}
 	}
 	if ( flttypeminor != FILTER_NOTHING ) {
-		if ( flttypeminor != FILTER_ITEM_ROD_ENVIRONMENTAL ) {
+		if ( flttypeminor != FILTER_ITEM_ROD ) {
 			goto *db_item_SPELLBOOK_ACID_GROUND
 		}
 	}
 	if ( filtermax != 0 ) {
 		dbtmp = 1
@@ -23951,11 +24559,11 @@
 		if ( flttypemajor != FILTER_ITEM_ROD ) {
 			goto *db_item_SCROLL_ALLY
 		}
 	}
 	if ( flttypeminor != FILTER_NOTHING ) {
-		if ( flttypeminor != FILTER_ITEM_ROD_ENVIRONMENTAL ) {
+		if ( flttypeminor != FILTER_ITEM_ROD ) {
 			goto *db_item_SCROLL_ALLY
 		}
 	}
 	if ( filtermax != 0 ) {
 		dbtmp = 1
@@ -30031,11 +30639,11 @@
 		if ( flttypemajor != FILTER_ITEM_ROD ) {
 			goto *db_item_SPELLBOOK_WISHING
 		}
 	}
 	if ( flttypeminor != FILTER_NOTHING ) {
-		if ( flttypeminor != FILTER_ITEM_ROD_UTILITY ) {
+		if ( flttypeminor != FILTER_ITEM_ROD ) {
 			goto *db_item_SPELLBOOK_WISHING
 		}
 	}
 	if ( filtermax != 0 ) {
 		dbtmp = 1
@@ -30595,11 +31203,11 @@
 	}
 	dbsum += 1000000 / (1000 + abs(objlv - 1) * 10) + 1
 	dblist(0, dbmax) = ITEM_ID_FIRE_WOOD, dbsum
 	dbmax++
 *db_item_SPELLBOOK_CHAOS_BALL
-	if ( 15 > objlv ) {
+	if ( 35 > objlv ) {
 		goto *db_item_SPELLBOOK_SOUND_BALL
 	}
 	if ( fltselect != 0 ) {
 		goto *db_item_SPELLBOOK_SOUND_BALL
 	}
@@ -30623,15 +31231,15 @@
 		loop
 		if ( dbtmp == 0 ) {
 			goto *db_item_SPELLBOOK_SOUND_BALL
 		}
 	}
-	dbsum += 700000 / (1000 + abs(objlv - 15) * 0) + 1
+	dbsum += 700000 / (1000 + abs(objlv - 35) * 0) + 1
 	dblist(0, dbmax) = ITEM_ID_SPELLBOOK_CHAOS_BALL, dbsum
 	dbmax++
 *db_item_SPELLBOOK_SOUND_BALL
-	if ( 10 > objlv ) {
+	if ( 35 > objlv ) {
 		goto *db_item_SPELLBOOK_FIRE_BALL
 	}
 	if ( fltselect != 0 ) {
 		goto *db_item_SPELLBOOK_FIRE_BALL
 	}
@@ -30655,15 +31263,15 @@
 		loop
 		if ( dbtmp == 0 ) {
 			goto *db_item_SPELLBOOK_FIRE_BALL
 		}
 	}
-	dbsum += 800000 / (1000 + abs(objlv - 10) * 0) + 1
+	dbsum += 700000 / (1000 + abs(objlv - 35) * 0) + 1
 	dblist(0, dbmax) = ITEM_ID_SPELLBOOK_SOUND_BALL, dbsum
 	dbmax++
 *db_item_SPELLBOOK_FIRE_BALL
-	if ( 3 > objlv ) {
+	if ( 30 > objlv ) {
 		goto *db_item_SPELLBOOK_ICE_BALL
 	}
 	if ( fltselect != 0 ) {
 		goto *db_item_SPELLBOOK_ICE_BALL
 	}
@@ -30687,15 +31295,15 @@
 		loop
 		if ( dbtmp == 0 ) {
 			goto *db_item_SPELLBOOK_ICE_BALL
 		}
 	}
-	dbsum += 1000000 / (1000 + abs(objlv - 3) * 0) + 1
+	dbsum += 700000 / (1000 + abs(objlv - 30) * 0) + 1
 	dblist(0, dbmax) = ITEM_ID_SPELLBOOK_FIRE_BALL, dbsum
 	dbmax++
 *db_item_SPELLBOOK_ICE_BALL
-	if ( 3 > objlv ) {
+	if ( 30 > objlv ) {
 		goto *db_item_SPELLBOOK_ILLUSION_BEAM
 	}
 	if ( fltselect != 0 ) {
 		goto *db_item_SPELLBOOK_ILLUSION_BEAM
 	}
@@ -30719,11 +31327,11 @@
 		loop
 		if ( dbtmp == 0 ) {
 			goto *db_item_SPELLBOOK_ILLUSION_BEAM
 		}
 	}
-	dbsum += 1000000 / (1000 + abs(objlv - 3) * 0) + 1
+	dbsum += 700000 / (1000 + abs(objlv - 30) * 0) + 1
 	dblist(0, dbmax) = ITEM_ID_SPELLBOOK_ICE_BALL, dbsum
 	dbmax++
 *db_item_SPELLBOOK_ILLUSION_BEAM
 	if ( 5 > objlv ) {
 		goto *db_item_SPELLBOOK_DARKNESS_BEAM
@@ -30879,11 +31487,11 @@
 		loop
 		if ( dbtmp == 0 ) {
 			goto *db_item_SPELLBOOK_NETHER_EYE
 		}
 	}
-	dbsum += 800000 / (1000 + abs(objlv - 12) * 0) + 1
+	dbsum += 1000000 / (1000 + abs(objlv - 12) * 0) + 1
 	dblist(0, dbmax) = ITEM_ID_SPELLBOOK_CHAOS_EYE, dbsum
 	dbmax++
 *db_item_SPELLBOOK_NETHER_EYE
 	if ( 6 > objlv ) {
 		goto *db_item_POISON
@@ -32815,11 +33423,11 @@
 		if ( flttypemajor != FILTER_ITEM_ROD ) {
 			goto *db_item_ROD_MAGIC_MAPPING
 		}
 	}
 	if ( flttypeminor != FILTER_NOTHING ) {
-		if ( flttypeminor != FILTER_ITEM_ROD_HEALING ) {
+		if ( flttypeminor != FILTER_ITEM_ROD ) {
 			goto *db_item_ROD_MAGIC_MAPPING
 		}
 	}
 	if ( filtermax != 0 ) {
 		dbtmp = 1
@@ -33167,11 +33775,11 @@
 		if ( flttypemajor != FILTER_ITEM_FOOD ) {
 			goto *db_item_API_NUT
 		}
 	}
 	if ( flttypeminor != FILTER_NOTHING ) {
-		if ( flttypeminor != FILTER_NONE ) {
+		if ( flttypeminor != FILTER_ITEM_FOOD_VEGETABLE ) {
 			goto *db_item_API_NUT
 		}
 	}
 	if ( filtermax != 0 ) {
 		dbtmp = 1
@@ -33711,11 +34319,11 @@
 		if ( flttypemajor != FILTER_ITEM_ROD ) {
 			goto *db_item_BUNK_BED
 		}
 	}
 	if ( flttypeminor != FILTER_NOTHING ) {
-		if ( flttypeminor != FILTER_ITEM_ROD_DAMAGE ) {
+		if ( flttypeminor != FILTER_ITEM_ROD ) {
 			goto *db_item_BUNK_BED
 		}
 	}
 	if ( filtermax != 0 ) {
 		dbtmp = 1
@@ -35311,11 +35919,11 @@
 		if ( flttypemajor != FILTER_ITEM_ROD ) {
 			goto *db_item_BREAD_DISPLAY
 		}
 	}
 	if ( flttypeminor != FILTER_NOTHING ) {
-		if ( flttypeminor != FILTER_ITEM_ROD_HEALING ) {
+		if ( flttypeminor != FILTER_ITEM_ROD ) {
 			goto *db_item_BREAD_DISPLAY
 		}
 	}
 	if ( filtermax != 0 ) {
 		dbtmp = 1
@@ -35375,11 +35983,11 @@
 		if ( flttypemajor != FILTER_ITEM_ROD ) {
 			goto *db_item_ROD_ICE_BOLT
 		}
 	}
 	if ( flttypeminor != FILTER_NOTHING ) {
-		if ( flttypeminor != FILTER_ITEM_ROD_DAMAGE ) {
+		if ( flttypeminor != FILTER_ITEM_ROD ) {
 			goto *db_item_ROD_ICE_BOLT
 		}
 	}
 	if ( filtermax != 0 ) {
 		dbtmp = 1
@@ -35407,11 +36015,11 @@
 		if ( flttypemajor != FILTER_ITEM_ROD ) {
 			goto *db_item_ROD_SUMMON_MONSTERS
 		}
 	}
 	if ( flttypeminor != FILTER_NOTHING ) {
-		if ( flttypeminor != FILTER_ITEM_ROD_DAMAGE ) {
+		if ( flttypeminor != FILTER_ITEM_ROD ) {
 			goto *db_item_ROD_SUMMON_MONSTERS
 		}
 	}
 	if ( filtermax != 0 ) {
 		dbtmp = 1
@@ -35471,11 +36079,11 @@
 		if ( flttypemajor != FILTER_ITEM_ROD ) {
 			goto *db_item_ROD_CURE_MINOR_WOUND
 		}
 	}
 	if ( flttypeminor != FILTER_NOTHING ) {
-		if ( flttypeminor != FILTER_ITEM_ROD_UTILITY ) {
+		if ( flttypeminor != FILTER_ITEM_ROD ) {
 			goto *db_item_ROD_CURE_MINOR_WOUND
 		}
 	}
 	if ( filtermax != 0 ) {
 		dbtmp = 1
@@ -35503,11 +36111,11 @@
 		if ( flttypemajor != FILTER_ITEM_ROD ) {
 			goto *db_item_SPELLBOOK_SUMMON_MONSTERS
 		}
 	}
 	if ( flttypeminor != FILTER_NOTHING ) {
-		if ( flttypeminor != FILTER_ITEM_ROD_HEALING ) {
+		if ( flttypeminor != FILTER_ITEM_ROD ) {
 			goto *db_item_SPELLBOOK_SUMMON_MONSTERS
 		}
 	}
 	if ( filtermax != 0 ) {
 		dbtmp = 1
@@ -38211,11 +38819,11 @@
 	}
 	dbsum += 1000000 / (1000 + abs(objlv - 1) * 10) + 1
 	dblist(0, dbmax) = ITEM_ID_EARTH_CRYSTAL, dbsum
 	dbmax++
 *db_item_SPELLBOOK_LIGHTNING_BOLT
-	if ( 1 > objlv ) {
+	if ( 12 > objlv ) {
 		goto *db_item_SPELLBOOK_FIRE_BOLT
 	}
 	if ( fltselect != 0 ) {
 		goto *db_item_SPELLBOOK_FIRE_BOLT
 	}
@@ -38239,15 +38847,15 @@
 		loop
 		if ( dbtmp == 0 ) {
 			goto *db_item_SPELLBOOK_FIRE_BOLT
 		}
 	}
-	dbsum += 1000000 / (1000 + abs(objlv - 1) * 0) + 1
+	dbsum += 1000000 / (1000 + abs(objlv - 12) * 0) + 1
 	dblist(0, dbmax) = ITEM_ID_SPELLBOOK_LIGHTNING_BOLT, dbsum
 	dbmax++
 *db_item_SPELLBOOK_FIRE_BOLT
-	if ( 1 > objlv ) {
+	if ( 12 > objlv ) {
 		goto *db_item_SPELLBOOK_ICE_BOLT
 	}
 	if ( fltselect != 0 ) {
 		goto *db_item_SPELLBOOK_ICE_BOLT
 	}
@@ -38271,15 +38879,15 @@
 		loop
 		if ( dbtmp == 0 ) {
 			goto *db_item_SPELLBOOK_ICE_BOLT
 		}
 	}
-	dbsum += 1000000 / (1000 + abs(objlv - 1) * 0) + 1
+	dbsum += 1000000 / (1000 + abs(objlv - 12) * 0) + 1
 	dblist(0, dbmax) = ITEM_ID_SPELLBOOK_FIRE_BOLT, dbsum
 	dbmax++
 *db_item_SPELLBOOK_ICE_BOLT
-	if ( 1 > objlv ) {
+	if ( 12 > objlv ) {
 		goto *db_item_BOTTLE_CRIM_ALE
 	}
 	if ( fltselect != 0 ) {
 		goto *db_item_BOTTLE_CRIM_ALE
 	}
@@ -38303,11 +38911,11 @@
 		loop
 		if ( dbtmp == 0 ) {
 			goto *db_item_BOTTLE_CRIM_ALE
 		}
 	}
-	dbsum += 1000000 / (1000 + abs(objlv - 1) * 0) + 1
+	dbsum += 1000000 / (1000 + abs(objlv - 12) * 0) + 1
 	dblist(0, dbmax) = ITEM_ID_SPELLBOOK_ICE_BOLT, dbsum
 	dbmax++
 *db_item_BOTTLE_CRIM_ALE
 	if ( 1 > objlv ) {
 		goto *db_item_SLEEPING_DRUG
@@ -39300,23 +39908,23 @@
 	dbsum += 1000000 / (1000 + abs(objlv - 1) * 10) + 1
 	dblist(0, dbmax) = ITEM_ID_LONG_SWORD, dbsum
 	dbmax++
 *db_item_DUMMY
 	if ( 1 > objlv ) {
-		goto *db_item_finish
+		goto *label_3482
 	}
 	if ( fltselect != 1 ) {
-		goto *db_item_finish
+		goto *label_3482
 	}
 	if ( flttypemajor != FILTER_NOTHING ) {
-		if ( flttypemajor != 99999999 ) {
-			goto *db_item_finish
+		if ( flttypemajor != FILTER_NONE2 ) {
+			goto *label_3482
 		}
 	}
 	if ( flttypeminor != FILTER_NOTHING ) {
-		if ( flttypeminor != 99999999 ) {
-			goto *db_item_finish
+		if ( flttypeminor != FILTER_NONE2 ) {
+			goto *label_3482
 		}
 	}
 	if ( filtermax != 0 ) {
 		dbtmp = 1
 		repeat filtermax
@@ -39324,32 +39932,1399 @@
 				dbtmp = 0
 				break
 			}
 		loop
 		if ( dbtmp == 0 ) {
-			goto *db_item_finish
+			goto *label_3482
 		}
 	}
 	dbsum += 1000000 / (1000 + abs(objlv - 1) * 10) + 1
 	dblist(0, dbmax) = ITEM_ID_DUMMY, dbsum
 	dbmax++
-*db_item_finish
+*label_3482
 	if ( dbsum != 0 ) {
 		exrand_rnd dbtmp, dbsum
 		repeat dbmax
 			if ( dblist(1, cnt) > dbtmp ) {
 				dbid = dblist(0, cnt)
 				break
 			}
 		loop
 	}
 	else {
-		dbid = ITEM_ID_BUGGED_BOOK
+		dbid = 25
 	}
 	return
-
-*db_item_set
+*label_3484
+	if ( dbid == ITEM_ID_SPELLBOOK_OF_THUNDER_VORTEX ) {
+		if ( dbmode == DBMODE_SET_STATS | dbmode == DBMODE_SET ) {
+			inv(INV_ITEM_VALUE, ci) = 4500
+			inv(INV_ITEM_WEIGHT, ci) = 380
+		}
+		if ( dbmode == DBMODE_SET ) {
+			inv(INV_ITEM_ID, ci) = ITEM_ID_SPELLBOOK_OF_THUNDER_VORTEX
+			inv(INV_ITEM_PIC, ci) = xy2pic(0, 13)
+			reftype = FILTER_ITEM_SPELLBOOK
+			reftypeminor = FILTER_NOTHING
+			inv(INV_ITEM_NUM, ci) = 1
+			fixeditemenc = 0
+			inv(INV_ITEM_IDENTIFY_LEVEL, ci) = 0
+			inv((9 /*!!!@[INV_ITEM_AMMO @@@ INV_ITEM_CHARGE @@@ INV_ITEM_CLIENT @@@ INV_ITEM_FILE @@@ INV_ITEM_NEXT_PERIOD]@!!! */), ci) = 3 + rnd(3) - rnd(3)
+			ibitmod ITEM_BIT_CHARGE_ITEM, ci, TRUE
+			return
+		}
+		if ( dbmode == DBMODE_REF ) {
+			ichargelevel = 3
+			infilterref = ""
+			reftype = FILTER_ITEM_SPELLBOOK
+			return
+		}
+		if ( dbmode == DBMODE_REF_SPEC ) {
+			if ( dbspec == DBSPEC_TYPE ) {
+				return 54000
+			}
+			if ( dbspec == DBSPEC_TYPE_MINOR ) {
+				return 99999
+			}
+			if ( dbspec == DBSPEC_VALUE_ORG ) {
+				return 4500
+			}
+			if ( dbspec == DBSPEC_PARAM3_ORG ) {
+				return
+			}
+			if ( dbspec == DBSPEC_CAN_READ ) {
+				return 1
+			}
+			if ( dbspec == DBSPEC_PCC ) {
+				return 0
+			}
+			if ( dbspec == DBSPEC_OBJ_LEVEL ) {
+				return 30
+			}
+			if ( dbspec == DBSPEC_RARE_LEVEL ) {
+				return 700
+			}
+			return 0
+		}
+		if ( dbmode == DBMODE_ON_READ ) {
+			efid = SKILL_SPELL_THUNDER_VORTEX
+			efp = 100
+			gosub *readSpellbook
+			return -1
+		}
+		if ( dbmode == DBMODE_DESC ) {
+			if ( jp ) {
+				description(0) = "\t\t「雷霆の渦」という呪文について学ぶことができる魔法書。怒って雷を落としたいあなたに。\n#〜本の為の本・魔法書編〜\n"
+				description(1) = "<ランク6魔法>"
+				description(2) = ""
+				description(3) = "\t\t電撃属性の範囲魔法呪文を唱える為に必要な本。読むことができる。\n#〜鑑定報告書：＜書物＞カテゴリ〜\n"
+			}
+			else {
+				description(0) = ""
+				description(1) = ""
+				description(3) = ""
+			}
+			return
+		}
+		return 0
+	}
+	if ( dbid == ITEM_ID_SPELLBOOK_OF_ECLIPSE_JAIL ) {
+		if ( dbmode == DBMODE_SET_STATS | dbmode == DBMODE_SET ) {
+			inv(INV_ITEM_VALUE, ci) = 4800
+			inv(INV_ITEM_WEIGHT, ci) = 380
+		}
+		if ( dbmode == DBMODE_SET ) {
+			inv(INV_ITEM_ID, ci) = ITEM_ID_SPELLBOOK_OF_ECLIPSE_JAIL
+			inv(INV_ITEM_PIC, ci) = xy2pic(0, 13)
+			reftype = FILTER_ITEM_SPELLBOOK
+			reftypeminor = FILTER_NOTHING
+			inv(INV_ITEM_NUM, ci) = 1
+			fixeditemenc = 0
+			inv(INV_ITEM_IDENTIFY_LEVEL, ci) = 0
+			inv((9 /*!!!@[INV_ITEM_AMMO @@@ INV_ITEM_CHARGE @@@ INV_ITEM_CLIENT @@@ INV_ITEM_FILE @@@ INV_ITEM_NEXT_PERIOD]@!!! */), ci) = 3 + rnd(3) - rnd(3)
+			ibitmod ITEM_BIT_CHARGE_ITEM, ci, TRUE
+			return
+		}
+		if ( dbmode == DBMODE_REF ) {
+			ichargelevel = 3
+			infilterref = ""
+			reftype = FILTER_ITEM_SPELLBOOK
+			return
+		}
+		if ( dbmode == DBMODE_REF_SPEC ) {
+			if ( dbspec == DBSPEC_TYPE ) {
+				return 54000
+			}
+			if ( dbspec == DBSPEC_TYPE_MINOR ) {
+				return 99999
+			}
+			if ( dbspec == DBSPEC_VALUE_ORG ) {
+				return 4800
+			}
+			if ( dbspec == DBSPEC_PARAM3_ORG ) {
+				return
+			}
+			if ( dbspec == DBSPEC_CAN_READ ) {
+				return 1
+			}
+			if ( dbspec == DBSPEC_PCC ) {
+				return 0
+			}
+			if ( dbspec == DBSPEC_OBJ_LEVEL ) {
+				return 35
+			}
+			if ( dbspec == DBSPEC_RARE_LEVEL ) {
+				return 700
+			}
+			return 0
+		}
+		if ( dbmode == DBMODE_ON_READ ) {
+			efid = SKILL_SPELL_ECLIPSE
+			efp = 100
+			gosub *readSpellbook
+			return -1
+		}
+		if ( dbmode == DBMODE_DESC ) {
+			if ( jp ) {
+				description(0) = "\t\t「月蝕の檻」という呪文について学ぶことができる魔法書。暗闇に神秘を感じるあなたに。\n#〜本の為の本・魔法書編〜\n"
+				description(1) = "<ランク7魔法>"
+				description(2) = ""
+				description(3) = "\t\t暗黒属性の範囲魔法呪文を唱える為に必要な本。読むことができる。\n#〜鑑定報告書：＜書物＞カテゴリ〜\n"
+			}
+			else {
+				description(0) = ""
+				description(1) = ""
+				description(3) = ""
+			}
+			return
+		}
+		return 0
+	}
+	if ( dbid == ITEM_ID_SPELLBOOK_OF_NETHER_ROAR ) {
+		if ( dbmode == DBMODE_SET_STATS | dbmode == DBMODE_SET ) {
+			inv(INV_ITEM_VALUE, ci) = 4800
+			inv(INV_ITEM_WEIGHT, ci) = 380
+		}
+		if ( dbmode == DBMODE_SET ) {
+			inv(INV_ITEM_ID, ci) = ITEM_ID_SPELLBOOK_OF_NETHER_ROAR
+			inv(INV_ITEM_PIC, ci) = xy2pic(0, 13)
+			reftype = FILTER_ITEM_SPELLBOOK
+			reftypeminor = FILTER_NOTHING
+			inv(INV_ITEM_NUM, ci) = 1
+			fixeditemenc = 0
+			inv(INV_ITEM_IDENTIFY_LEVEL, ci) = 0
+			inv((9 /*!!!@[INV_ITEM_AMMO @@@ INV_ITEM_CHARGE @@@ INV_ITEM_CLIENT @@@ INV_ITEM_FILE @@@ INV_ITEM_NEXT_PERIOD]@!!! */), ci) = 3 + rnd(3) - rnd(3)
+			ibitmod ITEM_BIT_CHARGE_ITEM, ci, TRUE
+			return
+		}
+		if ( dbmode == DBMODE_REF ) {
+			ichargelevel = 3
+			infilterref = ""
+			reftype = FILTER_ITEM_SPELLBOOK
+			return
+		}
+		if ( dbmode == DBMODE_REF_SPEC ) {
+			if ( dbspec == DBSPEC_TYPE ) {
+				return 54000
+			}
+			if ( dbspec == DBSPEC_TYPE_MINOR ) {
+				return 99999
+			}
+			if ( dbspec == DBSPEC_VALUE_ORG ) {
+				return 4800
+			}
+			if ( dbspec == DBSPEC_PARAM3_ORG ) {
+				return
+			}
+			if ( dbspec == DBSPEC_CAN_READ ) {
+				return 1
+			}
+			if ( dbspec == DBSPEC_PCC ) {
+				return 0
+			}
+			if ( dbspec == DBSPEC_OBJ_LEVEL ) {
+				return 35
+			}
+			if ( dbspec == DBSPEC_RARE_LEVEL ) {
+				return 700
+			}
+			return 0
+		}
+		if ( dbmode == DBMODE_ON_READ ) {
+			efid = SKILL_SPELL_NETHER_WAVE
+			efp = 100
+			gosub *readSpellbook
+			return -1
+		}
+		if ( dbmode == DBMODE_DESC ) {
+			if ( jp ) {
+				description(0) = "\t\t「冥王の咆哮」という呪文について学ぶことができる魔法書。地獄に君臨したいあなたに。\n#〜本の為の本・魔法書編〜\n"
+				description(1) = "<ランク7魔法>"
+				description(2) = ""
+				description(3) = "\t\t地獄属性の範囲魔法呪文を唱える為に必要な本。読むことができる。\n#〜鑑定報告書：＜書物＞カテゴリ〜\n"
+			}
+			else {
+				description(0) = ""
+				description(1) = ""
+				description(3) = ""
+			}
+			return
+		}
+		return 0
+	}
+	if ( dbid == ITEM_ID_SPELLBOOK_OF_POISON_STORM ) {
+		if ( dbmode == DBMODE_SET_STATS | dbmode == DBMODE_SET ) {
+			inv(INV_ITEM_VALUE, ci) = 4800
+			inv(INV_ITEM_WEIGHT, ci) = 380
+		}
+		if ( dbmode == DBMODE_SET ) {
+			inv(INV_ITEM_ID, ci) = ITEM_ID_SPELLBOOK_OF_POISON_STORM
+			inv(INV_ITEM_PIC, ci) = xy2pic(0, 13)
+			reftype = FILTER_ITEM_SPELLBOOK
+			reftypeminor = FILTER_NOTHING
+			inv(INV_ITEM_NUM, ci) = 1
+			fixeditemenc = 0
+			inv(INV_ITEM_IDENTIFY_LEVEL, ci) = 0
+			inv((9 /*!!!@[INV_ITEM_AMMO @@@ INV_ITEM_CHARGE @@@ INV_ITEM_CLIENT @@@ INV_ITEM_FILE @@@ INV_ITEM_NEXT_PERIOD]@!!! */), ci) = 3 + rnd(3) - rnd(3)
+			ibitmod ITEM_BIT_CHARGE_ITEM, ci, TRUE
+			return
+		}
+		if ( dbmode == DBMODE_REF ) {
+			ichargelevel = 3
+			infilterref = ""
+			reftype = FILTER_ITEM_SPELLBOOK
+			return
+		}
+		if ( dbmode == DBMODE_REF_SPEC ) {
+			if ( dbspec == DBSPEC_TYPE ) {
+				return 54000
+			}
+			if ( dbspec == DBSPEC_TYPE_MINOR ) {
+				return 99999
+			}
+			if ( dbspec == DBSPEC_VALUE_ORG ) {
+				return 4800
+			}
+			if ( dbspec == DBSPEC_PARAM3_ORG ) {
+				return
+			}
+			if ( dbspec == DBSPEC_CAN_READ ) {
+				return 1
+			}
+			if ( dbspec == DBSPEC_PCC ) {
+				return 0
+			}
+			if ( dbspec == DBSPEC_OBJ_LEVEL ) {
+				return 35
+			}
+			if ( dbspec == DBSPEC_RARE_LEVEL ) {
+				return 700
+			}
+			return 0
+		}
+		if ( dbmode == DBMODE_ON_READ ) {
+			efid = SKILL_SPELL_POISON_STORM
+			efp = 100
+			gosub *readSpellbook
+			return -1
+		}
+		if ( dbmode == DBMODE_DESC ) {
+			if ( jp ) {
+				description(0) = "\t\t「猛毒の嵐」という呪文について学ぶことができる魔法書。毒をまき散らしたいあなたに。\n#〜本の為の本・魔法書編〜\n"
+				description(1) = "<ランク7魔法>"
+				description(2) = ""
+				description(3) = "\t\t毒属性の範囲魔法呪文を唱える為に必要な本。読むことができる。\n#〜鑑定報告書：＜書物＞カテゴリ〜\n"
+			}
+			else {
+				description(0) = ""
+				description(1) = ""
+				description(3) = ""
+			}
+			return
+		}
+		return 0
+	}
+	if ( dbid == ITEM_ID_SPELLBOOK_OF_BUBBLE_STORM ) {
+		if ( dbmode == DBMODE_SET_STATS | dbmode == DBMODE_SET ) {
+			inv(INV_ITEM_VALUE, ci) = 5000
+			inv(INV_ITEM_WEIGHT, ci) = 380
+		}
+		if ( dbmode == DBMODE_SET ) {
+			inv(INV_ITEM_ID, ci) = ITEM_ID_SPELLBOOK_OF_BUBBLE_STORM
+			inv(INV_ITEM_PIC, ci) = xy2pic(0, 13)
+			reftype = FILTER_ITEM_SPELLBOOK
+			reftypeminor = FILTER_NOTHING
+			inv(INV_ITEM_NUM, ci) = 1
+			fixeditemenc = 0
+			inv(INV_ITEM_IDENTIFY_LEVEL, ci) = 0
+			inv((9 /*!!!@[INV_ITEM_AMMO @@@ INV_ITEM_CHARGE @@@ INV_ITEM_CLIENT @@@ INV_ITEM_FILE @@@ INV_ITEM_NEXT_PERIOD]@!!! */), ci) = 3 + rnd(3) - rnd(3)
+			ibitmod ITEM_BIT_CHARGE_ITEM, ci, TRUE
+			return
+		}
+		if ( dbmode == DBMODE_REF ) {
+			ichargelevel = 3
+			infilterref = ""
+			reftype = FILTER_ITEM_SPELLBOOK
+			return
+		}
+		if ( dbmode == DBMODE_REF_SPEC ) {
+			if ( dbspec == DBSPEC_TYPE ) {
+				return 54000
+			}
+			if ( dbspec == DBSPEC_TYPE_MINOR ) {
+				return 99999
+			}
+			if ( dbspec == DBSPEC_VALUE_ORG ) {
+				return 5000
+			}
+			if ( dbspec == DBSPEC_PARAM3_ORG ) {
+				return
+			}
+			if ( dbspec == DBSPEC_CAN_READ ) {
+				return 1
+			}
+			if ( dbspec == DBSPEC_PCC ) {
+				return 0
+			}
+			if ( dbspec == DBSPEC_OBJ_LEVEL ) {
+				return 40
+			}
+			if ( dbspec == DBSPEC_RARE_LEVEL ) {
+				return 700
+			}
+			return 0
+		}
+		if ( dbmode == DBMODE_ON_READ ) {
+			efid = SKILL_SPELL_BUBBLE_STORM
+			efp = 100
+			gosub *readSpellbook
+			return -1
+		}
+		if ( dbmode == DBMODE_DESC ) {
+			if ( jp ) {
+				description(0) = "\t\t「泡沫の嵐」という呪文について学ぶことができる魔法書。シャボン玉が好きなあなたに。\n#〜本の為の本・魔法書編〜\n"
+				description(1) = "<ランク8魔法>"
+				description(2) = ""
+				description(3) = "\t\tＰＶＤＶ属性の範囲魔法呪文を唱える為に必要な本。読むことができる。\n#〜鑑定報告書：＜書物＞カテゴリ〜\n"
+			}
+			else {
+				description(0) = ""
+				description(1) = ""
+				description(3) = ""
+			}
+			return
+		}
+		return 0
+	}
+	if ( dbid == ITEM_ID_SPELLBOOK_OF_ILLUSION_ROAR ) {
+		if ( dbmode == DBMODE_SET_STATS | dbmode == DBMODE_SET ) {
+			inv(INV_ITEM_VALUE, ci) = 4800
+			inv(INV_ITEM_WEIGHT, ci) = 380
+		}
+		if ( dbmode == DBMODE_SET ) {
+			inv(INV_ITEM_ID, ci) = ITEM_ID_SPELLBOOK_OF_ILLUSION_ROAR
+			inv(INV_ITEM_PIC, ci) = xy2pic(0, 13)
+			reftype = FILTER_ITEM_SPELLBOOK
+			reftypeminor = FILTER_NOTHING
+			inv(INV_ITEM_NUM, ci) = 1
+			fixeditemenc = 0
+			inv(INV_ITEM_IDENTIFY_LEVEL, ci) = 0
+			inv((9 /*!!!@[INV_ITEM_AMMO @@@ INV_ITEM_CHARGE @@@ INV_ITEM_CLIENT @@@ INV_ITEM_FILE @@@ INV_ITEM_NEXT_PERIOD]@!!! */), ci) = 3 + rnd(3) - rnd(3)
+			ibitmod ITEM_BIT_CHARGE_ITEM, ci, TRUE
+			return
+		}
+		if ( dbmode == DBMODE_REF ) {
+			ichargelevel = 3
+			infilterref = ""
+			reftype = FILTER_ITEM_SPELLBOOK
+			return
+		}
+		if ( dbmode == DBMODE_REF_SPEC ) {
+			if ( dbspec == DBSPEC_TYPE ) {
+				return 54000
+			}
+			if ( dbspec == DBSPEC_TYPE_MINOR ) {
+				return 99999
+			}
+			if ( dbspec == DBSPEC_VALUE_ORG ) {
+				return 4800
+			}
+			if ( dbspec == DBSPEC_PARAM3_ORG ) {
+				return
+			}
+			if ( dbspec == DBSPEC_CAN_READ ) {
+				return 1
+			}
+			if ( dbspec == DBSPEC_PCC ) {
+				return 0
+			}
+			if ( dbspec == DBSPEC_OBJ_LEVEL ) {
+				return 35
+			}
+			if ( dbspec == DBSPEC_RARE_LEVEL ) {
+				return 700
+			}
+			return 0
+		}
+		if ( dbmode == DBMODE_ON_READ ) {
+			efid = SKILL_SPELL_ILLUSION_ROAR
+			efp = 100
+			gosub *readSpellbook
+			return -1
+		}
+		if ( dbmode == DBMODE_DESC ) {
+			if ( jp ) {
+				description(0) = "\t\t「混沌の渦」という呪文について学ぶことができる魔法書。夢見がちなあなたに。\n#〜本の為の本・魔法書編〜\n"
+				description(1) = "<ランク7魔法>"
+				description(2) = ""
+				description(3) = "\t\t幻惑属性の範囲魔法呪文を唱える為に必要な本。読むことができる。\n#〜鑑定報告書：＜書物＞カテゴリ〜\n"
+			}
+			else {
+				description(0) = ""
+				description(1) = ""
+				description(3) = ""
+			}
+			return
+		}
+		return 0
+	}
+	if ( dbid == ITEM_ID_SPELLBOOK_OF_ANGUISH_JAIL ) {
+		if ( dbmode == DBMODE_SET_STATS | dbmode == DBMODE_SET ) {
+			inv(INV_ITEM_VALUE, ci) = 4800
+			inv(INV_ITEM_WEIGHT, ci) = 380
+		}
+		if ( dbmode == DBMODE_SET ) {
+			inv(INV_ITEM_ID, ci) = ITEM_ID_SPELLBOOK_OF_ANGUISH_JAIL
+			inv(INV_ITEM_PIC, ci) = xy2pic(0, 13)
+			reftype = FILTER_ITEM_SPELLBOOK
+			reftypeminor = FILTER_NOTHING
+			inv(INV_ITEM_NUM, ci) = 1
+			fixeditemenc = 0
+			inv(INV_ITEM_IDENTIFY_LEVEL, ci) = 0
+			inv((9 /*!!!@[INV_ITEM_AMMO @@@ INV_ITEM_CHARGE @@@ INV_ITEM_CLIENT @@@ INV_ITEM_FILE @@@ INV_ITEM_NEXT_PERIOD]@!!! */), ci) = 3 + rnd(3) - rnd(3)
+			ibitmod ITEM_BIT_CHARGE_ITEM, ci, TRUE
+			return
+		}
+		if ( dbmode == DBMODE_REF ) {
+			ichargelevel = 3
+			infilterref = ""
+			reftype = FILTER_ITEM_SPELLBOOK
+			return
+		}
+		if ( dbmode == DBMODE_REF_SPEC ) {
+			if ( dbspec == DBSPEC_TYPE ) {
+				return 54000
+			}
+			if ( dbspec == DBSPEC_TYPE_MINOR ) {
+				return 99999
+			}
+			if ( dbspec == DBSPEC_VALUE_ORG ) {
+				return 4800
+			}
+			if ( dbspec == DBSPEC_PARAM3_ORG ) {
+				return
+			}
+			if ( dbspec == DBSPEC_CAN_READ ) {
+				return 1
+			}
+			if ( dbspec == DBSPEC_PCC ) {
+				return 0
+			}
+			if ( dbspec == DBSPEC_OBJ_LEVEL ) {
+				return 35
+			}
+			if ( dbspec == DBSPEC_RARE_LEVEL ) {
+				return 700
+			}
+			return 0
+		}
+		if ( dbmode == DBMODE_ON_READ ) {
+			efid = SKILL_SPELL_ANGUISH_JAIL
+			efp = 100
+			gosub *readSpellbook
+			return -1
+		}
+		if ( dbmode == DBMODE_DESC ) {
+			if ( jp ) {
+				description(0) = "\t\t「轟音の波動」という呪文について学ぶことができる魔法書。サディストなあなたに。\n#〜本の為の本・魔法書編〜\n"
+				description(1) = "<ランク7魔法>"
+				description(2) = ""
+				description(3) = "\t\t神経属性の範囲魔法呪文を唱える為に必要な本。読むことができる。\n#〜鑑定報告書：＜書物＞カテゴリ〜\n"
+			}
+			else {
+				description(0) = ""
+				description(1) = ""
+				description(3) = ""
+			}
+			return
+		}
+		return 0
+	}
+	if ( dbid == ITEM_ID_SPELLBOOK_OF_NETHER_BOLT ) {
+		if ( dbmode == DBMODE_SET_STATS | dbmode == DBMODE_SET ) {
+			inv(INV_ITEM_VALUE, ci) = 2200
+			inv(INV_ITEM_WEIGHT, ci) = 380
+		}
+		if ( dbmode == DBMODE_SET ) {
+			inv(INV_ITEM_ID, ci) = ITEM_ID_SPELLBOOK_OF_NETHER_BOLT
+			inv(INV_ITEM_PIC, ci) = xy2pic(0, 13)
+			reftype = FILTER_ITEM_SPELLBOOK
+			reftypeminor = FILTER_NOTHING
+			inv(INV_ITEM_NUM, ci) = 1
+			fixeditemenc = 0
+			inv(INV_ITEM_IDENTIFY_LEVEL, ci) = 0
+			inv((9 /*!!!@[INV_ITEM_AMMO @@@ INV_ITEM_CHARGE @@@ INV_ITEM_CLIENT @@@ INV_ITEM_FILE @@@ INV_ITEM_NEXT_PERIOD]@!!! */), ci) = 4 + rnd(4) - rnd(4)
+			ibitmod ITEM_BIT_CHARGE_ITEM, ci, TRUE
+			return
+		}
+		if ( dbmode == DBMODE_REF ) {
+			ichargelevel = 4
+			infilterref = ""
+			reftype = FILTER_ITEM_SPELLBOOK
+			return
+		}
+		if ( dbmode == DBMODE_REF_SPEC ) {
+			if ( dbspec == DBSPEC_TYPE ) {
+				return 54000
+			}
+			if ( dbspec == DBSPEC_TYPE_MINOR ) {
+				return 99999
+			}
+			if ( dbspec == DBSPEC_VALUE_ORG ) {
+				return 2200
+			}
+			if ( dbspec == DBSPEC_PARAM3_ORG ) {
+				return
+			}
+			if ( dbspec == DBSPEC_CAN_READ ) {
+				return 1
+			}
+			if ( dbspec == DBSPEC_PCC ) {
+				return 0
+			}
+			if ( dbspec == DBSPEC_OBJ_LEVEL ) {
+				return 18
+			}
+			if ( dbspec == DBSPEC_RARE_LEVEL ) {
+				return 1000
+			}
+			return 0
+		}
+		if ( dbmode == DBMODE_ON_READ ) {
+			efid = SKILL_SPELL_NETHER_BOLT
+			efp = 100
+			gosub *readSpellbook
+			return -1
+		}
+		if ( dbmode == DBMODE_DESC ) {
+			if ( jp ) {
+				description(0) = "\t\t「ネザーボルト」という呪文について学ぶことができる魔法書。地獄に落としたい人がいるあなたに。\n#〜本の為の本・魔法書編〜\n"
+				description(1) = "<ランク5魔法>"
+				description(2) = ""
+				description(3) = "\t\t地獄属性のボルトを唱える為に必要な本。読むことができる。\n#〜鑑定報告書：＜書物＞カテゴリ〜\n"
+			}
+			else {
+				description(0) = ""
+				description(1) = ""
+				description(3) = ""
+			}
+			return
+		}
+		return 0
+	}
+	if ( dbid == ITEM_ID_SPELLBOOK_OF_POISON_BOLT ) {
+		if ( dbmode == DBMODE_SET_STATS | dbmode == DBMODE_SET ) {
+			inv(INV_ITEM_VALUE, ci) = 2200
+			inv(INV_ITEM_WEIGHT, ci) = 380
+		}
+		if ( dbmode == DBMODE_SET ) {
+			inv(INV_ITEM_ID, ci) = ITEM_ID_SPELLBOOK_OF_POISON_BOLT
+			inv(INV_ITEM_PIC, ci) = xy2pic(0, 13)
+			reftype = FILTER_ITEM_SPELLBOOK
+			reftypeminor = FILTER_NOTHING
+			inv(INV_ITEM_NUM, ci) = 1
+			fixeditemenc = 0
+			inv(INV_ITEM_IDENTIFY_LEVEL, ci) = 0
+			inv((9 /*!!!@[INV_ITEM_AMMO @@@ INV_ITEM_CHARGE @@@ INV_ITEM_CLIENT @@@ INV_ITEM_FILE @@@ INV_ITEM_NEXT_PERIOD]@!!! */), ci) = 4 + rnd(4) - rnd(4)
+			ibitmod ITEM_BIT_CHARGE_ITEM, ci, TRUE
+			return
+		}
+		if ( dbmode == DBMODE_REF ) {
+			ichargelevel = 4
+			infilterref = ""
+			reftype = FILTER_ITEM_SPELLBOOK
+			return
+		}
+		if ( dbmode == DBMODE_REF_SPEC ) {
+			if ( dbspec == DBSPEC_TYPE ) {
+				return 54000
+			}
+			if ( dbspec == DBSPEC_TYPE_MINOR ) {
+				return 99999
+			}
+			if ( dbspec == DBSPEC_VALUE_ORG ) {
+				return 2200
+			}
+			if ( dbspec == DBSPEC_PARAM3_ORG ) {
+				return
+			}
+			if ( dbspec == DBSPEC_CAN_READ ) {
+				return 1
+			}
+			if ( dbspec == DBSPEC_PCC ) {
+				return 0
+			}
+			if ( dbspec == DBSPEC_OBJ_LEVEL ) {
+				return 18
+			}
+			if ( dbspec == DBSPEC_RARE_LEVEL ) {
+				return 1000
+			}
+			return 0
+		}
+		if ( dbmode == DBMODE_ON_READ ) {
+			efid = SKILL_SPELL_POISON_BOLT
+			efp = 100
+			gosub *readSpellbook
+			return -1
+		}
+		if ( dbmode == DBMODE_DESC ) {
+			if ( jp ) {
+				description(0) = "\t\t「ポイズンボルト」という呪文について学ぶことができる魔法書。毒々しいものが好きなあなたに。\n#〜本の為の本・魔法書編〜\n"
+				description(1) = "<ランク5魔法>"
+				description(2) = ""
+				description(3) = "\t\t毒属性のボルトを唱える為に必要な本。読むことができる。\n#〜鑑定報告書：＜書物＞カテゴリ〜\n"
+			}
+			else {
+				description(0) = ""
+				description(1) = ""
+				description(3) = ""
+			}
+			return
+		}
+		return 0
+	}
+	if ( dbid == ITEM_ID_SPELLBOOK_OF_SOUND_BOLT ) {
+		if ( dbmode == DBMODE_SET_STATS | dbmode == DBMODE_SET ) {
+			inv(INV_ITEM_VALUE, ci) = 2200
+			inv(INV_ITEM_WEIGHT, ci) = 380
+		}
+		if ( dbmode == DBMODE_SET ) {
+			inv(INV_ITEM_ID, ci) = ITEM_ID_SPELLBOOK_OF_SOUND_BOLT
+			inv(INV_ITEM_PIC, ci) = xy2pic(0, 13)
+			reftype = FILTER_ITEM_SPELLBOOK
+			reftypeminor = FILTER_NOTHING
+			inv(INV_ITEM_NUM, ci) = 1
+			fixeditemenc = 0
+			inv(INV_ITEM_IDENTIFY_LEVEL, ci) = 0
+			inv((9 /*!!!@[INV_ITEM_AMMO @@@ INV_ITEM_CHARGE @@@ INV_ITEM_CLIENT @@@ INV_ITEM_FILE @@@ INV_ITEM_NEXT_PERIOD]@!!! */), ci) = 4 + rnd(4) - rnd(4)
+			ibitmod ITEM_BIT_CHARGE_ITEM, ci, TRUE
+			return
+		}
+		if ( dbmode == DBMODE_REF ) {
+			ichargelevel = 4
+			infilterref = ""
+			reftype = FILTER_ITEM_SPELLBOOK
+			return
+		}
+		if ( dbmode == DBMODE_REF_SPEC ) {
+			if ( dbspec == DBSPEC_TYPE ) {
+				return 54000
+			}
+			if ( dbspec == DBSPEC_TYPE_MINOR ) {
+				return 99999
+			}
+			if ( dbspec == DBSPEC_VALUE_ORG ) {
+				return 2200
+			}
+			if ( dbspec == DBSPEC_PARAM3_ORG ) {
+				return
+			}
+			if ( dbspec == DBSPEC_CAN_READ ) {
+				return 1
+			}
+			if ( dbspec == DBSPEC_PCC ) {
+				return 0
+			}
+			if ( dbspec == DBSPEC_OBJ_LEVEL ) {
+				return 18
+			}
+			if ( dbspec == DBSPEC_RARE_LEVEL ) {
+				return 1000
+			}
+			return 0
+		}
+		if ( dbmode == DBMODE_ON_READ ) {
+			efid = SKILL_SPELL_SOUND_BOLT
+			efp = 100
+			gosub *readSpellbook
+			return -1
+		}
+		if ( dbmode == DBMODE_DESC ) {
+			if ( jp ) {
+				description(0) = "\t\t「サウンドボルト」という呪文について学ぶことができる魔法書。騒がしいのが好きなあなたに。\n#〜本の為の本・魔法書編〜\n"
+				description(1) = "<ランク5魔法>"
+				description(2) = ""
+				description(3) = "\t\t音属性のボルトを唱える為に必要な本。読むことができる。\n#〜鑑定報告書：＜書物＞カテゴリ〜\n"
+			}
+			else {
+				description(0) = ""
+				description(1) = ""
+				description(3) = ""
+			}
+			return
+		}
+		return 0
+	}
+	if ( dbid == ITEM_ID_SPELLBOOK_OF_CHAOS_BOLT ) {
+		if ( dbmode == DBMODE_SET_STATS | dbmode == DBMODE_SET ) {
+			inv(INV_ITEM_VALUE, ci) = 2200
+			inv(INV_ITEM_WEIGHT, ci) = 380
+		}
+		if ( dbmode == DBMODE_SET ) {
+			inv(INV_ITEM_ID, ci) = ITEM_ID_SPELLBOOK_OF_CHAOS_BOLT
+			inv(INV_ITEM_PIC, ci) = xy2pic(0, 13)
+			reftype = FILTER_ITEM_SPELLBOOK
+			reftypeminor = FILTER_NOTHING
+			inv(INV_ITEM_NUM, ci) = 1
+			fixeditemenc = 0
+			inv(INV_ITEM_IDENTIFY_LEVEL, ci) = 0
+			inv((9 /*!!!@[INV_ITEM_AMMO @@@ INV_ITEM_CHARGE @@@ INV_ITEM_CLIENT @@@ INV_ITEM_FILE @@@ INV_ITEM_NEXT_PERIOD]@!!! */), ci) = 4 + rnd(4) - rnd(4)
+			ibitmod ITEM_BIT_CHARGE_ITEM, ci, TRUE
+			return
+		}
+		if ( dbmode == DBMODE_REF ) {
+			ichargelevel = 4
+			infilterref = ""
+			reftype = FILTER_ITEM_SPELLBOOK
+			return
+		}
+		if ( dbmode == DBMODE_REF_SPEC ) {
+			if ( dbspec == DBSPEC_TYPE ) {
+				return 54000
+			}
+			if ( dbspec == DBSPEC_TYPE_MINOR ) {
+				return 99999
+			}
+			if ( dbspec == DBSPEC_VALUE_ORG ) {
+				return 2200
+			}
+			if ( dbspec == DBSPEC_PARAM3_ORG ) {
+				return
+			}
+			if ( dbspec == DBSPEC_CAN_READ ) {
+				return 1
+			}
+			if ( dbspec == DBSPEC_PCC ) {
+				return 0
+			}
+			if ( dbspec == DBSPEC_OBJ_LEVEL ) {
+				return 18
+			}
+			if ( dbspec == DBSPEC_RARE_LEVEL ) {
+				return 1000
+			}
+			return 0
+		}
+		if ( dbmode == DBMODE_ON_READ ) {
+			efid = SKILL_SPELL_CHAOS_BOLT
+			efp = 100
+			gosub *readSpellbook
+			return -1
+		}
+		if ( dbmode == DBMODE_DESC ) {
+			if ( jp ) {
+				description(0) = "\t\t「カオスボルト」という呪文について学ぶことができる魔法書。散らかっているほうが落ち着くあなたに。\n#〜本の為の本・魔法書編〜\n"
+				description(1) = "<ランク5魔法>"
+				description(2) = ""
+				description(3) = "\t\t混沌属性のボルトを唱える為に必要な本。読むことができる。\n#〜鑑定報告書：＜書物＞カテゴリ〜\n"
+			}
+			else {
+				description(0) = ""
+				description(1) = ""
+				description(3) = ""
+			}
+			return
+		}
+		return 0
+	}
+	if ( dbid == ITEM_ID_SPELLBOOK_OF_NERVE_BOLT ) {
+		if ( dbmode == DBMODE_SET_STATS | dbmode == DBMODE_SET ) {
+			inv(INV_ITEM_VALUE, ci) = 2200
+			inv(INV_ITEM_WEIGHT, ci) = 380
+		}
+		if ( dbmode == DBMODE_SET ) {
+			inv(INV_ITEM_ID, ci) = ITEM_ID_SPELLBOOK_OF_NERVE_BOLT
+			inv(INV_ITEM_PIC, ci) = xy2pic(0, 13)
+			reftype = FILTER_ITEM_SPELLBOOK
+			reftypeminor = FILTER_NOTHING
+			inv(INV_ITEM_NUM, ci) = 1
+			fixeditemenc = 0
+			inv(INV_ITEM_IDENTIFY_LEVEL, ci) = 0
+			inv((9 /*!!!@[INV_ITEM_AMMO @@@ INV_ITEM_CHARGE @@@ INV_ITEM_CLIENT @@@ INV_ITEM_FILE @@@ INV_ITEM_NEXT_PERIOD]@!!! */), ci) = 4 + rnd(4) - rnd(4)
+			ibitmod ITEM_BIT_CHARGE_ITEM, ci, TRUE
+			return
+		}
+		if ( dbmode == DBMODE_REF ) {
+			ichargelevel = 4
+			infilterref = ""
+			reftype = FILTER_ITEM_SPELLBOOK
+			return
+		}
+		if ( dbmode == DBMODE_REF_SPEC ) {
+			if ( dbspec == DBSPEC_TYPE ) {
+				return 54000
+			}
+			if ( dbspec == DBSPEC_TYPE_MINOR ) {
+				return 99999
+			}
+			if ( dbspec == DBSPEC_VALUE_ORG ) {
+				return 2200
+			}
+			if ( dbspec == DBSPEC_PARAM3_ORG ) {
+				return
+			}
+			if ( dbspec == DBSPEC_CAN_READ ) {
+				return 1
+			}
+			if ( dbspec == DBSPEC_PCC ) {
+				return 0
+			}
+			if ( dbspec == DBSPEC_OBJ_LEVEL ) {
+				return 18
+			}
+			if ( dbspec == DBSPEC_RARE_LEVEL ) {
+				return 1000
+			}
+			return 0
+		}
+		if ( dbmode == DBMODE_ON_READ ) {
+			efid = SKILL_SPELL_NERVE_BOLT
+			efp = 100
+			gosub *readSpellbook
+			return -1
+		}
+		if ( dbmode == DBMODE_DESC ) {
+			if ( jp ) {
+				description(0) = "\t\t「ナーブボルト」という呪文について学ぶことができる魔法書。痛みこそが愛だと思うあなたに。\n#〜本の為の本・魔法書編〜\n"
+				description(1) = "<ランク5魔法>"
+				description(2) = ""
+				description(3) = "\t\t神経属性のボルトを唱える為に必要な本。読むことができる。\n#〜鑑定報告書：＜書物＞カテゴリ〜\n"
+			}
+			else {
+				description(0) = ""
+				description(1) = ""
+				description(3) = ""
+			}
+			return
+		}
+		return 0
+	}
+	if ( dbid == ITEM_ID_SPELLBOOK_OF_FIRE_CLAW ) {
+		if ( dbmode == DBMODE_SET_STATS | dbmode == DBMODE_SET ) {
+			inv(INV_ITEM_VALUE, ci) = 1500
+			inv(INV_ITEM_WEIGHT, ci) = 380
+		}
+		if ( dbmode == DBMODE_SET ) {
+			inv(INV_ITEM_ID, ci) = ITEM_ID_SPELLBOOK_OF_FIRE_CLAW
+			inv(INV_ITEM_PIC, ci) = xy2pic(0, 13)
+			reftype = FILTER_ITEM_SPELLBOOK
+			reftypeminor = FILTER_NOTHING
+			inv(INV_ITEM_NUM, ci) = 1
+			fixeditemenc = 0
+			inv(INV_ITEM_IDENTIFY_LEVEL, ci) = 0
+			inv((9 /*!!!@[INV_ITEM_AMMO @@@ INV_ITEM_CHARGE @@@ INV_ITEM_CLIENT @@@ INV_ITEM_FILE @@@ INV_ITEM_NEXT_PERIOD]@!!! */), ci) = 5 + rnd(5) - rnd(5)
+			ibitmod ITEM_BIT_CHARGE_ITEM, ci, TRUE
+			return
+		}
+		if ( dbmode == DBMODE_REF ) {
+			ichargelevel = 5
+			infilterref = ""
+			reftype = FILTER_ITEM_SPELLBOOK
+			return
+		}
+		if ( dbmode == DBMODE_REF_SPEC ) {
+			if ( dbspec == DBSPEC_TYPE ) {
+				return 54000
+			}
+			if ( dbspec == DBSPEC_TYPE_MINOR ) {
+				return 99999
+			}
+			if ( dbspec == DBSPEC_VALUE_ORG ) {
+				return 1500
+			}
+			if ( dbspec == DBSPEC_PARAM3_ORG ) {
+				return
+			}
+			if ( dbspec == DBSPEC_CAN_READ ) {
+				return 1
+			}
+			if ( dbspec == DBSPEC_PCC ) {
+				return 0
+			}
+			if ( dbspec == DBSPEC_OBJ_LEVEL ) {
+				return 5
+			}
+			if ( dbspec == DBSPEC_RARE_LEVEL ) {
+				return 1000
+			}
+			return 0
+		}
+		if ( dbmode == DBMODE_ON_READ ) {
+			efid = SKILL_SPELL_FIRE_CLAW
+			efp = 100
+			gosub *readSpellbook
+			return -1
+		}
+		if ( dbmode == DBMODE_DESC ) {
+			if ( jp ) {
+				description(0) = "\t\t「火炎の爪」という呪文について学ぶことができる魔法書。熱い傷跡を残したいあなたに。\n#〜本の為の本・魔法書編〜\n"
+				description(1) = "<ランク2魔法>"
+				description(2) = ""
+				description(3) = "\t\t火炎属性の矢を唱える為に必要な本。読むことができる。\n#〜鑑定報告書：＜書物＞カテゴリ〜\n"
+			}
+			else {
+				description(0) = ""
+				description(1) = ""
+				description(3) = ""
+			}
+			return
+		}
+		return 0
+	}
+	if ( dbid == ITEM_ID_SPELLBOOK_OF_COLD_BLADE ) {
+		if ( dbmode == DBMODE_SET_STATS | dbmode == DBMODE_SET ) {
+			inv(INV_ITEM_VALUE, ci) = 1500
+			inv(INV_ITEM_WEIGHT, ci) = 380
+		}
+		if ( dbmode == DBMODE_SET ) {
+			inv(INV_ITEM_ID, ci) = ITEM_ID_SPELLBOOK_OF_COLD_BLADE
+			inv(INV_ITEM_PIC, ci) = xy2pic(0, 13)
+			reftype = FILTER_ITEM_SPELLBOOK
+			reftypeminor = FILTER_NOTHING
+			inv(INV_ITEM_NUM, ci) = 1
+			fixeditemenc = 0
+			inv(INV_ITEM_IDENTIFY_LEVEL, ci) = 0
+			inv((9 /*!!!@[INV_ITEM_AMMO @@@ INV_ITEM_CHARGE @@@ INV_ITEM_CLIENT @@@ INV_ITEM_FILE @@@ INV_ITEM_NEXT_PERIOD]@!!! */), ci) = 5 + rnd(5) - rnd(5)
+			ibitmod ITEM_BIT_CHARGE_ITEM, ci, TRUE
+			return
+		}
+		if ( dbmode == DBMODE_REF ) {
+			ichargelevel = 5
+			infilterref = ""
+			reftype = FILTER_ITEM_SPELLBOOK
+			return
+		}
+		if ( dbmode == DBMODE_REF_SPEC ) {
+			if ( dbspec == DBSPEC_TYPE ) {
+				return 54000
+			}
+			if ( dbspec == DBSPEC_TYPE_MINOR ) {
+				return 99999
+			}
+			if ( dbspec == DBSPEC_VALUE_ORG ) {
+				return 1500
+			}
+			if ( dbspec == DBSPEC_PARAM3_ORG ) {
+				return
+			}
+			if ( dbspec == DBSPEC_CAN_READ ) {
+				return 1
+			}
+			if ( dbspec == DBSPEC_PCC ) {
+				return 0
+			}
+			if ( dbspec == DBSPEC_OBJ_LEVEL ) {
+				return 5
+			}
+			if ( dbspec == DBSPEC_RARE_LEVEL ) {
+				return 1000
+			}
+			return 0
+		}
+		if ( dbmode == DBMODE_ON_READ ) {
+			efid = SKILL_SPELL_COLD_BLADE
+			efp = 100
+			gosub *readSpellbook
+			return -1
+		}
+		if ( dbmode == DBMODE_DESC ) {
+			if ( jp ) {
+				description(0) = "\t\t「冷気の刃」という呪文について学ぶことができる魔法書。冷静沈着なあなたに。\n#〜本の為の本・魔法書編〜\n"
+				description(1) = "<ランク2魔法>"
+				description(2) = ""
+				description(3) = "\t\t冷気属性の矢を唱える為に必要な本。読むことができる。\n#〜鑑定報告書：＜書物＞カテゴリ〜\n"
+			}
+			else {
+				description(0) = ""
+				description(1) = ""
+				description(3) = ""
+			}
+			return
+		}
+		return 0
+	}
+	if ( dbid == ITEM_ID_SPELLBOOK_OF_LIGHTNING_SPEAR ) {
+		if ( dbmode == DBMODE_SET_STATS | dbmode == DBMODE_SET ) {
+			inv(INV_ITEM_VALUE, ci) = 1500
+			inv(INV_ITEM_WEIGHT, ci) = 380
+		}
+		if ( dbmode == DBMODE_SET ) {
+			inv(INV_ITEM_ID, ci) = ITEM_ID_SPELLBOOK_OF_LIGHTNING_SPEAR
+			inv(INV_ITEM_PIC, ci) = xy2pic(0, 13)
+			reftype = FILTER_ITEM_SPELLBOOK
+			reftypeminor = FILTER_NOTHING
+			inv(INV_ITEM_NUM, ci) = 1
+			fixeditemenc = 0
+			inv(INV_ITEM_IDENTIFY_LEVEL, ci) = 0
+			inv((9 /*!!!@[INV_ITEM_AMMO @@@ INV_ITEM_CHARGE @@@ INV_ITEM_CLIENT @@@ INV_ITEM_FILE @@@ INV_ITEM_NEXT_PERIOD]@!!! */), ci) = 5 + rnd(5) - rnd(5)
+			ibitmod ITEM_BIT_CHARGE_ITEM, ci, TRUE
+			return
+		}
+		if ( dbmode == DBMODE_REF ) {
+			ichargelevel = 5
+			infilterref = ""
+			reftype = FILTER_ITEM_SPELLBOOK
+			return
+		}
+		if ( dbmode == DBMODE_REF_SPEC ) {
+			if ( dbspec == DBSPEC_TYPE ) {
+				return 54000
+			}
+			if ( dbspec == DBSPEC_TYPE_MINOR ) {
+				return 99999
+			}
+			if ( dbspec == DBSPEC_VALUE_ORG ) {
+				return 1500
+			}
+			if ( dbspec == DBSPEC_PARAM3_ORG ) {
+				return
+			}
+			if ( dbspec == DBSPEC_CAN_READ ) {
+				return 1
+			}
+			if ( dbspec == DBSPEC_PCC ) {
+				return 0
+			}
+			if ( dbspec == DBSPEC_OBJ_LEVEL ) {
+				return 5
+			}
+			if ( dbspec == DBSPEC_RARE_LEVEL ) {
+				return 1000
+			}
+			return 0
+		}
+		if ( dbmode == DBMODE_ON_READ ) {
+			efid = SKILL_SPELL_LIGHTNING_SPEAR
+			efp = 100
+			gosub *readSpellbook
+			return -1
+		}
+		if ( dbmode == DBMODE_DESC ) {
+			if ( jp ) {
+				description(0) = "\t\t「電撃の槍」という呪文について学ぶことができる魔法書。皆を痺れさせたいあなたに。\n#〜本の為の本・魔法書編〜\n"
+				description(1) = "<ランク2魔法>"
+				description(2) = ""
+				description(3) = "\t\t電撃属性の矢を唱える為に必要な本。読むことができる。\n#〜鑑定報告書：＜書物＞カテゴリ〜\n"
+			}
+			else {
+				description(0) = ""
+				description(1) = ""
+				description(3) = ""
+			}
+			return
+		}
+		return 0
+	}
+	if ( dbid == ITEM_ID_SPELLBOOK_OF_MIND_THORN ) {
+		if ( dbmode == DBMODE_SET_STATS | dbmode == DBMODE_SET ) {
+			inv(INV_ITEM_VALUE, ci) = 2000
+			inv(INV_ITEM_WEIGHT, ci) = 380
+		}
+		if ( dbmode == DBMODE_SET ) {
+			inv(INV_ITEM_ID, ci) = ITEM_ID_SPELLBOOK_OF_MIND_THORN
+			inv(INV_ITEM_PIC, ci) = xy2pic(0, 13)
+			reftype = FILTER_ITEM_SPELLBOOK
+			reftypeminor = FILTER_NOTHING
+			inv(INV_ITEM_NUM, ci) = 1
+			fixeditemenc = 0
+			inv(INV_ITEM_IDENTIFY_LEVEL, ci) = 0
+			inv((9 /*!!!@[INV_ITEM_AMMO @@@ INV_ITEM_CHARGE @@@ INV_ITEM_CLIENT @@@ INV_ITEM_FILE @@@ INV_ITEM_NEXT_PERIOD]@!!! */), ci) = 5 + rnd(5) - rnd(5)
+			ibitmod ITEM_BIT_CHARGE_ITEM, ci, TRUE
+			return
+		}
+		if ( dbmode == DBMODE_REF ) {
+			ichargelevel = 5
+			infilterref = ""
+			reftype = FILTER_ITEM_SPELLBOOK
+			return
+		}
+		if ( dbmode == DBMODE_REF_SPEC ) {
+			if ( dbspec == DBSPEC_TYPE ) {
+				return 54000
+			}
+			if ( dbspec == DBSPEC_TYPE_MINOR ) {
+				return 99999
+			}
+			if ( dbspec == DBSPEC_VALUE_ORG ) {
+				return 2000
+			}
+			if ( dbspec == DBSPEC_PARAM3_ORG ) {
+				return
+			}
+			if ( dbspec == DBSPEC_CAN_READ ) {
+				return 1
+			}
+			if ( dbspec == DBSPEC_PCC ) {
+				return 0
+			}
+			if ( dbspec == DBSPEC_OBJ_LEVEL ) {
+				return 10
+			}
+			if ( dbspec == DBSPEC_RARE_LEVEL ) {
+				return 1000
+			}
+			return 0
+		}
+		if ( dbmode == DBMODE_ON_READ ) {
+			efid = SKILL_SPELL_MIND_THORN
+			efp = 100
+			gosub *readSpellbook
+			return -1
+		}
+		if ( dbmode == DBMODE_DESC ) {
+			if ( jp ) {
+				description(0) = "\t\t「幻惑の棘の吐息」という呪文について学ぶことができる魔法書。敵を幻覚で翻弄したいあなたに。\n#〜本の為の本・魔法書編〜\n"
+				description(1) = "<ランク3魔法>"
+				description(2) = ""
+				description(3) = "\t\t幻惑属性の矢を唱える為に必要な本。読むことができる。\n#〜鑑定報告書：＜書物＞カテゴリ〜\n"
+			}
+			else {
+				description(0) = ""
+				description(1) = ""
+				description(3) = ""
+			}
+			return
+		}
+		return 0
+	}
+	if ( dbid == ITEM_ID_SPELLBOOK_OF_POISON_MUCUS ) {
+		if ( dbmode == DBMODE_SET_STATS | dbmode == DBMODE_SET ) {
+			inv(INV_ITEM_VALUE, ci) = 2000
+			inv(INV_ITEM_WEIGHT, ci) = 380
+		}
+		if ( dbmode == DBMODE_SET ) {
+			inv(INV_ITEM_ID, ci) = ITEM_ID_SPELLBOOK_OF_POISON_MUCUS
+			inv(INV_ITEM_PIC, ci) = xy2pic(0, 13)
+			reftype = FILTER_ITEM_SPELLBOOK
+			reftypeminor = FILTER_NOTHING
+			inv(INV_ITEM_NUM, ci) = 1
+			fixeditemenc = 0
+			inv(INV_ITEM_IDENTIFY_LEVEL, ci) = 0
+			inv((9 /*!!!@[INV_ITEM_AMMO @@@ INV_ITEM_CHARGE @@@ INV_ITEM_CLIENT @@@ INV_ITEM_FILE @@@ INV_ITEM_NEXT_PERIOD]@!!! */), ci) = 5 + rnd(5) - rnd(5)
+			ibitmod ITEM_BIT_CHARGE_ITEM, ci, TRUE
+			return
+		}
+		if ( dbmode == DBMODE_REF ) {
+			ichargelevel = 5
+			infilterref = ""
+			reftype = FILTER_ITEM_SPELLBOOK
+			return
+		}
+		if ( dbmode == DBMODE_REF_SPEC ) {
+			if ( dbspec == DBSPEC_TYPE ) {
+				return 54000
+			}
+			if ( dbspec == DBSPEC_TYPE_MINOR ) {
+				return 99999
+			}
+			if ( dbspec == DBSPEC_VALUE_ORG ) {
+				return 2000
+			}
+			if ( dbspec == DBSPEC_PARAM3_ORG ) {
+				return
+			}
+			if ( dbspec == DBSPEC_CAN_READ ) {
+				return 1
+			}
+			if ( dbspec == DBSPEC_PCC ) {
+				return 0
+			}
+			if ( dbspec == DBSPEC_OBJ_LEVEL ) {
+				return 10
+			}
+			if ( dbspec == DBSPEC_RARE_LEVEL ) {
+				return 1000
+			}
+			return 0
+		}
+		if ( dbmode == DBMODE_ON_READ ) {
+			efid = SKILL_SPELL_POISON_MUCUS
+			efp = 100
+			gosub *readSpellbook
+			return -1
+		}
+		if ( dbmode == DBMODE_DESC ) {
+			if ( jp ) {
+				description(0) = "\t\t「毒の粘液」という呪文について学ぶことができる魔法書。有毒生物に興味があるあなたに。\n#〜本の為の本・魔法書編〜\n"
+				description(1) = "<ランク3魔法>"
+				description(2) = ""
+				description(3) = "\t\t毒属性の矢を唱える為に必要な本。読むことができる。\n#〜鑑定報告書：＜書物＞カテゴリ〜\n"
+			}
+			else {
+				description(0) = ""
+				description(1) = ""
+				description(3) = ""
+			}
+			return
+		}
+		return 0
+	}
+	if ( dbid == ITEM_ID_SPELLBOOK_OF_SOUND_CANNONBALL ) {
+		if ( dbmode == DBMODE_SET_STATS | dbmode == DBMODE_SET ) {
+			inv(INV_ITEM_VALUE, ci) = 2000
+			inv(INV_ITEM_WEIGHT, ci) = 380
+		}
+		if ( dbmode == DBMODE_SET ) {
+			inv(INV_ITEM_ID, ci) = ITEM_ID_SPELLBOOK_OF_SOUND_CANNONBALL
+			inv(INV_ITEM_PIC, ci) = xy2pic(0, 13)
+			reftype = FILTER_ITEM_SPELLBOOK
+			reftypeminor = FILTER_NOTHING
+			inv(INV_ITEM_NUM, ci) = 1
+			fixeditemenc = 0
+			inv(INV_ITEM_IDENTIFY_LEVEL, ci) = 0
+			inv((9 /*!!!@[INV_ITEM_AMMO @@@ INV_ITEM_CHARGE @@@ INV_ITEM_CLIENT @@@ INV_ITEM_FILE @@@ INV_ITEM_NEXT_PERIOD]@!!! */), ci) = 5 + rnd(5) - rnd(5)
+			ibitmod ITEM_BIT_CHARGE_ITEM, ci, TRUE
+			return
+		}
+		if ( dbmode == DBMODE_REF ) {
+			ichargelevel = 5
+			infilterref = ""
+			reftype = FILTER_ITEM_SPELLBOOK
+			return
+		}
+		if ( dbmode == DBMODE_REF_SPEC ) {
+			if ( dbspec == DBSPEC_TYPE ) {
+				return 54000
+			}
+			if ( dbspec == DBSPEC_TYPE_MINOR ) {
+				return 99999
+			}
+			if ( dbspec == DBSPEC_VALUE_ORG ) {
+				return 2000
+			}
+			if ( dbspec == DBSPEC_PARAM3_ORG ) {
+				return
+			}
+			if ( dbspec == DBSPEC_CAN_READ ) {
+				return 1
+			}
+			if ( dbspec == DBSPEC_PCC ) {
+				return 0
+			}
+			if ( dbspec == DBSPEC_OBJ_LEVEL ) {
+				return 10
+			}
+			if ( dbspec == DBSPEC_RARE_LEVEL ) {
+				return 1000
+			}
+			return 0
+		}
+		if ( dbmode == DBMODE_ON_READ ) {
+			efid = SKILL_SPELL_SOUND_CANNONBALL
+			efp = 100
+			gosub *readSpellbook
+			return -1
+		}
+		if ( dbmode == DBMODE_DESC ) {
+			if ( jp ) {
+				description(0) = "\t\t「音の砲弾」という呪文について学ぶことができる魔法書。音楽で人をぶっ飛ばしたいあなたに。\n#〜本の為の本・魔法書編〜\n"
+				description(1) = "<ランク3魔法>"
+				description(2) = ""
+				description(3) = "\t\t音属性の矢を唱える為に必要な本。読むことができる。\n#〜鑑定報告書：＜書物＞カテゴリ〜\n"
+			}
+			else {
+				description(0) = ""
+				description(1) = ""
+				description(3) = ""
+			}
+			return
+		}
+		return 0
+	}
+	if ( dbid == ITEM_ID_SPELLBOOK_OF_HYDRO_FANG ) {
+		if ( dbmode == DBMODE_SET_STATS | dbmode == DBMODE_SET ) {
+			inv(INV_ITEM_VALUE, ci) = 2500
+			inv(INV_ITEM_WEIGHT, ci) = 380
+		}
+		if ( dbmode == DBMODE_SET ) {
+			inv(INV_ITEM_ID, ci) = ITEM_ID_SPELLBOOK_OF_HYDRO_FANG
+			inv(INV_ITEM_PIC, ci) = xy2pic(0, 13)
+			reftype = FILTER_ITEM_SPELLBOOK
+			reftypeminor = FILTER_NOTHING
+			inv(INV_ITEM_NUM, ci) = 1
+			fixeditemenc = 0
+			inv(INV_ITEM_IDENTIFY_LEVEL, ci) = 0
+			inv((9 /*!!!@[INV_ITEM_AMMO @@@ INV_ITEM_CHARGE @@@ INV_ITEM_CLIENT @@@ INV_ITEM_FILE @@@ INV_ITEM_NEXT_PERIOD]@!!! */), ci) = 5 + rnd(5) - rnd(5)
+			ibitmod ITEM_BIT_CHARGE_ITEM, ci, TRUE
+			return
+		}
+		if ( dbmode == DBMODE_REF ) {
+			ichargelevel = 5
+			infilterref = ""
+			reftype = FILTER_ITEM_SPELLBOOK
+			return
+		}
+		if ( dbmode == DBMODE_REF_SPEC ) {
+			if ( dbspec == DBSPEC_TYPE ) {
+				return 54000
+			}
+			if ( dbspec == DBSPEC_TYPE_MINOR ) {
+				return 99999
+			}
+			if ( dbspec == DBSPEC_VALUE_ORG ) {
+				return 2500
+			}
+			if ( dbspec == DBSPEC_PARAM3_ORG ) {
+				return
+			}
+			if ( dbspec == DBSPEC_CAN_READ ) {
+				return 1
+			}
+			if ( dbspec == DBSPEC_PCC ) {
+				return 0
+			}
+			if ( dbspec == DBSPEC_OBJ_LEVEL ) {
+				return 15
+			}
+			if ( dbspec == DBSPEC_RARE_LEVEL ) {
+				return 1000
+			}
+			return 0
+		}
+		if ( dbmode == DBMODE_ON_READ ) {
+			efid = SKILL_SPELL_HYDRO_FANG
+			efp = 100
+			gosub *readSpellbook
+			return -1
+		}
+		if ( dbmode == DBMODE_DESC ) {
+			if ( jp ) {
+				description(0) = "\t\t「水の牙」という呪文について学ぶことができる魔法書。水の恐ろしさを知るあなたに。\n#〜本の為の本・魔法書編〜\n"
+				description(1) = "<ランク3魔法>"
+				description(2) = ""
+				description(3) = "\t\tPVDV属性の矢を唱える為に必要な本。読むことができる。\n#〜鑑定報告書：＜書物＞カテゴリ〜\n"
+			}
+			else {
+				description(0) = ""
+				description(1) = ""
+				description(3) = ""
+			}
+			return
+		}
+		return 0
+	}
 	if ( dbid == ITEM_ID_DYING_CICADA ) {
 		if ( dbmode == DBMODE_SET_STATS | dbmode == DBMODE_SET ) {
 			inv(INV_ITEM_VALUE, ci) = 10
 			inv(INV_ITEM_WEIGHT, ci) = 10
 		}
@@ -39369,14 +41344,14 @@
 			reftype = FILTER_JUNK
 			return
 		}
 		if ( dbmode == DBMODE_REF_SPEC ) {
 			if ( dbspec == DBSPEC_TYPE ) {
-				return FILTER_JUNK
+				return 64000
 			}
 			if ( dbspec == DBSPEC_TYPE_MINOR ) {
-				return FILTER_NONE
+				return 99999
 			}
 			if ( dbspec == DBSPEC_VALUE_ORG ) {
 				return 10
 			}
 			if ( dbspec == DBSPEC_PARAM3_ORG ) {
@@ -39430,14 +41405,14 @@
 			reftype = FILTER_ORE
 			return
 		}
 		if ( dbmode == DBMODE_REF_SPEC ) {
 			if ( dbspec == DBSPEC_TYPE ) {
-				return FILTER_ORE
+				return 77000
 			}
 			if ( dbspec == DBSPEC_TYPE_MINOR ) {
-				return FILTER_ORE_GEM
+				return 77001
 			}
 			if ( dbspec == DBSPEC_VALUE_ORG ) {
 				return 30300
 			}
 			if ( dbspec == DBSPEC_PARAM3_ORG ) {
@@ -39499,14 +41474,14 @@
 			reftype = FILTER_ORE
 			return
 		}
 		if ( dbmode == DBMODE_REF_SPEC ) {
 			if ( dbspec == DBSPEC_TYPE ) {
-				return FILTER_ORE
+				return 77000
 			}
 			if ( dbspec == DBSPEC_TYPE_MINOR ) {
-				return FILTER_ORE_GEM
+				return 77001
 			}
 			if ( dbspec == DBSPEC_VALUE_ORG ) {
 				return 30600
 			}
 			if ( dbspec == DBSPEC_PARAM3_ORG ) {
@@ -39568,14 +41543,14 @@
 			reftype = FILTER_ORE
 			return
 		}
 		if ( dbmode == DBMODE_REF_SPEC ) {
 			if ( dbspec == DBSPEC_TYPE ) {
-				return FILTER_ORE
+				return 77000
 			}
 			if ( dbspec == DBSPEC_TYPE_MINOR ) {
-				return FILTER_ORE_GEM
+				return 77001
 			}
 			if ( dbspec == DBSPEC_VALUE_ORG ) {
 				return 30900
 			}
 			if ( dbspec == DBSPEC_PARAM3_ORG ) {
@@ -39637,14 +41612,14 @@
 			reftype = FILTER_ORE
 			return
 		}
 		if ( dbmode == DBMODE_REF_SPEC ) {
 			if ( dbspec == DBSPEC_TYPE ) {
-				return FILTER_ORE
+				return 77000
 			}
 			if ( dbspec == DBSPEC_TYPE_MINOR ) {
-				return FILTER_ORE_GEM
+				return 77001
 			}
 			if ( dbspec == DBSPEC_VALUE_ORG ) {
 				return 31200
 			}
 			if ( dbspec == DBSPEC_PARAM3_ORG ) {
@@ -39706,14 +41681,14 @@
 			reftype = FILTER_ORE
 			return
 		}
 		if ( dbmode == DBMODE_REF_SPEC ) {
 			if ( dbspec == DBSPEC_TYPE ) {
-				return FILTER_ORE
+				return 77000
 			}
 			if ( dbspec == DBSPEC_TYPE_MINOR ) {
-				return FILTER_ORE_GEM
+				return 77001
 			}
 			if ( dbspec == DBSPEC_VALUE_ORG ) {
 				return 31500
 			}
 			if ( dbspec == DBSPEC_PARAM3_ORG ) {
@@ -39775,14 +41750,14 @@
 			reftype = FILTER_ORE
 			return
 		}
 		if ( dbmode == DBMODE_REF_SPEC ) {
 			if ( dbspec == DBSPEC_TYPE ) {
-				return FILTER_ORE
+				return 77000
 			}
 			if ( dbspec == DBSPEC_TYPE_MINOR ) {
-				return FILTER_ORE_GEM
+				return 77001
 			}
 			if ( dbspec == DBSPEC_VALUE_ORG ) {
 				return 31800
 			}
 			if ( dbspec == DBSPEC_PARAM3_ORG ) {
@@ -39844,14 +41819,14 @@
 			reftype = FILTER_ORE
 			return
 		}
 		if ( dbmode == DBMODE_REF_SPEC ) {
 			if ( dbspec == DBSPEC_TYPE ) {
-				return FILTER_ORE
+				return 77000
 			}
 			if ( dbspec == DBSPEC_TYPE_MINOR ) {
-				return FILTER_ORE_GEM
+				return 77001
 			}
 			if ( dbspec == DBSPEC_VALUE_ORG ) {
 				return 32100
 			}
 			if ( dbspec == DBSPEC_PARAM3_ORG ) {
@@ -39913,14 +41888,14 @@
 			reftype = FILTER_ORE
 			return
 		}
 		if ( dbmode == DBMODE_REF_SPEC ) {
 			if ( dbspec == DBSPEC_TYPE ) {
-				return FILTER_ORE
+				return 77000
 			}
 			if ( dbspec == DBSPEC_TYPE_MINOR ) {
-				return FILTER_ORE_GEM
+				return 77001
 			}
 			if ( dbspec == DBSPEC_VALUE_ORG ) {
 				return 32400
 			}
 			if ( dbspec == DBSPEC_PARAM3_ORG ) {
@@ -39982,14 +41957,14 @@
 			reftype = FILTER_ORE
 			return
 		}
 		if ( dbmode == DBMODE_REF_SPEC ) {
 			if ( dbspec == DBSPEC_TYPE ) {
-				return FILTER_ORE
+				return 77000
 			}
 			if ( dbspec == DBSPEC_TYPE_MINOR ) {
-				return FILTER_ORE_GEM
+				return 77001
 			}
 			if ( dbspec == DBSPEC_VALUE_ORG ) {
 				return 32700
 			}
 			if ( dbspec == DBSPEC_PARAM3_ORG ) {
@@ -40051,14 +42026,14 @@
 			reftype = FILTER_ORE
 			return
 		}
 		if ( dbmode == DBMODE_REF_SPEC ) {
 			if ( dbspec == DBSPEC_TYPE ) {
-				return FILTER_ORE
+				return 77000
 			}
 			if ( dbspec == DBSPEC_TYPE_MINOR ) {
-				return FILTER_ORE_GEM
+				return 77001
 			}
 			if ( dbspec == DBSPEC_VALUE_ORG ) {
 				return 33000
 			}
 			if ( dbspec == DBSPEC_PARAM3_ORG ) {
@@ -40120,14 +42095,14 @@
 			reftype = FILTER_ORE
 			return
 		}
 		if ( dbmode == DBMODE_REF_SPEC ) {
 			if ( dbspec == DBSPEC_TYPE ) {
-				return FILTER_ORE
+				return 77000
 			}
 			if ( dbspec == DBSPEC_TYPE_MINOR ) {
-				return FILTER_ORE_GEM
+				return 77001
 			}
 			if ( dbspec == DBSPEC_VALUE_ORG ) {
 				return 33300
 			}
 			if ( dbspec == DBSPEC_PARAM3_ORG ) {
@@ -40189,14 +42164,14 @@
 			reftype = FILTER_ORE
 			return
 		}
 		if ( dbmode == DBMODE_REF_SPEC ) {
 			if ( dbspec == DBSPEC_TYPE ) {
-				return FILTER_ORE
+				return 77000
 			}
 			if ( dbspec == DBSPEC_TYPE_MINOR ) {
-				return FILTER_ORE_GEM
+				return 77001
 			}
 			if ( dbspec == DBSPEC_VALUE_ORG ) {
 				return 33600
 			}
 			if ( dbspec == DBSPEC_PARAM3_ORG ) {
@@ -40258,14 +42233,14 @@
 			reftype = FILTER_ITEM_POTION
 			return
 		}
 		if ( dbmode == DBMODE_REF_SPEC ) {
 			if ( dbspec == DBSPEC_TYPE ) {
-				return FILTER_ITEM_POTION
+				return 52000
 			}
 			if ( dbspec == DBSPEC_TYPE_MINOR ) {
-				return FILTER_ITEM_POTION_ALE
+				return 52002
 			}
 			if ( dbspec == DBSPEC_VALUE_ORG ) {
 				return 18000
 			}
 			if ( dbspec == DBSPEC_PARAM3_ORG ) {
@@ -40328,14 +42303,14 @@
 			reftype = FILTER_ORE
 			return
 		}
 		if ( dbmode == DBMODE_REF_SPEC ) {
 			if ( dbspec == DBSPEC_TYPE ) {
-				return FILTER_ORE
+				return 77000
 			}
 			if ( dbspec == DBSPEC_TYPE_MINOR ) {
-				return FILTER_NONE
+				return 99999
 			}
 			if ( dbspec == DBSPEC_VALUE_ORG ) {
 				return 10000
 			}
 			if ( dbspec == DBSPEC_PARAM3_ORG ) {
@@ -40392,14 +42367,14 @@
 			reftype = FILTER_ITEM_TOOL
 			return
 		}
 		if ( dbmode == DBMODE_REF_SPEC ) {
 			if ( dbspec == DBSPEC_TYPE ) {
-				return FILTER_ITEM_TOOL
+				return 59000
 			}
 			if ( dbspec == DBSPEC_TYPE_MINOR ) {
-				return FILTER_NONE
+				return 99999
 			}
 			if ( dbspec == DBSPEC_VALUE_ORG ) {
 				return 9000
 			}
 			if ( dbspec == DBSPEC_PARAM3_ORG ) {
@@ -40462,14 +42437,14 @@
 			reftype = FILTER_ITEM_TOOL
 			return
 		}
 		if ( dbmode == DBMODE_REF_SPEC ) {
 			if ( dbspec == DBSPEC_TYPE ) {
-				return FILTER_ITEM_TOOL
+				return 59000
 			}
 			if ( dbspec == DBSPEC_TYPE_MINOR ) {
-				return FILTER_NONE
+				return 99999
 			}
 			if ( dbspec == DBSPEC_VALUE_ORG ) {
 				return 60000
 			}
 			if ( dbspec == DBSPEC_PARAM3_ORG ) {
@@ -40532,14 +42507,14 @@
 			reftype = FILTER_ITEM_TOOL
 			return
 		}
 		if ( dbmode == DBMODE_REF_SPEC ) {
 			if ( dbspec == DBSPEC_TYPE ) {
-				return FILTER_ITEM_TOOL
+				return 59000
 			}
 			if ( dbspec == DBSPEC_TYPE_MINOR ) {
-				return FILTER_NONE
+				return 99999
 			}
 			if ( dbspec == DBSPEC_VALUE_ORG ) {
 				return 40000
 			}
 			if ( dbspec == DBSPEC_PARAM3_ORG ) {
@@ -40602,14 +42577,14 @@
 			reftype = FILTER_ITEM_TOOL
 			return
 		}
 		if ( dbmode == DBMODE_REF_SPEC ) {
 			if ( dbspec == DBSPEC_TYPE ) {
-				return FILTER_ITEM_TOOL
+				return 59000
 			}
 			if ( dbspec == DBSPEC_TYPE_MINOR ) {
-				return FILTER_NONE
+				return 99999
 			}
 			if ( dbspec == DBSPEC_VALUE_ORG ) {
 				return 20000
 			}
 			if ( dbspec == DBSPEC_PARAM3_ORG ) {
@@ -40672,14 +42647,14 @@
 			reftype = FILTER_ITEM_TOOL
 			return
 		}
 		if ( dbmode == DBMODE_REF_SPEC ) {
 			if ( dbspec == DBSPEC_TYPE ) {
-				return FILTER_ITEM_TOOL
+				return 59000
 			}
 			if ( dbspec == DBSPEC_TYPE_MINOR ) {
-				return FILTER_NONE
+				return 99999
 			}
 			if ( dbspec == DBSPEC_VALUE_ORG ) {
 				return 30000
 			}
 			if ( dbspec == DBSPEC_PARAM3_ORG ) {
@@ -40742,14 +42717,14 @@
 			reftype = FILTER_ITEM_TOOL
 			return
 		}
 		if ( dbmode == DBMODE_REF_SPEC ) {
 			if ( dbspec == DBSPEC_TYPE ) {
-				return FILTER_ITEM_TOOL
+				return 59000
 			}
 			if ( dbspec == DBSPEC_TYPE_MINOR ) {
-				return FILTER_NONE
+				return 99999
 			}
 			if ( dbspec == DBSPEC_VALUE_ORG ) {
 				return 30000
 			}
 			if ( dbspec == DBSPEC_PARAM3_ORG ) {
@@ -40812,14 +42787,14 @@
 			reftype = FILTER_ITEM_TOOL
 			return
 		}
 		if ( dbmode == DBMODE_REF_SPEC ) {
 			if ( dbspec == DBSPEC_TYPE ) {
-				return FILTER_ITEM_TOOL
+				return 59000
 			}
 			if ( dbspec == DBSPEC_TYPE_MINOR ) {
-				return FILTER_NONE
+				return 99999
 			}
 			if ( dbspec == DBSPEC_VALUE_ORG ) {
 				return 30000
 			}
 			if ( dbspec == DBSPEC_PARAM3_ORG ) {
@@ -40880,14 +42855,14 @@
 			reftype = FILTER_ITEM_TOOL
 			return
 		}
 		if ( dbmode == DBMODE_REF_SPEC ) {
 			if ( dbspec == DBSPEC_TYPE ) {
-				return FILTER_ITEM_TOOL
+				return 59000
 			}
 			if ( dbspec == DBSPEC_TYPE_MINOR ) {
-				return FILTER_NONE
+				return 99999
 			}
 			if ( dbspec == DBSPEC_VALUE_ORG ) {
 				return 30000
 			}
 			if ( dbspec == DBSPEC_PARAM3_ORG ) {
@@ -40949,14 +42924,14 @@
 			reftype = FILTER_ITEM_TOOL
 			return
 		}
 		if ( dbmode == DBMODE_REF_SPEC ) {
 			if ( dbspec == DBSPEC_TYPE ) {
-				return FILTER_ITEM_TOOL
+				return 59000
 			}
 			if ( dbspec == DBSPEC_TYPE_MINOR ) {
-				return FILTER_NONE
+				return 99999
 			}
 			if ( dbspec == DBSPEC_VALUE_ORG ) {
 				return 50000
 			}
 			if ( dbspec == DBSPEC_PARAM3_ORG ) {
@@ -41002,11 +42977,11 @@
 			inv(INV_ITEM_PIC, ci) = xy2pic(6, 30)
 			reftype = FILTER_ITEM_TOOL
 			reftypeminor = FILTER_NOTHING
 			inv(INV_ITEM_NUM, ci) = 1
 			fixeditemenc = 0
-			inv(INV_ITEM_EFFECT, ci) = EFFECT_MEMORY_CONVERTER
+			inv(INV_ITEM_EFFECT, ci) = effmemory2
 			inv(INV_ITEM_PARAM1, ci) = 0
 			inv(INV_ITEM_IDENTIFY_LEVEL, ci) = 0
 			return
 		}
 		if ( dbmode == DBMODE_REF ) {
@@ -41015,14 +42990,14 @@
 			reftype = FILTER_ITEM_TOOL
 			return
 		}
 		if ( dbmode == DBMODE_REF_SPEC ) {
 			if ( dbspec == DBSPEC_TYPE ) {
-				return FILTER_ITEM_TOOL
+				return 59000
 			}
 			if ( dbspec == DBSPEC_TYPE_MINOR ) {
-				return FILTER_NONE
+				return 99999
 			}
 			if ( dbspec == DBSPEC_VALUE_ORG ) {
 				return 12000
 			}
 			if ( dbspec == DBSPEC_PARAM3_ORG ) {
@@ -41045,11 +43020,11 @@
 		if ( dbmode == DBMODE_DESC ) {
 			if ( jp ) {
 				description(0) = "\t\t守護者の体内から見つかる謎の結晶。記憶と化合することで力を生み出すという。ネフィア症候群の末期患者を解剖したところ、体内に同様の結晶が形成されつつあったという記録もある。\n#〜イルヴァ幻想辞典〜\n"
 				description(1) = ""
 				description(2) = ""
-				description(3) = "\t\tスキルをボーナスに変換する結晶。使用することができる（使い捨て）。\n#〜鑑定報告書：＜遺物＞カテゴリ〜\n"
+				description(3) = "\t\tスキル半減し僅かにボーナスを得る結晶。使用することができる（使い捨て）。\n#〜鑑定報告書：＜遺物＞カテゴリ〜\n"
 			}
 			else {
 				description(0) = ""
 				description(1) = ""
 				description(3) = ""
@@ -41080,14 +43055,14 @@
 			reftype = FILTER_ITEM_TOOL
 			return
 		}
 		if ( dbmode == DBMODE_REF_SPEC ) {
 			if ( dbspec == DBSPEC_TYPE ) {
-				return FILTER_ITEM_TOOL
+				return 59000
 			}
 			if ( dbspec == DBSPEC_TYPE_MINOR ) {
-				return FILTER_NONE
+				return 99999
 			}
 			if ( dbspec == DBSPEC_VALUE_ORG ) {
 				return 2400
 			}
 			if ( dbspec == DBSPEC_PARAM3_ORG ) {
@@ -41145,14 +43120,14 @@
 			reftype = FILTER_ITEM_TOOL
 			return
 		}
 		if ( dbmode == DBMODE_REF_SPEC ) {
 			if ( dbspec == DBSPEC_TYPE ) {
-				return FILTER_ITEM_TOOL
+				return 59000
 			}
 			if ( dbspec == DBSPEC_TYPE_MINOR ) {
-				return FILTER_NONE
+				return 99999
 			}
 			if ( dbspec == DBSPEC_VALUE_ORG ) {
 				return 2400
 			}
 			if ( dbspec == DBSPEC_PARAM3_ORG ) {
@@ -41210,14 +43185,14 @@
 			reftype = FILTER_ITEM_TOOL
 			return
 		}
 		if ( dbmode == DBMODE_REF_SPEC ) {
 			if ( dbspec == DBSPEC_TYPE ) {
-				return FILTER_ITEM_TOOL
+				return 59000
 			}
 			if ( dbspec == DBSPEC_TYPE_MINOR ) {
-				return FILTER_NONE
+				return 99999
 			}
 			if ( dbspec == DBSPEC_VALUE_ORG ) {
 				return 2400
 			}
 			if ( dbspec == DBSPEC_PARAM3_ORG ) {
@@ -41275,14 +43250,14 @@
 			reftype = FILTER_ITEM_TOOL
 			return
 		}
 		if ( dbmode == DBMODE_REF_SPEC ) {
 			if ( dbspec == DBSPEC_TYPE ) {
-				return FILTER_ITEM_TOOL
+				return 59000
 			}
 			if ( dbspec == DBSPEC_TYPE_MINOR ) {
-				return FILTER_NONE
+				return 99999
 			}
 			if ( dbspec == DBSPEC_VALUE_ORG ) {
 				return 2400
 			}
 			if ( dbspec == DBSPEC_PARAM3_ORG ) {
@@ -41340,14 +43315,14 @@
 			reftype = FILTER_ITEM_TOOL
 			return
 		}
 		if ( dbmode == DBMODE_REF_SPEC ) {
 			if ( dbspec == DBSPEC_TYPE ) {
-				return FILTER_ITEM_TOOL
+				return 59000
 			}
 			if ( dbspec == DBSPEC_TYPE_MINOR ) {
-				return FILTER_NONE
+				return 99999
 			}
 			if ( dbspec == DBSPEC_VALUE_ORG ) {
 				return 4500
 			}
 			if ( dbspec == DBSPEC_PARAM3_ORG ) {
@@ -41413,14 +43388,14 @@
 			reftype = FILTER_ITEM_BOOK
 			return
 		}
 		if ( dbmode == DBMODE_REF_SPEC ) {
 			if ( dbspec == DBSPEC_TYPE ) {
-				return FILTER_ITEM_BOOK
+				return 55000
 			}
 			if ( dbspec == DBSPEC_TYPE_MINOR ) {
-				return FILTER_NONE
+				return 99999
 			}
 			if ( dbspec == DBSPEC_VALUE_ORG ) {
 				return 500
 			}
 			if ( dbspec == DBSPEC_PARAM3_ORG ) {
@@ -41481,14 +43456,14 @@
 			reftype = FILTER_JUNK
 			return
 		}
 		if ( dbmode == DBMODE_REF_SPEC ) {
 			if ( dbspec == DBSPEC_TYPE ) {
-				return FILTER_JUNK
+				return 64000
 			}
 			if ( dbspec == DBSPEC_TYPE_MINOR ) {
-				return FILTER_NONE
+				return 99999
 			}
 			if ( dbspec == DBSPEC_VALUE_ORG ) {
 				return 10
 			}
 			if ( dbspec == DBSPEC_PARAM3_ORG ) {
@@ -41544,14 +43519,14 @@
 			reftype = FILTER_ITEM_TOOL
 			return
 		}
 		if ( dbmode == DBMODE_REF_SPEC ) {
 			if ( dbspec == DBSPEC_TYPE ) {
-				return FILTER_ITEM_TOOL
+				return 59000
 			}
 			if ( dbspec == DBSPEC_TYPE_MINOR ) {
-				return FILTER_NONE
+				return 99999
 			}
 			if ( dbspec == DBSPEC_VALUE_ORG ) {
 				return 9000
 			}
 			if ( dbspec == DBSPEC_PARAM3_ORG ) {
@@ -41610,14 +43585,14 @@
 			reftype = FILTER_ITEM_TOOL
 			return
 		}
 		if ( dbmode == DBMODE_REF_SPEC ) {
 			if ( dbspec == DBSPEC_TYPE ) {
-				return FILTER_ITEM_TOOL
+				return 59000
 			}
 			if ( dbspec == DBSPEC_TYPE_MINOR ) {
-				return FILTER_NONE
+				return 99999
 			}
 			if ( dbspec == DBSPEC_VALUE_ORG ) {
 				return 9000
 			}
 			if ( dbspec == DBSPEC_PARAM3_ORG ) {
@@ -41676,14 +43651,14 @@
 			reftype = FILTER_ITEM_TOOL
 			return
 		}
 		if ( dbmode == DBMODE_REF_SPEC ) {
 			if ( dbspec == DBSPEC_TYPE ) {
-				return FILTER_ITEM_TOOL
+				return 59000
 			}
 			if ( dbspec == DBSPEC_TYPE_MINOR ) {
-				return FILTER_NONE
+				return 99999
 			}
 			if ( dbspec == DBSPEC_VALUE_ORG ) {
 				return 9000
 			}
 			if ( dbspec == DBSPEC_PARAM3_ORG ) {
@@ -41741,14 +43716,14 @@
 			reftype = FILTER_ITEM_BOOK
 			return
 		}
 		if ( dbmode == DBMODE_REF_SPEC ) {
 			if ( dbspec == DBSPEC_TYPE ) {
-				return FILTER_ITEM_BOOK
+				return 55000
 			}
 			if ( dbspec == DBSPEC_TYPE_MINOR ) {
-				return FILTER_NONE
+				return 99999
 			}
 			if ( dbspec == DBSPEC_VALUE_ORG ) {
 				return 900
 			}
 			if ( dbspec == DBSPEC_PARAM3_ORG ) {
@@ -41811,14 +43786,14 @@
 			reftype = FILTER_ITEM_BOOK
 			return
 		}
 		if ( dbmode == DBMODE_REF_SPEC ) {
 			if ( dbspec == DBSPEC_TYPE ) {
-				return FILTER_ITEM_BOOK
+				return 55000
 			}
 			if ( dbspec == DBSPEC_TYPE_MINOR ) {
-				return FILTER_NONE
+				return 99999
 			}
 			if ( dbspec == DBSPEC_VALUE_ORG ) {
 				return 100
 			}
 			if ( dbspec == DBSPEC_PARAM3_ORG ) {
@@ -41882,14 +43857,14 @@
 			reftype = FILTER_ITEM_TOOL
 			return
 		}
 		if ( dbmode == DBMODE_REF_SPEC ) {
 			if ( dbspec == DBSPEC_TYPE ) {
-				return FILTER_ITEM_TOOL
+				return 59000
 			}
 			if ( dbspec == DBSPEC_TYPE_MINOR ) {
-				return FILTER_NONE
+				return 99999
 			}
 			if ( dbspec == DBSPEC_VALUE_ORG ) {
 				return 10000
 			}
 			if ( dbspec == DBSPEC_PARAM3_ORG ) {
@@ -41947,14 +43922,14 @@
 			reftype = FILTER_ITEM_SCROLL
 			return
 		}
 		if ( dbmode == DBMODE_REF_SPEC ) {
 			if ( dbspec == DBSPEC_TYPE ) {
-				return FILTER_ITEM_SCROLL
+				return 53000
 			}
 			if ( dbspec == DBSPEC_TYPE_MINOR ) {
-				return FILTER_ITEM_DEED
+				return 53100
 			}
 			if ( dbspec == DBSPEC_VALUE_ORG ) {
 				return 1800000
 			}
 			if ( dbspec == DBSPEC_PARAM3_ORG ) {
@@ -42017,14 +43992,14 @@
 			reftype = FILTER_ITEM_SCROLL
 			return
 		}
 		if ( dbmode == DBMODE_REF_SPEC ) {
 			if ( dbspec == DBSPEC_TYPE ) {
-				return FILTER_ITEM_SCROLL
+				return 53000
 			}
 			if ( dbspec == DBSPEC_TYPE_MINOR ) {
-				return FILTER_ITEM_DEED
+				return 53100
 			}
 			if ( dbspec == DBSPEC_VALUE_ORG ) {
 				return 600000
 			}
 			if ( dbspec == DBSPEC_PARAM3_ORG ) {
@@ -42087,14 +44062,14 @@
 			reftype = FILTER_ITEM_SCROLL
 			return
 		}
 		if ( dbmode == DBMODE_REF_SPEC ) {
 			if ( dbspec == DBSPEC_TYPE ) {
-				return FILTER_ITEM_SCROLL
+				return 53000
 			}
 			if ( dbspec == DBSPEC_TYPE_MINOR ) {
-				return FILTER_ITEM_DEED
+				return 53100
 			}
 			if ( dbspec == DBSPEC_VALUE_ORG ) {
 				return 120000
 			}
 			if ( dbspec == DBSPEC_PARAM3_ORG ) {
@@ -42157,14 +44132,14 @@
 			reftype = FILTER_ITEM_SCROLL
 			return
 		}
 		if ( dbmode == DBMODE_REF_SPEC ) {
 			if ( dbspec == DBSPEC_TYPE ) {
-				return FILTER_ITEM_SCROLL
+				return 53000
 			}
 			if ( dbspec == DBSPEC_TYPE_MINOR ) {
-				return FILTER_ITEM_DEED
+				return 53100
 			}
 			if ( dbspec == DBSPEC_VALUE_ORG ) {
 				return 30000
 			}
 			if ( dbspec == DBSPEC_PARAM3_ORG ) {
@@ -42217,11 +44192,11 @@
 			inv(INV_ITEM_ID, ci) = ITEM_ID_CLOTHWORLD
 			inv(INV_ITEM_PIC, ci) = xy2pic(12, 34)
 			reftype = FILTER_ARMOR
 			reftypeminor = FILTER_ARMOR_LIGHT
 			inv(INV_ITEM_NUM, ci) = 1
-			fixeditemenc = ENCHANT_RESISTANCE * EXT_ENCHANTMENT + SKILL_RES_LIGHTNING, 300, ENCHANT_RESISTANCE * EXT_ENCHANTMENT + SKILL_RES_NERVE, 300, ENCHANT_SKILL * EXT_ENCHANTMENT + SKILL_NORMAL_STEALTH, 300, ENCHANT_CURE_BLEEDING, 100, 0
+			fixeditemenc = ENCHANT_RESISTANCE * EXT_ENCHANTMENT + SKILL_RES_LIGHTNING, 300, ENCHANT_RESISTANCE * EXT_ENCHANTMENT + SKILL_RES_NERVE, 300, ENCHANT_SKILL * EXT_ENCHANTMENT + SKILL_NORMAL_STEALTH, 300, 55, 100, 0
 			inv(INV_ITEM_EFFECT, ci) = EFFECT_CLOTHWORLD
 			ibitmod ITEM_BIT_PRECIOUS, ci, TRUE
 			inv(INV_ITEM_IDENTIFY_LEVEL, ci) = 500
 			fixlv = FIX_QUALITY_UNIQUE
 			return
@@ -42232,14 +44207,14 @@
 			reftype = FILTER_ARMOR
 			return
 		}
 		if ( dbmode == DBMODE_REF_SPEC ) {
 			if ( dbspec == DBSPEC_TYPE ) {
-				return FILTER_ARMOR
+				return 16000
 			}
 			if ( dbspec == DBSPEC_TYPE_MINOR ) {
-				return FILTER_ARMOR_LIGHT
+				return 16003
 			}
 			if ( dbspec == DBSPEC_VALUE_ORG ) {
 				return 32000
 			}
 			if ( dbspec == DBSPEC_PARAM3_ORG ) {
@@ -42284,11 +44259,11 @@
 			inv(INV_ITEM_ID, ci) = ITEM_ID_BAMAGICAR
 			inv(INV_ITEM_PIC, ci) = xy2pic(13, 13)
 			reftype = FILTER_ARMOR
 			reftypeminor = FILTER_ARMOR_HEAVY
 			inv(INV_ITEM_NUM, ci) = 1
-			fixeditemenc = ENCHANT_RESISTANCE * EXT_ENCHANTMENT + SKILL_RES_MAGIC, 500, ENCHANT_RESISTANCE * EXT_ENCHANTMENT + SKILL_RES_SOUND, 250, ENCHANT_SKILL * EXT_ENCHANTMENT + SKILL_NORMAL_MEDITATION, 350, ENCHANT_SKILL * EXT_ENCHANTMENT + SKILL_NORMAL_STEALTH, -250, ENCHANT_ATTRIBUTE * EXT_ENCHANTMENT + SKILL_ATTR_LUC, 750, ENCHANT_RES_PARALYZE, 100, 0
+			fixeditemenc = ENCHANT_RESISTANCE * EXT_ENCHANTMENT + SKILL_RES_MAGIC, 500, ENCHANT_RESISTANCE * EXT_ENCHANTMENT + SKILL_RES_SOUND, 250, ENCHANT_SKILL * EXT_ENCHANTMENT + SKILL_NORMAL_MEDITATION, 350, ENCHANT_SKILL * EXT_ENCHANTMENT + SKILL_NORMAL_STEALTH, -250, ENCHANT_ATTRIBUTE * EXT_ENCHANTMENT + SKILL_ATTR_LUC, 750, 24, 100, 0
 			ibitmod ITEM_BIT_PRECIOUS, ci, TRUE
 			inv(INV_ITEM_IDENTIFY_LEVEL, ci) = 500
 			fixlv = FIX_QUALITY_UNIQUE
 			return
 		}
@@ -42298,14 +44273,14 @@
 			reftype = FILTER_ARMOR
 			return
 		}
 		if ( dbmode == DBMODE_REF_SPEC ) {
 			if ( dbspec == DBSPEC_TYPE ) {
-				return FILTER_ARMOR
+				return 16000
 			}
 			if ( dbspec == DBSPEC_TYPE_MINOR ) {
-				return FILTER_ARMOR_HEAVY
+				return 16001
 			}
 			if ( dbspec == DBSPEC_VALUE_ORG ) {
 				return 35000
 			}
 			if ( dbspec == DBSPEC_PARAM3_ORG ) {
@@ -42355,11 +44330,11 @@
 			inv(INV_ITEM_ID, ci) = ITEM_ID_RAVENBRAND
 			inv(INV_ITEM_PIC, ci) = xy2pic(13, 34)
 			reftype = FILTER_WEAPON
 			reftypeminor = FILTER_WEAPON_LONGSWORD
 			inv(INV_ITEM_NUM, ci) = 1
-			fixeditemenc = ENCHANT_ABSORB_STAMINA, 150, ENCHANT_ABSORB_MP, 150, ENCHANT_ELEMENTAL_DMG * EXT_ENCHANTMENT + SKILL_RES_CHAOS, 500, ENCHANT_ELEMENTAL_DMG * EXT_ENCHANTMENT + SKILL_RES_NETHER, 100, ENCHANT_SKILL * EXT_ENCHANTMENT + SKILL_NORMAL_DUAL_WIELD, 300, ENCHANT_RESISTANCE * EXT_ENCHANTMENT + SKILL_RES_DARKNESS, 250, ENCHANT_RESISTANCE * EXT_ENCHANTMENT + SKILL_RES_NERVE, 250, 0
+			fixeditemenc = 36, 150, 38, 150, ENCHANT_ELEMENTAL_DMG * EXT_ENCHANTMENT + SKILL_RES_CHAOS, 500, ENCHANT_ELEMENTAL_DMG * EXT_ENCHANTMENT + SKILL_RES_NETHER, 100, ENCHANT_SKILL * EXT_ENCHANTMENT + SKILL_NORMAL_DUAL_WIELD, 300, ENCHANT_RESISTANCE * EXT_ENCHANTMENT + SKILL_RES_DARKNESS, 250, ENCHANT_RESISTANCE * EXT_ENCHANTMENT + SKILL_RES_NERVE, 250, 0
 			ibitmod ITEM_BIT_PRECIOUS, ci, TRUE
 			inv(INV_ITEM_IDENTIFY_LEVEL, ci) = 500
 			fixlv = FIX_QUALITY_UNIQUE
 			return
 		}
@@ -42369,14 +44344,14 @@
 			reftype = FILTER_WEAPON
 			return
 		}
 		if ( dbmode == DBMODE_REF_SPEC ) {
 			if ( dbspec == DBSPEC_TYPE ) {
-				return FILTER_WEAPON
+				return 10000
 			}
 			if ( dbspec == DBSPEC_TYPE_MINOR ) {
-				return FILTER_WEAPON_LONGSWORD
+				return 10002
 			}
 			if ( dbspec == DBSPEC_VALUE_ORG ) {
 				return 60000
 			}
 			if ( dbspec == DBSPEC_PARAM3_ORG ) {
@@ -42424,11 +44399,11 @@
 			inv(INV_ITEM_ID, ci) = ITEM_ID_BAMBNIR
 			inv(INV_ITEM_PIC, ci) = xy2pic(14, 34)
 			reftype = FILTER_WEAPON
 			reftypeminor = FILTER_WEAPON_POLEARM
 			inv(INV_ITEM_NUM, ci) = 1
-			fixeditemenc = ENCHANT_ELEMENTAL_DMG * EXT_ENCHANTMENT + SKILL_RES_FIRE, 300, ENCHANT_PROC * EXT_ENCHANTMENT + ENCHANT_PROC_GRENADE, 80, ENCHANT_BANE_GOD, 200, ENCHANT_RES_BLIND, 100, 0
+			fixeditemenc = ENCHANT_ELEMENTAL_DMG * EXT_ENCHANTMENT + SKILL_RES_FIRE, 300, ENCHANT_PROC * EXT_ENCHANTMENT + ENCHANT_PROC_GRENADE, 80, 61, 200, 23, 100, 0
 			ibitmod ITEM_BIT_PRECIOUS, ci, TRUE
 			inv(INV_ITEM_IDENTIFY_LEVEL, ci) = 500
 			fixlv = FIX_QUALITY_UNIQUE
 			return
 		}
@@ -42438,14 +44413,14 @@
 			reftype = FILTER_WEAPON
 			return
 		}
 		if ( dbmode == DBMODE_REF_SPEC ) {
 			if ( dbspec == DBSPEC_TYPE ) {
-				return FILTER_WEAPON
+				return 10000
 			}
 			if ( dbspec == DBSPEC_TYPE_MINOR ) {
-				return FILTER_WEAPON_POLEARM
+				return 10007
 			}
 			if ( dbspec == DBSPEC_VALUE_ORG ) {
 				return 40000
 			}
 			if ( dbspec == DBSPEC_PARAM3_ORG ) {
@@ -42491,11 +44466,11 @@
 			inv(INV_ITEM_ID, ci) = ITEM_ID_KALPA_HAND
 			inv(INV_ITEM_PIC, ci) = xy2pic(19, 1)
 			reftype = FILTER_WEAPON
 			reftypeminor = FILTER_WEAPON_LONGSWORD
 			inv(INV_ITEM_NUM, ci) = 1
-			fixeditemenc = ENCHANT_RES_CONFUSE, 100, ENCHANT_RES_BLIND, 100, ENCHANT_ATTRIBUTE * EXT_ENCHANTMENT + SKILL_ATTR_DEX, 800, ENCHANT_MIND_AND_SOUND, 100, ENCHANT_ENHANCE_SPELL, 600, ENCHANT_KALPA_HAND, 500, 0
+			fixeditemenc = 25, 100, 23, 100, ENCHANT_ATTRIBUTE * EXT_ENCHANTMENT + SKILL_ATTR_DEX, 800, 74, 100, 34, 600, 77, 500, 0
 			ibitmod ITEM_BIT_PRECIOUS, ci, TRUE
 			inv(INV_ITEM_IDENTIFY_LEVEL, ci) = 500
 			fixlv = FIX_QUALITY_UNIQUE
 			return
 		}
@@ -42505,14 +44480,14 @@
 			reftype = FILTER_WEAPON
 			return
 		}
 		if ( dbmode == DBMODE_REF_SPEC ) {
 			if ( dbspec == DBSPEC_TYPE ) {
-				return FILTER_WEAPON
+				return 10000
 			}
 			if ( dbspec == DBSPEC_TYPE_MINOR ) {
-				return FILTER_WEAPON_LONGSWORD
+				return 10002
 			}
 			if ( dbspec == DBSPEC_VALUE_ORG ) {
 				return 60000
 			}
 			if ( dbspec == DBSPEC_PARAM3_ORG ) {
@@ -42566,14 +44541,14 @@
 			reftype = FILTER_ITEM_TOOL
 			return
 		}
 		if ( dbmode == DBMODE_REF_SPEC ) {
 			if ( dbspec == DBSPEC_TYPE ) {
-				return FILTER_ITEM_TOOL
+				return 59000
 			}
 			if ( dbspec == DBSPEC_TYPE_MINOR ) {
-				return FILTER_NONE
+				return 99999
 			}
 			if ( dbspec == DBSPEC_VALUE_ORG ) {
 				return 300
 			}
 			if ( dbspec == DBSPEC_PARAM3_ORG ) {
@@ -42628,14 +44603,14 @@
 			reftype = FILTER_ITEM_TOOL
 			return
 		}
 		if ( dbmode == DBMODE_REF_SPEC ) {
 			if ( dbspec == DBSPEC_TYPE ) {
-				return FILTER_ITEM_TOOL
+				return 59000
 			}
 			if ( dbspec == DBSPEC_TYPE_MINOR ) {
-				return FILTER_NONE
+				return 99999
 			}
 			if ( dbspec == DBSPEC_VALUE_ORG ) {
 				return 300
 			}
 			if ( dbspec == DBSPEC_PARAM3_ORG ) {
@@ -42693,14 +44668,14 @@
 			reftype = FILTER_ITEM_FOOD
 			return
 		}
 		if ( dbmode == DBMODE_REF_SPEC ) {
 			if ( dbspec == DBSPEC_TYPE ) {
-				return FILTER_ITEM_FOOD
+				return 57000
 			}
 			if ( dbspec == DBSPEC_TYPE_MINOR ) {
-				return FILTER_NONE
+				return 99999
 			}
 			if ( dbspec == DBSPEC_VALUE_ORG ) {
 				return 600
 			}
 			if ( dbspec == DBSPEC_PARAM3_ORG ) {
@@ -42754,14 +44729,14 @@
 			reftype = FILTER_ORE
 			return
 		}
 		if ( dbmode == DBMODE_REF_SPEC ) {
 			if ( dbspec == DBSPEC_TYPE ) {
-				return FILTER_ORE
+				return 77000
 			}
 			if ( dbspec == DBSPEC_TYPE_MINOR ) {
-				return FILTER_NONE
+				return 99999
 			}
 			if ( dbspec == DBSPEC_VALUE_ORG ) {
 				return 9200
 			}
 			if ( dbspec == DBSPEC_PARAM3_ORG ) {
@@ -42818,14 +44793,14 @@
 			reftype = FILTER_ITEM_FOOD
 			return
 		}
 		if ( dbmode == DBMODE_REF_SPEC ) {
 			if ( dbspec == DBSPEC_TYPE ) {
-				return FILTER_ITEM_FOOD
+				return 57000
 			}
 			if ( dbspec == DBSPEC_TYPE_MINOR ) {
-				return FILTER_NONE
+				return 99999
 			}
 			if ( dbspec == DBSPEC_VALUE_ORG ) {
 				return 3000
 			}
 			if ( dbspec == DBSPEC_PARAM3_ORG ) {
@@ -42887,14 +44862,14 @@
 			reftype = FILTER_ORE
 			return
 		}
 		if ( dbmode == DBMODE_REF_SPEC ) {
 			if ( dbspec == DBSPEC_TYPE ) {
-				return FILTER_ORE
+				return 77000
 			}
 			if ( dbspec == DBSPEC_TYPE_MINOR ) {
-				return FILTER_ORE_GEM
+				return 77001
 			}
 			if ( dbspec == DBSPEC_VALUE_ORG ) {
 				return 1000
 			}
 			if ( dbspec == DBSPEC_PARAM3_ORG ) {
@@ -42958,14 +44933,14 @@
 			reftype = FILTER_ITEM_TOOL
 			return
 		}
 		if ( dbmode == DBMODE_REF_SPEC ) {
 			if ( dbspec == DBSPEC_TYPE ) {
-				return FILTER_ITEM_TOOL
+				return 59000
 			}
 			if ( dbspec == DBSPEC_TYPE_MINOR ) {
-				return FILTER_NONE
+				return 99999
 			}
 			if ( dbspec == DBSPEC_VALUE_ORG ) {
 				return 12000
 			}
 			if ( dbspec == DBSPEC_PARAM3_ORG ) {
@@ -43023,14 +44998,14 @@
 			reftype = FILTER_ITEM_TOOL
 			return
 		}
 		if ( dbmode == DBMODE_REF_SPEC ) {
 			if ( dbspec == DBSPEC_TYPE ) {
-				return FILTER_ITEM_TOOL
+				return 59000
 			}
 			if ( dbspec == DBSPEC_TYPE_MINOR ) {
-				return FILTER_NONE
+				return 99999
 			}
 			if ( dbspec == DBSPEC_VALUE_ORG ) {
 				return 3500
 			}
 			if ( dbspec == DBSPEC_PARAM3_ORG ) {
@@ -43087,14 +45062,14 @@
 			reftype = FILTER_ITEM_SCROLL
 			return
 		}
 		if ( dbmode == DBMODE_REF_SPEC ) {
 			if ( dbspec == DBSPEC_TYPE ) {
-				return FILTER_ITEM_SCROLL
+				return 53000
 			}
 			if ( dbspec == DBSPEC_TYPE_MINOR ) {
-				return FILTER_NONE
+				return 99999
 			}
 			if ( dbspec == DBSPEC_VALUE_ORG ) {
 				return 15000
 			}
 			if ( dbspec == DBSPEC_PARAM3_ORG ) {
@@ -43157,14 +45132,14 @@
 			reftype = FILTER_JUNK
 			return
 		}
 		if ( dbmode == DBMODE_REF_SPEC ) {
 			if ( dbspec == DBSPEC_TYPE ) {
-				return FILTER_JUNK
+				return 64000
 			}
 			if ( dbspec == DBSPEC_TYPE_MINOR ) {
-				return FILTER_NONE
+				return 99999
 			}
 			if ( dbspec == DBSPEC_VALUE_ORG ) {
 				return 2800
 			}
 			if ( dbspec == DBSPEC_PARAM3_ORG ) {
@@ -43211,11 +45186,11 @@
 			inv(INV_ITEM_ID, ci) = ITEM_ID_FRIGHT_PRAWN
 			inv(INV_ITEM_PIC, ci) = xy2pic(30, 35)
 			reftype = FILTER_RANGE
 			reftypeminor = FILTER_RANGE_ROCK_THROW
 			inv(INV_ITEM_NUM, ci) = 1
-			fixeditemenc = ENCHANT_PROC * EXT_ENCHANTMENT + ENCHANT_PROC_GRENADE, 100, ENCHANT_RESISTANCE * EXT_ENCHANTMENT + SKILL_RES_FIRE, 700, ENCHANT_RESISTANCE * EXT_ENCHANTMENT + SKILL_RES_COLD, -200, ENCHANT_SKILL * EXT_ENCHANTMENT + SKILL_NORMAL_STEALTH, 300, ENCHANT_EXTRA_RANGED, 300, ENCHANT_BANE_FLYING, 100, 0
+			fixeditemenc = ENCHANT_PROC * EXT_ENCHANTMENT + ENCHANT_PROC_GRENADE, 100, ENCHANT_RESISTANCE * EXT_ENCHANTMENT + SKILL_RES_FIRE, 700, ENCHANT_RESISTANCE * EXT_ENCHANTMENT + SKILL_RES_COLD, -200, ENCHANT_SKILL * EXT_ENCHANTMENT + SKILL_NORMAL_STEALTH, 300, 51, 300, 76, 100, 0
 			ibitmod ITEM_BIT_PRECIOUS, ci, TRUE
 			inv(INV_ITEM_IDENTIFY_LEVEL, ci) = 500
 			fixlv = FIX_QUALITY_UNIQUE
 			return
 		}
@@ -43225,14 +45200,14 @@
 			reftype = FILTER_RANGE
 			return
 		}
 		if ( dbmode == DBMODE_REF_SPEC ) {
 			if ( dbspec == DBSPEC_TYPE ) {
-				return FILTER_RANGE
+				return 24000
 			}
 			if ( dbspec == DBSPEC_TYPE_MINOR ) {
-				return FILTER_RANGE_ROCK_THROW
+				return 24030
 			}
 			if ( dbspec == DBSPEC_VALUE_ORG ) {
 				return 30000
 			}
 			if ( dbspec == DBSPEC_PARAM3_ORG ) {
@@ -43293,14 +45268,14 @@
 			reftype = FILTER_WEAPON
 			return
 		}
 		if ( dbmode == DBMODE_REF_SPEC ) {
 			if ( dbspec == DBSPEC_TYPE ) {
-				return FILTER_WEAPON
+				return 10000
 			}
 			if ( dbspec == DBSPEC_TYPE_MINOR ) {
-				return FILTER_WEAPON_LONGSWORD
+				return 10002
 			}
 			if ( dbspec == DBSPEC_VALUE_ORG ) {
 				return 4000
 			}
 			if ( dbspec == DBSPEC_PARAM3_ORG ) {
@@ -43362,14 +45337,14 @@
 			reftype = FILTER_WEAPON
 			return
 		}
 		if ( dbmode == DBMODE_REF_SPEC ) {
 			if ( dbspec == DBSPEC_TYPE ) {
-				return FILTER_WEAPON
+				return 10000
 			}
 			if ( dbspec == DBSPEC_TYPE_MINOR ) {
-				return FILTER_WEAPON_SICKLE
+				return 10011
 			}
 			if ( dbspec == DBSPEC_VALUE_ORG ) {
 				return 20000
 			}
 			if ( dbspec == DBSPEC_PARAM3_ORG ) {
@@ -43413,32 +45388,32 @@
 			inv(INV_ITEM_WEIGHT, ci) = 2000
 		}
 		if ( dbmode == DBMODE_SET ) {
 			inv(INV_ITEM_SKILL_REF, ci) = SKILL_WEAPON_SHORTSWORD
 			inv(INV_ITEM_ID, ci) = ITEM_ID_GO_RENGE
-			inv(INV_ITEM_PIC, ci) = 1180
+			inv(INV_ITEM_PIC, ci) = xy2pic(25, 35)
 			reftype = FILTER_WEAPON
 			reftypeminor = FILTER_WEAPON_SHORTSWORD
 			inv(INV_ITEM_NUM, ci) = 1
-			fixeditemenc = ENCHANT_ABSORB_STAMINA, 400, ENCHANT_SKILL * EXT_ENCHANTMENT + SKILL_WEAPON_STAVE, 600, ENCHANT_SKILL * EXT_ENCHANTMENT + SKILL_NORMAL_TACTICS, 300, ENCHANT_RESISTANCE * EXT_ENCHANTMENT + SKILL_RES_COLD, 550, ENCHANT_RES_CONFUSE, 100, 0
-			ibitmod ITEM_BIT_PRECIOUS, ci, 1
+			fixeditemenc = 36, 400, ENCHANT_SKILL * EXT_ENCHANTMENT + SKILL_WEAPON_STAVE, 600, ENCHANT_SKILL * EXT_ENCHANTMENT + SKILL_NORMAL_TACTICS, 300, ENCHANT_RESISTANCE * EXT_ENCHANTMENT + SKILL_RES_COLD, 550, 25, 100, 0
+			ibitmod ITEM_BIT_PRECIOUS, ci, TRUE
 			inv(INV_ITEM_IDENTIFY_LEVEL, ci) = 500
-			fixlv = 6
+			fixlv = FIX_QUALITY_UNIQUE
 			return
 		}
 		if ( dbmode == DBMODE_REF ) {
 			ichargelevel = 0
 			infilterref = ""
-			reftype = FILTER_RANGE
+			reftype = FILTER_WEAPON
 			return
 		}
 		if ( dbmode == DBMODE_REF_SPEC ) {
 			if ( dbspec == DBSPEC_TYPE ) {
-				return FILTER_WEAPON
+				return 10000
 			}
 			if ( dbspec == DBSPEC_TYPE_MINOR ) {
-				return FILTER_WEAPON_SHORTSWORD
+				return 10003
 			}
 			if ( dbspec == DBSPEC_VALUE_ORG ) {
 				return 35000
 			}
 			if ( dbspec == DBSPEC_PARAM3_ORG ) {
@@ -43482,32 +45457,32 @@
 			inv(INV_ITEM_WEIGHT, ci) = 600
 		}
 		if ( dbmode == DBMODE_SET ) {
 			inv(INV_ITEM_SKILL_REF, ci) = SKILL_WEAPON_LONGSWORD
 			inv(INV_ITEM_ID, ci) = ITEM_ID_EPECLAIR
-			inv(INV_ITEM_PIC, ci) = 1153
+			inv(INV_ITEM_PIC, ci) = xy2pic(31, 34)
 			reftype = FILTER_WEAPON
 			reftypeminor = FILTER_WEAPON_LONGSWORD
 			inv(INV_ITEM_NUM, ci) = 1
-			fixeditemenc = ENCHANT_ELEMENTAL_DMG * EXT_ENCHANTMENT + SKILL_RES_LIGHTNING, 400, ENCHANT_RESISTANCE * EXT_ENCHANTMENT + SKILL_RES_LIGHTNING, 350, ENCHANT_RESISTANCE * EXT_ENCHANTMENT + SKILL_RES_NERVE, -190, ENCHANT_PROC * EXT_ENCHANTMENT + ENCHANT_PROC_LIGHTNING_BREATH, 400, ENCHANT_PROC * EXT_ENCHANTMENT + ENCHANT_PROC_SPEED, 150, ENCHANT_RES_PARALYZE, 100, 0
-			ibitmod ITEM_BIT_PRECIOUS, ci, 1
+			fixeditemenc = ENCHANT_ELEMENTAL_DMG * EXT_ENCHANTMENT + SKILL_RES_LIGHTNING, 400, ENCHANT_RESISTANCE * EXT_ENCHANTMENT + SKILL_RES_LIGHTNING, 350, ENCHANT_RESISTANCE * EXT_ENCHANTMENT + SKILL_RES_NERVE, -190, ENCHANT_PROC * EXT_ENCHANTMENT + ENCHANT_PROC_LIGHTNING_BREATH, 400, ENCHANT_PROC * EXT_ENCHANTMENT + ENCHANT_PROC_SPEED, 150, 24, 100, 0
+			ibitmod ITEM_BIT_PRECIOUS, ci, TRUE
 			inv(INV_ITEM_IDENTIFY_LEVEL, ci) = 500
-			fixlv = 6
+			fixlv = FIX_QUALITY_UNIQUE
 			return
 		}
 		if ( dbmode == DBMODE_REF ) {
 			ichargelevel = 0
 			infilterref = ""
 			reftype = FILTER_WEAPON
 			return
 		}
 		if ( dbmode == DBMODE_REF_SPEC ) {
 			if ( dbspec == DBSPEC_TYPE ) {
-				return FILTER_WEAPON
+				return 10000
 			}
 			if ( dbspec == DBSPEC_TYPE_MINOR ) {
-				return FILTER_WEAPON_LONGSWORD
+				return 10002
 			}
 			if ( dbspec == DBSPEC_VALUE_ORG ) {
 				return 40000
 			}
 			if ( dbspec == DBSPEC_PARAM3_ORG ) {
@@ -43550,32 +45525,32 @@
 			inv(INV_ITEM_WEIGHT, ci) = 59000
 		}
 		if ( dbmode == DBMODE_SET ) {
 			inv(INV_ITEM_SKILL_REF, ci) = SKILL_WEAPON_POLEARM
 			inv(INV_ITEM_ID, ci) = ITEM_ID_GOUTEN
-			inv(INV_ITEM_PIC, ci) = 1152
+			inv(INV_ITEM_PIC, ci) = xy2pic(30, 34)
 			reftype = FILTER_WEAPON
 			reftypeminor = FILTER_WEAPON_POLEARM
 			inv(INV_ITEM_NUM, ci) = 1
-			fixeditemenc = ENCHANT_RESISTANCE * EXT_ENCHANTMENT + SKILL_RES_LIGHTNING, 300, ENCHANT_SKILL * EXT_ENCHANTMENT + SKILL_NORMAL_MINING, 900, ENCHANT_SKILL * EXT_ENCHANTMENT + SKILL_NORMAL_SWIMMING, 400, ENCHANT_ATTRIBUTE * EXT_ENCHANTMENT + SKILL_ATTR_SPD, 300, ENCHANT_PROC * EXT_ENCHANTMENT + ENCHANT_PROC_ICE_BOLT, 250, ENCHANT_FLOAT, 100, 0
-			ibitmod ITEM_BIT_PRECIOUS, ci, 1
+			fixeditemenc = ENCHANT_RESISTANCE * EXT_ENCHANTMENT + SKILL_RES_LIGHTNING, 300, ENCHANT_SKILL * EXT_ENCHANTMENT + SKILL_NORMAL_MINING, 900, ENCHANT_SKILL * EXT_ENCHANTMENT + SKILL_NORMAL_SWIMMING, 400, ENCHANT_ATTRIBUTE * EXT_ENCHANTMENT + SKILL_ATTR_SPD, 300, ENCHANT_PROC * EXT_ENCHANTMENT + ENCHANT_PROC_ICE_BOLT, 250, 32, 100, 0
+			ibitmod ITEM_BIT_PRECIOUS, ci, TRUE
 			inv(INV_ITEM_IDENTIFY_LEVEL, ci) = 500
-			fixlv = 6
+			fixlv = FIX_QUALITY_UNIQUE
 			return
 		}
 		if ( dbmode == DBMODE_REF ) {
 			ichargelevel = 0
 			infilterref = ""
 			reftype = FILTER_WEAPON
 			return
 		}
 		if ( dbmode == DBMODE_REF_SPEC ) {
 			if ( dbspec == DBSPEC_TYPE ) {
-				return FILTER_WEAPON
+				return 10000
 			}
 			if ( dbspec == DBSPEC_TYPE_MINOR ) {
-				return FILTER_WEAPON_POLEARM
+				return 10007
 			}
 			if ( dbspec == DBSPEC_VALUE_ORG ) {
 				return 60000
 			}
 			if ( dbspec == DBSPEC_PARAM3_ORG ) {
@@ -43620,32 +45595,32 @@
 			inv(INV_ITEM_WEIGHT, ci) = 12000
 		}
 		if ( dbmode == DBMODE_SET ) {
 			inv(INV_ITEM_SKILL_REF, ci) = SKILL_WEAPON_AXE
 			inv(INV_ITEM_ID, ci) = ITEM_ID_DGT_101
-			inv(INV_ITEM_PIC, ci) = 1181
+			inv(INV_ITEM_PIC, ci) = xy2pic(26, 35)
 			reftype = FILTER_WEAPON
 			reftypeminor = FILTER_WEAPON_LARGE_AXE
 			inv(INV_ITEM_NUM, ci) = 1
-			fixeditemenc = ENCHANT_PROC * EXT_ENCHANTMENT + ENCHANT_PROC_HERO, 400, ENCHANT_RESISTANCE * EXT_ENCHANTMENT + SKILL_RES_CHAOS, 300, ENCHANT_SKILL * EXT_ENCHANTMENT + SKILL_NORMAL_TACTICS, 600, ENCHANT_SKILL * EXT_ENCHANTMENT + SKILL_WEAPON_THROWING, 600, ENCHANT_SKILL * EXT_ENCHANTMENT + SKILL_NORMAL_TWO_HAND, 250, ENCHANT_BANE_DRAGON, 250, ENCHANT_RES_FEAR, 100, 0
-			ibitmod ITEM_BIT_PRECIOUS, ci, 1
+			fixeditemenc = ENCHANT_PROC * EXT_ENCHANTMENT + ENCHANT_PROC_HERO, 400, ENCHANT_RESISTANCE * EXT_ENCHANTMENT + SKILL_RES_CHAOS, 300, ENCHANT_SKILL * EXT_ENCHANTMENT + SKILL_NORMAL_TACTICS, 600, ENCHANT_SKILL * EXT_ENCHANTMENT + SKILL_WEAPON_THROWING, 600, ENCHANT_SKILL * EXT_ENCHANTMENT + SKILL_NORMAL_TWO_HAND, 250, 57, 250, 26, 100, 0
+			ibitmod ITEM_BIT_PRECIOUS, ci, TRUE
 			inv(INV_ITEM_IDENTIFY_LEVEL, ci) = 500
-			fixlv = 6
+			fixlv = FIX_QUALITY_UNIQUE
 			return
 		}
 		if ( dbmode == DBMODE_REF ) {
 			ichargelevel = 0
 			infilterref = ""
 			reftype = FILTER_WEAPON
 			return
 		}
 		if ( dbmode == DBMODE_REF_SPEC ) {
 			if ( dbspec == DBSPEC_TYPE ) {
-				return FILTER_WEAPON
+				return 10000
 			}
 			if ( dbspec == DBSPEC_TYPE_MINOR ) {
-				return FILTER_WEAPON_LARGE_AXE
+				return 10010
 			}
 			if ( dbspec == DBSPEC_VALUE_ORG ) {
 				return 55000
 			}
 			if ( dbspec == DBSPEC_PARAM3_ORG ) {
@@ -43689,32 +45664,32 @@
 			inv(INV_ITEM_WEIGHT, ci) = 4000
 		}
 		if ( dbmode == DBMODE_SET ) {
 			inv(INV_ITEM_SKILL_REF, ci) = SKILL_WEAPON_SCYTHE
 			inv(INV_ITEM_ID, ci) = ITEM_ID_NUMENIUS
-			inv(INV_ITEM_PIC, ci) = 1149
+			inv(INV_ITEM_PIC, ci) = xy2pic(27, 34)
 			reftype = FILTER_WEAPON
 			reftypeminor = FILTER_WEAPON_SICKLE
 			inv(INV_ITEM_NUM, ci) = 1
-			fixeditemenc = ENCHANT_PROC * EXT_ENCHANTMENT + ENCHANT_PROC_FEATHER, 100, ENCHANT_PROC * EXT_ENCHANTMENT + ENCHANT_PROC_DECAPITATION, 100, ENCHANT_RESISTANCE * EXT_ENCHANTMENT + SKILL_RES_MAGIC, 300, ENCHANT_BANE_FLYING, 300, ENCHANT_FLOAT, 100, 0
-			ibitmod ITEM_BIT_PRECIOUS, ci, 1
+			fixeditemenc = ENCHANT_PROC * EXT_ENCHANTMENT + ENCHANT_PROC_FEATHER, 100, ENCHANT_PROC * EXT_ENCHANTMENT + ENCHANT_PROC_DECAPITATION, 100, ENCHANT_RESISTANCE * EXT_ENCHANTMENT + SKILL_RES_MAGIC, 300, 76, 300, 32, 100, 0
+			ibitmod ITEM_BIT_PRECIOUS, ci, TRUE
 			inv(INV_ITEM_IDENTIFY_LEVEL, ci) = 500
-			fixlv = 6
+			fixlv = FIX_QUALITY_UNIQUE
 			return
 		}
 		if ( dbmode == DBMODE_REF ) {
 			ichargelevel = 0
 			infilterref = ""
 			reftype = FILTER_WEAPON
 			return
 		}
 		if ( dbmode == DBMODE_REF_SPEC ) {
 			if ( dbspec == DBSPEC_TYPE ) {
-				return FILTER_WEAPON
+				return 10000
 			}
 			if ( dbspec == DBSPEC_TYPE_MINOR ) {
-				return FILTER_WEAPON_SICKLE
+				return 10011
 			}
 			if ( dbspec == DBSPEC_VALUE_ORG ) {
 				return 50000
 			}
 			if ( dbspec == DBSPEC_PARAM3_ORG ) {
@@ -43757,32 +45732,32 @@
 			inv(INV_ITEM_WEIGHT, ci) = 2000
 		}
 		if ( dbmode == DBMODE_SET ) {
 			inv(INV_ITEM_SKILL_REF, ci) = SKILL_WEAPON_STAVE
 			inv(INV_ITEM_ID, ci) = ITEM_ID_ENGOKU
-			inv(INV_ITEM_PIC, ci) = 1145
+			inv(INV_ITEM_PIC, ci) = xy2pic(23, 34)
 			reftype = FILTER_WEAPON
 			reftypeminor = FILTER_WEAPON_STAVE
 			inv(INV_ITEM_NUM, ci) = 1
-			fixeditemenc = ENCHANT_ELEMENTAL_DMG * EXT_ENCHANTMENT + SKILL_RES_FIRE, 300, ENCHANT_RESISTANCE * EXT_ENCHANTMENT + SKILL_RES_NETHER, 150, ENCHANT_RESISTANCE * EXT_ENCHANTMENT + SKILL_RES_DARKNESS, 300, ENCHANT_SKILL * EXT_ENCHANTMENT + SKILL_NORMAL_EYE_OF_MIND, 900, ENCHANT_PROXIMITY_ASSIST, 150, 0
-			ibitmod ITEM_BIT_PRECIOUS, ci, 1
+			fixeditemenc = ENCHANT_ELEMENTAL_DMG * EXT_ENCHANTMENT + SKILL_RES_FIRE, 300, ENCHANT_RESISTANCE * EXT_ENCHANTMENT + SKILL_RES_NETHER, 150, ENCHANT_RESISTANCE * EXT_ENCHANTMENT + SKILL_RES_DARKNESS, 300, ENCHANT_SKILL * EXT_ENCHANTMENT + SKILL_NORMAL_EYE_OF_MIND, 900, 66, 150, 0
+			ibitmod ITEM_BIT_PRECIOUS, ci, TRUE
 			inv(INV_ITEM_IDENTIFY_LEVEL, ci) = 500
-			fixlv = 6
+			fixlv = FIX_QUALITY_UNIQUE
 			return
 		}
 		if ( dbmode == DBMODE_REF ) {
 			ichargelevel = 0
 			infilterref = ""
 			reftype = FILTER_WEAPON
 			return
 		}
 		if ( dbmode == DBMODE_REF_SPEC ) {
 			if ( dbspec == DBSPEC_TYPE ) {
-				return FILTER_WEAPON
+				return 10000
 			}
 			if ( dbspec == DBSPEC_TYPE_MINOR ) {
-				return FILTER_WEAPON_STAVE
+				return 10006
 			}
 			if ( dbspec == DBSPEC_VALUE_ORG ) {
 				return 51000
 			}
 			if ( dbspec == DBSPEC_PARAM3_ORG ) {
@@ -43828,32 +45803,32 @@
 			inv(INV_ITEM_WEIGHT, ci) = 3000
 		}
 		if ( dbmode == DBMODE_SET ) {
 			inv(INV_ITEM_SKILL_REF, ci) = SKILL_WEAPON_STAVE
 			inv(INV_ITEM_ID, ci) = ITEM_ID_POWER_TRIANGLE
-			inv(INV_ITEM_PIC, ci) = 1144
+			inv(INV_ITEM_PIC, ci) = xy2pic(22, 34)
 			reftype = FILTER_WEAPON
 			reftypeminor = FILTER_WEAPON_STAVE
 			inv(INV_ITEM_NUM, ci) = 1
-			fixeditemenc = ENCHANT_PROC * EXT_ENCHANTMENT + ENCHANT_PROC_SHINING_WAVE, 300, ENCHANT_ENHANCE_BREATH, 300, ENCHANT_RESISTANCE * EXT_ENCHANTMENT + SKILL_RES_MIND, 250, ENCHANT_RESISTANCE * EXT_ENCHANTMENT + SKILL_RES_SOUND, 250, ENCHANT_RESISTANCE * EXT_ENCHANTMENT + SKILL_RES_NERVE, 250, ENCHANT_ENHANCE_SPELL, 300, ENCHANT_EXTRA_MELEE, 150, 0
-			ibitmod ITEM_BIT_PRECIOUS, ci, 1
+			fixeditemenc = ENCHANT_PROC * EXT_ENCHANTMENT + ENCHANT_PROC_SHINING_WAVE, 300, 68, 300, ENCHANT_RESISTANCE * EXT_ENCHANTMENT + SKILL_RES_MIND, 250, ENCHANT_RESISTANCE * EXT_ENCHANTMENT + SKILL_RES_SOUND, 250, ENCHANT_RESISTANCE * EXT_ENCHANTMENT + SKILL_RES_NERVE, 250, 34, 300, 50, 150, 0
+			ibitmod ITEM_BIT_PRECIOUS, ci, TRUE
 			inv(INV_ITEM_IDENTIFY_LEVEL, ci) = 500
-			fixlv = 6
+			fixlv = FIX_QUALITY_UNIQUE
 			return
 		}
 		if ( dbmode == DBMODE_REF ) {
 			ichargelevel = 0
 			infilterref = ""
 			reftype = FILTER_WEAPON
 			return
 		}
 		if ( dbmode == DBMODE_REF_SPEC ) {
 			if ( dbspec == DBSPEC_TYPE ) {
-				return FILTER_WEAPON
+				return 10000
 			}
 			if ( dbspec == DBSPEC_TYPE_MINOR ) {
-				return FILTER_WEAPON_STAVE
+				return 10006
 			}
 			if ( dbspec == DBSPEC_VALUE_ORG ) {
 				return 33000
 			}
 			if ( dbspec == DBSPEC_PARAM3_ORG ) {
@@ -43897,32 +45872,32 @@
 			inv(INV_ITEM_WEIGHT, ci) = 6200
 		}
 		if ( dbmode == DBMODE_SET ) {
 			inv(INV_ITEM_SKILL_REF, ci) = SKILL_WEAPON_CROSSBOW
 			inv(INV_ITEM_ID, ci) = ITEM_ID_CROSS_RAIL
-			inv(INV_ITEM_PIC, ci) = 1142
+			inv(INV_ITEM_PIC, ci) = xy2pic(20, 34)
 			reftype = FILTER_RANGE
 			reftypeminor = FILTER_RANGE_CROSSBOW
 			inv(INV_ITEM_NUM, ci) = 1
-			fixeditemenc = ENCHANT_ELEMENTAL_DMG * EXT_ENCHANTMENT + SKILL_RES_FIRE, 350, ENCHANT_ELEMENTAL_DMG * EXT_ENCHANTMENT + SKILL_RES_LIGHTNING, 150, ENCHANT_RESISTANCE * EXT_ENCHANTMENT + SKILL_RES_LIGHTNING, 350, ENCHANT_CHARGING, 100, ENCHANT_FIRE_AND_COLD, 100, 0
-			ibitmod ITEM_BIT_PRECIOUS, ci, 1
+			fixeditemenc = ENCHANT_ELEMENTAL_DMG * EXT_ENCHANTMENT + SKILL_RES_FIRE, 350, ENCHANT_ELEMENTAL_DMG * EXT_ENCHANTMENT + SKILL_RES_LIGHTNING, 150, ENCHANT_RESISTANCE * EXT_ENCHANTMENT + SKILL_RES_LIGHTNING, 350, 71, 100, 73, 100, 0
+			ibitmod ITEM_BIT_PRECIOUS, ci, TRUE
 			inv(INV_ITEM_IDENTIFY_LEVEL, ci) = 500
-			fixlv = 6
+			fixlv = FIX_QUALITY_UNIQUE
 			return
 		}
 		if ( dbmode == DBMODE_REF ) {
 			ichargelevel = 0
 			infilterref = ""
 			reftype = FILTER_RANGE
 			return
 		}
 		if ( dbmode == DBMODE_REF_SPEC ) {
 			if ( dbspec == DBSPEC_TYPE ) {
-				return FILTER_RANGE
+				return 24000
 			}
 			if ( dbspec == DBSPEC_TYPE_MINOR ) {
-				return FILTER_RANGE_CROSSBOW
+				return 24003
 			}
 			if ( dbspec == DBSPEC_VALUE_ORG ) {
 				return 45000
 			}
 			if ( dbspec == DBSPEC_PARAM3_ORG ) {
@@ -43966,32 +45941,32 @@
 			inv(INV_ITEM_WEIGHT, ci) = 300
 		}
 		if ( dbmode == DBMODE_SET ) {
 			inv(INV_ITEM_SKILL_REF, ci) = SKILL_WEAPON_BLUNT
 			inv(INV_ITEM_ID, ci) = ITEM_ID_NAZUNAS_SOX
-			inv(INV_ITEM_PIC, ci) = 1183
+			inv(INV_ITEM_PIC, ci) = xy2pic(28, 35)
 			reftype = FILTER_WEAPON
 			reftypeminor = FILTER_WEAPON_CLUB
 			inv(INV_ITEM_NUM, ci) = 1
-			fixeditemenc = ENCHANT_PROC * EXT_ENCHANTMENT + ENCHANT_PROC_NIGHTMARE, 250, ENCHANT_ELEMENTAL_DMG * EXT_ENCHANTMENT + SKILL_RES_NERVE, 1200, ENCHANT_ATTRIBUTE * EXT_ENCHANTMENT + SKILL_ATTR_CON, 450, ENCHANT_RES_STEAL, 100, ENCHANT_POISON_AND_NERVE, 100, 0
-			ibitmod ITEM_BIT_PRECIOUS, ci, 1
+			fixeditemenc = ENCHANT_PROC * EXT_ENCHANTMENT + ENCHANT_PROC_NIGHTMARE, 250, ENCHANT_ELEMENTAL_DMG * EXT_ENCHANTMENT + SKILL_RES_NERVE, 1200, ENCHANT_ATTRIBUTE * EXT_ENCHANTMENT + SKILL_ATTR_CON, 450, 41, 100, 75, 100, 0
+			ibitmod ITEM_BIT_PRECIOUS, ci, TRUE
 			inv(INV_ITEM_IDENTIFY_LEVEL, ci) = 500
-			fixlv = 6
+			fixlv = FIX_QUALITY_UNIQUE
 			return
 		}
 		if ( dbmode == DBMODE_REF ) {
 			ichargelevel = 0
 			infilterref = ""
 			reftype = FILTER_WEAPON
 			return
 		}
 		if ( dbmode == DBMODE_REF_SPEC ) {
 			if ( dbspec == DBSPEC_TYPE ) {
-				return FILTER_WEAPON
+				return 10000
 			}
 			if ( dbspec == DBSPEC_TYPE_MINOR ) {
-				return FILTER_WEAPON_CLUB
+				return 10004
 			}
 			if ( dbspec == DBSPEC_VALUE_ORG ) {
 				return 73000
 			}
 			if ( dbspec == DBSPEC_PARAM3_ORG ) {
@@ -44036,32 +46011,32 @@
 			inv(INV_ITEM_WEIGHT, ci) = 15000
 		}
 		if ( dbmode == DBMODE_SET ) {
 			inv(INV_ITEM_SKILL_REF, ci) = SKILL_WEAPON_CROSSBOW
 			inv(INV_ITEM_ID, ci) = ITEM_ID_SCORPIERCE
-			inv(INV_ITEM_PIC, ci) = 927
+			inv(INV_ITEM_PIC, ci) = xy2pic(3, 28)
 			reftype = FILTER_RANGE
 			reftypeminor = FILTER_RANGE_CROSSBOW
 			inv(INV_ITEM_NUM, ci) = 1
-			fixeditemenc = ENCHANT_TIME_STOP, 500, ENCHANT_RESISTANCE * EXT_ENCHANTMENT + SKILL_RES_SOUND, 400, ENCHANT_SKILL * EXT_ENCHANTMENT + SKILL_NORMAL_HEAVY_ARMOR, 150, ENCHANT_PREVENT_TELEPORT, 100, ENCHANT_SEE_INVISIBLE, 100, 0
-			ibitmod ITEM_BIT_PRECIOUS, ci, 1
+			fixeditemenc = 40, 500, ENCHANT_RESISTANCE * EXT_ENCHANTMENT + SKILL_RES_SOUND, 400, ENCHANT_SKILL * EXT_ENCHANTMENT + SKILL_NORMAL_HEAVY_ARMOR, 150, 22, 100, 35, 100, 0
+			ibitmod ITEM_BIT_PRECIOUS, ci, TRUE
 			inv(INV_ITEM_IDENTIFY_LEVEL, ci) = 500
-			fixlv = 6
+			fixlv = FIX_QUALITY_UNIQUE
 			return
 		}
 		if ( dbmode == DBMODE_REF ) {
 			ichargelevel = 0
 			infilterref = ""
 			reftype = FILTER_RANGE
 			return
 		}
 		if ( dbmode == DBMODE_REF_SPEC ) {
 			if ( dbspec == DBSPEC_TYPE ) {
-				return FILTER_RANGE
+				return 24000
 			}
 			if ( dbspec == DBSPEC_TYPE_MINOR ) {
-				return FILTER_RANGE_CROSSBOW
+				return 24003
 			}
 			if ( dbspec == DBSPEC_VALUE_ORG ) {
 				return 48000
 			}
 			if ( dbspec == DBSPEC_PARAM3_ORG ) {
@@ -44107,32 +46082,32 @@
 			inv(INV_ITEM_WEIGHT, ci) = 30000
 		}
 		if ( dbmode == DBMODE_SET ) {
 			inv(INV_ITEM_SKILL_REF, ci) = SKILL_WEAPON_THROWING
 			inv(INV_ITEM_ID, ci) = ITEM_ID_YOMI_TO
-			inv(INV_ITEM_PIC, ci) = 924
+			inv(INV_ITEM_PIC, ci) = xy2pic(0, 28)
 			reftype = FILTER_RANGE
 			reftypeminor = FILTER_RANGE_ROCK_THROW
 			inv(INV_ITEM_NUM, ci) = 1
-			fixeditemenc = ENCHANT_ELEMENTAL_DMG * EXT_ENCHANTMENT + SKILL_RES_NETHER, 450, ENCHANT_RESISTANCE * EXT_ENCHANTMENT + SKILL_RES_NETHER, 500, ENCHANT_BANE_GOD, 100, ENCHANT_DEC_ENEMY_CRIT_CHANCE, 300, 0
-			ibitmod ITEM_BIT_PRECIOUS, ci, 1
+			fixeditemenc = ENCHANT_ELEMENTAL_DMG * EXT_ENCHANTMENT + SKILL_RES_NETHER, 450, ENCHANT_RESISTANCE * EXT_ENCHANTMENT + SKILL_RES_NETHER, 500, 61, 100, 64, 300, 0
+			ibitmod ITEM_BIT_PRECIOUS, ci, TRUE
 			inv(INV_ITEM_IDENTIFY_LEVEL, ci) = 500
-			fixlv = 6
+			fixlv = FIX_QUALITY_UNIQUE
 			return
 		}
 		if ( dbmode == DBMODE_REF ) {
 			ichargelevel = 0
 			infilterref = ""
 			reftype = FILTER_RANGE
 			return
 		}
 		if ( dbmode == DBMODE_REF_SPEC ) {
 			if ( dbspec == DBSPEC_TYPE ) {
-				return FILTER_RANGE
+				return 24000
 			}
 			if ( dbspec == DBSPEC_TYPE_MINOR ) {
-				return FILTER_RANGE_ROCK_THROW
+				return 24030
 			}
 			if ( dbspec == DBSPEC_VALUE_ORG ) {
 				return 38000
 			}
 			if ( dbspec == DBSPEC_PARAM3_ORG ) {
@@ -44176,32 +46151,32 @@
 			inv(INV_ITEM_WEIGHT, ci) = 3800
 		}
 		if ( dbmode == DBMODE_SET ) {
 			inv(INV_ITEM_SKILL_REF, ci) = SKILL_WEAPON_CROSSBOW
 			inv(INV_ITEM_ID, ci) = ITEM_ID_RINKHALS
-			inv(INV_ITEM_PIC, ci) = 595
+			inv(INV_ITEM_PIC, ci) = xy2pic(1, 18)
 			reftype = FILTER_RANGE
 			reftypeminor = FILTER_RANGE_CROSSBOW
 			inv(INV_ITEM_NUM, ci) = 1
-			fixeditemenc = ENCHANT_ELEMENTAL_DMG * EXT_ENCHANTMENT + SKILL_RES_POISON, 400, ENCHANT_RESISTANCE * EXT_ENCHANTMENT + SKILL_RES_POISON, 450, ENCHANT_EAT_ROTTEN, 100, ENCHANT_ENHANCE_BREATH, 500, ENCHANT_RES_POISON, 100, 0
-			ibitmod ITEM_BIT_PRECIOUS, ci, 1
+			fixeditemenc = ENCHANT_ELEMENTAL_DMG * EXT_ENCHANTMENT + SKILL_RES_POISON, 400, ENCHANT_RESISTANCE * EXT_ENCHANTMENT + SKILL_RES_POISON, 450, 42, 100, 68, 500, 28, 100, 0
+			ibitmod ITEM_BIT_PRECIOUS, ci, TRUE
 			inv(INV_ITEM_IDENTIFY_LEVEL, ci) = 500
-			fixlv = 6
+			fixlv = FIX_QUALITY_UNIQUE
 			return
 		}
 		if ( dbmode == DBMODE_REF ) {
 			ichargelevel = 0
 			infilterref = ""
 			reftype = FILTER_RANGE
 			return
 		}
 		if ( dbmode == DBMODE_REF_SPEC ) {
 			if ( dbspec == DBSPEC_TYPE ) {
-				return FILTER_RANGE
+				return 24000
 			}
 			if ( dbspec == DBSPEC_TYPE_MINOR ) {
-				return FILTER_RANGE_CROSSBOW
+				return 24003
 			}
 			if ( dbspec == DBSPEC_VALUE_ORG ) {
 				return 42000
 			}
 			if ( dbspec == DBSPEC_PARAM3_ORG ) {
@@ -44245,32 +46220,32 @@
 			inv(INV_ITEM_WEIGHT, ci) = 200
 		}
 		if ( dbmode == DBMODE_SET ) {
 			inv(INV_ITEM_SKILL_REF, ci) = SKILL_WEAPON_BOW
 			inv(INV_ITEM_ID, ci) = ITEM_ID_LINGS_BOW
-			inv(INV_ITEM_PIC, ci) = 1182
+			inv(INV_ITEM_PIC, ci) = xy2pic(27, 35)
 			reftype = FILTER_RANGE
 			reftypeminor = FILTER_RANGE_SHORTBOW
 			inv(INV_ITEM_NUM, ci) = 1
-			fixeditemenc = ENCHANT_ELEMENTAL_DMG * EXT_ENCHANTMENT + SKILL_RES_MAGIC, 350, ENCHANT_RESISTANCE * EXT_ENCHANTMENT + SKILL_RES_MAGIC, 300, ENCHANT_QUICK_SHOOTING, 100, ENCHANT_ABSORB_MP, 250, 0
-			ibitmod ITEM_BIT_PRECIOUS, ci, 1
+			fixeditemenc = ENCHANT_ELEMENTAL_DMG * EXT_ENCHANTMENT + SKILL_RES_MAGIC, 350, ENCHANT_RESISTANCE * EXT_ENCHANTMENT + SKILL_RES_MAGIC, 300, 70, 100, 38, 250, 0
+			ibitmod ITEM_BIT_PRECIOUS, ci, TRUE
 			inv(INV_ITEM_IDENTIFY_LEVEL, ci) = 500
-			fixlv = 6
+			fixlv = FIX_QUALITY_UNIQUE
 			return
 		}
 		if ( dbmode == DBMODE_REF ) {
 			ichargelevel = 0
 			infilterref = ""
 			reftype = FILTER_RANGE
 			return
 		}
 		if ( dbmode == DBMODE_REF_SPEC ) {
 			if ( dbspec == DBSPEC_TYPE ) {
-				return FILTER_RANGE
+				return 24000
 			}
 			if ( dbspec == DBSPEC_TYPE_MINOR ) {
-				return FILTER_RANGE_SHORTBOW
+				return 24001
 			}
 			if ( dbspec == DBSPEC_VALUE_ORG ) {
 				return 32000
 			}
 			if ( dbspec == DBSPEC_PARAM3_ORG ) {
@@ -44324,14 +46299,14 @@
 			reftype = FILTER_ITEM_POTION
 			return
 		}
 		if ( dbmode == DBMODE_REF_SPEC ) {
 			if ( dbspec == DBSPEC_TYPE ) {
-				return FILTER_ITEM_POTION
+				return 52000
 			}
 			if ( dbspec == DBSPEC_TYPE_MINOR ) {
-				return FILTER_NONE
+				return 99999
 			}
 			if ( dbspec == DBSPEC_VALUE_ORG ) {
 				return 4500
 			}
 			if ( dbspec == DBSPEC_PARAM3_ORG ) {
@@ -44400,14 +46375,14 @@
 			reftype = FILTER_WEAPON
 			return
 		}
 		if ( dbmode == DBMODE_REF_SPEC ) {
 			if ( dbspec == DBSPEC_TYPE ) {
-				return FILTER_WEAPON
+				return 10000
 			}
 			if ( dbspec == DBSPEC_TYPE_MINOR ) {
-				return FILTER_WEAPON_SHORTSWORD
+				return 10003
 			}
 			if ( dbspec == DBSPEC_VALUE_ORG ) {
 				return 500
 			}
 			if ( dbspec == DBSPEC_PARAM3_ORG ) {
@@ -44467,14 +46442,14 @@
 			reftype = FILTER_WEAPON
 			return
 		}
 		if ( dbmode == DBMODE_REF_SPEC ) {
 			if ( dbspec == DBSPEC_TYPE ) {
-				return FILTER_WEAPON
+				return 10000
 			}
 			if ( dbspec == DBSPEC_TYPE_MINOR ) {
-				return FILTER_WEAPON_LONGSWORD
+				return 10002
 			}
 			if ( dbspec == DBSPEC_VALUE_ORG ) {
 				return 500
 			}
 			if ( dbspec == DBSPEC_PARAM3_ORG ) {
@@ -44533,14 +46508,14 @@
 			reftype = FILTER_WEAPON
 			return
 		}
 		if ( dbmode == DBMODE_REF_SPEC ) {
 			if ( dbspec == DBSPEC_TYPE ) {
-				return FILTER_WEAPON
+				return 10000
 			}
 			if ( dbspec == DBSPEC_TYPE_MINOR ) {
-				return FILTER_WEAPON_POLEARM
+				return 10007
 			}
 			if ( dbspec == DBSPEC_VALUE_ORG ) {
 				return 1200
 			}
 			if ( dbspec == DBSPEC_PARAM3_ORG ) {
@@ -44599,14 +46574,14 @@
 			reftype = FILTER_WEAPON
 			return
 		}
 		if ( dbmode == DBMODE_REF_SPEC ) {
 			if ( dbspec == DBSPEC_TYPE ) {
-				return FILTER_WEAPON
+				return 10000
 			}
 			if ( dbspec == DBSPEC_TYPE_MINOR ) {
-				return FILTER_WEAPON_POLEARM
+				return 10007
 			}
 			if ( dbspec == DBSPEC_VALUE_ORG ) {
 				return 900
 			}
 			if ( dbspec == DBSPEC_PARAM3_ORG ) {
@@ -44668,14 +46643,14 @@
 			reftype = FILTER_WEAPON
 			return
 		}
 		if ( dbmode == DBMODE_REF_SPEC ) {
 			if ( dbspec == DBSPEC_TYPE ) {
-				return FILTER_WEAPON
+				return 10000
 			}
 			if ( dbspec == DBSPEC_TYPE_MINOR ) {
-				return FILTER_WEAPON_SMALL_AXE
+				return 10009
 			}
 			if ( dbspec == DBSPEC_VALUE_ORG ) {
 				return 500
 			}
 			if ( dbspec == DBSPEC_PARAM3_ORG ) {
@@ -44723,11 +46698,11 @@
 			inv(INV_ITEM_ID, ci) = ITEM_ID_CHAINSAW
 			inv(INV_ITEM_PIC, ci) = xy2pic(20, 16)
 			reftype = FILTER_WEAPON
 			reftypeminor = FILTER_WEAPON_LARGE_AXE
 			inv(INV_ITEM_NUM, ci) = 1
-			fixeditemenc = ENCHANT_PIERCING_CHANCE, 50, 0
+			fixeditemenc = 39, 50, 0
 			inv(INV_ITEM_IDENTIFY_LEVEL, ci) = 0
 			return
 		}
 		if ( dbmode == DBMODE_REF ) {
 			ichargelevel = 0
@@ -44735,14 +46710,14 @@
 			reftype = FILTER_WEAPON
 			return
 		}
 		if ( dbmode == DBMODE_REF_SPEC ) {
 			if ( dbspec == DBSPEC_TYPE ) {
-				return FILTER_WEAPON
+				return 10000
 			}
 			if ( dbspec == DBSPEC_TYPE_MINOR ) {
-				return FILTER_WEAPON_LARGE_AXE
+				return 10010
 			}
 			if ( dbspec == DBSPEC_VALUE_ORG ) {
 				return 1200
 			}
 			if ( dbspec == DBSPEC_PARAM3_ORG ) {
@@ -44802,14 +46777,14 @@
 			reftype = FILTER_WEAPON
 			return
 		}
 		if ( dbmode == DBMODE_REF_SPEC ) {
 			if ( dbspec == DBSPEC_TYPE ) {
-				return FILTER_WEAPON
+				return 10000
 			}
 			if ( dbspec == DBSPEC_TYPE_MINOR ) {
-				return FILTER_WEAPON_SICKLE
+				return 10011
 			}
 			if ( dbspec == DBSPEC_VALUE_ORG ) {
 				return 900
 			}
 			if ( dbspec == DBSPEC_PARAM3_ORG ) {
@@ -44869,14 +46844,14 @@
 			reftype = FILTER_WEAPON
 			return
 		}
 		if ( dbmode == DBMODE_REF_SPEC ) {
 			if ( dbspec == DBSPEC_TYPE ) {
-				return FILTER_WEAPON
+				return 10000
 			}
 			if ( dbspec == DBSPEC_TYPE_MINOR ) {
-				return FILTER_WEAPON_SICKLE
+				return 10011
 			}
 			if ( dbspec == DBSPEC_VALUE_ORG ) {
 				return 700
 			}
 			if ( dbspec == DBSPEC_PARAM3_ORG ) {
@@ -44936,14 +46911,14 @@
 			reftype = FILTER_WEAPON
 			return
 		}
 		if ( dbmode == DBMODE_REF_SPEC ) {
 			if ( dbspec == DBSPEC_TYPE ) {
-				return FILTER_WEAPON
+				return 10000
 			}
 			if ( dbspec == DBSPEC_TYPE_MINOR ) {
-				return FILTER_WEAPON_HAMMER
+				return 10005
 			}
 			if ( dbspec == DBSPEC_VALUE_ORG ) {
 				return 500
 			}
 			if ( dbspec == DBSPEC_PARAM3_ORG ) {
@@ -44992,11 +46967,11 @@
 			inv(INV_ITEM_ID, ci) = ITEM_ID_STAR_HAMMER
 			inv(INV_ITEM_PIC, ci) = xy2pic(24, 34)
 			reftype = FILTER_WEAPON
 			reftypeminor = FILTER_WEAPON_HAMMER
 			inv(INV_ITEM_NUM, ci) = 1
-			fixeditemenc = ENCHANT_REMOTE_BLOW, 200, 0
+			fixeditemenc = 63, 200, 0
 			inv(INV_ITEM_IDENTIFY_LEVEL, ci) = 0
 			return
 		}
 		if ( dbmode == DBMODE_REF ) {
 			ichargelevel = 0
@@ -45004,14 +46979,14 @@
 			reftype = FILTER_WEAPON
 			return
 		}
 		if ( dbmode == DBMODE_REF_SPEC ) {
 			if ( dbspec == DBSPEC_TYPE ) {
-				return FILTER_WEAPON
+				return 10000
 			}
 			if ( dbspec == DBSPEC_TYPE_MINOR ) {
-				return FILTER_WEAPON_HAMMER
+				return 10005
 			}
 			if ( dbspec == DBSPEC_VALUE_ORG ) {
 				return 900
 			}
 			if ( dbspec == DBSPEC_PARAM3_ORG ) {
@@ -45071,14 +47046,14 @@
 			reftype = FILTER_WEAPON
 			return
 		}
 		if ( dbmode == DBMODE_REF_SPEC ) {
 			if ( dbspec == DBSPEC_TYPE ) {
-				return FILTER_WEAPON
+				return 10000
 			}
 			if ( dbspec == DBSPEC_TYPE_MINOR ) {
-				return FILTER_WEAPON_STAVE
+				return 10006
 			}
 			if ( dbspec == DBSPEC_VALUE_ORG ) {
 				return 1200
 			}
 			if ( dbspec == DBSPEC_PARAM3_ORG ) {
@@ -45128,11 +47103,11 @@
 			inv(INV_ITEM_ID, ci) = ITEM_ID_NUNCHAKU
 			inv(INV_ITEM_PIC, ci) = xy2pic(22, 34)
 			reftype = FILTER_WEAPON
 			reftypeminor = FILTER_WEAPON_STAVE
 			inv(INV_ITEM_NUM, ci) = 1
-			fixeditemenc = ENCHANT_EXTRA_MELEE, 50, 0
+			fixeditemenc = 50, 50, 0
 			inv(INV_ITEM_IDENTIFY_LEVEL, ci) = 0
 			return
 		}
 		if ( dbmode == DBMODE_REF ) {
 			ichargelevel = 0
@@ -45140,14 +47115,14 @@
 			reftype = FILTER_WEAPON
 			return
 		}
 		if ( dbmode == DBMODE_REF_SPEC ) {
 			if ( dbspec == DBSPEC_TYPE ) {
-				return FILTER_WEAPON
+				return 10000
 			}
 			if ( dbspec == DBSPEC_TYPE_MINOR ) {
-				return FILTER_WEAPON_STAVE
+				return 10006
 			}
 			if ( dbspec == DBSPEC_VALUE_ORG ) {
 				return 900
 			}
 			if ( dbspec == DBSPEC_PARAM3_ORG ) {
@@ -45195,11 +47170,11 @@
 			inv(INV_ITEM_ID, ci) = ITEM_ID_BLADE_BOW
 			inv(INV_ITEM_PIC, ci) = xy2pic(21, 34)
 			reftype = FILTER_RANGE
 			reftypeminor = FILTER_RANGE_SHORTBOW
 			inv(INV_ITEM_NUM, ci) = 1
-			fixeditemenc = ENCHANT_PROXIMITY_ASSIST, 50, 0
+			fixeditemenc = 66, 50, 0
 			inv(INV_ITEM_IDENTIFY_LEVEL, ci) = 0
 			return
 		}
 		if ( dbmode == DBMODE_REF ) {
 			ichargelevel = 0
@@ -45207,14 +47182,14 @@
 			reftype = FILTER_RANGE
 			return
 		}
 		if ( dbmode == DBMODE_REF_SPEC ) {
 			if ( dbspec == DBSPEC_TYPE ) {
-				return FILTER_RANGE
+				return 24000
 			}
 			if ( dbspec == DBSPEC_TYPE_MINOR ) {
-				return FILTER_RANGE_SHORTBOW
+				return 24001
 			}
 			if ( dbspec == DBSPEC_VALUE_ORG ) {
 				return 900
 			}
 			if ( dbspec == DBSPEC_PARAM3_ORG ) {
@@ -45282,14 +47257,14 @@
 			reftype = FILTER_RANGE
 			return
 		}
 		if ( dbmode == DBMODE_REF_SPEC ) {
 			if ( dbspec == DBSPEC_TYPE ) {
-				return FILTER_RANGE
+				return 24000
 			}
 			if ( dbspec == DBSPEC_TYPE_MINOR ) {
-				return FILTER_RANGE_CROSSBOW
+				return 24003
 			}
 			if ( dbspec == DBSPEC_VALUE_ORG ) {
 				return 700
 			}
 			if ( dbspec == DBSPEC_PARAM3_ORG ) {
@@ -45345,11 +47320,11 @@
 			inv(INV_ITEM_ID, ci) = ITEM_ID_GUN_PAIR
 			inv(INV_ITEM_PIC, ci) = xy2pic(12, 21)
 			reftype = FILTER_RANGE
 			reftypeminor = FILTER_RANGE_PISTOL
 			inv(INV_ITEM_NUM, ci) = 1
-			fixeditemenc = ENCHANT_SHOOTING_MECHANISM, 50, 0
+			fixeditemenc = 65, 50, 0
 			inv(INV_ITEM_IDENTIFY_LEVEL, ci) = 0
 			return
 		}
 		if ( dbmode == DBMODE_REF ) {
 			ichargelevel = 0
@@ -45357,14 +47332,14 @@
 			reftype = FILTER_RANGE
 			return
 		}
 		if ( dbmode == DBMODE_REF_SPEC ) {
 			if ( dbspec == DBSPEC_TYPE ) {
-				return FILTER_RANGE
+				return 24000
 			}
 			if ( dbspec == DBSPEC_TYPE_MINOR ) {
-				return FILTER_RANGE_PISTOL
+				return 24020
 			}
 			if ( dbspec == DBSPEC_VALUE_ORG ) {
 				return 900
 			}
 			if ( dbspec == DBSPEC_PARAM3_ORG ) {
@@ -45427,14 +47402,14 @@
 			reftype = FILTER_ITEM_TOOL
 			return
 		}
 		if ( dbmode == DBMODE_REF_SPEC ) {
 			if ( dbspec == DBSPEC_TYPE ) {
-				return FILTER_ITEM_TOOL
+				return 59000
 			}
 			if ( dbspec == DBSPEC_TYPE_MINOR ) {
-				return FILTER_NONE
+				return 99999
 			}
 			if ( dbspec == DBSPEC_VALUE_ORG ) {
 				return 30
 			}
 			if ( dbspec == DBSPEC_PARAM3_ORG ) {
@@ -45492,14 +47467,14 @@
 			reftype = FILTER_ITEM_FOOD
 			return
 		}
 		if ( dbmode == DBMODE_REF_SPEC ) {
 			if ( dbspec == DBSPEC_TYPE ) {
-				return FILTER_ITEM_FOOD
+				return 57000
 			}
 			if ( dbspec == DBSPEC_TYPE_MINOR ) {
-				return FILTER_NONE
+				return 99999
 			}
 			if ( dbspec == DBSPEC_VALUE_ORG ) {
 				return 100
 			}
 			if ( dbspec == DBSPEC_PARAM3_ORG ) {
@@ -45554,14 +47529,14 @@
 			reftype = FILTER_ITEM_FOOD
 			return
 		}
 		if ( dbmode == DBMODE_REF_SPEC ) {
 			if ( dbspec == DBSPEC_TYPE ) {
-				return FILTER_ITEM_FOOD
+				return 57000
 			}
 			if ( dbspec == DBSPEC_TYPE_MINOR ) {
-				return FILTER_NONE
+				return 99999
 			}
 			if ( dbspec == DBSPEC_VALUE_ORG ) {
 				return 100
 			}
 			if ( dbspec == DBSPEC_PARAM3_ORG ) {
@@ -45616,14 +47591,14 @@
 			reftype = FILTER_ITEM_FOOD
 			return
 		}
 		if ( dbmode == DBMODE_REF_SPEC ) {
 			if ( dbspec == DBSPEC_TYPE ) {
-				return FILTER_ITEM_FOOD
+				return 57000
 			}
 			if ( dbspec == DBSPEC_TYPE_MINOR ) {
-				return FILTER_NONE
+				return 99999
 			}
 			if ( dbspec == DBSPEC_VALUE_ORG ) {
 				return 50000
 			}
 			if ( dbspec == DBSPEC_PARAM3_ORG ) {
@@ -45667,11 +47642,11 @@
 			reftype = FILTER_ITEM_TOOL
 			reftypeminor = FILTER_NOTHING
 			inv(INV_ITEM_NUM, ci) = 1
 			fixeditemenc = 0
 			inv(INV_ITEM_EFFECT, ci) = EFFECT_FIXITY_ANCHOR
-			ibitmod ITEM_BIT_PRECIOUS, ci, 1
+			ibitmod ITEM_BIT_PRECIOUS, ci, TRUE
 			inv(INV_ITEM_IDENTIFY_LEVEL, ci) = 0
 			fixlv = FIX_QUALITY_UNIQUE
 			return
 		}
 		if ( dbmode == DBMODE_REF ) {
@@ -45680,14 +47655,14 @@
 			reftype = FILTER_ITEM_TOOL
 			return
 		}
 		if ( dbmode == DBMODE_REF_SPEC ) {
 			if ( dbspec == DBSPEC_TYPE ) {
-				return FILTER_ITEM_TOOL
+				return 59000
 			}
 			if ( dbspec == DBSPEC_TYPE_MINOR ) {
-				return FILTER_NONE
+				return 99999
 			}
 			if ( dbspec == DBSPEC_VALUE_ORG ) {
 				return 25000
 			}
 			if ( dbspec == DBSPEC_PARAM3_ORG ) {
@@ -45744,14 +47719,14 @@
 			reftype = FILTER_ITEM_SCROLL
 			return
 		}
 		if ( dbmode == DBMODE_REF_SPEC ) {
 			if ( dbspec == DBSPEC_TYPE ) {
-				return FILTER_ITEM_SCROLL
+				return 53000
 			}
 			if ( dbspec == DBSPEC_TYPE_MINOR ) {
-				return FILTER_ITEM_DEED
+				return 53100
 			}
 			if ( dbspec == DBSPEC_VALUE_ORG ) {
 				return 3400
 			}
 			if ( dbspec == DBSPEC_PARAM3_ORG ) {
@@ -45812,14 +47787,14 @@
 			reftype = FILTER_JUNK
 			return
 		}
 		if ( dbmode == DBMODE_REF_SPEC ) {
 			if ( dbspec == DBSPEC_TYPE ) {
-				return FILTER_JUNK
+				return 64000
 			}
 			if ( dbspec == DBSPEC_TYPE_MINOR ) {
-				return FILTER_NONE
+				return 99999
 			}
 			if ( dbspec == DBSPEC_VALUE_ORG ) {
 				return 6000
 			}
 			if ( dbspec == DBSPEC_PARAM3_ORG ) {
@@ -45873,14 +47848,14 @@
 			reftype = FILTER_ITEM_POTION
 			return
 		}
 		if ( dbmode == DBMODE_REF_SPEC ) {
 			if ( dbspec == DBSPEC_TYPE ) {
-				return FILTER_ITEM_POTION
+				return 52000
 			}
 			if ( dbspec == DBSPEC_TYPE_MINOR ) {
-				return FILTER_NONE
+				return 99999
 			}
 			if ( dbspec == DBSPEC_VALUE_ORG ) {
 				return 600
 			}
 			if ( dbspec == DBSPEC_PARAM3_ORG ) {
@@ -45943,14 +47918,14 @@
 			reftype = FILTER_ITEM_POTION
 			return
 		}
 		if ( dbmode == DBMODE_REF_SPEC ) {
 			if ( dbspec == DBSPEC_TYPE ) {
-				return FILTER_ITEM_POTION
+				return 52000
 			}
 			if ( dbspec == DBSPEC_TYPE_MINOR ) {
-				return FILTER_NONE
+				return 99999
 			}
 			if ( dbspec == DBSPEC_VALUE_ORG ) {
 				return 300
 			}
 			if ( dbspec == DBSPEC_PARAM3_ORG ) {
@@ -46014,14 +47989,14 @@
 			reftype = FILTER_ITEM_TOOL
 			return
 		}
 		if ( dbmode == DBMODE_REF_SPEC ) {
 			if ( dbspec == DBSPEC_TYPE ) {
-				return FILTER_ITEM_TOOL
+				return 59000
 			}
 			if ( dbspec == DBSPEC_TYPE_MINOR ) {
-				return FILTER_NONE
+				return 99999
 			}
 			if ( dbspec == DBSPEC_VALUE_ORG ) {
 				return 1200
 			}
 			if ( dbspec == DBSPEC_PARAM3_ORG ) {
@@ -46079,14 +48054,14 @@
 			reftype = FILTER_ITEM_FOOD
 			return
 		}
 		if ( dbmode == DBMODE_REF_SPEC ) {
 			if ( dbspec == DBSPEC_TYPE ) {
-				return FILTER_ITEM_FOOD
+				return 57000
 			}
 			if ( dbspec == DBSPEC_TYPE_MINOR ) {
-				return FILTER_NONE
+				return 99999
 			}
 			if ( dbspec == DBSPEC_VALUE_ORG ) {
 				return 10
 			}
 			if ( dbspec == DBSPEC_PARAM3_ORG ) {
@@ -46141,14 +48116,14 @@
 			reftype = FILTER_ITEM_FOOD
 			return
 		}
 		if ( dbmode == DBMODE_REF_SPEC ) {
 			if ( dbspec == DBSPEC_TYPE ) {
-				return FILTER_ITEM_FOOD
+				return 57000
 			}
 			if ( dbspec == DBSPEC_TYPE_MINOR ) {
-				return FILTER_NONE
+				return 99999
 			}
 			if ( dbspec == DBSPEC_VALUE_ORG ) {
 				return 100
 			}
 			if ( dbspec == DBSPEC_PARAM3_ORG ) {
@@ -46203,14 +48178,14 @@
 			reftype = FILTER_FURNITURE
 			return
 		}
 		if ( dbmode == DBMODE_REF_SPEC ) {
 			if ( dbspec == DBSPEC_TYPE ) {
-				return FILTER_FURNITURE
+				return 60000
 			}
 			if ( dbspec == DBSPEC_TYPE_MINOR ) {
-				return FILTER_NONE
+				return 99999
 			}
 			if ( dbspec == DBSPEC_VALUE_ORG ) {
 				return 10000
 			}
 			if ( dbspec == DBSPEC_PARAM3_ORG ) {
@@ -46267,14 +48242,14 @@
 			reftype = FILTER_FURNITURE
 			return
 		}
 		if ( dbmode == DBMODE_REF_SPEC ) {
 			if ( dbspec == DBSPEC_TYPE ) {
-				return FILTER_FURNITURE
+				return 60000
 			}
 			if ( dbspec == DBSPEC_TYPE_MINOR ) {
-				return FILTER_NONE
+				return 99999
 			}
 			if ( dbspec == DBSPEC_VALUE_ORG ) {
 				return 6000
 			}
 			if ( dbspec == DBSPEC_PARAM3_ORG ) {
@@ -46328,14 +48303,14 @@
 			reftype = FILTER_FURNITURE
 			return
 		}
 		if ( dbmode == DBMODE_REF_SPEC ) {
 			if ( dbspec == DBSPEC_TYPE ) {
-				return FILTER_FURNITURE
+				return 60000
 			}
 			if ( dbspec == DBSPEC_TYPE_MINOR ) {
-				return FILTER_NONE
+				return 99999
 			}
 			if ( dbspec == DBSPEC_VALUE_ORG ) {
 				return 3000
 			}
 			if ( dbspec == DBSPEC_PARAM3_ORG ) {
@@ -46389,14 +48364,14 @@
 			reftype = FILTER_JUNK
 			return
 		}
 		if ( dbmode == DBMODE_REF_SPEC ) {
 			if ( dbspec == DBSPEC_TYPE ) {
-				return FILTER_JUNK
+				return 64000
 			}
 			if ( dbspec == DBSPEC_TYPE_MINOR ) {
-				return FILTER_NONE
+				return 99999
 			}
 			if ( dbspec == DBSPEC_VALUE_ORG ) {
 				return 6000
 			}
 			if ( dbspec == DBSPEC_PARAM3_ORG ) {
@@ -46450,14 +48425,14 @@
 			reftype = FILTER_JUNK
 			return
 		}
 		if ( dbmode == DBMODE_REF_SPEC ) {
 			if ( dbspec == DBSPEC_TYPE ) {
-				return FILTER_JUNK
+				return 64000
 			}
 			if ( dbspec == DBSPEC_TYPE_MINOR ) {
-				return FILTER_NONE
+				return 99999
 			}
 			if ( dbspec == DBSPEC_VALUE_ORG ) {
 				return 900
 			}
 			if ( dbspec == DBSPEC_PARAM3_ORG ) {
@@ -46511,14 +48486,14 @@
 			reftype = FILTER_JUNK
 			return
 		}
 		if ( dbmode == DBMODE_REF_SPEC ) {
 			if ( dbspec == DBSPEC_TYPE ) {
-				return FILTER_JUNK
+				return 64000
 			}
 			if ( dbspec == DBSPEC_TYPE_MINOR ) {
-				return FILTER_NONE
+				return 99999
 			}
 			if ( dbspec == DBSPEC_VALUE_ORG ) {
 				return 120
 			}
 			if ( dbspec == DBSPEC_PARAM3_ORG ) {
@@ -46561,11 +48536,11 @@
 			inv(INV_ITEM_PIC, ci) = xy2pic(0, 13)
 			reftype = FILTER_ITEM_BOOK
 			reftypeminor = FILTER_NOTHING
 			inv(INV_ITEM_NUM, ci) = 1
 			fixeditemenc = 0
-			ibitmod ITEM_BIT_PRECIOUS, ci, 1
+			ibitmod ITEM_BIT_PRECIOUS, ci, TRUE
 			inv(INV_ITEM_IDENTIFY_LEVEL, ci) = 0
 			return
 		}
 		if ( dbmode == DBMODE_REF ) {
 			ichargelevel = 0
@@ -46573,14 +48548,14 @@
 			reftype = FILTER_ITEM_BOOK
 			return
 		}
 		if ( dbmode == DBMODE_REF_SPEC ) {
 			if ( dbspec == DBSPEC_TYPE ) {
-				return FILTER_ITEM_BOOK
+				return 55000
 			}
 			if ( dbspec == DBSPEC_TYPE_MINOR ) {
-				return FILTER_NONE
+				return 99999
 			}
 			if ( dbspec == DBSPEC_VALUE_ORG ) {
 				return 10000
 			}
 			if ( dbspec == DBSPEC_PARAM3_ORG ) {
@@ -46644,14 +48619,14 @@
 			reftype = FILTER_ITEM_POTION
 			return
 		}
 		if ( dbmode == DBMODE_REF_SPEC ) {
 			if ( dbspec == DBSPEC_TYPE ) {
-				return FILTER_ITEM_POTION
+				return 52000
 			}
 			if ( dbspec == DBSPEC_TYPE_MINOR ) {
-				return FILTER_NONE
+				return 99999
 			}
 			if ( dbspec == DBSPEC_VALUE_ORG ) {
 				return 600
 			}
 			if ( dbspec == DBSPEC_PARAM3_ORG ) {
@@ -46706,11 +48681,11 @@
 			inv(INV_ITEM_PIC, ci) = xy2pic(3, 10)
 			reftype = FILTER_ITEM_BOOK
 			reftypeminor = FILTER_NOTHING
 			inv(INV_ITEM_NUM, ci) = 1
 			fixeditemenc = 0
-			inv(INV_ITEM_BOOK_ID, ci) = 29
+			inv(INV_ITEM_PARAM1, ci) = 29
 			inv(INV_ITEM_IDENTIFY_LEVEL, ci) = 0
 			return
 		}
 		if ( dbmode == DBMODE_REF ) {
 			ichargelevel = 0
@@ -46718,14 +48693,14 @@
 			reftype = FILTER_ITEM_BOOK
 			return
 		}
 		if ( dbmode == DBMODE_REF_SPEC ) {
 			if ( dbspec == DBSPEC_TYPE ) {
-				return FILTER_ITEM_BOOK
+				return 55000
 			}
 			if ( dbspec == DBSPEC_TYPE_MINOR ) {
-				return FILTER_NONE
+				return 99999
 			}
 			if ( dbspec == DBSPEC_VALUE_ORG ) {
 				return 100
 			}
 			if ( dbspec == DBSPEC_PARAM3_ORG ) {
@@ -46744,11 +48719,11 @@
 				return 1000
 			}
 			return 0
 		}
 		if ( dbmode == DBMODE_ON_READ ) {
-			inv(INV_ITEM_BOOK_ID, ci) = 29
+			inv(INV_ITEM_PARAM1, ci) = 29
 			gosub *read
 			return -1
 		}
 		if ( dbmode == DBMODE_DESC ) {
 			if ( jp ) {
@@ -46776,11 +48751,11 @@
 			inv(INV_ITEM_PIC, ci) = xy2pic(29, 33)
 			reftype = FILTER_CARGO_TRADE
 			reftypeminor = FILTER_NOTHING
 			inv(INV_ITEM_NUM, ci) = 1
 			fixeditemenc = 0
-			inv(INV_ITEM_PARAM1, ci) = 9
+			inv(INV_ITEM_PARAM1, ci) = tradezaile
 			inv(INV_ITEM_IDENTIFY_LEVEL, ci) = 0
 			return
 		}
 		if ( dbmode == DBMODE_REF ) {
 			ichargelevel = 0
@@ -46788,14 +48763,14 @@
 			reftype = FILTER_CARGO_TRADE
 			return
 		}
 		if ( dbmode == DBMODE_REF_SPEC ) {
 			if ( dbspec == DBSPEC_TYPE ) {
-				return FILTER_CARGO_TRADE
+				return 92000
 			}
 			if ( dbspec == DBSPEC_TYPE_MINOR ) {
-				return FILTER_NONE
+				return 99999
 			}
 			if ( dbspec == DBSPEC_VALUE_ORG ) {
 				return 1200
 			}
 			if ( dbspec == DBSPEC_PARAM3_ORG ) {
@@ -46841,11 +48816,11 @@
 			inv(INV_ITEM_PIC, ci) = xy2pic(0, 11)
 			reftype = FILTER_CARGO_TRADE
 			reftypeminor = FILTER_NOTHING
 			inv(INV_ITEM_NUM, ci) = 1
 			fixeditemenc = 0
-			inv(INV_ITEM_PARAM1, ci) = 9
+			inv(INV_ITEM_PARAM1, ci) = tradezaile
 			inv(INV_ITEM_IDENTIFY_LEVEL, ci) = 0
 			return
 		}
 		if ( dbmode == DBMODE_REF ) {
 			ichargelevel = 0
@@ -46853,14 +48828,14 @@
 			reftype = FILTER_CARGO_TRADE
 			return
 		}
 		if ( dbmode == DBMODE_REF_SPEC ) {
 			if ( dbspec == DBSPEC_TYPE ) {
-				return FILTER_CARGO_TRADE
+				return 92000
 			}
 			if ( dbspec == DBSPEC_TYPE_MINOR ) {
-				return FILTER_NONE
+				return 99999
 			}
 			if ( dbspec == DBSPEC_VALUE_ORG ) {
 				return 150
 			}
 			if ( dbspec == DBSPEC_PARAM3_ORG ) {
@@ -46919,14 +48894,14 @@
 			reftype = FILTER_ITEM_FOOD
 			return
 		}
 		if ( dbmode == DBMODE_REF_SPEC ) {
 			if ( dbspec == DBSPEC_TYPE ) {
-				return FILTER_ITEM_FOOD
+				return 57000
 			}
 			if ( dbspec == DBSPEC_TYPE_MINOR ) {
-				return FILTER_NONE
+				return 99999
 			}
 			if ( dbspec == DBSPEC_VALUE_ORG ) {
 				return 300
 			}
 			if ( dbspec == DBSPEC_PARAM3_ORG ) {
@@ -46983,14 +48958,14 @@
 			reftype = FILTER_ITEM_POTION
 			return
 		}
 		if ( dbmode == DBMODE_REF_SPEC ) {
 			if ( dbspec == DBSPEC_TYPE ) {
-				return FILTER_ITEM_POTION
+				return 52000
 			}
 			if ( dbspec == DBSPEC_TYPE_MINOR ) {
-				return FILTER_NONE
+				return 99999
 			}
 			if ( dbspec == DBSPEC_VALUE_ORG ) {
 				return 30
 			}
 			if ( dbspec == DBSPEC_PARAM3_ORG ) {
@@ -47053,14 +49028,14 @@
 			reftype = FILTER_JUNK
 			return
 		}
 		if ( dbmode == DBMODE_REF_SPEC ) {
 			if ( dbspec == DBSPEC_TYPE ) {
-				return FILTER_JUNK
+				return 64000
 			}
 			if ( dbspec == DBSPEC_TYPE_MINOR ) {
-				return FILTER_NONE
+				return 99999
 			}
 			if ( dbspec == DBSPEC_VALUE_ORG ) {
 				return 2100
 			}
 			if ( dbspec == DBSPEC_PARAM3_ORG ) {
@@ -47119,14 +49094,14 @@
 			reftype = FILTER_ITEM_TOOL
 			return
 		}
 		if ( dbmode == DBMODE_REF_SPEC ) {
 			if ( dbspec == DBSPEC_TYPE ) {
-				return FILTER_ITEM_TOOL
+				return 59000
 			}
 			if ( dbspec == DBSPEC_TYPE_MINOR ) {
-				return FILTER_NONE
+				return 99999
 			}
 			if ( dbspec == DBSPEC_VALUE_ORG ) {
 				return 9000
 			}
 			if ( dbspec == DBSPEC_PARAM3_ORG ) {
@@ -47174,12 +49149,12 @@
 			inv(INV_ITEM_ID, ci) = ITEM_ID_MAGIC_RESTRAINT
 			inv(INV_ITEM_PIC, ci) = xy2pic(28, 29)
 			reftype = FILTER_ARMOR
 			reftypeminor = FILTER_ARMOR_LIGHT
 			inv(INV_ITEM_NUM, ci) = 1
-			fixeditemenc = ENCHANT_RESISTANCE * EXT_ENCHANTMENT + SKILL_RES_MAGIC, 450, ENCHANT_RESISTANCE * EXT_ENCHANTMENT + SKILL_RES_NERVE, 200, ENCHANT_SKILL * EXT_ENCHANTMENT + SKILL_NORMAL_MAGIC_DEVICE, 250, ENCHANT_ENHANCE_BREATH, 400, ENCHANT_ATTRIBUTE * EXT_ENCHANTMENT + SKILL_ATTR_DEX, -300, ENCHANT_SUCK_MP, 120, 0
-			ibitmod ITEM_BIT_PRECIOUS, ci, 1
+			fixeditemenc = ENCHANT_RESISTANCE * EXT_ENCHANTMENT + SKILL_RES_MAGIC, 450, ENCHANT_RESISTANCE * EXT_ENCHANTMENT + SKILL_RES_NERVE, 200, ENCHANT_SKILL * EXT_ENCHANTMENT + SKILL_NORMAL_MAGIC_DEVICE, 250, 68, 400, ENCHANT_ATTRIBUTE * EXT_ENCHANTMENT + SKILL_ATTR_DEX, -300, 72, 120, 0
+			ibitmod ITEM_BIT_PRECIOUS, ci, TRUE
 			inv(INV_ITEM_IDENTIFY_LEVEL, ci) = 500
 			fixlv = FIX_QUALITY_UNIQUE
 			return
 		}
 		if ( dbmode == DBMODE_REF ) {
@@ -47188,14 +49163,14 @@
 			reftype = FILTER_ARMOR
 			return
 		}
 		if ( dbmode == DBMODE_REF_SPEC ) {
 			if ( dbspec == DBSPEC_TYPE ) {
-				return FILTER_ARMOR
+				return 16000
 			}
 			if ( dbspec == DBSPEC_TYPE_MINOR ) {
-				return FILTER_ARMOR_LIGHT
+				return 16003
 			}
 			if ( dbspec == DBSPEC_VALUE_ORG ) {
 				return 38000
 			}
 			if ( dbspec == DBSPEC_PARAM3_ORG ) {
@@ -47240,12 +49215,12 @@
 			inv(INV_ITEM_ID, ci) = ITEM_ID_RASEN
 			inv(INV_ITEM_PIC, ci) = xy2pic(27, 29)
 			reftype = FILTER_ACCESSORY_RING
 			reftypeminor = FILTER_ACCESSORY_SMALL_RING
 			inv(INV_ITEM_NUM, ci) = 1
-			fixeditemenc = ENCHANT_SKILL * EXT_ENCHANTMENT + SKILL_NORMAL_GENE_ENGINEER, 250, ENCHANT_SKILL * EXT_ENCHANTMENT + SKILL_NORMAL_HEALING, 500, ENCHANT_RESISTANCE * EXT_ENCHANTMENT + SKILL_RES_MIND, 250, ENCHANT_ENHANCE_SPELL, 200, ENCHANT_FIRE_AND_COLD, 250, 0
-			ibitmod ITEM_BIT_PRECIOUS, ci, 1
+			fixeditemenc = ENCHANT_SKILL * EXT_ENCHANTMENT + SKILL_NORMAL_GENE_ENGINEER, 250, ENCHANT_SKILL * EXT_ENCHANTMENT + SKILL_NORMAL_HEALING, 500, ENCHANT_RESISTANCE * EXT_ENCHANTMENT + SKILL_RES_MIND, 250, 34, 200, 73, 250, 0
+			ibitmod ITEM_BIT_PRECIOUS, ci, TRUE
 			inv(INV_ITEM_IDENTIFY_LEVEL, ci) = 500
 			fixlv = FIX_QUALITY_UNIQUE
 			return
 		}
 		if ( dbmode == DBMODE_REF ) {
@@ -47254,14 +49229,14 @@
 			reftype = FILTER_ACCESSORY_RING
 			return
 		}
 		if ( dbmode == DBMODE_REF_SPEC ) {
 			if ( dbspec == DBSPEC_TYPE ) {
-				return FILTER_ACCESSORY_RING
+				return 32000
 			}
 			if ( dbspec == DBSPEC_TYPE_MINOR ) {
-				return FILTER_ACCESSORY_SMALL_RING
+				return 32001
 			}
 			if ( dbspec == DBSPEC_VALUE_ORG ) {
 				return 45000
 			}
 			if ( dbspec == DBSPEC_PARAM3_ORG ) {
@@ -47310,12 +49285,12 @@
 			inv(INV_ITEM_ID, ci) = ITEM_ID_GRAVITAIL
 			inv(INV_ITEM_PIC, ci) = xy2pic(26, 29)
 			reftype = FILTER_WEAPON
 			reftypeminor = FILTER_WEAPON_CLUB
 			inv(INV_ITEM_NUM, ci) = 1
-			fixeditemenc = ENCHANT_REMOTE_BLOW, 200, ENCHANT_PROC * EXT_ENCHANTMENT + ENCHANT_PROC_GRAVITY_SPHERE, 400, ENCHANT_RESISTANCE * EXT_ENCHANTMENT + SKILL_RES_DARKNESS, 350, ENCHANT_SKILL * EXT_ENCHANTMENT + SKILL_NORMAL_WEIGHT_LIFTING, 350, ENCHANT_ATTRIBUTE * EXT_ENCHANTMENT + SKILL_ATTR_CON, 400, 0
-			ibitmod ITEM_BIT_PRECIOUS, ci, 1
+			fixeditemenc = 63, 200, ENCHANT_PROC * EXT_ENCHANTMENT + ENCHANT_PROC_GRAVITY_SPHERE, 400, ENCHANT_RESISTANCE * EXT_ENCHANTMENT + SKILL_RES_DARKNESS, 350, ENCHANT_SKILL * EXT_ENCHANTMENT + SKILL_NORMAL_WEIGHT_LIFTING, 350, ENCHANT_ATTRIBUTE * EXT_ENCHANTMENT + SKILL_ATTR_CON, 400, 0
+			ibitmod ITEM_BIT_PRECIOUS, ci, TRUE
 			inv(INV_ITEM_IDENTIFY_LEVEL, ci) = 500
 			fixlv = FIX_QUALITY_UNIQUE
 			return
 		}
 		if ( dbmode == DBMODE_REF ) {
@@ -47324,14 +49299,14 @@
 			reftype = FILTER_WEAPON
 			return
 		}
 		if ( dbmode == DBMODE_REF_SPEC ) {
 			if ( dbspec == DBSPEC_TYPE ) {
-				return FILTER_WEAPON
+				return 10000
 			}
 			if ( dbspec == DBSPEC_TYPE_MINOR ) {
-				return FILTER_WEAPON_CLUB
+				return 10004
 			}
 			if ( dbspec == DBSPEC_VALUE_ORG ) {
 				return 40000
 			}
 			if ( dbspec == DBSPEC_PARAM3_ORG ) {
@@ -47386,14 +49361,14 @@
 			reftype = FILTER_ITEM_FOOD
 			return
 		}
 		if ( dbmode == DBMODE_REF_SPEC ) {
 			if ( dbspec == DBSPEC_TYPE ) {
-				return FILTER_ITEM_FOOD
+				return 57000
 			}
 			if ( dbspec == DBSPEC_TYPE_MINOR ) {
-				return FILTER_NONE
+				return 99999
 			}
 			if ( dbspec == DBSPEC_VALUE_ORG ) {
 				return 3000
 			}
 			if ( dbspec == DBSPEC_PARAM3_ORG ) {
@@ -47448,14 +49423,14 @@
 			reftype = FILTER_ITEM_FOOD
 			return
 		}
 		if ( dbmode == DBMODE_REF_SPEC ) {
 			if ( dbspec == DBSPEC_TYPE ) {
-				return FILTER_ITEM_FOOD
+				return 57000
 			}
 			if ( dbspec == DBSPEC_TYPE_MINOR ) {
-				return FILTER_NONE
+				return 99999
 			}
 			if ( dbspec == DBSPEC_VALUE_ORG ) {
 				return 1500
 			}
 			if ( dbspec == DBSPEC_PARAM3_ORG ) {
@@ -47510,14 +49485,14 @@
 			reftype = FILTER_ITEM_FOOD
 			return
 		}
 		if ( dbmode == DBMODE_REF_SPEC ) {
 			if ( dbspec == DBSPEC_TYPE ) {
-				return FILTER_ITEM_FOOD
+				return 57000
 			}
 			if ( dbspec == DBSPEC_TYPE_MINOR ) {
-				return FILTER_NONE
+				return 99999
 			}
 			if ( dbspec == DBSPEC_VALUE_ORG ) {
 				return 1500
 			}
 			if ( dbspec == DBSPEC_PARAM3_ORG ) {
@@ -47572,14 +49547,14 @@
 			reftype = FILTER_ITEM_TOOL
 			return
 		}
 		if ( dbmode == DBMODE_REF_SPEC ) {
 			if ( dbspec == DBSPEC_TYPE ) {
-				return FILTER_ITEM_TOOL
+				return 59000
 			}
 			if ( dbspec == DBSPEC_TYPE_MINOR ) {
-				return FILTER_NONE
+				return 99999
 			}
 			if ( dbspec == DBSPEC_VALUE_ORG ) {
 				return 15000
 			}
 			if ( dbspec == DBSPEC_PARAM3_ORG ) {
@@ -47636,14 +49611,14 @@
 			reftype = FILTER_CONTAINER
 			return
 		}
 		if ( dbmode == DBMODE_REF_SPEC ) {
 			if ( dbspec == DBSPEC_TYPE ) {
-				return FILTER_CONTAINER
+				return 72000
 			}
 			if ( dbspec == DBSPEC_TYPE_MINOR ) {
-				return FILTER_NONE
+				return 99999
 			}
 			if ( dbspec == DBSPEC_VALUE_ORG ) {
 				return 30
 			}
 			if ( dbspec == DBSPEC_PARAM3_ORG ) {
@@ -47698,14 +49673,14 @@
 			reftype = FILTER_ITEM_FOOD
 			return
 		}
 		if ( dbmode == DBMODE_REF_SPEC ) {
 			if ( dbspec == DBSPEC_TYPE ) {
-				return FILTER_ITEM_FOOD
+				return 57000
 			}
 			if ( dbspec == DBSPEC_TYPE_MINOR ) {
-				return FILTER_NONE
+				return 99999
 			}
 			if ( dbspec == DBSPEC_VALUE_ORG ) {
 				return 320
 			}
 			if ( dbspec == DBSPEC_PARAM3_ORG ) {
@@ -47760,14 +49735,14 @@
 			reftype = FILTER_ITEM_FOOD
 			return
 		}
 		if ( dbmode == DBMODE_REF_SPEC ) {
 			if ( dbspec == DBSPEC_TYPE ) {
-				return FILTER_ITEM_FOOD
+				return 57000
 			}
 			if ( dbspec == DBSPEC_TYPE_MINOR ) {
-				return FILTER_NONE
+				return 99999
 			}
 			if ( dbspec == DBSPEC_VALUE_ORG ) {
 				return 320
 			}
 			if ( dbspec == DBSPEC_PARAM3_ORG ) {
@@ -47822,14 +49797,14 @@
 			reftype = FILTER_ITEM_FOOD
 			return
 		}
 		if ( dbmode == DBMODE_REF_SPEC ) {
 			if ( dbspec == DBSPEC_TYPE ) {
-				return FILTER_ITEM_FOOD
+				return 57000
 			}
 			if ( dbspec == DBSPEC_TYPE_MINOR ) {
-				return FILTER_NONE
+				return 99999
 			}
 			if ( dbspec == DBSPEC_VALUE_ORG ) {
 				return 320
 			}
 			if ( dbspec == DBSPEC_PARAM3_ORG ) {
@@ -47877,12 +49852,12 @@
 			inv(INV_ITEM_ID, ci) = ITEM_ID_BEETLE_CYBORG
 			inv(INV_ITEM_PIC, ci) = xy2pic(20, 29)
 			reftype = FILTER_RANGE
 			reftypeminor = FILTER_RANGE_ROCK_THROW
 			inv(INV_ITEM_NUM, ci) = 1
-			fixeditemenc = ENCHANT_PROC * EXT_ENCHANTMENT + ENCHANT_PROC_RAGING_ROAR, 250, ENCHANT_PROC * EXT_ENCHANTMENT + ENCHANT_PROC_MIND_BOLT, 150, ENCHANT_ATTRIBUTE * EXT_ENCHANTMENT + SKILL_ATTR_SPD, 600, ENCHANT_RESISTANCE * EXT_ENCHANTMENT + SKILL_RES_MAGIC, 300, ENCHANT_CHARGING, 100, 0
-			ibitmod ITEM_BIT_PRECIOUS, ci, 1
+			fixeditemenc = ENCHANT_PROC * EXT_ENCHANTMENT + ENCHANT_PROC_RAGING_ROAR, 250, ENCHANT_PROC * EXT_ENCHANTMENT + ENCHANT_PROC_MIND_BOLT, 150, ENCHANT_ATTRIBUTE * EXT_ENCHANTMENT + SKILL_ATTR_SPD, 600, ENCHANT_RESISTANCE * EXT_ENCHANTMENT + SKILL_RES_MAGIC, 300, 71, 100, 0
+			ibitmod ITEM_BIT_PRECIOUS, ci, TRUE
 			inv(INV_ITEM_IDENTIFY_LEVEL, ci) = 500
 			fixlv = FIX_QUALITY_UNIQUE
 			return
 		}
 		if ( dbmode == DBMODE_REF ) {
@@ -47891,14 +49866,14 @@
 			reftype = FILTER_RANGE
 			return
 		}
 		if ( dbmode == DBMODE_REF_SPEC ) {
 			if ( dbspec == DBSPEC_TYPE ) {
-				return FILTER_RANGE
+				return 24000
 			}
 			if ( dbspec == DBSPEC_TYPE_MINOR ) {
-				return FILTER_RANGE_ROCK_THROW
+				return 24030
 			}
 			if ( dbspec == DBSPEC_VALUE_ORG ) {
 				return 20000
 			}
 			if ( dbspec == DBSPEC_PARAM3_ORG ) {
@@ -47952,14 +49927,14 @@
 			reftype = FILTER_FURNITURE
 			return
 		}
 		if ( dbmode == DBMODE_REF_SPEC ) {
 			if ( dbspec == DBSPEC_TYPE ) {
-				return FILTER_FURNITURE
+				return 60000
 			}
 			if ( dbspec == DBSPEC_TYPE_MINOR ) {
-				return FILTER_NONE
+				return 99999
 			}
 			if ( dbspec == DBSPEC_VALUE_ORG ) {
 				return 250
 			}
 			if ( dbspec == DBSPEC_PARAM3_ORG ) {
@@ -48013,14 +49988,14 @@
 			reftype = FILTER_FURNITURE
 			return
 		}
 		if ( dbmode == DBMODE_REF_SPEC ) {
 			if ( dbspec == DBSPEC_TYPE ) {
-				return FILTER_FURNITURE
+				return 60000
 			}
 			if ( dbspec == DBSPEC_TYPE_MINOR ) {
-				return FILTER_NONE
+				return 99999
 			}
 			if ( dbspec == DBSPEC_VALUE_ORG ) {
 				return 250
 			}
 			if ( dbspec == DBSPEC_PARAM3_ORG ) {
@@ -48074,14 +50049,14 @@
 			reftype = FILTER_ITEM_BOOK
 			return
 		}
 		if ( dbmode == DBMODE_REF_SPEC ) {
 			if ( dbspec == DBSPEC_TYPE ) {
-				return FILTER_ITEM_BOOK
+				return 55000
 			}
 			if ( dbspec == DBSPEC_TYPE_MINOR ) {
-				return FILTER_NONE
+				return 99999
 			}
 			if ( dbspec == DBSPEC_VALUE_ORG ) {
 				return 250
 			}
 			if ( dbspec == DBSPEC_PARAM3_ORG ) {
@@ -48132,11 +50107,11 @@
 			reftype = FILTER_ITEM_TOOL
 			reftypeminor = FILTER_NOTHING
 			inv(INV_ITEM_NUM, ci) = 1
 			fixeditemenc = 0
 			inv(INV_ITEM_EFFECT, ci) = EFFECT_YACATECTS_BANK
-			ibitmod ITEM_BIT_PERIOD, ci, 1
+			ibitmod ITEM_BIT_PERIOD, ci, TRUE
 			inv(INV_ITEM_PARAM3, ci) = 2400
 			inv(INV_ITEM_IDENTIFY_LEVEL, ci) = 0
 			return
 		}
 		if ( dbmode == DBMODE_REF ) {
@@ -48145,14 +50120,14 @@
 			reftype = FILTER_ITEM_TOOL
 			return
 		}
 		if ( dbmode == DBMODE_REF_SPEC ) {
 			if ( dbspec == DBSPEC_TYPE ) {
-				return FILTER_ITEM_TOOL
+				return 59000
 			}
 			if ( dbspec == DBSPEC_TYPE_MINOR ) {
-				return FILTER_NONE
+				return 99999
 			}
 			if ( dbspec == DBSPEC_VALUE_ORG ) {
 				return 250
 			}
 			if ( dbspec == DBSPEC_PARAM3_ORG ) {
@@ -48209,14 +50184,14 @@
 			reftype = FILTER_FURNITURE
 			return
 		}
 		if ( dbmode == DBMODE_REF_SPEC ) {
 			if ( dbspec == DBSPEC_TYPE ) {
-				return FILTER_FURNITURE
+				return 60000
 			}
 			if ( dbspec == DBSPEC_TYPE_MINOR ) {
-				return FILTER_NONE
+				return 99999
 			}
 			if ( dbspec == DBSPEC_VALUE_ORG ) {
 				return 250
 			}
 			if ( dbspec == DBSPEC_PARAM3_ORG ) {
@@ -48270,14 +50245,14 @@
 			reftype = FILTER_FURNITURE
 			return
 		}
 		if ( dbmode == DBMODE_REF_SPEC ) {
 			if ( dbspec == DBSPEC_TYPE ) {
-				return FILTER_FURNITURE
+				return 60000
 			}
 			if ( dbspec == DBSPEC_TYPE_MINOR ) {
-				return FILTER_NONE
+				return 99999
 			}
 			if ( dbspec == DBSPEC_VALUE_ORG ) {
 				return 250
 			}
 			if ( dbspec == DBSPEC_PARAM3_ORG ) {
@@ -48331,14 +50306,14 @@
 			reftype = FILTER_FURNITURE
 			return
 		}
 		if ( dbmode == DBMODE_REF_SPEC ) {
 			if ( dbspec == DBSPEC_TYPE ) {
-				return FILTER_FURNITURE
+				return 60000
 			}
 			if ( dbspec == DBSPEC_TYPE_MINOR ) {
-				return FILTER_NONE
+				return 99999
 			}
 			if ( dbspec == DBSPEC_VALUE_ORG ) {
 				return 250
 			}
 			if ( dbspec == DBSPEC_PARAM3_ORG ) {
@@ -48392,14 +50367,14 @@
 			reftype = FILTER_JUNK
 			return
 		}
 		if ( dbmode == DBMODE_REF_SPEC ) {
 			if ( dbspec == DBSPEC_TYPE ) {
-				return FILTER_JUNK
+				return 64000
 			}
 			if ( dbspec == DBSPEC_TYPE_MINOR ) {
-				return FILTER_NONE
+				return 99999
 			}
 			if ( dbspec == DBSPEC_VALUE_ORG ) {
 				return 3000
 			}
 			if ( dbspec == DBSPEC_PARAM3_ORG ) {
@@ -48447,11 +50422,11 @@
 			inv(INV_ITEM_PIC, ci) = xy2pic(12, 29)
 			reftype = FILTER_SHIELD
 			reftypeminor = FILTER_SHIELD_SMALL
 			inv(INV_ITEM_NUM, ci) = 1
 			fixeditemenc = ENCHANT_ATTRIBUTE * EXT_ENCHANTMENT + SKILL_ATTR_STR, -27550, ENCHANT_ATTRIBUTE * EXT_ENCHANTMENT + SKILL_ATTR_CON, -27550, ENCHANT_ATTRIBUTE * EXT_ENCHANTMENT + SKILL_ATTR_DEX, -27550, ENCHANT_ATTRIBUTE * EXT_ENCHANTMENT + SKILL_ATTR_PER, -27550, ENCHANT_ATTRIBUTE * EXT_ENCHANTMENT + SKILL_ATTR_LER, -27550, ENCHANT_ATTRIBUTE * EXT_ENCHANTMENT + SKILL_ATTR_WIL, -27550, ENCHANT_ATTRIBUTE * EXT_ENCHANTMENT + SKILL_ATTR_MAG, -27550, ENCHANT_ATTRIBUTE * EXT_ENCHANTMENT + SKILL_ATTR_CHA, -27550, 0
-			ibitmod ITEM_BIT_PRECIOUS, ci, 1
+			ibitmod ITEM_BIT_PRECIOUS, ci, TRUE
 			inv(INV_ITEM_IDENTIFY_LEVEL, ci) = 500
 			fixlv = FIX_QUALITY_UNIQUE
 			return
 		}
 		if ( dbmode == DBMODE_REF ) {
@@ -48460,14 +50435,14 @@
 			reftype = FILTER_SHIELD
 			return
 		}
 		if ( dbmode == DBMODE_REF_SPEC ) {
 			if ( dbspec == DBSPEC_TYPE ) {
-				return FILTER_SHIELD
+				return 14000
 			}
 			if ( dbspec == DBSPEC_TYPE_MINOR ) {
-				return FILTER_SHIELD_SMALL
+				return 14003
 			}
 			if ( dbspec == DBSPEC_VALUE_ORG ) {
 				return 50000
 			}
 			if ( dbspec == DBSPEC_PARAM3_ORG ) {
@@ -48521,14 +50496,14 @@
 			reftype = FILTER_JUNK
 			return
 		}
 		if ( dbmode == DBMODE_REF_SPEC ) {
 			if ( dbspec == DBSPEC_TYPE ) {
-				return FILTER_JUNK
+				return 64000
 			}
 			if ( dbspec == DBSPEC_TYPE_MINOR ) {
-				return FILTER_NONE
+				return 99999
 			}
 			if ( dbspec == DBSPEC_VALUE_ORG ) {
 				return 15000
 			}
 			if ( dbspec == DBSPEC_PARAM3_ORG ) {
@@ -48582,14 +50557,14 @@
 			reftype = FILTER_JUNK
 			return
 		}
 		if ( dbmode == DBMODE_REF_SPEC ) {
 			if ( dbspec == DBSPEC_TYPE ) {
-				return FILTER_JUNK
+				return 64000
 			}
 			if ( dbspec == DBSPEC_TYPE_MINOR ) {
-				return FILTER_NONE
+				return 99999
 			}
 			if ( dbspec == DBSPEC_VALUE_ORG ) {
 				return 6000
 			}
 			if ( dbspec == DBSPEC_PARAM3_ORG ) {
@@ -48643,14 +50618,14 @@
 			reftype = FILTER_JUNK
 			return
 		}
 		if ( dbmode == DBMODE_REF_SPEC ) {
 			if ( dbspec == DBSPEC_TYPE ) {
-				return FILTER_JUNK
+				return 64000
 			}
 			if ( dbspec == DBSPEC_TYPE_MINOR ) {
-				return FILTER_NONE
+				return 99999
 			}
 			if ( dbspec == DBSPEC_VALUE_ORG ) {
 				return 15000
 			}
 			if ( dbspec == DBSPEC_PARAM3_ORG ) {
@@ -48704,14 +50679,14 @@
 			reftype = FILTER_JUNK
 			return
 		}
 		if ( dbmode == DBMODE_REF_SPEC ) {
 			if ( dbspec == DBSPEC_TYPE ) {
-				return FILTER_JUNK
+				return 64000
 			}
 			if ( dbspec == DBSPEC_TYPE_MINOR ) {
-				return FILTER_NONE
+				return 99999
 			}
 			if ( dbspec == DBSPEC_VALUE_ORG ) {
 				return 6000
 			}
 			if ( dbspec == DBSPEC_PARAM3_ORG ) {
@@ -48765,14 +50740,14 @@
 			reftype = FILTER_JUNK
 			return
 		}
 		if ( dbmode == DBMODE_REF_SPEC ) {
 			if ( dbspec == DBSPEC_TYPE ) {
-				return FILTER_JUNK
+				return 64000
 			}
 			if ( dbspec == DBSPEC_TYPE_MINOR ) {
-				return FILTER_NONE
+				return 99999
 			}
 			if ( dbspec == DBSPEC_VALUE_ORG ) {
 				return 15000
 			}
 			if ( dbspec == DBSPEC_PARAM3_ORG ) {
@@ -48826,14 +50801,14 @@
 			reftype = FILTER_JUNK
 			return
 		}
 		if ( dbmode == DBMODE_REF_SPEC ) {
 			if ( dbspec == DBSPEC_TYPE ) {
-				return FILTER_JUNK
+				return 64000
 			}
 			if ( dbspec == DBSPEC_TYPE_MINOR ) {
-				return FILTER_NONE
+				return 99999
 			}
 			if ( dbspec == DBSPEC_VALUE_ORG ) {
 				return 6000
 			}
 			if ( dbspec == DBSPEC_PARAM3_ORG ) {
@@ -48887,14 +50862,14 @@
 			reftype = FILTER_ITEM_SCROLL
 			return
 		}
 		if ( dbmode == DBMODE_REF_SPEC ) {
 			if ( dbspec == DBSPEC_TYPE ) {
-				return FILTER_ITEM_SCROLL
+				return 53000
 			}
 			if ( dbspec == DBSPEC_TYPE_MINOR ) {
-				return FILTER_NONE
+				return 99999
 			}
 			if ( dbspec == DBSPEC_VALUE_ORG ) {
 				return 3000
 			}
 			if ( dbspec == DBSPEC_PARAM3_ORG ) {
@@ -48948,14 +50923,14 @@
 			reftype = FILTER_ITEM_SCROLL
 			return
 		}
 		if ( dbmode == DBMODE_REF_SPEC ) {
 			if ( dbspec == DBSPEC_TYPE ) {
-				return FILTER_ITEM_SCROLL
+				return 53000
 			}
 			if ( dbspec == DBSPEC_TYPE_MINOR ) {
-				return FILTER_NONE
+				return 99999
 			}
 			if ( dbspec == DBSPEC_VALUE_ORG ) {
 				return 3000
 			}
 			if ( dbspec == DBSPEC_PARAM3_ORG ) {
@@ -48999,11 +50974,11 @@
 			reftype = FILTER_ITEM_TOOL
 			reftypeminor = FILTER_NOTHING
 			inv(INV_ITEM_NUM, ci) = 1
 			fixeditemenc = 0
 			inv(INV_ITEM_EFFECT, ci) = EFFECT_SEPPUKU
-			ibitmod ITEM_BIT_PRECIOUS, ci, 1
+			ibitmod ITEM_BIT_PRECIOUS, ci, TRUE
 			inv(INV_ITEM_IDENTIFY_LEVEL, ci) = 0
 			fixlv = FIX_QUALITY_UNIQUE
 			return
 		}
 		if ( dbmode == DBMODE_REF ) {
@@ -49012,14 +50987,14 @@
 			reftype = FILTER_ITEM_TOOL
 			return
 		}
 		if ( dbmode == DBMODE_REF_SPEC ) {
 			if ( dbspec == DBSPEC_TYPE ) {
-				return FILTER_ITEM_TOOL
+				return 59000
 			}
 			if ( dbspec == DBSPEC_TYPE_MINOR ) {
-				return FILTER_NONE
+				return 99999
 			}
 			if ( dbspec == DBSPEC_VALUE_ORG ) {
 				return 28000
 			}
 			if ( dbspec == DBSPEC_PARAM3_ORG ) {
@@ -49077,14 +51052,14 @@
 			reftype = FILTER_ITEM_FOOD
 			return
 		}
 		if ( dbmode == DBMODE_REF_SPEC ) {
 			if ( dbspec == DBSPEC_TYPE ) {
-				return FILTER_ITEM_FOOD
+				return 57000
 			}
 			if ( dbspec == DBSPEC_TYPE_MINOR ) {
-				return FILTER_NONE
+				return 99999
 			}
 			if ( dbspec == DBSPEC_VALUE_ORG ) {
 				return 1500
 			}
 			if ( dbspec == DBSPEC_PARAM3_ORG ) {
@@ -49139,14 +51114,14 @@
 			reftype = FILTER_ITEM_FOOD
 			return
 		}
 		if ( dbmode == DBMODE_REF_SPEC ) {
 			if ( dbspec == DBSPEC_TYPE ) {
-				return FILTER_ITEM_FOOD
+				return 57000
 			}
 			if ( dbspec == DBSPEC_TYPE_MINOR ) {
-				return FILTER_NONE
+				return 99999
 			}
 			if ( dbspec == DBSPEC_VALUE_ORG ) {
 				return 1500
 			}
 			if ( dbspec == DBSPEC_PARAM3_ORG ) {
@@ -49201,14 +51176,14 @@
 			reftype = FILTER_ITEM_FOOD
 			return
 		}
 		if ( dbmode == DBMODE_REF_SPEC ) {
 			if ( dbspec == DBSPEC_TYPE ) {
-				return FILTER_ITEM_FOOD
+				return 57000
 			}
 			if ( dbspec == DBSPEC_TYPE_MINOR ) {
-				return FILTER_NONE
+				return 99999
 			}
 			if ( dbspec == DBSPEC_VALUE_ORG ) {
 				return 1500
 			}
 			if ( dbspec == DBSPEC_PARAM3_ORG ) {
@@ -49263,14 +51238,14 @@
 			reftype = FILTER_ITEM_FOOD
 			return
 		}
 		if ( dbmode == DBMODE_REF_SPEC ) {
 			if ( dbspec == DBSPEC_TYPE ) {
-				return FILTER_ITEM_FOOD
+				return 57000
 			}
 			if ( dbspec == DBSPEC_TYPE_MINOR ) {
-				return FILTER_NONE
+				return 99999
 			}
 			if ( dbspec == DBSPEC_VALUE_ORG ) {
 				return 400
 			}
 			if ( dbspec == DBSPEC_PARAM3_ORG ) {
@@ -49324,14 +51299,14 @@
 			reftype = FILTER_ITEM_POTION
 			return
 		}
 		if ( dbmode == DBMODE_REF_SPEC ) {
 			if ( dbspec == DBSPEC_TYPE ) {
-				return FILTER_ITEM_POTION
+				return 52000
 			}
 			if ( dbspec == DBSPEC_TYPE_MINOR ) {
-				return FILTER_NONE
+				return 99999
 			}
 			if ( dbspec == DBSPEC_VALUE_ORG ) {
 				return 21000
 			}
 			if ( dbspec == DBSPEC_PARAM3_ORG ) {
@@ -49394,14 +51369,14 @@
 			reftype = FILTER_ITEM_POTION
 			return
 		}
 		if ( dbmode == DBMODE_REF_SPEC ) {
 			if ( dbspec == DBSPEC_TYPE ) {
-				return FILTER_ITEM_POTION
+				return 52000
 			}
 			if ( dbspec == DBSPEC_TYPE_MINOR ) {
-				return FILTER_NONE
+				return 99999
 			}
 			if ( dbspec == DBSPEC_VALUE_ORG ) {
 				return 450
 			}
 			if ( dbspec == DBSPEC_PARAM3_ORG ) {
@@ -49454,26 +51429,26 @@
 			reftype = FILTER_ITEM_SPELLBOOK
 			reftypeminor = FILTER_NOTHING
 			inv(INV_ITEM_NUM, ci) = 1
 			fixeditemenc = 0
 			inv(INV_ITEM_IDENTIFY_LEVEL, ci) = 0
-			inv(INV_ITEM_CHARGE, ci) = 5 + rnd(5) - rnd(5)
-			ibitmod ITEM_BIT_CHARGE_ITEM, ci, 1
+			inv((9 /*!!!@[INV_ITEM_AMMO @@@ INV_ITEM_CHARGE @@@ INV_ITEM_CLIENT @@@ INV_ITEM_FILE @@@ INV_ITEM_NEXT_PERIOD]@!!! */), ci) = 5 + rnd(5) - rnd(5)
+			ibitmod ITEM_BIT_CHARGE_ITEM, ci, TRUE
 			return
 		}
 		if ( dbmode == DBMODE_REF ) {
 			ichargelevel = 5
 			infilterref = ""
 			reftype = FILTER_ITEM_SPELLBOOK
 			return
 		}
 		if ( dbmode == DBMODE_REF_SPEC ) {
 			if ( dbspec == DBSPEC_TYPE ) {
-				return FILTER_ITEM_SPELLBOOK
+				return 54000
 			}
 			if ( dbspec == DBSPEC_TYPE_MINOR ) {
-				return FILTER_NONE
+				return 99999
 			}
 			if ( dbspec == DBSPEC_VALUE_ORG ) {
 				return 1300
 			}
 			if ( dbspec == DBSPEC_PARAM3_ORG ) {
@@ -49529,12 +51504,12 @@
 			inv(INV_ITEM_ID, ci) = ITEM_ID_ASSAULT_GOLD
 			inv(INV_ITEM_PIC, ci) = xy2pic(29, 31)
 			reftype = FILTER_CLOAK
 			reftypeminor = FILTER_CLOAK_MEDIUM
 			inv(INV_ITEM_NUM, ci) = 1
-			fixeditemenc = ENCHANT_FLOAT, 100, ENCHANT_RESISTANCE * EXT_ENCHANTMENT + SKILL_RES_DARKNESS, 650, ENCHANT_PROXIMITY_ASSIST, 250, ENCHANT_SKILL * EXT_ENCHANTMENT + SKILL_NORMAL_FAITH, 300, ENCHANT_RES_FEAR, 100, 0
-			ibitmod ITEM_BIT_PRECIOUS, ci, 1
+			fixeditemenc = 32, 100, ENCHANT_RESISTANCE * EXT_ENCHANTMENT + SKILL_RES_DARKNESS, 650, 66, 250, ENCHANT_SKILL * EXT_ENCHANTMENT + SKILL_NORMAL_FAITH, 300, 26, 100, 0
+			ibitmod ITEM_BIT_PRECIOUS, ci, TRUE
 			inv(INV_ITEM_IDENTIFY_LEVEL, ci) = 500
 			fixlv = FIX_QUALITY_UNIQUE
 			return
 		}
 		if ( dbmode == DBMODE_REF ) {
@@ -49543,14 +51518,14 @@
 			reftype = FILTER_CLOAK
 			return
 		}
 		if ( dbmode == DBMODE_REF_SPEC ) {
 			if ( dbspec == DBSPEC_TYPE ) {
-				return FILTER_CLOAK
+				return 20000
 			}
 			if ( dbspec == DBSPEC_TYPE_MINOR ) {
-				return FILTER_CLOAK_MEDIUM
+				return 20001
 			}
 			if ( dbspec == DBSPEC_VALUE_ORG ) {
 				return 30000
 			}
 			if ( dbspec == DBSPEC_PARAM3_ORG ) {
@@ -49605,14 +51580,14 @@
 			reftype = FILTER_ITEM_FOOD
 			return
 		}
 		if ( dbmode == DBMODE_REF_SPEC ) {
 			if ( dbspec == DBSPEC_TYPE ) {
-				return FILTER_ITEM_FOOD
+				return 57000
 			}
 			if ( dbspec == DBSPEC_TYPE_MINOR ) {
-				return FILTER_NONE
+				return 99999
 			}
 			if ( dbspec == DBSPEC_VALUE_ORG ) {
 				return 2400
 			}
 			if ( dbspec == DBSPEC_PARAM3_ORG ) {
@@ -49667,14 +51642,14 @@
 			reftype = FILTER_ITEM_FOOD
 			return
 		}
 		if ( dbmode == DBMODE_REF_SPEC ) {
 			if ( dbspec == DBSPEC_TYPE ) {
-				return FILTER_ITEM_FOOD
+				return 57000
 			}
 			if ( dbspec == DBSPEC_TYPE_MINOR ) {
-				return FILTER_NONE
+				return 99999
 			}
 			if ( dbspec == DBSPEC_VALUE_ORG ) {
 				return 600
 			}
 			if ( dbspec == DBSPEC_PARAM3_ORG ) {
@@ -49729,14 +51704,14 @@
 			reftype = FILTER_ITEM_FOOD
 			return
 		}
 		if ( dbmode == DBMODE_REF_SPEC ) {
 			if ( dbspec == DBSPEC_TYPE ) {
-				return FILTER_ITEM_FOOD
+				return 57000
 			}
 			if ( dbspec == DBSPEC_TYPE_MINOR ) {
-				return FILTER_NONE
+				return 99999
 			}
 			if ( dbspec == DBSPEC_VALUE_ORG ) {
 				return 1200
 			}
 			if ( dbspec == DBSPEC_PARAM3_ORG ) {
@@ -49791,14 +51766,14 @@
 			reftype = FILTER_ITEM_FOOD
 			return
 		}
 		if ( dbmode == DBMODE_REF_SPEC ) {
 			if ( dbspec == DBSPEC_TYPE ) {
-				return FILTER_ITEM_FOOD
+				return 57000
 			}
 			if ( dbspec == DBSPEC_TYPE_MINOR ) {
-				return FILTER_NONE
+				return 99999
 			}
 			if ( dbspec == DBSPEC_VALUE_ORG ) {
 				return 210
 			}
 			if ( dbspec == DBSPEC_PARAM3_ORG ) {
@@ -49852,14 +51827,14 @@
 			reftype = FILTER_ITEM_POTION
 			return
 		}
 		if ( dbmode == DBMODE_REF_SPEC ) {
 			if ( dbspec == DBSPEC_TYPE ) {
-				return FILTER_ITEM_POTION
+				return 52000
 			}
 			if ( dbspec == DBSPEC_TYPE_MINOR ) {
-				return FILTER_NONE
+				return 99999
 			}
 			if ( dbspec == DBSPEC_VALUE_ORG ) {
 				return 300
 			}
 			if ( dbspec == DBSPEC_PARAM3_ORG ) {
@@ -49922,14 +51897,14 @@
 			reftype = FILTER_ITEM_POTION
 			return
 		}
 		if ( dbmode == DBMODE_REF_SPEC ) {
 			if ( dbspec == DBSPEC_TYPE ) {
-				return FILTER_ITEM_POTION
+				return 52000
 			}
 			if ( dbspec == DBSPEC_TYPE_MINOR ) {
-				return FILTER_NONE
+				return 99999
 			}
 			if ( dbspec == DBSPEC_VALUE_ORG ) {
 				return 300
 			}
 			if ( dbspec == DBSPEC_PARAM3_ORG ) {
@@ -49982,12 +51957,12 @@
 			reftype = FILTER_ITEM_TOOL
 			reftypeminor = FILTER_NOTHING
 			inv(INV_ITEM_NUM, ci) = 1
 			fixeditemenc = 0
 			inv(INV_ITEM_EFFECT, ci) = EFFECT_HEART_OF_TWILIGHT
-			ibitmod ITEM_BIT_PRECIOUS, ci, 1
-			ibitmod ITEM_BIT_PERIOD, ci, 1
+			ibitmod ITEM_BIT_PRECIOUS, ci, TRUE
+			ibitmod ITEM_BIT_PERIOD, ci, TRUE
 			inv(INV_ITEM_PARAM3, ci) = 12
 			inv(INV_ITEM_IDENTIFY_LEVEL, ci) = 0
 			fixlv = FIX_QUALITY_UNIQUE
 			return
 		}
@@ -49997,14 +51972,14 @@
 			reftype = FILTER_ITEM_TOOL
 			return
 		}
 		if ( dbmode == DBMODE_REF_SPEC ) {
 			if ( dbspec == DBSPEC_TYPE ) {
-				return FILTER_ITEM_TOOL
+				return 59000
 			}
 			if ( dbspec == DBSPEC_TYPE_MINOR ) {
-				return FILTER_NONE
+				return 99999
 			}
 			if ( dbspec == DBSPEC_VALUE_ORG ) {
 				return 50000
 			}
 			if ( dbspec == DBSPEC_PARAM3_ORG ) {
@@ -50052,11 +52027,11 @@
 			inv(INV_ITEM_PIC, ci) = xy2pic(26, 31)
 			reftype = FILTER_SHIELD
 			reftypeminor = FILTER_SHIELD_SMALL
 			inv(INV_ITEM_NUM, ci) = 1
 			fixeditemenc = ENCHANT_RESISTANCE * EXT_ENCHANTMENT + SKILL_RES_FIRE, 300, ENCHANT_ATTRIBUTE * EXT_ENCHANTMENT + SKILL_ATTR_LER, 300, 0
-			ibitmod ITEM_BIT_PRECIOUS, ci, 1
+			ibitmod ITEM_BIT_PRECIOUS, ci, TRUE
 			inv(INV_ITEM_IDENTIFY_LEVEL, ci) = 500
 			fixlv = FIX_QUALITY_UNIQUE
 			return
 		}
 		if ( dbmode == DBMODE_REF ) {
@@ -50065,14 +52040,14 @@
 			reftype = FILTER_SHIELD
 			return
 		}
 		if ( dbmode == DBMODE_REF_SPEC ) {
 			if ( dbspec == DBSPEC_TYPE ) {
-				return FILTER_SHIELD
+				return 14000
 			}
 			if ( dbspec == DBSPEC_TYPE_MINOR ) {
-				return FILTER_SHIELD_SMALL
+				return 14003
 			}
 			if ( dbspec == DBSPEC_VALUE_ORG ) {
 				return 10000
 			}
 			if ( dbspec == DBSPEC_PARAM3_ORG ) {
@@ -50127,14 +52102,14 @@
 			reftype = FILTER_ITEM_TOOL
 			return
 		}
 		if ( dbmode == DBMODE_REF_SPEC ) {
 			if ( dbspec == DBSPEC_TYPE ) {
-				return FILTER_ITEM_TOOL
+				return 59000
 			}
 			if ( dbspec == DBSPEC_TYPE_MINOR ) {
-				return FILTER_NONE
+				return 99999
 			}
 			if ( dbspec == DBSPEC_VALUE_ORG ) {
 				return 19000
 			}
 			if ( dbspec == DBSPEC_PARAM3_ORG ) {
@@ -50191,14 +52166,14 @@
 			reftype = FILTER_JUNK
 			return
 		}
 		if ( dbmode == DBMODE_REF_SPEC ) {
 			if ( dbspec == DBSPEC_TYPE ) {
-				return FILTER_JUNK
+				return 64000
 			}
 			if ( dbspec == DBSPEC_TYPE_MINOR ) {
-				return FILTER_NONE
+				return 99999
 			}
 			if ( dbspec == DBSPEC_VALUE_ORG ) {
 				return 27000
 			}
 			if ( dbspec == DBSPEC_PARAM3_ORG ) {
@@ -50252,14 +52227,14 @@
 			reftype = FILTER_JUNK
 			return
 		}
 		if ( dbmode == DBMODE_REF_SPEC ) {
 			if ( dbspec == DBSPEC_TYPE ) {
-				return FILTER_JUNK
+				return 64000
 			}
 			if ( dbspec == DBSPEC_TYPE_MINOR ) {
-				return FILTER_NONE
+				return 99999
 			}
 			if ( dbspec == DBSPEC_VALUE_ORG ) {
 				return 7000
 			}
 			if ( dbspec == DBSPEC_PARAM3_ORG ) {
@@ -50307,12 +52282,12 @@
 			inv(INV_ITEM_ID, ci) = ITEM_ID_YOHUALLI_TEZCATL
 			inv(INV_ITEM_PIC, ci) = xy2pic(10, 29)
 			reftype = FILTER_SHIELD
 			reftypeminor = FILTER_SHIELD_SMALL
 			inv(INV_ITEM_NUM, ci) = 1
-			fixeditemenc = ENCHANT_SKILL * EXT_ENCHANTMENT + SKILL_NORMAL_GREATER_EVASION, 300, ENCHANT_RES_BLIND, 100, ENCHANT_RESISTANCE * EXT_ENCHANTMENT + SKILL_RES_CHAOS, 300, ENCHANT_RESISTANCE * EXT_ENCHANTMENT + SKILL_RES_MAGIC, 300, ENCHANT_REFLECT_MAGIC, 300, ENCHANT_DEC_ENEMY_CRIT_CHANCE, 300, 0
-			ibitmod ITEM_BIT_PRECIOUS, ci, 1
+			fixeditemenc = ENCHANT_SKILL * EXT_ENCHANTMENT + SKILL_NORMAL_GREATER_EVASION, 300, 23, 100, ENCHANT_RESISTANCE * EXT_ENCHANTMENT + SKILL_RES_CHAOS, 300, ENCHANT_RESISTANCE * EXT_ENCHANTMENT + SKILL_RES_MAGIC, 300, 62, 300, 64, 300, 0
+			ibitmod ITEM_BIT_PRECIOUS, ci, TRUE
 			inv(INV_ITEM_IDENTIFY_LEVEL, ci) = 500
 			fixlv = FIX_QUALITY_UNIQUE
 			return
 		}
 		if ( dbmode == DBMODE_REF ) {
@@ -50321,14 +52296,14 @@
 			reftype = FILTER_SHIELD
 			return
 		}
 		if ( dbmode == DBMODE_REF_SPEC ) {
 			if ( dbspec == DBSPEC_TYPE ) {
-				return FILTER_SHIELD
+				return 14000
 			}
 			if ( dbspec == DBSPEC_TYPE_MINOR ) {
-				return FILTER_SHIELD_SMALL
+				return 14003
 			}
 			if ( dbspec == DBSPEC_VALUE_ORG ) {
 				return 35000
 			}
 			if ( dbspec == DBSPEC_PARAM3_ORG ) {
@@ -50383,14 +52358,14 @@
 			reftype = FILTER_ITEM_TOOL
 			return
 		}
 		if ( dbmode == DBMODE_REF_SPEC ) {
 			if ( dbspec == DBSPEC_TYPE ) {
-				return FILTER_ITEM_TOOL
+				return 59000
 			}
 			if ( dbspec == DBSPEC_TYPE_MINOR ) {
-				return FILTER_NONE
+				return 99999
 			}
 			if ( dbspec == DBSPEC_VALUE_ORG ) {
 				return 21000
 			}
 			if ( dbspec == DBSPEC_PARAM3_ORG ) {
@@ -50448,14 +52423,14 @@
 			reftype = FILTER_FURNITURE
 			return
 		}
 		if ( dbmode == DBMODE_REF_SPEC ) {
 			if ( dbspec == DBSPEC_TYPE ) {
-				return FILTER_FURNITURE
+				return 60000
 			}
 			if ( dbspec == DBSPEC_TYPE_MINOR ) {
-				return FILTER_JUNK
+				return 64000
 			}
 			if ( dbspec == DBSPEC_VALUE_ORG ) {
 				return 2700
 			}
 			if ( dbspec == DBSPEC_PARAM3_ORG ) {
@@ -50510,14 +52485,14 @@
 			reftype = FILTER_ITEM_TOOL
 			return
 		}
 		if ( dbmode == DBMODE_REF_SPEC ) {
 			if ( dbspec == DBSPEC_TYPE ) {
-				return FILTER_ITEM_TOOL
+				return 59000
 			}
 			if ( dbspec == DBSPEC_TYPE_MINOR ) {
-				return FILTER_NONE
+				return 99999
 			}
 			if ( dbspec == DBSPEC_VALUE_ORG ) {
 				return 12000
 			}
 			if ( dbspec == DBSPEC_PARAM3_ORG ) {
@@ -50574,14 +52549,14 @@
 			reftype = FILTER_JUNK
 			return
 		}
 		if ( dbmode == DBMODE_REF_SPEC ) {
 			if ( dbspec == DBSPEC_TYPE ) {
-				return FILTER_JUNK
+				return 64000
 			}
 			if ( dbspec == DBSPEC_TYPE_MINOR ) {
-				return FILTER_NONE
+				return 99999
 			}
 			if ( dbspec == DBSPEC_VALUE_ORG ) {
 				return 9000
 			}
 			if ( dbspec == DBSPEC_PARAM3_ORG ) {
@@ -50629,12 +52604,12 @@
 			inv(INV_ITEM_ID, ci) = ITEM_ID_GULIWELZEN
 			inv(INV_ITEM_PIC, ci) = xy2pic(11, 31)
 			reftype = FILTER_WEAPON
 			reftypeminor = FILTER_WEAPON_LARGE_AXE
 			inv(INV_ITEM_NUM, ci) = 1
-			fixeditemenc = ENCHANT_PROC * EXT_ENCHANTMENT + ENCHANT_PROC_SHINING_WAVE, 400, ENCHANT_ENHANCE_SPELL, 400, ENCHANT_ELEMENTAL_DMG * EXT_ENCHANTMENT + SKILL_RES_COLD, 300, ENCHANT_RESISTANCE * EXT_ENCHANTMENT + SKILL_RES_CHAOS, 300, ENCHANT_SKILL * EXT_ENCHANTMENT + SKILL_NORMAL_TACTICS, 300, ENCHANT_SKILL * EXT_ENCHANTMENT + SKILL_NORMAL_CASTING, 300, 0
-			ibitmod ITEM_BIT_PRECIOUS, ci, 1
+			fixeditemenc = ENCHANT_PROC * EXT_ENCHANTMENT + ENCHANT_PROC_SHINING_WAVE, 400, 34, 400, ENCHANT_ELEMENTAL_DMG * EXT_ENCHANTMENT + SKILL_RES_COLD, 300, ENCHANT_RESISTANCE * EXT_ENCHANTMENT + SKILL_RES_CHAOS, 300, ENCHANT_SKILL * EXT_ENCHANTMENT + SKILL_NORMAL_TACTICS, 300, ENCHANT_SKILL * EXT_ENCHANTMENT + SKILL_NORMAL_CASTING, 300, 0
+			ibitmod ITEM_BIT_PRECIOUS, ci, TRUE
 			inv(INV_ITEM_IDENTIFY_LEVEL, ci) = 500
 			fixlv = FIX_QUALITY_UNIQUE
 			return
 		}
 		if ( dbmode == DBMODE_REF ) {
@@ -50643,14 +52618,14 @@
 			reftype = FILTER_WEAPON
 			return
 		}
 		if ( dbmode == DBMODE_REF_SPEC ) {
 			if ( dbspec == DBSPEC_TYPE ) {
-				return FILTER_WEAPON
+				return 10000
 			}
 			if ( dbspec == DBSPEC_TYPE_MINOR ) {
-				return FILTER_WEAPON_LARGE_AXE
+				return 10010
 			}
 			if ( dbspec == DBSPEC_VALUE_ORG ) {
 				return 70000
 			}
 			if ( dbspec == DBSPEC_PARAM3_ORG ) {
@@ -50705,14 +52680,14 @@
 			reftype = FILTER_ITEM_FOOD
 			return
 		}
 		if ( dbmode == DBMODE_REF_SPEC ) {
 			if ( dbspec == DBSPEC_TYPE ) {
-				return FILTER_ITEM_FOOD
+				return 57000
 			}
 			if ( dbspec == DBSPEC_TYPE_MINOR ) {
-				return FILTER_NONE
+				return 99999
 			}
 			if ( dbspec == DBSPEC_VALUE_ORG ) {
 				return 180
 			}
 			if ( dbspec == DBSPEC_PARAM3_ORG ) {
@@ -50767,14 +52742,14 @@
 			reftype = FILTER_ITEM_FOOD
 			return
 		}
 		if ( dbmode == DBMODE_REF_SPEC ) {
 			if ( dbspec == DBSPEC_TYPE ) {
-				return FILTER_ITEM_FOOD
+				return 57000
 			}
 			if ( dbspec == DBSPEC_TYPE_MINOR ) {
-				return FILTER_NONE
+				return 99999
 			}
 			if ( dbspec == DBSPEC_VALUE_ORG ) {
 				return 210
 			}
 			if ( dbspec == DBSPEC_PARAM3_ORG ) {
@@ -50829,14 +52804,14 @@
 			reftype = FILTER_ITEM_FOOD
 			return
 		}
 		if ( dbmode == DBMODE_REF_SPEC ) {
 			if ( dbspec == DBSPEC_TYPE ) {
-				return FILTER_ITEM_FOOD
+				return 57000
 			}
 			if ( dbspec == DBSPEC_TYPE_MINOR ) {
-				return FILTER_NONE
+				return 99999
 			}
 			if ( dbspec == DBSPEC_VALUE_ORG ) {
 				return 120
 			}
 			if ( dbspec == DBSPEC_PARAM3_ORG ) {
@@ -50891,14 +52866,14 @@
 			reftype = FILTER_ITEM_FOOD
 			return
 		}
 		if ( dbmode == DBMODE_REF_SPEC ) {
 			if ( dbspec == DBSPEC_TYPE ) {
-				return FILTER_ITEM_FOOD
+				return 57000
 			}
 			if ( dbspec == DBSPEC_TYPE_MINOR ) {
-				return FILTER_NONE
+				return 99999
 			}
 			if ( dbspec == DBSPEC_VALUE_ORG ) {
 				return 150
 			}
 			if ( dbspec == DBSPEC_PARAM3_ORG ) {
@@ -50954,14 +52929,14 @@
 			reftype = FILTER_ITEM_FOOD
 			return
 		}
 		if ( dbmode == DBMODE_REF_SPEC ) {
 			if ( dbspec == DBSPEC_TYPE ) {
-				return FILTER_ITEM_FOOD
+				return 57000
 			}
 			if ( dbspec == DBSPEC_TYPE_MINOR ) {
-				return FILTER_NONE
+				return 99999
 			}
 			if ( dbspec == DBSPEC_VALUE_ORG ) {
 				return 100
 			}
 			if ( dbspec == DBSPEC_PARAM3_ORG ) {
@@ -51020,14 +52995,14 @@
 			reftype = FILTER_ITEM_FOOD
 			return
 		}
 		if ( dbmode == DBMODE_REF_SPEC ) {
 			if ( dbspec == DBSPEC_TYPE ) {
-				return FILTER_ITEM_FOOD
+				return 57000
 			}
 			if ( dbspec == DBSPEC_TYPE_MINOR ) {
-				return FILTER_NONE
+				return 99999
 			}
 			if ( dbspec == DBSPEC_VALUE_ORG ) {
 				return 1000
 			}
 			if ( dbspec == DBSPEC_PARAM3_ORG ) {
@@ -51075,26 +53050,26 @@
 			reftypeminor = FILTER_NOTHING
 			inv(INV_ITEM_NUM, ci) = 1
 			fixeditemenc = 0
 			inv(INV_ITEM_EFFECT, ci) = EFFECT_FIREWORK
 			inv(INV_ITEM_IDENTIFY_LEVEL, ci) = 0
-			inv(INV_ITEM_CHARGE, ci) = 5 + rnd(5) - rnd(5)
-			ibitmod ITEM_BIT_CHARGE_ITEM, ci, 1
+			inv((9 /*!!!@[INV_ITEM_AMMO @@@ INV_ITEM_CHARGE @@@ INV_ITEM_CLIENT @@@ INV_ITEM_FILE @@@ INV_ITEM_NEXT_PERIOD]@!!! */), ci) = 5 + rnd(5) - rnd(5)
+			ibitmod ITEM_BIT_CHARGE_ITEM, ci, TRUE
 			return
 		}
 		if ( dbmode == DBMODE_REF ) {
 			ichargelevel = 5
 			infilterref = ""
 			reftype = FILTER_ITEM_TOOL
 			return
 		}
 		if ( dbmode == DBMODE_REF_SPEC ) {
 			if ( dbspec == DBSPEC_TYPE ) {
-				return FILTER_ITEM_TOOL
+				return 59000
 			}
 			if ( dbspec == DBSPEC_TYPE_MINOR ) {
-				return FILTER_NONE
+				return 99999
 			}
 			if ( dbspec == DBSPEC_VALUE_ORG ) {
 				return 15000
 			}
 			if ( dbspec == DBSPEC_PARAM3_ORG ) {
@@ -51152,14 +53127,14 @@
 			reftype = FILTER_ITEM_FOOD
 			return
 		}
 		if ( dbmode == DBMODE_REF_SPEC ) {
 			if ( dbspec == DBSPEC_TYPE ) {
-				return FILTER_ITEM_FOOD
+				return 57000
 			}
 			if ( dbspec == DBSPEC_TYPE_MINOR ) {
-				return FILTER_NONE
+				return 99999
 			}
 			if ( dbspec == DBSPEC_VALUE_ORG ) {
 				return 6000
 			}
 			if ( dbspec == DBSPEC_PARAM3_ORG ) {
@@ -51207,13 +53182,13 @@
 			inv(INV_ITEM_ID, ci) = ITEM_ID_NECROMANTIS
 			inv(INV_ITEM_PIC, ci) = xy2pic(10, 31)
 			reftype = FILTER_WEAPON
 			reftypeminor = FILTER_WEAPON_SICKLE
 			inv(INV_ITEM_NUM, ci) = 1
-			fixeditemenc = ENCHANT_EAT_ROTTEN, 100, ENCHANT_RESISTANCE * EXT_ENCHANTMENT + SKILL_RES_COLD, 550, ENCHANT_SKILL * EXT_ENCHANTMENT + SKILL_NORMAL_CONTROL_MAGIC, 450, ENCHANT_RES_BLIND, 100, ENCHANT_ATTRIBUTE * EXT_ENCHANTMENT + SKILL_ATTR_MAG, 600, ENCHANT_PROC * EXT_ENCHANTMENT + ENCHANT_PROC_DECAPITATION, 100, 0
+			fixeditemenc = 42, 100, ENCHANT_RESISTANCE * EXT_ENCHANTMENT + SKILL_RES_COLD, 550, ENCHANT_SKILL * EXT_ENCHANTMENT + SKILL_NORMAL_CONTROL_MAGIC, 450, 23, 100, ENCHANT_ATTRIBUTE * EXT_ENCHANTMENT + SKILL_ATTR_MAG, 600, ENCHANT_PROC * EXT_ENCHANTMENT + ENCHANT_PROC_DECAPITATION, 100, 0
 			inv(INV_ITEM_EFFECT, ci) = EFFECT_UNDEAD_FUSION
-			ibitmod ITEM_BIT_PRECIOUS, ci, 1
+			ibitmod ITEM_BIT_PRECIOUS, ci, TRUE
 			inv(INV_ITEM_IDENTIFY_LEVEL, ci) = 500
 			fixlv = FIX_QUALITY_UNIQUE
 			return
 		}
 		if ( dbmode == DBMODE_REF ) {
@@ -51222,14 +53197,14 @@
 			reftype = FILTER_WEAPON
 			return
 		}
 		if ( dbmode == DBMODE_REF_SPEC ) {
 			if ( dbspec == DBSPEC_TYPE ) {
-				return FILTER_WEAPON
+				return 10000
 			}
 			if ( dbspec == DBSPEC_TYPE_MINOR ) {
-				return FILTER_WEAPON_SICKLE
+				return 10011
 			}
 			if ( dbspec == DBSPEC_VALUE_ORG ) {
 				return 36000
 			}
 			if ( dbspec == DBSPEC_PARAM3_ORG ) {
@@ -51286,14 +53261,14 @@
 			reftype = FILTER_JUNK
 			return
 		}
 		if ( dbmode == DBMODE_REF_SPEC ) {
 			if ( dbspec == DBSPEC_TYPE ) {
-				return FILTER_JUNK
+				return 64000
 			}
 			if ( dbspec == DBSPEC_TYPE_MINOR ) {
-				return FILTER_NONE
+				return 99999
 			}
 			if ( dbspec == DBSPEC_VALUE_ORG ) {
 				return 1
 			}
 			if ( dbspec == DBSPEC_PARAM3_ORG ) {
@@ -51348,14 +53323,14 @@
 			reftype = FILTER_ITEM_TOOL
 			return
 		}
 		if ( dbmode == DBMODE_REF_SPEC ) {
 			if ( dbspec == DBSPEC_TYPE ) {
-				return FILTER_ITEM_TOOL
+				return 59000
 			}
 			if ( dbspec == DBSPEC_TYPE_MINOR ) {
-				return FILTER_NONE
+				return 99999
 			}
 			if ( dbspec == DBSPEC_VALUE_ORG ) {
 				return 2100
 			}
 			if ( dbspec == DBSPEC_PARAM3_ORG ) {
@@ -51413,14 +53388,14 @@
 			reftype = FILTER_ITEM_TOOL
 			return
 		}
 		if ( dbmode == DBMODE_REF_SPEC ) {
 			if ( dbspec == DBSPEC_TYPE ) {
-				return FILTER_ITEM_TOOL
+				return 59000
 			}
 			if ( dbspec == DBSPEC_TYPE_MINOR ) {
-				return FILTER_NONE
+				return 99999
 			}
 			if ( dbspec == DBSPEC_VALUE_ORG ) {
 				return 2400
 			}
 			if ( dbspec == DBSPEC_PARAM3_ORG ) {
@@ -51478,14 +53453,14 @@
 			reftype = FILTER_ITEM_TOOL
 			return
 		}
 		if ( dbmode == DBMODE_REF_SPEC ) {
 			if ( dbspec == DBSPEC_TYPE ) {
-				return FILTER_ITEM_TOOL
+				return 59000
 			}
 			if ( dbspec == DBSPEC_TYPE_MINOR ) {
-				return FILTER_NONE
+				return 99999
 			}
 			if ( dbspec == DBSPEC_VALUE_ORG ) {
 				return 3000
 			}
 			if ( dbspec == DBSPEC_PARAM3_ORG ) {
@@ -51543,14 +53518,14 @@
 			reftype = FILTER_ITEM_TOOL
 			return
 		}
 		if ( dbmode == DBMODE_REF_SPEC ) {
 			if ( dbspec == DBSPEC_TYPE ) {
-				return FILTER_ITEM_TOOL
+				return 59000
 			}
 			if ( dbspec == DBSPEC_TYPE_MINOR ) {
-				return FILTER_NONE
+				return 99999
 			}
 			if ( dbspec == DBSPEC_VALUE_ORG ) {
 				return 1500
 			}
 			if ( dbspec == DBSPEC_PARAM3_ORG ) {
@@ -51608,14 +53583,14 @@
 			reftype = FILTER_JUNK
 			return
 		}
 		if ( dbmode == DBMODE_REF_SPEC ) {
 			if ( dbspec == DBSPEC_TYPE ) {
-				return FILTER_JUNK
+				return 64000
 			}
 			if ( dbspec == DBSPEC_TYPE_MINOR ) {
-				return FILTER_NONE
+				return 99999
 			}
 			if ( dbspec == DBSPEC_VALUE_ORG ) {
 				return 1500
 			}
 			if ( dbspec == DBSPEC_PARAM3_ORG ) {
@@ -51667,11 +53642,11 @@
 			inv(INV_ITEM_PIC, ci) = xy2pic(7, 31)
 			reftype = FILTER_WEAPON
 			reftypeminor = FILTER_WEAPON_HAMMER
 			inv(INV_ITEM_NUM, ci) = 1
 			fixeditemenc = ENCHANT_ELEMENTAL_DMG * EXT_ENCHANTMENT + SKILL_RES_NETHER, 500, ENCHANT_SKILL * EXT_ENCHANTMENT + SKILL_NORMAL_TACTICS, 450, ENCHANT_RESISTANCE * EXT_ENCHANTMENT + SKILL_RES_CHAOS, 450, ENCHANT_RESISTANCE * EXT_ENCHANTMENT + SKILL_RES_DARKNESS, -150, ENCHANT_PROC * EXT_ENCHANTMENT + ENCHANT_PROC_DECAPITATION, 100, ENCHANT_PROC * EXT_ENCHANTMENT + ENCHANT_PROC_GRAVITY_SPHERE, 250, 0
-			ibitmod ITEM_BIT_PRECIOUS, ci, 1
+			ibitmod ITEM_BIT_PRECIOUS, ci, TRUE
 			inv(INV_ITEM_IDENTIFY_LEVEL, ci) = 500
 			fixlv = FIX_QUALITY_UNIQUE
 			return
 		}
 		if ( dbmode == DBMODE_REF ) {
@@ -51680,14 +53655,14 @@
 			reftype = FILTER_WEAPON
 			return
 		}
 		if ( dbmode == DBMODE_REF_SPEC ) {
 			if ( dbspec == DBSPEC_TYPE ) {
-				return FILTER_WEAPON
+				return 10000
 			}
 			if ( dbspec == DBSPEC_TYPE_MINOR ) {
-				return FILTER_WEAPON_HAMMER
+				return 10005
 			}
 			if ( dbspec == DBSPEC_VALUE_ORG ) {
 				return 30000
 			}
 			if ( dbspec == DBSPEC_PARAM3_ORG ) {
@@ -51741,14 +53716,14 @@
 			reftype = FILTER_JUNK
 			return
 		}
 		if ( dbmode == DBMODE_REF_SPEC ) {
 			if ( dbspec == DBSPEC_TYPE ) {
-				return FILTER_JUNK
+				return 64000
 			}
 			if ( dbspec == DBSPEC_TYPE_MINOR ) {
-				return FILTER_NONE
+				return 99999
 			}
 			if ( dbspec == DBSPEC_VALUE_ORG ) {
 				return 1
 			}
 			if ( dbspec == DBSPEC_PARAM3_ORG ) {
@@ -51803,14 +53778,14 @@
 			reftype = FILTER_ITEM_FOOD
 			return
 		}
 		if ( dbmode == DBMODE_REF_SPEC ) {
 			if ( dbspec == DBSPEC_TYPE ) {
-				return FILTER_ITEM_FOOD
+				return 57000
 			}
 			if ( dbspec == DBSPEC_TYPE_MINOR ) {
-				return FILTER_NONE
+				return 99999
 			}
 			if ( dbspec == DBSPEC_VALUE_ORG ) {
 				return 3600
 			}
 			if ( dbspec == DBSPEC_PARAM3_ORG ) {
@@ -51858,12 +53833,12 @@
 			inv(INV_ITEM_ID, ci) = ITEM_ID_DOKURO_MIKADUKI
 			inv(INV_ITEM_PIC, ci) = xy2pic(6, 31)
 			reftype = FILTER_RANGE
 			reftypeminor = FILTER_RANGE_SHORTBOW
 			inv(INV_ITEM_NUM, ci) = 1
-			fixeditemenc = ENCHANT_PROC * EXT_ENCHANTMENT + ENCHANT_PROC_NETHER_BREATH, 500, ENCHANT_ABSORB_STAMINA, 200, ENCHANT_RESISTANCE * EXT_ENCHANTMENT + SKILL_RES_MIND, 300, ENCHANT_RESISTANCE * EXT_ENCHANTMENT + SKILL_RES_DARKNESS, 200, ENCHANT_RES_BLIND, 100, 0
-			ibitmod ITEM_BIT_PRECIOUS, ci, 1
+			fixeditemenc = ENCHANT_PROC * EXT_ENCHANTMENT + ENCHANT_PROC_NETHER_BREATH, 500, 36, 200, ENCHANT_RESISTANCE * EXT_ENCHANTMENT + SKILL_RES_MIND, 300, ENCHANT_RESISTANCE * EXT_ENCHANTMENT + SKILL_RES_DARKNESS, 200, 23, 100, 0
+			ibitmod ITEM_BIT_PRECIOUS, ci, TRUE
 			inv(INV_ITEM_IDENTIFY_LEVEL, ci) = 500
 			fixlv = FIX_QUALITY_UNIQUE
 			return
 		}
 		if ( dbmode == DBMODE_REF ) {
@@ -51872,14 +53847,14 @@
 			reftype = FILTER_RANGE
 			return
 		}
 		if ( dbmode == DBMODE_REF_SPEC ) {
 			if ( dbspec == DBSPEC_TYPE ) {
-				return FILTER_RANGE
+				return 24000
 			}
 			if ( dbspec == DBSPEC_TYPE_MINOR ) {
-				return FILTER_RANGE_SHORTBOW
+				return 24001
 			}
 			if ( dbspec == DBSPEC_VALUE_ORG ) {
 				return 44444
 			}
 			if ( dbspec == DBSPEC_PARAM3_ORG ) {
@@ -51927,12 +53902,12 @@
 			inv(INV_ITEM_ID, ci) = ITEM_ID_HELTIARRE
 			inv(INV_ITEM_PIC, ci) = xy2pic(5, 31)
 			reftype = FILTER_RANGE
 			reftypeminor = FILTER_RANGE_SHORTBOW
 			inv(INV_ITEM_NUM, ci) = 1
-			fixeditemenc = ENCHANT_PROC * EXT_ENCHANTMENT + ENCHANT_PROC_LIGHTNING_BREATH, 300, ENCHANT_PROC * EXT_ENCHANTMENT + ENCHANT_PROC_LIGHTNING_BOLT, 300, ENCHANT_RESISTANCE * EXT_ENCHANTMENT + SKILL_RES_NERVE, -150, ENCHANT_PROXIMITY_ASSIST, 200, ENCHANT_ENHANCE_BREATH, 700, 0
-			ibitmod ITEM_BIT_PRECIOUS, ci, 1
+			fixeditemenc = ENCHANT_PROC * EXT_ENCHANTMENT + ENCHANT_PROC_LIGHTNING_BREATH, 300, ENCHANT_PROC * EXT_ENCHANTMENT + ENCHANT_PROC_LIGHTNING_BOLT, 300, ENCHANT_RESISTANCE * EXT_ENCHANTMENT + SKILL_RES_NERVE, -150, 66, 200, 68, 700, 0
+			ibitmod ITEM_BIT_PRECIOUS, ci, TRUE
 			inv(INV_ITEM_IDENTIFY_LEVEL, ci) = 500
 			fixlv = FIX_QUALITY_UNIQUE
 			return
 		}
 		if ( dbmode == DBMODE_REF ) {
@@ -51941,14 +53916,14 @@
 			reftype = FILTER_RANGE
 			return
 		}
 		if ( dbmode == DBMODE_REF_SPEC ) {
 			if ( dbspec == DBSPEC_TYPE ) {
-				return FILTER_RANGE
+				return 24000
 			}
 			if ( dbspec == DBSPEC_TYPE_MINOR ) {
-				return FILTER_RANGE_SHORTBOW
+				return 24001
 			}
 			if ( dbspec == DBSPEC_VALUE_ORG ) {
 				return 65000
 			}
 			if ( dbspec == DBSPEC_PARAM3_ORG ) {
@@ -51992,11 +53967,11 @@
 			reftype = FILTER_ITEM_TOOL
 			reftypeminor = FILTER_NOTHING
 			inv(INV_ITEM_NUM, ci) = 1
 			fixeditemenc = 0
 			inv(INV_ITEM_EFFECT, ci) = EFFECT_ELEMENTS_EYES
-			ibitmod ITEM_BIT_PRECIOUS, ci, 1
+			ibitmod ITEM_BIT_PRECIOUS, ci, TRUE
 			inv(INV_ITEM_IDENTIFY_LEVEL, ci) = 0
 			fixlv = FIX_QUALITY_UNIQUE
 			return
 		}
 		if ( dbmode == DBMODE_REF ) {
@@ -52005,14 +53980,14 @@
 			reftype = FILTER_ITEM_TOOL
 			return
 		}
 		if ( dbmode == DBMODE_REF_SPEC ) {
 			if ( dbspec == DBSPEC_TYPE ) {
-				return FILTER_ITEM_TOOL
+				return 59000
 			}
 			if ( dbspec == DBSPEC_TYPE_MINOR ) {
-				return FILTER_NONE
+				return 99999
 			}
 			if ( dbspec == DBSPEC_VALUE_ORG ) {
 				return 28000
 			}
 			if ( dbspec == DBSPEC_PARAM3_ORG ) {
@@ -52069,14 +54044,14 @@
 			reftype = FILTER_ITEM_POTION
 			return
 		}
 		if ( dbmode == DBMODE_REF_SPEC ) {
 			if ( dbspec == DBSPEC_TYPE ) {
-				return FILTER_ITEM_POTION
+				return 52000
 			}
 			if ( dbspec == DBSPEC_TYPE_MINOR ) {
-				return FILTER_NONE
+				return 99999
 			}
 			if ( dbspec == DBSPEC_VALUE_ORG ) {
 				return 500
 			}
 			if ( dbspec == DBSPEC_PARAM3_ORG ) {
@@ -52139,14 +54114,14 @@
 			reftype = FILTER_ITEM_POTION
 			return
 		}
 		if ( dbmode == DBMODE_REF_SPEC ) {
 			if ( dbspec == DBSPEC_TYPE ) {
-				return FILTER_ITEM_POTION
+				return 52000
 			}
 			if ( dbspec == DBSPEC_TYPE_MINOR ) {
-				return FILTER_NONE
+				return 99999
 			}
 			if ( dbspec == DBSPEC_VALUE_ORG ) {
 				return 3200
 			}
 			if ( dbspec == DBSPEC_PARAM3_ORG ) {
@@ -52203,12 +54178,12 @@
 			inv(INV_ITEM_ID, ci) = ITEM_ID_SASANQUA_SICKLE
 			inv(INV_ITEM_PIC, ci) = xy2pic(6, 28)
 			reftype = FILTER_WEAPON
 			reftypeminor = FILTER_WEAPON_SICKLE
 			inv(INV_ITEM_NUM, ci) = 1
-			fixeditemenc = ENCHANT_REMOTE_BLOW, 100, ENCHANT_PROC * EXT_ENCHANTMENT + ENCHANT_PROC_GRENADE, 50, ENCHANT_PROC * EXT_ENCHANTMENT + ENCHANT_PROC_CHAOS_BALL, 300, ENCHANT_PROC * EXT_ENCHANTMENT + ENCHANT_PROC_RAGING_ROAR, 500, ENCHANT_ATTRIBUTE * EXT_ENCHANTMENT + SKILL_ATTR_CHA, 550, 0
-			ibitmod ITEM_BIT_PRECIOUS, ci, 1
+			fixeditemenc = 63, 100, ENCHANT_PROC * EXT_ENCHANTMENT + ENCHANT_PROC_GRENADE, 50, ENCHANT_PROC * EXT_ENCHANTMENT + ENCHANT_PROC_CHAOS_BALL, 300, ENCHANT_PROC * EXT_ENCHANTMENT + ENCHANT_PROC_RAGING_ROAR, 500, ENCHANT_ATTRIBUTE * EXT_ENCHANTMENT + SKILL_ATTR_CHA, 550, 0
+			ibitmod ITEM_BIT_PRECIOUS, ci, TRUE
 			inv(INV_ITEM_IDENTIFY_LEVEL, ci) = 500
 			fixlv = FIX_QUALITY_UNIQUE
 			return
 		}
 		if ( dbmode == DBMODE_REF ) {
@@ -52217,14 +54192,14 @@
 			reftype = FILTER_WEAPON
 			return
 		}
 		if ( dbmode == DBMODE_REF_SPEC ) {
 			if ( dbspec == DBSPEC_TYPE ) {
-				return FILTER_WEAPON
+				return 10000
 			}
 			if ( dbspec == DBSPEC_TYPE_MINOR ) {
-				return FILTER_WEAPON_SICKLE
+				return 10011
 			}
 			if ( dbspec == DBSPEC_VALUE_ORG ) {
 				return 30000
 			}
 			if ( dbspec == DBSPEC_PARAM3_ORG ) {
@@ -52257,40 +54232,40 @@
 		}
 		return 0
 	}
 	if ( dbid == ITEM_ID_SPELLBOOK_WATER_BEAM ) {
 		if ( dbmode == DBMODE_SET_STATS | dbmode == DBMODE_SET ) {
-			inv(INV_ITEM_VALUE, ci) = 6500
+			inv(INV_ITEM_VALUE, ci) = 2800
 			inv(INV_ITEM_WEIGHT, ci) = 380
 		}
 		if ( dbmode == DBMODE_SET ) {
 			inv(INV_ITEM_ID, ci) = ITEM_ID_SPELLBOOK_WATER_BEAM
 			inv(INV_ITEM_PIC, ci) = xy2pic(0, 13)
 			reftype = FILTER_ITEM_SPELLBOOK
 			reftypeminor = FILTER_NOTHING
 			inv(INV_ITEM_NUM, ci) = 1
 			fixeditemenc = 0
 			inv(INV_ITEM_IDENTIFY_LEVEL, ci) = 0
-			inv(INV_ITEM_CHARGE, ci) = 2 + rnd(2) - rnd(2)
-			ibitmod ITEM_BIT_CHARGE_ITEM, ci, 1
+			inv((9 /*!!!@[INV_ITEM_AMMO @@@ INV_ITEM_CHARGE @@@ INV_ITEM_CLIENT @@@ INV_ITEM_FILE @@@ INV_ITEM_NEXT_PERIOD]@!!! */), ci) = 4 + rnd(4) - rnd(4)
+			ibitmod ITEM_BIT_CHARGE_ITEM, ci, TRUE
 			return
 		}
 		if ( dbmode == DBMODE_REF ) {
-			ichargelevel = 2
+			ichargelevel = 4
 			infilterref = ""
 			reftype = FILTER_ITEM_SPELLBOOK
 			return
 		}
 		if ( dbmode == DBMODE_REF_SPEC ) {
 			if ( dbspec == DBSPEC_TYPE ) {
-				return FILTER_ITEM_SPELLBOOK
+				return 54000
 			}
 			if ( dbspec == DBSPEC_TYPE_MINOR ) {
-				return FILTER_NONE
+				return 99999
 			}
 			if ( dbspec == DBSPEC_VALUE_ORG ) {
-				return 6500
+				return 2800
 			}
 			if ( dbspec == DBSPEC_PARAM3_ORG ) {
 				return
 			}
 			if ( dbspec == DBSPEC_CAN_READ ) {
@@ -52298,14 +54273,14 @@
 			}
 			if ( dbspec == DBSPEC_PCC ) {
 				return 0
 			}
 			if ( dbspec == DBSPEC_OBJ_LEVEL ) {
-				return 30
+				return 24
 			}
 			if ( dbspec == DBSPEC_RARE_LEVEL ) {
-				return 300
+				return 1000
 			}
 			return 0
 		}
 		if ( dbmode == DBMODE_ON_READ ) {
 			efid = SKILL_SPELL_WATER_BOLT
@@ -52314,13 +54289,13 @@
 			return -1
 		}
 		if ( dbmode == DBMODE_DESC ) {
 			if ( jp ) {
 				description(0) = "\t\t「ハイドロボルト」という呪文について学ぶことができる魔法書。水芸を極めたいあなたに。\n#〜本の為の本・魔法書編〜\n"
-				description(1) = "<ランク4魔法>"
+				description(1) = "<ランク5魔法>"
 				description(2) = ""
-				description(3) = "\t\t無属性の水ボルトを唱える為に必要な本。読むことができる。\n#〜鑑定報告書：＜書物＞カテゴリ〜\n"
+				description(3) = "\t\tＰＶＤＶ属性のボルトを唱える為に必要な本。読むことができる。\n#〜鑑定報告書：＜書物＞カテゴリ〜\n"
 			}
 			else {
 				description(0) = ""
 				description(1) = ""
 				description(3) = "The tome is too wet."
@@ -52340,26 +54315,26 @@
 			reftype = FILTER_ITEM_ROD
 			reftypeminor = FILTER_ITEM_ROD_DAMAGE
 			inv(INV_ITEM_NUM, ci) = 1
 			fixeditemenc = 0
 			inv(INV_ITEM_IDENTIFY_LEVEL, ci) = 0
-			inv(INV_ITEM_CHARGE, ci) = 3 + rnd(3) - rnd(3)
-			ibitmod ITEM_BIT_CHARGE_ITEM, ci, 1
+			inv((9 /*!!!@[INV_ITEM_AMMO @@@ INV_ITEM_CHARGE @@@ INV_ITEM_CLIENT @@@ INV_ITEM_FILE @@@ INV_ITEM_NEXT_PERIOD]@!!! */), ci) = 3 + rnd(3) - rnd(3)
+			ibitmod ITEM_BIT_CHARGE_ITEM, ci, TRUE
 			return
 		}
 		if ( dbmode == DBMODE_REF ) {
 			ichargelevel = 3
 			infilterref = ""
 			reftype = FILTER_ITEM_ROD
 			return
 		}
 		if ( dbmode == DBMODE_REF_SPEC ) {
 			if ( dbspec == DBSPEC_TYPE ) {
-				return FILTER_ITEM_ROD
+				return 56000
 			}
 			if ( dbspec == DBSPEC_TYPE_MINOR ) {
-				return FILTER_ITEM_ROD_DAMAGE
+				return 56002
 			}
 			if ( dbspec == DBSPEC_VALUE_ORG ) {
 				return 4800
 			}
 			if ( dbspec == DBSPEC_PARAM3_ORG ) {
@@ -52395,11 +54370,11 @@
 		if ( dbmode == DBMODE_DESC ) {
 			if ( jp ) {
 				description(0) = "\t\t特定の魔法が封じ込められた杖。今にも割れてしまいそうな儚げな宝石が取り付けられている。\n#〜魔具全典〜\n"
 				description(1) = ""
 				description(2) = ""
-				description(3) = "\t\t振ることで無属性の水範囲攻撃を発動する魔法の杖だ。\n#〜鑑定報告書：＜魔道具＞カテゴリ〜\n"
+				description(3) = "\t\t振ることでＰＶＤＶ属性の範囲攻撃を発動する魔法の杖だ。\n#〜鑑定報告書：＜魔道具＞カテゴリ〜\n"
 			}
 			else {
 				description(0) = ""
 				description(1) = ""
 				description(3) = "A clear rod."
@@ -52430,14 +54405,14 @@
 			reftype = FILTER_ITEM_TOOL
 			return
 		}
 		if ( dbmode == DBMODE_REF_SPEC ) {
 			if ( dbspec == DBSPEC_TYPE ) {
-				return FILTER_ITEM_TOOL
+				return 59000
 			}
 			if ( dbspec == DBSPEC_TYPE_MINOR ) {
-				return FILTER_NONE
+				return 99999
 			}
 			if ( dbspec == DBSPEC_VALUE_ORG ) {
 				return 18000
 			}
 			if ( dbspec == DBSPEC_PARAM3_ORG ) {
@@ -52493,26 +54468,26 @@
 			reftypeminor = FILTER_NOTHING
 			inv(INV_ITEM_NUM, ci) = 1
 			fixeditemenc = 0
 			inv(INV_ITEM_EFFECT, ci) = EFFECT_M202_SPECIAL
 			inv(INV_ITEM_IDENTIFY_LEVEL, ci) = 0
-			inv(INV_ITEM_CHARGE, ci) = 3 + rnd(3) - rnd(3)
-			ibitmod ITEM_BIT_CHARGE_ITEM, ci, 1
+			inv((9 /*!!!@[INV_ITEM_AMMO @@@ INV_ITEM_CHARGE @@@ INV_ITEM_CLIENT @@@ INV_ITEM_FILE @@@ INV_ITEM_NEXT_PERIOD]@!!! */), ci) = 3 + rnd(3) - rnd(3)
+			ibitmod ITEM_BIT_CHARGE_ITEM, ci, TRUE
 			return
 		}
 		if ( dbmode == DBMODE_REF ) {
 			ichargelevel = 3
 			infilterref = ""
 			reftype = FILTER_ITEM_TOOL
 			return
 		}
 		if ( dbmode == DBMODE_REF_SPEC ) {
 			if ( dbspec == DBSPEC_TYPE ) {
-				return FILTER_ITEM_TOOL
+				return 59000
 			}
 			if ( dbspec == DBSPEC_TYPE_MINOR ) {
-				return FILTER_NONE
+				return 99999
 			}
 			if ( dbspec == DBSPEC_VALUE_ORG ) {
 				return 15000
 			}
 			if ( dbspec == DBSPEC_PARAM3_ORG ) {
@@ -52568,26 +54543,26 @@
 			reftypeminor = FILTER_NOTHING
 			inv(INV_ITEM_NUM, ci) = 1
 			fixeditemenc = 0
 			inv(INV_ITEM_EFFECT, ci) = EFFECT_PANZERFAUST_X
 			inv(INV_ITEM_IDENTIFY_LEVEL, ci) = 0
-			inv(INV_ITEM_CHARGE, ci) = 1 + rnd(1) - rnd(1)
-			ibitmod ITEM_BIT_CHARGE_ITEM, ci, 1
+			inv((9 /*!!!@[INV_ITEM_AMMO @@@ INV_ITEM_CHARGE @@@ INV_ITEM_CLIENT @@@ INV_ITEM_FILE @@@ INV_ITEM_NEXT_PERIOD]@!!! */), ci) = 1 + rnd(1) - rnd(1)
+			ibitmod ITEM_BIT_CHARGE_ITEM, ci, TRUE
 			return
 		}
 		if ( dbmode == DBMODE_REF ) {
 			ichargelevel = 1
 			infilterref = ""
 			reftype = FILTER_ITEM_TOOL
 			return
 		}
 		if ( dbmode == DBMODE_REF_SPEC ) {
 			if ( dbspec == DBSPEC_TYPE ) {
-				return FILTER_ITEM_TOOL
+				return 59000
 			}
 			if ( dbspec == DBSPEC_TYPE_MINOR ) {
-				return FILTER_NONE
+				return 99999
 			}
 			if ( dbspec == DBSPEC_VALUE_ORG ) {
 				return 12000
 			}
 			if ( dbspec == DBSPEC_PARAM3_ORG ) {
@@ -52652,14 +54627,14 @@
 			reftype = FILTER_ITEM_TOOL
 			return
 		}
 		if ( dbmode == DBMODE_REF_SPEC ) {
 			if ( dbspec == DBSPEC_TYPE ) {
-				return FILTER_ITEM_TOOL
+				return 59000
 			}
 			if ( dbspec == DBSPEC_TYPE_MINOR ) {
-				return FILTER_NONE
+				return 99999
 			}
 			if ( dbspec == DBSPEC_VALUE_ORG ) {
 				return 1200
 			}
 			if ( dbspec == DBSPEC_PARAM3_ORG ) {
@@ -52703,26 +54678,26 @@
 			reftype = FILTER_ITEM_ROD
 			reftypeminor = FILTER_ITEM_ROD_DAMAGE
 			inv(INV_ITEM_NUM, ci) = 1
 			fixeditemenc = 0
 			inv(INV_ITEM_IDENTIFY_LEVEL, ci) = 0
-			inv(INV_ITEM_CHARGE, ci) = 10 + rnd(10) - rnd(10)
-			ibitmod ITEM_BIT_CHARGE_ITEM, ci, 1
+			inv((9 /*!!!@[INV_ITEM_AMMO @@@ INV_ITEM_CHARGE @@@ INV_ITEM_CLIENT @@@ INV_ITEM_FILE @@@ INV_ITEM_NEXT_PERIOD]@!!! */), ci) = 10 + rnd(10) - rnd(10)
+			ibitmod ITEM_BIT_CHARGE_ITEM, ci, TRUE
 			return
 		}
 		if ( dbmode == DBMODE_REF ) {
 			ichargelevel = 10
 			infilterref = ""
 			reftype = FILTER_ITEM_ROD
 			return
 		}
 		if ( dbmode == DBMODE_REF_SPEC ) {
 			if ( dbspec == DBSPEC_TYPE ) {
-				return FILTER_ITEM_ROD
+				return 56000
 			}
 			if ( dbspec == DBSPEC_TYPE_MINOR ) {
-				return FILTER_ITEM_ROD_DAMAGE
+				return 56002
 			}
 			if ( dbspec == DBSPEC_VALUE_ORG ) {
 				return 4000
 			}
 			if ( dbspec == DBSPEC_PARAM3_ORG ) {
@@ -52782,26 +54757,26 @@
 			reftype = FILTER_ITEM_ROD
 			reftypeminor = FILTER_ITEM_ROD_DAMAGE
 			inv(INV_ITEM_NUM, ci) = 1
 			fixeditemenc = 0
 			inv(INV_ITEM_IDENTIFY_LEVEL, ci) = 0
-			inv(INV_ITEM_CHARGE, ci) = 7 + rnd(7) - rnd(7)
-			ibitmod ITEM_BIT_CHARGE_ITEM, ci, 1
+			inv((9 /*!!!@[INV_ITEM_AMMO @@@ INV_ITEM_CHARGE @@@ INV_ITEM_CLIENT @@@ INV_ITEM_FILE @@@ INV_ITEM_NEXT_PERIOD]@!!! */), ci) = 7 + rnd(7) - rnd(7)
+			ibitmod ITEM_BIT_CHARGE_ITEM, ci, TRUE
 			return
 		}
 		if ( dbmode == DBMODE_REF ) {
 			ichargelevel = 7
 			infilterref = ""
 			reftype = FILTER_ITEM_ROD
 			return
 		}
 		if ( dbmode == DBMODE_REF_SPEC ) {
 			if ( dbspec == DBSPEC_TYPE ) {
-				return FILTER_ITEM_ROD
+				return 56000
 			}
 			if ( dbspec == DBSPEC_TYPE_MINOR ) {
-				return FILTER_ITEM_ROD_DAMAGE
+				return 56002
 			}
 			if ( dbspec == DBSPEC_VALUE_ORG ) {
 				return 4000
 			}
 			if ( dbspec == DBSPEC_PARAM3_ORG ) {
@@ -52864,12 +54839,12 @@
 			inv(INV_ITEM_ID, ci) = ITEM_ID_AMULET_OF_YEKUB
 			inv(INV_ITEM_PIC, ci) = xy2pic(22, 14)
 			reftype = FILTER_ACCESSORY_AMULET
 			reftypeminor = FILTER_ACCESSORY_SMALL_AMULET
 			inv(INV_ITEM_NUM, ci) = 1
-			fixeditemenc = ENCHANT_ATTRIBUTE * EXT_ENCHANTMENT + SKILL_ATTR_WIL, 1200, ENCHANT_ATTRIBUTE * EXT_ENCHANTMENT + SKILL_ATTR_MANA, 400, ENCHANT_RESISTANCE * EXT_ENCHANTMENT + SKILL_RES_MIND, 300, ENCHANT_SUSTAIN * EXT_ENCHANTMENT + SKILL_ATTR_WIL, 150, ENCHANT_RES_SLEEP, 100, 0
-			ibitmod ITEM_BIT_PRECIOUS, ci, 1
+			fixeditemenc = ENCHANT_ATTRIBUTE * EXT_ENCHANTMENT + SKILL_ATTR_WIL, 1200, ENCHANT_ATTRIBUTE * EXT_ENCHANTMENT + SKILL_ATTR_MANA, 400, ENCHANT_RESISTANCE * EXT_ENCHANTMENT + SKILL_RES_MIND, 300, ENCHANT_SUSTAIN * EXT_ENCHANTMENT + SKILL_ATTR_WIL, 150, 27, 100, 0
+			ibitmod ITEM_BIT_PRECIOUS, ci, TRUE
 			inv(INV_ITEM_IDENTIFY_LEVEL, ci) = 500
 			fixlv = FIX_QUALITY_UNIQUE
 			return
 		}
 		if ( dbmode == DBMODE_REF ) {
@@ -52878,14 +54853,14 @@
 			reftype = FILTER_ACCESSORY_AMULET
 			return
 		}
 		if ( dbmode == DBMODE_REF_SPEC ) {
 			if ( dbspec == DBSPEC_TYPE ) {
-				return FILTER_ACCESSORY_AMULET
+				return 34000
 			}
 			if ( dbspec == DBSPEC_TYPE_MINOR ) {
-				return FILTER_ACCESSORY_SMALL_AMULET
+				return 34001
 			}
 			if ( dbspec == DBSPEC_VALUE_ORG ) {
 				return 36000
 			}
 			if ( dbspec == DBSPEC_PARAM3_ORG ) {
@@ -52940,14 +54915,14 @@
 			reftype = FILTER_ITEM_BOOK
 			return
 		}
 		if ( dbmode == DBMODE_REF_SPEC ) {
 			if ( dbspec == DBSPEC_TYPE ) {
-				return FILTER_ITEM_BOOK
+				return 55000
 			}
 			if ( dbspec == DBSPEC_TYPE_MINOR ) {
-				return FILTER_NONE
+				return 99999
 			}
 			if ( dbspec == DBSPEC_VALUE_ORG ) {
 				return 100
 			}
 			if ( dbspec == DBSPEC_PARAM3_ORG ) {
@@ -53010,14 +54985,14 @@
 			reftype = FILTER_ITEM_TOOL
 			return
 		}
 		if ( dbmode == DBMODE_REF_SPEC ) {
 			if ( dbspec == DBSPEC_TYPE ) {
-				return FILTER_ITEM_TOOL
+				return 59000
 			}
 			if ( dbspec == DBSPEC_TYPE_MINOR ) {
-				return FILTER_NONE
+				return 99999
 			}
 			if ( dbspec == DBSPEC_VALUE_ORG ) {
 				return 5000
 			}
 			if ( dbspec == DBSPEC_PARAM3_ORG ) {
@@ -53075,14 +55050,14 @@
 			reftype = FILTER_ITEM_TOOL
 			return
 		}
 		if ( dbmode == DBMODE_REF_SPEC ) {
 			if ( dbspec == DBSPEC_TYPE ) {
-				return FILTER_ITEM_TOOL
+				return 59000
 			}
 			if ( dbspec == DBSPEC_TYPE_MINOR ) {
-				return FILTER_NONE
+				return 99999
 			}
 			if ( dbspec == DBSPEC_VALUE_ORG ) {
 				return 15000
 			}
 			if ( dbspec == DBSPEC_PARAM3_ORG ) {
@@ -53140,14 +55115,14 @@
 			reftype = FILTER_JUNK
 			return
 		}
 		if ( dbmode == DBMODE_REF_SPEC ) {
 			if ( dbspec == DBSPEC_TYPE ) {
-				return FILTER_JUNK
+				return 64000
 			}
 			if ( dbspec == DBSPEC_TYPE_MINOR ) {
-				return FILTER_NONE
+				return 99999
 			}
 			if ( dbspec == DBSPEC_VALUE_ORG ) {
 				return 1000
 			}
 			if ( dbspec == DBSPEC_PARAM3_ORG ) {
@@ -53197,12 +55172,12 @@
 			inv(INV_ITEM_ID, ci) = ITEM_ID_CESTUS_OF_METEORS
 			inv(INV_ITEM_PIC, ci) = xy2pic(4, 6)
 			reftype = FILTER_GLOVES
 			reftypeminor = FILTER_GLOVES_HEAVY
 			inv(INV_ITEM_NUM, ci) = 1
-			fixeditemenc = ENCHANT_RESISTANCE * EXT_ENCHANTMENT + SKILL_RES_FIRE, 200, ENCHANT_RESISTANCE * EXT_ENCHANTMENT + SKILL_RES_MAGIC, 300, ENCHANT_ATTRIBUTE * EXT_ENCHANTMENT + SKILL_ATTR_DEX, 400, ENCHANT_SKILL * EXT_ENCHANTMENT + SKILL_NORMAL_GREATER_EVASION, 600, ENCHANT_EXTRA_MELEE, 700, 0
-			ibitmod ITEM_BIT_PRECIOUS, ci, 1
+			fixeditemenc = ENCHANT_RESISTANCE * EXT_ENCHANTMENT + SKILL_RES_FIRE, 200, ENCHANT_RESISTANCE * EXT_ENCHANTMENT + SKILL_RES_MAGIC, 300, ENCHANT_ATTRIBUTE * EXT_ENCHANTMENT + SKILL_ATTR_DEX, 400, ENCHANT_SKILL * EXT_ENCHANTMENT + SKILL_NORMAL_GREATER_EVASION, 600, 50, 700, 0
+			ibitmod ITEM_BIT_PRECIOUS, ci, TRUE
 			inv(INV_ITEM_IDENTIFY_LEVEL, ci) = 500
 			fixlv = FIX_QUALITY_UNIQUE
 			return
 		}
 		if ( dbmode == DBMODE_REF ) {
@@ -53211,14 +55186,14 @@
 			reftype = FILTER_GLOVES
 			return
 		}
 		if ( dbmode == DBMODE_REF_SPEC ) {
 			if ( dbspec == DBSPEC_TYPE ) {
-				return FILTER_GLOVES
+				return 22000
 			}
 			if ( dbspec == DBSPEC_TYPE_MINOR ) {
-				return FILTER_GLOVES_HEAVY
+				return 22001
 			}
 			if ( dbspec == DBSPEC_VALUE_ORG ) {
 				return 40000
 			}
 			if ( dbspec == DBSPEC_PARAM3_ORG ) {
@@ -53261,11 +55236,11 @@
 			inv(INV_ITEM_PIC, ci) = xy2pic(29, 30)
 			reftype = FILTER_JUNK
 			reftypeminor = FILTER_NOTHING
 			inv(INV_ITEM_NUM, ci) = 1
 			fixeditemenc = 0
-			ibitmod ITEM_BIT_PRECIOUS, ci, 1
+			ibitmod ITEM_BIT_PRECIOUS, ci, TRUE
 			inv(INV_ITEM_IDENTIFY_LEVEL, ci) = 0
 			fixlv = FIX_QUALITY_UNIQUE
 			return
 		}
 		if ( dbmode == DBMODE_REF ) {
@@ -53274,14 +55249,14 @@
 			reftype = FILTER_JUNK
 			return
 		}
 		if ( dbmode == DBMODE_REF_SPEC ) {
 			if ( dbspec == DBSPEC_TYPE ) {
-				return FILTER_JUNK
+				return 64000
 			}
 			if ( dbspec == DBSPEC_TYPE_MINOR ) {
-				return FILTER_NONE
+				return 99999
 			}
 			if ( dbspec == DBSPEC_VALUE_ORG ) {
 				return 9000
 			}
 			if ( dbspec == DBSPEC_PARAM3_ORG ) {
@@ -53324,11 +55299,11 @@
 			inv(INV_ITEM_PIC, ci) = xy2pic(23, 14)
 			reftype = FILTER_JUNK
 			reftypeminor = FILTER_NOTHING
 			inv(INV_ITEM_NUM, ci) = 1
 			fixeditemenc = 0
-			ibitmod ITEM_BIT_PRECIOUS, ci, 1
+			ibitmod ITEM_BIT_PRECIOUS, ci, TRUE
 			inv(INV_ITEM_IDENTIFY_LEVEL, ci) = 0
 			fixlv = FIX_QUALITY_UNIQUE
 			return
 		}
 		if ( dbmode == DBMODE_REF ) {
@@ -53337,14 +55312,14 @@
 			reftype = FILTER_JUNK
 			return
 		}
 		if ( dbmode == DBMODE_REF_SPEC ) {
 			if ( dbspec == DBSPEC_TYPE ) {
-				return FILTER_JUNK
+				return 64000
 			}
 			if ( dbspec == DBSPEC_TYPE_MINOR ) {
-				return FILTER_NONE
+				return 99999
 			}
 			if ( dbspec == DBSPEC_VALUE_ORG ) {
 				return 9000
 			}
 			if ( dbspec == DBSPEC_PARAM3_ORG ) {
@@ -53387,11 +55362,11 @@
 			inv(INV_ITEM_PIC, ci) = xy2pic(28, 30)
 			reftype = FILTER_JUNK
 			reftypeminor = FILTER_NOTHING
 			inv(INV_ITEM_NUM, ci) = 1
 			fixeditemenc = 0
-			ibitmod ITEM_BIT_PRECIOUS, ci, 1
+			ibitmod ITEM_BIT_PRECIOUS, ci, TRUE
 			inv(INV_ITEM_IDENTIFY_LEVEL, ci) = 0
 			fixlv = FIX_QUALITY_UNIQUE
 			return
 		}
 		if ( dbmode == DBMODE_REF ) {
@@ -53400,14 +55375,14 @@
 			reftype = FILTER_JUNK
 			return
 		}
 		if ( dbmode == DBMODE_REF_SPEC ) {
 			if ( dbspec == DBSPEC_TYPE ) {
-				return FILTER_JUNK
+				return 64000
 			}
 			if ( dbspec == DBSPEC_TYPE_MINOR ) {
-				return FILTER_NONE
+				return 99999
 			}
 			if ( dbspec == DBSPEC_VALUE_ORG ) {
 				return 9000
 			}
 			if ( dbspec == DBSPEC_PARAM3_ORG ) {
@@ -53450,11 +55425,11 @@
 			inv(INV_ITEM_PIC, ci) = xy2pic(23, 12)
 			reftype = FILTER_JUNK
 			reftypeminor = FILTER_NOTHING
 			inv(INV_ITEM_NUM, ci) = 1
 			fixeditemenc = 0
-			ibitmod ITEM_BIT_PRECIOUS, ci, 1
+			ibitmod ITEM_BIT_PRECIOUS, ci, TRUE
 			inv(INV_ITEM_IDENTIFY_LEVEL, ci) = 0
 			fixlv = FIX_QUALITY_UNIQUE
 			return
 		}
 		if ( dbmode == DBMODE_REF ) {
@@ -53463,14 +55438,14 @@
 			reftype = FILTER_JUNK
 			return
 		}
 		if ( dbmode == DBMODE_REF_SPEC ) {
 			if ( dbspec == DBSPEC_TYPE ) {
-				return FILTER_JUNK
+				return 64000
 			}
 			if ( dbspec == DBSPEC_TYPE_MINOR ) {
-				return FILTER_NONE
+				return 99999
 			}
 			if ( dbspec == DBSPEC_VALUE_ORG ) {
 				return 9000
 			}
 			if ( dbspec == DBSPEC_PARAM3_ORG ) {
@@ -53513,11 +55488,11 @@
 			inv(INV_ITEM_PIC, ci) = xy2pic(27, 30)
 			reftype = FILTER_JUNK
 			reftypeminor = FILTER_NOTHING
 			inv(INV_ITEM_NUM, ci) = 1
 			fixeditemenc = 0
-			ibitmod ITEM_BIT_PRECIOUS, ci, 1
+			ibitmod ITEM_BIT_PRECIOUS, ci, TRUE
 			inv(INV_ITEM_IDENTIFY_LEVEL, ci) = 0
 			fixlv = FIX_QUALITY_UNIQUE
 			return
 		}
 		if ( dbmode == DBMODE_REF ) {
@@ -53526,14 +55501,14 @@
 			reftype = FILTER_JUNK
 			return
 		}
 		if ( dbmode == DBMODE_REF_SPEC ) {
 			if ( dbspec == DBSPEC_TYPE ) {
-				return FILTER_JUNK
+				return 64000
 			}
 			if ( dbspec == DBSPEC_TYPE_MINOR ) {
-				return FILTER_NONE
+				return 99999
 			}
 			if ( dbspec == DBSPEC_VALUE_ORG ) {
 				return 9000
 			}
 			if ( dbspec == DBSPEC_PARAM3_ORG ) {
@@ -53576,11 +55551,11 @@
 			inv(INV_ITEM_PIC, ci) = xy2pic(26, 30)
 			reftype = FILTER_JUNK
 			reftypeminor = FILTER_NOTHING
 			inv(INV_ITEM_NUM, ci) = 1
 			fixeditemenc = 0
-			ibitmod ITEM_BIT_PRECIOUS, ci, 1
+			ibitmod ITEM_BIT_PRECIOUS, ci, TRUE
 			inv(INV_ITEM_IDENTIFY_LEVEL, ci) = 0
 			fixlv = FIX_QUALITY_UNIQUE
 			return
 		}
 		if ( dbmode == DBMODE_REF ) {
@@ -53589,14 +55564,14 @@
 			reftype = FILTER_JUNK
 			return
 		}
 		if ( dbmode == DBMODE_REF_SPEC ) {
 			if ( dbspec == DBSPEC_TYPE ) {
-				return FILTER_JUNK
+				return 64000
 			}
 			if ( dbspec == DBSPEC_TYPE_MINOR ) {
-				return FILTER_NONE
+				return 99999
 			}
 			if ( dbspec == DBSPEC_VALUE_ORG ) {
 				return 9000
 			}
 			if ( dbspec == DBSPEC_PARAM3_ORG ) {
@@ -53639,11 +55614,11 @@
 			inv(INV_ITEM_PIC, ci) = xy2pic(25, 30)
 			reftype = FILTER_JUNK
 			reftypeminor = FILTER_NOTHING
 			inv(INV_ITEM_NUM, ci) = 1
 			fixeditemenc = 0
-			ibitmod ITEM_BIT_PRECIOUS, ci, 1
+			ibitmod ITEM_BIT_PRECIOUS, ci, TRUE
 			inv(INV_ITEM_IDENTIFY_LEVEL, ci) = 0
 			fixlv = FIX_QUALITY_UNIQUE
 			return
 		}
 		if ( dbmode == DBMODE_REF ) {
@@ -53652,14 +55627,14 @@
 			reftype = FILTER_JUNK
 			return
 		}
 		if ( dbmode == DBMODE_REF_SPEC ) {
 			if ( dbspec == DBSPEC_TYPE ) {
-				return FILTER_JUNK
+				return 64000
 			}
 			if ( dbspec == DBSPEC_TYPE_MINOR ) {
-				return FILTER_NONE
+				return 99999
 			}
 			if ( dbspec == DBSPEC_VALUE_ORG ) {
 				return 9000
 			}
 			if ( dbspec == DBSPEC_PARAM3_ORG ) {
@@ -53702,11 +55677,11 @@
 			inv(INV_ITEM_PIC, ci) = xy2pic(24, 30)
 			reftype = FILTER_JUNK
 			reftypeminor = FILTER_NOTHING
 			inv(INV_ITEM_NUM, ci) = 1
 			fixeditemenc = 0
-			ibitmod ITEM_BIT_PRECIOUS, ci, 1
+			ibitmod ITEM_BIT_PRECIOUS, ci, TRUE
 			inv(INV_ITEM_IDENTIFY_LEVEL, ci) = 0
 			fixlv = FIX_QUALITY_UNIQUE
 			return
 		}
 		if ( dbmode == DBMODE_REF ) {
@@ -53715,14 +55690,14 @@
 			reftype = FILTER_JUNK
 			return
 		}
 		if ( dbmode == DBMODE_REF_SPEC ) {
 			if ( dbspec == DBSPEC_TYPE ) {
-				return FILTER_JUNK
+				return 64000
 			}
 			if ( dbspec == DBSPEC_TYPE_MINOR ) {
-				return FILTER_NONE
+				return 99999
 			}
 			if ( dbspec == DBSPEC_VALUE_ORG ) {
 				return 9000
 			}
 			if ( dbspec == DBSPEC_PARAM3_ORG ) {
@@ -53776,14 +55751,14 @@
 			reftype = FILTER_ITEM_POTION
 			return
 		}
 		if ( dbmode == DBMODE_REF_SPEC ) {
 			if ( dbspec == DBSPEC_TYPE ) {
-				return FILTER_ITEM_POTION
+				return 52000
 			}
 			if ( dbspec == DBSPEC_TYPE_MINOR ) {
-				return FILTER_NONE
+				return 99999
 			}
 			if ( dbspec == DBSPEC_VALUE_ORG ) {
 				return 1000
 			}
 			if ( dbspec == DBSPEC_PARAM3_ORG ) {
@@ -53840,12 +55815,12 @@
 			inv(INV_ITEM_ID, ci) = ITEM_ID_BLOOD_ROD
 			inv(INV_ITEM_PIC, ci) = xy2pic(23, 30)
 			reftype = FILTER_WEAPON
 			reftypeminor = FILTER_WEAPON_STAVE
 			inv(INV_ITEM_NUM, ci) = 1
-			fixeditemenc = ENCHANT_MANA_TO_ATTACK, 500, ENCHANT_ENHANCE_SPELL, 500, ENCHANT_RESISTANCE * EXT_ENCHANTMENT + SKILL_RES_MAGIC, 450, ENCHANT_SKILL * EXT_ENCHANTMENT + SKILL_NORMAL_CASTING, 500, ENCHANT_ELEMENTAL_DMG * EXT_ENCHANTMENT + SKILL_RES_MAGIC, 400, 0
-			ibitmod ITEM_BIT_PRECIOUS, ci, 1
+			fixeditemenc = 67, 500, 34, 500, ENCHANT_RESISTANCE * EXT_ENCHANTMENT + SKILL_RES_MAGIC, 450, ENCHANT_SKILL * EXT_ENCHANTMENT + SKILL_NORMAL_CASTING, 500, ENCHANT_ELEMENTAL_DMG * EXT_ENCHANTMENT + SKILL_RES_MAGIC, 400, 0
+			ibitmod ITEM_BIT_PRECIOUS, ci, TRUE
 			inv(INV_ITEM_IDENTIFY_LEVEL, ci) = 500
 			fixlv = FIX_QUALITY_UNIQUE
 			return
 		}
 		if ( dbmode == DBMODE_REF ) {
@@ -53854,14 +55829,14 @@
 			reftype = FILTER_WEAPON
 			return
 		}
 		if ( dbmode == DBMODE_REF_SPEC ) {
 			if ( dbspec == DBSPEC_TYPE ) {
-				return FILTER_WEAPON
+				return 10000
 			}
 			if ( dbspec == DBSPEC_TYPE_MINOR ) {
-				return FILTER_WEAPON_STAVE
+				return 10006
 			}
 			if ( dbspec == DBSPEC_VALUE_ORG ) {
 				return 28000
 			}
 			if ( dbspec == DBSPEC_PARAM3_ORG ) {
@@ -53917,14 +55892,14 @@
 			reftype = FILTER_ITEM_TOOL
 			return
 		}
 		if ( dbmode == DBMODE_REF_SPEC ) {
 			if ( dbspec == DBSPEC_TYPE ) {
-				return FILTER_ITEM_TOOL
+				return 59000
 			}
 			if ( dbspec == DBSPEC_TYPE_MINOR ) {
-				return FILTER_NONE
+				return 99999
 			}
 			if ( dbspec == DBSPEC_VALUE_ORG ) {
 				return 12000
 			}
 			if ( dbspec == DBSPEC_PARAM3_ORG ) {
@@ -53981,14 +55956,14 @@
 			reftype = FILTER_JUNK
 			return
 		}
 		if ( dbmode == DBMODE_REF_SPEC ) {
 			if ( dbspec == DBSPEC_TYPE ) {
-				return FILTER_JUNK
+				return 64000
 			}
 			if ( dbspec == DBSPEC_TYPE_MINOR ) {
-				return FILTER_NONE
+				return 99999
 			}
 			if ( dbspec == DBSPEC_VALUE_ORG ) {
 				return 3200
 			}
 			if ( dbspec == DBSPEC_PARAM3_ORG ) {
@@ -54035,12 +56010,12 @@
 			inv(INV_ITEM_ID, ci) = ITEM_ID_MIGHTY_ARMS
 			inv(INV_ITEM_PIC, ci) = xy2pic(21, 30)
 			reftype = FILTER_CLOAK
 			reftypeminor = FILTER_CLOAK_MEDIUM
 			inv(INV_ITEM_NUM, ci) = 1
-			fixeditemenc = ENCHANT_PROXIMITY_ASSIST, 200, ENCHANT_EXTRA_MELEE, 250, ENCHANT_RESISTANCE * EXT_ENCHANTMENT + SKILL_RES_NERVE, 250, ENCHANT_SKILL * EXT_ENCHANTMENT + SKILL_NORMAL_DUAL_WIELD, 500, 0
-			ibitmod ITEM_BIT_PRECIOUS, ci, 1
+			fixeditemenc = 66, 200, 50, 250, ENCHANT_RESISTANCE * EXT_ENCHANTMENT + SKILL_RES_NERVE, 250, ENCHANT_SKILL * EXT_ENCHANTMENT + SKILL_NORMAL_DUAL_WIELD, 500, 0
+			ibitmod ITEM_BIT_PRECIOUS, ci, TRUE
 			inv(INV_ITEM_IDENTIFY_LEVEL, ci) = 500
 			fixlv = FIX_QUALITY_UNIQUE
 			return
 		}
 		if ( dbmode == DBMODE_REF ) {
@@ -54049,14 +56024,14 @@
 			reftype = FILTER_CLOAK
 			return
 		}
 		if ( dbmode == DBMODE_REF_SPEC ) {
 			if ( dbspec == DBSPEC_TYPE ) {
-				return FILTER_CLOAK
+				return 20000
 			}
 			if ( dbspec == DBSPEC_TYPE_MINOR ) {
-				return FILTER_CLOAK_MEDIUM
+				return 20001
 			}
 			if ( dbspec == DBSPEC_VALUE_ORG ) {
 				return 38000
 			}
 			if ( dbspec == DBSPEC_PARAM3_ORG ) {
@@ -54105,12 +56080,12 @@
 			inv(INV_ITEM_ID, ci) = ITEM_ID_THE_WHITE_HAWK
 			inv(INV_ITEM_PIC, ci) = xy2pic(20, 30)
 			reftype = FILTER_WEAPON
 			reftypeminor = FILTER_WEAPON_LONGSWORD
 			inv(INV_ITEM_NUM, ci) = 1
-			fixeditemenc = ENCHANT_PROC * EXT_ENCHANTMENT + ENCHANT_PROC_FEATHER, 150, ENCHANT_PROC * EXT_ENCHANTMENT + ENCHANT_PROC_MIND_BOLT, 500, ENCHANT_RESISTANCE * EXT_ENCHANTMENT + SKILL_RES_CHAOS, 250, ENCHANT_ATTRIBUTE * EXT_ENCHANTMENT + SKILL_ATTR_SPD, 700, ENCHANT_REFLECT_MAGIC, 150, 0
-			ibitmod ITEM_BIT_PRECIOUS, ci, 1
+			fixeditemenc = ENCHANT_PROC * EXT_ENCHANTMENT + ENCHANT_PROC_FEATHER, 150, ENCHANT_PROC * EXT_ENCHANTMENT + ENCHANT_PROC_MIND_BOLT, 500, ENCHANT_RESISTANCE * EXT_ENCHANTMENT + SKILL_RES_CHAOS, 250, ENCHANT_ATTRIBUTE * EXT_ENCHANTMENT + SKILL_ATTR_SPD, 700, 62, 150, 0
+			ibitmod ITEM_BIT_PRECIOUS, ci, TRUE
 			inv(INV_ITEM_IDENTIFY_LEVEL, ci) = 500
 			fixlv = FIX_QUALITY_UNIQUE
 			return
 		}
 		if ( dbmode == DBMODE_REF ) {
@@ -54119,14 +56094,14 @@
 			reftype = FILTER_WEAPON
 			return
 		}
 		if ( dbmode == DBMODE_REF_SPEC ) {
 			if ( dbspec == DBSPEC_TYPE ) {
-				return FILTER_WEAPON
+				return 10000
 			}
 			if ( dbspec == DBSPEC_TYPE_MINOR ) {
-				return FILTER_WEAPON_LONGSWORD
+				return 10002
 			}
 			if ( dbspec == DBSPEC_VALUE_ORG ) {
 				return 40000
 			}
 			if ( dbspec == DBSPEC_PARAM3_ORG ) {
@@ -54180,14 +56155,14 @@
 			reftype = FILTER_ITEM_POTION
 			return
 		}
 		if ( dbmode == DBMODE_REF_SPEC ) {
 			if ( dbspec == DBSPEC_TYPE ) {
-				return FILTER_ITEM_POTION
+				return 52000
 			}
 			if ( dbspec == DBSPEC_TYPE_MINOR ) {
-				return FILTER_NONE
+				return 99999
 			}
 			if ( dbspec == DBSPEC_VALUE_ORG ) {
 				return 150
 			}
 			if ( dbspec == DBSPEC_PARAM3_ORG ) {
@@ -54252,14 +56227,14 @@
 			reftype = FILTER_FURNITURE
 			return
 		}
 		if ( dbmode == DBMODE_REF_SPEC ) {
 			if ( dbspec == DBSPEC_TYPE ) {
-				return FILTER_FURNITURE
+				return 60000
 			}
 			if ( dbspec == DBSPEC_TYPE_MINOR ) {
-				return FILTER_NONE
+				return 99999
 			}
 			if ( dbspec == DBSPEC_VALUE_ORG ) {
 				return 6000
 			}
 			if ( dbspec == DBSPEC_PARAM3_ORG ) {
@@ -54314,11 +56289,11 @@
 			reftype = FILTER_ITEM_TOOL
 			reftypeminor = FILTER_NOTHING
 			inv(INV_ITEM_NUM, ci) = 1
 			fixeditemenc = 0
 			inv(INV_ITEM_EFFECT, ci) = EFFECT_SHIFT_CORE
-			ibitmod ITEM_BIT_PERIOD, ci, 1
+			ibitmod ITEM_BIT_PERIOD, ci, TRUE
 			inv(INV_ITEM_PARAM3, ci) = 1
 			inv(INV_ITEM_IDENTIFY_LEVEL, ci) = 0
 			return
 		}
 		if ( dbmode == DBMODE_REF ) {
@@ -54327,14 +56302,14 @@
 			reftype = FILTER_ITEM_TOOL
 			return
 		}
 		if ( dbmode == DBMODE_REF_SPEC ) {
 			if ( dbspec == DBSPEC_TYPE ) {
-				return FILTER_ITEM_TOOL
+				return 59000
 			}
 			if ( dbspec == DBSPEC_TYPE_MINOR ) {
-				return FILTER_NONE
+				return 99999
 			}
 			if ( dbspec == DBSPEC_VALUE_ORG ) {
 				return 3000
 			}
 			if ( dbspec == DBSPEC_PARAM3_ORG ) {
@@ -54381,11 +56356,11 @@
 			reftype = FILTER_ITEM_TOOL
 			reftypeminor = FILTER_NOTHING
 			inv(INV_ITEM_NUM, ci) = 1
 			fixeditemenc = 0
 			inv(INV_ITEM_EFFECT, ci) = EFFECT_SHIFT_CORE
-			ibitmod ITEM_BIT_PERIOD, ci, 1
+			ibitmod ITEM_BIT_PERIOD, ci, TRUE
 			inv(INV_ITEM_PARAM3, ci) = 1
 			inv(INV_ITEM_IDENTIFY_LEVEL, ci) = 0
 			return
 		}
 		if ( dbmode == DBMODE_REF ) {
@@ -54394,14 +56369,14 @@
 			reftype = FILTER_ITEM_TOOL
 			return
 		}
 		if ( dbmode == DBMODE_REF_SPEC ) {
 			if ( dbspec == DBSPEC_TYPE ) {
-				return FILTER_ITEM_TOOL
+				return 59000
 			}
 			if ( dbspec == DBSPEC_TYPE_MINOR ) {
-				return FILTER_NONE
+				return 99999
 			}
 			if ( dbspec == DBSPEC_VALUE_ORG ) {
 				return 3000
 			}
 			if ( dbspec == DBSPEC_PARAM3_ORG ) {
@@ -54448,11 +56423,11 @@
 			reftype = FILTER_ITEM_TOOL
 			reftypeminor = FILTER_NOTHING
 			inv(INV_ITEM_NUM, ci) = 1
 			fixeditemenc = 0
 			inv(INV_ITEM_EFFECT, ci) = EFFECT_SHIFT_CORE
-			ibitmod ITEM_BIT_PERIOD, ci, 1
+			ibitmod ITEM_BIT_PERIOD, ci, TRUE
 			inv(INV_ITEM_PARAM3, ci) = 1
 			inv(INV_ITEM_IDENTIFY_LEVEL, ci) = 0
 			return
 		}
 		if ( dbmode == DBMODE_REF ) {
@@ -54461,14 +56436,14 @@
 			reftype = FILTER_ITEM_TOOL
 			return
 		}
 		if ( dbmode == DBMODE_REF_SPEC ) {
 			if ( dbspec == DBSPEC_TYPE ) {
-				return FILTER_ITEM_TOOL
+				return 59000
 			}
 			if ( dbspec == DBSPEC_TYPE_MINOR ) {
-				return FILTER_NONE
+				return 99999
 			}
 			if ( dbspec == DBSPEC_VALUE_ORG ) {
 				return 3000
 			}
 			if ( dbspec == DBSPEC_PARAM3_ORG ) {
@@ -54515,11 +56490,11 @@
 			reftype = FILTER_ITEM_TOOL
 			reftypeminor = FILTER_NOTHING
 			inv(INV_ITEM_NUM, ci) = 1
 			fixeditemenc = 0
 			inv(INV_ITEM_EFFECT, ci) = EFFECT_SHIFT_CORE
-			ibitmod ITEM_BIT_PERIOD, ci, 1
+			ibitmod ITEM_BIT_PERIOD, ci, TRUE
 			inv(INV_ITEM_PARAM3, ci) = 1
 			inv(INV_ITEM_IDENTIFY_LEVEL, ci) = 0
 			return
 		}
 		if ( dbmode == DBMODE_REF ) {
@@ -54528,14 +56503,14 @@
 			reftype = FILTER_ITEM_TOOL
 			return
 		}
 		if ( dbmode == DBMODE_REF_SPEC ) {
 			if ( dbspec == DBSPEC_TYPE ) {
-				return FILTER_ITEM_TOOL
+				return 59000
 			}
 			if ( dbspec == DBSPEC_TYPE_MINOR ) {
-				return FILTER_NONE
+				return 99999
 			}
 			if ( dbspec == DBSPEC_VALUE_ORG ) {
 				return 3000
 			}
 			if ( dbspec == DBSPEC_PARAM3_ORG ) {
@@ -54582,11 +56557,11 @@
 			reftype = FILTER_ITEM_TOOL
 			reftypeminor = FILTER_NOTHING
 			inv(INV_ITEM_NUM, ci) = 1
 			fixeditemenc = 0
 			inv(INV_ITEM_EFFECT, ci) = EFFECT_SHIFT_CORE
-			ibitmod ITEM_BIT_PERIOD, ci, 1
+			ibitmod ITEM_BIT_PERIOD, ci, TRUE
 			inv(INV_ITEM_PARAM3, ci) = 1
 			inv(INV_ITEM_IDENTIFY_LEVEL, ci) = 0
 			return
 		}
 		if ( dbmode == DBMODE_REF ) {
@@ -54595,14 +56570,14 @@
 			reftype = FILTER_ITEM_TOOL
 			return
 		}
 		if ( dbmode == DBMODE_REF_SPEC ) {
 			if ( dbspec == DBSPEC_TYPE ) {
-				return FILTER_ITEM_TOOL
+				return 59000
 			}
 			if ( dbspec == DBSPEC_TYPE_MINOR ) {
-				return FILTER_NONE
+				return 99999
 			}
 			if ( dbspec == DBSPEC_VALUE_ORG ) {
 				return 4000
 			}
 			if ( dbspec == DBSPEC_PARAM3_ORG ) {
@@ -54650,12 +56625,12 @@
 			inv(INV_ITEM_ID, ci) = ITEM_ID_SONIC_BROOM
 			inv(INV_ITEM_PIC, ci) = xy2pic(16, 30)
 			reftype = FILTER_GIRDLE
 			reftypeminor = FILTER_GIRDLE_MEDIUM
 			inv(INV_ITEM_NUM, ci) = 1
-			fixeditemenc = ENCHANT_SKILL * EXT_ENCHANTMENT + SKILL_NORMAL_CONTROL_MAGIC, 500, ENCHANT_RESISTANCE * EXT_ENCHANTMENT + SKILL_RES_SOUND, 300, ENCHANT_FLOAT, 100, ENCHANT_ATTRIBUTE * EXT_ENCHANTMENT + SKILL_ATTR_SPD, 1400, ENCHANT_ATTRIBUTE * EXT_ENCHANTMENT + SKILL_ATTR_DEX, 400, 0
-			ibitmod ITEM_BIT_PRECIOUS, ci, 1
+			fixeditemenc = ENCHANT_SKILL * EXT_ENCHANTMENT + SKILL_NORMAL_CONTROL_MAGIC, 500, ENCHANT_RESISTANCE * EXT_ENCHANTMENT + SKILL_RES_SOUND, 300, 32, 100, ENCHANT_ATTRIBUTE * EXT_ENCHANTMENT + SKILL_ATTR_SPD, 1400, ENCHANT_ATTRIBUTE * EXT_ENCHANTMENT + SKILL_ATTR_DEX, 400, 0
+			ibitmod ITEM_BIT_PRECIOUS, ci, TRUE
 			inv(INV_ITEM_IDENTIFY_LEVEL, ci) = 500
 			fixlv = FIX_QUALITY_UNIQUE
 			return
 		}
 		if ( dbmode == DBMODE_REF ) {
@@ -54664,14 +56639,14 @@
 			reftype = FILTER_GIRDLE
 			return
 		}
 		if ( dbmode == DBMODE_REF_SPEC ) {
 			if ( dbspec == DBSPEC_TYPE ) {
-				return FILTER_GIRDLE
+				return 19000
 			}
 			if ( dbspec == DBSPEC_TYPE_MINOR ) {
-				return FILTER_GIRDLE_MEDIUM
+				return 19001
 			}
 			if ( dbspec == DBSPEC_VALUE_ORG ) {
 				return 22000
 			}
 			if ( dbspec == DBSPEC_PARAM3_ORG ) {
@@ -54716,12 +56691,12 @@
 			inv(INV_ITEM_ID, ci) = ITEM_ID_PANTS_OF_OGRE
 			inv(INV_ITEM_PIC, ci) = xy2pic(15, 30)
 			reftype = FILTER_GIRDLE
 			reftypeminor = FILTER_GIRDLE_MEDIUM
 			inv(INV_ITEM_NUM, ci) = 1
-			fixeditemenc = ENCHANT_RESISTANCE * EXT_ENCHANTMENT + SKILL_RES_NETHER, 350, ENCHANT_RESISTANCE * EXT_ENCHANTMENT + SKILL_RES_FIRE, 350, ENCHANT_RES_PREGNANCY, 100, ENCHANT_RES_CURSE, 400, ENCHANT_ATTRIBUTE * EXT_ENCHANTMENT + SKILL_ATTR_MAG, 700, 0
-			ibitmod ITEM_BIT_PRECIOUS, ci, 1
+			fixeditemenc = ENCHANT_RESISTANCE * EXT_ENCHANTMENT + SKILL_RES_NETHER, 350, ENCHANT_RESISTANCE * EXT_ENCHANTMENT + SKILL_RES_FIRE, 350, 48, 100, 43, 400, 85, 100, ENCHANT_ATTRIBUTE * EXT_ENCHANTMENT + SKILL_ATTR_MAG, 700, 0
+			ibitmod ITEM_BIT_PRECIOUS, ci, TRUE
 			inv(INV_ITEM_IDENTIFY_LEVEL, ci) = 500
 			fixlv = FIX_QUALITY_UNIQUE
 			return
 		}
 		if ( dbmode == DBMODE_REF ) {
@@ -54730,14 +56705,14 @@
 			reftype = FILTER_GIRDLE
 			return
 		}
 		if ( dbmode == DBMODE_REF_SPEC ) {
 			if ( dbspec == DBSPEC_TYPE ) {
-				return FILTER_GIRDLE
+				return 19000
 			}
 			if ( dbspec == DBSPEC_TYPE_MINOR ) {
-				return FILTER_GIRDLE_MEDIUM
+				return 19001
 			}
 			if ( dbspec == DBSPEC_VALUE_ORG ) {
 				return 52000
 			}
 			if ( dbspec == DBSPEC_PARAM3_ORG ) {
@@ -54785,12 +56760,12 @@
 			inv(INV_ITEM_ID, ci) = ITEM_ID_ION_CAKRAM
 			inv(INV_ITEM_PIC, ci) = xy2pic(14, 30)
 			reftype = FILTER_RANGE
 			reftypeminor = FILTER_RANGE_ROCK_THROW
 			inv(INV_ITEM_NUM, ci) = 1
-			fixeditemenc = ENCHANT_SKILL * EXT_ENCHANTMENT + SKILL_WEAPON_THROWING, 900, ENCHANT_ELEMENTAL_DMG * EXT_ENCHANTMENT + SKILL_RESDMG_CUT, 150, ENCHANT_EXTRA_RANGED, 400, ENCHANT_RESISTANCE * EXT_ENCHANTMENT + SKILL_RES_DARKNESS, 350, ENCHANT_RES_FEAR, 100, 0
-			ibitmod ITEM_BIT_PRECIOUS, ci, 1
+			fixeditemenc = ENCHANT_SKILL * EXT_ENCHANTMENT + SKILL_WEAPON_THROWING, 900, ENCHANT_ELEMENTAL_DMG * EXT_ENCHANTMENT + SKILL_RESDMG_CUT, 150, 51, 400, ENCHANT_RESISTANCE * EXT_ENCHANTMENT + SKILL_RES_DARKNESS, 350, 26, 100, 0
+			ibitmod ITEM_BIT_PRECIOUS, ci, TRUE
 			inv(INV_ITEM_IDENTIFY_LEVEL, ci) = 500
 			fixlv = FIX_QUALITY_UNIQUE
 			return
 		}
 		if ( dbmode == DBMODE_REF ) {
@@ -54799,14 +56774,14 @@
 			reftype = FILTER_RANGE
 			return
 		}
 		if ( dbmode == DBMODE_REF_SPEC ) {
 			if ( dbspec == DBSPEC_TYPE ) {
-				return FILTER_RANGE
+				return 24000
 			}
 			if ( dbspec == DBSPEC_TYPE_MINOR ) {
-				return FILTER_RANGE_ROCK_THROW
+				return 24030
 			}
 			if ( dbspec == DBSPEC_VALUE_ORG ) {
 				return 20000
 			}
 			if ( dbspec == DBSPEC_PARAM3_ORG ) {
@@ -54856,12 +56831,12 @@
 			inv(INV_ITEM_ID, ci) = ITEM_ID_SPADILLE
 			inv(INV_ITEM_PIC, ci) = xy2pic(13, 30)
 			reftype = FILTER_WEAPON
 			reftypeminor = FILTER_WEAPON_POLEARM
 			inv(INV_ITEM_NUM, ci) = 1
-			fixeditemenc = ENCHANT_PROC * EXT_ENCHANTMENT + ENCHANT_PROC_DECAPITATION, 100, ENCHANT_DEC_ENEMY_CRIT_CHANCE, 750, ENCHANT_RESISTANCE * EXT_ENCHANTMENT + SKILL_RES_MIND, 350, ENCHANT_SKILL * EXT_ENCHANTMENT + SKILL_NORMAL_MINING, 300, ENCHANT_SKILL * EXT_ENCHANTMENT + SKILL_NORMAL_TWO_HAND, 200, ENCHANT_ATTRIBUTE * EXT_ENCHANTMENT + SKILL_ATTR_STR, 600, 0
-			ibitmod ITEM_BIT_PRECIOUS, ci, 1
+			fixeditemenc = ENCHANT_PROC * EXT_ENCHANTMENT + ENCHANT_PROC_DECAPITATION, 100, 64, 750, ENCHANT_RESISTANCE * EXT_ENCHANTMENT + SKILL_RES_MIND, 350, ENCHANT_SKILL * EXT_ENCHANTMENT + SKILL_NORMAL_MINING, 300, ENCHANT_SKILL * EXT_ENCHANTMENT + SKILL_NORMAL_TWO_HAND, 200, ENCHANT_ATTRIBUTE * EXT_ENCHANTMENT + SKILL_ATTR_STR, 600, 0
+			ibitmod ITEM_BIT_PRECIOUS, ci, TRUE
 			inv(INV_ITEM_IDENTIFY_LEVEL, ci) = 500
 			fixlv = FIX_QUALITY_UNIQUE
 			return
 		}
 		if ( dbmode == DBMODE_REF ) {
@@ -54870,14 +56845,14 @@
 			reftype = FILTER_WEAPON
 			return
 		}
 		if ( dbmode == DBMODE_REF_SPEC ) {
 			if ( dbspec == DBSPEC_TYPE ) {
-				return FILTER_WEAPON
+				return 10000
 			}
 			if ( dbspec == DBSPEC_TYPE_MINOR ) {
-				return FILTER_WEAPON_POLEARM
+				return 10007
 			}
 			if ( dbspec == DBSPEC_VALUE_ORG ) {
 				return 34000
 			}
 			if ( dbspec == DBSPEC_PARAM3_ORG ) {
@@ -54922,26 +56897,26 @@
 			reftypeminor = FILTER_NOTHING
 			inv(INV_ITEM_NUM, ci) = 1
 			fixeditemenc = 0
 			inv(INV_ITEM_EFFECT, ci) = EFFECT_4DIM_MIRROR
 			inv(INV_ITEM_IDENTIFY_LEVEL, ci) = 0
-			inv(INV_ITEM_CHARGE, ci) = 5 + rnd(5) - rnd(5)
-			ibitmod ITEM_BIT_CHARGE_ITEM, ci, 1
+			inv((9 /*!!!@[INV_ITEM_AMMO @@@ INV_ITEM_CHARGE @@@ INV_ITEM_CLIENT @@@ INV_ITEM_FILE @@@ INV_ITEM_NEXT_PERIOD]@!!! */), ci) = 5 + rnd(5) - rnd(5)
+			ibitmod ITEM_BIT_CHARGE_ITEM, ci, TRUE
 			return
 		}
 		if ( dbmode == DBMODE_REF ) {
 			ichargelevel = 5
 			infilterref = ""
 			reftype = FILTER_ITEM_TOOL
 			return
 		}
 		if ( dbmode == DBMODE_REF_SPEC ) {
 			if ( dbspec == DBSPEC_TYPE ) {
-				return FILTER_ITEM_TOOL
+				return 59000
 			}
 			if ( dbspec == DBSPEC_TYPE_MINOR ) {
-				return FILTER_NONE
+				return 99999
 			}
 			if ( dbspec == DBSPEC_VALUE_ORG ) {
 				return 5000
 			}
 			if ( dbspec == DBSPEC_PARAM3_ORG ) {
@@ -54998,14 +56973,14 @@
 			reftype = FILTER_JUNK
 			return
 		}
 		if ( dbmode == DBMODE_REF_SPEC ) {
 			if ( dbspec == DBSPEC_TYPE ) {
-				return FILTER_JUNK
+				return 64000
 			}
 			if ( dbspec == DBSPEC_TYPE_MINOR ) {
-				return FILTER_NONE
+				return 99999
 			}
 			if ( dbspec == DBSPEC_VALUE_ORG ) {
 				return 3000
 			}
 			if ( dbspec == DBSPEC_PARAM3_ORG ) {
@@ -55060,14 +57035,14 @@
 			reftype = FILTER_ITEM_TOOL
 			return
 		}
 		if ( dbmode == DBMODE_REF_SPEC ) {
 			if ( dbspec == DBSPEC_TYPE ) {
-				return FILTER_ITEM_TOOL
+				return 59000
 			}
 			if ( dbspec == DBSPEC_TYPE_MINOR ) {
-				return FILTER_NONE
+				return 99999
 			}
 			if ( dbspec == DBSPEC_VALUE_ORG ) {
 				return 24000
 			}
 			if ( dbspec == DBSPEC_PARAM3_ORG ) {
@@ -55122,14 +57097,14 @@
 			reftype = FILTER_ITEM_TOOL
 			return
 		}
 		if ( dbmode == DBMODE_REF_SPEC ) {
 			if ( dbspec == DBSPEC_TYPE ) {
-				return FILTER_ITEM_TOOL
+				return 59000
 			}
 			if ( dbspec == DBSPEC_TYPE_MINOR ) {
-				return FILTER_NONE
+				return 99999
 			}
 			if ( dbspec == DBSPEC_VALUE_ORG ) {
 				return 7500
 			}
 			if ( dbspec == DBSPEC_PARAM3_ORG ) {
@@ -55184,14 +57159,14 @@
 			reftype = FILTER_ITEM_TOOL
 			return
 		}
 		if ( dbmode == DBMODE_REF_SPEC ) {
 			if ( dbspec == DBSPEC_TYPE ) {
-				return FILTER_ITEM_TOOL
+				return 59000
 			}
 			if ( dbspec == DBSPEC_TYPE_MINOR ) {
-				return FILTER_NONE
+				return 99999
 			}
 			if ( dbspec == DBSPEC_VALUE_ORG ) {
 				return 5
 			}
 			if ( dbspec == DBSPEC_PARAM3_ORG ) {
@@ -55248,14 +57223,14 @@
 			reftype = FILTER_JUNK
 			return
 		}
 		if ( dbmode == DBMODE_REF_SPEC ) {
 			if ( dbspec == DBSPEC_TYPE ) {
-				return FILTER_JUNK
+				return 64000
 			}
 			if ( dbspec == DBSPEC_TYPE_MINOR ) {
-				return FILTER_NONE
+				return 99999
 			}
 			if ( dbspec == DBSPEC_VALUE_ORG ) {
 				return 3600
 			}
 			if ( dbspec == DBSPEC_PARAM3_ORG ) {
@@ -55309,14 +57284,14 @@
 			reftype = FILTER_JUNK
 			return
 		}
 		if ( dbmode == DBMODE_REF_SPEC ) {
 			if ( dbspec == DBSPEC_TYPE ) {
-				return FILTER_JUNK
+				return 64000
 			}
 			if ( dbspec == DBSPEC_TYPE_MINOR ) {
-				return FILTER_NONE
+				return 99999
 			}
 			if ( dbspec == DBSPEC_VALUE_ORG ) {
 				return 500
 			}
 			if ( dbspec == DBSPEC_PARAM3_ORG ) {
@@ -55370,14 +57345,14 @@
 			reftype = FILTER_JUNK
 			return
 		}
 		if ( dbmode == DBMODE_REF_SPEC ) {
 			if ( dbspec == DBSPEC_TYPE ) {
-				return FILTER_JUNK
+				return 64000
 			}
 			if ( dbspec == DBSPEC_TYPE_MINOR ) {
-				return FILTER_NONE
+				return 99999
 			}
 			if ( dbspec == DBSPEC_VALUE_ORG ) {
 				return 1200
 			}
 			if ( dbspec == DBSPEC_PARAM3_ORG ) {
@@ -55426,11 +57401,11 @@
 			inv(INV_ITEM_PIC, ci) = xy2pic(31, 24)
 			reftype = FILTER_RANGE
 			reftypeminor = FILTER_RANGE_LASER
 			inv(INV_ITEM_NUM, ci) = 1
 			fixeditemenc = ENCHANT_PROC * EXT_ENCHANTMENT + ENCHANT_PROC_DIMENSIONAL_MOVE, 80, ENCHANT_PROC * EXT_ENCHANTMENT + ENCHANT_PROC_FEATHER, 200, ENCHANT_ELEMENTAL_DMG * EXT_ENCHANTMENT + SKILL_RES_LIGHTNING, 400, ENCHANT_RESISTANCE * EXT_ENCHANTMENT + SKILL_RES_FIRE, 300, ENCHANT_RESISTANCE * EXT_ENCHANTMENT + SKILL_RES_NETHER, 250, 0
-			ibitmod ITEM_BIT_PRECIOUS, ci, 1
+			ibitmod ITEM_BIT_PRECIOUS, ci, TRUE
 			inv(INV_ITEM_IDENTIFY_LEVEL, ci) = 500
 			fixlv = FIX_QUALITY_UNIQUE
 			return
 		}
 		if ( dbmode == DBMODE_REF ) {
@@ -55439,14 +57414,14 @@
 			reftype = FILTER_RANGE
 			return
 		}
 		if ( dbmode == DBMODE_REF_SPEC ) {
 			if ( dbspec == DBSPEC_TYPE ) {
-				return FILTER_RANGE
+				return 24000
 			}
 			if ( dbspec == DBSPEC_TYPE_MINOR ) {
-				return FILTER_RANGE_LASER
+				return 24021
 			}
 			if ( dbspec == DBSPEC_VALUE_ORG ) {
 				return 50000
 			}
 			if ( dbspec == DBSPEC_PARAM3_ORG ) {
@@ -55494,12 +57469,12 @@
 			inv(INV_ITEM_ID, ci) = ITEM_ID_LUCKY_ALMONDS
 			inv(INV_ITEM_PIC, ci) = xy2pic(4, 30)
 			reftype = FILTER_WEAPON
 			reftypeminor = FILTER_WEAPON_HAMMER
 			inv(INV_ITEM_NUM, ci) = 1
-			fixeditemenc = ENCHANT_ELEMENTAL_DMG * EXT_ENCHANTMENT + SKILL_RES_MIND, 500, ENCHANT_RESISTANCE * EXT_ENCHANTMENT + SKILL_RES_DARKNESS, 350, ENCHANT_SKILL * EXT_ENCHANTMENT + SKILL_NORMAL_STEALTH, 1200, ENCHANT_ATTRIBUTE * EXT_ENCHANTMENT + SKILL_ATTR_LUC, 500, ENCHANT_ENHANCE_BREATH, 500, ENCHANT_RES_PARALYZE, 100, 0
-			ibitmod ITEM_BIT_PRECIOUS, ci, 1
+			fixeditemenc = ENCHANT_ELEMENTAL_DMG * EXT_ENCHANTMENT + SKILL_RES_MIND, 500, ENCHANT_RESISTANCE * EXT_ENCHANTMENT + SKILL_RES_DARKNESS, 350, ENCHANT_SKILL * EXT_ENCHANTMENT + SKILL_NORMAL_STEALTH, 1200, ENCHANT_ATTRIBUTE * EXT_ENCHANTMENT + SKILL_ATTR_LUC, 500, 68, 500, 24, 100, 0
+			ibitmod ITEM_BIT_PRECIOUS, ci, TRUE
 			inv(INV_ITEM_IDENTIFY_LEVEL, ci) = 500
 			fixlv = FIX_QUALITY_UNIQUE
 			return
 		}
 		if ( dbmode == DBMODE_REF ) {
@@ -55508,14 +57483,14 @@
 			reftype = FILTER_WEAPON
 			return
 		}
 		if ( dbmode == DBMODE_REF_SPEC ) {
 			if ( dbspec == DBSPEC_TYPE ) {
-				return FILTER_WEAPON
+				return 10000
 			}
 			if ( dbspec == DBSPEC_TYPE_MINOR ) {
-				return FILTER_WEAPON_HAMMER
+				return 10005
 			}
 			if ( dbspec == DBSPEC_VALUE_ORG ) {
 				return 26000
 			}
 			if ( dbspec == DBSPEC_PARAM3_ORG ) {
@@ -55569,14 +57544,14 @@
 			reftype = FILTER_ITEM_TOOL
 			return
 		}
 		if ( dbmode == DBMODE_REF_SPEC ) {
 			if ( dbspec == DBSPEC_TYPE ) {
-				return FILTER_ITEM_TOOL
+				return 59000
 			}
 			if ( dbspec == DBSPEC_TYPE_MINOR ) {
-				return FILTER_NONE
+				return 99999
 			}
 			if ( dbspec == DBSPEC_VALUE_ORG ) {
 				return 200
 			}
 			if ( dbspec == DBSPEC_PARAM3_ORG ) {
@@ -55624,12 +57599,12 @@
 			inv(INV_ITEM_ID, ci) = ITEM_ID_BLOODY_TEARS
 			inv(INV_ITEM_PIC, ci) = xy2pic(4, 28)
 			reftype = FILTER_WEAPON
 			reftypeminor = FILTER_WEAPON_STAVE
 			inv(INV_ITEM_NUM, ci) = 1
-			fixeditemenc = ENCHANT_SUCK_BLOOD, 50, ENCHANT_RESISTANCE * EXT_ENCHANTMENT + SKILL_RES_NETHER, 550, ENCHANT_BANE_UNDEAD, 500, ENCHANT_ATTRIBUTE * EXT_ENCHANTMENT + SKILL_ATTR_DEX, 250, ENCHANT_RES_SLEEP, 100, ENCHANT_RES_CURSE, 300, ENCHANT_REMOTE_BLOW, 400, 0
-			ibitmod ITEM_BIT_PRECIOUS, ci, 1
+			fixeditemenc = 45, 50, ENCHANT_RESISTANCE * EXT_ENCHANTMENT + SKILL_RES_NETHER, 550, 58, 500, ENCHANT_ATTRIBUTE * EXT_ENCHANTMENT + SKILL_ATTR_DEX, 250, 27, 100, 43, 300, 63, 400, 0
+			ibitmod ITEM_BIT_PRECIOUS, ci, TRUE
 			inv(INV_ITEM_IDENTIFY_LEVEL, ci) = 500
 			fixlv = FIX_QUALITY_UNIQUE
 			return
 		}
 		if ( dbmode == DBMODE_REF ) {
@@ -55638,14 +57613,14 @@
 			reftype = FILTER_WEAPON
 			return
 		}
 		if ( dbmode == DBMODE_REF_SPEC ) {
 			if ( dbspec == DBSPEC_TYPE ) {
-				return FILTER_WEAPON
+				return 10000
 			}
 			if ( dbspec == DBSPEC_TYPE_MINOR ) {
-				return FILTER_WEAPON_STAVE
+				return 10006
 			}
 			if ( dbspec == DBSPEC_VALUE_ORG ) {
 				return 36000
 			}
 			if ( dbspec == DBSPEC_PARAM3_ORG ) {
@@ -55700,14 +57675,14 @@
 			reftype = FILTER_FURNITURE
 			return
 		}
 		if ( dbmode == DBMODE_REF_SPEC ) {
 			if ( dbspec == DBSPEC_TYPE ) {
-				return FILTER_FURNITURE
+				return 60000
 			}
 			if ( dbspec == DBSPEC_TYPE_MINOR ) {
-				return FILTER_FURNITURE_BED
+				return 60004
 			}
 			if ( dbspec == DBSPEC_VALUE_ORG ) {
 				return 2100
 			}
 			if ( dbspec == DBSPEC_PARAM3_ORG ) {
@@ -55755,12 +57730,12 @@
 			inv(INV_ITEM_ID, ci) = ITEM_ID_USAMIMI
 			inv(INV_ITEM_PIC, ci) = xy2pic(3, 30)
 			reftype = FILTER_HELM
 			reftypeminor = FILTER_HELM_LIGHT
 			inv(INV_ITEM_NUM, ci) = 1
-			fixeditemenc = ENCHANT_FLOAT, 100, ENCHANT_RESISTANCE * EXT_ENCHANTMENT + SKILL_RES_NERVE, 400, ENCHANT_ATTRIBUTE * EXT_ENCHANTMENT + SKILL_ATTR_SPD, 1100, ENCHANT_ATTRIBUTE * EXT_ENCHANTMENT + SKILL_ATTR_CON, 1100, ENCHANT_ATTRIBUTE * EXT_ENCHANTMENT + SKILL_ATTR_DEX, 1100, ENCHANT_ATTRIBUTE * EXT_ENCHANTMENT + SKILL_ATTR_PER, 1100, ENCHANT_ATTRIBUTE * EXT_ENCHANTMENT + SKILL_ATTR_STR, 1100, 0
-			ibitmod ITEM_BIT_PRECIOUS, ci, 1
+			fixeditemenc = 32, 100, ENCHANT_RESISTANCE * EXT_ENCHANTMENT + SKILL_RES_NERVE, 400, ENCHANT_ATTRIBUTE * EXT_ENCHANTMENT + SKILL_ATTR_SPD, 1100, ENCHANT_ATTRIBUTE * EXT_ENCHANTMENT + SKILL_ATTR_CON, 1100, ENCHANT_ATTRIBUTE * EXT_ENCHANTMENT + SKILL_ATTR_DEX, 1100, ENCHANT_ATTRIBUTE * EXT_ENCHANTMENT + SKILL_ATTR_PER, 1100, ENCHANT_ATTRIBUTE * EXT_ENCHANTMENT + SKILL_ATTR_STR, 1100, 0
+			ibitmod ITEM_BIT_PRECIOUS, ci, TRUE
 			inv(INV_ITEM_IDENTIFY_LEVEL, ci) = 500
 			fixlv = FIX_QUALITY_UNIQUE
 			return
 		}
 		if ( dbmode == DBMODE_REF ) {
@@ -55769,14 +57744,14 @@
 			reftype = FILTER_HELM
 			return
 		}
 		if ( dbmode == DBMODE_REF_SPEC ) {
 			if ( dbspec == DBSPEC_TYPE ) {
-				return FILTER_HELM
+				return 12000
 			}
 			if ( dbspec == DBSPEC_TYPE_MINOR ) {
-				return FILTER_HELM_LIGHT
+				return 12002
 			}
 			if ( dbspec == DBSPEC_VALUE_ORG ) {
 				return 34000
 			}
 			if ( dbspec == DBSPEC_PARAM3_ORG ) {
@@ -55831,14 +57806,14 @@
 			reftype = FILTER_ITEM_TOOL
 			return
 		}
 		if ( dbmode == DBMODE_REF_SPEC ) {
 			if ( dbspec == DBSPEC_TYPE ) {
-				return FILTER_ITEM_TOOL
+				return 59000
 			}
 			if ( dbspec == DBSPEC_TYPE_MINOR ) {
-				return FILTER_NONE
+				return 99999
 			}
 			if ( dbspec == DBSPEC_VALUE_ORG ) {
 				return 5000
 			}
 			if ( dbspec == DBSPEC_PARAM3_ORG ) {
@@ -55896,14 +57871,14 @@
 			reftype = FILTER_ITEM_FOOD
 			return
 		}
 		if ( dbmode == DBMODE_REF_SPEC ) {
 			if ( dbspec == DBSPEC_TYPE ) {
-				return FILTER_ITEM_FOOD
+				return 57000
 			}
 			if ( dbspec == DBSPEC_TYPE_MINOR ) {
-				return FILTER_NONE
+				return 99999
 			}
 			if ( dbspec == DBSPEC_VALUE_ORG ) {
 				return 1200
 			}
 			if ( dbspec == DBSPEC_PARAM3_ORG ) {
@@ -55947,26 +57922,26 @@
 			reftype = FILTER_ITEM_SPELLBOOK
 			reftypeminor = FILTER_NOTHING
 			inv(INV_ITEM_NUM, ci) = 1
 			fixeditemenc = 0
 			inv(INV_ITEM_IDENTIFY_LEVEL, ci) = 0
-			inv(INV_ITEM_CHARGE, ci) = 5 + rnd(5) - rnd(5)
-			ibitmod ITEM_BIT_CHARGE_ITEM, ci, 1
+			inv((9 /*!!!@[INV_ITEM_AMMO @@@ INV_ITEM_CHARGE @@@ INV_ITEM_CLIENT @@@ INV_ITEM_FILE @@@ INV_ITEM_NEXT_PERIOD]@!!! */), ci) = 5 + rnd(5) - rnd(5)
+			ibitmod ITEM_BIT_CHARGE_ITEM, ci, TRUE
 			return
 		}
 		if ( dbmode == DBMODE_REF ) {
 			ichargelevel = 5
 			infilterref = ""
 			reftype = FILTER_ITEM_SPELLBOOK
 			return
 		}
 		if ( dbmode == DBMODE_REF_SPEC ) {
 			if ( dbspec == DBSPEC_TYPE ) {
-				return FILTER_ITEM_SPELLBOOK
+				return 54000
 			}
 			if ( dbspec == DBSPEC_TYPE_MINOR ) {
-				return FILTER_NONE
+				return 99999
 			}
 			if ( dbspec == DBSPEC_VALUE_ORG ) {
 				return 1300
 			}
 			if ( dbspec == DBSPEC_PARAM3_ORG ) {
@@ -56029,14 +58004,14 @@
 			reftype = FILTER_ITEM_POTION
 			return
 		}
 		if ( dbmode == DBMODE_REF_SPEC ) {
 			if ( dbspec == DBSPEC_TYPE ) {
-				return FILTER_ITEM_POTION
+				return 52000
 			}
 			if ( dbspec == DBSPEC_TYPE_MINOR ) {
-				return FILTER_NONE
+				return 99999
 			}
 			if ( dbspec == DBSPEC_VALUE_ORG ) {
 				return 150
 			}
 			if ( dbspec == DBSPEC_PARAM3_ORG ) {
@@ -56099,14 +58074,14 @@
 			reftype = FILTER_ITEM_POTION
 			return
 		}
 		if ( dbmode == DBMODE_REF_SPEC ) {
 			if ( dbspec == DBSPEC_TYPE ) {
-				return FILTER_ITEM_POTION
+				return 52000
 			}
 			if ( dbspec == DBSPEC_TYPE_MINOR ) {
-				return FILTER_NONE
+				return 99999
 			}
 			if ( dbspec == DBSPEC_VALUE_ORG ) {
 				return 450
 			}
 			if ( dbspec == DBSPEC_PARAM3_ORG ) {
@@ -56160,12 +58135,12 @@
 			inv(INV_ITEM_ID, ci) = ITEM_ID_ARGENT_SNOW
 			inv(INV_ITEM_PIC, ci) = xy2pic(20, 26)
 			reftype = FILTER_ARMOR
 			reftypeminor = FILTER_ARMOR_HEAVY
 			inv(INV_ITEM_NUM, ci) = 1
-			fixeditemenc = ENCHANT_RESISTANCE * EXT_ENCHANTMENT + SKILL_RES_COLD, 850, ENCHANT_SKILL * EXT_ENCHANTMENT + SKILL_NORMAL_TACTICS, 200, ENCHANT_FAST_TRAVEL, 50, ENCHANT_ATTRIBUTE * EXT_ENCHANTMENT + SKILL_ATTR_CON, 900, 0
-			ibitmod ITEM_BIT_PRECIOUS, ci, 1
+			fixeditemenc = ENCHANT_RESISTANCE * EXT_ENCHANTMENT + SKILL_RES_COLD, 850, ENCHANT_SKILL * EXT_ENCHANTMENT + SKILL_NORMAL_TACTICS, 200, 29, 50, ENCHANT_ATTRIBUTE * EXT_ENCHANTMENT + SKILL_ATTR_CON, 900, 0
+			ibitmod ITEM_BIT_PRECIOUS, ci, TRUE
 			inv(INV_ITEM_IDENTIFY_LEVEL, ci) = 500
 			fixlv = FIX_QUALITY_UNIQUE
 			return
 		}
 		if ( dbmode == DBMODE_REF ) {
@@ -56174,14 +58149,14 @@
 			reftype = FILTER_ARMOR
 			return
 		}
 		if ( dbmode == DBMODE_REF_SPEC ) {
 			if ( dbspec == DBSPEC_TYPE ) {
-				return FILTER_ARMOR
+				return 16000
 			}
 			if ( dbspec == DBSPEC_TYPE_MINOR ) {
-				return FILTER_ARMOR_HEAVY
+				return 16001
 			}
 			if ( dbspec == DBSPEC_VALUE_ORG ) {
 				return 40000
 			}
 			if ( dbspec == DBSPEC_PARAM3_ORG ) {
@@ -56229,12 +58204,12 @@
 			inv(INV_ITEM_ID, ci) = ITEM_ID_IVY_SPINE
 			inv(INV_ITEM_PIC, ci) = xy2pic(4, 28)
 			reftype = FILTER_WEAPON
 			reftypeminor = FILTER_WEAPON_STAVE
 			inv(INV_ITEM_NUM, ci) = 1
-			fixeditemenc = ENCHANT_ELEMENTAL_DMG * EXT_ENCHANTMENT + SKILL_RESDMG_CUT, 50, ENCHANT_ELEMENTAL_DMG * EXT_ENCHANTMENT + SKILL_RES_POISON, 300, ENCHANT_RESISTANCE * EXT_ENCHANTMENT + SKILL_RES_POISON, -150, ENCHANT_ATTRIBUTE * EXT_ENCHANTMENT + SKILL_ATTR_WIL, 300, ENCHANT_RES_FEAR, 100, ENCHANT_REMOTE_BLOW, 400, 0
-			ibitmod ITEM_BIT_PRECIOUS, ci, 1
+			fixeditemenc = ENCHANT_ELEMENTAL_DMG * EXT_ENCHANTMENT + SKILL_RESDMG_CUT, 50, ENCHANT_ELEMENTAL_DMG * EXT_ENCHANTMENT + SKILL_RES_POISON, 300, ENCHANT_RESISTANCE * EXT_ENCHANTMENT + SKILL_RES_POISON, -150, ENCHANT_ATTRIBUTE * EXT_ENCHANTMENT + SKILL_ATTR_WIL, 300, 26, 100, 63, 400, 0
+			ibitmod ITEM_BIT_PRECIOUS, ci, TRUE
 			inv(INV_ITEM_IDENTIFY_LEVEL, ci) = 500
 			fixlv = FIX_QUALITY_UNIQUE
 			return
 		}
 		if ( dbmode == DBMODE_REF ) {
@@ -56243,14 +58218,14 @@
 			reftype = FILTER_WEAPON
 			return
 		}
 		if ( dbmode == DBMODE_REF_SPEC ) {
 			if ( dbspec == DBSPEC_TYPE ) {
-				return FILTER_WEAPON
+				return 10000
 			}
 			if ( dbspec == DBSPEC_TYPE_MINOR ) {
-				return FILTER_WEAPON_STAVE
+				return 10006
 			}
 			if ( dbspec == DBSPEC_VALUE_ORG ) {
 				return 32000
 			}
 			if ( dbspec == DBSPEC_PARAM3_ORG ) {
@@ -56310,14 +58285,14 @@
 			reftype = FILTER_AMMO
 			return
 		}
 		if ( dbmode == DBMODE_REF_SPEC ) {
 			if ( dbspec == DBSPEC_TYPE ) {
-				return FILTER_AMMO
+				return 25000
 			}
 			if ( dbspec == DBSPEC_TYPE_MINOR ) {
-				return FILTER_AMMO_BULLET
+				return 25020
 			}
 			if ( dbspec == DBSPEC_VALUE_ORG ) {
 				return 1500
 			}
 			if ( dbspec == DBSPEC_PARAM3_ORG ) {
@@ -56371,14 +58346,14 @@
 			reftype = FILTER_JUNK
 			return
 		}
 		if ( dbmode == DBMODE_REF_SPEC ) {
 			if ( dbspec == DBSPEC_TYPE ) {
-				return FILTER_JUNK
+				return 64000
 			}
 			if ( dbspec == DBSPEC_TYPE_MINOR ) {
-				return FILTER_NONE
+				return 99999
 			}
 			if ( dbspec == DBSPEC_VALUE_ORG ) {
 				return 5000
 			}
 			if ( dbspec == DBSPEC_PARAM3_ORG ) {
@@ -56433,14 +58408,14 @@
 			reftype = FILTER_ITEM_TOOL
 			return
 		}
 		if ( dbmode == DBMODE_REF_SPEC ) {
 			if ( dbspec == DBSPEC_TYPE ) {
-				return FILTER_ITEM_TOOL
+				return 59000
 			}
 			if ( dbspec == DBSPEC_TYPE_MINOR ) {
-				return FILTER_NONE
+				return 99999
 			}
 			if ( dbspec == DBSPEC_VALUE_ORG ) {
 				return 5000
 			}
 			if ( dbspec == DBSPEC_PARAM3_ORG ) {
@@ -56497,14 +58472,14 @@
 			reftype = FILTER_ORE
 			return
 		}
 		if ( dbmode == DBMODE_REF_SPEC ) {
 			if ( dbspec == DBSPEC_TYPE ) {
-				return FILTER_ORE
+				return 77000
 			}
 			if ( dbspec == DBSPEC_TYPE_MINOR ) {
-				return FILTER_ORE_GEM
+				return 77001
 			}
 			if ( dbspec == DBSPEC_VALUE_ORG ) {
 				return 30000
 			}
 			if ( dbspec == DBSPEC_PARAM3_ORG ) {
@@ -56558,14 +58533,14 @@
 			reftype = FILTER_ORE
 			return
 		}
 		if ( dbmode == DBMODE_REF_SPEC ) {
 			if ( dbspec == DBSPEC_TYPE ) {
-				return FILTER_ORE
+				return 77000
 			}
 			if ( dbspec == DBSPEC_TYPE_MINOR ) {
-				return FILTER_ORE_GEM
+				return 77001
 			}
 			if ( dbspec == DBSPEC_VALUE_ORG ) {
 				return 20000
 			}
 			if ( dbspec == DBSPEC_PARAM3_ORG ) {
@@ -56619,14 +58594,14 @@
 			reftype = FILTER_JUNK
 			return
 		}
 		if ( dbmode == DBMODE_REF_SPEC ) {
 			if ( dbspec == DBSPEC_TYPE ) {
-				return FILTER_JUNK
+				return 64000
 			}
 			if ( dbspec == DBSPEC_TYPE_MINOR ) {
-				return FILTER_NONE
+				return 99999
 			}
 			if ( dbspec == DBSPEC_VALUE_ORG ) {
 				return 500
 			}
 			if ( dbspec == DBSPEC_PARAM3_ORG ) {
@@ -56680,14 +58655,14 @@
 			reftype = FILTER_JUNK
 			return
 		}
 		if ( dbmode == DBMODE_REF_SPEC ) {
 			if ( dbspec == DBSPEC_TYPE ) {
-				return FILTER_JUNK
+				return 64000
 			}
 			if ( dbspec == DBSPEC_TYPE_MINOR ) {
-				return FILTER_NONE
+				return 99999
 			}
 			if ( dbspec == DBSPEC_VALUE_ORG ) {
 				return 5000
 			}
 			if ( dbspec == DBSPEC_PARAM3_ORG ) {
@@ -56741,14 +58716,14 @@
 			reftype = FILTER_FURNITURE
 			return
 		}
 		if ( dbmode == DBMODE_REF_SPEC ) {
 			if ( dbspec == DBSPEC_TYPE ) {
-				return FILTER_FURNITURE
+				return 60000
 			}
 			if ( dbspec == DBSPEC_TYPE_MINOR ) {
-				return FILTER_NONE
+				return 99999
 			}
 			if ( dbspec == DBSPEC_VALUE_ORG ) {
 				return 35000
 			}
 			if ( dbspec == DBSPEC_PARAM3_ORG ) {
@@ -56803,14 +58778,14 @@
 			reftype = FILTER_FURNITURE
 			return
 		}
 		if ( dbmode == DBMODE_REF_SPEC ) {
 			if ( dbspec == DBSPEC_TYPE ) {
-				return FILTER_FURNITURE
+				return 60000
 			}
 			if ( dbspec == DBSPEC_TYPE_MINOR ) {
-				return FILTER_NONE
+				return 99999
 			}
 			if ( dbspec == DBSPEC_VALUE_ORG ) {
 				return 30000
 			}
 			if ( dbspec == DBSPEC_PARAM3_ORG ) {
@@ -56867,14 +58842,14 @@
 			reftype = FILTER_FURNITURE
 			return
 		}
 		if ( dbmode == DBMODE_REF_SPEC ) {
 			if ( dbspec == DBSPEC_TYPE ) {
-				return FILTER_FURNITURE
+				return 60000
 			}
 			if ( dbspec == DBSPEC_TYPE_MINOR ) {
-				return FILTER_NONE
+				return 99999
 			}
 			if ( dbspec == DBSPEC_VALUE_ORG ) {
 				return 25000
 			}
 			if ( dbspec == DBSPEC_PARAM3_ORG ) {
@@ -56928,14 +58903,14 @@
 			reftype = FILTER_FURNITURE
 			return
 		}
 		if ( dbmode == DBMODE_REF_SPEC ) {
 			if ( dbspec == DBSPEC_TYPE ) {
-				return FILTER_FURNITURE
+				return 60000
 			}
 			if ( dbspec == DBSPEC_TYPE_MINOR ) {
-				return FILTER_NONE
+				return 99999
 			}
 			if ( dbspec == DBSPEC_VALUE_ORG ) {
 				return 21000
 			}
 			if ( dbspec == DBSPEC_PARAM3_ORG ) {
@@ -56990,14 +58965,14 @@
 			reftype = FILTER_FURNITURE
 			return
 		}
 		if ( dbmode == DBMODE_REF_SPEC ) {
 			if ( dbspec == DBSPEC_TYPE ) {
-				return FILTER_FURNITURE
+				return 60000
 			}
 			if ( dbspec == DBSPEC_TYPE_MINOR ) {
-				return FILTER_NONE
+				return 99999
 			}
 			if ( dbspec == DBSPEC_VALUE_ORG ) {
 				return 18000
 			}
 			if ( dbspec == DBSPEC_PARAM3_ORG ) {
@@ -57054,14 +59029,14 @@
 			reftype = FILTER_FURNITURE
 			return
 		}
 		if ( dbmode == DBMODE_REF_SPEC ) {
 			if ( dbspec == DBSPEC_TYPE ) {
-				return FILTER_FURNITURE
+				return 60000
 			}
 			if ( dbspec == DBSPEC_TYPE_MINOR ) {
-				return FILTER_NONE
+				return 99999
 			}
 			if ( dbspec == DBSPEC_VALUE_ORG ) {
 				return 15000
 			}
 			if ( dbspec == DBSPEC_PARAM3_ORG ) {
@@ -57115,14 +59090,14 @@
 			reftype = FILTER_JUNK
 			return
 		}
 		if ( dbmode == DBMODE_REF_SPEC ) {
 			if ( dbspec == DBSPEC_TYPE ) {
-				return FILTER_JUNK
+				return 64000
 			}
 			if ( dbspec == DBSPEC_TYPE_MINOR ) {
-				return FILTER_NONE
+				return 99999
 			}
 			if ( dbspec == DBSPEC_VALUE_ORG ) {
 				return 5000
 			}
 			if ( dbspec == DBSPEC_PARAM3_ORG ) {
@@ -57173,11 +59148,11 @@
 			reftype = FILTER_WEAPON
 			reftypeminor = FILTER_WEAPON_SHORTSWORD
 			inv(INV_ITEM_NUM, ci) = 1
 			fixeditemenc = ENCHANT_ELEMENTAL_DMG * EXT_ENCHANTMENT + SKILL_RES_MIND, 150, ENCHANT_ELEMENTAL_DMG * EXT_ENCHANTMENT + SKILL_RES_NERVE, 150, ENCHANT_ELEMENTAL_DMG * EXT_ENCHANTMENT + SKILL_RES_SOUND, 400, ENCHANT_SKILL * EXT_ENCHANTMENT + SKILL_NORMAL_PERFORMER, -100, ENCHANT_PROC * EXT_ENCHANTMENT + ENCHANT_PROC_RAGING_ROAR, 400, 0
 			inv(INV_ITEM_EFFECT, ci) = EFFECT_PERFORM
-			ibitmod ITEM_BIT_PRECIOUS, ci, 1
+			ibitmod ITEM_BIT_PRECIOUS, ci, TRUE
 			inv(INV_ITEM_IDENTIFY_LEVEL, ci) = 500
 			fixlv = FIX_QUALITY_UNIQUE
 			return
 		}
 		if ( dbmode == DBMODE_REF ) {
@@ -57186,14 +59161,14 @@
 			reftype = FILTER_WEAPON
 			return
 		}
 		if ( dbmode == DBMODE_REF_SPEC ) {
 			if ( dbspec == DBSPEC_TYPE ) {
-				return FILTER_WEAPON
+				return 10000
 			}
 			if ( dbspec == DBSPEC_TYPE_MINOR ) {
-				return FILTER_WEAPON_SHORTSWORD
+				return 10003
 			}
 			if ( dbspec == DBSPEC_VALUE_ORG ) {
 				return 40000
 			}
 			if ( dbspec == DBSPEC_PARAM3_ORG ) {
@@ -57244,12 +59219,12 @@
 			inv(INV_ITEM_ID, ci) = ITEM_ID_GRANDEL
 			inv(INV_ITEM_PIC, ci) = xy2pic(18, 1)
 			reftype = FILTER_WEAPON
 			reftypeminor = FILTER_WEAPON_HEAVY_SWORD
 			inv(INV_ITEM_NUM, ci) = 1
-			fixeditemenc = ENCHANT_RESISTANCE * EXT_ENCHANTMENT + SKILL_RES_MAGIC, 300, ENCHANT_ELEMENTAL_DMG * EXT_ENCHANTMENT + SKILL_RES_MAGIC, 500, ENCHANT_ATTRIBUTE * EXT_ENCHANTMENT + SKILL_ATTR_MAG, -700, ENCHANT_SKILL * EXT_ENCHANTMENT + SKILL_NORMAL_CONTROL_MAGIC, -700, ENCHANT_REMOTE_BLOW, 300, 0
-			ibitmod ITEM_BIT_PRECIOUS, ci, 1
+			fixeditemenc = ENCHANT_RESISTANCE * EXT_ENCHANTMENT + SKILL_RES_MAGIC, 300, ENCHANT_ELEMENTAL_DMG * EXT_ENCHANTMENT + SKILL_RES_MAGIC, 500, ENCHANT_ATTRIBUTE * EXT_ENCHANTMENT + SKILL_ATTR_MAG, -700, ENCHANT_SKILL * EXT_ENCHANTMENT + SKILL_NORMAL_CONTROL_MAGIC, -700, 63, 300, 0
+			ibitmod ITEM_BIT_PRECIOUS, ci, TRUE
 			inv(INV_ITEM_IDENTIFY_LEVEL, ci) = 500
 			fixlv = FIX_QUALITY_UNIQUE
 			return
 		}
 		if ( dbmode == DBMODE_REF ) {
@@ -57258,14 +59233,14 @@
 			reftype = FILTER_WEAPON
 			return
 		}
 		if ( dbmode == DBMODE_REF_SPEC ) {
 			if ( dbspec == DBSPEC_TYPE ) {
-				return FILTER_WEAPON
+				return 10000
 			}
 			if ( dbspec == DBSPEC_TYPE_MINOR ) {
-				return FILTER_WEAPON_HEAVY_SWORD
+				return 10001
 			}
 			if ( dbspec == DBSPEC_VALUE_ORG ) {
 				return 40000
 			}
 			if ( dbspec == DBSPEC_PARAM3_ORG ) {
@@ -57310,12 +59285,12 @@
 			inv(INV_ITEM_ID, ci) = ITEM_ID_SUNBARARIA_HELM
 			inv(INV_ITEM_PIC, ci) = xy2pic(32, 1)
 			reftype = FILTER_HELM
 			reftypeminor = FILTER_HELM_LIGHT
 			inv(INV_ITEM_NUM, ci) = 1
-			fixeditemenc = ENCHANT_SUCK_BLOOD, 80, ENCHANT_RES_MUTATION, 100, ENCHANT_RES_PREGNANCY, 100, ENCHANT_RESISTANCE * EXT_ENCHANTMENT + SKILL_RES_NERVE, 250, ENCHANT_ATTRIBUTE * EXT_ENCHANTMENT + SKILL_ATTR_LER, 200, 0
-			ibitmod ITEM_BIT_PRECIOUS, ci, 1
+			fixeditemenc = 45, 80, 33, 100, 48, 100, ENCHANT_RESISTANCE * EXT_ENCHANTMENT + SKILL_RES_NERVE, 250, ENCHANT_ATTRIBUTE * EXT_ENCHANTMENT + SKILL_ATTR_LER, 200, 0
+			ibitmod ITEM_BIT_PRECIOUS, ci, TRUE
 			inv(INV_ITEM_IDENTIFY_LEVEL, ci) = 500
 			fixlv = FIX_QUALITY_UNIQUE
 			return
 		}
 		if ( dbmode == DBMODE_REF ) {
@@ -57324,14 +59299,14 @@
 			reftype = FILTER_HELM
 			return
 		}
 		if ( dbmode == DBMODE_REF_SPEC ) {
 			if ( dbspec == DBSPEC_TYPE ) {
-				return FILTER_HELM
+				return 12000
 			}
 			if ( dbspec == DBSPEC_TYPE_MINOR ) {
-				return FILTER_HELM_LIGHT
+				return 12002
 			}
 			if ( dbspec == DBSPEC_VALUE_ORG ) {
 				return 22000
 			}
 			if ( dbspec == DBSPEC_PARAM3_ORG ) {
@@ -57379,11 +59354,11 @@
 			inv(INV_ITEM_ID, ci) = ITEM_ID_WHIP
 			inv(INV_ITEM_PIC, ci) = xy2pic(4, 28)
 			reftype = FILTER_WEAPON
 			reftypeminor = FILTER_WEAPON_STAVE
 			inv(INV_ITEM_NUM, ci) = 1
-			fixeditemenc = ENCHANT_REMOTE_BLOW, 300, 0
+			fixeditemenc = 63, 300, 0
 			inv(INV_ITEM_IDENTIFY_LEVEL, ci) = 0
 			return
 		}
 		if ( dbmode == DBMODE_REF ) {
 			ichargelevel = 0
@@ -57391,14 +59366,14 @@
 			reftype = FILTER_WEAPON
 			return
 		}
 		if ( dbmode == DBMODE_REF_SPEC ) {
 			if ( dbspec == DBSPEC_TYPE ) {
-				return FILTER_WEAPON
+				return 10000
 			}
 			if ( dbspec == DBSPEC_TYPE_MINOR ) {
-				return FILTER_WEAPON_STAVE
+				return 10006
 			}
 			if ( dbspec == DBSPEC_VALUE_ORG ) {
 				return 500
 			}
 			if ( dbspec == DBSPEC_PARAM3_ORG ) {
@@ -57458,14 +59433,14 @@
 			reftype = FILTER_WEAPON
 			return
 		}
 		if ( dbmode == DBMODE_REF_SPEC ) {
 			if ( dbspec == DBSPEC_TYPE ) {
-				return FILTER_WEAPON
+				return 10000
 			}
 			if ( dbspec == DBSPEC_TYPE_MINOR ) {
-				return FILTER_WEAPON_CLUB
+				return 10004
 			}
 			if ( dbspec == DBSPEC_VALUE_ORG ) {
 				return 10000
 			}
 			if ( dbspec == DBSPEC_PARAM3_ORG ) {
@@ -57513,11 +59488,11 @@
 			inv(INV_ITEM_ID, ci) = ITEM_ID_CHAINSICKLE
 			inv(INV_ITEM_PIC, ci) = xy2pic(6, 28)
 			reftype = FILTER_WEAPON
 			reftypeminor = FILTER_WEAPON_SICKLE
 			inv(INV_ITEM_NUM, ci) = 1
-			fixeditemenc = ENCHANT_REMOTE_BLOW, 100, 0
+			fixeditemenc = 63, 100, 0
 			inv(INV_ITEM_IDENTIFY_LEVEL, ci) = 0
 			return
 		}
 		if ( dbmode == DBMODE_REF ) {
 			ichargelevel = 0
@@ -57525,14 +59500,14 @@
 			reftype = FILTER_WEAPON
 			return
 		}
 		if ( dbmode == DBMODE_REF_SPEC ) {
 			if ( dbspec == DBSPEC_TYPE ) {
-				return FILTER_WEAPON
+				return 10000
 			}
 			if ( dbspec == DBSPEC_TYPE_MINOR ) {
-				return FILTER_WEAPON_SICKLE
+				return 10011
 			}
 			if ( dbspec == DBSPEC_VALUE_ORG ) {
 				return 700
 			}
 			if ( dbspec == DBSPEC_PARAM3_ORG ) {
@@ -57593,14 +59568,14 @@
 			reftype = FILTER_RANGE
 			return
 		}
 		if ( dbmode == DBMODE_REF_SPEC ) {
 			if ( dbspec == DBSPEC_TYPE ) {
-				return FILTER_RANGE
+				return 24000
 			}
 			if ( dbspec == DBSPEC_TYPE_MINOR ) {
-				return FILTER_RANGE_CROSSBOW
+				return 24003
 			}
 			if ( dbspec == DBSPEC_VALUE_ORG ) {
 				return 1200
 			}
 			if ( dbspec == DBSPEC_PARAM3_ORG ) {
@@ -57663,14 +59638,14 @@
 			reftype = FILTER_ITEM_FOOD
 			return
 		}
 		if ( dbmode == DBMODE_REF_SPEC ) {
 			if ( dbspec == DBSPEC_TYPE ) {
-				return FILTER_ITEM_FOOD
+				return 57000
 			}
 			if ( dbspec == DBSPEC_TYPE_MINOR ) {
-				return FILTER_NONE
+				return 99999
 			}
 			if ( dbspec == DBSPEC_VALUE_ORG ) {
 				return 6000
 			}
 			if ( dbspec == DBSPEC_PARAM3_ORG ) {
@@ -57717,12 +59692,12 @@
 			inv(INV_ITEM_ID, ci) = ITEM_ID_N97_CANNON
 			inv(INV_ITEM_PIC, ci) = xy2pic(32, 12)
 			reftype = FILTER_RANGE
 			reftypeminor = FILTER_RANGE_PISTOL
 			inv(INV_ITEM_NUM, ci) = 1
-			fixeditemenc = ENCHANT_PROC * EXT_ENCHANTMENT + ENCHANT_PROC_DECAPITATION, 60, ENCHANT_PROC * EXT_ENCHANTMENT + ENCHANT_PROC_SHINING_WAVE, 300, ENCHANT_RESISTANCE * EXT_ENCHANTMENT + SKILL_RES_MAGIC, 600, ENCHANT_PREVENT_TELEPORT, 100, 0
-			ibitmod ITEM_BIT_PRECIOUS, ci, 1
+			fixeditemenc = ENCHANT_PROC * EXT_ENCHANTMENT + ENCHANT_PROC_DECAPITATION, 60, ENCHANT_PROC * EXT_ENCHANTMENT + ENCHANT_PROC_SHINING_WAVE, 300, ENCHANT_RESISTANCE * EXT_ENCHANTMENT + SKILL_RES_MAGIC, 600, 22, 100, 0
+			ibitmod ITEM_BIT_PRECIOUS, ci, TRUE
 			inv(INV_ITEM_IDENTIFY_LEVEL, ci) = 500
 			fixlv = FIX_QUALITY_UNIQUE
 			return
 		}
 		if ( dbmode == DBMODE_REF ) {
@@ -57731,14 +59706,14 @@
 			reftype = FILTER_RANGE
 			return
 		}
 		if ( dbmode == DBMODE_REF_SPEC ) {
 			if ( dbspec == DBSPEC_TYPE ) {
-				return FILTER_RANGE
+				return 24000
 			}
 			if ( dbspec == DBSPEC_TYPE_MINOR ) {
-				return FILTER_RANGE_PISTOL
+				return 24020
 			}
 			if ( dbspec == DBSPEC_VALUE_ORG ) {
 				return 40000
 			}
 			if ( dbspec == DBSPEC_PARAM3_ORG ) {
@@ -57786,12 +59761,12 @@
 			inv(INV_ITEM_ID, ci) = ITEM_ID_TRISHULA
 			inv(INV_ITEM_PIC, ci) = xy2pic(2, 28)
 			reftype = FILTER_WEAPON
 			reftypeminor = FILTER_WEAPON_POLEARM
 			inv(INV_ITEM_NUM, ci) = 1
-			fixeditemenc = ENCHANT_ELEMENTAL_DMG * EXT_ENCHANTMENT + SKILL_RES_COLD, 400, ENCHANT_PIERCING_CHANCE, 500, ENCHANT_PROC * EXT_ENCHANTMENT + ENCHANT_PROC_ICE_BOLT, 1000, ENCHANT_RES_FEAR, 100, 0
-			ibitmod ITEM_BIT_PRECIOUS, ci, 1
+			fixeditemenc = ENCHANT_ELEMENTAL_DMG * EXT_ENCHANTMENT + SKILL_RES_COLD, 400, 39, 500, ENCHANT_PROC * EXT_ENCHANTMENT + ENCHANT_PROC_ICE_BOLT, 1000, 84, 200, 26, 100, 0
+			ibitmod ITEM_BIT_PRECIOUS, ci, TRUE
 			inv(INV_ITEM_IDENTIFY_LEVEL, ci) = 500
 			fixlv = FIX_QUALITY_UNIQUE
 			return
 		}
 		if ( dbmode == DBMODE_REF ) {
@@ -57800,14 +59775,14 @@
 			reftype = FILTER_WEAPON
 			return
 		}
 		if ( dbmode == DBMODE_REF_SPEC ) {
 			if ( dbspec == DBSPEC_TYPE ) {
-				return FILTER_WEAPON
+				return 10000
 			}
 			if ( dbspec == DBSPEC_TYPE_MINOR ) {
-				return FILTER_WEAPON_POLEARM
+				return 10007
 			}
 			if ( dbspec == DBSPEC_VALUE_ORG ) {
 				return 40000
 			}
 			if ( dbspec == DBSPEC_PARAM3_ORG ) {
@@ -57855,12 +59830,12 @@
 			inv(INV_ITEM_ID, ci) = ITEM_ID_HOUSENKA
 			inv(INV_ITEM_PIC, ci) = xy2pic(1, 28)
 			reftype = FILTER_WEAPON
 			reftypeminor = FILTER_WEAPON_HEAVY_SWORD
 			inv(INV_ITEM_NUM, ci) = 1
-			fixeditemenc = ENCHANT_RESISTANCE * EXT_ENCHANTMENT + SKILL_RES_FIRE, -150, ENCHANT_ELEMENTAL_DMG * EXT_ENCHANTMENT + SKILL_RES_FIRE, 500, ENCHANT_PROC * EXT_ENCHANTMENT + ENCHANT_PROC_HERO, 500, ENCHANT_PROC * EXT_ENCHANTMENT + ENCHANT_PROC_DECAPITATION, 80, ENCHANT_REFLECT_MAGIC, 100, 0
-			ibitmod ITEM_BIT_PRECIOUS, ci, 1
+			fixeditemenc = ENCHANT_RESISTANCE * EXT_ENCHANTMENT + SKILL_RES_FIRE, -150, ENCHANT_ELEMENTAL_DMG * EXT_ENCHANTMENT + SKILL_RES_FIRE, 500, ENCHANT_PROC * EXT_ENCHANTMENT + ENCHANT_PROC_HERO, 500, ENCHANT_PROC * EXT_ENCHANTMENT + ENCHANT_PROC_DECAPITATION, 80, 62, 100, 0
+			ibitmod ITEM_BIT_PRECIOUS, ci, TRUE
 			inv(INV_ITEM_IDENTIFY_LEVEL, ci) = 500
 			fixlv = FIX_QUALITY_UNIQUE
 			return
 		}
 		if ( dbmode == DBMODE_REF ) {
@@ -57869,14 +59844,14 @@
 			reftype = FILTER_WEAPON
 			return
 		}
 		if ( dbmode == DBMODE_REF_SPEC ) {
 			if ( dbspec == DBSPEC_TYPE ) {
-				return FILTER_WEAPON
+				return 10000
 			}
 			if ( dbspec == DBSPEC_TYPE_MINOR ) {
-				return FILTER_WEAPON_HEAVY_SWORD
+				return 10001
 			}
 			if ( dbspec == DBSPEC_VALUE_ORG ) {
 				return 40000
 			}
 			if ( dbspec == DBSPEC_PARAM3_ORG ) {
@@ -57923,12 +59898,12 @@
 			inv(INV_ITEM_ID, ci) = ITEM_ID_OTOGIRI
 			inv(INV_ITEM_PIC, ci) = xy2pic(19, 26)
 			reftype = FILTER_SHIELD
 			reftypeminor = FILTER_SHIELD_SMALL
 			inv(INV_ITEM_NUM, ci) = 1
-			fixeditemenc = ENCHANT_RESISTANCE * EXT_ENCHANTMENT + SKILL_RES_SOUND, 300, ENCHANT_SKILL * EXT_ENCHANTMENT + SKILL_NORMAL_TACTICS, 350, ENCHANT_SKILL * EXT_ENCHANTMENT + SKILL_NORMAL_CASTING, 350, ENCHANT_ENHANCE_SPELL, 300, ENCHANT_EXTRA_MELEE, 100, 0
-			ibitmod ITEM_BIT_PRECIOUS, ci, 1
+			fixeditemenc = ENCHANT_RESISTANCE * EXT_ENCHANTMENT + SKILL_RES_SOUND, 300, ENCHANT_SKILL * EXT_ENCHANTMENT + SKILL_NORMAL_TACTICS, 350, ENCHANT_SKILL * EXT_ENCHANTMENT + SKILL_NORMAL_CASTING, 350, 34, 300, 50, 100, 0
+			ibitmod ITEM_BIT_PRECIOUS, ci, TRUE
 			inv(INV_ITEM_IDENTIFY_LEVEL, ci) = 500
 			fixlv = FIX_QUALITY_UNIQUE
 			return
 		}
 		if ( dbmode == DBMODE_REF ) {
@@ -57937,14 +59912,14 @@
 			reftype = FILTER_SHIELD
 			return
 		}
 		if ( dbmode == DBMODE_REF_SPEC ) {
 			if ( dbspec == DBSPEC_TYPE ) {
-				return FILTER_SHIELD
+				return 14000
 			}
 			if ( dbspec == DBSPEC_TYPE_MINOR ) {
-				return FILTER_SHIELD_SMALL
+				return 14003
 			}
 			if ( dbspec == DBSPEC_VALUE_ORG ) {
 				return 30000
 			}
 			if ( dbspec == DBSPEC_PARAM3_ORG ) {
@@ -58000,14 +59975,14 @@
 			reftype = FILTER_ITEM_TOOL
 			return
 		}
 		if ( dbmode == DBMODE_REF_SPEC ) {
 			if ( dbspec == DBSPEC_TYPE ) {
-				return FILTER_ITEM_TOOL
+				return 59000
 			}
 			if ( dbspec == DBSPEC_TYPE_MINOR ) {
-				return FILTER_NONE
+				return 99999
 			}
 			if ( dbspec == DBSPEC_VALUE_ORG ) {
 				return 16500
 			}
 			if ( dbspec == DBSPEC_PARAM3_ORG ) {
@@ -58065,14 +60040,14 @@
 			reftype = FILTER_ITEM_FOOD
 			return
 		}
 		if ( dbmode == DBMODE_REF_SPEC ) {
 			if ( dbspec == DBSPEC_TYPE ) {
-				return FILTER_ITEM_FOOD
+				return 57000
 			}
 			if ( dbspec == DBSPEC_TYPE_MINOR ) {
-				return FILTER_NONE
+				return 99999
 			}
 			if ( dbspec == DBSPEC_VALUE_ORG ) {
 				return 10000
 			}
 			if ( dbspec == DBSPEC_PARAM3_ORG ) {
@@ -58127,14 +60102,14 @@
 			reftype = FILTER_ITEM_FOOD
 			return
 		}
 		if ( dbmode == DBMODE_REF_SPEC ) {
 			if ( dbspec == DBSPEC_TYPE ) {
-				return FILTER_ITEM_FOOD
+				return 57000
 			}
 			if ( dbspec == DBSPEC_TYPE_MINOR ) {
-				return FILTER_NONE
+				return 99999
 			}
 			if ( dbspec == DBSPEC_VALUE_ORG ) {
 				return 400
 			}
 			if ( dbspec == DBSPEC_PARAM3_ORG ) {
@@ -58191,14 +60166,14 @@
 			reftype = FILTER_ITEM_FOOD
 			return
 		}
 		if ( dbmode == DBMODE_REF_SPEC ) {
 			if ( dbspec == DBSPEC_TYPE ) {
-				return FILTER_ITEM_FOOD
+				return 57000
 			}
 			if ( dbspec == DBSPEC_TYPE_MINOR ) {
-				return FILTER_ITEM_FOOD_FRUIT
+				return 57004
 			}
 			if ( dbspec == DBSPEC_VALUE_ORG ) {
 				return 210
 			}
 			if ( dbspec == DBSPEC_PARAM3_ORG ) {
@@ -58253,14 +60228,14 @@
 			reftype = FILTER_ITEM_FOOD
 			return
 		}
 		if ( dbmode == DBMODE_REF_SPEC ) {
 			if ( dbspec == DBSPEC_TYPE ) {
-				return FILTER_ITEM_FOOD
+				return 57000
 			}
 			if ( dbspec == DBSPEC_TYPE_MINOR ) {
-				return FILTER_NONE
+				return 99999
 			}
 			if ( dbspec == DBSPEC_VALUE_ORG ) {
 				return 13000
 			}
 			if ( dbspec == DBSPEC_PARAM3_ORG ) {
@@ -58315,14 +60290,14 @@
 			reftype = FILTER_ITEM_FOOD
 			return
 		}
 		if ( dbmode == DBMODE_REF_SPEC ) {
 			if ( dbspec == DBSPEC_TYPE ) {
-				return FILTER_ITEM_FOOD
+				return 57000
 			}
 			if ( dbspec == DBSPEC_TYPE_MINOR ) {
-				return FILTER_NONE
+				return 99999
 			}
 			if ( dbspec == DBSPEC_VALUE_ORG ) {
 				return 60
 			}
 			if ( dbspec == DBSPEC_PARAM3_ORG ) {
@@ -58376,14 +60351,14 @@
 			reftype = FILTER_JUNK
 			return
 		}
 		if ( dbmode == DBMODE_REF_SPEC ) {
 			if ( dbspec == DBSPEC_TYPE ) {
-				return FILTER_JUNK
+				return 64000
 			}
 			if ( dbspec == DBSPEC_TYPE_MINOR ) {
-				return FILTER_NONE
+				return 99999
 			}
 			if ( dbspec == DBSPEC_VALUE_ORG ) {
 				return 2800
 			}
 			if ( dbspec == DBSPEC_PARAM3_ORG ) {
@@ -58428,12 +60403,12 @@
 			inv(INV_ITEM_ID, ci) = ITEM_ID_ASTEROID_BELT
 			inv(INV_ITEM_PIC, ci) = xy2pic(12, 14)
 			reftype = FILTER_GIRDLE
 			reftypeminor = FILTER_GIRDLE_MEDIUM
 			inv(INV_ITEM_NUM, ci) = 1
-			fixeditemenc = ENCHANT_RESISTANCE * EXT_ENCHANTMENT + SKILL_RES_MAGIC, 600, ENCHANT_RESISTANCE * EXT_ENCHANTMENT + SKILL_RES_FIRE, 150, ENCHANT_IMMUNE_DAMAGE, 150, ENCHANT_ATTRIBUTE * EXT_ENCHANTMENT + SKILL_ATTR_CON, 400, ENCHANT_ATTRIBUTE * EXT_ENCHANTMENT + SKILL_ATTR_MAG, 400, 0
-			ibitmod ITEM_BIT_PRECIOUS, ci, 1
+			fixeditemenc = ENCHANT_RESISTANCE * EXT_ENCHANTMENT + SKILL_RES_MAGIC, 600, ENCHANT_RESISTANCE * EXT_ENCHANTMENT + SKILL_RES_FIRE, 150, 53, 150, ENCHANT_ATTRIBUTE * EXT_ENCHANTMENT + SKILL_ATTR_CON, 400, ENCHANT_ATTRIBUTE * EXT_ENCHANTMENT + SKILL_ATTR_MAG, 400, 0
+			ibitmod ITEM_BIT_PRECIOUS, ci, TRUE
 			inv(INV_ITEM_IDENTIFY_LEVEL, ci) = 500
 			fixlv = FIX_QUALITY_UNIQUE
 			return
 		}
 		if ( dbmode == DBMODE_REF ) {
@@ -58442,14 +60417,14 @@
 			reftype = FILTER_GIRDLE
 			return
 		}
 		if ( dbmode == DBMODE_REF_SPEC ) {
 			if ( dbspec == DBSPEC_TYPE ) {
-				return FILTER_GIRDLE
+				return 19000
 			}
 			if ( dbspec == DBSPEC_TYPE_MINOR ) {
-				return FILTER_GIRDLE_MEDIUM
+				return 19001
 			}
 			if ( dbspec == DBSPEC_VALUE_ORG ) {
 				return 48000
 			}
 			if ( dbspec == DBSPEC_PARAM3_ORG ) {
@@ -58511,14 +60486,14 @@
 			reftype = FILTER_RANGE
 			return
 		}
 		if ( dbmode == DBMODE_REF_SPEC ) {
 			if ( dbspec == DBSPEC_TYPE ) {
-				return FILTER_RANGE
+				return 24000
 			}
 			if ( dbspec == DBSPEC_TYPE_MINOR ) {
-				return FILTER_RANGE_ROCK_THROW
+				return 24030
 			}
 			if ( dbspec == DBSPEC_VALUE_ORG ) {
 				return 1200
 			}
 			if ( dbspec == DBSPEC_PARAM3_ORG ) {
@@ -58578,14 +60553,14 @@
 			reftype = FILTER_SHIELD
 			return
 		}
 		if ( dbmode == DBMODE_REF_SPEC ) {
 			if ( dbspec == DBSPEC_TYPE ) {
-				return FILTER_SHIELD
+				return 14000
 			}
 			if ( dbspec == DBSPEC_TYPE_MINOR ) {
-				return FILTER_SHIELD_SMALL
+				return 14003
 			}
 			if ( dbspec == DBSPEC_VALUE_ORG ) {
 				return 2200
 			}
 			if ( dbspec == DBSPEC_PARAM3_ORG ) {
@@ -58645,14 +60620,14 @@
 			reftype = FILTER_RANGE
 			return
 		}
 		if ( dbmode == DBMODE_REF_SPEC ) {
 			if ( dbspec == DBSPEC_TYPE ) {
-				return FILTER_RANGE
+				return 24000
 			}
 			if ( dbspec == DBSPEC_TYPE_MINOR ) {
-				return FILTER_RANGE_CROSSBOW
+				return 24003
 			}
 			if ( dbspec == DBSPEC_VALUE_ORG ) {
 				return 900
 			}
 			if ( dbspec == DBSPEC_PARAM3_ORG ) {
@@ -58714,14 +60689,14 @@
 			reftype = FILTER_JUNK
 			return
 		}
 		if ( dbmode == DBMODE_REF_SPEC ) {
 			if ( dbspec == DBSPEC_TYPE ) {
-				return FILTER_JUNK
+				return 64000
 			}
 			if ( dbspec == DBSPEC_TYPE_MINOR ) {
-				return FILTER_NONE
+				return 99999
 			}
 			if ( dbspec == DBSPEC_VALUE_ORG ) {
 				return 3000
 			}
 			if ( dbspec == DBSPEC_PARAM3_ORG ) {
@@ -58775,14 +60750,14 @@
 			reftype = FILTER_ENVIRONMENT
 			return
 		}
 		if ( dbmode == DBMODE_REF_SPEC ) {
 			if ( dbspec == DBSPEC_TYPE ) {
-				return FILTER_ENVIRONMENT
+				return 80000
 			}
 			if ( dbspec == DBSPEC_TYPE_MINOR ) {
-				return FILTER_NONE
+				return 99999
 			}
 			if ( dbspec == DBSPEC_VALUE_ORG ) {
 				return 1500
 			}
 			if ( dbspec == DBSPEC_PARAM3_ORG ) {
@@ -58836,14 +60811,14 @@
 			reftype = FILTER_ITEM_POTION
 			return
 		}
 		if ( dbmode == DBMODE_REF_SPEC ) {
 			if ( dbspec == DBSPEC_TYPE ) {
-				return FILTER_ITEM_POTION
+				return 52000
 			}
 			if ( dbspec == DBSPEC_TYPE_MINOR ) {
-				return FILTER_NONE
+				return 99999
 			}
 			if ( dbspec == DBSPEC_VALUE_ORG ) {
 				return 300
 			}
 			if ( dbspec == DBSPEC_PARAM3_ORG ) {
@@ -58895,11 +60870,11 @@
 			inv(INV_ITEM_PIC, ci) = xy2pic(8, 31)
 			reftype = FILTER_ITEM_TOOL
 			reftypeminor = FILTER_NOTHING
 			inv(INV_ITEM_NUM, ci) = 1
 			fixeditemenc = 0
-			inv(INV_ITEM_EFFECT, ci) = EFFECT_PIPE
+			inv(INV_ITEM_EFFECT, ci) = effpipe
 			inv(INV_ITEM_IDENTIFY_LEVEL, ci) = 0
 			return
 		}
 		if ( dbmode == DBMODE_REF ) {
 			ichargelevel = 0
@@ -58907,14 +60882,14 @@
 			reftype = FILTER_ITEM_TOOL
 			return
 		}
 		if ( dbmode == DBMODE_REF_SPEC ) {
 			if ( dbspec == DBSPEC_TYPE ) {
-				return FILTER_ITEM_TOOL
+				return 59000
 			}
 			if ( dbspec == DBSPEC_TYPE_MINOR ) {
-				return FILTER_NONE
+				return 99999
 			}
 			if ( dbspec == DBSPEC_VALUE_ORG ) {
 				return 9000
 			}
 			if ( dbspec == DBSPEC_PARAM3_ORG ) {
@@ -58972,14 +60947,14 @@
 			reftype = FILTER_ITEM_FOOD
 			return
 		}
 		if ( dbmode == DBMODE_REF_SPEC ) {
 			if ( dbspec == DBSPEC_TYPE ) {
-				return FILTER_ITEM_FOOD
+				return 57000
 			}
 			if ( dbspec == DBSPEC_TYPE_MINOR ) {
-				return FILTER_JUNK
+				return 64000
 			}
 			if ( dbspec == DBSPEC_VALUE_ORG ) {
 				return 200
 			}
 			if ( dbspec == DBSPEC_PARAM3_ORG ) {
@@ -59023,12 +60998,12 @@
 			reftype = FILTER_ITEM_TOOL
 			reftypeminor = FILTER_NOTHING
 			inv(INV_ITEM_NUM, ci) = 1
 			fixeditemenc = 0
 			inv(INV_ITEM_EFFECT, ci) = EFFECT_WAKEUP_NEFIA
-			ibitmod ITEM_BIT_PRECIOUS, ci, 1
-			ibitmod ITEM_BIT_PERIOD, ci, 1
+			ibitmod ITEM_BIT_PRECIOUS, ci, TRUE
+			ibitmod ITEM_BIT_PERIOD, ci, TRUE
 			inv(INV_ITEM_PARAM3, ci) = 48
 			inv(INV_ITEM_IDENTIFY_LEVEL, ci) = 0
 			fixlv = FIX_QUALITY_UNIQUE
 			return
 		}
@@ -59038,14 +61013,14 @@
 			reftype = FILTER_ITEM_TOOL
 			return
 		}
 		if ( dbmode == DBMODE_REF_SPEC ) {
 			if ( dbspec == DBSPEC_TYPE ) {
-				return FILTER_ITEM_TOOL
+				return 59000
 			}
 			if ( dbspec == DBSPEC_TYPE_MINOR ) {
-				return FILTER_NONE
+				return 99999
 			}
 			if ( dbspec == DBSPEC_VALUE_ORG ) {
 				return 50000
 			}
 			if ( dbspec == DBSPEC_PARAM3_ORG ) {
@@ -59100,14 +61075,14 @@
 			reftype = FILTER_ITEM_TOOL
 			return
 		}
 		if ( dbmode == DBMODE_REF_SPEC ) {
 			if ( dbspec == DBSPEC_TYPE ) {
-				return FILTER_ITEM_TOOL
+				return 59000
 			}
 			if ( dbspec == DBSPEC_TYPE_MINOR ) {
-				return FILTER_NONE
+				return 99999
 			}
 			if ( dbspec == DBSPEC_VALUE_ORG ) {
 				return 5000
 			}
 			if ( dbspec == DBSPEC_PARAM3_ORG ) {
@@ -59167,14 +61142,14 @@
 			reftype = FILTER_FURNITURE
 			return
 		}
 		if ( dbmode == DBMODE_REF_SPEC ) {
 			if ( dbspec == DBSPEC_TYPE ) {
-				return FILTER_FURNITURE
+				return 60000
 			}
 			if ( dbspec == DBSPEC_TYPE_MINOR ) {
-				return FILTER_FURNITURE_INSTRUMENT
+				return 60005
 			}
 			if ( dbspec == DBSPEC_VALUE_ORG ) {
 				return 1500
 			}
 			if ( dbspec == DBSPEC_PARAM3_ORG ) {
@@ -59231,14 +61206,14 @@
 			reftype = FILTER_FURNITURE
 			return
 		}
 		if ( dbmode == DBMODE_REF_SPEC ) {
 			if ( dbspec == DBSPEC_TYPE ) {
-				return FILTER_FURNITURE
+				return 60000
 			}
 			if ( dbspec == DBSPEC_TYPE_MINOR ) {
-				return FILTER_FURNITURE_INSTRUMENT
+				return 60005
 			}
 			if ( dbspec == DBSPEC_VALUE_ORG ) {
 				return 1000
 			}
 			if ( dbspec == DBSPEC_PARAM3_ORG ) {
@@ -59295,14 +61270,14 @@
 			reftype = FILTER_FURNITURE
 			return
 		}
 		if ( dbmode == DBMODE_REF_SPEC ) {
 			if ( dbspec == DBSPEC_TYPE ) {
-				return FILTER_FURNITURE
+				return 60000
 			}
 			if ( dbspec == DBSPEC_TYPE_MINOR ) {
-				return FILTER_FURNITURE_INSTRUMENT
+				return 60005
 			}
 			if ( dbspec == DBSPEC_VALUE_ORG ) {
 				return 8000
 			}
 			if ( dbspec == DBSPEC_PARAM3_ORG ) {
@@ -59356,14 +61331,14 @@
 			reftype = FILTER_ORE
 			return
 		}
 		if ( dbmode == DBMODE_REF_SPEC ) {
 			if ( dbspec == DBSPEC_TYPE ) {
-				return FILTER_ORE
+				return 77000
 			}
 			if ( dbspec == DBSPEC_TYPE_MINOR ) {
-				return FILTER_ORE_GEM
+				return 77001
 			}
 			if ( dbspec == DBSPEC_VALUE_ORG ) {
 				return 12000
 			}
 			if ( dbspec == DBSPEC_PARAM3_ORG ) {
@@ -59425,14 +61400,14 @@
 			reftype = FILTER_ORE
 			return
 		}
 		if ( dbmode == DBMODE_REF_SPEC ) {
 			if ( dbspec == DBSPEC_TYPE ) {
-				return FILTER_ORE
+				return 77000
 			}
 			if ( dbspec == DBSPEC_TYPE_MINOR ) {
-				return FILTER_ORE_GEM
+				return 77001
 			}
 			if ( dbspec == DBSPEC_VALUE_ORG ) {
 				return 22200
 			}
 			if ( dbspec == DBSPEC_PARAM3_ORG ) {
@@ -59494,14 +61469,14 @@
 			reftype = FILTER_ORE
 			return
 		}
 		if ( dbmode == DBMODE_REF_SPEC ) {
 			if ( dbspec == DBSPEC_TYPE ) {
-				return FILTER_ORE
+				return 77000
 			}
 			if ( dbspec == DBSPEC_TYPE_MINOR ) {
-				return FILTER_ORE_GEM
+				return 77001
 			}
 			if ( dbspec == DBSPEC_VALUE_ORG ) {
 				return 36900
 			}
 			if ( dbspec == DBSPEC_PARAM3_ORG ) {
@@ -59555,12 +61530,12 @@
 			inv(INV_ITEM_ID, ci) = ITEM_ID_GUR_BAGH_NAKH
 			inv(INV_ITEM_PIC, ci) = xy2pic(19, 26)
 			reftype = FILTER_SHIELD
 			reftypeminor = FILTER_SHIELD_SMALL
 			inv(INV_ITEM_NUM, ci) = 1
-			fixeditemenc = ENCHANT_SKILL * EXT_ENCHANTMENT + SKILL_WEAPON_MARTIAL_ARTS, 500, ENCHANT_SKILL * EXT_ENCHANTMENT + SKILL_NORMAL_EVASION, 1000, ENCHANT_SKILL * EXT_ENCHANTMENT + SKILL_NORMAL_GREATER_EVASION, 1000, ENCHANT_ATTRIBUTE * EXT_ENCHANTMENT + SKILL_ATTR_LUC, -1000, ENCHANT_EXTRA_MELEE, 150, ENCHANT_RES_FEAR, 100, 0
-			ibitmod ITEM_BIT_PRECIOUS, ci, 1
+			fixeditemenc = ENCHANT_SKILL * EXT_ENCHANTMENT + SKILL_WEAPON_MARTIAL_ARTS, 500, ENCHANT_SKILL * EXT_ENCHANTMENT + SKILL_NORMAL_EVASION, 1000, ENCHANT_SKILL * EXT_ENCHANTMENT + SKILL_NORMAL_GREATER_EVASION, 1000, ENCHANT_ATTRIBUTE * EXT_ENCHANTMENT + SKILL_ATTR_LUC, -1000, 50, 150, 26, 100, 0
+			ibitmod ITEM_BIT_PRECIOUS, ci, TRUE
 			inv(INV_ITEM_IDENTIFY_LEVEL, ci) = 500
 			fixlv = FIX_QUALITY_UNIQUE
 			return
 		}
 		if ( dbmode == DBMODE_REF ) {
@@ -59569,14 +61544,14 @@
 			reftype = FILTER_SHIELD
 			return
 		}
 		if ( dbmode == DBMODE_REF_SPEC ) {
 			if ( dbspec == DBSPEC_TYPE ) {
-				return FILTER_SHIELD
+				return 14000
 			}
 			if ( dbspec == DBSPEC_TYPE_MINOR ) {
-				return FILTER_SHIELD_SMALL
+				return 14003
 			}
 			if ( dbspec == DBSPEC_VALUE_ORG ) {
 				return 40000
 			}
 			if ( dbspec == DBSPEC_PARAM3_ORG ) {
@@ -59624,12 +61599,12 @@
 			inv(INV_ITEM_ID, ci) = ITEM_ID_ASTRAL_SICKLE
 			inv(INV_ITEM_PIC, ci) = xy2pic(32, 26)
 			reftype = FILTER_WEAPON
 			reftypeminor = FILTER_WEAPON_SICKLE
 			inv(INV_ITEM_NUM, ci) = 1
-			fixeditemenc = ENCHANT_RESISTANCE * EXT_ENCHANTMENT + SKILL_RES_NETHER, 350, ENCHANT_CURE_BLEEDING, 100, ENCHANT_EXTRA_MELEE, 150, ENCHANT_RES_SLEEP, 100, ENCHANT_ATTRIBUTE * EXT_ENCHANTMENT + SKILL_ATTR_WIL, 800, ENCHANT_PROC * EXT_ENCHANTMENT + ENCHANT_PROC_DECAPITATION, 100, 0
-			ibitmod ITEM_BIT_PRECIOUS, ci, 1
+			fixeditemenc = ENCHANT_RESISTANCE * EXT_ENCHANTMENT + SKILL_RES_NETHER, 350, 55, 100, 50, 150, 27, 100, ENCHANT_ATTRIBUTE * EXT_ENCHANTMENT + SKILL_ATTR_WIL, 800, ENCHANT_PROC * EXT_ENCHANTMENT + ENCHANT_PROC_DECAPITATION, 100, 0
+			ibitmod ITEM_BIT_PRECIOUS, ci, TRUE
 			inv(INV_ITEM_IDENTIFY_LEVEL, ci) = 500
 			fixlv = FIX_QUALITY_UNIQUE
 			return
 		}
 		if ( dbmode == DBMODE_REF ) {
@@ -59638,14 +61613,14 @@
 			reftype = FILTER_WEAPON
 			return
 		}
 		if ( dbmode == DBMODE_REF_SPEC ) {
 			if ( dbspec == DBSPEC_TYPE ) {
-				return FILTER_WEAPON
+				return 10000
 			}
 			if ( dbspec == DBSPEC_TYPE_MINOR ) {
-				return FILTER_WEAPON_SICKLE
+				return 10011
 			}
 			if ( dbspec == DBSPEC_VALUE_ORG ) {
 				return 40000
 			}
 			if ( dbspec == DBSPEC_PARAM3_ORG ) {
@@ -59699,14 +61674,14 @@
 			reftype = FILTER_JUNK
 			return
 		}
 		if ( dbmode == DBMODE_REF_SPEC ) {
 			if ( dbspec == DBSPEC_TYPE ) {
-				return FILTER_JUNK
+				return 64000
 			}
 			if ( dbspec == DBSPEC_TYPE_MINOR ) {
-				return FILTER_NONE
+				return 99999
 			}
 			if ( dbspec == DBSPEC_VALUE_ORG ) {
 				return 800
 			}
 			if ( dbspec == DBSPEC_PARAM3_ORG ) {
@@ -59761,14 +61736,14 @@
 			reftype = FILTER_ITEM_TOOL
 			return
 		}
 		if ( dbmode == DBMODE_REF_SPEC ) {
 			if ( dbspec == DBSPEC_TYPE ) {
-				return FILTER_ITEM_TOOL
+				return 59000
 			}
 			if ( dbspec == DBSPEC_TYPE_MINOR ) {
-				return FILTER_NONE
+				return 99999
 			}
 			if ( dbspec == DBSPEC_VALUE_ORG ) {
 				return 100
 			}
 			if ( dbspec == DBSPEC_PARAM3_ORG ) {
@@ -59828,14 +61803,14 @@
 			reftype = FILTER_ITEM_FOOD
 			return
 		}
 		if ( dbmode == DBMODE_REF_SPEC ) {
 			if ( dbspec == DBSPEC_TYPE ) {
-				return FILTER_ITEM_FOOD
+				return 57000
 			}
 			if ( dbspec == DBSPEC_TYPE_MINOR ) {
-				return FILTER_ITEM_FOOD_VEGETABLE
+				return 57003
 			}
 			if ( dbspec == DBSPEC_VALUE_ORG ) {
 				return 100
 			}
 			if ( dbspec == DBSPEC_PARAM3_ORG ) {
@@ -59898,14 +61873,14 @@
 			reftype = FILTER_ITEM_FOOD
 			return
 		}
 		if ( dbmode == DBMODE_REF_SPEC ) {
 			if ( dbspec == DBSPEC_TYPE ) {
-				return FILTER_ITEM_FOOD
+				return 57000
 			}
 			if ( dbspec == DBSPEC_TYPE_MINOR ) {
-				return FILTER_ITEM_FOOD_VEGETABLE
+				return 57003
 			}
 			if ( dbspec == DBSPEC_VALUE_ORG ) {
 				return 300
 			}
 			if ( dbspec == DBSPEC_PARAM3_ORG ) {
@@ -59968,14 +61943,14 @@
 			reftype = FILTER_ITEM_FOOD
 			return
 		}
 		if ( dbmode == DBMODE_REF_SPEC ) {
 			if ( dbspec == DBSPEC_TYPE ) {
-				return FILTER_ITEM_FOOD
+				return 57000
 			}
 			if ( dbspec == DBSPEC_TYPE_MINOR ) {
-				return FILTER_ITEM_FOOD_VEGETABLE
+				return 57003
 			}
 			if ( dbspec == DBSPEC_VALUE_ORG ) {
 				return 90
 			}
 			if ( dbspec == DBSPEC_PARAM3_ORG ) {
@@ -60040,14 +62015,14 @@
 			reftype = FILTER_ITEM_FOOD
 			return
 		}
 		if ( dbmode == DBMODE_REF_SPEC ) {
 			if ( dbspec == DBSPEC_TYPE ) {
-				return FILTER_ITEM_FOOD
+				return 57000
 			}
 			if ( dbspec == DBSPEC_TYPE_MINOR ) {
-				return FILTER_ITEM_FOOD_FRUIT
+				return 57004
 			}
 			if ( dbspec == DBSPEC_VALUE_ORG ) {
 				return 360
 			}
 			if ( dbspec == DBSPEC_PARAM3_ORG ) {
@@ -60104,14 +62079,14 @@
 			reftype = FILTER_ITEM_FOOD
 			return
 		}
 		if ( dbmode == DBMODE_REF_SPEC ) {
 			if ( dbspec == DBSPEC_TYPE ) {
-				return FILTER_ITEM_FOOD
+				return 57000
 			}
 			if ( dbspec == DBSPEC_TYPE_MINOR ) {
-				return FILTER_ITEM_FOOD_FRUIT
+				return 57004
 			}
 			if ( dbspec == DBSPEC_VALUE_ORG ) {
 				return 350
 			}
 			if ( dbspec == DBSPEC_PARAM3_ORG ) {
@@ -60168,14 +62143,14 @@
 			reftype = FILTER_ITEM_FOOD
 			return
 		}
 		if ( dbmode == DBMODE_REF_SPEC ) {
 			if ( dbspec == DBSPEC_TYPE ) {
-				return FILTER_ITEM_FOOD
+				return 57000
 			}
 			if ( dbspec == DBSPEC_TYPE_MINOR ) {
-				return FILTER_ITEM_FOOD_FRUIT
+				return 57004
 			}
 			if ( dbspec == DBSPEC_VALUE_ORG ) {
 				return 200
 			}
 			if ( dbspec == DBSPEC_PARAM3_ORG ) {
@@ -60232,14 +62207,14 @@
 			reftype = FILTER_ITEM_FOOD
 			return
 		}
 		if ( dbmode == DBMODE_REF_SPEC ) {
 			if ( dbspec == DBSPEC_TYPE ) {
-				return FILTER_ITEM_FOOD
+				return 57000
 			}
 			if ( dbspec == DBSPEC_TYPE_MINOR ) {
-				return FILTER_ITEM_FOOD_VEGETABLE
+				return 57003
 			}
 			if ( dbspec == DBSPEC_VALUE_ORG ) {
 				return 450
 			}
 			if ( dbspec == DBSPEC_PARAM3_ORG ) {
@@ -60296,14 +62271,14 @@
 			reftype = FILTER_ITEM_FOOD
 			return
 		}
 		if ( dbmode == DBMODE_REF_SPEC ) {
 			if ( dbspec == DBSPEC_TYPE ) {
-				return FILTER_ITEM_FOOD
+				return 57000
 			}
 			if ( dbspec == DBSPEC_TYPE_MINOR ) {
-				return FILTER_ITEM_FOOD_VEGETABLE
+				return 57003
 			}
 			if ( dbspec == DBSPEC_VALUE_ORG ) {
 				return 320
 			}
 			if ( dbspec == DBSPEC_PARAM3_ORG ) {
@@ -60357,14 +62332,14 @@
 			reftype = FILTER_ITEM_POTION
 			return
 		}
 		if ( dbmode == DBMODE_REF_SPEC ) {
 			if ( dbspec == DBSPEC_TYPE ) {
-				return FILTER_ITEM_POTION
+				return 52000
 			}
 			if ( dbspec == DBSPEC_TYPE_MINOR ) {
-				return FILTER_NONE
+				return 99999
 			}
 			if ( dbspec == DBSPEC_VALUE_ORG ) {
 				return 1000
 			}
 			if ( dbspec == DBSPEC_PARAM3_ORG ) {
@@ -60427,14 +62402,14 @@
 			reftype = FILTER_FURNITURE
 			return
 		}
 		if ( dbmode == DBMODE_REF_SPEC ) {
 			if ( dbspec == DBSPEC_TYPE ) {
-				return FILTER_FURNITURE
+				return 60000
 			}
 			if ( dbspec == DBSPEC_TYPE_MINOR ) {
-				return FILTER_NONE
+				return 99999
 			}
 			if ( dbspec == DBSPEC_VALUE_ORG ) {
 				return 2000
 			}
 			if ( dbspec == DBSPEC_PARAM3_ORG ) {
@@ -60477,11 +62452,11 @@
 			inv(INV_ITEM_PIC, ci) = xy2pic(11, 9)
 			reftype = FILTER_ITEM_SCROLL
 			reftypeminor = FILTER_ITEM_DEED
 			inv(INV_ITEM_NUM, ci) = 1
 			fixeditemenc = 0
-			ibitmod ITEM_BIT_PRECIOUS, ci, 1
+			ibitmod ITEM_BIT_PRECIOUS, ci, TRUE
 			inv(INV_ITEM_IDENTIFY_LEVEL, ci) = 0
 			return
 		}
 		if ( dbmode == DBMODE_REF ) {
 			ichargelevel = 0
@@ -60489,14 +62464,14 @@
 			reftype = FILTER_ITEM_SCROLL
 			return
 		}
 		if ( dbmode == DBMODE_REF_SPEC ) {
 			if ( dbspec == DBSPEC_TYPE ) {
-				return FILTER_ITEM_SCROLL
+				return 53000
 			}
 			if ( dbspec == DBSPEC_TYPE_MINOR ) {
-				return FILTER_ITEM_DEED
+				return 53100
 			}
 			if ( dbspec == DBSPEC_VALUE_ORG ) {
 				return 100
 			}
 			if ( dbspec == DBSPEC_PARAM3_ORG ) {
@@ -60551,12 +62526,12 @@
 			inv(INV_ITEM_ID, ci) = ITEM_ID_VICE_STAFF
 			inv(INV_ITEM_PIC, ci) = xy2pic(20, 1)
 			reftype = FILTER_WEAPON
 			reftypeminor = FILTER_WEAPON_STAVE
 			inv(INV_ITEM_NUM, ci) = 1
-			fixeditemenc = ENCHANT_RESISTANCE * EXT_ENCHANTMENT + SKILL_RES_DARKNESS, 350, ENCHANT_RES_CONFUSE, 100, ENCHANT_RES_BLIND, 100, ENCHANT_ATTRIBUTE * EXT_ENCHANTMENT + SKILL_ATTR_LER, 800, ENCHANT_ENHANCE_SPELL, 600, ENCHANT_REFLECT_MAGIC, 150, 0
-			ibitmod ITEM_BIT_PRECIOUS, ci, 1
+			fixeditemenc = ENCHANT_RESISTANCE * EXT_ENCHANTMENT + SKILL_RES_DARKNESS, 350, 25, 100, 23, 100, ENCHANT_ATTRIBUTE * EXT_ENCHANTMENT + SKILL_ATTR_LER, 800, 34, 600, 85, 200, 0
+			ibitmod ITEM_BIT_PRECIOUS, ci, TRUE
 			inv(INV_ITEM_IDENTIFY_LEVEL, ci) = 500
 			fixlv = FIX_QUALITY_UNIQUE
 			return
 		}
 		if ( dbmode == DBMODE_REF ) {
@@ -60565,14 +62540,14 @@
 			reftype = FILTER_WEAPON
 			return
 		}
 		if ( dbmode == DBMODE_REF_SPEC ) {
 			if ( dbspec == DBSPEC_TYPE ) {
-				return FILTER_WEAPON
+				return 10000
 			}
 			if ( dbspec == DBSPEC_TYPE_MINOR ) {
-				return FILTER_WEAPON_STAVE
+				return 10006
 			}
 			if ( dbspec == DBSPEC_VALUE_ORG ) {
 				return 40000
 			}
 			if ( dbspec == DBSPEC_PARAM3_ORG ) {
@@ -60627,14 +62602,14 @@
 			reftype = FILTER_ITEM_TOOL
 			return
 		}
 		if ( dbmode == DBMODE_REF_SPEC ) {
 			if ( dbspec == DBSPEC_TYPE ) {
-				return FILTER_ITEM_TOOL
+				return 59000
 			}
 			if ( dbspec == DBSPEC_TYPE_MINOR ) {
-				return FILTER_NONE
+				return 99999
 			}
 			if ( dbspec == DBSPEC_VALUE_ORG ) {
 				return 1500
 			}
 			if ( dbspec == DBSPEC_PARAM3_ORG ) {
@@ -60692,14 +62667,14 @@
 			reftype = FILTER_ITEM_FOOD
 			return
 		}
 		if ( dbmode == DBMODE_REF_SPEC ) {
 			if ( dbspec == DBSPEC_TYPE ) {
-				return FILTER_ITEM_FOOD
+				return 57000
 			}
 			if ( dbspec == DBSPEC_TYPE_MINOR ) {
-				return FILTER_JUNK
+				return 64000
 			}
 			if ( dbspec == DBSPEC_VALUE_ORG ) {
 				return 120
 			}
 			if ( dbspec == DBSPEC_PARAM3_ORG ) {
@@ -60745,11 +62720,11 @@
 			inv(INV_ITEM_PIC, ci) = xy2pic(16, 26)
 			reftype = FILTER_ARMOR
 			reftypeminor = FILTER_ARMOR_LIGHT
 			inv(INV_ITEM_NUM, ci) = 1
 			fixeditemenc = ENCHANT_RESISTANCE * EXT_ENCHANTMENT + SKILL_RES_FIRE, 150, ENCHANT_RESISTANCE * EXT_ENCHANTMENT + SKILL_RES_COLD, 150, ENCHANT_RESISTANCE * EXT_ENCHANTMENT + SKILL_RES_LIGHTNING, 150, ENCHANT_SKILL * EXT_ENCHANTMENT + SKILL_NORMAL_SWIMMING, 200, ENCHANT_ATTRIBUTE * EXT_ENCHANTMENT + SKILL_ATTR_CHA, 800, ENCHANT_SKILL * EXT_ENCHANTMENT + SKILL_NORMAL_EVASION, 500, 0
-			ibitmod ITEM_BIT_PRECIOUS, ci, 1
+			ibitmod ITEM_BIT_PRECIOUS, ci, TRUE
 			inv(INV_ITEM_IDENTIFY_LEVEL, ci) = 500
 			fixlv = FIX_QUALITY_UNIQUE
 			return
 		}
 		if ( dbmode == DBMODE_REF ) {
@@ -60758,14 +62733,14 @@
 			reftype = FILTER_ARMOR
 			return
 		}
 		if ( dbmode == DBMODE_REF_SPEC ) {
 			if ( dbspec == DBSPEC_TYPE ) {
-				return FILTER_ARMOR
+				return 16000
 			}
 			if ( dbspec == DBSPEC_TYPE_MINOR ) {
-				return FILTER_ARMOR_LIGHT
+				return 16003
 			}
 			if ( dbspec == DBSPEC_VALUE_ORG ) {
 				return 28000
 			}
 			if ( dbspec == DBSPEC_PARAM3_ORG ) {
@@ -60810,12 +62785,12 @@
 			inv(INV_ITEM_ID, ci) = ITEM_ID_WAR_SUIT
 			inv(INV_ITEM_PIC, ci) = xy2pic(15, 26)
 			reftype = FILTER_ARMOR
 			reftypeminor = FILTER_ARMOR_LIGHT
 			inv(INV_ITEM_NUM, ci) = 1
-			fixeditemenc = ENCHANT_RESISTANCE * EXT_ENCHANTMENT + SKILL_RES_FIRE, 400, ENCHANT_RESISTANCE * EXT_ENCHANTMENT + SKILL_RES_COLD, 400, ENCHANT_RESISTANCE * EXT_ENCHANTMENT + SKILL_RES_LIGHTNING, 400, ENCHANT_RES_POISON, 100, ENCHANT_RES_PARALYZE, 100, 0
-			ibitmod ITEM_BIT_PRECIOUS, ci, 1
+			fixeditemenc = ENCHANT_RESISTANCE * EXT_ENCHANTMENT + SKILL_RES_FIRE, 400, ENCHANT_RESISTANCE * EXT_ENCHANTMENT + SKILL_RES_COLD, 400, ENCHANT_RESISTANCE * EXT_ENCHANTMENT + SKILL_RES_LIGHTNING, 400, 28, 100, 24, 100, 0
+			ibitmod ITEM_BIT_PRECIOUS, ci, TRUE
 			inv(INV_ITEM_IDENTIFY_LEVEL, ci) = 500
 			fixlv = FIX_QUALITY_UNIQUE
 			return
 		}
 		if ( dbmode == DBMODE_REF ) {
@@ -60824,14 +62799,14 @@
 			reftype = FILTER_ARMOR
 			return
 		}
 		if ( dbmode == DBMODE_REF_SPEC ) {
 			if ( dbspec == DBSPEC_TYPE ) {
-				return FILTER_ARMOR
+				return 16000
 			}
 			if ( dbspec == DBSPEC_TYPE_MINOR ) {
-				return FILTER_ARMOR_LIGHT
+				return 16003
 			}
 			if ( dbspec == DBSPEC_VALUE_ORG ) {
 				return 60000
 			}
 			if ( dbspec == DBSPEC_PARAM3_ORG ) {
@@ -60875,11 +62850,11 @@
 			reftype = FILTER_ITEM_TOOL
 			reftypeminor = FILTER_NOTHING
 			inv(INV_ITEM_NUM, ci) = 1
 			fixeditemenc = 0
 			inv(INV_ITEM_EFFECT, ci) = EFFECT_COFFIN
-			ibitmod ITEM_BIT_PERIOD, ci, 1
+			ibitmod ITEM_BIT_PERIOD, ci, TRUE
 			inv(INV_ITEM_PARAM3, ci) = 1
 			inv(INV_ITEM_IDENTIFY_LEVEL, ci) = 0
 			return
 		}
 		if ( dbmode == DBMODE_REF ) {
@@ -60888,14 +62863,14 @@
 			reftype = FILTER_ITEM_TOOL
 			return
 		}
 		if ( dbmode == DBMODE_REF_SPEC ) {
 			if ( dbspec == DBSPEC_TYPE ) {
-				return FILTER_ITEM_TOOL
+				return 59000
 			}
 			if ( dbspec == DBSPEC_TYPE_MINOR ) {
-				return FILTER_NONE
+				return 99999
 			}
 			if ( dbspec == DBSPEC_VALUE_ORG ) {
 				return 5000
 			}
 			if ( dbspec == DBSPEC_PARAM3_ORG ) {
@@ -60955,14 +62930,14 @@
 			reftype = FILTER_ITEM_FOOD
 			return
 		}
 		if ( dbmode == DBMODE_REF_SPEC ) {
 			if ( dbspec == DBSPEC_TYPE ) {
-				return FILTER_ITEM_FOOD
+				return 57000
 			}
 			if ( dbspec == DBSPEC_TYPE_MINOR ) {
-				return FILTER_NONE
+				return 99999
 			}
 			if ( dbspec == DBSPEC_VALUE_ORG ) {
 				return 5000
 			}
 			if ( dbspec == DBSPEC_PARAM3_ORG ) {
@@ -61014,26 +62989,26 @@
 			reftype = FILTER_ITEM_ROD
 			reftypeminor = FILTER_ITEM_ROD_DAMAGE
 			inv(INV_ITEM_NUM, ci) = 1
 			fixeditemenc = 0
 			inv(INV_ITEM_IDENTIFY_LEVEL, ci) = 0
-			inv(INV_ITEM_CHARGE, ci) = 5 + rnd(5) - rnd(5)
-			ibitmod ITEM_BIT_CHARGE_ITEM, ci, 1
+			inv((9 /*!!!@[INV_ITEM_AMMO @@@ INV_ITEM_CHARGE @@@ INV_ITEM_CLIENT @@@ INV_ITEM_FILE @@@ INV_ITEM_NEXT_PERIOD]@!!! */), ci) = 5 + rnd(5) - rnd(5)
+			ibitmod ITEM_BIT_CHARGE_ITEM, ci, TRUE
 			return
 		}
 		if ( dbmode == DBMODE_REF ) {
 			ichargelevel = 5
 			infilterref = ""
 			reftype = FILTER_ITEM_ROD
 			return
 		}
 		if ( dbmode == DBMODE_REF_SPEC ) {
 			if ( dbspec == DBSPEC_TYPE ) {
-				return FILTER_ITEM_ROD
+				return 56000
 			}
 			if ( dbspec == DBSPEC_TYPE_MINOR ) {
-				return FILTER_ITEM_ROD_DAMAGE
+				return 56002
 			}
 			if ( dbspec == DBSPEC_VALUE_ORG ) {
 				return 4200
 			}
 			if ( dbspec == DBSPEC_PARAM3_ORG ) {
@@ -61104,14 +63079,14 @@
 			reftype = FILTER_ITEM_TOOL
 			return
 		}
 		if ( dbmode == DBMODE_REF_SPEC ) {
 			if ( dbspec == DBSPEC_TYPE ) {
-				return FILTER_ITEM_TOOL
+				return 59000
 			}
 			if ( dbspec == DBSPEC_TYPE_MINOR ) {
-				return FILTER_NONE
+				return 99999
 			}
 			if ( dbspec == DBSPEC_VALUE_ORG ) {
 				return 700000
 			}
 			if ( dbspec == DBSPEC_PARAM3_ORG ) {
@@ -61162,12 +63137,12 @@
 			inv(INV_ITEM_ID, ci) = ITEM_ID_GRAVITY_AXE
 			inv(INV_ITEM_PIC, ci) = xy2pic(11, 26)
 			reftype = FILTER_WEAPON
 			reftypeminor = FILTER_WEAPON_SMALL_AXE
 			inv(INV_ITEM_NUM, ci) = 1
-			fixeditemenc = ENCHANT_PROC * EXT_ENCHANTMENT + ENCHANT_PROC_GRAVITY_SPHERE, 350, ENCHANT_RES_PARALYZE, 100, ENCHANT_ATTRIBUTE * EXT_ENCHANTMENT + SKILL_ATTR_STR, 450, ENCHANT_RESISTANCE * EXT_ENCHANTMENT + SKILL_RES_MAGIC, 300, 0
-			ibitmod ITEM_BIT_PRECIOUS, ci, 1
+			fixeditemenc = ENCHANT_PROC * EXT_ENCHANTMENT + ENCHANT_PROC_GRAVITY_SPHERE, 350, 24, 100, ENCHANT_ATTRIBUTE * EXT_ENCHANTMENT + SKILL_ATTR_STR, 450, ENCHANT_RESISTANCE * EXT_ENCHANTMENT + SKILL_RES_MAGIC, 300, 0
+			ibitmod ITEM_BIT_PRECIOUS, ci, TRUE
 			inv(INV_ITEM_IDENTIFY_LEVEL, ci) = 500
 			fixlv = FIX_QUALITY_UNIQUE
 			return
 		}
 		if ( dbmode == DBMODE_REF ) {
@@ -61176,14 +63151,14 @@
 			reftype = FILTER_WEAPON
 			return
 		}
 		if ( dbmode == DBMODE_REF_SPEC ) {
 			if ( dbspec == DBSPEC_TYPE ) {
-				return FILTER_WEAPON
+				return 10000
 			}
 			if ( dbspec == DBSPEC_TYPE_MINOR ) {
-				return FILTER_WEAPON_SMALL_AXE
+				return 10009
 			}
 			if ( dbspec == DBSPEC_VALUE_ORG ) {
 				return 65000
 			}
 			if ( dbspec == DBSPEC_PARAM3_ORG ) {
@@ -61232,12 +63207,12 @@
 			inv(INV_ITEM_ID, ci) = ITEM_ID_DRAKE_ROD
 			inv(INV_ITEM_PIC, ci) = xy2pic(10, 15)
 			reftype = FILTER_WEAPON
 			reftypeminor = FILTER_WEAPON_STAVE
 			inv(INV_ITEM_NUM, ci) = 1
-			fixeditemenc = ENCHANT_ATTRIBUTE * EXT_ENCHANTMENT + SKILL_ATTR_SPD, 560, ENCHANT_ATTRIBUTE * EXT_ENCHANTMENT + SKILL_ATTR_DEX, 400, ENCHANT_RESISTANCE * EXT_ENCHANTMENT + SKILL_RES_FIRE, 600, ENCHANT_RESISTANCE * EXT_ENCHANTMENT + SKILL_RES_COLD, 600, ENCHANT_EXTRA_MELEE, 150, 0
-			ibitmod ITEM_BIT_PRECIOUS, ci, 1
+			fixeditemenc = ENCHANT_ATTRIBUTE * EXT_ENCHANTMENT + SKILL_ATTR_SPD, 560, ENCHANT_ATTRIBUTE * EXT_ENCHANTMENT + SKILL_ATTR_DEX, 400, ENCHANT_RESISTANCE * EXT_ENCHANTMENT + SKILL_RES_FIRE, 600, ENCHANT_RESISTANCE * EXT_ENCHANTMENT + SKILL_RES_COLD, 600, 50, 150, 0
+			ibitmod ITEM_BIT_PRECIOUS, ci, TRUE
 			inv(INV_ITEM_IDENTIFY_LEVEL, ci) = 500
 			fixlv = FIX_QUALITY_UNIQUE
 			return
 		}
 		if ( dbmode == DBMODE_REF ) {
@@ -61246,14 +63221,14 @@
 			reftype = FILTER_WEAPON
 			return
 		}
 		if ( dbmode == DBMODE_REF_SPEC ) {
 			if ( dbspec == DBSPEC_TYPE ) {
-				return FILTER_WEAPON
+				return 10000
 			}
 			if ( dbspec == DBSPEC_TYPE_MINOR ) {
-				return FILTER_WEAPON_STAVE
+				return 10006
 			}
 			if ( dbspec == DBSPEC_VALUE_ORG ) {
 				return 30000
 			}
 			if ( dbspec == DBSPEC_PARAM3_ORG ) {
@@ -61308,14 +63283,14 @@
 			reftype = FILTER_ITEM_SCROLL
 			return
 		}
 		if ( dbmode == DBMODE_REF_SPEC ) {
 			if ( dbspec == DBSPEC_TYPE ) {
-				return FILTER_ITEM_SCROLL
+				return 53000
 			}
 			if ( dbspec == DBSPEC_TYPE_MINOR ) {
-				return FILTER_ITEM_DEED
+				return 53100
 			}
 			if ( dbspec == DBSPEC_VALUE_ORG ) {
 				return 300000
 			}
 			if ( dbspec == DBSPEC_PARAM3_ORG ) {
@@ -61365,11 +63340,11 @@
 			inv(INV_ITEM_PIC, ci) = xy2pic(0, 13)
 			reftype = FILTER_ITEM_BOOK
 			reftypeminor = FILTER_NOTHING
 			inv(INV_ITEM_NUM, ci) = 1
 			fixeditemenc = 0
-			ibitmod ITEM_BIT_PRECIOUS, ci, 1
+			ibitmod ITEM_BIT_PRECIOUS, ci, TRUE
 			inv(INV_ITEM_IDENTIFY_LEVEL, ci) = 0
 			return
 		}
 		if ( dbmode == DBMODE_REF ) {
 			ichargelevel = 0
@@ -61377,14 +63352,14 @@
 			reftype = FILTER_ITEM_BOOK
 			return
 		}
 		if ( dbmode == DBMODE_REF_SPEC ) {
 			if ( dbspec == DBSPEC_TYPE ) {
-				return FILTER_ITEM_BOOK
+				return 55000
 			}
 			if ( dbspec == DBSPEC_TYPE_MINOR ) {
-				return FILTER_NONE
+				return 99999
 			}
 			if ( dbspec == DBSPEC_VALUE_ORG ) {
 				return 10000
 			}
 			if ( dbspec == DBSPEC_PARAM3_ORG ) {
@@ -61448,14 +63423,14 @@
 			reftype = FILTER_ITEM_FOOD
 			return
 		}
 		if ( dbmode == DBMODE_REF_SPEC ) {
 			if ( dbspec == DBSPEC_TYPE ) {
-				return FILTER_ITEM_FOOD
+				return 57000
 			}
 			if ( dbspec == DBSPEC_TYPE_MINOR ) {
-				return FILTER_NONE
+				return 99999
 			}
 			if ( dbspec == DBSPEC_VALUE_ORG ) {
 				return 2000
 			}
 			if ( dbspec == DBSPEC_PARAM3_ORG ) {
@@ -61503,12 +63478,12 @@
 			inv(INV_ITEM_ID, ci) = ITEM_ID_SONIC_TONFA
 			inv(INV_ITEM_PIC, ci) = xy2pic(2, 22)
 			reftype = FILTER_SHIELD
 			reftypeminor = FILTER_SHIELD_SMALL
 			inv(INV_ITEM_NUM, ci) = 1
-			fixeditemenc = ENCHANT_SKILL * EXT_ENCHANTMENT + SKILL_WEAPON_MARTIAL_ARTS, 600, ENCHANT_PIERCING_CHANCE, 400, ENCHANT_ATTRIBUTE * EXT_ENCHANTMENT + SKILL_ATTR_SPD, 500, ENCHANT_RESISTANCE * EXT_ENCHANTMENT + SKILL_RES_SOUND, 300, 0
-			ibitmod ITEM_BIT_PRECIOUS, ci, 1
+			fixeditemenc = ENCHANT_SKILL * EXT_ENCHANTMENT + SKILL_WEAPON_MARTIAL_ARTS, 600, 39, 400, ENCHANT_ATTRIBUTE * EXT_ENCHANTMENT + SKILL_ATTR_SPD, 500, ENCHANT_RESISTANCE * EXT_ENCHANTMENT + SKILL_RES_SOUND, 300, 0
+			ibitmod ITEM_BIT_PRECIOUS, ci, TRUE
 			inv(INV_ITEM_IDENTIFY_LEVEL, ci) = 500
 			fixlv = FIX_QUALITY_UNIQUE
 			return
 		}
 		if ( dbmode == DBMODE_REF ) {
@@ -61517,14 +63492,14 @@
 			reftype = FILTER_SHIELD
 			return
 		}
 		if ( dbmode == DBMODE_REF_SPEC ) {
 			if ( dbspec == DBSPEC_TYPE ) {
-				return FILTER_SHIELD
+				return 14000
 			}
 			if ( dbspec == DBSPEC_TYPE_MINOR ) {
-				return FILTER_SHIELD_SMALL
+				return 14003
 			}
 			if ( dbspec == DBSPEC_VALUE_ORG ) {
 				return 40000
 			}
 			if ( dbspec == DBSPEC_PARAM3_ORG ) {
@@ -61571,12 +63546,12 @@
 			inv(INV_ITEM_ID, ci) = ITEM_ID_SABER_TONFA
 			inv(INV_ITEM_PIC, ci) = xy2pic(2, 22)
 			reftype = FILTER_SHIELD
 			reftypeminor = FILTER_SHIELD_SMALL
 			inv(INV_ITEM_NUM, ci) = 1
-			fixeditemenc = ENCHANT_SKILL * EXT_ENCHANTMENT + SKILL_WEAPON_MARTIAL_ARTS, 500, ENCHANT_PROXIMITY_ASSIST, 250, ENCHANT_ATTRIBUTE * EXT_ENCHANTMENT + SKILL_ATTR_DEX, 500, ENCHANT_CURE_BLEEDING, 100, 0
-			ibitmod ITEM_BIT_PRECIOUS, ci, 1
+			fixeditemenc = ENCHANT_SKILL * EXT_ENCHANTMENT + SKILL_WEAPON_MARTIAL_ARTS, 500, 66, 250, ENCHANT_ATTRIBUTE * EXT_ENCHANTMENT + SKILL_ATTR_DEX, 500, 55, 100, 0
+			ibitmod ITEM_BIT_PRECIOUS, ci, TRUE
 			inv(INV_ITEM_IDENTIFY_LEVEL, ci) = 500
 			fixlv = FIX_QUALITY_UNIQUE
 			return
 		}
 		if ( dbmode == DBMODE_REF ) {
@@ -61585,14 +63560,14 @@
 			reftype = FILTER_SHIELD
 			return
 		}
 		if ( dbmode == DBMODE_REF_SPEC ) {
 			if ( dbspec == DBSPEC_TYPE ) {
-				return FILTER_SHIELD
+				return 14000
 			}
 			if ( dbspec == DBSPEC_TYPE_MINOR ) {
-				return FILTER_SHIELD_SMALL
+				return 14003
 			}
 			if ( dbspec == DBSPEC_VALUE_ORG ) {
 				return 40000
 			}
 			if ( dbspec == DBSPEC_PARAM3_ORG ) {
@@ -61639,12 +63614,12 @@
 			inv(INV_ITEM_ID, ci) = ITEM_ID_SMASH_TONFA
 			inv(INV_ITEM_PIC, ci) = xy2pic(2, 22)
 			reftype = FILTER_SHIELD
 			reftypeminor = FILTER_SHIELD_SMALL
 			inv(INV_ITEM_NUM, ci) = 1
-			fixeditemenc = ENCHANT_SKILL * EXT_ENCHANTMENT + SKILL_NORMAL_TACTICS, 600, ENCHANT_SKILL * EXT_ENCHANTMENT + SKILL_WEAPON_MARTIAL_ARTS, 600, ENCHANT_EXTRA_MELEE, 300, ENCHANT_ATTRIBUTE * EXT_ENCHANTMENT + SKILL_ATTR_STR, 400, 0
-			ibitmod ITEM_BIT_PRECIOUS, ci, 1
+			fixeditemenc = ENCHANT_SKILL * EXT_ENCHANTMENT + SKILL_NORMAL_TACTICS, 600, ENCHANT_SKILL * EXT_ENCHANTMENT + SKILL_WEAPON_MARTIAL_ARTS, 600, 50, 300, ENCHANT_ATTRIBUTE * EXT_ENCHANTMENT + SKILL_ATTR_STR, 400, 0
+			ibitmod ITEM_BIT_PRECIOUS, ci, TRUE
 			inv(INV_ITEM_IDENTIFY_LEVEL, ci) = 500
 			fixlv = FIX_QUALITY_UNIQUE
 			return
 		}
 		if ( dbmode == DBMODE_REF ) {
@@ -61653,14 +63628,14 @@
 			reftype = FILTER_SHIELD
 			return
 		}
 		if ( dbmode == DBMODE_REF_SPEC ) {
 			if ( dbspec == DBSPEC_TYPE ) {
-				return FILTER_SHIELD
+				return 14000
 			}
 			if ( dbspec == DBSPEC_TYPE_MINOR ) {
-				return FILTER_SHIELD_SMALL
+				return 14003
 			}
 			if ( dbspec == DBSPEC_VALUE_ORG ) {
 				return 40000
 			}
 			if ( dbspec == DBSPEC_PARAM3_ORG ) {
@@ -61706,12 +63681,12 @@
 			inv(INV_ITEM_ID, ci) = ITEM_ID_SHIELD_TONFA
 			inv(INV_ITEM_PIC, ci) = xy2pic(2, 22)
 			reftype = FILTER_SHIELD
 			reftypeminor = FILTER_SHIELD_SMALL
 			inv(INV_ITEM_NUM, ci) = 1
-			fixeditemenc = ENCHANT_SKILL * EXT_ENCHANTMENT + SKILL_WEAPON_MARTIAL_ARTS, 400, ENCHANT_IMMUNE_DAMAGE, 400, ENCHANT_ATTRIBUTE * EXT_ENCHANTMENT + SKILL_ATTR_CON, 300, ENCHANT_RES_PHYSICAL, 300, 0
-			ibitmod ITEM_BIT_PRECIOUS, ci, 1
+			fixeditemenc = ENCHANT_SKILL * EXT_ENCHANTMENT + SKILL_WEAPON_MARTIAL_ARTS, 400, 53, 400, ENCHANT_ATTRIBUTE * EXT_ENCHANTMENT + SKILL_ATTR_CON, 300, 52, 300, 0
+			ibitmod ITEM_BIT_PRECIOUS, ci, TRUE
 			inv(INV_ITEM_IDENTIFY_LEVEL, ci) = 500
 			fixlv = FIX_QUALITY_UNIQUE
 			return
 		}
 		if ( dbmode == DBMODE_REF ) {
@@ -61720,14 +63695,14 @@
 			reftype = FILTER_SHIELD
 			return
 		}
 		if ( dbmode == DBMODE_REF_SPEC ) {
 			if ( dbspec == DBSPEC_TYPE ) {
-				return FILTER_SHIELD
+				return 14000
 			}
 			if ( dbspec == DBSPEC_TYPE_MINOR ) {
-				return FILTER_SHIELD_SMALL
+				return 14003
 			}
 			if ( dbspec == DBSPEC_VALUE_ORG ) {
 				return 40000
 			}
 			if ( dbspec == DBSPEC_PARAM3_ORG ) {
@@ -61775,12 +63750,12 @@
 			inv(INV_ITEM_ID, ci) = ITEM_ID_SACRIFICE_TONFA
 			inv(INV_ITEM_PIC, ci) = xy2pic(2, 22)
 			reftype = FILTER_SHIELD
 			reftypeminor = FILTER_SHIELD_SMALL
 			inv(INV_ITEM_NUM, ci) = 1
-			fixeditemenc = ENCHANT_SKILL * EXT_ENCHANTMENT + SKILL_WEAPON_MARTIAL_ARTS, 1000, ENCHANT_SKILL * EXT_ENCHANTMENT + SKILL_NORMAL_EYE_OF_MIND, 1000, ENCHANT_SUCK_BLOOD, 310, ENCHANT_ATTRACT_MONSTER, 360, ENCHANT_RANDOM_TELEPORT, 500, ENCHANT_REFLECT_MAGIC, 200, ENCHANT_ATTRIBUTE * EXT_ENCHANTMENT + SKILL_ATTR_WIL, 600, 0
-			ibitmod ITEM_BIT_PRECIOUS, ci, 1
+			fixeditemenc = ENCHANT_SKILL * EXT_ENCHANTMENT + SKILL_WEAPON_MARTIAL_ARTS, 1000, ENCHANT_SKILL * EXT_ENCHANTMENT + SKILL_NORMAL_EYE_OF_MIND, 1000, 45, 310, 47, 360, 21, 500, 62, 200, ENCHANT_ATTRIBUTE * EXT_ENCHANTMENT + SKILL_ATTR_WIL, 600, 0
+			ibitmod ITEM_BIT_PRECIOUS, ci, TRUE
 			inv(INV_ITEM_IDENTIFY_LEVEL, ci) = 500
 			fixlv = FIX_QUALITY_UNIQUE
 			return
 		}
 		if ( dbmode == DBMODE_REF ) {
@@ -61789,14 +63764,14 @@
 			reftype = FILTER_SHIELD
 			return
 		}
 		if ( dbmode == DBMODE_REF_SPEC ) {
 			if ( dbspec == DBSPEC_TYPE ) {
-				return FILTER_SHIELD
+				return 14000
 			}
 			if ( dbspec == DBSPEC_TYPE_MINOR ) {
-				return FILTER_SHIELD_SMALL
+				return 14003
 			}
 			if ( dbspec == DBSPEC_VALUE_ORG ) {
 				return 40000
 			}
 			if ( dbspec == DBSPEC_PARAM3_ORG ) {
@@ -61844,12 +63819,12 @@
 			inv(INV_ITEM_ID, ci) = ITEM_ID_GRIFFON
 			inv(INV_ITEM_PIC, ci) = xy2pic(12, 21)
 			reftype = FILTER_RANGE
 			reftypeminor = FILTER_RANGE_PISTOL
 			inv(INV_ITEM_NUM, ci) = 1
-			fixeditemenc = ENCHANT_SKILL * EXT_ENCHANTMENT + SKILL_WEAPON_FIREARM, 400, ENCHANT_EXTRA_RANGED, 2000, ENCHANT_PIERCING_CHANCE, 100, ENCHANT_SKILL * EXT_ENCHANTMENT + SKILL_NORMAL_SWIMMING, -300, ENCHANT_ABSORB_MP, 100, 0
-			ibitmod ITEM_BIT_PRECIOUS, ci, 1
+			fixeditemenc = ENCHANT_SKILL * EXT_ENCHANTMENT + SKILL_WEAPON_FIREARM, 400, 51, 2000, 39, 100, ENCHANT_SKILL * EXT_ENCHANTMENT + SKILL_NORMAL_SWIMMING, -300, 38, 100, 0
+			ibitmod ITEM_BIT_PRECIOUS, ci, TRUE
 			inv(INV_ITEM_IDENTIFY_LEVEL, ci) = 500
 			fixlv = FIX_QUALITY_UNIQUE
 			return
 		}
 		if ( dbmode == DBMODE_REF ) {
@@ -61858,14 +63833,14 @@
 			reftype = FILTER_RANGE
 			return
 		}
 		if ( dbmode == DBMODE_REF_SPEC ) {
 			if ( dbspec == DBSPEC_TYPE ) {
-				return FILTER_RANGE
+				return 24000
 			}
 			if ( dbspec == DBSPEC_TYPE_MINOR ) {
-				return FILTER_RANGE_PISTOL
+				return 24020
 			}
 			if ( dbspec == DBSPEC_VALUE_ORG ) {
 				return 20000
 			}
 			if ( dbspec == DBSPEC_PARAM3_ORG ) {
@@ -61908,11 +63883,11 @@
 			inv(INV_ITEM_PIC, ci) = xy2pic(3, 26)
 			reftype = FILTER_JUNK
 			reftypeminor = FILTER_NOTHING
 			inv(INV_ITEM_NUM, ci) = 1
 			fixeditemenc = 0
-			ibitmod ITEM_BIT_PRECIOUS, ci, 1
+			ibitmod ITEM_BIT_PRECIOUS, ci, TRUE
 			inv(INV_ITEM_IDENTIFY_LEVEL, ci) = 0
 			fixlv = FIX_QUALITY_UNIQUE
 			return
 		}
 		if ( dbmode == DBMODE_REF ) {
@@ -61921,14 +63896,14 @@
 			reftype = FILTER_JUNK
 			return
 		}
 		if ( dbmode == DBMODE_REF_SPEC ) {
 			if ( dbspec == DBSPEC_TYPE ) {
-				return FILTER_JUNK
+				return 64000
 			}
 			if ( dbspec == DBSPEC_TYPE_MINOR ) {
-				return FILTER_NONE
+				return 99999
 			}
 			if ( dbspec == DBSPEC_VALUE_ORG ) {
 				return 120000
 			}
 			if ( dbspec == DBSPEC_PARAM3_ORG ) {
@@ -61983,14 +63958,14 @@
 			reftype = FILTER_ITEM_FOOD
 			return
 		}
 		if ( dbmode == DBMODE_REF_SPEC ) {
 			if ( dbspec == DBSPEC_TYPE ) {
-				return FILTER_ITEM_FOOD
+				return 57000
 			}
 			if ( dbspec == DBSPEC_TYPE_MINOR ) {
-				return FILTER_NONE
+				return 99999
 			}
 			if ( dbspec == DBSPEC_VALUE_ORG ) {
 				return 1000
 			}
 			if ( dbspec == DBSPEC_PARAM3_ORG ) {
@@ -62038,12 +64013,12 @@
 			inv(INV_ITEM_ID, ci) = ITEM_ID_MOONLIGHT
 			inv(INV_ITEM_PIC, ci) = xy2pic(11, 20)
 			reftype = FILTER_WEAPON
 			reftypeminor = FILTER_WEAPON_LONGSWORD
 			inv(INV_ITEM_NUM, ci) = 1
-			fixeditemenc = ENCHANT_RESISTANCE * EXT_ENCHANTMENT + SKILL_RES_MAGIC, 500, ENCHANT_SKILL * EXT_ENCHANTMENT + SKILL_NORMAL_HEALING, 1000, ENCHANT_SKILL * EXT_ENCHANTMENT + SKILL_NORMAL_MEDITATION, 1000, ENCHANT_RES_BLIND, 100, ENCHANT_PROC * EXT_ENCHANTMENT + ENCHANT_PROC_SHINING_WAVE, 500, 0
-			ibitmod ITEM_BIT_PRECIOUS, ci, 1
+			fixeditemenc = ENCHANT_RESISTANCE * EXT_ENCHANTMENT + SKILL_RES_MAGIC, 500, ENCHANT_SKILL * EXT_ENCHANTMENT + SKILL_NORMAL_HEALING, 1000, ENCHANT_SKILL * EXT_ENCHANTMENT + SKILL_NORMAL_MEDITATION, 1000, 23, 100, ENCHANT_PROC * EXT_ENCHANTMENT + ENCHANT_PROC_SHINING_WAVE, 500, 0
+			ibitmod ITEM_BIT_PRECIOUS, ci, TRUE
 			inv(INV_ITEM_IDENTIFY_LEVEL, ci) = 500
 			fixlv = FIX_QUALITY_UNIQUE
 			return
 		}
 		if ( dbmode == DBMODE_REF ) {
@@ -62052,14 +64027,14 @@
 			reftype = FILTER_WEAPON
 			return
 		}
 		if ( dbmode == DBMODE_REF_SPEC ) {
 			if ( dbspec == DBSPEC_TYPE ) {
-				return FILTER_WEAPON
+				return 10000
 			}
 			if ( dbspec == DBSPEC_TYPE_MINOR ) {
-				return FILTER_WEAPON_LONGSWORD
+				return 10002
 			}
 			if ( dbspec == DBSPEC_VALUE_ORG ) {
 				return 40000
 			}
 			if ( dbspec == DBSPEC_PARAM3_ORG ) {
@@ -62103,26 +64078,26 @@
 			reftype = FILTER_ITEM_ROD
 			reftypeminor = FILTER_ITEM_ROD_DAMAGE
 			inv(INV_ITEM_NUM, ci) = 1
 			fixeditemenc = 0
 			inv(INV_ITEM_IDENTIFY_LEVEL, ci) = 0
-			inv(INV_ITEM_CHARGE, ci) = 5 + rnd(5) - rnd(5)
-			ibitmod ITEM_BIT_CHARGE_ITEM, ci, 1
+			inv((9 /*!!!@[INV_ITEM_AMMO @@@ INV_ITEM_CHARGE @@@ INV_ITEM_CLIENT @@@ INV_ITEM_FILE @@@ INV_ITEM_NEXT_PERIOD]@!!! */), ci) = 5 + rnd(5) - rnd(5)
+			ibitmod ITEM_BIT_CHARGE_ITEM, ci, TRUE
 			return
 		}
 		if ( dbmode == DBMODE_REF ) {
 			ichargelevel = 5
 			infilterref = ""
 			reftype = FILTER_ITEM_ROD
 			return
 		}
 		if ( dbmode == DBMODE_REF_SPEC ) {
 			if ( dbspec == DBSPEC_TYPE ) {
-				return FILTER_ITEM_ROD
+				return 56000
 			}
 			if ( dbspec == DBSPEC_TYPE_MINOR ) {
-				return FILTER_ITEM_ROD_DAMAGE
+				return 56002
 			}
 			if ( dbspec == DBSPEC_VALUE_ORG ) {
 				return 4500
 			}
 			if ( dbspec == DBSPEC_PARAM3_ORG ) {
@@ -62182,11 +64157,11 @@
 			reftype = FILTER_ITEM_TOOL
 			reftypeminor = FILTER_NOTHING
 			inv(INV_ITEM_NUM, ci) = 1
 			fixeditemenc = 0
 			inv(INV_ITEM_EFFECT, ci) = EFFECT_CLEANING_DOLL
-			ibitmod ITEM_BIT_PRECIOUS, ci, 1
+			ibitmod ITEM_BIT_PRECIOUS, ci, TRUE
 			inv(INV_ITEM_IDENTIFY_LEVEL, ci) = 500
 			fixlv = FIX_QUALITY_UNIQUE
 			return
 		}
 		if ( dbmode == DBMODE_REF ) {
@@ -62195,14 +64170,14 @@
 			reftype = FILTER_ITEM_TOOL
 			return
 		}
 		if ( dbmode == DBMODE_REF_SPEC ) {
 			if ( dbspec == DBSPEC_TYPE ) {
-				return FILTER_ITEM_TOOL
+				return 59000
 			}
 			if ( dbspec == DBSPEC_TYPE_MINOR ) {
-				return FILTER_NONE
+				return 99999
 			}
 			if ( dbspec == DBSPEC_VALUE_ORG ) {
 				return 15000
 			}
 			if ( dbspec == DBSPEC_PARAM3_ORG ) {
@@ -62248,11 +64223,11 @@
 			inv(INV_ITEM_PIC, ci) = xy2pic(12, 6)
 			reftype = FILTER_ITEM_POTION
 			reftypeminor = FILTER_NOTHING
 			inv(INV_ITEM_NUM, ci) = 1
 			fixeditemenc = 0
-			ibitmod ITEM_BIT_PRECIOUS, ci, 1
+			ibitmod ITEM_BIT_PRECIOUS, ci, TRUE
 			inv(INV_ITEM_IDENTIFY_LEVEL, ci) = 500
 			fixlv = FIX_QUALITY_UNIQUE
 			return
 		}
 		if ( dbmode == DBMODE_REF ) {
@@ -62261,14 +64236,14 @@
 			reftype = FILTER_ITEM_POTION
 			return
 		}
 		if ( dbmode == DBMODE_REF_SPEC ) {
 			if ( dbspec == DBSPEC_TYPE ) {
-				return FILTER_ITEM_POTION
+				return 52000
 			}
 			if ( dbspec == DBSPEC_TYPE_MINOR ) {
-				return FILTER_NONE
+				return 99999
 			}
 			if ( dbspec == DBSPEC_VALUE_ORG ) {
 				return 80000
 			}
 			if ( dbspec == DBSPEC_PARAM3_ORG ) {
@@ -62320,11 +64295,11 @@
 			inv(INV_ITEM_PIC, ci) = xy2pic(6, 2)
 			reftype = FILTER_ITEM_POTION
 			reftypeminor = FILTER_NOTHING
 			inv(INV_ITEM_NUM, ci) = 1
 			fixeditemenc = 0
-			ibitmod ITEM_BIT_PRECIOUS, ci, 1
+			ibitmod ITEM_BIT_PRECIOUS, ci, TRUE
 			inv(INV_ITEM_IDENTIFY_LEVEL, ci) = 500
 			fixlv = FIX_QUALITY_UNIQUE
 			return
 		}
 		if ( dbmode == DBMODE_REF ) {
@@ -62333,14 +64308,14 @@
 			reftype = FILTER_ITEM_POTION
 			return
 		}
 		if ( dbmode == DBMODE_REF_SPEC ) {
 			if ( dbspec == DBSPEC_TYPE ) {
-				return FILTER_ITEM_POTION
+				return 52000
 			}
 			if ( dbspec == DBSPEC_TYPE_MINOR ) {
-				return FILTER_NONE
+				return 99999
 			}
 			if ( dbspec == DBSPEC_VALUE_ORG ) {
 				return 80000
 			}
 			if ( dbspec == DBSPEC_PARAM3_ORG ) {
@@ -62403,14 +64378,14 @@
 			reftype = FILTER_ITEM_POTION
 			return
 		}
 		if ( dbmode == DBMODE_REF_SPEC ) {
 			if ( dbspec == DBSPEC_TYPE ) {
-				return FILTER_ITEM_POTION
+				return 52000
 			}
 			if ( dbspec == DBSPEC_TYPE_MINOR ) {
-				return FILTER_NONE
+				return 99999
 			}
 			if ( dbspec == DBSPEC_VALUE_ORG ) {
 				return 80000
 			}
 			if ( dbspec == DBSPEC_PARAM3_ORG ) {
@@ -62473,14 +64448,14 @@
 			reftype = FILTER_ITEM_POTION
 			return
 		}
 		if ( dbmode == DBMODE_REF_SPEC ) {
 			if ( dbspec == DBSPEC_TYPE ) {
-				return FILTER_ITEM_POTION
+				return 52000
 			}
 			if ( dbspec == DBSPEC_TYPE_MINOR ) {
-				return FILTER_NONE
+				return 99999
 			}
 			if ( dbspec == DBSPEC_VALUE_ORG ) {
 				return 80000
 			}
 			if ( dbspec == DBSPEC_PARAM3_ORG ) {
@@ -62536,12 +64511,12 @@
 			inv(INV_ITEM_ID, ci) = ITEM_ID_AA_12_ADVANCE
 			inv(INV_ITEM_PIC, ci) = xy2pic(31, 23)
 			reftype = FILTER_RANGE
 			reftypeminor = FILTER_RANGE_PISTOL
 			inv(INV_ITEM_NUM, ci) = 1
-			fixeditemenc = ENCHANT_EXTRA_RANGED, 500, ENCHANT_PROC * EXT_ENCHANTMENT + ENCHANT_PROC_GRENADE, 80, ENCHANT_ELEMENTAL_DMG * EXT_ENCHANTMENT + SKILL_RES_MIND, 1000, ENCHANT_RESISTANCE * EXT_ENCHANTMENT + SKILL_RES_SOUND, -100, ENCHANT_RESISTANCE * EXT_ENCHANTMENT + SKILL_RES_NERVE, 600, ENCHANT_RES_BLIND, 100, 0
-			ibitmod ITEM_BIT_PRECIOUS, ci, 1
+			fixeditemenc = 51, 500, ENCHANT_PROC * EXT_ENCHANTMENT + ENCHANT_PROC_GRENADE, 80, ENCHANT_ELEMENTAL_DMG * EXT_ENCHANTMENT + SKILL_RES_MIND, 1000, ENCHANT_RESISTANCE * EXT_ENCHANTMENT + SKILL_RES_SOUND, -100, ENCHANT_RESISTANCE * EXT_ENCHANTMENT + SKILL_RES_NERVE, 600, 23, 100, 0
+			ibitmod ITEM_BIT_PRECIOUS, ci, TRUE
 			inv(INV_ITEM_IDENTIFY_LEVEL, ci) = 500
 			fixlv = FIX_QUALITY_UNIQUE
 			return
 		}
 		if ( dbmode == DBMODE_REF ) {
@@ -62550,14 +64525,14 @@
 			reftype = FILTER_RANGE
 			return
 		}
 		if ( dbmode == DBMODE_REF_SPEC ) {
 			if ( dbspec == DBSPEC_TYPE ) {
-				return FILTER_RANGE
+				return 24000
 			}
 			if ( dbspec == DBSPEC_TYPE_MINOR ) {
-				return FILTER_RANGE_PISTOL
+				return 24020
 			}
 			if ( dbspec == DBSPEC_VALUE_ORG ) {
 				return 55000
 			}
 			if ( dbspec == DBSPEC_PARAM3_ORG ) {
@@ -62605,12 +64580,12 @@
 			inv(INV_ITEM_ID, ci) = ITEM_ID_SLASH_JOKER
 			inv(INV_ITEM_PIC, ci) = xy2pic(13, 1)
 			reftype = FILTER_RANGE
 			reftypeminor = FILTER_RANGE_ROCK_THROW
 			inv(INV_ITEM_NUM, ci) = 1
-			fixeditemenc = ENCHANT_ELEMENTAL_DMG * EXT_ENCHANTMENT + SKILL_RESDMG_CUT, 200, ENCHANT_PROC * EXT_ENCHANTMENT + ENCHANT_PROC_DECAPITATION, 60, ENCHANT_ATTRIBUTE * EXT_ENCHANTMENT + SKILL_ATTR_WIL, 300, ENCHANT_RES_SLEEP, 100, 0
-			ibitmod ITEM_BIT_PRECIOUS, ci, 1
+			fixeditemenc = ENCHANT_ELEMENTAL_DMG * EXT_ENCHANTMENT + SKILL_RESDMG_CUT, 200, ENCHANT_PROC * EXT_ENCHANTMENT + ENCHANT_PROC_DECAPITATION, 60, ENCHANT_ATTRIBUTE * EXT_ENCHANTMENT + SKILL_ATTR_WIL, 300, 27, 100, 0
+			ibitmod ITEM_BIT_PRECIOUS, ci, TRUE
 			inv(INV_ITEM_IDENTIFY_LEVEL, ci) = 500
 			fixlv = FIX_QUALITY_UNIQUE
 			return
 		}
 		if ( dbmode == DBMODE_REF ) {
@@ -62619,14 +64594,14 @@
 			reftype = FILTER_RANGE
 			return
 		}
 		if ( dbmode == DBMODE_REF_SPEC ) {
 			if ( dbspec == DBSPEC_TYPE ) {
-				return FILTER_RANGE
+				return 24000
 			}
 			if ( dbspec == DBSPEC_TYPE_MINOR ) {
-				return FILTER_RANGE_ROCK_THROW
+				return 24030
 			}
 			if ( dbspec == DBSPEC_VALUE_ORG ) {
 				return 5000
 			}
 			if ( dbspec == DBSPEC_PARAM3_ORG ) {
@@ -62671,12 +64646,12 @@
 			inv(INV_ITEM_ID, ci) = ITEM_ID_MAG_ABYSS
 			inv(INV_ITEM_PIC, ci) = xy2pic(15, 14)
 			reftype = FILTER_HELM
 			reftypeminor = FILTER_HELM_LIGHT
 			inv(INV_ITEM_NUM, ci) = 1
-			fixeditemenc = ENCHANT_RES_CONFUSE, 100, ENCHANT_RES_BLIND, 100, ENCHANT_ATTRIBUTE * EXT_ENCHANTMENT + SKILL_ATTR_LIFE, 100, ENCHANT_RESISTANCE * EXT_ENCHANTMENT + SKILL_RES_NETHER, 250, ENCHANT_ENHANCE_SPELL, 400, 0
-			ibitmod ITEM_BIT_PRECIOUS, ci, 1
+			fixeditemenc = 25, 100, 23, 100, ENCHANT_ATTRIBUTE * EXT_ENCHANTMENT + SKILL_ATTR_LIFE, 100, ENCHANT_RESISTANCE * EXT_ENCHANTMENT + SKILL_RES_NETHER, 250, 34, 400, 0
+			ibitmod ITEM_BIT_PRECIOUS, ci, TRUE
 			inv(INV_ITEM_IDENTIFY_LEVEL, ci) = 500
 			fixlv = FIX_QUALITY_UNIQUE
 			return
 		}
 		if ( dbmode == DBMODE_REF ) {
@@ -62685,14 +64660,14 @@
 			reftype = FILTER_HELM
 			return
 		}
 		if ( dbmode == DBMODE_REF_SPEC ) {
 			if ( dbspec == DBSPEC_TYPE ) {
-				return FILTER_HELM
+				return 12000
 			}
 			if ( dbspec == DBSPEC_TYPE_MINOR ) {
-				return FILTER_HELM_LIGHT
+				return 12002
 			}
 			if ( dbspec == DBSPEC_VALUE_ORG ) {
 				return 32000
 			}
 			if ( dbspec == DBSPEC_PARAM3_ORG ) {
@@ -62747,14 +64722,14 @@
 			reftype = FILTER_ITEM_TOOL
 			return
 		}
 		if ( dbmode == DBMODE_REF_SPEC ) {
 			if ( dbspec == DBSPEC_TYPE ) {
-				return FILTER_ITEM_TOOL
+				return 59000
 			}
 			if ( dbspec == DBSPEC_TYPE_MINOR ) {
-				return FILTER_NONE
+				return 99999
 			}
 			if ( dbspec == DBSPEC_VALUE_ORG ) {
 				return 1000
 			}
 			if ( dbspec == DBSPEC_PARAM3_ORG ) {
@@ -62812,14 +64787,14 @@
 			reftype = FILTER_ITEM_TOOL
 			return
 		}
 		if ( dbmode == DBMODE_REF_SPEC ) {
 			if ( dbspec == DBSPEC_TYPE ) {
-				return FILTER_ITEM_TOOL
+				return 59000
 			}
 			if ( dbspec == DBSPEC_TYPE_MINOR ) {
-				return FILTER_NONE
+				return 99999
 			}
 			if ( dbspec == DBSPEC_VALUE_ORG ) {
 				return 5000
 			}
 			if ( dbspec == DBSPEC_PARAM3_ORG ) {
@@ -62866,12 +64841,12 @@
 			reftype = FILTER_ITEM_TOOL
 			reftypeminor = FILTER_NOTHING
 			inv(INV_ITEM_NUM, ci) = 1
 			fixeditemenc = 0
 			inv(INV_ITEM_EFFECT, ci) = EFFECT_DOG_WHISTLE
-			ibitmod ITEM_BIT_PRECIOUS, ci, 1
-			ibitmod ITEM_BIT_PERIOD, ci, 1
+			ibitmod ITEM_BIT_PRECIOUS, ci, TRUE
+			ibitmod ITEM_BIT_PERIOD, ci, TRUE
 			inv(INV_ITEM_PARAM3, ci) = 12
 			inv(INV_ITEM_IDENTIFY_LEVEL, ci) = 500
 			fixlv = FIX_QUALITY_UNIQUE
 			return
 		}
@@ -62881,14 +64856,14 @@
 			reftype = FILTER_ITEM_TOOL
 			return
 		}
 		if ( dbmode == DBMODE_REF_SPEC ) {
 			if ( dbspec == DBSPEC_TYPE ) {
-				return FILTER_ITEM_TOOL
+				return 59000
 			}
 			if ( dbspec == DBSPEC_TYPE_MINOR ) {
-				return FILTER_NONE
+				return 99999
 			}
 			if ( dbspec == DBSPEC_VALUE_ORG ) {
 				return 1400
 			}
 			if ( dbspec == DBSPEC_PARAM3_ORG ) {
@@ -62940,11 +64915,11 @@
 			inv(INV_ITEM_PIC, ci) = xy2pic(21, 1)
 			reftype = FILTER_RANGE
 			reftypeminor = FILTER_RANGE_SHORTBOW
 			inv(INV_ITEM_NUM, ci) = 1
 			fixeditemenc = ENCHANT_ELEMENTAL_DMG * EXT_ENCHANTMENT + SKILL_RES_FIRE, 200, ENCHANT_ELEMENTAL_DMG * EXT_ENCHANTMENT + SKILL_RES_COLD, 200, ENCHANT_ELEMENTAL_DMG * EXT_ENCHANTMENT + SKILL_RES_LIGHTNING, 200, ENCHANT_ELEMENTAL_DMG * EXT_ENCHANTMENT + SKILL_RES_POISON, 200, ENCHANT_ELEMENTAL_DMG * EXT_ENCHANTMENT + SKILL_RES_SOUND, 200, ENCHANT_ELEMENTAL_DMG * EXT_ENCHANTMENT + SKILL_RES_CHAOS, 200, ENCHANT_ELEMENTAL_DMG * EXT_ENCHANTMENT + SKILL_RES_DARKNESS, 200, 0
-			ibitmod ITEM_BIT_PRECIOUS, ci, 1
+			ibitmod ITEM_BIT_PRECIOUS, ci, TRUE
 			inv(INV_ITEM_IDENTIFY_LEVEL, ci) = 500
 			fixlv = FIX_QUALITY_UNIQUE
 			return
 		}
 		if ( dbmode == DBMODE_REF ) {
@@ -62953,14 +64928,14 @@
 			reftype = FILTER_RANGE
 			return
 		}
 		if ( dbmode == DBMODE_REF_SPEC ) {
 			if ( dbspec == DBSPEC_TYPE ) {
-				return FILTER_RANGE
+				return 24000
 			}
 			if ( dbspec == DBSPEC_TYPE_MINOR ) {
-				return FILTER_RANGE_SHORTBOW
+				return 24001
 			}
 			if ( dbspec == DBSPEC_VALUE_ORG ) {
 				return 40000
 			}
 			if ( dbspec == DBSPEC_PARAM3_ORG ) {
@@ -63008,12 +64983,12 @@
 			inv(INV_ITEM_ID, ci) = ITEM_ID_FLASH_CROSSBOW
 			inv(INV_ITEM_PIC, ci) = xy2pic(3, 15)
 			reftype = FILTER_RANGE
 			reftypeminor = FILTER_RANGE_CROSSBOW
 			inv(INV_ITEM_NUM, ci) = 1
-			fixeditemenc = ENCHANT_EXTRA_RANGED, 500, ENCHANT_RESISTANCE * EXT_ENCHANTMENT + SKILL_RES_MIND, 400, ENCHANT_ATTRIBUTE * EXT_ENCHANTMENT + SKILL_ATTR_DEX, 400, ENCHANT_ATTRIBUTE * EXT_ENCHANTMENT + SKILL_ATTR_PER, 500, ENCHANT_RES_PARALYZE, 100, 0
-			ibitmod ITEM_BIT_PRECIOUS, ci, 1
+			fixeditemenc = 51, 500, ENCHANT_RESISTANCE * EXT_ENCHANTMENT + SKILL_RES_MIND, 400, ENCHANT_ATTRIBUTE * EXT_ENCHANTMENT + SKILL_ATTR_DEX, 400, ENCHANT_ATTRIBUTE * EXT_ENCHANTMENT + SKILL_ATTR_PER, 500, 24, 100, 0
+			ibitmod ITEM_BIT_PRECIOUS, ci, TRUE
 			inv(INV_ITEM_IDENTIFY_LEVEL, ci) = 500
 			fixlv = FIX_QUALITY_UNIQUE
 			return
 		}
 		if ( dbmode == DBMODE_REF ) {
@@ -63022,14 +64997,14 @@
 			reftype = FILTER_RANGE
 			return
 		}
 		if ( dbmode == DBMODE_REF_SPEC ) {
 			if ( dbspec == DBSPEC_TYPE ) {
-				return FILTER_RANGE
+				return 24000
 			}
 			if ( dbspec == DBSPEC_TYPE_MINOR ) {
-				return FILTER_RANGE_CROSSBOW
+				return 24003
 			}
 			if ( dbspec == DBSPEC_VALUE_ORG ) {
 				return 50000
 			}
 			if ( dbspec == DBSPEC_PARAM3_ORG ) {
@@ -63083,14 +65058,14 @@
 			reftype = FILTER_FURNITURE
 			return
 		}
 		if ( dbmode == DBMODE_REF_SPEC ) {
 			if ( dbspec == DBSPEC_TYPE ) {
-				return FILTER_FURNITURE
+				return 60000
 			}
 			if ( dbspec == DBSPEC_TYPE_MINOR ) {
-				return FILTER_NONE
+				return 99999
 			}
 			if ( dbspec == DBSPEC_VALUE_ORG ) {
 				return 9600
 			}
 			if ( dbspec == DBSPEC_PARAM3_ORG ) {
@@ -63144,14 +65119,14 @@
 			reftype = FILTER_FURNITURE
 			return
 		}
 		if ( dbmode == DBMODE_REF_SPEC ) {
 			if ( dbspec == DBSPEC_TYPE ) {
-				return FILTER_FURNITURE
+				return 60000
 			}
 			if ( dbspec == DBSPEC_TYPE_MINOR ) {
-				return FILTER_NONE
+				return 99999
 			}
 			if ( dbspec == DBSPEC_VALUE_ORG ) {
 				return 9600
 			}
 			if ( dbspec == DBSPEC_PARAM3_ORG ) {
@@ -63195,26 +65170,26 @@
 			reftype = FILTER_ITEM_SPELLBOOK
 			reftypeminor = FILTER_NOTHING
 			inv(INV_ITEM_NUM, ci) = 1
 			fixeditemenc = 0
 			inv(INV_ITEM_IDENTIFY_LEVEL, ci) = 0
-			inv(INV_ITEM_CHARGE, ci) = 5 + rnd(5) - rnd(5)
-			ibitmod ITEM_BIT_CHARGE_ITEM, ci, 1
+			inv((9 /*!!!@[INV_ITEM_AMMO @@@ INV_ITEM_CHARGE @@@ INV_ITEM_CLIENT @@@ INV_ITEM_FILE @@@ INV_ITEM_NEXT_PERIOD]@!!! */), ci) = 5 + rnd(5) - rnd(5)
+			ibitmod ITEM_BIT_CHARGE_ITEM, ci, TRUE
 			return
 		}
 		if ( dbmode == DBMODE_REF ) {
 			ichargelevel = 5
 			infilterref = ""
 			reftype = FILTER_ITEM_SPELLBOOK
 			return
 		}
 		if ( dbmode == DBMODE_REF_SPEC ) {
 			if ( dbspec == DBSPEC_TYPE ) {
-				return FILTER_ITEM_SPELLBOOK
+				return 54000
 			}
 			if ( dbspec == DBSPEC_TYPE_MINOR ) {
-				return FILTER_NONE
+				return 99999
 			}
 			if ( dbspec == DBSPEC_VALUE_ORG ) {
 				return 1300
 			}
 			if ( dbspec == DBSPEC_PARAM3_ORG ) {
@@ -63278,14 +65253,14 @@
 			reftype = FILTER_ITEM_TOOL
 			return
 		}
 		if ( dbmode == DBMODE_REF_SPEC ) {
 			if ( dbspec == DBSPEC_TYPE ) {
-				return FILTER_ITEM_TOOL
+				return 59000
 			}
 			if ( dbspec == DBSPEC_TYPE_MINOR ) {
-				return FILTER_NONE
+				return 99999
 			}
 			if ( dbspec == DBSPEC_VALUE_ORG ) {
 				return 30000
 			}
 			if ( dbspec == DBSPEC_PARAM3_ORG ) {
@@ -63333,12 +65308,12 @@
 			inv(INV_ITEM_ID, ci) = ITEM_ID_UNICORN_DRILL
 			inv(INV_ITEM_PIC, ci) = xy2pic(16, 1)
 			reftype = FILTER_WEAPON
 			reftypeminor = FILTER_WEAPON_POLEARM
 			inv(INV_ITEM_NUM, ci) = 1
-			fixeditemenc = ENCHANT_ABSORB_STAMINA, 300, ENCHANT_ELEMENTAL_DMG * EXT_ENCHANTMENT + SKILL_RES_CHAOS, 500, ENCHANT_RESISTANCE * EXT_ENCHANTMENT + SKILL_RES_CHAOS, 500, ENCHANT_RES_FEAR, 100, ENCHANT_SKILL * EXT_ENCHANTMENT + SKILL_NORMAL_MINING, 600, ENCHANT_PROC * EXT_ENCHANTMENT + ENCHANT_PROC_CHAOS_BALL, 300, ENCHANT_SKILL * EXT_ENCHANTMENT + SKILL_NORMAL_CONTROL_MAGIC, 500, 0
-			ibitmod ITEM_BIT_PRECIOUS, ci, 1
+			fixeditemenc = 36, 300, ENCHANT_ELEMENTAL_DMG * EXT_ENCHANTMENT + SKILL_RES_CHAOS, 500, ENCHANT_RESISTANCE * EXT_ENCHANTMENT + SKILL_RES_CHAOS, 500, 26, 100, ENCHANT_SKILL * EXT_ENCHANTMENT + SKILL_NORMAL_MINING, 600, ENCHANT_PROC * EXT_ENCHANTMENT + ENCHANT_PROC_CHAOS_BALL, 300, ENCHANT_SKILL * EXT_ENCHANTMENT + SKILL_NORMAL_CONTROL_MAGIC, 500, 0
+			ibitmod ITEM_BIT_PRECIOUS, ci, TRUE
 			inv(INV_ITEM_IDENTIFY_LEVEL, ci) = 500
 			fixlv = FIX_QUALITY_UNIQUE
 			return
 		}
 		if ( dbmode == DBMODE_REF ) {
@@ -63347,14 +65322,14 @@
 			reftype = FILTER_WEAPON
 			return
 		}
 		if ( dbmode == DBMODE_REF_SPEC ) {
 			if ( dbspec == DBSPEC_TYPE ) {
-				return FILTER_WEAPON
+				return 10000
 			}
 			if ( dbspec == DBSPEC_TYPE_MINOR ) {
-				return FILTER_WEAPON_POLEARM
+				return 10007
 			}
 			if ( dbspec == DBSPEC_VALUE_ORG ) {
 				return 60000
 			}
 			if ( dbspec == DBSPEC_PARAM3_ORG ) {
@@ -63409,14 +65384,14 @@
 			reftype = FILTER_ITEM_FOOD
 			return
 		}
 		if ( dbmode == DBMODE_REF_SPEC ) {
 			if ( dbspec == DBSPEC_TYPE ) {
-				return FILTER_ITEM_FOOD
+				return 57000
 			}
 			if ( dbspec == DBSPEC_TYPE_MINOR ) {
-				return FILTER_NONE
+				return 99999
 			}
 			if ( dbspec == DBSPEC_VALUE_ORG ) {
 				return 1000
 			}
 			if ( dbspec == DBSPEC_PARAM3_ORG ) {
@@ -63463,12 +65438,12 @@
 			inv(INV_ITEM_ID, ci) = ITEM_ID_NOVA_GRENADE
 			inv(INV_ITEM_PIC, ci) = xy2pic(9, 16)
 			reftype = FILTER_RANGE
 			reftypeminor = FILTER_RANGE_ROCK_THROW
 			inv(INV_ITEM_NUM, ci) = 1
-			fixeditemenc = ENCHANT_PROC * EXT_ENCHANTMENT + ENCHANT_PROC_GRENADE, 250, ENCHANT_SKILL * EXT_ENCHANTMENT + SKILL_WEAPON_THROWING, 300, ENCHANT_RESISTANCE * EXT_ENCHANTMENT + SKILL_RES_SOUND, 400, ENCHANT_ATTRIBUTE * EXT_ENCHANTMENT + SKILL_ATTR_CON, 300, ENCHANT_RES_FEAR, 100, 0
-			ibitmod ITEM_BIT_PRECIOUS, ci, 1
+			fixeditemenc = ENCHANT_PROC * EXT_ENCHANTMENT + ENCHANT_PROC_GRENADE, 250, ENCHANT_SKILL * EXT_ENCHANTMENT + SKILL_WEAPON_THROWING, 300, ENCHANT_RESISTANCE * EXT_ENCHANTMENT + SKILL_RES_SOUND, 400, ENCHANT_ATTRIBUTE * EXT_ENCHANTMENT + SKILL_ATTR_CON, 300, 26, 100, 0
+			ibitmod ITEM_BIT_PRECIOUS, ci, TRUE
 			inv(INV_ITEM_IDENTIFY_LEVEL, ci) = 500
 			fixlv = FIX_QUALITY_UNIQUE
 			return
 		}
 		if ( dbmode == DBMODE_REF ) {
@@ -63477,14 +65452,14 @@
 			reftype = FILTER_RANGE
 			return
 		}
 		if ( dbmode == DBMODE_REF_SPEC ) {
 			if ( dbspec == DBSPEC_TYPE ) {
-				return FILTER_RANGE
+				return 24000
 			}
 			if ( dbspec == DBSPEC_TYPE_MINOR ) {
-				return FILTER_RANGE_ROCK_THROW
+				return 24030
 			}
 			if ( dbspec == DBSPEC_VALUE_ORG ) {
 				return 30000
 			}
 			if ( dbspec == DBSPEC_PARAM3_ORG ) {
@@ -63539,14 +65514,14 @@
 			reftype = FILTER_ITEM_TOOL
 			return
 		}
 		if ( dbmode == DBMODE_REF_SPEC ) {
 			if ( dbspec == DBSPEC_TYPE ) {
-				return FILTER_ITEM_TOOL
+				return 59000
 			}
 			if ( dbspec == DBSPEC_TYPE_MINOR ) {
-				return FILTER_NONE
+				return 99999
 			}
 			if ( dbspec == DBSPEC_VALUE_ORG ) {
 				return 500
 			}
 			if ( dbspec == DBSPEC_PARAM3_ORG ) {
@@ -63605,14 +65580,14 @@
 			reftype = FILTER_FURNITURE
 			return
 		}
 		if ( dbmode == DBMODE_REF_SPEC ) {
 			if ( dbspec == DBSPEC_TYPE ) {
-				return FILTER_FURNITURE
+				return 60000
 			}
 			if ( dbspec == DBSPEC_TYPE_MINOR ) {
-				return FILTER_NONE
+				return 99999
 			}
 			if ( dbspec == DBSPEC_VALUE_ORG ) {
 				return 9600
 			}
 			if ( dbspec == DBSPEC_PARAM3_ORG ) {
@@ -63660,12 +65635,12 @@
 			inv(INV_ITEM_ID, ci) = ITEM_ID_FLAME_EDGE
 			inv(INV_ITEM_PIC, ci) = xy2pic(10, 22)
 			reftype = FILTER_WEAPON
 			reftypeminor = FILTER_WEAPON_HEAVY_SWORD
 			inv(INV_ITEM_NUM, ci) = 1
-			fixeditemenc = ENCHANT_BANE_UNDEAD, 800, ENCHANT_ELEMENTAL_DMG * EXT_ENCHANTMENT + SKILL_RES_FIRE, 900, ENCHANT_RESISTANCE * EXT_ENCHANTMENT + SKILL_RES_FIRE, 500, ENCHANT_SKILL * EXT_ENCHANTMENT + SKILL_NORMAL_TWO_HAND, 300, 0
-			ibitmod ITEM_BIT_PRECIOUS, ci, 1
+			fixeditemenc = 58, 800, ENCHANT_ELEMENTAL_DMG * EXT_ENCHANTMENT + SKILL_RES_FIRE, 900, ENCHANT_RESISTANCE * EXT_ENCHANTMENT + SKILL_RES_FIRE, 500, ENCHANT_SKILL * EXT_ENCHANTMENT + SKILL_NORMAL_TWO_HAND, 300, 0
+			ibitmod ITEM_BIT_PRECIOUS, ci, TRUE
 			inv(INV_ITEM_IDENTIFY_LEVEL, ci) = 500
 			fixlv = FIX_QUALITY_UNIQUE
 			return
 		}
 		if ( dbmode == DBMODE_REF ) {
@@ -63674,14 +65649,14 @@
 			reftype = FILTER_WEAPON
 			return
 		}
 		if ( dbmode == DBMODE_REF_SPEC ) {
 			if ( dbspec == DBSPEC_TYPE ) {
-				return FILTER_WEAPON
+				return 10000
 			}
 			if ( dbspec == DBSPEC_TYPE_MINOR ) {
-				return FILTER_WEAPON_HEAVY_SWORD
+				return 10001
 			}
 			if ( dbspec == DBSPEC_VALUE_ORG ) {
 				return 30000
 			}
 			if ( dbspec == DBSPEC_PARAM3_ORG ) {
@@ -63729,12 +65704,12 @@
 			inv(INV_ITEM_ID, ci) = ITEM_ID_ZWIEBEL
 			inv(INV_ITEM_PIC, ci) = xy2pic(1, 12)
 			reftype = FILTER_WEAPON
 			reftypeminor = FILTER_WEAPON_STAVE
 			inv(INV_ITEM_NUM, ci) = 1
-			fixeditemenc = ENCHANT_CRIT_CHANCE, 800, ENCHANT_SUSTAIN * EXT_ENCHANTMENT + SKILL_ATTR_DEX, 100, ENCHANT_SUSTAIN * EXT_ENCHANTMENT + SKILL_ATTR_PER, 100, ENCHANT_SUSTAIN * EXT_ENCHANTMENT + SKILL_ATTR_CON, 100, ENCHANT_SKILL * EXT_ENCHANTMENT + SKILL_NORMAL_EYE_OF_MIND, 1200, 0
-			ibitmod ITEM_BIT_PRECIOUS, ci, 1
+			fixeditemenc = 44, 800, ENCHANT_SUSTAIN * EXT_ENCHANTMENT + SKILL_ATTR_DEX, 100, ENCHANT_SUSTAIN * EXT_ENCHANTMENT + SKILL_ATTR_PER, 100, ENCHANT_SUSTAIN * EXT_ENCHANTMENT + SKILL_ATTR_CON, 100, ENCHANT_SKILL * EXT_ENCHANTMENT + SKILL_NORMAL_EYE_OF_MIND, 1200, 0
+			ibitmod ITEM_BIT_PRECIOUS, ci, TRUE
 			inv(INV_ITEM_IDENTIFY_LEVEL, ci) = 500
 			fixlv = FIX_QUALITY_UNIQUE
 			return
 		}
 		if ( dbmode == DBMODE_REF ) {
@@ -63743,14 +65718,14 @@
 			reftype = FILTER_WEAPON
 			return
 		}
 		if ( dbmode == DBMODE_REF_SPEC ) {
 			if ( dbspec == DBSPEC_TYPE ) {
-				return FILTER_WEAPON
+				return 10000
 			}
 			if ( dbspec == DBSPEC_TYPE_MINOR ) {
-				return FILTER_WEAPON_STAVE
+				return 10006
 			}
 			if ( dbspec == DBSPEC_VALUE_ORG ) {
 				return 100
 			}
 			if ( dbspec == DBSPEC_PARAM3_ORG ) {
@@ -63796,12 +65771,12 @@
 			inv(INV_ITEM_ID, ci) = ITEM_ID_SEALED_SHIELD
 			inv(INV_ITEM_PIC, ci) = xy2pic(8, 22)
 			reftype = FILTER_SHIELD
 			reftypeminor = FILTER_SHIELD_SMALL
 			inv(INV_ITEM_NUM, ci) = 1
-			fixeditemenc = ENCHANT_SKILL * EXT_ENCHANTMENT + SKILL_NORMAL_SHIELD, 200, ENCHANT_IMMUNE_DAMAGE, 700, ENCHANT_RES_PHYSICAL, 700, ENCHANT_RES_CURSE, 500, 0
-			ibitmod ITEM_BIT_PRECIOUS, ci, 1
+			fixeditemenc = ENCHANT_SKILL * EXT_ENCHANTMENT + SKILL_NORMAL_SHIELD, 200, 53, 700, 52, 700, 43, 500, 0
+			ibitmod ITEM_BIT_PRECIOUS, ci, TRUE
 			inv(INV_ITEM_IDENTIFY_LEVEL, ci) = 500
 			fixlv = FIX_QUALITY_UNIQUE
 			return
 		}
 		if ( dbmode == DBMODE_REF ) {
@@ -63810,14 +65785,14 @@
 			reftype = FILTER_SHIELD
 			return
 		}
 		if ( dbmode == DBMODE_REF_SPEC ) {
 			if ( dbspec == DBSPEC_TYPE ) {
-				return FILTER_SHIELD
+				return 14000
 			}
 			if ( dbspec == DBSPEC_TYPE_MINOR ) {
-				return FILTER_SHIELD_SMALL
+				return 14003
 			}
 			if ( dbspec == DBSPEC_VALUE_ORG ) {
 				return 35000
 			}
 			if ( dbspec == DBSPEC_PARAM3_ORG ) {
@@ -63866,12 +65841,12 @@
 			inv(INV_ITEM_ID, ci) = ITEM_ID_VITAL_FLAYER
 			inv(INV_ITEM_PIC, ci) = xy2pic(9, 22)
 			reftype = FILTER_WEAPON
 			reftypeminor = FILTER_WEAPON_STAVE
 			inv(INV_ITEM_NUM, ci) = 1
-			fixeditemenc = ENCHANT_ATTRIBUTE * EXT_ENCHANTMENT + SKILL_ATTR_STR, -900, ENCHANT_ATTRIBUTE * EXT_ENCHANTMENT + SKILL_ATTR_CON, -900, ENCHANT_ATTRIBUTE * EXT_ENCHANTMENT + SKILL_ATTR_DEX, -900, ENCHANT_ATTRIBUTE * EXT_ENCHANTMENT + SKILL_ATTR_PER, -900, ENCHANT_ATTRIBUTE * EXT_ENCHANTMENT + SKILL_ATTR_LER, -900, ENCHANT_ATTRIBUTE * EXT_ENCHANTMENT + SKILL_ATTR_WIL, -900, ENCHANT_ATTRIBUTE * EXT_ENCHANTMENT + SKILL_ATTR_SPD, -900, ENCHANT_ATTRIBUTE * EXT_ENCHANTMENT + SKILL_ATTR_MAG, 800, ENCHANT_ENHANCE_SPELL, 1200, 0
-			ibitmod ITEM_BIT_PRECIOUS, ci, 1
+			fixeditemenc = ENCHANT_ATTRIBUTE * EXT_ENCHANTMENT + SKILL_ATTR_STR, -900, ENCHANT_ATTRIBUTE * EXT_ENCHANTMENT + SKILL_ATTR_CON, -900, ENCHANT_ATTRIBUTE * EXT_ENCHANTMENT + SKILL_ATTR_DEX, -900, ENCHANT_ATTRIBUTE * EXT_ENCHANTMENT + SKILL_ATTR_PER, -900, ENCHANT_ATTRIBUTE * EXT_ENCHANTMENT + SKILL_ATTR_LER, -900, ENCHANT_ATTRIBUTE * EXT_ENCHANTMENT + SKILL_ATTR_WIL, -900, ENCHANT_ATTRIBUTE * EXT_ENCHANTMENT + SKILL_ATTR_SPD, -900, ENCHANT_ATTRIBUTE * EXT_ENCHANTMENT + SKILL_ATTR_MAG, 800, 34, 1200, 0
+			ibitmod ITEM_BIT_PRECIOUS, ci, TRUE
 			inv(INV_ITEM_IDENTIFY_LEVEL, ci) = 500
 			fixlv = FIX_QUALITY_UNIQUE
 			return
 		}
 		if ( dbmode == DBMODE_REF ) {
@@ -63880,14 +65855,14 @@
 			reftype = FILTER_WEAPON
 			return
 		}
 		if ( dbmode == DBMODE_REF_SPEC ) {
 			if ( dbspec == DBSPEC_TYPE ) {
-				return FILTER_WEAPON
+				return 10000
 			}
 			if ( dbspec == DBSPEC_TYPE_MINOR ) {
-				return FILTER_WEAPON_STAVE
+				return 10006
 			}
 			if ( dbspec == DBSPEC_VALUE_ORG ) {
 				return 40000
 			}
 			if ( dbspec == DBSPEC_PARAM3_ORG ) {
@@ -63931,12 +65906,12 @@
 			reftype = FILTER_ITEM_TOOL
 			reftypeminor = FILTER_NOTHING
 			inv(INV_ITEM_NUM, ci) = 1
 			fixeditemenc = 0
 			inv(INV_ITEM_EFFECT, ci) = EFFECT_ITZPALT_STATUE
-			ibitmod ITEM_BIT_PRECIOUS, ci, 1
-			ibitmod ITEM_BIT_PERIOD, ci, 1
+			ibitmod ITEM_BIT_PRECIOUS, ci, TRUE
+			ibitmod ITEM_BIT_PERIOD, ci, TRUE
 			inv(INV_ITEM_PARAM3, ci) = 120
 			inv(INV_ITEM_IDENTIFY_LEVEL, ci) = 0
 			fixlv = FIX_QUALITY_UNIQUE
 			return
 		}
@@ -63946,14 +65921,14 @@
 			reftype = FILTER_ITEM_TOOL
 			return
 		}
 		if ( dbmode == DBMODE_REF_SPEC ) {
 			if ( dbspec == DBSPEC_TYPE ) {
-				return FILTER_ITEM_TOOL
+				return 59000
 			}
 			if ( dbspec == DBSPEC_TYPE_MINOR ) {
-				return FILTER_NONE
+				return 99999
 			}
 			if ( dbspec == DBSPEC_VALUE_ORG ) {
 				return 100000
 			}
 			if ( dbspec == DBSPEC_PARAM3_ORG ) {
@@ -63997,12 +65972,12 @@
 			reftype = FILTER_ITEM_TOOL
 			reftypeminor = FILTER_NOTHING
 			inv(INV_ITEM_NUM, ci) = 1
 			fixeditemenc = 0
 			inv(INV_ITEM_EFFECT, ci) = EFFECT_YACATECT_STATUE
-			ibitmod ITEM_BIT_PRECIOUS, ci, 1
-			ibitmod ITEM_BIT_PERIOD, ci, 1
+			ibitmod ITEM_BIT_PRECIOUS, ci, TRUE
+			ibitmod ITEM_BIT_PERIOD, ci, TRUE
 			inv(INV_ITEM_PARAM3, ci) = 24
 			inv(INV_ITEM_IDENTIFY_LEVEL, ci) = 0
 			fixlv = FIX_QUALITY_UNIQUE
 			return
 		}
@@ -64012,14 +65987,14 @@
 			reftype = FILTER_ITEM_TOOL
 			return
 		}
 		if ( dbmode == DBMODE_REF_SPEC ) {
 			if ( dbspec == DBSPEC_TYPE ) {
-				return FILTER_ITEM_TOOL
+				return 59000
 			}
 			if ( dbspec == DBSPEC_TYPE_MINOR ) {
-				return FILTER_NONE
+				return 99999
 			}
 			if ( dbspec == DBSPEC_VALUE_ORG ) {
 				return 100000
 			}
 			if ( dbspec == DBSPEC_PARAM3_ORG ) {
@@ -64074,14 +66049,14 @@
 			reftype = FILTER_ITEM_TOOL
 			return
 		}
 		if ( dbmode == DBMODE_REF_SPEC ) {
 			if ( dbspec == DBSPEC_TYPE ) {
-				return FILTER_ITEM_TOOL
+				return 59000
 			}
 			if ( dbspec == DBSPEC_TYPE_MINOR ) {
-				return FILTER_NONE
+				return 99999
 			}
 			if ( dbspec == DBSPEC_VALUE_ORG ) {
 				return 2200
 			}
 			if ( dbspec == DBSPEC_PARAM3_ORG ) {
@@ -64136,14 +66111,14 @@
 			reftype = FILTER_CARGO_TRADE
 			return
 		}
 		if ( dbmode == DBMODE_REF_SPEC ) {
 			if ( dbspec == DBSPEC_TYPE ) {
-				return FILTER_CARGO_TRADE
+				return 92000
 			}
 			if ( dbspec == DBSPEC_TYPE_MINOR ) {
-				return FILTER_NONE
+				return 99999
 			}
 			if ( dbspec == DBSPEC_VALUE_ORG ) {
 				return 1550
 			}
 			if ( dbspec == DBSPEC_PARAM3_ORG ) {
@@ -64201,14 +66176,14 @@
 			reftype = FILTER_CARGO_TRADE
 			return
 		}
 		if ( dbmode == DBMODE_REF_SPEC ) {
 			if ( dbspec == DBSPEC_TYPE ) {
-				return FILTER_CARGO_TRADE
+				return 92000
 			}
 			if ( dbspec == DBSPEC_TYPE_MINOR ) {
-				return FILTER_NONE
+				return 99999
 			}
 			if ( dbspec == DBSPEC_VALUE_ORG ) {
 				return 150
 			}
 			if ( dbspec == DBSPEC_PARAM3_ORG ) {
@@ -64259,12 +66234,12 @@
 			inv(INV_ITEM_ID, ci) = ITEM_ID_NAIL_STRADIVARIUS
 			inv(INV_ITEM_PIC, ci) = xy2pic(6, 21)
 			reftype = FILTER_WEAPON
 			reftypeminor = FILTER_WEAPON_CLUB
 			inv(INV_ITEM_NUM, ci) = 1
-			fixeditemenc = ENCHANT_ELEMENTAL_DMG * EXT_ENCHANTMENT + SKILL_RES_SOUND, 450, ENCHANT_SKILL * EXT_ENCHANTMENT + SKILL_NORMAL_PERFORMER, -1200, ENCHANT_CRIT_CHANCE, 300, ENCHANT_RES_SLEEP, 100, 0
-			ibitmod ITEM_BIT_PRECIOUS, ci, 1
+			fixeditemenc = ENCHANT_ELEMENTAL_DMG * EXT_ENCHANTMENT + SKILL_RES_SOUND, 450, ENCHANT_SKILL * EXT_ENCHANTMENT + SKILL_NORMAL_PERFORMER, -1200, 44, 300, 27, 100, 0
+			ibitmod ITEM_BIT_PRECIOUS, ci, TRUE
 			inv(INV_ITEM_IDENTIFY_LEVEL, ci) = 500
 			fixlv = FIX_QUALITY_UNIQUE
 			return
 		}
 		if ( dbmode == DBMODE_REF ) {
@@ -64273,14 +66248,14 @@
 			reftype = FILTER_WEAPON
 			return
 		}
 		if ( dbmode == DBMODE_REF_SPEC ) {
 			if ( dbspec == DBSPEC_TYPE ) {
-				return FILTER_WEAPON
+				return 10000
 			}
 			if ( dbspec == DBSPEC_TYPE_MINOR ) {
-				return FILTER_WEAPON_CLUB
+				return 10004
 			}
 			if ( dbspec == DBSPEC_VALUE_ORG ) {
 				return 30000
 			}
 			if ( dbspec == DBSPEC_PARAM3_ORG ) {
@@ -64335,14 +66310,14 @@
 			reftype = FILTER_ITEM_BOOK
 			return
 		}
 		if ( dbmode == DBMODE_REF_SPEC ) {
 			if ( dbspec == DBSPEC_TYPE ) {
-				return FILTER_ITEM_BOOK
+				return 55000
 			}
 			if ( dbspec == DBSPEC_TYPE_MINOR ) {
-				return FILTER_NONE
+				return 99999
 			}
 			if ( dbspec == DBSPEC_VALUE_ORG ) {
 				return 100
 			}
 			if ( dbspec == DBSPEC_PARAM3_ORG ) {
@@ -64405,14 +66380,14 @@
 			reftype = FILTER_ITEM_FOOD
 			return
 		}
 		if ( dbmode == DBMODE_REF_SPEC ) {
 			if ( dbspec == DBSPEC_TYPE ) {
-				return FILTER_ITEM_FOOD
+				return 57000
 			}
 			if ( dbspec == DBSPEC_TYPE_MINOR ) {
-				return FILTER_NONE
+				return 99999
 			}
 			if ( dbspec == DBSPEC_VALUE_ORG ) {
 				return 6000
 			}
 			if ( dbspec == DBSPEC_PARAM3_ORG ) {
@@ -64461,12 +66436,12 @@
 			inv(INV_ITEM_ID, ci) = ITEM_ID_GERBERA_CROSS
 			inv(INV_ITEM_PIC, ci) = xy2pic(3, 22)
 			reftype = FILTER_RANGE
 			reftypeminor = FILTER_RANGE_ROCK_THROW
 			inv(INV_ITEM_NUM, ci) = 1
-			fixeditemenc = ENCHANT_ELEMENTAL_DMG * EXT_ENCHANTMENT + SKILL_RESDMG_CUT, 150, ENCHANT_SKILL * EXT_ENCHANTMENT + SKILL_NORMAL_STEALTH, -700, ENCHANT_ATTRIBUTE * EXT_ENCHANTMENT + SKILL_ATTR_DEX, 600, ENCHANT_CRIT_CHANCE, 300, 0
-			ibitmod ITEM_BIT_PRECIOUS, ci, 1
+			fixeditemenc = ENCHANT_ELEMENTAL_DMG * EXT_ENCHANTMENT + SKILL_RESDMG_CUT, 150, ENCHANT_SKILL * EXT_ENCHANTMENT + SKILL_NORMAL_STEALTH, -700, ENCHANT_ATTRIBUTE * EXT_ENCHANTMENT + SKILL_ATTR_DEX, 600, 44, 300, 84, 200, 0
+			ibitmod ITEM_BIT_PRECIOUS, ci, TRUE
 			inv(INV_ITEM_IDENTIFY_LEVEL, ci) = 500
 			fixlv = FIX_QUALITY_UNIQUE
 			return
 		}
 		if ( dbmode == DBMODE_REF ) {
@@ -64475,14 +66450,14 @@
 			reftype = FILTER_RANGE
 			return
 		}
 		if ( dbmode == DBMODE_REF_SPEC ) {
 			if ( dbspec == DBSPEC_TYPE ) {
-				return FILTER_RANGE
+				return 24000
 			}
 			if ( dbspec == DBSPEC_TYPE_MINOR ) {
-				return FILTER_RANGE_ROCK_THROW
+				return 24030
 			}
 			if ( dbspec == DBSPEC_VALUE_ORG ) {
 				return 10000
 			}
 			if ( dbspec == DBSPEC_PARAM3_ORG ) {
@@ -64499,11 +66474,11 @@
 			}
 			return 0
 		}
 		if ( dbmode == DBMODE_DESC ) {
 			if ( jp ) {
-				description(0) = "\t\t携行性と隠密性を犠牲にして威力を追求した手裏剣。その大きさはもはや暗器でないが、防御に使えるという長所も。\n#〜イルヴァ幻想辞典〜\n"
+				description(0) = "\t\t携行性と隠密性を犠牲にして威力を追求した手裏剣。その大きさはもはや暗器でないが、防御に使えるという長所も。刀身にはレアメタルが使われており、硬い物も切り裂く。\n#〜イルヴァ幻想辞典〜\n"
 				description(1) = ""
 				description(2) = ""
 				description(3) = "\t\t相手に出血を起こさせる投擲用武器だ。\n#〜鑑定報告書：＜武器＞カテゴリ〜\n"
 			}
 			else {
@@ -64537,14 +66512,14 @@
 			reftype = FILTER_ITEM_FOOD
 			return
 		}
 		if ( dbmode == DBMODE_REF_SPEC ) {
 			if ( dbspec == DBSPEC_TYPE ) {
-				return FILTER_ITEM_FOOD
+				return 57000
 			}
 			if ( dbspec == DBSPEC_TYPE_MINOR ) {
-				return FILTER_NONE
+				return 99999
 			}
 			if ( dbspec == DBSPEC_VALUE_ORG ) {
 				return 4500
 			}
 			if ( dbspec == DBSPEC_PARAM3_ORG ) {
@@ -64599,14 +66574,14 @@
 			reftype = FILTER_ITEM_FOOD
 			return
 		}
 		if ( dbmode == DBMODE_REF_SPEC ) {
 			if ( dbspec == DBSPEC_TYPE ) {
-				return FILTER_ITEM_FOOD
+				return 57000
 			}
 			if ( dbspec == DBSPEC_TYPE_MINOR ) {
-				return FILTER_NONE
+				return 99999
 			}
 			if ( dbspec == DBSPEC_VALUE_ORG ) {
 				return 3000
 			}
 			if ( dbspec == DBSPEC_PARAM3_ORG ) {
@@ -64660,14 +66635,14 @@
 			reftype = FILTER_ITEM_POTION
 			return
 		}
 		if ( dbmode == DBMODE_REF_SPEC ) {
 			if ( dbspec == DBSPEC_TYPE ) {
-				return FILTER_ITEM_POTION
+				return 52000
 			}
 			if ( dbspec == DBSPEC_TYPE_MINOR ) {
-				return FILTER_NONE
+				return 99999
 			}
 			if ( dbspec == DBSPEC_VALUE_ORG ) {
 				return 10000
 			}
 			if ( dbspec == DBSPEC_PARAM3_ORG ) {
@@ -64686,11 +66661,11 @@
 				return 150
 			}
 			return 0
 		}
 		if ( dbmode == DBMODE_ON_DRINK ) {
-			efid = SKILL_EFFECT_GAIN_SPEED_2
+			efid = efgainspeeds
 			efp = 500
 			gosub *drinkPotion
 			return -1
 		}
 		if ( dbmode == DBMODE_DESC ) {
@@ -64725,12 +66700,12 @@
 			inv(INV_ITEM_ID, ci) = ITEM_ID_NIGHTMARE
 			inv(INV_ITEM_PIC, ci) = xy2pic(11, 1)
 			reftype = FILTER_RANGE
 			reftypeminor = FILTER_RANGE_ROCK_THROW
 			inv(INV_ITEM_NUM, ci) = 1
-			fixeditemenc = ENCHANT_PROC * EXT_ENCHANTMENT + ENCHANT_PROC_NIGHTMARE, 400, ENCHANT_ATTRIBUTE * EXT_ENCHANTMENT + SKILL_ATTR_WIL, 600, ENCHANT_RESISTANCE * EXT_ENCHANTMENT + SKILL_RES_MIND, 300, ENCHANT_TIME_STOP, 300, 0
-			ibitmod ITEM_BIT_PRECIOUS, ci, 1
+			fixeditemenc = ENCHANT_PROC * EXT_ENCHANTMENT + ENCHANT_PROC_NIGHTMARE, 400, ENCHANT_ATTRIBUTE * EXT_ENCHANTMENT + SKILL_ATTR_WIL, 600, ENCHANT_RESISTANCE * EXT_ENCHANTMENT + SKILL_RES_MIND, 300, 40, 300, 0
+			ibitmod ITEM_BIT_PRECIOUS, ci, TRUE
 			inv(INV_ITEM_IDENTIFY_LEVEL, ci) = 500
 			fixlv = FIX_QUALITY_UNIQUE
 			return
 		}
 		if ( dbmode == DBMODE_REF ) {
@@ -64739,14 +66714,14 @@
 			reftype = FILTER_RANGE
 			return
 		}
 		if ( dbmode == DBMODE_REF_SPEC ) {
 			if ( dbspec == DBSPEC_TYPE ) {
-				return FILTER_RANGE
+				return 24000
 			}
 			if ( dbspec == DBSPEC_TYPE_MINOR ) {
-				return FILTER_RANGE_ROCK_THROW
+				return 24030
 			}
 			if ( dbspec == DBSPEC_VALUE_ORG ) {
 				return 10000
 			}
 			if ( dbspec == DBSPEC_PARAM3_ORG ) {
@@ -64803,14 +66778,14 @@
 			reftype = FILTER_FURNITURE
 			return
 		}
 		if ( dbmode == DBMODE_REF_SPEC ) {
 			if ( dbspec == DBSPEC_TYPE ) {
-				return FILTER_FURNITURE
+				return 60000
 			}
 			if ( dbspec == DBSPEC_TYPE_MINOR ) {
-				return FILTER_FURNITURE_INSTRUMENT
+				return 60005
 			}
 			if ( dbspec == DBSPEC_VALUE_ORG ) {
 				return 6000
 			}
 			if ( dbspec == DBSPEC_PARAM3_ORG ) {
@@ -64865,14 +66840,14 @@
 			reftype = FILTER_ITEM_FOOD
 			return
 		}
 		if ( dbmode == DBMODE_REF_SPEC ) {
 			if ( dbspec == DBSPEC_TYPE ) {
-				return FILTER_ITEM_FOOD
+				return 57000
 			}
 			if ( dbspec == DBSPEC_TYPE_MINOR ) {
-				return FILTER_NONE
+				return 99999
 			}
 			if ( dbspec == DBSPEC_VALUE_ORG ) {
 				return 110
 			}
 			if ( dbspec == DBSPEC_PARAM3_ORG ) {
@@ -64926,14 +66901,14 @@
 			reftype = FILTER_JUNK
 			return
 		}
 		if ( dbmode == DBMODE_REF_SPEC ) {
 			if ( dbspec == DBSPEC_TYPE ) {
-				return FILTER_JUNK
+				return 64000
 			}
 			if ( dbspec == DBSPEC_TYPE_MINOR ) {
-				return FILTER_NONE
+				return 99999
 			}
 			if ( dbspec == DBSPEC_VALUE_ORG ) {
 				return 2000
 			}
 			if ( dbspec == DBSPEC_PARAM3_ORG ) {
@@ -64987,14 +66962,14 @@
 			reftype = FILTER_JUNK
 			return
 		}
 		if ( dbmode == DBMODE_REF_SPEC ) {
 			if ( dbspec == DBSPEC_TYPE ) {
-				return FILTER_JUNK
+				return 64000
 			}
 			if ( dbspec == DBSPEC_TYPE_MINOR ) {
-				return FILTER_NONE
+				return 99999
 			}
 			if ( dbspec == DBSPEC_VALUE_ORG ) {
 				return 500
 			}
 			if ( dbspec == DBSPEC_PARAM3_ORG ) {
@@ -65048,14 +67023,14 @@
 			reftype = FILTER_JUNK
 			return
 		}
 		if ( dbmode == DBMODE_REF_SPEC ) {
 			if ( dbspec == DBSPEC_TYPE ) {
-				return FILTER_JUNK
+				return 64000
 			}
 			if ( dbspec == DBSPEC_TYPE_MINOR ) {
-				return FILTER_NONE
+				return 99999
 			}
 			if ( dbspec == DBSPEC_VALUE_ORG ) {
 				return 500
 			}
 			if ( dbspec == DBSPEC_PARAM3_ORG ) {
@@ -65109,14 +67084,14 @@
 			reftype = FILTER_JUNK
 			return
 		}
 		if ( dbmode == DBMODE_REF_SPEC ) {
 			if ( dbspec == DBSPEC_TYPE ) {
-				return FILTER_JUNK
+				return 64000
 			}
 			if ( dbspec == DBSPEC_TYPE_MINOR ) {
-				return FILTER_NONE
+				return 99999
 			}
 			if ( dbspec == DBSPEC_VALUE_ORG ) {
 				return 500
 			}
 			if ( dbspec == DBSPEC_PARAM3_ORG ) {
@@ -65170,14 +67145,14 @@
 			reftype = FILTER_JUNK
 			return
 		}
 		if ( dbmode == DBMODE_REF_SPEC ) {
 			if ( dbspec == DBSPEC_TYPE ) {
-				return FILTER_JUNK
+				return 64000
 			}
 			if ( dbspec == DBSPEC_TYPE_MINOR ) {
-				return FILTER_NONE
+				return 99999
 			}
 			if ( dbspec == DBSPEC_VALUE_ORG ) {
 				return 500
 			}
 			if ( dbspec == DBSPEC_PARAM3_ORG ) {
@@ -65219,11 +67194,11 @@
 			inv(INV_ITEM_ID, ci) = ITEM_ID_IKAROS_WING
 			inv(INV_ITEM_PIC, ci) = xy2pic(27, 15)
 			reftype = FILTER_JUNK
 			reftypeminor = FILTER_NOTHING
 			inv(INV_ITEM_NUM, ci) = 1
-			fixeditemenc = ENCHANT_FLOAT, 100, 0
+			fixeditemenc = 32, 100, 0
 			inv(INV_ITEM_IDENTIFY_LEVEL, ci) = 0
 			return
 		}
 		if ( dbmode == DBMODE_REF ) {
 			ichargelevel = 0
@@ -65231,14 +67206,14 @@
 			reftype = FILTER_JUNK
 			return
 		}
 		if ( dbmode == DBMODE_REF_SPEC ) {
 			if ( dbspec == DBSPEC_TYPE ) {
-				return FILTER_JUNK
+				return 64000
 			}
 			if ( dbspec == DBSPEC_TYPE_MINOR ) {
-				return FILTER_NONE
+				return 99999
 			}
 			if ( dbspec == DBSPEC_VALUE_ORG ) {
 				return 500
 			}
 			if ( dbspec == DBSPEC_PARAM3_ORG ) {
@@ -65292,14 +67267,14 @@
 			reftype = FILTER_JUNK
 			return
 		}
 		if ( dbmode == DBMODE_REF_SPEC ) {
 			if ( dbspec == DBSPEC_TYPE ) {
-				return FILTER_JUNK
+				return 64000
 			}
 			if ( dbspec == DBSPEC_TYPE_MINOR ) {
-				return FILTER_NONE
+				return 99999
 			}
 			if ( dbspec == DBSPEC_VALUE_ORG ) {
 				return 500
 			}
 			if ( dbspec == DBSPEC_PARAM3_ORG ) {
@@ -65353,14 +67328,14 @@
 			reftype = FILTER_JUNK
 			return
 		}
 		if ( dbmode == DBMODE_REF_SPEC ) {
 			if ( dbspec == DBSPEC_TYPE ) {
-				return FILTER_JUNK
+				return 64000
 			}
 			if ( dbspec == DBSPEC_TYPE_MINOR ) {
-				return FILTER_NONE
+				return 99999
 			}
 			if ( dbspec == DBSPEC_VALUE_ORG ) {
 				return 500
 			}
 			if ( dbspec == DBSPEC_PARAM3_ORG ) {
@@ -65414,14 +67389,14 @@
 			reftype = FILTER_JUNK
 			return
 		}
 		if ( dbmode == DBMODE_REF_SPEC ) {
 			if ( dbspec == DBSPEC_TYPE ) {
-				return FILTER_JUNK
+				return 64000
 			}
 			if ( dbspec == DBSPEC_TYPE_MINOR ) {
-				return FILTER_NONE
+				return 99999
 			}
 			if ( dbspec == DBSPEC_VALUE_ORG ) {
 				return 500
 			}
 			if ( dbspec == DBSPEC_PARAM3_ORG ) {
@@ -65475,14 +67450,14 @@
 			reftype = FILTER_JUNK
 			return
 		}
 		if ( dbmode == DBMODE_REF_SPEC ) {
 			if ( dbspec == DBSPEC_TYPE ) {
-				return FILTER_JUNK
+				return 64000
 			}
 			if ( dbspec == DBSPEC_TYPE_MINOR ) {
-				return FILTER_NONE
+				return 99999
 			}
 			if ( dbspec == DBSPEC_VALUE_ORG ) {
 				return 500
 			}
 			if ( dbspec == DBSPEC_PARAM3_ORG ) {
@@ -65536,14 +67511,14 @@
 			reftype = FILTER_JUNK
 			return
 		}
 		if ( dbmode == DBMODE_REF_SPEC ) {
 			if ( dbspec == DBSPEC_TYPE ) {
-				return FILTER_JUNK
+				return 64000
 			}
 			if ( dbspec == DBSPEC_TYPE_MINOR ) {
-				return FILTER_NONE
+				return 99999
 			}
 			if ( dbspec == DBSPEC_VALUE_ORG ) {
 				return 500
 			}
 			if ( dbspec == DBSPEC_PARAM3_ORG ) {
@@ -65597,14 +67572,14 @@
 			reftype = FILTER_JUNK
 			return
 		}
 		if ( dbmode == DBMODE_REF_SPEC ) {
 			if ( dbspec == DBSPEC_TYPE ) {
-				return FILTER_JUNK
+				return 64000
 			}
 			if ( dbspec == DBSPEC_TYPE_MINOR ) {
-				return FILTER_NONE
+				return 99999
 			}
 			if ( dbspec == DBSPEC_VALUE_ORG ) {
 				return 50000
 			}
 			if ( dbspec == DBSPEC_PARAM3_ORG ) {
@@ -65652,12 +67627,12 @@
 			inv(INV_ITEM_ID, ci) = ITEM_ID_BUSTER_BOOK
 			inv(INV_ITEM_PIC, ci) = xy2pic(10, 1)
 			reftype = FILTER_WEAPON
 			reftypeminor = FILTER_WEAPON_CLUB
 			inv(INV_ITEM_NUM, ci) = 1
-			fixeditemenc = ENCHANT_ELEMENTAL_DMG * EXT_ENCHANTMENT + SKILL_RES_MAGIC, 850, ENCHANT_ATTRIBUTE * EXT_ENCHANTMENT + SKILL_ATTR_LER, 34500, ENCHANT_ENHANCE_SPELL, 650, ENCHANT_BANE_GOD, 450, ENCHANT_RAGNAROK, 100, 0
-			ibitmod ITEM_BIT_PRECIOUS, ci, 1
+			fixeditemenc = ENCHANT_ELEMENTAL_DMG * EXT_ENCHANTMENT + SKILL_RES_MAGIC, 850, ENCHANT_ATTRIBUTE * EXT_ENCHANTMENT + SKILL_ATTR_LER, 34500, 34, 650, 61, 450, 37, 100, 0
+			ibitmod ITEM_BIT_PRECIOUS, ci, TRUE
 			inv(INV_ITEM_IDENTIFY_LEVEL, ci) = 500
 			fixlv = FIX_QUALITY_UNIQUE
 			return
 		}
 		if ( dbmode == DBMODE_REF ) {
@@ -65666,14 +67641,14 @@
 			reftype = FILTER_WEAPON
 			return
 		}
 		if ( dbmode == DBMODE_REF_SPEC ) {
 			if ( dbspec == DBSPEC_TYPE ) {
-				return FILTER_WEAPON
+				return 10000
 			}
 			if ( dbspec == DBSPEC_TYPE_MINOR ) {
-				return FILTER_WEAPON_CLUB
+				return 10004
 			}
 			if ( dbspec == DBSPEC_VALUE_ORG ) {
 				return 30000
 			}
 			if ( dbspec == DBSPEC_PARAM3_ORG ) {
@@ -65721,12 +67696,12 @@
 			inv(INV_ITEM_ID, ci) = ITEM_ID_STONE_COIN
 			inv(INV_ITEM_PIC, ci) = xy2pic(9, 1)
 			reftype = FILTER_RANGE
 			reftypeminor = FILTER_RANGE_ROCK_THROW
 			inv(INV_ITEM_NUM, ci) = 1
-			fixeditemenc = ENCHANT_PROC * EXT_ENCHANTMENT + ENCHANT_PROC_DRAW_SHADOW, 100, ENCHANT_PROC * EXT_ENCHANTMENT + ENCHANT_PROC_MIST_OF_SILENCE, 450, ENCHANT_CRIT_CHANCE, 750, ENCHANT_PROC * EXT_ENCHANTMENT + ENCHANT_PROC_CHAOS_BALL, 450, ENCHANT_ATTRIBUTE * EXT_ENCHANTMENT + SKILL_ATTR_CHA, 34500, ENCHANT_RAGNAROK, 100, 0
-			ibitmod ITEM_BIT_PRECIOUS, ci, 1
+			fixeditemenc = ENCHANT_PROC * EXT_ENCHANTMENT + ENCHANT_PROC_DRAW_SHADOW, 100, ENCHANT_PROC * EXT_ENCHANTMENT + ENCHANT_PROC_MIST_OF_SILENCE, 450, 44, 750, ENCHANT_PROC * EXT_ENCHANTMENT + ENCHANT_PROC_CHAOS_BALL, 450, ENCHANT_ATTRIBUTE * EXT_ENCHANTMENT + SKILL_ATTR_CHA, 34500, 37, 100, 0
+			ibitmod ITEM_BIT_PRECIOUS, ci, TRUE
 			inv(INV_ITEM_IDENTIFY_LEVEL, ci) = 500
 			fixlv = FIX_QUALITY_UNIQUE
 			return
 		}
 		if ( dbmode == DBMODE_REF ) {
@@ -65735,14 +67710,14 @@
 			reftype = FILTER_RANGE
 			return
 		}
 		if ( dbmode == DBMODE_REF_SPEC ) {
 			if ( dbspec == DBSPEC_TYPE ) {
-				return FILTER_RANGE
+				return 24000
 			}
 			if ( dbspec == DBSPEC_TYPE_MINOR ) {
-				return FILTER_RANGE_ROCK_THROW
+				return 24030
 			}
 			if ( dbspec == DBSPEC_VALUE_ORG ) {
 				return 35000
 			}
 			if ( dbspec == DBSPEC_PARAM3_ORG ) {
@@ -65787,11 +67762,11 @@
 			inv(INV_ITEM_PIC, ci) = xy2pic(7, 1)
 			reftype = FILTER_ACCESSORY_RING
 			reftypeminor = FILTER_ACCESSORY_SMALL_RING
 			inv(INV_ITEM_NUM, ci) = 1
 			fixeditemenc = ENCHANT_SKILL * EXT_ENCHANTMENT + SKILL_NORMAL_CASTING, -68700, ENCHANT_ATTRIBUTE * EXT_ENCHANTMENT + SKILL_ATTR_MAG, -68700, 0
-			ibitmod ITEM_BIT_PRECIOUS, ci, 1
+			ibitmod ITEM_BIT_PRECIOUS, ci, TRUE
 			inv(INV_ITEM_IDENTIFY_LEVEL, ci) = 500
 			fixlv = FIX_QUALITY_UNIQUE
 			return
 		}
 		if ( dbmode == DBMODE_REF ) {
@@ -65800,14 +67775,14 @@
 			reftype = FILTER_ACCESSORY_RING
 			return
 		}
 		if ( dbmode == DBMODE_REF_SPEC ) {
 			if ( dbspec == DBSPEC_TYPE ) {
-				return FILTER_ACCESSORY_RING
+				return 32000
 			}
 			if ( dbspec == DBSPEC_TYPE_MINOR ) {
-				return FILTER_ACCESSORY_SMALL_RING
+				return 32001
 			}
 			if ( dbspec == DBSPEC_VALUE_ORG ) {
 				return 50000
 			}
 			if ( dbspec == DBSPEC_PARAM3_ORG ) {
@@ -65852,11 +67827,11 @@
 			inv(INV_ITEM_PIC, ci) = xy2pic(8, 1)
 			reftype = FILTER_GLOVES
 			reftypeminor = FILTER_GLOVES_LIGHT
 			inv(INV_ITEM_NUM, ci) = 1
 			fixeditemenc = ENCHANT_SKILL * EXT_ENCHANTMENT + SKILL_NORMAL_NEGOTIATION, -68700, ENCHANT_SKILL * EXT_ENCHANTMENT + SKILL_NORMAL_STEALTH, -68700, 0
-			ibitmod ITEM_BIT_PRECIOUS, ci, 1
+			ibitmod ITEM_BIT_PRECIOUS, ci, TRUE
 			inv(INV_ITEM_IDENTIFY_LEVEL, ci) = 500
 			fixlv = FIX_QUALITY_UNIQUE
 			return
 		}
 		if ( dbmode == DBMODE_REF ) {
@@ -65865,14 +67840,14 @@
 			reftype = FILTER_GLOVES
 			return
 		}
 		if ( dbmode == DBMODE_REF_SPEC ) {
 			if ( dbspec == DBSPEC_TYPE ) {
-				return FILTER_GLOVES
+				return 22000
 			}
 			if ( dbspec == DBSPEC_TYPE_MINOR ) {
-				return FILTER_GLOVES_LIGHT
+				return 22003
 			}
 			if ( dbspec == DBSPEC_VALUE_ORG ) {
 				return 50000
 			}
 			if ( dbspec == DBSPEC_PARAM3_ORG ) {
@@ -65917,12 +67892,12 @@
 			inv(INV_ITEM_ID, ci) = ITEM_ID_BLUE_SPIRIT
 			inv(INV_ITEM_PIC, ci) = xy2pic(20, 13)
 			reftype = FILTER_GLOVES
 			reftypeminor = FILTER_GLOVES_HEAVY
 			inv(INV_ITEM_NUM, ci) = 1
-			fixeditemenc = ENCHANT_RESISTANCE * EXT_ENCHANTMENT + SKILL_RES_MAGIC, 550, ENCHANT_ATTRIBUTE * EXT_ENCHANTMENT + SKILL_ATTR_WIL, 400, ENCHANT_SKILL * EXT_ENCHANTMENT + SKILL_NORMAL_CASTING, 450, ENCHANT_RES_FEAR, 100, 0
-			ibitmod ITEM_BIT_PRECIOUS, ci, 1
+			fixeditemenc = ENCHANT_RESISTANCE * EXT_ENCHANTMENT + SKILL_RES_MAGIC, 550, ENCHANT_ATTRIBUTE * EXT_ENCHANTMENT + SKILL_ATTR_WIL, 400, ENCHANT_SKILL * EXT_ENCHANTMENT + SKILL_NORMAL_CASTING, 450, 26, 100, 0
+			ibitmod ITEM_BIT_PRECIOUS, ci, TRUE
 			inv(INV_ITEM_IDENTIFY_LEVEL, ci) = 500
 			fixlv = FIX_QUALITY_UNIQUE
 			return
 		}
 		if ( dbmode == DBMODE_REF ) {
@@ -65931,14 +67906,14 @@
 			reftype = FILTER_GLOVES
 			return
 		}
 		if ( dbmode == DBMODE_REF_SPEC ) {
 			if ( dbspec == DBSPEC_TYPE ) {
-				return FILTER_GLOVES
+				return 22000
 			}
 			if ( dbspec == DBSPEC_TYPE_MINOR ) {
-				return FILTER_GLOVES_HEAVY
+				return 22001
 			}
 			if ( dbspec == DBSPEC_VALUE_ORG ) {
 				return 40000
 			}
 			if ( dbspec == DBSPEC_PARAM3_ORG ) {
@@ -65986,12 +67961,12 @@
 			inv(INV_ITEM_ID, ci) = ITEM_ID_BLACK_MONKSHOOD
 			inv(INV_ITEM_PIC, ci) = xy2pic(3, 13)
 			reftype = FILTER_WEAPON
 			reftypeminor = FILTER_WEAPON_SHORTSWORD
 			inv(INV_ITEM_NUM, ci) = 1
-			fixeditemenc = ENCHANT_ELEMENTAL_DMG * EXT_ENCHANTMENT + SKILL_RES_POISON, 1000, ENCHANT_ELEMENTAL_DMG * EXT_ENCHANTMENT + SKILL_RES_NERVE, 320, ENCHANT_RESISTANCE * EXT_ENCHANTMENT + SKILL_RES_SOUND, 400, ENCHANT_ATTRIBUTE * EXT_ENCHANTMENT + SKILL_ATTR_DEX, 400, ENCHANT_RES_POISON, 100, 0
-			ibitmod ITEM_BIT_PRECIOUS, ci, 1
+			fixeditemenc = ENCHANT_ELEMENTAL_DMG * EXT_ENCHANTMENT + SKILL_RES_POISON, 1000, ENCHANT_ELEMENTAL_DMG * EXT_ENCHANTMENT + SKILL_RES_NERVE, 320, ENCHANT_RESISTANCE * EXT_ENCHANTMENT + SKILL_RES_SOUND, 400, ENCHANT_ATTRIBUTE * EXT_ENCHANTMENT + SKILL_ATTR_DEX, 400, 28, 100, 0
+			ibitmod ITEM_BIT_PRECIOUS, ci, TRUE
 			inv(INV_ITEM_IDENTIFY_LEVEL, ci) = 500
 			fixlv = FIX_QUALITY_UNIQUE
 			return
 		}
 		if ( dbmode == DBMODE_REF ) {
@@ -66000,14 +67975,14 @@
 			reftype = FILTER_WEAPON
 			return
 		}
 		if ( dbmode == DBMODE_REF_SPEC ) {
 			if ( dbspec == DBSPEC_TYPE ) {
-				return FILTER_WEAPON
+				return 10000
 			}
 			if ( dbspec == DBSPEC_TYPE_MINOR ) {
-				return FILTER_WEAPON_SHORTSWORD
+				return 10003
 			}
 			if ( dbspec == DBSPEC_VALUE_ORG ) {
 				return 45000
 			}
 			if ( dbspec == DBSPEC_PARAM3_ORG ) {
@@ -66049,11 +68024,11 @@
 			inv(INV_ITEM_ID, ci) = ITEM_ID_CARAMEL_OF_TERMINATION
 			inv(INV_ITEM_PIC, ci) = xy2pic(19, 21)
 			reftype = FILTER_ITEM_FOOD
 			reftypeminor = FILTER_NOTHING
 			inv(INV_ITEM_NUM, ci) = 1
-			fixeditemenc = ENCHANT_RAGNAROK, 100, 0
+			fixeditemenc = 37, 100, 0
 			inv(INV_ITEM_PARAM2, ci) = 2
 			inv(INV_ITEM_IDENTIFY_LEVEL, ci) = 0
 			return
 		}
 		if ( dbmode == DBMODE_REF ) {
@@ -66062,14 +68037,14 @@
 			reftype = FILTER_ITEM_FOOD
 			return
 		}
 		if ( dbmode == DBMODE_REF_SPEC ) {
 			if ( dbspec == DBSPEC_TYPE ) {
-				return FILTER_ITEM_FOOD
+				return 57000
 			}
 			if ( dbspec == DBSPEC_TYPE_MINOR ) {
-				return FILTER_NONE
+				return 99999
 			}
 			if ( dbspec == DBSPEC_VALUE_ORG ) {
 				return 15000
 			}
 			if ( dbspec == DBSPEC_PARAM3_ORG ) {
@@ -66117,12 +68092,12 @@
 			inv(INV_ITEM_ID, ci) = ITEM_ID_SASUMATA
 			inv(INV_ITEM_PIC, ci) = xy2pic(5, 1)
 			reftype = FILTER_WEAPON
 			reftypeminor = FILTER_WEAPON_POLEARM
 			inv(INV_ITEM_NUM, ci) = 1
-			fixeditemenc = ENCHANT_TIME_STOP, 500, 0
-			ibitmod ITEM_BIT_PRECIOUS, ci, 1
+			fixeditemenc = 40, 500, 0
+			ibitmod ITEM_BIT_PRECIOUS, ci, TRUE
 			inv(INV_ITEM_IDENTIFY_LEVEL, ci) = 500
 			fixlv = FIX_QUALITY_UNIQUE
 			return
 		}
 		if ( dbmode == DBMODE_REF ) {
@@ -66131,14 +68106,14 @@
 			reftype = FILTER_WEAPON
 			return
 		}
 		if ( dbmode == DBMODE_REF_SPEC ) {
 			if ( dbspec == DBSPEC_TYPE ) {
-				return FILTER_WEAPON
+				return 10000
 			}
 			if ( dbspec == DBSPEC_TYPE_MINOR ) {
-				return FILTER_WEAPON_POLEARM
+				return 10007
 			}
 			if ( dbspec == DBSPEC_VALUE_ORG ) {
 				return 50000
 			}
 			if ( dbspec == DBSPEC_PARAM3_ORG ) {
@@ -66183,11 +68158,11 @@
 			inv(INV_ITEM_PIC, ci) = xy2pic(6, 1)
 			reftype = FILTER_ARMOR
 			reftypeminor = FILTER_ARMOR_HEAVY
 			inv(INV_ITEM_NUM, ci) = 1
 			fixeditemenc = ENCHANT_SKILL * EXT_ENCHANTMENT + SKILL_NORMAL_TACTICS, -68700, ENCHANT_SKILL * EXT_ENCHANTMENT + SKILL_NORMAL_MARKSMAN, -68700, 0
-			ibitmod ITEM_BIT_PRECIOUS, ci, 1
+			ibitmod ITEM_BIT_PRECIOUS, ci, TRUE
 			inv(INV_ITEM_IDENTIFY_LEVEL, ci) = 0
 			fixlv = FIX_QUALITY_UNIQUE
 			return
 		}
 		if ( dbmode == DBMODE_REF ) {
@@ -66196,14 +68171,14 @@
 			reftype = FILTER_ARMOR
 			return
 		}
 		if ( dbmode == DBMODE_REF_SPEC ) {
 			if ( dbspec == DBSPEC_TYPE ) {
-				return FILTER_ARMOR
+				return 16000
 			}
 			if ( dbspec == DBSPEC_TYPE_MINOR ) {
-				return FILTER_ARMOR_HEAVY
+				return 16001
 			}
 			if ( dbspec == DBSPEC_VALUE_ORG ) {
 				return 50000
 			}
 			if ( dbspec == DBSPEC_PARAM3_ORG ) {
@@ -66248,11 +68223,11 @@
 			inv(INV_ITEM_PIC, ci) = xy2pic(1, 1)
 			reftype = FILTER_GIRDLE
 			reftypeminor = FILTER_GIRDLE_MEDIUM
 			inv(INV_ITEM_NUM, ci) = 1
 			fixeditemenc = ENCHANT_SKILL * EXT_ENCHANTMENT + SKILL_NORMAL_HEALING, -68700, ENCHANT_SKILL * EXT_ENCHANTMENT + SKILL_NORMAL_MEDITATION, -68700, 0
-			ibitmod ITEM_BIT_PRECIOUS, ci, 1
+			ibitmod ITEM_BIT_PRECIOUS, ci, TRUE
 			inv(INV_ITEM_IDENTIFY_LEVEL, ci) = 0
 			fixlv = FIX_QUALITY_UNIQUE
 			return
 		}
 		if ( dbmode == DBMODE_REF ) {
@@ -66261,14 +68236,14 @@
 			reftype = FILTER_GIRDLE
 			return
 		}
 		if ( dbmode == DBMODE_REF_SPEC ) {
 			if ( dbspec == DBSPEC_TYPE ) {
-				return FILTER_GIRDLE
+				return 19000
 			}
 			if ( dbspec == DBSPEC_TYPE_MINOR ) {
-				return FILTER_GIRDLE_MEDIUM
+				return 19001
 			}
 			if ( dbspec == DBSPEC_VALUE_ORG ) {
 				return 50000
 			}
 			if ( dbspec == DBSPEC_PARAM3_ORG ) {
@@ -66313,11 +68288,11 @@
 			inv(INV_ITEM_PIC, ci) = xy2pic(2, 1)
 			reftype = FILTER_BOOTS
 			reftypeminor = FILTER_BOOTS_LIGHT
 			inv(INV_ITEM_NUM, ci) = 1
 			fixeditemenc = ENCHANT_ATTRIBUTE * EXT_ENCHANTMENT + SKILL_ATTR_SPD, -68700, ENCHANT_SKILL * EXT_ENCHANTMENT + SKILL_NORMAL_TRAVELING, -68700, 0
-			ibitmod ITEM_BIT_PRECIOUS, ci, 1
+			ibitmod ITEM_BIT_PRECIOUS, ci, TRUE
 			inv(INV_ITEM_IDENTIFY_LEVEL, ci) = 0
 			fixlv = FIX_QUALITY_UNIQUE
 			return
 		}
 		if ( dbmode == DBMODE_REF ) {
@@ -66326,14 +68301,14 @@
 			reftype = FILTER_BOOTS
 			return
 		}
 		if ( dbmode == DBMODE_REF_SPEC ) {
 			if ( dbspec == DBSPEC_TYPE ) {
-				return FILTER_BOOTS
+				return 18000
 			}
 			if ( dbspec == DBSPEC_TYPE_MINOR ) {
-				return FILTER_BOOTS_LIGHT
+				return 18002
 			}
 			if ( dbspec == DBSPEC_VALUE_ORG ) {
 				return 50000
 			}
 			if ( dbspec == DBSPEC_PARAM3_ORG ) {
@@ -66378,11 +68353,11 @@
 			inv(INV_ITEM_PIC, ci) = xy2pic(3, 1)
 			reftype = FILTER_HELM
 			reftypeminor = FILTER_HELM_LIGHT
 			inv(INV_ITEM_NUM, ci) = 1
 			fixeditemenc = ENCHANT_ATTRIBUTE * EXT_ENCHANTMENT + SKILL_ATTR_LUC, -68700, ENCHANT_SKILL * EXT_ENCHANTMENT + SKILL_NORMAL_CONTROL_MAGIC, -68700, 0
-			ibitmod ITEM_BIT_PRECIOUS, ci, 1
+			ibitmod ITEM_BIT_PRECIOUS, ci, TRUE
 			inv(INV_ITEM_IDENTIFY_LEVEL, ci) = 0
 			fixlv = FIX_QUALITY_UNIQUE
 			return
 		}
 		if ( dbmode == DBMODE_REF ) {
@@ -66391,14 +68366,14 @@
 			reftype = FILTER_HELM
 			return
 		}
 		if ( dbmode == DBMODE_REF_SPEC ) {
 			if ( dbspec == DBSPEC_TYPE ) {
-				return FILTER_HELM
+				return 12000
 			}
 			if ( dbspec == DBSPEC_TYPE_MINOR ) {
-				return FILTER_HELM_LIGHT
+				return 12002
 			}
 			if ( dbspec == DBSPEC_VALUE_ORG ) {
 				return 50000
 			}
 			if ( dbspec == DBSPEC_PARAM3_ORG ) {
@@ -66443,11 +68418,11 @@
 			inv(INV_ITEM_PIC, ci) = xy2pic(4, 1)
 			reftype = FILTER_ACCESSORY_AMULET
 			reftypeminor = FILTER_ACCESSORY_SMALL_AMULET
 			inv(INV_ITEM_NUM, ci) = 1
 			fixeditemenc = ENCHANT_SKILL * EXT_ENCHANTMENT + SKILL_NORMAL_EVASION, -68700, ENCHANT_SKILL * EXT_ENCHANTMENT + SKILL_NORMAL_GREATER_EVASION, -68700, 0
-			ibitmod ITEM_BIT_PRECIOUS, ci, 1
+			ibitmod ITEM_BIT_PRECIOUS, ci, TRUE
 			inv(INV_ITEM_IDENTIFY_LEVEL, ci) = 0
 			fixlv = FIX_QUALITY_UNIQUE
 			return
 		}
 		if ( dbmode == DBMODE_REF ) {
@@ -66456,14 +68431,14 @@
 			reftype = FILTER_ACCESSORY_AMULET
 			return
 		}
 		if ( dbmode == DBMODE_REF_SPEC ) {
 			if ( dbspec == DBSPEC_TYPE ) {
-				return FILTER_ACCESSORY_AMULET
+				return 34000
 			}
 			if ( dbspec == DBSPEC_TYPE_MINOR ) {
-				return FILTER_ACCESSORY_SMALL_AMULET
+				return 34001
 			}
 			if ( dbspec == DBSPEC_VALUE_ORG ) {
 				return 50000
 			}
 			if ( dbspec == DBSPEC_PARAM3_ORG ) {
@@ -66507,12 +68482,12 @@
 			reftype = FILTER_ITEM_TOOL
 			reftypeminor = FILTER_NOTHING
 			inv(INV_ITEM_NUM, ci) = 1
 			fixeditemenc = 0
 			inv(INV_ITEM_EFFECT, ci) = EFFECT_SATELLITE_SHOOTER
-			ibitmod ITEM_BIT_PRECIOUS, ci, 1
-			ibitmod ITEM_BIT_PERIOD, ci, 1
+			ibitmod ITEM_BIT_PRECIOUS, ci, TRUE
+			ibitmod ITEM_BIT_PERIOD, ci, TRUE
 			inv(INV_ITEM_PARAM3, ci) = 280
 			inv(INV_ITEM_IDENTIFY_LEVEL, ci) = 0
 			fixlv = FIX_QUALITY_UNIQUE
 			return
 		}
@@ -66522,14 +68497,14 @@
 			reftype = FILTER_ITEM_TOOL
 			return
 		}
 		if ( dbmode == DBMODE_REF_SPEC ) {
 			if ( dbspec == DBSPEC_TYPE ) {
-				return FILTER_ITEM_TOOL
+				return 59000
 			}
 			if ( dbspec == DBSPEC_TYPE_MINOR ) {
-				return FILTER_NONE
+				return 99999
 			}
 			if ( dbspec == DBSPEC_VALUE_ORG ) {
 				return 50000
 			}
 			if ( dbspec == DBSPEC_PARAM3_ORG ) {
@@ -66588,14 +68563,14 @@
 			reftype = FILTER_RANGE
 			return
 		}
 		if ( dbmode == DBMODE_REF_SPEC ) {
 			if ( dbspec == DBSPEC_TYPE ) {
-				return FILTER_RANGE
+				return 24000
 			}
 			if ( dbspec == DBSPEC_TYPE_MINOR ) {
-				return FILTER_RANGE_PISTOL
+				return 24020
 			}
 			if ( dbspec == DBSPEC_VALUE_ORG ) {
 				return 1200
 			}
 			if ( dbspec == DBSPEC_PARAM3_ORG ) {
@@ -66650,12 +68625,12 @@
 			inv(INV_ITEM_ID, ci) = ITEM_ID_VALKOINEN_KUOLEMA
 			inv(INV_ITEM_PIC, ci) = xy2pic(18, 21)
 			reftype = FILTER_RANGE
 			reftypeminor = FILTER_RANGE_PISTOL
 			inv(INV_ITEM_NUM, ci) = 1
-			fixeditemenc = ENCHANT_PROC * EXT_ENCHANTMENT + ENCHANT_PROC_DECAPITATION, 60, ENCHANT_ELEMENTAL_DMG * EXT_ENCHANTMENT + SKILL_RES_COLD, 500, ENCHANT_RESISTANCE * EXT_ENCHANTMENT + SKILL_RES_COLD, 600, ENCHANT_ATTRIBUTE * EXT_ENCHANTMENT + SKILL_ATTR_PER, 1500, ENCHANT_SEE_INVISIBLE, 100, 0
-			ibitmod ITEM_BIT_PRECIOUS, ci, 1
+			fixeditemenc = ENCHANT_PROC * EXT_ENCHANTMENT + ENCHANT_PROC_DECAPITATION, 60, ENCHANT_ELEMENTAL_DMG * EXT_ENCHANTMENT + SKILL_RES_COLD, 500, ENCHANT_RESISTANCE * EXT_ENCHANTMENT + SKILL_RES_COLD, 600, ENCHANT_ATTRIBUTE * EXT_ENCHANTMENT + SKILL_ATTR_PER, 1500, 35, 100, 0
+			ibitmod ITEM_BIT_PRECIOUS, ci, TRUE
 			inv(INV_ITEM_IDENTIFY_LEVEL, ci) = 500
 			fixlv = FIX_QUALITY_UNIQUE
 			return
 		}
 		if ( dbmode == DBMODE_REF ) {
@@ -66664,14 +68639,14 @@
 			reftype = FILTER_RANGE
 			return
 		}
 		if ( dbmode == DBMODE_REF_SPEC ) {
 			if ( dbspec == DBSPEC_TYPE ) {
-				return FILTER_RANGE
+				return 24000
 			}
 			if ( dbspec == DBSPEC_TYPE_MINOR ) {
-				return FILTER_RANGE_PISTOL
+				return 24020
 			}
 			if ( dbspec == DBSPEC_VALUE_ORG ) {
 				return 60000
 			}
 			if ( dbspec == DBSPEC_PARAM3_ORG ) {
@@ -66725,14 +68700,14 @@
 			reftype = FILTER_FURNITURE
 			return
 		}
 		if ( dbmode == DBMODE_REF_SPEC ) {
 			if ( dbspec == DBSPEC_TYPE ) {
-				return FILTER_FURNITURE
+				return 60000
 			}
 			if ( dbspec == DBSPEC_TYPE_MINOR ) {
-				return FILTER_NONE
+				return 99999
 			}
 			if ( dbspec == DBSPEC_VALUE_ORG ) {
 				return 200
 			}
 			if ( dbspec == DBSPEC_PARAM3_ORG ) {
@@ -66777,12 +68752,12 @@
 			inv(INV_ITEM_ID, ci) = ITEM_ID_METAL_WING_OF_VESDA
 			inv(INV_ITEM_PIC, ci) = xy2pic(27, 15)
 			reftype = FILTER_CLOAK
 			reftypeminor = FILTER_CLOAK_MEDIUM
 			inv(INV_ITEM_NUM, ci) = 1
-			fixeditemenc = ENCHANT_FLOAT, 100, ENCHANT_RESISTANCE * EXT_ENCHANTMENT + SKILL_RES_FIRE, 550, ENCHANT_SHOOTING_MECHANISM, 200, ENCHANT_ATTRIBUTE * EXT_ENCHANTMENT + SKILL_ATTR_SPD, 700, 0
-			ibitmod ITEM_BIT_PRECIOUS, ci, 1
+			fixeditemenc = 32, 100, ENCHANT_RESISTANCE * EXT_ENCHANTMENT + SKILL_RES_FIRE, 550, 65, 200, ENCHANT_ATTRIBUTE * EXT_ENCHANTMENT + SKILL_ATTR_SPD, 700, 0
+			ibitmod ITEM_BIT_PRECIOUS, ci, TRUE
 			inv(INV_ITEM_IDENTIFY_LEVEL, ci) = 500
 			fixlv = FIX_QUALITY_UNIQUE
 			return
 		}
 		if ( dbmode == DBMODE_REF ) {
@@ -66791,14 +68766,14 @@
 			reftype = FILTER_CLOAK
 			return
 		}
 		if ( dbmode == DBMODE_REF_SPEC ) {
 			if ( dbspec == DBSPEC_TYPE ) {
-				return FILTER_CLOAK
+				return 20000
 			}
 			if ( dbspec == DBSPEC_TYPE_MINOR ) {
-				return FILTER_CLOAK_MEDIUM
+				return 20001
 			}
 			if ( dbspec == DBSPEC_VALUE_ORG ) {
 				return 25000
 			}
 			if ( dbspec == DBSPEC_PARAM3_ORG ) {
@@ -66845,12 +68820,12 @@
 			inv(INV_ITEM_ID, ci) = ITEM_ID_SOLAR_CANE
 			inv(INV_ITEM_PIC, ci) = xy2pic(11, 20)
 			reftype = FILTER_WEAPON
 			reftypeminor = FILTER_WEAPON_STAVE
 			inv(INV_ITEM_NUM, ci) = 1
-			fixeditemenc = ENCHANT_PROC * EXT_ENCHANTMENT + ENCHANT_PROC_HERO, 550, ENCHANT_SEE_INVISIBLE, 100, ENCHANT_RESISTANCE * EXT_ENCHANTMENT + SKILL_RES_MAGIC, 250, ENCHANT_RESISTANCE * EXT_ENCHANTMENT + SKILL_RES_DARKNESS, 400, ENCHANT_RES_POISON, 100, 0
-			ibitmod ITEM_BIT_PRECIOUS, ci, 1
+			fixeditemenc = ENCHANT_PROC * EXT_ENCHANTMENT + ENCHANT_PROC_HERO, 550, 35, 100, ENCHANT_RESISTANCE * EXT_ENCHANTMENT + SKILL_RES_MAGIC, 250, ENCHANT_RESISTANCE * EXT_ENCHANTMENT + SKILL_RES_DARKNESS, 400, 84, 100, 28, 100, 0
+			ibitmod ITEM_BIT_PRECIOUS, ci, TRUE
 			inv(INV_ITEM_IDENTIFY_LEVEL, ci) = 500
 			fixlv = FIX_QUALITY_UNIQUE
 			return
 		}
 		if ( dbmode == DBMODE_REF ) {
@@ -66859,14 +68834,14 @@
 			reftype = FILTER_WEAPON
 			return
 		}
 		if ( dbmode == DBMODE_REF_SPEC ) {
 			if ( dbspec == DBSPEC_TYPE ) {
-				return FILTER_WEAPON
+				return 10000
 			}
 			if ( dbspec == DBSPEC_TYPE_MINOR ) {
-				return FILTER_WEAPON_STAVE
+				return 10006
 			}
 			if ( dbspec == DBSPEC_VALUE_ORG ) {
 				return 35000
 			}
 			if ( dbspec == DBSPEC_PARAM3_ORG ) {
@@ -66921,14 +68896,14 @@
 			reftype = FILTER_ITEM_FOOD
 			return
 		}
 		if ( dbmode == DBMODE_REF_SPEC ) {
 			if ( dbspec == DBSPEC_TYPE ) {
-				return FILTER_ITEM_FOOD
+				return 57000
 			}
 			if ( dbspec == DBSPEC_TYPE_MINOR ) {
-				return FILTER_NONE
+				return 99999
 			}
 			if ( dbspec == DBSPEC_VALUE_ORG ) {
 				return 110
 			}
 			if ( dbspec == DBSPEC_PARAM3_ORG ) {
@@ -66971,11 +68946,11 @@
 			inv(INV_ITEM_PIC, ci) = xy2pic(0, 13)
 			reftype = FILTER_ITEM_BOOK
 			reftypeminor = FILTER_NOTHING
 			inv(INV_ITEM_NUM, ci) = 1
 			fixeditemenc = 0
-			ibitmod ITEM_BIT_PRECIOUS, ci, 1
+			ibitmod ITEM_BIT_PRECIOUS, ci, TRUE
 			inv(INV_ITEM_IDENTIFY_LEVEL, ci) = 0
 			return
 		}
 		if ( dbmode == DBMODE_REF ) {
 			ichargelevel = 0
@@ -66983,14 +68958,14 @@
 			reftype = FILTER_ITEM_BOOK
 			return
 		}
 		if ( dbmode == DBMODE_REF_SPEC ) {
 			if ( dbspec == DBSPEC_TYPE ) {
-				return FILTER_ITEM_BOOK
+				return 55000
 			}
 			if ( dbspec == DBSPEC_TYPE_MINOR ) {
-				return FILTER_NONE
+				return 99999
 			}
 			if ( dbspec == DBSPEC_VALUE_ORG ) {
 				return 15000
 			}
 			if ( dbspec == DBSPEC_PARAM3_ORG ) {
@@ -67049,12 +69024,12 @@
 			inv(INV_ITEM_ID, ci) = ITEM_ID_STORM_BRINGER
 			inv(INV_ITEM_PIC, ci) = xy2pic(13, 34)
 			reftype = FILTER_WEAPON
 			reftypeminor = FILTER_WEAPON_LONGSWORD
 			inv(INV_ITEM_NUM, ci) = 1
-			fixeditemenc = ENCHANT_ABSORB_MP, 300, ENCHANT_ELEMENTAL_DMG * EXT_ENCHANTMENT + SKILL_RES_CHAOS, 400, ENCHANT_ELEMENTAL_DMG * EXT_ENCHANTMENT + SKILL_RES_NETHER, 150, ENCHANT_SKILL * EXT_ENCHANTMENT + SKILL_NORMAL_DUAL_WIELD, 300, ENCHANT_RESISTANCE * EXT_ENCHANTMENT + SKILL_RES_MAGIC, 250, ENCHANT_RESISTANCE * EXT_ENCHANTMENT + SKILL_RES_MIND, 250, 0
-			ibitmod ITEM_BIT_PRECIOUS, ci, 1
+			fixeditemenc = 38, 300, ENCHANT_ELEMENTAL_DMG * EXT_ENCHANTMENT + SKILL_RES_CHAOS, 400, ENCHANT_ELEMENTAL_DMG * EXT_ENCHANTMENT + SKILL_RES_NETHER, 150, ENCHANT_SKILL * EXT_ENCHANTMENT + SKILL_NORMAL_DUAL_WIELD, 300, ENCHANT_RESISTANCE * EXT_ENCHANTMENT + SKILL_RES_MAGIC, 250, ENCHANT_RESISTANCE * EXT_ENCHANTMENT + SKILL_RES_MIND, 250, 0
+			ibitmod ITEM_BIT_PRECIOUS, ci, TRUE
 			inv(INV_ITEM_IDENTIFY_LEVEL, ci) = 500
 			fixlv = FIX_QUALITY_UNIQUE
 			return
 		}
 		if ( dbmode == DBMODE_REF ) {
@@ -67063,14 +69038,14 @@
 			reftype = FILTER_WEAPON
 			return
 		}
 		if ( dbmode == DBMODE_REF_SPEC ) {
 			if ( dbspec == DBSPEC_TYPE ) {
-				return FILTER_WEAPON
+				return 10000
 			}
 			if ( dbspec == DBSPEC_TYPE_MINOR ) {
-				return FILTER_WEAPON_LONGSWORD
+				return 10002
 			}
 			if ( dbspec == DBSPEC_VALUE_ORG ) {
 				return 60000
 			}
 			if ( dbspec == DBSPEC_PARAM3_ORG ) {
@@ -67113,11 +69088,11 @@
 			inv(INV_ITEM_PIC, ci) = xy2pic(0, 13)
 			reftype = FILTER_ITEM_BOOK
 			reftypeminor = FILTER_NOTHING
 			inv(INV_ITEM_NUM, ci) = 1
 			fixeditemenc = 0
-			ibitmod ITEM_BIT_PRECIOUS, ci, 1
+			ibitmod ITEM_BIT_PRECIOUS, ci, TRUE
 			inv(INV_ITEM_IDENTIFY_LEVEL, ci) = 0
 			return
 		}
 		if ( dbmode == DBMODE_REF ) {
 			ichargelevel = 0
@@ -67125,14 +69100,14 @@
 			reftype = FILTER_ITEM_BOOK
 			return
 		}
 		if ( dbmode == DBMODE_REF_SPEC ) {
 			if ( dbspec == DBSPEC_TYPE ) {
-				return FILTER_ITEM_BOOK
+				return 55000
 			}
 			if ( dbspec == DBSPEC_TYPE_MINOR ) {
-				return FILTER_NONE
+				return 99999
 			}
 			if ( dbspec == DBSPEC_VALUE_ORG ) {
 				return 10000
 			}
 			if ( dbspec == DBSPEC_PARAM3_ORG ) {
@@ -67189,12 +69164,12 @@
 			inv(INV_ITEM_ID, ci) = ITEM_ID_KINDNESS_BLADE
 			inv(INV_ITEM_PIC, ci) = xy2pic(5, 21)
 			reftype = FILTER_WEAPON
 			reftypeminor = FILTER_WEAPON_LONGSWORD
 			inv(INV_ITEM_NUM, ci) = 1
-			fixeditemenc = ENCHANT_PROC * EXT_ENCHANTMENT + ENCHANT_PROC_HEALING_RAIN, 350, ENCHANT_PROC * EXT_ENCHANTMENT + ENCHANT_PROC_HOLY_VEIL, 450, ENCHANT_ATTRIBUTE * EXT_ENCHANTMENT + SKILL_ATTR_WIL, 34500, ENCHANT_ELEMENTAL_DMG * EXT_ENCHANTMENT + SKILL_RES_NERVE, 850, ENCHANT_RAGNAROK, 100, 0
-			ibitmod ITEM_BIT_PRECIOUS, ci, 1
+			fixeditemenc = ENCHANT_PROC * EXT_ENCHANTMENT + ENCHANT_PROC_HEALING_RAIN, 350, ENCHANT_PROC * EXT_ENCHANTMENT + ENCHANT_PROC_HOLY_VEIL, 450, ENCHANT_ATTRIBUTE * EXT_ENCHANTMENT + SKILL_ATTR_WIL, 34500, ENCHANT_ELEMENTAL_DMG * EXT_ENCHANTMENT + SKILL_RES_NERVE, 850, 37, 100, 0
+			ibitmod ITEM_BIT_PRECIOUS, ci, TRUE
 			inv(INV_ITEM_IDENTIFY_LEVEL, ci) = 500
 			fixlv = FIX_QUALITY_UNIQUE
 			return
 		}
 		if ( dbmode == DBMODE_REF ) {
@@ -67203,14 +69178,14 @@
 			reftype = FILTER_WEAPON
 			return
 		}
 		if ( dbmode == DBMODE_REF_SPEC ) {
 			if ( dbspec == DBSPEC_TYPE ) {
-				return FILTER_WEAPON
+				return 10000
 			}
 			if ( dbspec == DBSPEC_TYPE_MINOR ) {
-				return FILTER_WEAPON_LONGSWORD
+				return 10002
 			}
 			if ( dbspec == DBSPEC_VALUE_ORG ) {
 				return 30000
 			}
 			if ( dbspec == DBSPEC_PARAM3_ORG ) {
@@ -67258,12 +69233,12 @@
 			inv(INV_ITEM_ID, ci) = ITEM_ID_DREADNOUGHT
 			inv(INV_ITEM_PIC, ci) = xy2pic(3, 15)
 			reftype = FILTER_RANGE
 			reftypeminor = FILTER_RANGE_CROSSBOW
 			inv(INV_ITEM_NUM, ci) = 1
-			fixeditemenc = ENCHANT_PROC * EXT_ENCHANTMENT + ENCHANT_PROC_SPEED, 400, ENCHANT_PROC * EXT_ENCHANTMENT + ENCHANT_PROC_LULWYS_TRICK, 400, ENCHANT_ELEMENTAL_DMG * EXT_ENCHANTMENT + SKILL_RES_LIGHTNING, 850, ENCHANT_ATTRIBUTE * EXT_ENCHANTMENT + SKILL_ATTR_DEX, 34500, ENCHANT_RAGNAROK, 100, 0
-			ibitmod ITEM_BIT_PRECIOUS, ci, 1
+			fixeditemenc = ENCHANT_PROC * EXT_ENCHANTMENT + ENCHANT_PROC_SPEED, 400, ENCHANT_PROC * EXT_ENCHANTMENT + ENCHANT_PROC_LULWYS_TRICK, 400, ENCHANT_ELEMENTAL_DMG * EXT_ENCHANTMENT + SKILL_RES_LIGHTNING, 850, ENCHANT_ATTRIBUTE * EXT_ENCHANTMENT + SKILL_ATTR_DEX, 34500, 37, 100, 0
+			ibitmod ITEM_BIT_PRECIOUS, ci, TRUE
 			inv(INV_ITEM_IDENTIFY_LEVEL, ci) = 500
 			fixlv = FIX_QUALITY_UNIQUE
 			return
 		}
 		if ( dbmode == DBMODE_REF ) {
@@ -67272,14 +69247,14 @@
 			reftype = FILTER_RANGE
 			return
 		}
 		if ( dbmode == DBMODE_REF_SPEC ) {
 			if ( dbspec == DBSPEC_TYPE ) {
-				return FILTER_RANGE
+				return 24000
 			}
 			if ( dbspec == DBSPEC_TYPE_MINOR ) {
-				return FILTER_RANGE_CROSSBOW
+				return 24003
 			}
 			if ( dbspec == DBSPEC_VALUE_ORG ) {
 				return 30000
 			}
 			if ( dbspec == DBSPEC_PARAM3_ORG ) {
@@ -67327,12 +69302,12 @@
 			inv(INV_ITEM_ID, ci) = ITEM_ID_G3_EXA
 			inv(INV_ITEM_PIC, ci) = xy2pic(21, 12)
 			reftype = FILTER_RANGE
 			reftypeminor = FILTER_RANGE_PISTOL
 			inv(INV_ITEM_NUM, ci) = 1
-			fixeditemenc = ENCHANT_PROC * EXT_ENCHANTMENT + ENCHANT_PROC_GRENADE, 200, ENCHANT_PROC * EXT_ENCHANTMENT + ENCHANT_PROC_GRAVITY_SPHERE, 200, ENCHANT_ATTRIBUTE * EXT_ENCHANTMENT + SKILL_ATTR_PER, 34500, ENCHANT_RAGNAROK, 100, ENCHANT_TIME_STOP, 400, 0
-			ibitmod ITEM_BIT_PRECIOUS, ci, 1
+			fixeditemenc = ENCHANT_PROC * EXT_ENCHANTMENT + ENCHANT_PROC_GRENADE, 200, ENCHANT_PROC * EXT_ENCHANTMENT + ENCHANT_PROC_GRAVITY_SPHERE, 200, ENCHANT_ATTRIBUTE * EXT_ENCHANTMENT + SKILL_ATTR_PER, 34500, 37, 100, 40, 400, 0
+			ibitmod ITEM_BIT_PRECIOUS, ci, TRUE
 			inv(INV_ITEM_IDENTIFY_LEVEL, ci) = 500
 			fixlv = FIX_QUALITY_UNIQUE
 			return
 		}
 		if ( dbmode == DBMODE_REF ) {
@@ -67341,14 +69316,14 @@
 			reftype = FILTER_RANGE
 			return
 		}
 		if ( dbmode == DBMODE_REF_SPEC ) {
 			if ( dbspec == DBSPEC_TYPE ) {
-				return FILTER_RANGE
+				return 24000
 			}
 			if ( dbspec == DBSPEC_TYPE_MINOR ) {
-				return FILTER_RANGE_PISTOL
+				return 24020
 			}
 			if ( dbspec == DBSPEC_VALUE_ORG ) {
 				return 30000
 			}
 			if ( dbspec == DBSPEC_PARAM3_ORG ) {
@@ -67396,12 +69371,12 @@
 			inv(INV_ITEM_ID, ci) = ITEM_ID_GOD_BREAKER
 			inv(INV_ITEM_PIC, ci) = xy2pic(5, 15)
 			reftype = FILTER_WEAPON
 			reftypeminor = FILTER_WEAPON_LARGE_AXE
 			inv(INV_ITEM_NUM, ci) = 1
-			fixeditemenc = ENCHANT_CRIT_CHANCE, 750, ENCHANT_ATTRIBUTE * EXT_ENCHANTMENT + SKILL_ATTR_STR, 34500, ENCHANT_PIERCING_CHANCE, 350, ENCHANT_PROC * EXT_ENCHANTMENT + ENCHANT_PROC_HERO, 500, ENCHANT_RAGNAROK, 100, 0
-			ibitmod ITEM_BIT_PRECIOUS, ci, 1
+			fixeditemenc = 44, 750, ENCHANT_ATTRIBUTE * EXT_ENCHANTMENT + SKILL_ATTR_STR, 34500, 39, 350, ENCHANT_PROC * EXT_ENCHANTMENT + ENCHANT_PROC_HERO, 500, 37, 100, 0
+			ibitmod ITEM_BIT_PRECIOUS, ci, TRUE
 			inv(INV_ITEM_IDENTIFY_LEVEL, ci) = 500
 			fixlv = FIX_QUALITY_UNIQUE
 			return
 		}
 		if ( dbmode == DBMODE_REF ) {
@@ -67410,14 +69385,14 @@
 			reftype = FILTER_WEAPON
 			return
 		}
 		if ( dbmode == DBMODE_REF_SPEC ) {
 			if ( dbspec == DBSPEC_TYPE ) {
-				return FILTER_WEAPON
+				return 10000
 			}
 			if ( dbspec == DBSPEC_TYPE_MINOR ) {
-				return FILTER_WEAPON_LARGE_AXE
+				return 10010
 			}
 			if ( dbspec == DBSPEC_VALUE_ORG ) {
 				return 30000
 			}
 			if ( dbspec == DBSPEC_PARAM3_ORG ) {
@@ -67465,12 +69440,12 @@
 			inv(INV_ITEM_ID, ci) = ITEM_ID_BEAST_SICKLE
 			inv(INV_ITEM_PIC, ci) = xy2pic(26, 34)
 			reftype = FILTER_WEAPON
 			reftypeminor = FILTER_WEAPON_SICKLE
 			inv(INV_ITEM_NUM, ci) = 1
-			fixeditemenc = ENCHANT_ATTRIBUTE * EXT_ENCHANTMENT + SKILL_ATTR_CON, 34500, ENCHANT_PROC * EXT_ENCHANTMENT + ENCHANT_PROC_DECAPITATION, 150, ENCHANT_RAGNAROK, 100, ENCHANT_ELEMENTAL_DMG * EXT_ENCHANTMENT + SKILL_RES_CHAOS, 850, ENCHANT_ELEMENTAL_DMG * EXT_ENCHANTMENT + SKILL_RES_NETHER, 850, ENCHANT_ABSORB_MP, 500, 0
-			ibitmod ITEM_BIT_PRECIOUS, ci, 1
+			fixeditemenc = ENCHANT_ATTRIBUTE * EXT_ENCHANTMENT + SKILL_ATTR_CON, 34500, ENCHANT_PROC * EXT_ENCHANTMENT + ENCHANT_PROC_DECAPITATION, 150, 37, 100, ENCHANT_ELEMENTAL_DMG * EXT_ENCHANTMENT + SKILL_RES_CHAOS, 850, ENCHANT_ELEMENTAL_DMG * EXT_ENCHANTMENT + SKILL_RES_NETHER, 850, 38, 500, 0
+			ibitmod ITEM_BIT_PRECIOUS, ci, TRUE
 			inv(INV_ITEM_IDENTIFY_LEVEL, ci) = 500
 			fixlv = FIX_QUALITY_UNIQUE
 			return
 		}
 		if ( dbmode == DBMODE_REF ) {
@@ -67479,14 +69454,14 @@
 			reftype = FILTER_WEAPON
 			return
 		}
 		if ( dbmode == DBMODE_REF_SPEC ) {
 			if ( dbspec == DBSPEC_TYPE ) {
-				return FILTER_WEAPON
+				return 10000
 			}
 			if ( dbspec == DBSPEC_TYPE_MINOR ) {
-				return FILTER_WEAPON_SICKLE
+				return 10011
 			}
 			if ( dbspec == DBSPEC_VALUE_ORG ) {
 				return 30000
 			}
 			if ( dbspec == DBSPEC_PARAM3_ORG ) {
@@ -67533,12 +69508,12 @@
 			inv(INV_ITEM_ID, ci) = ITEM_ID_HEROS_CLOAK
 			inv(INV_ITEM_PIC, ci) = xy2pic(14, 14)
 			reftype = FILTER_CLOAK
 			reftypeminor = FILTER_CLOAK_MEDIUM
 			inv(INV_ITEM_NUM, ci) = 1
-			fixeditemenc = ENCHANT_SHOW_RELIGION, 100, ENCHANT_RES_PREGNANCY, 100, ENCHANT_RES_ETHERWIND, 100, ENCHANT_ATTRIBUTE * EXT_ENCHANTMENT + SKILL_ATTR_LUC, 550, 0
-			ibitmod ITEM_BIT_PRECIOUS, ci, 1
+			fixeditemenc = 59, 100, 48, 100, 30, 100, ENCHANT_ATTRIBUTE * EXT_ENCHANTMENT + SKILL_ATTR_LUC, 550, 0
+			ibitmod ITEM_BIT_PRECIOUS, ci, TRUE
 			inv(INV_ITEM_IDENTIFY_LEVEL, ci) = 500
 			fixlv = FIX_QUALITY_UNIQUE
 			return
 		}
 		if ( dbmode == DBMODE_REF ) {
@@ -67547,14 +69522,14 @@
 			reftype = FILTER_CLOAK
 			return
 		}
 		if ( dbmode == DBMODE_REF_SPEC ) {
 			if ( dbspec == DBSPEC_TYPE ) {
-				return FILTER_CLOAK
+				return 20000
 			}
 			if ( dbspec == DBSPEC_TYPE_MINOR ) {
-				return FILTER_CLOAK_MEDIUM
+				return 20001
 			}
 			if ( dbspec == DBSPEC_VALUE_ORG ) {
 				return 35000
 			}
 			if ( dbspec == DBSPEC_PARAM3_ORG ) {
@@ -67602,12 +69577,12 @@
 			inv(INV_ITEM_ID, ci) = ITEM_ID_GEMINI
 			inv(INV_ITEM_PIC, ci) = xy2pic(12, 21)
 			reftype = FILTER_RANGE
 			reftypeminor = FILTER_RANGE_PISTOL
 			inv(INV_ITEM_NUM, ci) = 1
-			fixeditemenc = ENCHANT_SKILL * EXT_ENCHANTMENT + SKILL_NORMAL_DUAL_WIELD, 600, ENCHANT_EXTRA_RANGED, 2000, ENCHANT_EXTRA_MELEE, 200, ENCHANT_ATTRIBUTE * EXT_ENCHANTMENT + SKILL_ATTR_DEX, 500, 0
-			ibitmod ITEM_BIT_PRECIOUS, ci, 1
+			fixeditemenc = ENCHANT_SKILL * EXT_ENCHANTMENT + SKILL_NORMAL_DUAL_WIELD, 600, 51, 2000, 50, 200, ENCHANT_ATTRIBUTE * EXT_ENCHANTMENT + SKILL_ATTR_DEX, 500, 0
+			ibitmod ITEM_BIT_PRECIOUS, ci, TRUE
 			inv(INV_ITEM_IDENTIFY_LEVEL, ci) = 500
 			fixlv = FIX_QUALITY_UNIQUE
 			return
 		}
 		if ( dbmode == DBMODE_REF ) {
@@ -67616,14 +69591,14 @@
 			reftype = FILTER_RANGE
 			return
 		}
 		if ( dbmode == DBMODE_REF_SPEC ) {
 			if ( dbspec == DBSPEC_TYPE ) {
-				return FILTER_RANGE
+				return 24000
 			}
 			if ( dbspec == DBSPEC_TYPE_MINOR ) {
-				return FILTER_RANGE_PISTOL
+				return 24020
 			}
 			if ( dbspec == DBSPEC_VALUE_ORG ) {
 				return 25000
 			}
 			if ( dbspec == DBSPEC_PARAM3_ORG ) {
@@ -67671,12 +69646,12 @@
 			inv(INV_ITEM_ID, ci) = ITEM_ID_OTI_TUBAKI
 			inv(INV_ITEM_PIC, ci) = xy2pic(18, 16)
 			reftype = FILTER_WEAPON
 			reftypeminor = FILTER_WEAPON_SHORTSWORD
 			inv(INV_ITEM_NUM, ci) = 1
-			fixeditemenc = ENCHANT_PROC * EXT_ENCHANTMENT + ENCHANT_PROC_DECAPITATION, 100, ENCHANT_SKILL * EXT_ENCHANTMENT + SKILL_NORMAL_TWO_HAND, 150, ENCHANT_PIERCING_CHANCE, 200, ENCHANT_SKILL * EXT_ENCHANTMENT + SKILL_NORMAL_COOKING, -200, 0
-			ibitmod ITEM_BIT_PRECIOUS, ci, 1
+			fixeditemenc = ENCHANT_PROC * EXT_ENCHANTMENT + ENCHANT_PROC_DECAPITATION, 100, ENCHANT_SKILL * EXT_ENCHANTMENT + SKILL_NORMAL_TWO_HAND, 150, 39, 200, ENCHANT_SKILL * EXT_ENCHANTMENT + SKILL_NORMAL_COOKING, -200, 0
+			ibitmod ITEM_BIT_PRECIOUS, ci, TRUE
 			inv(INV_ITEM_IDENTIFY_LEVEL, ci) = 500
 			fixlv = FIX_QUALITY_UNIQUE
 			return
 		}
 		if ( dbmode == DBMODE_REF ) {
@@ -67685,14 +69660,14 @@
 			reftype = FILTER_WEAPON
 			return
 		}
 		if ( dbmode == DBMODE_REF_SPEC ) {
 			if ( dbspec == DBSPEC_TYPE ) {
-				return FILTER_WEAPON
+				return 10000
 			}
 			if ( dbspec == DBSPEC_TYPE_MINOR ) {
-				return FILTER_WEAPON_SHORTSWORD
+				return 10003
 			}
 			if ( dbspec == DBSPEC_VALUE_ORG ) {
 				return 20000
 			}
 			if ( dbspec == DBSPEC_PARAM3_ORG ) {
@@ -67738,11 +69713,11 @@
 			inv(INV_ITEM_PIC, ci) = xy2pic(11, 21)
 			reftype = FILTER_ARMOR
 			reftypeminor = FILTER_ARMOR_LIGHT
 			inv(INV_ITEM_NUM, ci) = 1
 			fixeditemenc = ENCHANT_RESISTANCE * EXT_ENCHANTMENT + SKILL_RES_FIRE, 250, ENCHANT_RESISTANCE * EXT_ENCHANTMENT + SKILL_RES_COLD, 250, ENCHANT_RESISTANCE * EXT_ENCHANTMENT + SKILL_RES_LIGHTNING, 250, ENCHANT_SKILL * EXT_ENCHANTMENT + SKILL_NORMAL_SWIMMING, 400, ENCHANT_ATTRIBUTE * EXT_ENCHANTMENT + SKILL_ATTR_WIL, 400, 0
-			ibitmod ITEM_BIT_PRECIOUS, ci, 1
+			ibitmod ITEM_BIT_PRECIOUS, ci, TRUE
 			inv(INV_ITEM_IDENTIFY_LEVEL, ci) = 500
 			fixlv = FIX_QUALITY_UNIQUE
 			return
 		}
 		if ( dbmode == DBMODE_REF ) {
@@ -67751,14 +69726,14 @@
 			reftype = FILTER_ARMOR
 			return
 		}
 		if ( dbmode == DBMODE_REF_SPEC ) {
 			if ( dbspec == DBSPEC_TYPE ) {
-				return FILTER_ARMOR
+				return 16000
 			}
 			if ( dbspec == DBSPEC_TYPE_MINOR ) {
-				return FILTER_ARMOR_LIGHT
+				return 16003
 			}
 			if ( dbspec == DBSPEC_VALUE_ORG ) {
 				return 38000
 			}
 			if ( dbspec == DBSPEC_PARAM3_ORG ) {
@@ -67801,11 +69776,11 @@
 			inv(INV_ITEM_PIC, ci) = xy2pic(10, 21)
 			reftype = FILTER_ITEM_POTION
 			reftypeminor = FILTER_NOTHING
 			inv(INV_ITEM_NUM, ci) = 1
 			fixeditemenc = 0
-			ibitmod ITEM_BIT_PRECIOUS, ci, 1
+			ibitmod ITEM_BIT_PRECIOUS, ci, TRUE
 			inv(INV_ITEM_IDENTIFY_LEVEL, ci) = 500
 			fixlv = FIX_QUALITY_UNIQUE
 			return
 		}
 		if ( dbmode == DBMODE_REF ) {
@@ -67814,14 +69789,14 @@
 			reftype = FILTER_ITEM_POTION
 			return
 		}
 		if ( dbmode == DBMODE_REF_SPEC ) {
 			if ( dbspec == DBSPEC_TYPE ) {
-				return FILTER_ITEM_POTION
+				return 52000
 			}
 			if ( dbspec == DBSPEC_TYPE_MINOR ) {
-				return FILTER_NONE
+				return 99999
 			}
 			if ( dbspec == DBSPEC_VALUE_ORG ) {
 				return 500
 			}
 			if ( dbspec == DBSPEC_PARAM3_ORG ) {
@@ -67880,12 +69855,12 @@
 			inv(INV_ITEM_ID, ci) = ITEM_ID_DYNAMIC_SABER
 			inv(INV_ITEM_PIC, ci) = xy2pic(7, 15)
 			reftype = FILTER_WEAPON
 			reftypeminor = FILTER_WEAPON_SHORTSWORD
 			inv(INV_ITEM_NUM, ci) = 1
-			fixeditemenc = ENCHANT_PROC * EXT_ENCHANTMENT + ENCHANT_PROC_SHINING_WAVE, 500, ENCHANT_ATTRIBUTE * EXT_ENCHANTMENT + SKILL_ATTR_STR, 400, ENCHANT_SKILL * EXT_ENCHANTMENT + SKILL_NORMAL_DUAL_WIELD, 350, ENCHANT_RESISTANCE * EXT_ENCHANTMENT + SKILL_RES_MIND, 400, ENCHANT_ATTRIBUTE * EXT_ENCHANTMENT + SKILL_ATTR_WIL, 200, ENCHANT_RES_FEAR, 100, 0
-			ibitmod ITEM_BIT_PRECIOUS, ci, 1
+			fixeditemenc = ENCHANT_PROC * EXT_ENCHANTMENT + ENCHANT_PROC_SHINING_WAVE, 500, ENCHANT_ATTRIBUTE * EXT_ENCHANTMENT + SKILL_ATTR_STR, 400, ENCHANT_SKILL * EXT_ENCHANTMENT + SKILL_NORMAL_DUAL_WIELD, 350, ENCHANT_RESISTANCE * EXT_ENCHANTMENT + SKILL_RES_MIND, 400, ENCHANT_ATTRIBUTE * EXT_ENCHANTMENT + SKILL_ATTR_WIL, 200, 26, 100, 0
+			ibitmod ITEM_BIT_PRECIOUS, ci, TRUE
 			inv(INV_ITEM_IDENTIFY_LEVEL, ci) = 500
 			fixlv = FIX_QUALITY_UNIQUE
 			return
 		}
 		if ( dbmode == DBMODE_REF ) {
@@ -67894,14 +69869,14 @@
 			reftype = FILTER_WEAPON
 			return
 		}
 		if ( dbmode == DBMODE_REF_SPEC ) {
 			if ( dbspec == DBSPEC_TYPE ) {
-				return FILTER_WEAPON
+				return 10000
 			}
 			if ( dbspec == DBSPEC_TYPE_MINOR ) {
-				return FILTER_WEAPON_SHORTSWORD
+				return 10003
 			}
 			if ( dbspec == DBSPEC_VALUE_ORG ) {
 				return 45000
 			}
 			if ( dbspec == DBSPEC_PARAM3_ORG ) {
@@ -67945,12 +69920,12 @@
 			reftype = FILTER_ITEM_TOOL
 			reftypeminor = FILTER_NOTHING
 			inv(INV_ITEM_NUM, ci) = 1
 			fixeditemenc = 0
 			inv(INV_ITEM_EFFECT, ci) = EFFECT_YACATECT_GEMSTONE
-			ibitmod ITEM_BIT_PRECIOUS, ci, 1
-			ibitmod ITEM_BIT_PERIOD, ci, 1
+			ibitmod ITEM_BIT_PRECIOUS, ci, TRUE
+			ibitmod ITEM_BIT_PERIOD, ci, TRUE
 			inv(INV_ITEM_PARAM3, ci) = 72
 			inv(INV_ITEM_IDENTIFY_LEVEL, ci) = 0
 			fixlv = FIX_QUALITY_UNIQUE
 			return
 		}
@@ -67960,14 +69935,14 @@
 			reftype = FILTER_ITEM_TOOL
 			return
 		}
 		if ( dbmode == DBMODE_REF_SPEC ) {
 			if ( dbspec == DBSPEC_TYPE ) {
-				return FILTER_ITEM_TOOL
+				return 59000
 			}
 			if ( dbspec == DBSPEC_TYPE_MINOR ) {
-				return FILTER_NONE
+				return 99999
 			}
 			if ( dbspec == DBSPEC_VALUE_ORG ) {
 				return 50000
 			}
 			if ( dbspec == DBSPEC_PARAM3_ORG ) {
@@ -68015,12 +69990,12 @@
 			inv(INV_ITEM_ID, ci) = ITEM_ID_KANEITUUHOU
 			inv(INV_ITEM_PIC, ci) = xy2pic(8, 21)
 			reftype = FILTER_RANGE
 			reftypeminor = FILTER_RANGE_ROCK_THROW
 			inv(INV_ITEM_NUM, ci) = 1
-			fixeditemenc = ENCHANT_SKILL * EXT_ENCHANTMENT + SKILL_NORMAL_NEGOTIATION, 550, ENCHANT_SKILL * EXT_ENCHANTMENT + SKILL_NORMAL_INVESTING, 450, ENCHANT_RESISTANCE * EXT_ENCHANTMENT + SKILL_RES_DARKNESS, 400, ENCHANT_SHOW_RELIGION, 100, ENCHANT_SEE_INVISIBLE, 100, 0
-			ibitmod ITEM_BIT_PRECIOUS, ci, 1
+			fixeditemenc = ENCHANT_SKILL * EXT_ENCHANTMENT + SKILL_NORMAL_NEGOTIATION, 550, ENCHANT_SKILL * EXT_ENCHANTMENT + SKILL_NORMAL_INVESTING, 450, ENCHANT_RESISTANCE * EXT_ENCHANTMENT + SKILL_RES_DARKNESS, 400, 59, 100, 35, 100, 0
+			ibitmod ITEM_BIT_PRECIOUS, ci, TRUE
 			inv(INV_ITEM_IDENTIFY_LEVEL, ci) = 500
 			fixlv = FIX_QUALITY_UNIQUE
 			return
 		}
 		if ( dbmode == DBMODE_REF ) {
@@ -68029,14 +70004,14 @@
 			reftype = FILTER_RANGE
 			return
 		}
 		if ( dbmode == DBMODE_REF_SPEC ) {
 			if ( dbspec == DBSPEC_TYPE ) {
-				return FILTER_RANGE
+				return 24000
 			}
 			if ( dbspec == DBSPEC_TYPE_MINOR ) {
-				return FILTER_RANGE_ROCK_THROW
+				return 24030
 			}
 			if ( dbspec == DBSPEC_VALUE_ORG ) {
 				return 35000
 			}
 			if ( dbspec == DBSPEC_PARAM3_ORG ) {
@@ -68084,12 +70059,12 @@
 			inv(INV_ITEM_ID, ci) = ITEM_ID_GAU_17_CUSTOM
 			inv(INV_ITEM_PIC, ci) = xy2pic(20, 12)
 			reftype = FILTER_RANGE
 			reftypeminor = FILTER_RANGE_PISTOL
 			inv(INV_ITEM_NUM, ci) = 1
-			fixeditemenc = ENCHANT_ELEMENTAL_DMG * EXT_ENCHANTMENT + SKILL_RES_SOUND, 400, ENCHANT_ELEMENTAL_DMG * EXT_ENCHANTMENT + SKILL_RES_NETHER, 200, ENCHANT_RESISTANCE * EXT_ENCHANTMENT + SKILL_RES_NERVE, 150, ENCHANT_EXTRA_RANGED, 600, ENCHANT_ATTRIBUTE * EXT_ENCHANTMENT + SKILL_ATTR_SPD, -800, 0
-			ibitmod ITEM_BIT_PRECIOUS, ci, 1
+			fixeditemenc = ENCHANT_ELEMENTAL_DMG * EXT_ENCHANTMENT + SKILL_RES_SOUND, 400, ENCHANT_ELEMENTAL_DMG * EXT_ENCHANTMENT + SKILL_RES_NETHER, 200, ENCHANT_RESISTANCE * EXT_ENCHANTMENT + SKILL_RES_NERVE, 150, 51, 600, ENCHANT_ATTRIBUTE * EXT_ENCHANTMENT + SKILL_ATTR_SPD, -800, 0
+			ibitmod ITEM_BIT_PRECIOUS, ci, TRUE
 			inv(INV_ITEM_IDENTIFY_LEVEL, ci) = 500
 			fixlv = FIX_QUALITY_UNIQUE
 			return
 		}
 		if ( dbmode == DBMODE_REF ) {
@@ -68098,14 +70073,14 @@
 			reftype = FILTER_RANGE
 			return
 		}
 		if ( dbmode == DBMODE_REF_SPEC ) {
 			if ( dbspec == DBSPEC_TYPE ) {
-				return FILTER_RANGE
+				return 24000
 			}
 			if ( dbspec == DBSPEC_TYPE_MINOR ) {
-				return FILTER_RANGE_PISTOL
+				return 24020
 			}
 			if ( dbspec == DBSPEC_VALUE_ORG ) {
 				return 72000
 			}
 			if ( dbspec == DBSPEC_PARAM3_ORG ) {
@@ -68153,12 +70128,12 @@
 			inv(INV_ITEM_ID, ci) = ITEM_ID_NEGATIVE_EDGE
 			inv(INV_ITEM_PIC, ci) = xy2pic(20, 16)
 			reftype = FILTER_WEAPON
 			reftypeminor = FILTER_WEAPON_LARGE_AXE
 			inv(INV_ITEM_NUM, ci) = 1
-			fixeditemenc = ENCHANT_SKILL * EXT_ENCHANTMENT + SKILL_NORMAL_TWO_HAND, 150, ENCHANT_PIERCING_CHANCE, 200, ENCHANT_BANE_GOD, 1200, ENCHANT_SKILL * EXT_ENCHANTMENT + SKILL_NORMAL_EVASION, -200, ENCHANT_ATTRIBUTE * EXT_ENCHANTMENT + SKILL_ATTR_STR, 400, 0
-			ibitmod ITEM_BIT_PRECIOUS, ci, 1
+			fixeditemenc = ENCHANT_SKILL * EXT_ENCHANTMENT + SKILL_NORMAL_TWO_HAND, 150, 39, 200, 61, 1200, ENCHANT_SKILL * EXT_ENCHANTMENT + SKILL_NORMAL_EVASION, -200, ENCHANT_ATTRIBUTE * EXT_ENCHANTMENT + SKILL_ATTR_STR, 400, 0
+			ibitmod ITEM_BIT_PRECIOUS, ci, TRUE
 			inv(INV_ITEM_IDENTIFY_LEVEL, ci) = 500
 			fixlv = FIX_QUALITY_UNIQUE
 			return
 		}
 		if ( dbmode == DBMODE_REF ) {
@@ -68167,14 +70142,14 @@
 			reftype = FILTER_WEAPON
 			return
 		}
 		if ( dbmode == DBMODE_REF_SPEC ) {
 			if ( dbspec == DBSPEC_TYPE ) {
-				return FILTER_WEAPON
+				return 10000
 			}
 			if ( dbspec == DBSPEC_TYPE_MINOR ) {
-				return FILTER_WEAPON_LARGE_AXE
+				return 10010
 			}
 			if ( dbspec == DBSPEC_VALUE_ORG ) {
 				return 80000
 			}
 			if ( dbspec == DBSPEC_PARAM3_ORG ) {
@@ -68221,12 +70196,12 @@
 			inv(INV_ITEM_ID, ci) = ITEM_ID_PILE_DRIVER
 			inv(INV_ITEM_PIC, ci) = xy2pic(7, 21)
 			reftype = FILTER_WEAPON
 			reftypeminor = FILTER_WEAPON_POLEARM
 			inv(INV_ITEM_NUM, ci) = 1
-			fixeditemenc = ENCHANT_ELEMENTAL_DMG * EXT_ENCHANTMENT + SKILL_RES_LIGHTNING, 400, ENCHANT_CRIT_CHANCE, 450, ENCHANT_RESISTANCE * EXT_ENCHANTMENT + SKILL_RES_LIGHTNING, 400, ENCHANT_ATTRIBUTE * EXT_ENCHANTMENT + SKILL_ATTR_SPD, -600, 0
-			ibitmod ITEM_BIT_PRECIOUS, ci, 1
+			fixeditemenc = ENCHANT_ELEMENTAL_DMG * EXT_ENCHANTMENT + SKILL_RES_LIGHTNING, 400, 44, 450, ENCHANT_RESISTANCE * EXT_ENCHANTMENT + SKILL_RES_LIGHTNING, 400, ENCHANT_ATTRIBUTE * EXT_ENCHANTMENT + SKILL_ATTR_SPD, -600, 0
+			ibitmod ITEM_BIT_PRECIOUS, ci, TRUE
 			inv(INV_ITEM_IDENTIFY_LEVEL, ci) = 500
 			fixlv = FIX_QUALITY_UNIQUE
 			return
 		}
 		if ( dbmode == DBMODE_REF ) {
@@ -68235,14 +70210,14 @@
 			reftype = FILTER_WEAPON
 			return
 		}
 		if ( dbmode == DBMODE_REF_SPEC ) {
 			if ( dbspec == DBSPEC_TYPE ) {
-				return FILTER_WEAPON
+				return 10000
 			}
 			if ( dbspec == DBSPEC_TYPE_MINOR ) {
-				return FILTER_WEAPON_POLEARM
+				return 10007
 			}
 			if ( dbspec == DBSPEC_VALUE_ORG ) {
 				return 72000
 			}
 			if ( dbspec == DBSPEC_PARAM3_ORG ) {
@@ -68297,14 +70272,14 @@
 			reftype = FILTER_ITEM_FOOD
 			return
 		}
 		if ( dbmode == DBMODE_REF_SPEC ) {
 			if ( dbspec == DBSPEC_TYPE ) {
-				return FILTER_ITEM_FOOD
+				return 57000
 			}
 			if ( dbspec == DBSPEC_TYPE_MINOR ) {
-				return FILTER_NONE
+				return 99999
 			}
 			if ( dbspec == DBSPEC_VALUE_ORG ) {
 				return 2000
 			}
 			if ( dbspec == DBSPEC_PARAM3_ORG ) {
@@ -68354,12 +70329,12 @@
 			inv(INV_ITEM_ID, ci) = ITEM_ID_DRAGON_SLAYER
 			inv(INV_ITEM_PIC, ci) = xy2pic(4, 21)
 			reftype = FILTER_WEAPON
 			reftypeminor = FILTER_WEAPON_HEAVY_SWORD
 			inv(INV_ITEM_NUM, ci) = 1
-			fixeditemenc = ENCHANT_BANE_DRAGON, 400, ENCHANT_BANE_GOD, 300, 0
-			ibitmod ITEM_BIT_PRECIOUS, ci, 1
+			fixeditemenc = 57, 400, 61, 300, 0
+			ibitmod ITEM_BIT_PRECIOUS, ci, TRUE
 			inv(INV_ITEM_IDENTIFY_LEVEL, ci) = 500
 			fixlv = FIX_QUALITY_UNIQUE
 			return
 		}
 		if ( dbmode == DBMODE_REF ) {
@@ -68368,14 +70343,14 @@
 			reftype = FILTER_WEAPON
 			return
 		}
 		if ( dbmode == DBMODE_REF_SPEC ) {
 			if ( dbspec == DBSPEC_TYPE ) {
-				return FILTER_WEAPON
+				return 10000
 			}
 			if ( dbspec == DBSPEC_TYPE_MINOR ) {
-				return FILTER_WEAPON_HEAVY_SWORD
+				return 10001
 			}
 			if ( dbspec == DBSPEC_VALUE_ORG ) {
 				return 72000
 			}
 			if ( dbspec == DBSPEC_PARAM3_ORG ) {
@@ -68419,11 +70394,11 @@
 			reftype = FILTER_ITEM_TOOL
 			reftypeminor = FILTER_ITEM_TOOL_BLEND
 			inv(INV_ITEM_NUM, ci) = 1
 			fixeditemenc = 0
 			inv(INV_ITEM_EFFECT, ci) = EFFECT_COOKING
-			ibitmod ITEM_BIT_PRECIOUS, ci, 1
+			ibitmod ITEM_BIT_PRECIOUS, ci, TRUE
 			inv(INV_ITEM_PARAM1, ci) = 10
 			inv(INV_ITEM_IDENTIFY_LEVEL, ci) = 0
 			fixlv = FIX_QUALITY_UNIQUE
 			return
 		}
@@ -68433,14 +70408,14 @@
 			reftype = FILTER_ITEM_TOOL
 			return
 		}
 		if ( dbmode == DBMODE_REF_SPEC ) {
 			if ( dbspec == DBSPEC_TYPE ) {
-				return FILTER_ITEM_TOOL
+				return 59000
 			}
 			if ( dbspec == DBSPEC_TYPE_MINOR ) {
-				return FILTER_ITEM_TOOL_BLEND
+				return 59500
 			}
 			if ( dbspec == DBSPEC_VALUE_ORG ) {
 				return 10000
 			}
 			if ( dbspec == DBSPEC_PARAM3_ORG ) {
@@ -68498,14 +70473,14 @@
 			reftype = FILTER_ITEM_TOOL
 			return
 		}
 		if ( dbmode == DBMODE_REF_SPEC ) {
 			if ( dbspec == DBSPEC_TYPE ) {
-				return FILTER_ITEM_TOOL
+				return 59000
 			}
 			if ( dbspec == DBSPEC_TYPE_MINOR ) {
-				return FILTER_ITEM_TOOL_BLEND
+				return 59500
 			}
 			if ( dbspec == DBSPEC_VALUE_ORG ) {
 				return 1000
 			}
 			if ( dbspec == DBSPEC_PARAM3_ORG ) {
@@ -68568,14 +70543,14 @@
 			reftype = FILTER_RANGE
 			return
 		}
 		if ( dbmode == DBMODE_REF_SPEC ) {
 			if ( dbspec == DBSPEC_TYPE ) {
-				return FILTER_RANGE
+				return 24000
 			}
 			if ( dbspec == DBSPEC_TYPE_MINOR ) {
-				return FILTER_RANGE_SHORTBOW
+				return 24001
 			}
 			if ( dbspec == DBSPEC_VALUE_ORG ) {
 				return 900
 			}
 			if ( dbspec == DBSPEC_PARAM3_ORG ) {
@@ -68639,14 +70614,14 @@
 			reftype = FILTER_ITEM_FOOD
 			return
 		}
 		if ( dbmode == DBMODE_REF_SPEC ) {
 			if ( dbspec == DBSPEC_TYPE ) {
-				return FILTER_ITEM_FOOD
+				return 57000
 			}
 			if ( dbspec == DBSPEC_TYPE_MINOR ) {
-				return FILTER_NONE
+				return 99999
 			}
 			if ( dbspec == DBSPEC_VALUE_ORG ) {
 				return 350
 			}
 			if ( dbspec == DBSPEC_PARAM3_ORG ) {
@@ -68702,14 +70677,14 @@
 			reftype = FILTER_ITEM_FOOD
 			return
 		}
 		if ( dbmode == DBMODE_REF_SPEC ) {
 			if ( dbspec == DBSPEC_TYPE ) {
-				return FILTER_ITEM_FOOD
+				return 57000
 			}
 			if ( dbspec == DBSPEC_TYPE_MINOR ) {
-				return FILTER_NONE
+				return 99999
 			}
 			if ( dbspec == DBSPEC_VALUE_ORG ) {
 				return 50
 			}
 			if ( dbspec == DBSPEC_PARAM3_ORG ) {
@@ -68768,14 +70743,14 @@
 			reftype = FILTER_ITEM_FOOD
 			return
 		}
 		if ( dbmode == DBMODE_REF_SPEC ) {
 			if ( dbspec == DBSPEC_TYPE ) {
-				return FILTER_ITEM_FOOD
+				return 57000
 			}
 			if ( dbspec == DBSPEC_TYPE_MINOR ) {
-				return FILTER_NONE
+				return 99999
 			}
 			if ( dbspec == DBSPEC_VALUE_ORG ) {
 				return 80
 			}
 			if ( dbspec == DBSPEC_PARAM3_ORG ) {
@@ -68832,14 +70807,14 @@
 			reftype = FILTER_CONTAINER
 			return
 		}
 		if ( dbmode == DBMODE_REF_SPEC ) {
 			if ( dbspec == DBSPEC_TYPE ) {
-				return FILTER_CONTAINER
+				return 72000
 			}
 			if ( dbspec == DBSPEC_TYPE_MINOR ) {
-				return FILTER_NONE
+				return 99999
 			}
 			if ( dbspec == DBSPEC_VALUE_ORG ) {
 				return 2500
 			}
 			if ( dbspec == DBSPEC_PARAM3_ORG ) {
@@ -68893,14 +70868,14 @@
 			reftype = FILTER_ITEM_SPELLBOOK
 			return
 		}
 		if ( dbmode == DBMODE_REF_SPEC ) {
 			if ( dbspec == DBSPEC_TYPE ) {
-				return FILTER_ITEM_SPELLBOOK
+				return 54000
 			}
 			if ( dbspec == DBSPEC_TYPE_MINOR ) {
-				return FILTER_NONE
+				return 99999
 			}
 			if ( dbspec == DBSPEC_VALUE_ORG ) {
 				return 12000
 			}
 			if ( dbspec == DBSPEC_PARAM3_ORG ) {
@@ -68961,14 +70936,14 @@
 			reftype = FILTER_FURNITURE
 			return
 		}
 		if ( dbmode == DBMODE_REF_SPEC ) {
 			if ( dbspec == DBSPEC_TYPE ) {
-				return FILTER_FURNITURE
+				return 60000
 			}
 			if ( dbspec == DBSPEC_TYPE_MINOR ) {
-				return FILTER_NONE
+				return 99999
 			}
 			if ( dbspec == DBSPEC_VALUE_ORG ) {
 				return 100
 			}
 			if ( dbspec == DBSPEC_PARAM3_ORG ) {
@@ -69028,14 +71003,14 @@
 			reftype = FILTER_WEAPON
 			return
 		}
 		if ( dbmode == DBMODE_REF_SPEC ) {
 			if ( dbspec == DBSPEC_TYPE ) {
-				return FILTER_WEAPON
+				return 10000
 			}
 			if ( dbspec == DBSPEC_TYPE_MINOR ) {
-				return FILTER_WEAPON_SHORTSWORD
+				return 10003
 			}
 			if ( dbspec == DBSPEC_VALUE_ORG ) {
 				return 700
 			}
 			if ( dbspec == DBSPEC_PARAM3_ORG ) {
@@ -69089,14 +71064,14 @@
 			reftype = FILTER_FURNITURE
 			return
 		}
 		if ( dbmode == DBMODE_REF_SPEC ) {
 			if ( dbspec == DBSPEC_TYPE ) {
-				return FILTER_FURNITURE
+				return 60000
 			}
 			if ( dbspec == DBSPEC_TYPE_MINOR ) {
-				return FILTER_NONE
+				return 99999
 			}
 			if ( dbspec == DBSPEC_VALUE_ORG ) {
 				return 23000
 			}
 			if ( dbspec == DBSPEC_PARAM3_ORG ) {
@@ -69150,14 +71125,14 @@
 			reftype = FILTER_FURNITURE
 			return
 		}
 		if ( dbmode == DBMODE_REF_SPEC ) {
 			if ( dbspec == DBSPEC_TYPE ) {
-				return FILTER_FURNITURE
+				return 60000
 			}
 			if ( dbspec == DBSPEC_TYPE_MINOR ) {
-				return FILTER_NONE
+				return 99999
 			}
 			if ( dbspec == DBSPEC_VALUE_ORG ) {
 				return 16000
 			}
 			if ( dbspec == DBSPEC_PARAM3_ORG ) {
@@ -69212,14 +71187,14 @@
 			reftype = FILTER_FURNITURE
 			return
 		}
 		if ( dbmode == DBMODE_REF_SPEC ) {
 			if ( dbspec == DBSPEC_TYPE ) {
-				return FILTER_FURNITURE
+				return 60000
 			}
 			if ( dbspec == DBSPEC_TYPE_MINOR ) {
-				return FILTER_NONE
+				return 99999
 			}
 			if ( dbspec == DBSPEC_VALUE_ORG ) {
 				return 12000
 			}
 			if ( dbspec == DBSPEC_PARAM3_ORG ) {
@@ -69263,12 +71238,12 @@
 			reftype = FILTER_ITEM_TOOL
 			reftypeminor = FILTER_NOTHING
 			inv(INV_ITEM_NUM, ci) = 1
 			fixeditemenc = 0
 			inv(INV_ITEM_EFFECT, ci) = EFFECT_MANI_STATUE
-			ibitmod ITEM_BIT_PRECIOUS, ci, 1
-			ibitmod ITEM_BIT_PERIOD, ci, 1
+			ibitmod ITEM_BIT_PRECIOUS, ci, TRUE
+			ibitmod ITEM_BIT_PERIOD, ci, TRUE
 			inv(INV_ITEM_PARAM3, ci) = 48
 			inv(INV_ITEM_IDENTIFY_LEVEL, ci) = 0
 			fixlv = FIX_QUALITY_UNIQUE
 			return
 		}
@@ -69278,14 +71253,14 @@
 			reftype = FILTER_ITEM_TOOL
 			return
 		}
 		if ( dbmode == DBMODE_REF_SPEC ) {
 			if ( dbspec == DBSPEC_TYPE ) {
-				return FILTER_ITEM_TOOL
+				return 59000
 			}
 			if ( dbspec == DBSPEC_TYPE_MINOR ) {
-				return FILTER_NONE
+				return 99999
 			}
 			if ( dbspec == DBSPEC_VALUE_ORG ) {
 				return 100000
 			}
 			if ( dbspec == DBSPEC_PARAM3_ORG ) {
@@ -69329,12 +71304,12 @@
 			reftype = FILTER_ITEM_TOOL
 			reftypeminor = FILTER_NOTHING
 			inv(INV_ITEM_NUM, ci) = 1
 			fixeditemenc = 0
 			inv(INV_ITEM_EFFECT, ci) = EFFECT_KUMIROMI_STATUE
-			ibitmod ITEM_BIT_PRECIOUS, ci, 1
-			ibitmod ITEM_BIT_PERIOD, ci, 1
+			ibitmod ITEM_BIT_PRECIOUS, ci, TRUE
+			ibitmod ITEM_BIT_PERIOD, ci, TRUE
 			inv(INV_ITEM_PARAM3, ci) = 120
 			inv(INV_ITEM_IDENTIFY_LEVEL, ci) = 0
 			fixlv = FIX_QUALITY_UNIQUE
 			return
 		}
@@ -69344,14 +71319,14 @@
 			reftype = FILTER_ITEM_TOOL
 			return
 		}
 		if ( dbmode == DBMODE_REF_SPEC ) {
 			if ( dbspec == DBSPEC_TYPE ) {
-				return FILTER_ITEM_TOOL
+				return 59000
 			}
 			if ( dbspec == DBSPEC_TYPE_MINOR ) {
-				return FILTER_NONE
+				return 99999
 			}
 			if ( dbspec == DBSPEC_VALUE_ORG ) {
 				return 100000
 			}
 			if ( dbspec == DBSPEC_PARAM3_ORG ) {
@@ -69406,14 +71381,14 @@
 			reftype = FILTER_ITEM_FOOD
 			return
 		}
 		if ( dbmode == DBMODE_REF_SPEC ) {
 			if ( dbspec == DBSPEC_TYPE ) {
-				return FILTER_ITEM_FOOD
+				return 57000
 			}
 			if ( dbspec == DBSPEC_TYPE_MINOR ) {
-				return FILTER_NONE
+				return 99999
 			}
 			if ( dbspec == DBSPEC_VALUE_ORG ) {
 				return 160
 			}
 			if ( dbspec == DBSPEC_PARAM3_ORG ) {
@@ -69467,14 +71442,14 @@
 			reftype = FILTER_FURNITURE
 			return
 		}
 		if ( dbmode == DBMODE_REF_SPEC ) {
 			if ( dbspec == DBSPEC_TYPE ) {
-				return FILTER_FURNITURE
+				return 60000
 			}
 			if ( dbspec == DBSPEC_TYPE_MINOR ) {
-				return FILTER_NONE
+				return 99999
 			}
 			if ( dbspec == DBSPEC_VALUE_ORG ) {
 				return 7200
 			}
 			if ( dbspec == DBSPEC_PARAM3_ORG ) {
@@ -69529,14 +71504,14 @@
 			reftype = FILTER_FURNITURE
 			return
 		}
 		if ( dbmode == DBMODE_REF_SPEC ) {
 			if ( dbspec == DBSPEC_TYPE ) {
-				return FILTER_FURNITURE
+				return 60000
 			}
 			if ( dbspec == DBSPEC_TYPE_MINOR ) {
-				return FILTER_NONE
+				return 99999
 			}
 			if ( dbspec == DBSPEC_VALUE_ORG ) {
 				return 2400
 			}
 			if ( dbspec == DBSPEC_PARAM3_ORG ) {
@@ -69593,14 +71568,14 @@
 			reftype = FILTER_ITEM_FOOD
 			return
 		}
 		if ( dbmode == DBMODE_REF_SPEC ) {
 			if ( dbspec == DBSPEC_TYPE ) {
-				return FILTER_ITEM_FOOD
+				return 57000
 			}
 			if ( dbspec == DBSPEC_TYPE_MINOR ) {
-				return FILTER_ITEM_FOOD_FRUIT
+				return 57004
 			}
 			if ( dbspec == DBSPEC_VALUE_ORG ) {
 				return 90
 			}
 			if ( dbspec == DBSPEC_PARAM3_ORG ) {
@@ -69655,14 +71630,14 @@
 			reftype = FILTER_ITEM_POTION
 			return
 		}
 		if ( dbmode == DBMODE_REF_SPEC ) {
 			if ( dbspec == DBSPEC_TYPE ) {
-				return FILTER_ITEM_POTION
+				return 52000
 			}
 			if ( dbspec == DBSPEC_TYPE_MINOR ) {
-				return FILTER_NONE
+				return 99999
 			}
 			if ( dbspec == DBSPEC_VALUE_ORG ) {
 				return 7500
 			}
 			if ( dbspec == DBSPEC_PARAM3_ORG ) {
@@ -69725,14 +71700,14 @@
 			reftype = FILTER_ITEM_POTION
 			return
 		}
 		if ( dbmode == DBMODE_REF_SPEC ) {
 			if ( dbspec == DBSPEC_TYPE ) {
-				return FILTER_ITEM_POTION
+				return 52000
 			}
 			if ( dbspec == DBSPEC_TYPE_MINOR ) {
-				return FILTER_NONE
+				return 99999
 			}
 			if ( dbspec == DBSPEC_VALUE_ORG ) {
 				return 500
 			}
 			if ( dbspec == DBSPEC_PARAM3_ORG ) {
@@ -69795,14 +71770,14 @@
 			reftype = FILTER_FURNITURE
 			return
 		}
 		if ( dbmode == DBMODE_REF_SPEC ) {
 			if ( dbspec == DBSPEC_TYPE ) {
-				return FILTER_FURNITURE
+				return 60000
 			}
 			if ( dbspec == DBSPEC_TYPE_MINOR ) {
-				return FILTER_NONE
+				return 99999
 			}
 			if ( dbspec == DBSPEC_VALUE_ORG ) {
 				return 1650
 			}
 			if ( dbspec == DBSPEC_PARAM3_ORG ) {
@@ -69856,14 +71831,14 @@
 			reftype = FILTER_FURNITURE
 			return
 		}
 		if ( dbmode == DBMODE_REF_SPEC ) {
 			if ( dbspec == DBSPEC_TYPE ) {
-				return FILTER_FURNITURE
+				return 60000
 			}
 			if ( dbspec == DBSPEC_TYPE_MINOR ) {
-				return FILTER_NONE
+				return 99999
 			}
 			if ( dbspec == DBSPEC_VALUE_ORG ) {
 				return 400
 			}
 			if ( dbspec == DBSPEC_PARAM3_ORG ) {
@@ -69918,14 +71893,14 @@
 			reftype = FILTER_FURNITURE
 			return
 		}
 		if ( dbmode == DBMODE_REF_SPEC ) {
 			if ( dbspec == DBSPEC_TYPE ) {
-				return FILTER_FURNITURE
+				return 60000
 			}
 			if ( dbspec == DBSPEC_TYPE_MINOR ) {
-				return FILTER_FURNITURE_BED
+				return 60004
 			}
 			if ( dbspec == DBSPEC_VALUE_ORG ) {
 				return 250
 			}
 			if ( dbspec == DBSPEC_PARAM3_ORG ) {
@@ -69982,14 +71957,14 @@
 			reftype = FILTER_FURNITURE
 			return
 		}
 		if ( dbmode == DBMODE_REF_SPEC ) {
 			if ( dbspec == DBSPEC_TYPE ) {
-				return FILTER_FURNITURE
+				return 60000
 			}
 			if ( dbspec == DBSPEC_TYPE_MINOR ) {
-				return FILTER_NONE
+				return 99999
 			}
 			if ( dbspec == DBSPEC_VALUE_ORG ) {
 				return 3800
 			}
 			if ( dbspec == DBSPEC_PARAM3_ORG ) {
@@ -70043,14 +72018,14 @@
 			reftype = FILTER_FURNITURE
 			return
 		}
 		if ( dbmode == DBMODE_REF_SPEC ) {
 			if ( dbspec == DBSPEC_TYPE ) {
-				return FILTER_FURNITURE
+				return 60000
 			}
 			if ( dbspec == DBSPEC_TYPE_MINOR ) {
-				return FILTER_NONE
+				return 99999
 			}
 			if ( dbspec == DBSPEC_VALUE_ORG ) {
 				return 3800
 			}
 			if ( dbspec == DBSPEC_PARAM3_ORG ) {
@@ -70104,14 +72079,14 @@
 			reftype = FILTER_FURNITURE
 			return
 		}
 		if ( dbmode == DBMODE_REF_SPEC ) {
 			if ( dbspec == DBSPEC_TYPE ) {
-				return FILTER_FURNITURE
+				return 60000
 			}
 			if ( dbspec == DBSPEC_TYPE_MINOR ) {
-				return FILTER_NONE
+				return 99999
 			}
 			if ( dbspec == DBSPEC_VALUE_ORG ) {
 				return 1200
 			}
 			if ( dbspec == DBSPEC_PARAM3_ORG ) {
@@ -70165,14 +72140,14 @@
 			reftype = FILTER_FURNITURE
 			return
 		}
 		if ( dbmode == DBMODE_REF_SPEC ) {
 			if ( dbspec == DBSPEC_TYPE ) {
-				return FILTER_FURNITURE
+				return 60000
 			}
 			if ( dbspec == DBSPEC_TYPE_MINOR ) {
-				return FILTER_NONE
+				return 99999
 			}
 			if ( dbspec == DBSPEC_VALUE_ORG ) {
 				return 3600
 			}
 			if ( dbspec == DBSPEC_PARAM3_ORG ) {
@@ -70226,14 +72201,14 @@
 			reftype = FILTER_FURNITURE
 			return
 		}
 		if ( dbmode == DBMODE_REF_SPEC ) {
 			if ( dbspec == DBSPEC_TYPE ) {
-				return FILTER_FURNITURE
+				return 60000
 			}
 			if ( dbspec == DBSPEC_TYPE_MINOR ) {
-				return FILTER_NONE
+				return 99999
 			}
 			if ( dbspec == DBSPEC_VALUE_ORG ) {
 				return 760
 			}
 			if ( dbspec == DBSPEC_PARAM3_ORG ) {
@@ -70276,13 +72251,13 @@
 			inv(INV_ITEM_ID, ci) = ITEM_ID_GOULDS_PIANO
 			inv(INV_ITEM_PIC, ci) = xy2pic(10, 2)
 			reftype = FILTER_FURNITURE
 			reftypeminor = FILTER_FURNITURE_INSTRUMENT
 			inv(INV_ITEM_NUM, ci) = 1
-			fixeditemenc = ENCHANT_DRUNK_LISTENER, 100, 0
+			fixeditemenc = 60, 100, 0
 			inv(INV_ITEM_EFFECT, ci) = EFFECT_PERFORM
-			ibitmod ITEM_BIT_PRECIOUS, ci, 1
+			ibitmod ITEM_BIT_PRECIOUS, ci, TRUE
 			inv(INV_ITEM_PARAM1, ci) = 200
 			inv(INV_ITEM_IDENTIFY_LEVEL, ci) = 0
 			fixlv = FIX_QUALITY_UNIQUE
 			return
 		}
@@ -70292,14 +72267,14 @@
 			reftype = FILTER_FURNITURE
 			return
 		}
 		if ( dbmode == DBMODE_REF_SPEC ) {
 			if ( dbspec == DBSPEC_TYPE ) {
-				return FILTER_FURNITURE
+				return 60000
 			}
 			if ( dbspec == DBSPEC_TYPE_MINOR ) {
-				return FILTER_FURNITURE_INSTRUMENT
+				return 60005
 			}
 			if ( dbspec == DBSPEC_VALUE_ORG ) {
 				return 35000
 			}
 			if ( dbspec == DBSPEC_PARAM3_ORG ) {
@@ -70343,11 +72318,11 @@
 			reftype = FILTER_ITEM_TOOL
 			reftypeminor = FILTER_NOTHING
 			inv(INV_ITEM_NUM, ci) = 1
 			fixeditemenc = 0
 			inv(INV_ITEM_EFFECT, ci) = EFFECT_GAROK_HAMMER
-			ibitmod ITEM_BIT_PRECIOUS, ci, 1
+			ibitmod ITEM_BIT_PRECIOUS, ci, TRUE
 			inv(INV_ITEM_PARAM1, ci) = rnd(20000) + 1
 			inv(INV_ITEM_IDENTIFY_LEVEL, ci) = 0
 			fixlv = FIX_QUALITY_UNIQUE
 			return
 		}
@@ -70357,14 +72332,14 @@
 			reftype = FILTER_ITEM_TOOL
 			return
 		}
 		if ( dbmode == DBMODE_REF_SPEC ) {
 			if ( dbspec == DBSPEC_TYPE ) {
-				return FILTER_ITEM_TOOL
+				return 59000
 			}
 			if ( dbspec == DBSPEC_TYPE_MINOR ) {
-				return FILTER_NONE
+				return 99999
 			}
 			if ( dbspec == DBSPEC_VALUE_ORG ) {
 				return 75000
 			}
 			if ( dbspec == DBSPEC_PARAM3_ORG ) {
@@ -70427,14 +72402,14 @@
 			reftype = FILTER_WEAPON
 			return
 		}
 		if ( dbmode == DBMODE_REF_SPEC ) {
 			if ( dbspec == DBSPEC_TYPE ) {
-				return FILTER_WEAPON
+				return 10000
 			}
 			if ( dbspec == DBSPEC_TYPE_MINOR ) {
-				return FILTER_WEAPON_LONGSWORD
+				return 10002
 			}
 			if ( dbspec == DBSPEC_VALUE_ORG ) {
 				return 4800
 			}
 			if ( dbspec == DBSPEC_PARAM3_ORG ) {
@@ -70482,12 +72457,12 @@
 			inv(INV_ITEM_ID, ci) = ITEM_ID_MAUSER_C96_CUSTOM
 			inv(INV_ITEM_PIC, ci) = xy2pic(23, 12)
 			reftype = FILTER_RANGE
 			reftypeminor = FILTER_RANGE_PISTOL
 			inv(INV_ITEM_NUM, ci) = 1
-			fixeditemenc = ENCHANT_SEE_INVISIBLE, 100, 0
-			ibitmod ITEM_BIT_PRECIOUS, ci, 1
+			fixeditemenc = 35, 100, 0
+			ibitmod ITEM_BIT_PRECIOUS, ci, TRUE
 			inv(INV_ITEM_IDENTIFY_LEVEL, ci) = 500
 			fixlv = FIX_QUALITY_UNIQUE
 			return
 		}
 		if ( dbmode == DBMODE_REF ) {
@@ -70496,14 +72471,14 @@
 			reftype = FILTER_RANGE
 			return
 		}
 		if ( dbmode == DBMODE_REF_SPEC ) {
 			if ( dbspec == DBSPEC_TYPE ) {
-				return FILTER_RANGE
+				return 24000
 			}
 			if ( dbspec == DBSPEC_TYPE_MINOR ) {
-				return FILTER_RANGE_PISTOL
+				return 24020
 			}
 			if ( dbspec == DBSPEC_VALUE_ORG ) {
 				return 25000
 			}
 			if ( dbspec == DBSPEC_PARAM3_ORG ) {
@@ -70549,12 +72524,12 @@
 			inv(INV_ITEM_ID, ci) = ITEM_ID_FIVE_HORNED_HELM
 			inv(INV_ITEM_PIC, ci) = xy2pic(18, 14)
 			reftype = FILTER_HELM
 			reftypeminor = FILTER_HELM_HEAVY
 			inv(INV_ITEM_NUM, ci) = 1
-			fixeditemenc = ENCHANT_SHOW_RELIGION, 100, ENCHANT_EXTRA_MELEE, 200, ENCHANT_EXTRA_RANGED, 150, ENCHANT_REFLECT_DAMAGE, 180, ENCHANT_RES_MUTATION, 100, 0
-			ibitmod ITEM_BIT_PRECIOUS, ci, 1
+			fixeditemenc = 59, 100, 50, 200, 51, 150, 54, 180, 33, 100, 0
+			ibitmod ITEM_BIT_PRECIOUS, ci, TRUE
 			inv(INV_ITEM_IDENTIFY_LEVEL, ci) = 500
 			fixlv = FIX_QUALITY_UNIQUE
 			return
 		}
 		if ( dbmode == DBMODE_REF ) {
@@ -70563,14 +72538,14 @@
 			reftype = FILTER_HELM
 			return
 		}
 		if ( dbmode == DBMODE_REF_SPEC ) {
 			if ( dbspec == DBSPEC_TYPE ) {
-				return FILTER_HELM
+				return 12000
 			}
 			if ( dbspec == DBSPEC_TYPE_MINOR ) {
-				return FILTER_HELM_HEAVY
+				return 12001
 			}
 			if ( dbspec == DBSPEC_VALUE_ORG ) {
 				return 15000
 			}
 			if ( dbspec == DBSPEC_PARAM3_ORG ) {
@@ -70625,14 +72600,14 @@
 			reftype = FILTER_ITEM_FOOD
 			return
 		}
 		if ( dbmode == DBMODE_REF_SPEC ) {
 			if ( dbspec == DBSPEC_TYPE ) {
-				return FILTER_ITEM_FOOD
+				return 57000
 			}
 			if ( dbspec == DBSPEC_TYPE_MINOR ) {
-				return FILTER_NONE
+				return 99999
 			}
 			if ( dbspec == DBSPEC_VALUE_ORG ) {
 				return 800
 			}
 			if ( dbspec == DBSPEC_PARAM3_ORG ) {
@@ -70687,14 +72662,14 @@
 			reftype = FILTER_ITEM_FOOD
 			return
 		}
 		if ( dbmode == DBMODE_REF_SPEC ) {
 			if ( dbspec == DBSPEC_TYPE ) {
-				return FILTER_ITEM_FOOD
+				return 57000
 			}
 			if ( dbspec == DBSPEC_TYPE_MINOR ) {
-				return FILTER_NONE
+				return 99999
 			}
 			if ( dbspec == DBSPEC_VALUE_ORG ) {
 				return 2500
 			}
 			if ( dbspec == DBSPEC_PARAM3_ORG ) {
@@ -70748,14 +72723,14 @@
 			reftype = FILTER_FURNITURE
 			return
 		}
 		if ( dbmode == DBMODE_REF_SPEC ) {
 			if ( dbspec == DBSPEC_TYPE ) {
-				return FILTER_FURNITURE
+				return 60000
 			}
 			if ( dbspec == DBSPEC_TYPE_MINOR ) {
-				return FILTER_NONE
+				return 99999
 			}
 			if ( dbspec == DBSPEC_VALUE_ORG ) {
 				return 3200
 			}
 			if ( dbspec == DBSPEC_PARAM3_ORG ) {
@@ -70809,14 +72784,14 @@
 			reftype = FILTER_FURNITURE
 			return
 		}
 		if ( dbmode == DBMODE_REF_SPEC ) {
 			if ( dbspec == DBSPEC_TYPE ) {
-				return FILTER_FURNITURE
+				return 60000
 			}
 			if ( dbspec == DBSPEC_TYPE_MINOR ) {
-				return FILTER_NONE
+				return 99999
 			}
 			if ( dbspec == DBSPEC_VALUE_ORG ) {
 				return 7800
 			}
 			if ( dbspec == DBSPEC_PARAM3_ORG ) {
@@ -70870,14 +72845,14 @@
 			reftype = FILTER_CONTAINER
 			return
 		}
 		if ( dbmode == DBMODE_REF_SPEC ) {
 			if ( dbspec == DBSPEC_TYPE ) {
-				return FILTER_CONTAINER
+				return 72000
 			}
 			if ( dbspec == DBSPEC_TYPE_MINOR ) {
-				return FILTER_NONE
+				return 99999
 			}
 			if ( dbspec == DBSPEC_VALUE_ORG ) {
 				return 1650
 			}
 			if ( dbspec == DBSPEC_PARAM3_ORG ) {
@@ -70931,14 +72906,14 @@
 			reftype = FILTER_FURNITURE
 			return
 		}
 		if ( dbmode == DBMODE_REF_SPEC ) {
 			if ( dbspec == DBSPEC_TYPE ) {
-				return FILTER_FURNITURE
+				return 60000
 			}
 			if ( dbspec == DBSPEC_TYPE_MINOR ) {
-				return FILTER_NONE
+				return 99999
 			}
 			if ( dbspec == DBSPEC_VALUE_ORG ) {
 				return 150000
 			}
 			if ( dbspec == DBSPEC_PARAM3_ORG ) {
@@ -70992,14 +72967,14 @@
 			reftype = FILTER_FURNITURE
 			return
 		}
 		if ( dbmode == DBMODE_REF_SPEC ) {
 			if ( dbspec == DBSPEC_TYPE ) {
-				return FILTER_FURNITURE
+				return 60000
 			}
 			if ( dbspec == DBSPEC_TYPE_MINOR ) {
-				return FILTER_NONE
+				return 99999
 			}
 			if ( dbspec == DBSPEC_VALUE_ORG ) {
 				return 150000
 			}
 			if ( dbspec == DBSPEC_PARAM3_ORG ) {
@@ -71043,11 +73018,11 @@
 			reftype = FILTER_ITEM_TOOL
 			reftypeminor = FILTER_NOTHING
 			inv(INV_ITEM_NUM, ci) = 1
 			fixeditemenc = 0
 			inv(INV_ITEM_EFFECT, ci) = EFFECT_CREATOR_STATUE
-			ibitmod ITEM_BIT_PRECIOUS, ci, 1
+			ibitmod ITEM_BIT_PRECIOUS, ci, TRUE
 			inv(INV_ITEM_IDENTIFY_LEVEL, ci) = 0
 			return
 		}
 		if ( dbmode == DBMODE_REF ) {
 			ichargelevel = 0
@@ -71055,14 +73030,14 @@
 			reftype = FILTER_ITEM_TOOL
 			return
 		}
 		if ( dbmode == DBMODE_REF_SPEC ) {
 			if ( dbspec == DBSPEC_TYPE ) {
-				return FILTER_ITEM_TOOL
+				return 59000
 			}
 			if ( dbspec == DBSPEC_TYPE_MINOR ) {
-				return FILTER_NONE
+				return 99999
 			}
 			if ( dbspec == DBSPEC_VALUE_ORG ) {
 				return 50
 			}
 			if ( dbspec == DBSPEC_PARAM3_ORG ) {
@@ -71106,12 +73081,12 @@
 			reftype = FILTER_ITEM_TOOL
 			reftypeminor = FILTER_NOTHING
 			inv(INV_ITEM_NUM, ci) = 1
 			fixeditemenc = 0
 			inv(INV_ITEM_EFFECT, ci) = EFFECT_SUMMONING_CRYSTAL
-			ibitmod ITEM_BIT_PRECIOUS, ci, 1
-			ibitmod ITEM_BIT_GUEST_USE, ci, 1
+			ibitmod ITEM_BIT_PRECIOUS, ci, TRUE
+			ibitmod ITEM_BIT_GUEST_USE, ci, TRUE
 			inv(INV_ITEM_IDENTIFY_LEVEL, ci) = 0
 			return
 		}
 		if ( dbmode == DBMODE_REF ) {
 			ichargelevel = 0
@@ -71119,14 +73094,14 @@
 			reftype = FILTER_ITEM_TOOL
 			return
 		}
 		if ( dbmode == DBMODE_REF_SPEC ) {
 			if ( dbspec == DBSPEC_TYPE ) {
-				return FILTER_ITEM_TOOL
+				return 59000
 			}
 			if ( dbspec == DBSPEC_TYPE_MINOR ) {
-				return FILTER_NONE
+				return 99999
 			}
 			if ( dbspec == DBSPEC_VALUE_ORG ) {
 				return 4500
 			}
 			if ( dbspec == DBSPEC_PARAM3_ORG ) {
@@ -71172,11 +73147,11 @@
 			inv(INV_ITEM_PIC, ci) = xy2pic(0, 13)
 			reftype = FILTER_ITEM_BOOK
 			reftypeminor = FILTER_NOTHING
 			inv(INV_ITEM_NUM, ci) = 1
 			fixeditemenc = 0
-			ibitmod ITEM_BIT_PRECIOUS, ci, 1
+			ibitmod ITEM_BIT_PRECIOUS, ci, TRUE
 			inv(INV_ITEM_IDENTIFY_LEVEL, ci) = 0
 			return
 		}
 		if ( dbmode == DBMODE_REF ) {
 			ichargelevel = 0
@@ -71184,14 +73159,14 @@
 			reftype = FILTER_ITEM_BOOK
 			return
 		}
 		if ( dbmode == DBMODE_REF_SPEC ) {
 			if ( dbspec == DBSPEC_TYPE ) {
-				return FILTER_ITEM_BOOK
+				return 55000
 			}
 			if ( dbspec == DBSPEC_TYPE_MINOR ) {
-				return FILTER_NONE
+				return 99999
 			}
 			if ( dbspec == DBSPEC_VALUE_ORG ) {
 				return 15000
 			}
 			if ( dbspec == DBSPEC_PARAM3_ORG ) {
@@ -71255,14 +73230,14 @@
 			reftype = FILTER_ITEM_TOOL
 			return
 		}
 		if ( dbmode == DBMODE_REF_SPEC ) {
 			if ( dbspec == DBSPEC_TYPE ) {
-				return FILTER_ITEM_TOOL
+				return 59000
 			}
 			if ( dbspec == DBSPEC_TYPE_MINOR ) {
-				return FILTER_NONE
+				return 99999
 			}
 			if ( dbspec == DBSPEC_VALUE_ORG ) {
 				return 500
 			}
 			if ( dbspec == DBSPEC_PARAM3_ORG ) {
@@ -71309,11 +73284,11 @@
 			reftype = FILTER_ITEM_TOOL
 			reftypeminor = FILTER_NOTHING
 			inv(INV_ITEM_NUM, ci) = 1
 			fixeditemenc = 0
 			inv(INV_ITEM_EFFECT, ci) = EFFECT_OBJET_OF_HEART
-			ibitmod ITEM_BIT_PRECIOUS, ci, 1
+			ibitmod ITEM_BIT_PRECIOUS, ci, TRUE
 			inv(INV_ITEM_PARAM1, ci) = 626
 			inv(INV_ITEM_IDENTIFY_LEVEL, ci) = 0
 			fixlv = FIX_QUALITY_UNIQUE
 			return
 		}
@@ -71323,14 +73298,14 @@
 			reftype = FILTER_ITEM_TOOL
 			return
 		}
 		if ( dbmode == DBMODE_REF_SPEC ) {
 			if ( dbspec == DBSPEC_TYPE ) {
-				return FILTER_ITEM_TOOL
+				return 59000
 			}
 			if ( dbspec == DBSPEC_TYPE_MINOR ) {
-				return FILTER_NONE
+				return 99999
 			}
 			if ( dbspec == DBSPEC_VALUE_ORG ) {
 				return 30000
 			}
 			if ( dbspec == DBSPEC_PARAM3_ORG ) {
@@ -71373,11 +73348,11 @@
 			inv(INV_ITEM_PIC, ci) = xy2pic(14, 21)
 			reftype = FILTER_CONTAINER
 			reftypeminor = FILTER_NONE
 			inv(INV_ITEM_NUM, ci) = 1
 			fixeditemenc = 0
-			ibitmod ITEM_BIT_PRECIOUS, ci, 1
+			ibitmod ITEM_BIT_PRECIOUS, ci, TRUE
 			inv(INV_ITEM_IDENTIFY_LEVEL, ci) = 0
 			fixlv = FIX_QUALITY_UNIQUE
 			return
 		}
 		if ( dbmode == DBMODE_REF ) {
@@ -71386,14 +73361,14 @@
 			reftype = FILTER_CONTAINER
 			return
 		}
 		if ( dbmode == DBMODE_REF_SPEC ) {
 			if ( dbspec == DBSPEC_TYPE ) {
-				return FILTER_CONTAINER
+				return 72000
 			}
 			if ( dbspec == DBSPEC_TYPE_MINOR ) {
-				return FILTER_NONE
+				return 99999
 			}
 			if ( dbspec == DBSPEC_VALUE_ORG ) {
 				return 2000
 			}
 			if ( dbspec == DBSPEC_PARAM3_ORG ) {
@@ -71439,12 +73414,12 @@
 			inv(INV_ITEM_ID, ci) = ITEM_ID_CARNEADES_PLANK
 			inv(INV_ITEM_PIC, ci) = xy2pic(9, 21)
 			reftype = FILTER_SHIELD
 			reftypeminor = FILTER_SHIELD_SMALL
 			inv(INV_ITEM_NUM, ci) = 1
-			fixeditemenc = ENCHANT_SKILL * EXT_ENCHANTMENT + SKILL_NORMAL_SWIMMING, 450, ENCHANT_IMMUNE_DAMAGE, 400, ENCHANT_ATTRIBUTE * EXT_ENCHANTMENT + SKILL_ATTR_CON, 400, 0
-			ibitmod ITEM_BIT_PRECIOUS, ci, 1
+			fixeditemenc = ENCHANT_SKILL * EXT_ENCHANTMENT + SKILL_NORMAL_SWIMMING, 450, 53, 400, ENCHANT_ATTRIBUTE * EXT_ENCHANTMENT + SKILL_ATTR_CON, 400, 0
+			ibitmod ITEM_BIT_PRECIOUS, ci, TRUE
 			inv(INV_ITEM_IDENTIFY_LEVEL, ci) = 500
 			fixlv = FIX_QUALITY_UNIQUE
 			return
 		}
 		if ( dbmode == DBMODE_REF ) {
@@ -71453,14 +73428,14 @@
 			reftype = FILTER_SHIELD
 			return
 		}
 		if ( dbmode == DBMODE_REF_SPEC ) {
 			if ( dbspec == DBSPEC_TYPE ) {
-				return FILTER_SHIELD
+				return 14000
 			}
 			if ( dbspec == DBSPEC_TYPE_MINOR ) {
-				return FILTER_SHIELD_SMALL
+				return 14003
 			}
 			if ( dbspec == DBSPEC_VALUE_ORG ) {
 				return 7500
 			}
 			if ( dbspec == DBSPEC_PARAM3_ORG ) {
@@ -71503,11 +73478,11 @@
 			inv(INV_ITEM_PIC, ci) = xy2pic(11, 9)
 			reftype = FILTER_ITEM_SCROLL
 			reftypeminor = FILTER_NOTHING
 			inv(INV_ITEM_NUM, ci) = 1
 			fixeditemenc = 0
-			ibitmod ITEM_BIT_PRECIOUS, ci, 1
+			ibitmod ITEM_BIT_PRECIOUS, ci, TRUE
 			inv(INV_ITEM_IDENTIFY_LEVEL, ci) = 0
 			fixlv = FIX_QUALITY_UNIQUE
 			return
 		}
 		if ( dbmode == DBMODE_REF ) {
@@ -71516,14 +73491,14 @@
 			reftype = FILTER_ITEM_SCROLL
 			return
 		}
 		if ( dbmode == DBMODE_REF_SPEC ) {
 			if ( dbspec == DBSPEC_TYPE ) {
-				return FILTER_ITEM_SCROLL
+				return 53000
 			}
 			if ( dbspec == DBSPEC_TYPE_MINOR ) {
-				return FILTER_NONE
+				return 99999
 			}
 			if ( dbspec == DBSPEC_VALUE_ORG ) {
 				return 15000
 			}
 			if ( dbspec == DBSPEC_PARAM3_ORG ) {
@@ -71578,12 +73553,12 @@
 			inv(INV_ITEM_ID, ci) = ITEM_ID_HIRYU_TO
 			inv(INV_ITEM_PIC, ci) = xy2pic(6, 15)
 			reftype = FILTER_WEAPON
 			reftypeminor = FILTER_WEAPON_LONGSWORD
 			inv(INV_ITEM_NUM, ci) = 1
-			fixeditemenc = ENCHANT_RESISTANCE * EXT_ENCHANTMENT + SKILL_RES_FIRE, 550, ENCHANT_ELEMENTAL_DMG * EXT_ENCHANTMENT + SKILL_RES_LIGHTNING, 400, ENCHANT_BANE_DRAGON, 1150, ENCHANT_ATTRIBUTE * EXT_ENCHANTMENT + SKILL_ATTR_CON, 720, 0
-			ibitmod ITEM_BIT_PRECIOUS, ci, 1
+			fixeditemenc = ENCHANT_RESISTANCE * EXT_ENCHANTMENT + SKILL_RES_FIRE, 550, ENCHANT_ELEMENTAL_DMG * EXT_ENCHANTMENT + SKILL_RES_LIGHTNING, 400, 57, 1150, ENCHANT_ATTRIBUTE * EXT_ENCHANTMENT + SKILL_ATTR_CON, 720, 0
+			ibitmod ITEM_BIT_PRECIOUS, ci, TRUE
 			inv(INV_ITEM_IDENTIFY_LEVEL, ci) = 500
 			fixlv = FIX_QUALITY_UNIQUE
 			return
 		}
 		if ( dbmode == DBMODE_REF ) {
@@ -71592,14 +73567,14 @@
 			reftype = FILTER_WEAPON
 			return
 		}
 		if ( dbmode == DBMODE_REF_SPEC ) {
 			if ( dbspec == DBSPEC_TYPE ) {
-				return FILTER_WEAPON
+				return 10000
 			}
 			if ( dbspec == DBSPEC_TYPE_MINOR ) {
-				return FILTER_WEAPON_LONGSWORD
+				return 10002
 			}
 			if ( dbspec == DBSPEC_VALUE_ORG ) {
 				return 40000
 			}
 			if ( dbspec == DBSPEC_PARAM3_ORG ) {
@@ -71644,12 +73619,12 @@
 			inv(INV_ITEM_ID, ci) = ITEM_ID_UNKNOWN_SHELL
 			inv(INV_ITEM_PIC, ci) = xy2pic(14, 1)
 			reftype = FILTER_ACCESSORY_AMULET
 			reftypeminor = FILTER_ACCESSORY_SMALL_AMULET
 			inv(INV_ITEM_NUM, ci) = 1
-			fixeditemenc = ENCHANT_GOD_SIGNALS, 100, ENCHANT_SKILL * EXT_ENCHANTMENT + SKILL_NORMAL_FAITH, 550, ENCHANT_RESISTANCE * EXT_ENCHANTMENT + SKILL_RES_SOUND, 400, 0
-			ibitmod ITEM_BIT_PRECIOUS, ci, 1
+			fixeditemenc = 56, 100, ENCHANT_SKILL * EXT_ENCHANTMENT + SKILL_NORMAL_FAITH, 550, ENCHANT_RESISTANCE * EXT_ENCHANTMENT + SKILL_RES_SOUND, 400, 0
+			ibitmod ITEM_BIT_PRECIOUS, ci, TRUE
 			inv(INV_ITEM_IDENTIFY_LEVEL, ci) = 500
 			fixlv = FIX_QUALITY_UNIQUE
 			return
 		}
 		if ( dbmode == DBMODE_REF ) {
@@ -71658,14 +73633,14 @@
 			reftype = FILTER_ACCESSORY_AMULET
 			return
 		}
 		if ( dbmode == DBMODE_REF_SPEC ) {
 			if ( dbspec == DBSPEC_TYPE ) {
-				return FILTER_ACCESSORY_AMULET
+				return 34000
 			}
 			if ( dbspec == DBSPEC_TYPE_MINOR ) {
-				return FILTER_ACCESSORY_SMALL_AMULET
+				return 34001
 			}
 			if ( dbspec == DBSPEC_VALUE_ORG ) {
 				return 1200
 			}
 			if ( dbspec == DBSPEC_PARAM3_ORG ) {
@@ -71713,12 +73688,12 @@
 			inv(INV_ITEM_ID, ci) = ITEM_ID_FRISIAS_TAIL
 			inv(INV_ITEM_PIC, ci) = xy2pic(29, 12)
 			reftype = FILTER_WEAPON
 			reftypeminor = FILTER_WEAPON_STAVE
 			inv(INV_ITEM_NUM, ci) = 1
-			fixeditemenc = ENCHANT_PROC * EXT_ENCHANTMENT + ENCHANT_PROC_NIGHTMARE, 400, ENCHANT_ELEMENTAL_DMG * EXT_ENCHANTMENT + SKILL_RES_MIND, 850, ENCHANT_ATTRIBUTE * EXT_ENCHANTMENT + SKILL_ATTR_MAG, 34500, ENCHANT_PROC * EXT_ENCHANTMENT + ENCHANT_PROC_DECAPITATION, 100, ENCHANT_RAGNAROK, 100, ENCHANT_PROC * EXT_ENCHANTMENT + ENCHANT_PROC_RAGING_ROAR, 350, 0
-			ibitmod ITEM_BIT_PRECIOUS, ci, 1
+			fixeditemenc = ENCHANT_PROC * EXT_ENCHANTMENT + ENCHANT_PROC_NIGHTMARE, 400, ENCHANT_ELEMENTAL_DMG * EXT_ENCHANTMENT + SKILL_RES_MIND, 850, ENCHANT_ATTRIBUTE * EXT_ENCHANTMENT + SKILL_ATTR_MAG, 34500, ENCHANT_PROC * EXT_ENCHANTMENT + ENCHANT_PROC_DECAPITATION, 100, 37, 100, ENCHANT_PROC * EXT_ENCHANTMENT + ENCHANT_PROC_RAGING_ROAR, 350, 0
+			ibitmod ITEM_BIT_PRECIOUS, ci, TRUE
 			inv(INV_ITEM_IDENTIFY_LEVEL, ci) = 500
 			fixlv = FIX_QUALITY_UNIQUE
 			return
 		}
 		if ( dbmode == DBMODE_REF ) {
@@ -71727,14 +73702,14 @@
 			reftype = FILTER_WEAPON
 			return
 		}
 		if ( dbmode == DBMODE_REF_SPEC ) {
 			if ( dbspec == DBSPEC_TYPE ) {
-				return FILTER_WEAPON
+				return 10000
 			}
 			if ( dbspec == DBSPEC_TYPE_MINOR ) {
-				return FILTER_WEAPON_STAVE
+				return 10006
 			}
 			if ( dbspec == DBSPEC_VALUE_ORG ) {
 				return 30000
 			}
 			if ( dbspec == DBSPEC_PARAM3_ORG ) {
@@ -71789,14 +73764,14 @@
 			reftype = FILTER_ITEM_FOOD
 			return
 		}
 		if ( dbmode == DBMODE_REF_SPEC ) {
 			if ( dbspec == DBSPEC_TYPE ) {
-				return FILTER_ITEM_FOOD
+				return 57000
 			}
 			if ( dbspec == DBSPEC_TYPE_MINOR ) {
-				return FILTER_NONE
+				return 99999
 			}
 			if ( dbspec == DBSPEC_VALUE_ORG ) {
 				return 250
 			}
 			if ( dbspec == DBSPEC_PARAM3_ORG ) {
@@ -71850,14 +73825,14 @@
 			reftype = FILTER_ITEM_SCROLL
 			return
 		}
 		if ( dbmode == DBMODE_REF_SPEC ) {
 			if ( dbspec == DBSPEC_TYPE ) {
-				return FILTER_ITEM_SCROLL
+				return 53000
 			}
 			if ( dbspec == DBSPEC_TYPE_MINOR ) {
-				return FILTER_NONE
+				return 99999
 			}
 			if ( dbspec == DBSPEC_VALUE_ORG ) {
 				return 7500
 			}
 			if ( dbspec == DBSPEC_PARAM3_ORG ) {
@@ -71920,14 +73895,14 @@
 			reftype = FILTER_ITEM_POTION
 			return
 		}
 		if ( dbmode == DBMODE_REF_SPEC ) {
 			if ( dbspec == DBSPEC_TYPE ) {
-				return FILTER_ITEM_POTION
+				return 52000
 			}
 			if ( dbspec == DBSPEC_TYPE_MINOR ) {
-				return FILTER_NONE
+				return 99999
 			}
 			if ( dbspec == DBSPEC_VALUE_ORG ) {
 				return 1500
 			}
 			if ( dbspec == DBSPEC_PARAM3_ORG ) {
@@ -71996,14 +73971,14 @@
 			reftype = FILTER_WEAPON
 			return
 		}
 		if ( dbmode == DBMODE_REF_SPEC ) {
 			if ( dbspec == DBSPEC_TYPE ) {
-				return FILTER_WEAPON
+				return 10000
 			}
 			if ( dbspec == DBSPEC_TYPE_MINOR ) {
-				return FILTER_WEAPON_SICKLE
+				return 10011
 			}
 			if ( dbspec == DBSPEC_VALUE_ORG ) {
 				return 500
 			}
 			if ( dbspec == DBSPEC_PARAM3_ORG ) {
@@ -72057,14 +74032,14 @@
 			reftype = FILTER_CONTAINER
 			return
 		}
 		if ( dbmode == DBMODE_REF_SPEC ) {
 			if ( dbspec == DBSPEC_TYPE ) {
-				return FILTER_CONTAINER
+				return 72000
 			}
 			if ( dbspec == DBSPEC_TYPE_MINOR ) {
-				return FILTER_NONE
+				return 99999
 			}
 			if ( dbspec == DBSPEC_VALUE_ORG ) {
 				return 1200
 			}
 			if ( dbspec == DBSPEC_PARAM3_ORG ) {
@@ -72119,14 +74094,14 @@
 			reftype = FILTER_ITEM_TOOL
 			return
 		}
 		if ( dbmode == DBMODE_REF_SPEC ) {
 			if ( dbspec == DBSPEC_TYPE ) {
-				return FILTER_ITEM_TOOL
+				return 59000
 			}
 			if ( dbspec == DBSPEC_TYPE_MINOR ) {
-				return FILTER_NONE
+				return 99999
 			}
 			if ( dbspec == DBSPEC_VALUE_ORG ) {
 				return 4800
 			}
 			if ( dbspec == DBSPEC_PARAM3_ORG ) {
@@ -72170,26 +74145,26 @@
 			reftype = FILTER_ITEM_SPELLBOOK
 			reftypeminor = FILTER_NOTHING
 			inv(INV_ITEM_NUM, ci) = 1
 			fixeditemenc = 0
 			inv(INV_ITEM_IDENTIFY_LEVEL, ci) = 0
-			inv(INV_ITEM_CHARGE, ci) = 1 + rnd(1) - rnd(1)
-			ibitmod ITEM_BIT_CHARGE_ITEM, ci, 1
+			inv((9 /*!!!@[INV_ITEM_AMMO @@@ INV_ITEM_CHARGE @@@ INV_ITEM_CLIENT @@@ INV_ITEM_FILE @@@ INV_ITEM_NEXT_PERIOD]@!!! */), ci) = 1 + rnd(1) - rnd(1)
+			ibitmod ITEM_BIT_CHARGE_ITEM, ci, TRUE
 			return
 		}
 		if ( dbmode == DBMODE_REF ) {
 			ichargelevel = 1
 			infilterref = ""
 			reftype = FILTER_ITEM_SPELLBOOK
 			return
 		}
 		if ( dbmode == DBMODE_REF_SPEC ) {
 			if ( dbspec == DBSPEC_TYPE ) {
-				return FILTER_ITEM_SPELLBOOK
+				return 54000
 			}
 			if ( dbspec == DBSPEC_TYPE_MINOR ) {
-				return FILTER_NONE
+				return 99999
 			}
 			if ( dbspec == DBSPEC_VALUE_ORG ) {
 				return 2000
 			}
 			if ( dbspec == DBSPEC_PARAM3_ORG ) {
@@ -72242,26 +74217,26 @@
 			reftype = FILTER_ITEM_SPELLBOOK
 			reftypeminor = FILTER_NOTHING
 			inv(INV_ITEM_NUM, ci) = 1
 			fixeditemenc = 0
 			inv(INV_ITEM_IDENTIFY_LEVEL, ci) = 0
-			inv(INV_ITEM_CHARGE, ci) = 3 + rnd(3) - rnd(3)
-			ibitmod ITEM_BIT_CHARGE_ITEM, ci, 1
+			inv((9 /*!!!@[INV_ITEM_AMMO @@@ INV_ITEM_CHARGE @@@ INV_ITEM_CLIENT @@@ INV_ITEM_FILE @@@ INV_ITEM_NEXT_PERIOD]@!!! */), ci) = 3 + rnd(3) - rnd(3)
+			ibitmod ITEM_BIT_CHARGE_ITEM, ci, TRUE
 			return
 		}
 		if ( dbmode == DBMODE_REF ) {
 			ichargelevel = 3
 			infilterref = ""
 			reftype = FILTER_ITEM_SPELLBOOK
 			return
 		}
 		if ( dbmode == DBMODE_REF_SPEC ) {
 			if ( dbspec == DBSPEC_TYPE ) {
-				return FILTER_ITEM_SPELLBOOK
+				return 54000
 			}
 			if ( dbspec == DBSPEC_TYPE_MINOR ) {
-				return FILTER_NONE
+				return 99999
 			}
 			if ( dbspec == DBSPEC_VALUE_ORG ) {
 				return 4200
 			}
 			if ( dbspec == DBSPEC_PARAM3_ORG ) {
@@ -72313,11 +74288,11 @@
 			inv(INV_ITEM_PIC, ci) = xy2pic(10, 16)
 			reftype = FILTER_ORE
 			reftypeminor = FILTER_NOTHING
 			inv(INV_ITEM_NUM, ci) = 1
 			fixeditemenc = 0
-			ibitmod ITEM_BIT_PRECIOUS, ci, 1
+			ibitmod ITEM_BIT_PRECIOUS, ci, TRUE
 			inv(INV_ITEM_IDENTIFY_LEVEL, ci) = 0
 			return
 		}
 		if ( dbmode == DBMODE_REF ) {
 			ichargelevel = 0
@@ -72325,14 +74300,14 @@
 			reftype = FILTER_ORE
 			return
 		}
 		if ( dbmode == DBMODE_REF_SPEC ) {
 			if ( dbspec == DBSPEC_TYPE ) {
-				return FILTER_ORE
+				return 77000
 			}
 			if ( dbspec == DBSPEC_TYPE_MINOR ) {
-				return FILTER_NONE
+				return 99999
 			}
 			if ( dbspec == DBSPEC_VALUE_ORG ) {
 				return 1
 			}
 			if ( dbspec == DBSPEC_PARAM3_ORG ) {
@@ -72386,14 +74361,14 @@
 			reftype = FILTER_FURNITURE
 			return
 		}
 		if ( dbmode == DBMODE_REF_SPEC ) {
 			if ( dbspec == DBSPEC_TYPE ) {
-				return FILTER_FURNITURE
+				return 60000
 			}
 			if ( dbspec == DBSPEC_TYPE_MINOR ) {
-				return FILTER_NONE
+				return 99999
 			}
 			if ( dbspec == DBSPEC_VALUE_ORG ) {
 				return 2500
 			}
 			if ( dbspec == DBSPEC_PARAM3_ORG ) {
@@ -72438,12 +74413,12 @@
 			inv(INV_ITEM_ID, ci) = ITEM_ID_CRIMSON_PLATE
 			inv(INV_ITEM_PIC, ci) = xy2pic(12, 14)
 			reftype = FILTER_GIRDLE
 			reftypeminor = FILTER_GIRDLE_MEDIUM
 			inv(INV_ITEM_NUM, ci) = 1
-			fixeditemenc = ENCHANT_CURE_BLEEDING, 100, ENCHANT_RESISTANCE * EXT_ENCHANTMENT + SKILL_RES_NETHER, 450, ENCHANT_RESISTANCE * EXT_ENCHANTMENT + SKILL_RES_FIRE, 350, 0
-			ibitmod ITEM_BIT_PRECIOUS, ci, 1
+			fixeditemenc = 55, 100, ENCHANT_RESISTANCE * EXT_ENCHANTMENT + SKILL_RES_NETHER, 450, ENCHANT_RESISTANCE * EXT_ENCHANTMENT + SKILL_RES_FIRE, 350, 0
+			ibitmod ITEM_BIT_PRECIOUS, ci, TRUE
 			inv(INV_ITEM_IDENTIFY_LEVEL, ci) = 500
 			fixlv = FIX_QUALITY_UNIQUE
 			return
 		}
 		if ( dbmode == DBMODE_REF ) {
@@ -72452,14 +74427,14 @@
 			reftype = FILTER_GIRDLE
 			return
 		}
 		if ( dbmode == DBMODE_REF_SPEC ) {
 			if ( dbspec == DBSPEC_TYPE ) {
-				return FILTER_GIRDLE
+				return 19000
 			}
 			if ( dbspec == DBSPEC_TYPE_MINOR ) {
-				return FILTER_GIRDLE_MEDIUM
+				return 19001
 			}
 			if ( dbspec == DBSPEC_VALUE_ORG ) {
 				return 15000
 			}
 			if ( dbspec == DBSPEC_PARAM3_ORG ) {
@@ -72505,12 +74480,12 @@
 			inv(INV_ITEM_ID, ci) = ITEM_ID_SHIELD_OF_THORNS
 			inv(INV_ITEM_PIC, ci) = xy2pic(24, 13)
 			reftype = FILTER_SHIELD
 			reftypeminor = FILTER_SHIELD_SMALL
 			inv(INV_ITEM_NUM, ci) = 1
-			fixeditemenc = ENCHANT_REFLECT_DAMAGE, 1000, ENCHANT_RESISTANCE * EXT_ENCHANTMENT + SKILL_RES_NERVE, 450, 0
-			ibitmod ITEM_BIT_PRECIOUS, ci, 1
+			fixeditemenc = 54, 1000, ENCHANT_RESISTANCE * EXT_ENCHANTMENT + SKILL_RES_NERVE, 450, 0
+			ibitmod ITEM_BIT_PRECIOUS, ci, TRUE
 			inv(INV_ITEM_IDENTIFY_LEVEL, ci) = 500
 			fixlv = FIX_QUALITY_UNIQUE
 			return
 		}
 		if ( dbmode == DBMODE_REF ) {
@@ -72519,14 +74494,14 @@
 			reftype = FILTER_SHIELD
 			return
 		}
 		if ( dbmode == DBMODE_REF_SPEC ) {
 			if ( dbspec == DBSPEC_TYPE ) {
-				return FILTER_SHIELD
+				return 14000
 			}
 			if ( dbspec == DBSPEC_TYPE_MINOR ) {
-				return FILTER_SHIELD_SMALL
+				return 14003
 			}
 			if ( dbspec == DBSPEC_VALUE_ORG ) {
 				return 17500
 			}
 			if ( dbspec == DBSPEC_PARAM3_ORG ) {
@@ -72572,12 +74547,12 @@
 			inv(INV_ITEM_ID, ci) = ITEM_ID_ALUD
 			inv(INV_ITEM_PIC, ci) = xy2pic(30, 11)
 			reftype = FILTER_SHIELD
 			reftypeminor = FILTER_SHIELD_SMALL
 			inv(INV_ITEM_NUM, ci) = 1
-			fixeditemenc = ENCHANT_SKILL * EXT_ENCHANTMENT + SKILL_NORMAL_PERFORMER, -450, ENCHANT_RES_PHYSICAL, 400, ENCHANT_IMMUNE_DAMAGE, 400, 0
-			ibitmod ITEM_BIT_PRECIOUS, ci, 1
+			fixeditemenc = ENCHANT_SKILL * EXT_ENCHANTMENT + SKILL_NORMAL_PERFORMER, -450, 52, 400, 53, 400, 0
+			ibitmod ITEM_BIT_PRECIOUS, ci, TRUE
 			inv(INV_ITEM_IDENTIFY_LEVEL, ci) = 500
 			fixlv = FIX_QUALITY_UNIQUE
 			return
 		}
 		if ( dbmode == DBMODE_REF ) {
@@ -72586,14 +74561,14 @@
 			reftype = FILTER_SHIELD
 			return
 		}
 		if ( dbmode == DBMODE_REF_SPEC ) {
 			if ( dbspec == DBSPEC_TYPE ) {
-				return FILTER_SHIELD
+				return 14000
 			}
 			if ( dbspec == DBSPEC_TYPE_MINOR ) {
-				return FILTER_SHIELD_SMALL
+				return 14003
 			}
 			if ( dbspec == DBSPEC_VALUE_ORG ) {
 				return 7500
 			}
 			if ( dbspec == DBSPEC_PARAM3_ORG ) {
@@ -72640,12 +74615,12 @@
 			inv(INV_ITEM_ID, ci) = ITEM_ID_KILL_KILL_PIANO
 			inv(INV_ITEM_PIC, ci) = xy2pic(10, 2)
 			reftype = FILTER_RANGE
 			reftypeminor = FILTER_RANGE_ROCK_THROW
 			inv(INV_ITEM_NUM, ci) = 1
-			fixeditemenc = ENCHANT_ELEMENTAL_DMG * EXT_ENCHANTMENT + SKILL_RES_CHAOS, 400, ENCHANT_SKILL * EXT_ENCHANTMENT + SKILL_NORMAL_PERFORMER, -700, ENCHANT_CRIT_CHANCE, 450, 0
-			ibitmod ITEM_BIT_PRECIOUS, ci, 1
+			fixeditemenc = ENCHANT_ELEMENTAL_DMG * EXT_ENCHANTMENT + SKILL_RES_CHAOS, 400, ENCHANT_SKILL * EXT_ENCHANTMENT + SKILL_NORMAL_PERFORMER, -700, 44, 450, 0
+			ibitmod ITEM_BIT_PRECIOUS, ci, TRUE
 			inv(INV_ITEM_IDENTIFY_LEVEL, ci) = 500
 			fixlv = FIX_QUALITY_UNIQUE
 			return
 		}
 		if ( dbmode == DBMODE_REF ) {
@@ -72654,14 +74629,14 @@
 			reftype = FILTER_RANGE
 			return
 		}
 		if ( dbmode == DBMODE_REF_SPEC ) {
 			if ( dbspec == DBSPEC_TYPE ) {
-				return FILTER_RANGE
+				return 24000
 			}
 			if ( dbspec == DBSPEC_TYPE_MINOR ) {
-				return FILTER_RANGE_ROCK_THROW
+				return 24030
 			}
 			if ( dbspec == DBSPEC_VALUE_ORG ) {
 				return 25000
 			}
 			if ( dbspec == DBSPEC_PARAM3_ORG ) {
@@ -72704,11 +74679,11 @@
 			inv(INV_ITEM_PIC, ci) = xy2pic(10, 16)
 			reftype = FILTER_ORE
 			reftypeminor = FILTER_NOTHING
 			inv(INV_ITEM_NUM, ci) = 1
 			fixeditemenc = 0
-			ibitmod ITEM_BIT_PRECIOUS, ci, 1
+			ibitmod ITEM_BIT_PRECIOUS, ci, TRUE
 			inv(INV_ITEM_IDENTIFY_LEVEL, ci) = 0
 			return
 		}
 		if ( dbmode == DBMODE_REF ) {
 			ichargelevel = 0
@@ -72716,14 +74691,14 @@
 			reftype = FILTER_ORE
 			return
 		}
 		if ( dbmode == DBMODE_REF_SPEC ) {
 			if ( dbspec == DBSPEC_TYPE ) {
-				return FILTER_ORE
+				return 77000
 			}
 			if ( dbspec == DBSPEC_TYPE_MINOR ) {
-				return FILTER_NONE
+				return 99999
 			}
 			if ( dbspec == DBSPEC_VALUE_ORG ) {
 				return 1
 			}
 			if ( dbspec == DBSPEC_PARAM3_ORG ) {
@@ -72767,12 +74742,12 @@
 			inv(INV_ITEM_ID, ci) = ITEM_ID_TWIN_EDGE
 			inv(INV_ITEM_PIC, ci) = xy2pic(15, 1)
 			reftype = FILTER_ACCESSORY_AMULET
 			reftypeminor = FILTER_ACCESSORY_SMALL_AMULET
 			inv(INV_ITEM_NUM, ci) = 1
-			fixeditemenc = ENCHANT_EXTRA_MELEE, 600, ENCHANT_SKILL * EXT_ENCHANTMENT + SKILL_NORMAL_DUAL_WIELD, 650, 0
-			ibitmod ITEM_BIT_PRECIOUS, ci, 1
+			fixeditemenc = 50, 600, ENCHANT_SKILL * EXT_ENCHANTMENT + SKILL_NORMAL_DUAL_WIELD, 650, 0
+			ibitmod ITEM_BIT_PRECIOUS, ci, TRUE
 			inv(INV_ITEM_IDENTIFY_LEVEL, ci) = 500
 			fixlv = FIX_QUALITY_UNIQUE
 			return
 		}
 		if ( dbmode == DBMODE_REF ) {
@@ -72781,14 +74756,14 @@
 			reftype = FILTER_ACCESSORY_AMULET
 			return
 		}
 		if ( dbmode == DBMODE_REF_SPEC ) {
 			if ( dbspec == DBSPEC_TYPE ) {
-				return FILTER_ACCESSORY_AMULET
+				return 34000
 			}
 			if ( dbspec == DBSPEC_TYPE_MINOR ) {
-				return FILTER_ACCESSORY_SMALL_AMULET
+				return 34001
 			}
 			if ( dbspec == DBSPEC_VALUE_ORG ) {
 				return 9500
 			}
 			if ( dbspec == DBSPEC_PARAM3_ORG ) {
@@ -72832,12 +74807,12 @@
 			inv(INV_ITEM_ID, ci) = ITEM_ID_ARBALEST
 			inv(INV_ITEM_PIC, ci) = xy2pic(6, 26)
 			reftype = FILTER_ACCESSORY_AMULET
 			reftypeminor = FILTER_ACCESSORY_SMALL_AMULET
 			inv(INV_ITEM_NUM, ci) = 1
-			fixeditemenc = ENCHANT_EXTRA_RANGED, 600, ENCHANT_SKILL * EXT_ENCHANTMENT + SKILL_WEAPON_CROSSBOW, 700, 0
-			ibitmod ITEM_BIT_PRECIOUS, ci, 1
+			fixeditemenc = 51, 600, ENCHANT_SKILL * EXT_ENCHANTMENT + SKILL_WEAPON_CROSSBOW, 700, 0
+			ibitmod ITEM_BIT_PRECIOUS, ci, TRUE
 			inv(INV_ITEM_IDENTIFY_LEVEL, ci) = 500
 			fixlv = FIX_QUALITY_UNIQUE
 			return
 		}
 		if ( dbmode == DBMODE_REF ) {
@@ -72846,14 +74821,14 @@
 			reftype = FILTER_ACCESSORY_AMULET
 			return
 		}
 		if ( dbmode == DBMODE_REF_SPEC ) {
 			if ( dbspec == DBSPEC_TYPE ) {
-				return FILTER_ACCESSORY_AMULET
+				return 34000
 			}
 			if ( dbspec == DBSPEC_TYPE_MINOR ) {
-				return FILTER_ACCESSORY_SMALL_AMULET
+				return 34001
 			}
 			if ( dbspec == DBSPEC_VALUE_ORG ) {
 				return 9500
 			}
 			if ( dbspec == DBSPEC_PARAM3_ORG ) {
@@ -72897,12 +74872,12 @@
 			reftype = FILTER_ITEM_TOOL
 			reftypeminor = FILTER_NOTHING
 			inv(INV_ITEM_NUM, ci) = 1
 			fixeditemenc = 0
 			inv(INV_ITEM_EFFECT, ci) = EFFECT_EHEKATL_STATUE
-			ibitmod ITEM_BIT_PRECIOUS, ci, 1
-			ibitmod ITEM_BIT_PERIOD, ci, 1
+			ibitmod ITEM_BIT_PRECIOUS, ci, TRUE
+			ibitmod ITEM_BIT_PERIOD, ci, TRUE
 			inv(INV_ITEM_PARAM3, ci) = 480
 			inv(INV_ITEM_IDENTIFY_LEVEL, ci) = 0
 			fixlv = FIX_QUALITY_UNIQUE
 			return
 		}
@@ -72912,14 +74887,14 @@
 			reftype = FILTER_ITEM_TOOL
 			return
 		}
 		if ( dbmode == DBMODE_REF_SPEC ) {
 			if ( dbspec == DBSPEC_TYPE ) {
-				return FILTER_ITEM_TOOL
+				return 59000
 			}
 			if ( dbspec == DBSPEC_TYPE_MINOR ) {
-				return FILTER_NONE
+				return 99999
 			}
 			if ( dbspec == DBSPEC_VALUE_ORG ) {
 				return 100000
 			}
 			if ( dbspec == DBSPEC_PARAM3_ORG ) {
@@ -72974,14 +74949,14 @@
 			reftype = FILTER_FURNITURE
 			return
 		}
 		if ( dbmode == DBMODE_REF_SPEC ) {
 			if ( dbspec == DBSPEC_TYPE ) {
-				return FILTER_FURNITURE
+				return 60000
 			}
 			if ( dbspec == DBSPEC_TYPE_MINOR ) {
-				return FILTER_FURNITURE_BED
+				return 60004
 			}
 			if ( dbspec == DBSPEC_VALUE_ORG ) {
 				return 25000
 			}
 			if ( dbspec == DBSPEC_PARAM3_ORG ) {
@@ -73032,12 +75007,12 @@
 			inv(INV_ITEM_ID, ci) = ITEM_ID_CLAYMORE2
 			inv(INV_ITEM_PIC, ci) = xy2pic(5, 21)
 			reftype = FILTER_WEAPON
 			reftypeminor = FILTER_WEAPON_HEAVY_SWORD
 			inv(INV_ITEM_NUM, ci) = 1
-			fixeditemenc = ENCHANT_CRIT_CHANCE, 250, ENCHANT_PIERCING_CHANCE, 200, ENCHANT_RES_MUTATION, 100, 0
-			ibitmod ITEM_BIT_PRECIOUS, ci, 1
+			fixeditemenc = 44, 250, 39, 200, 33, 100, 0
+			ibitmod ITEM_BIT_PRECIOUS, ci, TRUE
 			inv(INV_ITEM_IDENTIFY_LEVEL, ci) = 500
 			fixlv = FIX_QUALITY_UNIQUE
 			return
 		}
 		if ( dbmode == DBMODE_REF ) {
@@ -73046,14 +75021,14 @@
 			reftype = FILTER_WEAPON
 			return
 		}
 		if ( dbmode == DBMODE_REF_SPEC ) {
 			if ( dbspec == DBSPEC_TYPE ) {
-				return FILTER_WEAPON
+				return 10000
 			}
 			if ( dbspec == DBSPEC_TYPE_MINOR ) {
-				return FILTER_WEAPON_HEAVY_SWORD
+				return 10001
 			}
 			if ( dbspec == DBSPEC_VALUE_ORG ) {
 				return 45000
 			}
 			if ( dbspec == DBSPEC_PARAM3_ORG ) {
@@ -73101,12 +75076,12 @@
 			inv(INV_ITEM_ID, ci) = ITEM_ID_SHENAS_PANTY
 			inv(INV_ITEM_PIC, ci) = xy2pic(3, 19)
 			reftype = FILTER_RANGE
 			reftypeminor = FILTER_RANGE_ROCK_THROW
 			inv(INV_ITEM_NUM, ci) = 1
-			fixeditemenc = ENCHANT_TIME_STOP, 350, ENCHANT_ELEMENTAL_DMG * EXT_ENCHANTMENT + SKILL_RES_MIND, 1200, ENCHANT_ATTRIBUTE * EXT_ENCHANTMENT + SKILL_ATTR_CHA, 450, ENCHANT_RES_PREGNANCY, 100, ENCHANT_RES_ETHERWIND, 500, 0
-			ibitmod ITEM_BIT_PRECIOUS, ci, 1
+			fixeditemenc = 40, 350, ENCHANT_ELEMENTAL_DMG * EXT_ENCHANTMENT + SKILL_RES_MIND, 1200, ENCHANT_ATTRIBUTE * EXT_ENCHANTMENT + SKILL_ATTR_CHA, 450, 48, 100, 30, 500, 0
+			ibitmod ITEM_BIT_PRECIOUS, ci, TRUE
 			inv(INV_ITEM_IDENTIFY_LEVEL, ci) = 500
 			fixlv = FIX_QUALITY_UNIQUE
 			return
 		}
 		if ( dbmode == DBMODE_REF ) {
@@ -73115,14 +75090,14 @@
 			reftype = FILTER_RANGE
 			return
 		}
 		if ( dbmode == DBMODE_REF_SPEC ) {
 			if ( dbspec == DBSPEC_TYPE ) {
-				return FILTER_RANGE
+				return 24000
 			}
 			if ( dbspec == DBSPEC_TYPE_MINOR ) {
-				return FILTER_RANGE_ROCK_THROW
+				return 24030
 			}
 			if ( dbspec == DBSPEC_VALUE_ORG ) {
 				return 94000
 			}
 			if ( dbspec == DBSPEC_PARAM3_ORG ) {
@@ -73177,14 +75152,14 @@
 			reftype = FILTER_ITEM_TOOL
 			return
 		}
 		if ( dbmode == DBMODE_REF_SPEC ) {
 			if ( dbspec == DBSPEC_TYPE ) {
-				return FILTER_ITEM_TOOL
+				return 59000
 			}
 			if ( dbspec == DBSPEC_TYPE_MINOR ) {
-				return FILTER_NONE
+				return 99999
 			}
 			if ( dbspec == DBSPEC_VALUE_ORG ) {
 				return 6800
 			}
 			if ( dbspec == DBSPEC_PARAM3_ORG ) {
@@ -73231,11 +75206,11 @@
 			inv(INV_ITEM_PIC, ci) = xy2pic(28, 12)
 			reftype = FILTER_RANGE
 			reftypeminor = FILTER_RANGE_ROCK_THROW
 			inv(INV_ITEM_NUM, ci) = 1
 			fixeditemenc = ENCHANT_ATTRIBUTE * EXT_ENCHANTMENT + SKILL_ATTR_WIL, 300, 0
-			ibitmod ITEM_BIT_PRECIOUS, ci, 1
+			ibitmod ITEM_BIT_PRECIOUS, ci, TRUE
 			inv(INV_ITEM_IDENTIFY_LEVEL, ci) = 500
 			fixlv = FIX_QUALITY_UNIQUE
 			return
 		}
 		if ( dbmode == DBMODE_REF ) {
@@ -73244,14 +75219,14 @@
 			reftype = FILTER_RANGE
 			return
 		}
 		if ( dbmode == DBMODE_REF_SPEC ) {
 			if ( dbspec == DBSPEC_TYPE ) {
-				return FILTER_RANGE
+				return 24000
 			}
 			if ( dbspec == DBSPEC_TYPE_MINOR ) {
-				return FILTER_RANGE_ROCK_THROW
+				return 24030
 			}
 			if ( dbspec == DBSPEC_VALUE_ORG ) {
 				return 9500
 			}
 			if ( dbspec == DBSPEC_PARAM3_ORG ) {
@@ -73306,14 +75281,14 @@
 			reftype = FILTER_ITEM_TOOL
 			return
 		}
 		if ( dbmode == DBMODE_REF_SPEC ) {
 			if ( dbspec == DBSPEC_TYPE ) {
-				return FILTER_ITEM_TOOL
+				return 59000
 			}
 			if ( dbspec == DBSPEC_TYPE_MINOR ) {
-				return FILTER_NONE
+				return 99999
 			}
 			if ( dbspec == DBSPEC_VALUE_ORG ) {
 				return 6800
 			}
 			if ( dbspec == DBSPEC_PARAM3_ORG ) {
@@ -73371,14 +75346,14 @@
 			reftype = FILTER_RANGE
 			return
 		}
 		if ( dbmode == DBMODE_REF_SPEC ) {
 			if ( dbspec == DBSPEC_TYPE ) {
-				return FILTER_RANGE
+				return 24000
 			}
 			if ( dbspec == DBSPEC_TYPE_MINOR ) {
-				return FILTER_RANGE_ROCK_THROW
+				return 24030
 			}
 			if ( dbspec == DBSPEC_VALUE_ORG ) {
 				return 1200
 			}
 			if ( dbspec == DBSPEC_PARAM3_ORG ) {
@@ -73437,14 +75412,14 @@
 			reftype = FILTER_RANGE
 			return
 		}
 		if ( dbmode == DBMODE_REF_SPEC ) {
 			if ( dbspec == DBSPEC_TYPE ) {
-				return FILTER_RANGE
+				return 24000
 			}
 			if ( dbspec == DBSPEC_TYPE_MINOR ) {
-				return FILTER_RANGE_ROCK_THROW
+				return 24030
 			}
 			if ( dbspec == DBSPEC_VALUE_ORG ) {
 				return 1200
 			}
 			if ( dbspec == DBSPEC_PARAM3_ORG ) {
@@ -73498,14 +75473,14 @@
 			reftype = FILTER_ITEM_SCROLL
 			return
 		}
 		if ( dbmode == DBMODE_REF_SPEC ) {
 			if ( dbspec == DBSPEC_TYPE ) {
-				return FILTER_ITEM_SCROLL
+				return 53000
 			}
 			if ( dbspec == DBSPEC_TYPE_MINOR ) {
-				return FILTER_ITEM_DEED
+				return 53100
 			}
 			if ( dbspec == DBSPEC_VALUE_ORG ) {
 				return 500000
 			}
 			if ( dbspec == DBSPEC_PARAM3_ORG ) {
@@ -73566,14 +75541,14 @@
 			reftype = FILTER_ITEM_POTION
 			return
 		}
 		if ( dbmode == DBMODE_REF_SPEC ) {
 			if ( dbspec == DBSPEC_TYPE ) {
-				return FILTER_ITEM_POTION
+				return 52000
 			}
 			if ( dbspec == DBSPEC_TYPE_MINOR ) {
-				return FILTER_NONE
+				return 99999
 			}
 			if ( dbspec == DBSPEC_VALUE_ORG ) {
 				return 12000
 			}
 			if ( dbspec == DBSPEC_PARAM3_ORG ) {
@@ -73626,26 +75601,26 @@
 			reftype = FILTER_ITEM_SPELLBOOK
 			reftypeminor = FILTER_NOTHING
 			inv(INV_ITEM_NUM, ci) = 1
 			fixeditemenc = 0
 			inv(INV_ITEM_IDENTIFY_LEVEL, ci) = 0
-			inv(INV_ITEM_CHARGE, ci) = 3 + rnd(3) - rnd(3)
-			ibitmod ITEM_BIT_CHARGE_ITEM, ci, 1
+			inv((9 /*!!!@[INV_ITEM_AMMO @@@ INV_ITEM_CHARGE @@@ INV_ITEM_CLIENT @@@ INV_ITEM_FILE @@@ INV_ITEM_NEXT_PERIOD]@!!! */), ci) = 3 + rnd(3) - rnd(3)
+			ibitmod ITEM_BIT_CHARGE_ITEM, ci, TRUE
 			return
 		}
 		if ( dbmode == DBMODE_REF ) {
 			ichargelevel = 3
 			infilterref = ""
 			reftype = FILTER_ITEM_SPELLBOOK
 			return
 		}
 		if ( dbmode == DBMODE_REF_SPEC ) {
 			if ( dbspec == DBSPEC_TYPE ) {
-				return FILTER_ITEM_SPELLBOOK
+				return 54000
 			}
 			if ( dbspec == DBSPEC_TYPE_MINOR ) {
-				return FILTER_NONE
+				return 99999
 			}
 			if ( dbspec == DBSPEC_VALUE_ORG ) {
 				return 4200
 			}
 			if ( dbspec == DBSPEC_PARAM3_ORG ) {
@@ -73708,14 +75683,14 @@
 			reftype = FILTER_ITEM_SCROLL
 			return
 		}
 		if ( dbmode == DBMODE_REF_SPEC ) {
 			if ( dbspec == DBSPEC_TYPE ) {
-				return FILTER_ITEM_SCROLL
+				return 53000
 			}
 			if ( dbspec == DBSPEC_TYPE_MINOR ) {
-				return FILTER_NONE
+				return 99999
 			}
 			if ( dbspec == DBSPEC_VALUE_ORG ) {
 				return 3500
 			}
 			if ( dbspec == DBSPEC_PARAM3_ORG ) {
@@ -73778,14 +75753,14 @@
 			reftype = FILTER_ITEM_BOOK
 			return
 		}
 		if ( dbmode == DBMODE_REF_SPEC ) {
 			if ( dbspec == DBSPEC_TYPE ) {
-				return FILTER_ITEM_BOOK
+				return 55000
 			}
 			if ( dbspec == DBSPEC_TYPE_MINOR ) {
-				return FILTER_NONE
+				return 99999
 			}
 			if ( dbspec == DBSPEC_VALUE_ORG ) {
 				return 6000
 			}
 			if ( dbspec == DBSPEC_PARAM3_ORG ) {
@@ -73837,13 +75812,13 @@
 			inv(INV_ITEM_ID, ci) = ITEM_ID_STRADIVARIUS
 			inv(INV_ITEM_PIC, ci) = xy2pic(6, 21)
 			reftype = FILTER_FURNITURE
 			reftypeminor = FILTER_FURNITURE_INSTRUMENT
 			inv(INV_ITEM_NUM, ci) = 1
-			fixeditemenc = ENCHANT_REWARD_QUALITY, 100, 0
+			fixeditemenc = 49, 100, 0
 			inv(INV_ITEM_EFFECT, ci) = EFFECT_PERFORM
-			ibitmod ITEM_BIT_PRECIOUS, ci, 1
+			ibitmod ITEM_BIT_PRECIOUS, ci, TRUE
 			inv(INV_ITEM_PARAM1, ci) = 180
 			inv(INV_ITEM_IDENTIFY_LEVEL, ci) = 0
 			fixlv = FIX_QUALITY_UNIQUE
 			return
 		}
@@ -73853,14 +75828,14 @@
 			reftype = FILTER_FURNITURE
 			return
 		}
 		if ( dbmode == DBMODE_REF_SPEC ) {
 			if ( dbspec == DBSPEC_TYPE ) {
-				return FILTER_FURNITURE
+				return 60000
 			}
 			if ( dbspec == DBSPEC_TYPE_MINOR ) {
-				return FILTER_FURNITURE_INSTRUMENT
+				return 60005
 			}
 			if ( dbspec == DBSPEC_VALUE_ORG ) {
 				return 35000
 			}
 			if ( dbspec == DBSPEC_PARAM3_ORG ) {
@@ -73914,14 +75889,14 @@
 			reftype = FILTER_ITEM_POTION
 			return
 		}
 		if ( dbmode == DBMODE_REF_SPEC ) {
 			if ( dbspec == DBSPEC_TYPE ) {
-				return FILTER_ITEM_POTION
+				return 52000
 			}
 			if ( dbspec == DBSPEC_TYPE_MINOR ) {
-				return FILTER_NONE
+				return 99999
 			}
 			if ( dbspec == DBSPEC_VALUE_ORG ) {
 				return 4500
 			}
 			if ( dbspec == DBSPEC_PARAM3_ORG ) {
@@ -73974,12 +75949,12 @@
 			inv(INV_ITEM_ID, ci) = ITEM_ID_BEGGARS_PENDANT
 			inv(INV_ITEM_PIC, ci) = xy2pic(7, 26)
 			reftype = FILTER_ACCESSORY_AMULET
 			reftypeminor = FILTER_ACCESSORY_SMALL_AMULET
 			inv(INV_ITEM_NUM, ci) = 1
-			fixeditemenc = ENCHANT_RES_PREGNANCY, 100, ENCHANT_ATTRIBUTE * EXT_ENCHANTMENT + SKILL_ATTR_CHA, 450, ENCHANT_RES_STEAL, 100, 0
-			ibitmod ITEM_BIT_PRECIOUS, ci, 1
+			fixeditemenc = 48, 100, ENCHANT_ATTRIBUTE * EXT_ENCHANTMENT + SKILL_ATTR_CHA, 450, 41, 100, 0
+			ibitmod ITEM_BIT_PRECIOUS, ci, TRUE
 			inv(INV_ITEM_IDENTIFY_LEVEL, ci) = 500
 			fixlv = FIX_QUALITY_UNIQUE
 			return
 		}
 		if ( dbmode == DBMODE_REF ) {
@@ -73988,14 +75963,14 @@
 			reftype = FILTER_ACCESSORY_AMULET
 			return
 		}
 		if ( dbmode == DBMODE_REF_SPEC ) {
 			if ( dbspec == DBSPEC_TYPE ) {
-				return FILTER_ACCESSORY_AMULET
+				return 34000
 			}
 			if ( dbspec == DBSPEC_TYPE_MINOR ) {
-				return FILTER_ACCESSORY_SMALL_AMULET
+				return 34001
 			}
 			if ( dbspec == DBSPEC_VALUE_ORG ) {
 				return 50
 			}
 			if ( dbspec == DBSPEC_PARAM3_ORG ) {
@@ -74049,14 +76024,14 @@
 			reftype = FILTER_ITEM_POTION
 			return
 		}
 		if ( dbmode == DBMODE_REF_SPEC ) {
 			if ( dbspec == DBSPEC_TYPE ) {
-				return FILTER_ITEM_POTION
+				return 52000
 			}
 			if ( dbspec == DBSPEC_TYPE_MINOR ) {
-				return FILTER_NONE
+				return 99999
 			}
 			if ( dbspec == DBSPEC_VALUE_ORG ) {
 				return 400
 			}
 			if ( dbspec == DBSPEC_PARAM3_ORG ) {
@@ -74120,14 +76095,14 @@
 			reftype = FILTER_ITEM_TOOL
 			return
 		}
 		if ( dbmode == DBMODE_REF_SPEC ) {
 			if ( dbspec == DBSPEC_TYPE ) {
-				return FILTER_ITEM_TOOL
+				return 59000
 			}
 			if ( dbspec == DBSPEC_TYPE_MINOR ) {
-				return FILTER_NONE
+				return 99999
 			}
 			if ( dbspec == DBSPEC_VALUE_ORG ) {
 				return 1400
 			}
 			if ( dbspec == DBSPEC_PARAM3_ORG ) {
@@ -74170,11 +76145,11 @@
 			inv(INV_ITEM_PIC, ci) = xy2pic(4, 9)
 			reftype = FILTER_ITEM_FOOD
 			reftypeminor = FILTER_ITEM_FOOD_FRUIT
 			inv(INV_ITEM_NUM, ci) = 1
 			fixeditemenc = 0
-			ibitmod ITEM_BIT_PRECIOUS, ci, 1
+			ibitmod ITEM_BIT_PRECIOUS, ci, TRUE
 			inv(INV_ITEM_PARAM2, ci) = 4
 			inv(INV_ITEM_IDENTIFY_LEVEL, ci) = 0
 			fixlv = FIX_QUALITY_UNIQUE
 			return
 		}
@@ -74184,14 +76159,14 @@
 			reftype = FILTER_ITEM_FOOD
 			return
 		}
 		if ( dbmode == DBMODE_REF_SPEC ) {
 			if ( dbspec == DBSPEC_TYPE ) {
-				return FILTER_ITEM_FOOD
+				return 57000
 			}
 			if ( dbspec == DBSPEC_TYPE_MINOR ) {
-				return FILTER_ITEM_FOOD_FRUIT
+				return 57004
 			}
 			if ( dbspec == DBSPEC_VALUE_ORG ) {
 				return 10000
 			}
 			if ( dbspec == DBSPEC_PARAM3_ORG ) {
@@ -74246,14 +76221,14 @@
 			reftype = FILTER_ITEM_TOOL
 			return
 		}
 		if ( dbmode == DBMODE_REF_SPEC ) {
 			if ( dbspec == DBSPEC_TYPE ) {
-				return FILTER_ITEM_TOOL
+				return 59000
 			}
 			if ( dbspec == DBSPEC_TYPE_MINOR ) {
-				return FILTER_NONE
+				return 99999
 			}
 			if ( dbspec == DBSPEC_VALUE_ORG ) {
 				return 2200
 			}
 			if ( dbspec == DBSPEC_PARAM3_ORG ) {
@@ -74307,14 +76282,14 @@
 			reftype = FILTER_ITEM_BOOK
 			return
 		}
 		if ( dbmode == DBMODE_REF_SPEC ) {
 			if ( dbspec == DBSPEC_TYPE ) {
-				return FILTER_ITEM_BOOK
+				return 55000
 			}
 			if ( dbspec == DBSPEC_TYPE_MINOR ) {
-				return FILTER_NONE
+				return 99999
 			}
 			if ( dbspec == DBSPEC_VALUE_ORG ) {
 				return 750
 			}
 			if ( dbspec == DBSPEC_PARAM3_ORG ) {
@@ -74365,11 +76340,11 @@
 			inv(INV_ITEM_PIC, ci) = xy2pic(31, 19)
 			reftype = FILTER_ITEM_TOOL
 			reftypeminor = FILTER_NOTHING
 			inv(INV_ITEM_NUM, ci) = 1
 			fixeditemenc = 0
-			ibitmod ITEM_BIT_PRECIOUS, ci, 1
+			ibitmod ITEM_BIT_PRECIOUS, ci, TRUE
 			inv(INV_ITEM_IDENTIFY_LEVEL, ci) = 0
 			return
 		}
 		if ( dbmode == DBMODE_REF ) {
 			ichargelevel = 0
@@ -74377,14 +76352,14 @@
 			reftype = FILTER_ITEM_TOOL
 			return
 		}
 		if ( dbmode == DBMODE_REF_SPEC ) {
 			if ( dbspec == DBSPEC_TYPE ) {
-				return FILTER_ITEM_TOOL
+				return 59000
 			}
 			if ( dbspec == DBSPEC_TYPE_MINOR ) {
-				return FILTER_NONE
+				return 99999
 			}
 			if ( dbspec == DBSPEC_VALUE_ORG ) {
 				return 10
 			}
 			if ( dbspec == DBSPEC_PARAM3_ORG ) {
@@ -74438,14 +76413,14 @@
 			reftype = FILTER_ITEM_POTION
 			return
 		}
 		if ( dbmode == DBMODE_REF_SPEC ) {
 			if ( dbspec == DBSPEC_TYPE ) {
-				return FILTER_ITEM_POTION
+				return 52000
 			}
 			if ( dbspec == DBSPEC_TYPE_MINOR ) {
-				return FILTER_NONE
+				return 99999
 			}
 			if ( dbspec == DBSPEC_VALUE_ORG ) {
 				return 200
 			}
 			if ( dbspec == DBSPEC_PARAM3_ORG ) {
@@ -74498,26 +76473,26 @@
 			reftype = FILTER_ITEM_SPELLBOOK
 			reftypeminor = FILTER_NOTHING
 			inv(INV_ITEM_NUM, ci) = 1
 			fixeditemenc = 0
 			inv(INV_ITEM_IDENTIFY_LEVEL, ci) = 0
-			inv(INV_ITEM_CHARGE, ci) = 2 + rnd(2) - rnd(2)
-			ibitmod ITEM_BIT_CHARGE_ITEM, ci, 1
+			inv((9 /*!!!@[INV_ITEM_AMMO @@@ INV_ITEM_CHARGE @@@ INV_ITEM_CLIENT @@@ INV_ITEM_FILE @@@ INV_ITEM_NEXT_PERIOD]@!!! */), ci) = 4 + rnd(4) - rnd(4)
+			ibitmod ITEM_BIT_CHARGE_ITEM, ci, TRUE
 			return
 		}
 		if ( dbmode == DBMODE_REF ) {
-			ichargelevel = 2
+			ichargelevel = 4
 			infilterref = ""
 			reftype = FILTER_ITEM_SPELLBOOK
 			return
 		}
 		if ( dbmode == DBMODE_REF_SPEC ) {
 			if ( dbspec == DBSPEC_TYPE ) {
-				return FILTER_ITEM_SPELLBOOK
+				return 54000
 			}
 			if ( dbspec == DBSPEC_TYPE_MINOR ) {
-				return FILTER_NONE
+				return 99999
 			}
 			if ( dbspec == DBSPEC_VALUE_ORG ) {
 				return 6100
 			}
 			if ( dbspec == DBSPEC_PARAM3_ORG ) {
@@ -74531,11 +76506,11 @@
 			}
 			if ( dbspec == DBSPEC_OBJ_LEVEL ) {
 				return 20
 			}
 			if ( dbspec == DBSPEC_RARE_LEVEL ) {
-				return 300
+				return 1000
 			}
 			return 0
 		}
 		if ( dbmode == DBMODE_ON_READ ) {
 			efid = SKILL_SPELL_CRYSTAL_SPEAR
@@ -74543,12 +76518,12 @@
 			gosub *readSpellbook
 			return -1
 		}
 		if ( dbmode == DBMODE_DESC ) {
 			if ( jp ) {
-				description(0) = "\t\t「魔力の集積」という呪文について学ぶことができる魔法書。指からビームを出したいあなたに。\n#〜本の為の本・魔法書編〜\n"
-				description(1) = "<ランク9魔法>"
+				description(0) = "\t\t「マジックボルト」という呪文について学ぶことができる魔法書。指からビームを出したいあなたに。\n#〜本の為の本・魔法書編〜\n"
+				description(1) = "<ランク2魔法>"
 				description(2) = ""
 				description(3) = "\t\t魔法属性のボルトを唱える為に必要な本。読むことができる。\n#〜鑑定報告書：＜書物＞カテゴリ〜\n"
 			}
 			else {
 				description(0) = ""
@@ -74559,40 +76534,40 @@
 		}
 		return 0
 	}
 	if ( dbid == ITEM_ID_SPELLBOOK_MAGIC_BALL ) {
 		if ( dbmode == DBMODE_SET_STATS | dbmode == DBMODE_SET ) {
-			inv(INV_ITEM_VALUE, ci) = 7100
+			inv(INV_ITEM_VALUE, ci) = 4000
 			inv(INV_ITEM_WEIGHT, ci) = 380
 		}
 		if ( dbmode == DBMODE_SET ) {
 			inv(INV_ITEM_ID, ci) = ITEM_ID_SPELLBOOK_MAGIC_BALL
 			inv(INV_ITEM_PIC, ci) = xy2pic(0, 13)
 			reftype = FILTER_ITEM_SPELLBOOK
 			reftypeminor = FILTER_NOTHING
 			inv(INV_ITEM_NUM, ci) = 1
 			fixeditemenc = 0
 			inv(INV_ITEM_IDENTIFY_LEVEL, ci) = 0
-			inv(INV_ITEM_CHARGE, ci) = 2 + rnd(2) - rnd(2)
-			ibitmod ITEM_BIT_CHARGE_ITEM, ci, 1
+			inv((9 /*!!!@[INV_ITEM_AMMO @@@ INV_ITEM_CHARGE @@@ INV_ITEM_CLIENT @@@ INV_ITEM_FILE @@@ INV_ITEM_NEXT_PERIOD]@!!! */), ci) = 3 + rnd(3) - rnd(3)
+			ibitmod ITEM_BIT_CHARGE_ITEM, ci, TRUE
 			return
 		}
 		if ( dbmode == DBMODE_REF ) {
-			ichargelevel = 2
+			ichargelevel = 3
 			infilterref = ""
 			reftype = FILTER_ITEM_SPELLBOOK
 			return
 		}
 		if ( dbmode == DBMODE_REF_SPEC ) {
 			if ( dbspec == DBSPEC_TYPE ) {
-				return FILTER_ITEM_SPELLBOOK
+				return 54000
 			}
 			if ( dbspec == DBSPEC_TYPE_MINOR ) {
-				return FILTER_NONE
+				return 99999
 			}
 			if ( dbspec == DBSPEC_VALUE_ORG ) {
-				return 7100
+				return 4000
 			}
 			if ( dbspec == DBSPEC_PARAM3_ORG ) {
 				return
 			}
 			if ( dbspec == DBSPEC_CAN_READ ) {
@@ -74600,14 +76575,14 @@
 			}
 			if ( dbspec == DBSPEC_PCC ) {
 				return 0
 			}
 			if ( dbspec == DBSPEC_OBJ_LEVEL ) {
-				return 30
+				return 25
 			}
 			if ( dbspec == DBSPEC_RARE_LEVEL ) {
-				return 300
+				return 700
 			}
 			return 0
 		}
 		if ( dbmode == DBMODE_ON_READ ) {
 			efid = SKILL_SPELL_MAGIC_STORM
@@ -74616,13 +76591,13 @@
 			return -1
 		}
 		if ( dbmode == DBMODE_DESC ) {
 			if ( jp ) {
 				description(0) = "\t\t「魔力の嵐」という呪文について学ぶことができる魔法書。雨の日に外に出たがるあなたに。\n#〜本の為の本・魔法書編〜\n"
-				description(1) = "<ランク15魔法>"
+				description(1) = "<ランク5魔法>"
 				description(2) = ""
-				description(3) = "\t\t範囲的な魔法属性攻撃の呪文を唱える為に必要な本。読むことができる。\n#〜鑑定報告書：＜書物＞カテゴリ〜\n"
+				description(3) = "\t\t範囲的な魔法属性の呪文を唱える為に必要な本。読むことができる。\n#〜鑑定報告書：＜書物＞カテゴリ〜\n"
 			}
 			else {
 				description(0) = ""
 				description(1) = ""
 				description(3) = "A tome that teaches how to manipulate magic energy by sheer force of will. "
@@ -74645,12 +76620,12 @@
 			inv(INV_ITEM_ID, ci) = ITEM_ID_AXE_OF_DESTRUCTION
 			inv(INV_ITEM_PIC, ci) = xy2pic(3, 12)
 			reftype = FILTER_WEAPON
 			reftypeminor = FILTER_WEAPON_LARGE_AXE
 			inv(INV_ITEM_NUM, ci) = 1
-			fixeditemenc = ENCHANT_CRIT_CHANCE, 750, 0
-			ibitmod ITEM_BIT_PRECIOUS, ci, 1
+			fixeditemenc = 44, 750, 84, 150, 0
+			ibitmod ITEM_BIT_PRECIOUS, ci, TRUE
 			inv(INV_ITEM_IDENTIFY_LEVEL, ci) = 500
 			fixlv = FIX_QUALITY_UNIQUE
 			return
 		}
 		if ( dbmode == DBMODE_REF ) {
@@ -74659,14 +76634,14 @@
 			reftype = FILTER_WEAPON
 			return
 		}
 		if ( dbmode == DBMODE_REF_SPEC ) {
 			if ( dbspec == DBSPEC_TYPE ) {
-				return FILTER_WEAPON
+				return 10000
 			}
 			if ( dbspec == DBSPEC_TYPE_MINOR ) {
-				return FILTER_WEAPON_LARGE_AXE
+				return 10010
 			}
 			if ( dbspec == DBSPEC_VALUE_ORG ) {
 				return 50000
 			}
 			if ( dbspec == DBSPEC_PARAM3_ORG ) {
@@ -74720,14 +76695,14 @@
 			reftype = FILTER_FURNITURE
 			return
 		}
 		if ( dbmode == DBMODE_REF_SPEC ) {
 			if ( dbspec == DBSPEC_TYPE ) {
-				return FILTER_FURNITURE
+				return 60000
 			}
 			if ( dbspec == DBSPEC_TYPE_MINOR ) {
-				return FILTER_NONE
+				return 99999
 			}
 			if ( dbspec == DBSPEC_VALUE_ORG ) {
 				return 2000
 			}
 			if ( dbspec == DBSPEC_PARAM3_ORG ) {
@@ -74784,14 +76759,14 @@
 			reftype = FILTER_FURNITURE
 			return
 		}
 		if ( dbmode == DBMODE_REF_SPEC ) {
 			if ( dbspec == DBSPEC_TYPE ) {
-				return FILTER_FURNITURE
+				return 60000
 			}
 			if ( dbspec == DBSPEC_TYPE_MINOR ) {
-				return FILTER_FURNITURE_INSTRUMENT
+				return 60005
 			}
 			if ( dbspec == DBSPEC_VALUE_ORG ) {
 				return 7500
 			}
 			if ( dbspec == DBSPEC_PARAM3_ORG ) {
@@ -74848,14 +76823,14 @@
 			reftype = FILTER_FURNITURE
 			return
 		}
 		if ( dbmode == DBMODE_REF_SPEC ) {
 			if ( dbspec == DBSPEC_TYPE ) {
-				return FILTER_FURNITURE
+				return 60000
 			}
 			if ( dbspec == DBSPEC_TYPE_MINOR ) {
-				return FILTER_FURNITURE_INSTRUMENT
+				return 60005
 			}
 			if ( dbspec == DBSPEC_VALUE_ORG ) {
 				return 1500
 			}
 			if ( dbspec == DBSPEC_PARAM3_ORG ) {
@@ -74912,14 +76887,14 @@
 			reftype = FILTER_FURNITURE
 			return
 		}
 		if ( dbmode == DBMODE_REF_SPEC ) {
 			if ( dbspec == DBSPEC_TYPE ) {
-				return FILTER_FURNITURE
+				return 60000
 			}
 			if ( dbspec == DBSPEC_TYPE_MINOR ) {
-				return FILTER_FURNITURE_INSTRUMENT
+				return 60005
 			}
 			if ( dbspec == DBSPEC_VALUE_ORG ) {
 				return 3800
 			}
 			if ( dbspec == DBSPEC_PARAM3_ORG ) {
@@ -74976,14 +76951,14 @@
 			reftype = FILTER_FURNITURE
 			return
 		}
 		if ( dbmode == DBMODE_REF_SPEC ) {
 			if ( dbspec == DBSPEC_TYPE ) {
-				return FILTER_FURNITURE
+				return 60000
 			}
 			if ( dbspec == DBSPEC_TYPE_MINOR ) {
-				return FILTER_FURNITURE_INSTRUMENT
+				return 60005
 			}
 			if ( dbspec == DBSPEC_VALUE_ORG ) {
 				return 4500
 			}
 			if ( dbspec == DBSPEC_PARAM3_ORG ) {
@@ -75038,14 +77013,14 @@
 			reftype = FILTER_ITEM_TOOL
 			return
 		}
 		if ( dbmode == DBMODE_REF_SPEC ) {
 			if ( dbspec == DBSPEC_TYPE ) {
-				return FILTER_ITEM_TOOL
+				return 59000
 			}
 			if ( dbspec == DBSPEC_TYPE_MINOR ) {
-				return FILTER_NONE
+				return 99999
 			}
 			if ( dbspec == DBSPEC_VALUE_ORG ) {
 				return 5000
 			}
 			if ( dbspec == DBSPEC_PARAM3_ORG ) {
@@ -75100,14 +77075,14 @@
 			reftype = FILTER_ITEM_TOOL
 			return
 		}
 		if ( dbmode == DBMODE_REF_SPEC ) {
 			if ( dbspec == DBSPEC_TYPE ) {
-				return FILTER_ITEM_TOOL
+				return 59000
 			}
 			if ( dbspec == DBSPEC_TYPE_MINOR ) {
-				return FILTER_NONE
+				return 99999
 			}
 			if ( dbspec == DBSPEC_VALUE_ORG ) {
 				return 7500
 			}
 			if ( dbspec == DBSPEC_PARAM3_ORG ) {
@@ -75151,26 +77126,26 @@
 			reftype = FILTER_ITEM_SPELLBOOK
 			reftypeminor = FILTER_NOTHING
 			inv(INV_ITEM_NUM, ci) = 1
 			fixeditemenc = 0
 			inv(INV_ITEM_IDENTIFY_LEVEL, ci) = 0
-			inv(INV_ITEM_CHARGE, ci) = 2 + rnd(2) - rnd(2)
-			ibitmod ITEM_BIT_CHARGE_ITEM, ci, 1
+			inv((9 /*!!!@[INV_ITEM_AMMO @@@ INV_ITEM_CHARGE @@@ INV_ITEM_CLIENT @@@ INV_ITEM_FILE @@@ INV_ITEM_NEXT_PERIOD]@!!! */), ci) = 2 + rnd(2) - rnd(2)
+			ibitmod ITEM_BIT_CHARGE_ITEM, ci, TRUE
 			return
 		}
 		if ( dbmode == DBMODE_REF ) {
 			ichargelevel = 2
 			infilterref = "/noshop/"
 			reftype = FILTER_ITEM_SPELLBOOK
 			return
 		}
 		if ( dbmode == DBMODE_REF_SPEC ) {
 			if ( dbspec == DBSPEC_TYPE ) {
-				return FILTER_ITEM_SPELLBOOK
+				return 54000
 			}
 			if ( dbspec == DBSPEC_TYPE_MINOR ) {
-				return FILTER_NONE
+				return 99999
 			}
 			if ( dbspec == DBSPEC_VALUE_ORG ) {
 				return 2000
 			}
 			if ( dbspec == DBSPEC_PARAM3_ORG ) {
@@ -75221,12 +77196,12 @@
 			reftype = FILTER_ITEM_TOOL
 			reftypeminor = FILTER_NOTHING
 			inv(INV_ITEM_NUM, ci) = 1
 			fixeditemenc = 0
 			inv(INV_ITEM_EFFECT, ci) = EFFECT_JURE_STATUE
-			ibitmod ITEM_BIT_PRECIOUS, ci, 1
-			ibitmod ITEM_BIT_PERIOD, ci, 1
+			ibitmod ITEM_BIT_PRECIOUS, ci, TRUE
+			ibitmod ITEM_BIT_PERIOD, ci, TRUE
 			inv(INV_ITEM_PARAM3, ci) = 720
 			inv(INV_ITEM_IDENTIFY_LEVEL, ci) = 0
 			fixlv = FIX_QUALITY_UNIQUE
 			return
 		}
@@ -75236,14 +77211,14 @@
 			reftype = FILTER_ITEM_TOOL
 			return
 		}
 		if ( dbmode == DBMODE_REF_SPEC ) {
 			if ( dbspec == DBSPEC_TYPE ) {
-				return FILTER_ITEM_TOOL
+				return 59000
 			}
 			if ( dbspec == DBSPEC_TYPE_MINOR ) {
-				return FILTER_NONE
+				return 99999
 			}
 			if ( dbspec == DBSPEC_VALUE_ORG ) {
 				return 100000
 			}
 			if ( dbspec == DBSPEC_PARAM3_ORG ) {
@@ -75298,14 +77273,14 @@
 			reftype = FILTER_ITEM_TOOL
 			return
 		}
 		if ( dbmode == DBMODE_REF_SPEC ) {
 			if ( dbspec == DBSPEC_TYPE ) {
-				return FILTER_ITEM_TOOL
+				return 59000
 			}
 			if ( dbspec == DBSPEC_TYPE_MINOR ) {
-				return FILTER_NONE
+				return 99999
 			}
 			if ( dbspec == DBSPEC_VALUE_ORG ) {
 				return 4500
 			}
 			if ( dbspec == DBSPEC_PARAM3_ORG ) {
@@ -75352,11 +77327,11 @@
 			reftype = FILTER_ITEM_TOOL
 			reftypeminor = FILTER_NOTHING
 			inv(INV_ITEM_NUM, ci) = 1
 			fixeditemenc = 0
 			inv(INV_ITEM_EFFECT, ci) = EFFECT_GENE_MERGE
-			ibitmod ITEM_BIT_PRECIOUS, ci, 1
+			ibitmod ITEM_BIT_PRECIOUS, ci, TRUE
 			inv(INV_ITEM_IDENTIFY_LEVEL, ci) = 0
 			return
 		}
 		if ( dbmode == DBMODE_REF ) {
 			ichargelevel = 0
@@ -75364,14 +77339,14 @@
 			reftype = FILTER_ITEM_TOOL
 			return
 		}
 		if ( dbmode == DBMODE_REF_SPEC ) {
 			if ( dbspec == DBSPEC_TYPE ) {
-				return FILTER_ITEM_TOOL
+				return 59000
 			}
 			if ( dbspec == DBSPEC_TYPE_MINOR ) {
-				return FILTER_NONE
+				return 99999
 			}
 			if ( dbspec == DBSPEC_VALUE_ORG ) {
 				return 20000
 			}
 			if ( dbspec == DBSPEC_PARAM3_ORG ) {
@@ -75415,12 +77390,12 @@
 			reftype = FILTER_ITEM_TOOL
 			reftypeminor = FILTER_NOTHING
 			inv(INV_ITEM_NUM, ci) = 1
 			fixeditemenc = 0
 			inv(INV_ITEM_EFFECT, ci) = EFFECT_OBJET_OF_HEART
-			ibitmod ITEM_BIT_PRECIOUS, ci, 1
-			ibitmod ITEM_BIT_PERIOD, ci, 1
+			ibitmod ITEM_BIT_PRECIOUS, ci, TRUE
+			ibitmod ITEM_BIT_PERIOD, ci, TRUE
 			inv(INV_ITEM_PARAM1, ci) = 1132
 			inv(INV_ITEM_PARAM2, ci) = 100
 			inv(INV_ITEM_PARAM3, ci) = 24
 			inv(INV_ITEM_IDENTIFY_LEVEL, ci) = 0
 			fixlv = FIX_QUALITY_UNIQUE
@@ -75432,14 +77407,14 @@
 			reftype = FILTER_ITEM_TOOL
 			return
 		}
 		if ( dbmode == DBMODE_REF_SPEC ) {
 			if ( dbspec == DBSPEC_TYPE ) {
-				return FILTER_ITEM_TOOL
+				return 59000
 			}
 			if ( dbspec == DBSPEC_TYPE_MINOR ) {
-				return FILTER_NONE
+				return 99999
 			}
 			if ( dbspec == DBSPEC_VALUE_ORG ) {
 				return 50000
 			}
 			if ( dbspec == DBSPEC_PARAM3_ORG ) {
@@ -75483,12 +77458,12 @@
 			reftype = FILTER_ITEM_TOOL
 			reftypeminor = FILTER_NOTHING
 			inv(INV_ITEM_NUM, ci) = 1
 			fixeditemenc = 0
 			inv(INV_ITEM_EFFECT, ci) = EFFECT_KUMIROMI_GEMSTONE
-			ibitmod ITEM_BIT_PRECIOUS, ci, 1
-			ibitmod ITEM_BIT_PERIOD, ci, 1
+			ibitmod ITEM_BIT_PRECIOUS, ci, TRUE
+			ibitmod ITEM_BIT_PERIOD, ci, TRUE
 			inv(INV_ITEM_PARAM3, ci) = 72
 			inv(INV_ITEM_IDENTIFY_LEVEL, ci) = 0
 			fixlv = FIX_QUALITY_UNIQUE
 			return
 		}
@@ -75498,14 +77473,14 @@
 			reftype = FILTER_ITEM_TOOL
 			return
 		}
 		if ( dbmode == DBMODE_REF_SPEC ) {
 			if ( dbspec == DBSPEC_TYPE ) {
-				return FILTER_ITEM_TOOL
+				return 59000
 			}
 			if ( dbspec == DBSPEC_TYPE_MINOR ) {
-				return FILTER_NONE
+				return 99999
 			}
 			if ( dbspec == DBSPEC_VALUE_ORG ) {
 				return 50000
 			}
 			if ( dbspec == DBSPEC_PARAM3_ORG ) {
@@ -75549,12 +77524,12 @@
 			reftype = FILTER_ITEM_TOOL
 			reftypeminor = FILTER_NOTHING
 			inv(INV_ITEM_NUM, ci) = 1
 			fixeditemenc = 0
 			inv(INV_ITEM_EFFECT, ci) = EFFECT_OBJET_OF_HEART
-			ibitmod ITEM_BIT_PRECIOUS, ci, 1
-			ibitmod ITEM_BIT_PERIOD, ci, 1
+			ibitmod ITEM_BIT_PRECIOUS, ci, TRUE
+			ibitmod ITEM_BIT_PERIOD, ci, TRUE
 			inv(INV_ITEM_PARAM1, ci) = 404
 			inv(INV_ITEM_PARAM2, ci) = 400
 			inv(INV_ITEM_PARAM3, ci) = 8
 			inv(INV_ITEM_IDENTIFY_LEVEL, ci) = 0
 			fixlv = FIX_QUALITY_UNIQUE
@@ -75566,14 +77541,14 @@
 			reftype = FILTER_ITEM_TOOL
 			return
 		}
 		if ( dbmode == DBMODE_REF_SPEC ) {
 			if ( dbspec == DBSPEC_TYPE ) {
-				return FILTER_ITEM_TOOL
+				return 59000
 			}
 			if ( dbspec == DBSPEC_TYPE_MINOR ) {
-				return FILTER_NONE
+				return 99999
 			}
 			if ( dbspec == DBSPEC_VALUE_ORG ) {
 				return 50000
 			}
 			if ( dbspec == DBSPEC_PARAM3_ORG ) {
@@ -75617,12 +77592,12 @@
 			reftype = FILTER_ITEM_TOOL
 			reftypeminor = FILTER_NOTHING
 			inv(INV_ITEM_NUM, ci) = 1
 			fixeditemenc = 0
 			inv(INV_ITEM_EFFECT, ci) = EFFECT_OBJET_OF_HEART
-			ibitmod ITEM_BIT_PRECIOUS, ci, 1
-			ibitmod ITEM_BIT_PERIOD, ci, 1
+			ibitmod ITEM_BIT_PRECIOUS, ci, TRUE
+			ibitmod ITEM_BIT_PERIOD, ci, TRUE
 			inv(INV_ITEM_PARAM1, ci) = 446
 			inv(INV_ITEM_PARAM2, ci) = 300
 			inv(INV_ITEM_PARAM3, ci) = 12
 			inv(INV_ITEM_IDENTIFY_LEVEL, ci) = 0
 			fixlv = FIX_QUALITY_UNIQUE
@@ -75634,14 +77609,14 @@
 			reftype = FILTER_ITEM_TOOL
 			return
 		}
 		if ( dbmode == DBMODE_REF_SPEC ) {
 			if ( dbspec == DBSPEC_TYPE ) {
-				return FILTER_ITEM_TOOL
+				return 59000
 			}
 			if ( dbspec == DBSPEC_TYPE_MINOR ) {
-				return FILTER_NONE
+				return 99999
 			}
 			if ( dbspec == DBSPEC_VALUE_ORG ) {
 				return 50000
 			}
 			if ( dbspec == DBSPEC_PARAM3_ORG ) {
@@ -75689,12 +77664,12 @@
 			inv(INV_ITEM_ID, ci) = ITEM_ID_GAIA_HAMMER
 			inv(INV_ITEM_PIC, ci) = xy2pic(9, 15)
 			reftype = FILTER_WEAPON
 			reftypeminor = FILTER_WEAPON_HAMMER
 			inv(INV_ITEM_NUM, ci) = 1
-			fixeditemenc = ENCHANT_PIERCING_CHANCE, 350, ENCHANT_PROC * EXT_ENCHANTMENT + ENCHANT_PROC_HERO, 500, ENCHANT_ATTRIBUTE * EXT_ENCHANTMENT + SKILL_ATTR_STR, 600, ENCHANT_SKILL * EXT_ENCHANTMENT + SKILL_NORMAL_TWO_HAND, 450, ENCHANT_RESISTANCE * EXT_ENCHANTMENT + SKILL_RES_MIND, 400, 0
-			ibitmod ITEM_BIT_PRECIOUS, ci, 1
+			fixeditemenc = 39, 350, ENCHANT_PROC * EXT_ENCHANTMENT + ENCHANT_PROC_HERO, 500, ENCHANT_ATTRIBUTE * EXT_ENCHANTMENT + SKILL_ATTR_STR, 600, ENCHANT_SKILL * EXT_ENCHANTMENT + SKILL_NORMAL_TWO_HAND, 450, ENCHANT_RESISTANCE * EXT_ENCHANTMENT + SKILL_RES_MIND, 400, 0
+			ibitmod ITEM_BIT_PRECIOUS, ci, TRUE
 			inv(INV_ITEM_IDENTIFY_LEVEL, ci) = 500
 			fixlv = FIX_QUALITY_UNIQUE
 			return
 		}
 		if ( dbmode == DBMODE_REF ) {
@@ -75703,14 +77678,14 @@
 			reftype = FILTER_WEAPON
 			return
 		}
 		if ( dbmode == DBMODE_REF_SPEC ) {
 			if ( dbspec == DBSPEC_TYPE ) {
-				return FILTER_WEAPON
+				return 10000
 			}
 			if ( dbspec == DBSPEC_TYPE_MINOR ) {
-				return FILTER_WEAPON_HAMMER
+				return 10005
 			}
 			if ( dbspec == DBSPEC_VALUE_ORG ) {
 				return 35000
 			}
 			if ( dbspec == DBSPEC_PARAM3_ORG ) {
@@ -75760,12 +77735,12 @@
 			inv(INV_ITEM_ID, ci) = ITEM_ID_LUCKY_DAGGER
 			inv(INV_ITEM_PIC, ci) = xy2pic(4, 12)
 			reftype = FILTER_WEAPON
 			reftypeminor = FILTER_WEAPON_SHORTSWORD
 			inv(INV_ITEM_NUM, ci) = 1
-			fixeditemenc = ENCHANT_RES_STEAL, 100, ENCHANT_SEE_INVISIBLE, 100, ENCHANT_ATTRIBUTE * EXT_ENCHANTMENT + SKILL_ATTR_LUC, 1500, ENCHANT_ABSORB_STAMINA, 400, ENCHANT_SKILL * EXT_ENCHANTMENT + SKILL_NORMAL_FISHING, 600, 0
-			ibitmod ITEM_BIT_PRECIOUS, ci, 1
+			fixeditemenc = 41, 100, 35, 100, ENCHANT_ATTRIBUTE * EXT_ENCHANTMENT + SKILL_ATTR_LUC, 1500, 36, 400, ENCHANT_SKILL * EXT_ENCHANTMENT + SKILL_NORMAL_FISHING, 600, 0
+			ibitmod ITEM_BIT_PRECIOUS, ci, TRUE
 			inv(INV_ITEM_IDENTIFY_LEVEL, ci) = 500
 			fixlv = FIX_QUALITY_UNIQUE
 			return
 		}
 		if ( dbmode == DBMODE_REF ) {
@@ -75774,14 +77749,14 @@
 			reftype = FILTER_WEAPON
 			return
 		}
 		if ( dbmode == DBMODE_REF_SPEC ) {
 			if ( dbspec == DBSPEC_TYPE ) {
-				return FILTER_WEAPON
+				return 10000
 			}
 			if ( dbspec == DBSPEC_TYPE_MINOR ) {
-				return FILTER_WEAPON_SHORTSWORD
+				return 10003
 			}
 			if ( dbspec == DBSPEC_VALUE_ORG ) {
 				return 35000
 			}
 			if ( dbspec == DBSPEC_PARAM3_ORG ) {
@@ -75831,11 +77806,11 @@
 			inv(INV_ITEM_PIC, ci) = xy2pic(19, 12)
 			reftype = FILTER_WEAPON
 			reftypeminor = FILTER_WEAPON_POLEARM
 			inv(INV_ITEM_NUM, ci) = 1
 			fixeditemenc = ENCHANT_PROC * EXT_ENCHANTMENT + ENCHANT_PROC_HEALING_RAIN, 350, ENCHANT_PROC * EXT_ENCHANTMENT + ENCHANT_PROC_HOLY_VEIL, 450, ENCHANT_ATTRIBUTE * EXT_ENCHANTMENT + SKILL_ATTR_WIL, 650, ENCHANT_RESISTANCE * EXT_ENCHANTMENT + SKILL_RES_DARKNESS, 200, ENCHANT_RESISTANCE * EXT_ENCHANTMENT + SKILL_RES_NETHER, 150, 0
-			ibitmod ITEM_BIT_PRECIOUS, ci, 1
+			ibitmod ITEM_BIT_PRECIOUS, ci, TRUE
 			inv(INV_ITEM_IDENTIFY_LEVEL, ci) = 500
 			fixlv = FIX_QUALITY_UNIQUE
 			return
 		}
 		if ( dbmode == DBMODE_REF ) {
@@ -75844,14 +77819,14 @@
 			reftype = FILTER_WEAPON
 			return
 		}
 		if ( dbmode == DBMODE_REF_SPEC ) {
 			if ( dbspec == DBSPEC_TYPE ) {
-				return FILTER_WEAPON
+				return 10000
 			}
 			if ( dbspec == DBSPEC_TYPE_MINOR ) {
-				return FILTER_WEAPON_POLEARM
+				return 10007
 			}
 			if ( dbspec == DBSPEC_VALUE_ORG ) {
 				return 35000
 			}
 			if ( dbspec == DBSPEC_PARAM3_ORG ) {
@@ -75902,11 +77877,11 @@
 			inv(INV_ITEM_PIC, ci) = xy2pic(29, 12)
 			reftype = FILTER_WEAPON
 			reftypeminor = FILTER_WEAPON_STAVE
 			inv(INV_ITEM_NUM, ci) = 1
 			fixeditemenc = ENCHANT_PROC * EXT_ENCHANTMENT + ENCHANT_PROC_ELEMENT_SCAR, 400, ENCHANT_ELEMENTAL_DMG * EXT_ENCHANTMENT + SKILL_RES_FIRE, 350, ENCHANT_ELEMENTAL_DMG * EXT_ENCHANTMENT + SKILL_RES_COLD, 350, ENCHANT_ELEMENTAL_DMG * EXT_ENCHANTMENT + SKILL_RES_LIGHTNING, 350, ENCHANT_RESISTANCE * EXT_ENCHANTMENT + SKILL_RES_FIRE, 250, ENCHANT_RESISTANCE * EXT_ENCHANTMENT + SKILL_RES_COLD, 250, ENCHANT_RESISTANCE * EXT_ENCHANTMENT + SKILL_RES_LIGHTNING, 250, 0
-			ibitmod ITEM_BIT_PRECIOUS, ci, 1
+			ibitmod ITEM_BIT_PRECIOUS, ci, TRUE
 			inv(INV_ITEM_IDENTIFY_LEVEL, ci) = 500
 			fixlv = FIX_QUALITY_UNIQUE
 			return
 		}
 		if ( dbmode == DBMODE_REF ) {
@@ -75915,14 +77890,14 @@
 			reftype = FILTER_WEAPON
 			return
 		}
 		if ( dbmode == DBMODE_REF_SPEC ) {
 			if ( dbspec == DBSPEC_TYPE ) {
-				return FILTER_WEAPON
+				return 10000
 			}
 			if ( dbspec == DBSPEC_TYPE_MINOR ) {
-				return FILTER_WEAPON_STAVE
+				return 10006
 			}
 			if ( dbspec == DBSPEC_VALUE_ORG ) {
 				return 35000
 			}
 			if ( dbspec == DBSPEC_PARAM3_ORG ) {
@@ -75970,12 +77945,12 @@
 			inv(INV_ITEM_ID, ci) = ITEM_ID_KUMIROMI_SCYTHE
 			inv(INV_ITEM_PIC, ci) = xy2pic(25, 12)
 			reftype = FILTER_WEAPON
 			reftypeminor = FILTER_WEAPON_SICKLE
 			inv(INV_ITEM_NUM, ci) = 1
-			fixeditemenc = ENCHANT_SKILL * EXT_ENCHANTMENT + SKILL_NORMAL_COOKING, 600, ENCHANT_EAT_ROTTEN, 100, ENCHANT_SKILL * EXT_ENCHANTMENT + SKILL_NORMAL_GARDENING, 1100, ENCHANT_SKILL * EXT_ENCHANTMENT + SKILL_NORMAL_MINING, 800, ENCHANT_ATTRIBUTE * EXT_ENCHANTMENT + SKILL_ATTR_STR, 550, ENCHANT_RESISTANCE * EXT_ENCHANTMENT + SKILL_RES_CHAOS, 400, ENCHANT_PROC * EXT_ENCHANTMENT + ENCHANT_PROC_DECAPITATION, 100, 0
-			ibitmod ITEM_BIT_PRECIOUS, ci, 1
+			fixeditemenc = ENCHANT_SKILL * EXT_ENCHANTMENT + SKILL_NORMAL_COOKING, 600, 42, 100, ENCHANT_SKILL * EXT_ENCHANTMENT + SKILL_NORMAL_GARDENING, 1100, ENCHANT_SKILL * EXT_ENCHANTMENT + SKILL_NORMAL_MINING, 800, ENCHANT_ATTRIBUTE * EXT_ENCHANTMENT + SKILL_ATTR_STR, 550, ENCHANT_RESISTANCE * EXT_ENCHANTMENT + SKILL_RES_CHAOS, 400, ENCHANT_PROC * EXT_ENCHANTMENT + ENCHANT_PROC_DECAPITATION, 100, 0
+			ibitmod ITEM_BIT_PRECIOUS, ci, TRUE
 			inv(INV_ITEM_IDENTIFY_LEVEL, ci) = 500
 			fixlv = FIX_QUALITY_UNIQUE
 			return
 		}
 		if ( dbmode == DBMODE_REF ) {
@@ -75984,14 +77959,14 @@
 			reftype = FILTER_WEAPON
 			return
 		}
 		if ( dbmode == DBMODE_REF_SPEC ) {
 			if ( dbspec == DBSPEC_TYPE ) {
-				return FILTER_WEAPON
+				return 10000
 			}
 			if ( dbspec == DBSPEC_TYPE_MINOR ) {
-				return FILTER_WEAPON_SICKLE
+				return 10011
 			}
 			if ( dbspec == DBSPEC_VALUE_ORG ) {
 				return 35000
 			}
 			if ( dbspec == DBSPEC_PARAM3_ORG ) {
@@ -76039,12 +78014,12 @@
 			inv(INV_ITEM_ID, ci) = ITEM_ID_WINCHESTER_PREMIUM
 			inv(INV_ITEM_PIC, ci) = xy2pic(30, 24)
 			reftype = FILTER_RANGE
 			reftypeminor = FILTER_RANGE_PISTOL
 			inv(INV_ITEM_NUM, ci) = 1
-			fixeditemenc = ENCHANT_PROC * EXT_ENCHANTMENT + ENCHANT_PROC_MIST_OF_SILENCE, 350, ENCHANT_RES_CURSE, 200, ENCHANT_SKILL * EXT_ENCHANTMENT + SKILL_WEAPON_FIREARM, 450, ENCHANT_RESISTANCE * EXT_ENCHANTMENT + SKILL_RES_SOUND, 350, 0
-			ibitmod ITEM_BIT_PRECIOUS, ci, 1
+			fixeditemenc = ENCHANT_PROC * EXT_ENCHANTMENT + ENCHANT_PROC_MIST_OF_SILENCE, 350, 43, 200, ENCHANT_SKILL * EXT_ENCHANTMENT + SKILL_WEAPON_FIREARM, 450, ENCHANT_RESISTANCE * EXT_ENCHANTMENT + SKILL_RES_SOUND, 350, 0
+			ibitmod ITEM_BIT_PRECIOUS, ci, TRUE
 			inv(INV_ITEM_IDENTIFY_LEVEL, ci) = 500
 			fixlv = FIX_QUALITY_UNIQUE
 			return
 		}
 		if ( dbmode == DBMODE_REF ) {
@@ -76053,14 +78028,14 @@
 			reftype = FILTER_RANGE
 			return
 		}
 		if ( dbmode == DBMODE_REF_SPEC ) {
 			if ( dbspec == DBSPEC_TYPE ) {
-				return FILTER_RANGE
+				return 24000
 			}
 			if ( dbspec == DBSPEC_TYPE_MINOR ) {
-				return FILTER_RANGE_PISTOL
+				return 24020
 			}
 			if ( dbspec == DBSPEC_VALUE_ORG ) {
 				return 35000
 			}
 			if ( dbspec == DBSPEC_PARAM3_ORG ) {
@@ -76109,11 +78084,11 @@
 			inv(INV_ITEM_PIC, ci) = xy2pic(8, 12)
 			reftype = FILTER_RANGE
 			reftypeminor = FILTER_RANGE_SHORTBOW
 			inv(INV_ITEM_NUM, ci) = 1
 			fixeditemenc = ENCHANT_PROC * EXT_ENCHANTMENT + ENCHANT_PROC_SPEED, 200, ENCHANT_PROC * EXT_ENCHANTMENT + ENCHANT_PROC_LULWYS_TRICK, 200, ENCHANT_ATTRIBUTE * EXT_ENCHANTMENT + SKILL_ATTR_SPD, 250, ENCHANT_RESISTANCE * EXT_ENCHANTMENT + SKILL_RES_LIGHTNING, 300, 0
-			ibitmod ITEM_BIT_PRECIOUS, ci, 1
+			ibitmod ITEM_BIT_PRECIOUS, ci, TRUE
 			inv(INV_ITEM_IDENTIFY_LEVEL, ci) = 500
 			fixlv = FIX_QUALITY_UNIQUE
 			return
 		}
 		if ( dbmode == DBMODE_REF ) {
@@ -76122,14 +78097,14 @@
 			reftype = FILTER_RANGE
 			return
 		}
 		if ( dbmode == DBMODE_REF_SPEC ) {
 			if ( dbspec == DBSPEC_TYPE ) {
-				return FILTER_RANGE
+				return 24000
 			}
 			if ( dbspec == DBSPEC_TYPE_MINOR ) {
-				return FILTER_RANGE_SHORTBOW
+				return 24001
 			}
 			if ( dbspec == DBSPEC_VALUE_ORG ) {
 				return 35000
 			}
 			if ( dbspec == DBSPEC_PARAM3_ORG ) {
@@ -76173,11 +78148,11 @@
 			reftype = FILTER_ITEM_TOOL
 			reftypeminor = FILTER_NOTHING
 			inv(INV_ITEM_NUM, ci) = 1
 			fixeditemenc = 0
 			inv(INV_ITEM_EFFECT, ci) = EFFECT_SECRET_TREASURE
-			ibitmod ITEM_BIT_PRECIOUS, ci, 1
+			ibitmod ITEM_BIT_PRECIOUS, ci, TRUE
 			inv(INV_ITEM_IDENTIFY_LEVEL, ci) = 0
 			fixlv = FIX_QUALITY_UNIQUE
 			return
 		}
 		if ( dbmode == DBMODE_REF ) {
@@ -76186,14 +78161,14 @@
 			reftype = FILTER_ITEM_TOOL
 			return
 		}
 		if ( dbmode == DBMODE_REF_SPEC ) {
 			if ( dbspec == DBSPEC_TYPE ) {
-				return FILTER_ITEM_TOOL
+				return 59000
 			}
 			if ( dbspec == DBSPEC_TYPE_MINOR ) {
-				return FILTER_NONE
+				return 99999
 			}
 			if ( dbspec == DBSPEC_VALUE_ORG ) {
 				return 5000
 			}
 			if ( dbspec == DBSPEC_PARAM3_ORG ) {
@@ -76237,11 +78212,11 @@
 			reftype = FILTER_ITEM_TOOL
 			reftypeminor = FILTER_NOTHING
 			inv(INV_ITEM_NUM, ci) = 1
 			fixeditemenc = 0
 			inv(INV_ITEM_EFFECT, ci) = EFFECT_NUKE
-			ibitmod ITEM_BIT_PRECIOUS, ci, 1
+			ibitmod ITEM_BIT_PRECIOUS, ci, TRUE
 			inv(INV_ITEM_IDENTIFY_LEVEL, ci) = 0
 			fixlv = FIX_QUALITY_UNIQUE
 			return
 		}
 		if ( dbmode == DBMODE_REF ) {
@@ -76250,14 +78225,14 @@
 			reftype = FILTER_ITEM_TOOL
 			return
 		}
 		if ( dbmode == DBMODE_REF_SPEC ) {
 			if ( dbspec == DBSPEC_TYPE ) {
-				return FILTER_ITEM_TOOL
+				return 59000
 			}
 			if ( dbspec == DBSPEC_TYPE_MINOR ) {
-				return FILTER_NONE
+				return 99999
 			}
 			if ( dbspec == DBSPEC_VALUE_ORG ) {
 				return 10000
 			}
 			if ( dbspec == DBSPEC_PARAM3_ORG ) {
@@ -76315,14 +78290,14 @@
 			reftype = FILTER_CARGO_TRADE
 			return
 		}
 		if ( dbmode == DBMODE_REF_SPEC ) {
 			if ( dbspec == DBSPEC_TYPE ) {
-				return FILTER_CARGO_TRADE
+				return 92000
 			}
 			if ( dbspec == DBSPEC_TYPE_MINOR ) {
-				return FILTER_NONE
+				return 99999
 			}
 			if ( dbspec == DBSPEC_VALUE_ORG ) {
 				return 1100
 			}
 			if ( dbspec == DBSPEC_PARAM3_ORG ) {
@@ -76380,14 +78355,14 @@
 			reftype = FILTER_CARGO_TRADE
 			return
 		}
 		if ( dbmode == DBMODE_REF_SPEC ) {
 			if ( dbspec == DBSPEC_TYPE ) {
-				return FILTER_CARGO_TRADE
+				return 92000
 			}
 			if ( dbspec == DBSPEC_TYPE_MINOR ) {
-				return FILTER_NONE
+				return 99999
 			}
 			if ( dbspec == DBSPEC_VALUE_ORG ) {
 				return 6440
 			}
 			if ( dbspec == DBSPEC_PARAM3_ORG ) {
@@ -76446,14 +78421,14 @@
 			reftype = FILTER_ITEM_BOOK
 			return
 		}
 		if ( dbmode == DBMODE_REF_SPEC ) {
 			if ( dbspec == DBSPEC_TYPE ) {
-				return FILTER_ITEM_BOOK
+				return 55000
 			}
 			if ( dbspec == DBSPEC_TYPE_MINOR ) {
-				return FILTER_NONE
+				return 99999
 			}
 			if ( dbspec == DBSPEC_VALUE_ORG ) {
 				return 4000
 			}
 			if ( dbspec == DBSPEC_PARAM3_ORG ) {
@@ -76515,14 +78490,14 @@
 			reftype = FILTER_ITEM_FOOD
 			return
 		}
 		if ( dbmode == DBMODE_REF_SPEC ) {
 			if ( dbspec == DBSPEC_TYPE ) {
-				return FILTER_ITEM_FOOD
+				return 57000
 			}
 			if ( dbspec == DBSPEC_TYPE_MINOR ) {
-				return FILTER_NONE
+				return 99999
 			}
 			if ( dbspec == DBSPEC_VALUE_ORG ) {
 				return 900
 			}
 			if ( dbspec == DBSPEC_PARAM3_ORG ) {
@@ -76566,12 +78541,12 @@
 			reftype = FILTER_ITEM_TOOL
 			reftypeminor = FILTER_NOTHING
 			inv(INV_ITEM_NUM, ci) = 1
 			fixeditemenc = 0
 			inv(INV_ITEM_EFFECT, ci) = EFFECT_LULWY_STATUE
-			ibitmod ITEM_BIT_PRECIOUS, ci, 1
-			ibitmod ITEM_BIT_PERIOD, ci, 1
+			ibitmod ITEM_BIT_PRECIOUS, ci, TRUE
+			ibitmod ITEM_BIT_PERIOD, ci, TRUE
 			inv(INV_ITEM_PARAM3, ci) = 120
 			inv(INV_ITEM_IDENTIFY_LEVEL, ci) = 0
 			fixlv = FIX_QUALITY_UNIQUE
 			return
 		}
@@ -76581,14 +78556,14 @@
 			reftype = FILTER_ITEM_TOOL
 			return
 		}
 		if ( dbmode == DBMODE_REF_SPEC ) {
 			if ( dbspec == DBSPEC_TYPE ) {
-				return FILTER_ITEM_TOOL
+				return 59000
 			}
 			if ( dbspec == DBSPEC_TYPE_MINOR ) {
-				return FILTER_NONE
+				return 99999
 			}
 			if ( dbspec == DBSPEC_VALUE_ORG ) {
 				return 100000
 			}
 			if ( dbspec == DBSPEC_PARAM3_ORG ) {
@@ -76632,12 +78607,12 @@
 			reftype = FILTER_ITEM_TOOL
 			reftypeminor = FILTER_NOTHING
 			inv(INV_ITEM_NUM, ci) = 1
 			fixeditemenc = 0
 			inv(INV_ITEM_EFFECT, ci) = EFFECT_OPATOS_STATUE
-			ibitmod ITEM_BIT_PRECIOUS, ci, 1
-			ibitmod ITEM_BIT_PERIOD, ci, 1
+			ibitmod ITEM_BIT_PRECIOUS, ci, TRUE
+			ibitmod ITEM_BIT_PERIOD, ci, TRUE
 			inv(INV_ITEM_PARAM3, ci) = 240
 			inv(INV_ITEM_IDENTIFY_LEVEL, ci) = 0
 			fixlv = FIX_QUALITY_UNIQUE
 			return
 		}
@@ -76647,14 +78622,14 @@
 			reftype = FILTER_ITEM_TOOL
 			return
 		}
 		if ( dbmode == DBMODE_REF_SPEC ) {
 			if ( dbspec == DBSPEC_TYPE ) {
-				return FILTER_ITEM_TOOL
+				return 59000
 			}
 			if ( dbspec == DBSPEC_TYPE_MINOR ) {
-				return FILTER_NONE
+				return 99999
 			}
 			if ( dbspec == DBSPEC_VALUE_ORG ) {
 				return 100000
 			}
 			if ( dbspec == DBSPEC_PARAM3_ORG ) {
@@ -76709,14 +78684,14 @@
 			reftype = FILTER_ACCESSORY_RING
 			return
 		}
 		if ( dbmode == DBMODE_REF_SPEC ) {
 			if ( dbspec == DBSPEC_TYPE ) {
-				return FILTER_ACCESSORY_RING
+				return 32000
 			}
 			if ( dbspec == DBSPEC_TYPE_MINOR ) {
-				return FILTER_ACCESSORY_SMALL_RING
+				return 32001
 			}
 			if ( dbspec == DBSPEC_VALUE_ORG ) {
 				return 15000
 			}
 			if ( dbspec == DBSPEC_PARAM3_ORG ) {
@@ -76767,11 +78742,11 @@
 			inv(INV_ITEM_PIC, ci) = xy2pic(27, 19)
 			reftype = FILTER_JUNK
 			reftypeminor = FILTER_NOTHING
 			inv(INV_ITEM_NUM, ci) = 1
 			fixeditemenc = 0
-			ibitmod ITEM_BIT_PRECIOUS, ci, 1
+			ibitmod ITEM_BIT_PRECIOUS, ci, TRUE
 			inv(INV_ITEM_IDENTIFY_LEVEL, ci) = 0
 			fixlv = FIX_QUALITY_UNIQUE
 			return
 		}
 		if ( dbmode == DBMODE_REF ) {
@@ -76780,14 +78755,14 @@
 			reftype = FILTER_JUNK
 			return
 		}
 		if ( dbmode == DBMODE_REF_SPEC ) {
 			if ( dbspec == DBSPEC_TYPE ) {
-				return FILTER_JUNK
+				return 64000
 			}
 			if ( dbspec == DBSPEC_TYPE_MINOR ) {
-				return FILTER_NONE
+				return 99999
 			}
 			if ( dbspec == DBSPEC_VALUE_ORG ) {
 				return 25000
 			}
 			if ( dbspec == DBSPEC_PARAM3_ORG ) {
@@ -76830,11 +78805,11 @@
 			inv(INV_ITEM_PIC, ci) = xy2pic(24, 5)
 			reftype = FILTER_ITEM_FOOD
 			reftypeminor = FILTER_ITEM_FOOD_FRUIT
 			inv(INV_ITEM_NUM, ci) = 1
 			fixeditemenc = 0
-			ibitmod ITEM_BIT_PRECIOUS, ci, 1
+			ibitmod ITEM_BIT_PRECIOUS, ci, TRUE
 			inv(INV_ITEM_PARAM2, ci) = 7
 			inv(INV_ITEM_IDENTIFY_LEVEL, ci) = 0
 			fixlv = FIX_QUALITY_UNIQUE
 			return
 		}
@@ -76844,14 +78819,14 @@
 			reftype = FILTER_ITEM_FOOD
 			return
 		}
 		if ( dbmode == DBMODE_REF_SPEC ) {
 			if ( dbspec == DBSPEC_TYPE ) {
-				return FILTER_ITEM_FOOD
+				return 57000
 			}
 			if ( dbspec == DBSPEC_TYPE_MINOR ) {
-				return FILTER_ITEM_FOOD_FRUIT
+				return 57004
 			}
 			if ( dbspec == DBSPEC_VALUE_ORG ) {
 				return 100000
 			}
 			if ( dbspec == DBSPEC_PARAM3_ORG ) {
@@ -76896,12 +78871,12 @@
 			inv(INV_ITEM_ID, ci) = ITEM_ID_DAL_I_THALION
 			inv(INV_ITEM_PIC, ci) = xy2pic(30, 13)
 			reftype = FILTER_BOOTS
 			reftypeminor = FILTER_BOOTS_LIGHT
 			inv(INV_ITEM_NUM, ci) = 1
-			fixeditemenc = ENCHANT_RES_CURSE, 100, ENCHANT_FAST_TRAVEL, 100, ENCHANT_ATTRIBUTE * EXT_ENCHANTMENT + SKILL_ATTR_DEX, 250, ENCHANT_SKILL * EXT_ENCHANTMENT + SKILL_NORMAL_TRAVELING, 200, 0
-			ibitmod ITEM_BIT_PRECIOUS, ci, 1
+			fixeditemenc = 43, 100, 29, 100, ENCHANT_ATTRIBUTE * EXT_ENCHANTMENT + SKILL_ATTR_DEX, 250, ENCHANT_SKILL * EXT_ENCHANTMENT + SKILL_NORMAL_TRAVELING, 200, 0
+			ibitmod ITEM_BIT_PRECIOUS, ci, TRUE
 			inv(INV_ITEM_IDENTIFY_LEVEL, ci) = 500
 			fixlv = FIX_QUALITY_UNIQUE
 			return
 		}
 		if ( dbmode == DBMODE_REF ) {
@@ -76910,14 +78885,14 @@
 			reftype = FILTER_BOOTS
 			return
 		}
 		if ( dbmode == DBMODE_REF_SPEC ) {
 			if ( dbspec == DBSPEC_TYPE ) {
-				return FILTER_BOOTS
+				return 18000
 			}
 			if ( dbspec == DBSPEC_TYPE_MINOR ) {
-				return FILTER_BOOTS_LIGHT
+				return 18002
 			}
 			if ( dbspec == DBSPEC_VALUE_ORG ) {
 				return 25000
 			}
 			if ( dbspec == DBSPEC_PARAM3_ORG ) {
@@ -76950,40 +78925,40 @@
 		}
 		return 0
 	}
 	if ( dbid == ITEM_ID_SPELLBOOK_DARKNESS_ARROW ) {
 		if ( dbmode == DBMODE_SET_STATS | dbmode == DBMODE_SET ) {
-			inv(INV_ITEM_VALUE, ci) = 1700
+			inv(INV_ITEM_VALUE, ci) = 4800
 			inv(INV_ITEM_WEIGHT, ci) = 380
 		}
 		if ( dbmode == DBMODE_SET ) {
 			inv(INV_ITEM_ID, ci) = ITEM_ID_SPELLBOOK_DARKNESS_ARROW
 			inv(INV_ITEM_PIC, ci) = xy2pic(0, 13)
 			reftype = FILTER_ITEM_SPELLBOOK
 			reftypeminor = FILTER_NOTHING
 			inv(INV_ITEM_NUM, ci) = 1
 			fixeditemenc = 0
 			inv(INV_ITEM_IDENTIFY_LEVEL, ci) = 0
-			inv(INV_ITEM_CHARGE, ci) = 5 + rnd(5) - rnd(5)
-			ibitmod ITEM_BIT_CHARGE_ITEM, ci, 1
+			inv((9 /*!!!@[INV_ITEM_AMMO @@@ INV_ITEM_CHARGE @@@ INV_ITEM_CLIENT @@@ INV_ITEM_FILE @@@ INV_ITEM_NEXT_PERIOD]@!!! */), ci) = 5 + rnd(5) - rnd(5)
+			ibitmod ITEM_BIT_CHARGE_ITEM, ci, TRUE
 			return
 		}
 		if ( dbmode == DBMODE_REF ) {
 			ichargelevel = 5
 			infilterref = ""
 			reftype = FILTER_ITEM_SPELLBOOK
 			return
 		}
 		if ( dbmode == DBMODE_REF_SPEC ) {
 			if ( dbspec == DBSPEC_TYPE ) {
-				return FILTER_ITEM_SPELLBOOK
+				return 54000
 			}
 			if ( dbspec == DBSPEC_TYPE_MINOR ) {
-				return FILTER_NONE
+				return 99999
 			}
 			if ( dbspec == DBSPEC_VALUE_ORG ) {
-				return 1700
+				return 4800
 			}
 			if ( dbspec == DBSPEC_PARAM3_ORG ) {
 				return
 			}
 			if ( dbspec == DBSPEC_CAN_READ ) {
@@ -77006,12 +78981,12 @@
 			gosub *readSpellbook
 			return -1
 		}
 		if ( dbmode == DBMODE_DESC ) {
 			if ( jp ) {
-				description(0) = "\t\t「暗黒の矢」という呪文について学ぶことができる魔法書。クールに決めたいあなたに。\n#〜本の為の本・魔法書編〜\n"
-				description(1) = "<ランク3魔法>"
+				description(0) = "\t\t「暗黒の楔」という呪文について学ぶことができる魔法書。クールに決めたいあなたに。\n#〜本の為の本・魔法書編〜\n"
+				description(1) = "<ランク4魔法>"
 				description(2) = ""
 				description(3) = "\t\t暗黒属性の矢を唱える為に必要な本。読むことができる。\n#〜鑑定報告書：＜書物＞カテゴリ〜\n"
 			}
 			else {
 				description(0) = ""
@@ -77043,14 +79018,14 @@
 			reftype = FILTER_FURNITURE
 			return
 		}
 		if ( dbmode == DBMODE_REF_SPEC ) {
 			if ( dbspec == DBSPEC_TYPE ) {
-				return FILTER_FURNITURE
+				return 60000
 			}
 			if ( dbspec == DBSPEC_TYPE_MINOR ) {
-				return FILTER_NONE
+				return 99999
 			}
 			if ( dbspec == DBSPEC_VALUE_ORG ) {
 				return 1000
 			}
 			if ( dbspec == DBSPEC_PARAM3_ORG ) {
@@ -77104,14 +79079,14 @@
 			reftype = FILTER_FURNITURE
 			return
 		}
 		if ( dbmode == DBMODE_REF_SPEC ) {
 			if ( dbspec == DBSPEC_TYPE ) {
-				return FILTER_FURNITURE
+				return 60000
 			}
 			if ( dbspec == DBSPEC_TYPE_MINOR ) {
-				return FILTER_NONE
+				return 99999
 			}
 			if ( dbspec == DBSPEC_VALUE_ORG ) {
 				return 2500
 			}
 			if ( dbspec == DBSPEC_PARAM3_ORG ) {
@@ -77165,14 +79140,14 @@
 			reftype = FILTER_FURNITURE
 			return
 		}
 		if ( dbmode == DBMODE_REF_SPEC ) {
 			if ( dbspec == DBSPEC_TYPE ) {
-				return FILTER_FURNITURE
+				return 60000
 			}
 			if ( dbspec == DBSPEC_TYPE_MINOR ) {
-				return FILTER_NONE
+				return 99999
 			}
 			if ( dbspec == DBSPEC_VALUE_ORG ) {
 				return 3500
 			}
 			if ( dbspec == DBSPEC_PARAM3_ORG ) {
@@ -77226,14 +79201,14 @@
 			reftype = FILTER_FURNITURE
 			return
 		}
 		if ( dbmode == DBMODE_REF_SPEC ) {
 			if ( dbspec == DBSPEC_TYPE ) {
-				return FILTER_FURNITURE
+				return 60000
 			}
 			if ( dbspec == DBSPEC_TYPE_MINOR ) {
-				return FILTER_NONE
+				return 99999
 			}
 			if ( dbspec == DBSPEC_VALUE_ORG ) {
 				return 3000
 			}
 			if ( dbspec == DBSPEC_PARAM3_ORG ) {
@@ -77276,11 +79251,11 @@
 			inv(INV_ITEM_PIC, ci) = xy2pic(3, 5)
 			reftype = FILTER_ITEM_FOOD
 			reftypeminor = FILTER_ITEM_FOOD_FRUIT
 			inv(INV_ITEM_NUM, ci) = 1
 			fixeditemenc = 0
-			ibitmod ITEM_BIT_PRECIOUS, ci, 1
+			ibitmod ITEM_BIT_PRECIOUS, ci, TRUE
 			inv(INV_ITEM_PARAM2, ci) = 7
 			inv(INV_ITEM_IDENTIFY_LEVEL, ci) = 0
 			fixlv = FIX_QUALITY_UNIQUE
 			return
 		}
@@ -77290,14 +79265,14 @@
 			reftype = FILTER_ITEM_FOOD
 			return
 		}
 		if ( dbmode == DBMODE_REF_SPEC ) {
 			if ( dbspec == DBSPEC_TYPE ) {
-				return FILTER_ITEM_FOOD
+				return 57000
 			}
 			if ( dbspec == DBSPEC_TYPE_MINOR ) {
-				return FILTER_ITEM_FOOD_FRUIT
+				return 57004
 			}
 			if ( dbspec == DBSPEC_VALUE_ORG ) {
 				return 100000
 			}
 			if ( dbspec == DBSPEC_PARAM3_ORG ) {
@@ -77352,14 +79327,14 @@
 			reftype = FILTER_FURNITURE
 			return
 		}
 		if ( dbmode == DBMODE_REF_SPEC ) {
 			if ( dbspec == DBSPEC_TYPE ) {
-				return FILTER_FURNITURE
+				return 60000
 			}
 			if ( dbspec == DBSPEC_TYPE_MINOR ) {
-				return FILTER_FURNITURE_BED
+				return 60004
 			}
 			if ( dbspec == DBSPEC_VALUE_ORG ) {
 				return 7500
 			}
 			if ( dbspec == DBSPEC_PARAM3_ORG ) {
@@ -77416,14 +79391,14 @@
 			reftype = FILTER_FURNITURE
 			return
 		}
 		if ( dbmode == DBMODE_REF_SPEC ) {
 			if ( dbspec == DBSPEC_TYPE ) {
-				return FILTER_FURNITURE
+				return 60000
 			}
 			if ( dbspec == DBSPEC_TYPE_MINOR ) {
-				return FILTER_NONE
+				return 99999
 			}
 			if ( dbspec == DBSPEC_VALUE_ORG ) {
 				return 600
 			}
 			if ( dbspec == DBSPEC_PARAM3_ORG ) {
@@ -77477,14 +79452,14 @@
 			reftype = FILTER_FURNITURE
 			return
 		}
 		if ( dbmode == DBMODE_REF_SPEC ) {
 			if ( dbspec == DBSPEC_TYPE ) {
-				return FILTER_FURNITURE
+				return 60000
 			}
 			if ( dbspec == DBSPEC_TYPE_MINOR ) {
-				return FILTER_NONE
+				return 99999
 			}
 			if ( dbspec == DBSPEC_VALUE_ORG ) {
 				return 3500
 			}
 			if ( dbspec == DBSPEC_PARAM3_ORG ) {
@@ -77538,14 +79513,14 @@
 			reftype = FILTER_FURNITURE
 			return
 		}
 		if ( dbmode == DBMODE_REF_SPEC ) {
 			if ( dbspec == DBSPEC_TYPE ) {
-				return FILTER_FURNITURE
+				return 60000
 			}
 			if ( dbspec == DBSPEC_TYPE_MINOR ) {
-				return FILTER_NONE
+				return 99999
 			}
 			if ( dbspec == DBSPEC_VALUE_ORG ) {
 				return 4800
 			}
 			if ( dbspec == DBSPEC_PARAM3_ORG ) {
@@ -77599,14 +79574,14 @@
 			reftype = FILTER_FURNITURE_WELL
 			return
 		}
 		if ( dbmode == DBMODE_REF_SPEC ) {
 			if ( dbspec == DBSPEC_TYPE ) {
-				return FILTER_FURNITURE_WELL
+				return 60001
 			}
 			if ( dbspec == DBSPEC_TYPE_MINOR ) {
-				return FILTER_FURNITURE_WELL
+				return 60001
 			}
 			if ( dbspec == DBSPEC_VALUE_ORG ) {
 				return 1000
 			}
 			if ( dbspec == DBSPEC_PARAM3_ORG ) {
@@ -77667,14 +79642,14 @@
 			reftype = FILTER_FURNITURE
 			return
 		}
 		if ( dbmode == DBMODE_REF_SPEC ) {
 			if ( dbspec == DBSPEC_TYPE ) {
-				return FILTER_FURNITURE
+				return 60000
 			}
 			if ( dbspec == DBSPEC_TYPE_MINOR ) {
-				return FILTER_NONE
+				return 99999
 			}
 			if ( dbspec == DBSPEC_VALUE_ORG ) {
 				return 1500
 			}
 			if ( dbspec == DBSPEC_PARAM3_ORG ) {
@@ -77729,14 +79704,14 @@
 			reftype = FILTER_FURNITURE
 			return
 		}
 		if ( dbmode == DBMODE_REF_SPEC ) {
 			if ( dbspec == DBSPEC_TYPE ) {
-				return FILTER_FURNITURE
+				return 60000
 			}
 			if ( dbspec == DBSPEC_TYPE_MINOR ) {
-				return FILTER_NONE
+				return 99999
 			}
 			if ( dbspec == DBSPEC_VALUE_ORG ) {
 				return 2500
 			}
 			if ( dbspec == DBSPEC_PARAM3_ORG ) {
@@ -77790,14 +79765,14 @@
 			reftype = FILTER_FURNITURE
 			return
 		}
 		if ( dbmode == DBMODE_REF_SPEC ) {
 			if ( dbspec == DBSPEC_TYPE ) {
-				return FILTER_FURNITURE
+				return 60000
 			}
 			if ( dbspec == DBSPEC_TYPE_MINOR ) {
-				return FILTER_NONE
+				return 99999
 			}
 			if ( dbspec == DBSPEC_VALUE_ORG ) {
 				return 5000
 			}
 			if ( dbspec == DBSPEC_PARAM3_ORG ) {
@@ -77851,14 +79826,14 @@
 			reftype = FILTER_FURNITURE
 			return
 		}
 		if ( dbmode == DBMODE_REF_SPEC ) {
 			if ( dbspec == DBSPEC_TYPE ) {
-				return FILTER_FURNITURE
+				return 60000
 			}
 			if ( dbspec == DBSPEC_TYPE_MINOR ) {
-				return FILTER_NONE
+				return 99999
 			}
 			if ( dbspec == DBSPEC_VALUE_ORG ) {
 				return 1800
 			}
 			if ( dbspec == DBSPEC_PARAM3_ORG ) {
@@ -77912,14 +79887,14 @@
 			reftype = FILTER_FURNITURE
 			return
 		}
 		if ( dbmode == DBMODE_REF_SPEC ) {
 			if ( dbspec == DBSPEC_TYPE ) {
-				return FILTER_FURNITURE
+				return 60000
 			}
 			if ( dbspec == DBSPEC_TYPE_MINOR ) {
-				return FILTER_NONE
+				return 99999
 			}
 			if ( dbspec == DBSPEC_VALUE_ORG ) {
 				return 9500
 			}
 			if ( dbspec == DBSPEC_PARAM3_ORG ) {
@@ -77973,14 +79948,14 @@
 			reftype = FILTER_FURNITURE
 			return
 		}
 		if ( dbmode == DBMODE_REF_SPEC ) {
 			if ( dbspec == DBSPEC_TYPE ) {
-				return FILTER_FURNITURE
+				return 60000
 			}
 			if ( dbspec == DBSPEC_TYPE_MINOR ) {
-				return FILTER_NONE
+				return 99999
 			}
 			if ( dbspec == DBSPEC_VALUE_ORG ) {
 				return 2400
 			}
 			if ( dbspec == DBSPEC_PARAM3_ORG ) {
@@ -78035,14 +80010,14 @@
 			reftype = FILTER_ITEM_TOOL
 			return
 		}
 		if ( dbmode == DBMODE_REF_SPEC ) {
 			if ( dbspec == DBSPEC_TYPE ) {
-				return FILTER_ITEM_TOOL
+				return 59000
 			}
 			if ( dbspec == DBSPEC_TYPE_MINOR ) {
-				return FILTER_FURNITURE_BED
+				return 60004
 			}
 			if ( dbspec == DBSPEC_VALUE_ORG ) {
 				return 2500
 			}
 			if ( dbspec == DBSPEC_PARAM3_ORG ) {
@@ -78099,14 +80074,14 @@
 			reftype = FILTER_FURNITURE
 			return
 		}
 		if ( dbmode == DBMODE_REF_SPEC ) {
 			if ( dbspec == DBSPEC_TYPE ) {
-				return FILTER_FURNITURE
+				return 60000
 			}
 			if ( dbspec == DBSPEC_TYPE_MINOR ) {
-				return FILTER_NONE
+				return 99999
 			}
 			if ( dbspec == DBSPEC_VALUE_ORG ) {
 				return 500
 			}
 			if ( dbspec == DBSPEC_PARAM3_ORG ) {
@@ -78149,11 +80124,11 @@
 			inv(INV_ITEM_PIC, ci) = xy2pic(9, 19)
 			reftype = FILTER_CONTAINER
 			reftypeminor = FILTER_NOTHING
 			inv(INV_ITEM_NUM, ci) = 1
 			fixeditemenc = 0
-			ibitmod ITEM_BIT_PRECIOUS, ci, 1
+			ibitmod ITEM_BIT_PRECIOUS, ci, TRUE
 			inv(INV_ITEM_IDENTIFY_LEVEL, ci) = 0
 			fixlv = FIX_QUALITY_UNIQUE
 			return
 		}
 		if ( dbmode == DBMODE_REF ) {
@@ -78162,14 +80137,14 @@
 			reftype = FILTER_CONTAINER
 			return
 		}
 		if ( dbmode == DBMODE_REF_SPEC ) {
 			if ( dbspec == DBSPEC_TYPE ) {
-				return FILTER_CONTAINER
+				return 72000
 			}
 			if ( dbspec == DBSPEC_TYPE_MINOR ) {
-				return FILTER_NONE
+				return 99999
 			}
 			if ( dbspec == DBSPEC_VALUE_ORG ) {
 				return 7500
 			}
 			if ( dbspec == DBSPEC_PARAM3_ORG ) {
@@ -78224,14 +80199,14 @@
 			reftype = FILTER_ITEM_TOOL
 			return
 		}
 		if ( dbmode == DBMODE_REF_SPEC ) {
 			if ( dbspec == DBSPEC_TYPE ) {
-				return FILTER_ITEM_TOOL
+				return 59000
 			}
 			if ( dbspec == DBSPEC_TYPE_MINOR ) {
-				return FILTER_NONE
+				return 99999
 			}
 			if ( dbspec == DBSPEC_VALUE_ORG ) {
 				return 8000
 			}
 			if ( dbspec == DBSPEC_PARAM3_ORG ) {
@@ -78274,11 +80249,11 @@
 			inv(INV_ITEM_PIC, ci) = xy2pic(7, 5)
 			reftype = FILTER_ITEM_FOOD
 			reftypeminor = FILTER_ITEM_FOOD_FRUIT
 			inv(INV_ITEM_NUM, ci) = 1
 			fixeditemenc = 0
-			ibitmod ITEM_BIT_PRECIOUS, ci, 1
+			ibitmod ITEM_BIT_PRECIOUS, ci, TRUE
 			inv(INV_ITEM_PARAM2, ci) = 7
 			inv(INV_ITEM_IDENTIFY_LEVEL, ci) = 0
 			fixlv = FIX_QUALITY_UNIQUE
 			return
 		}
@@ -78288,14 +80263,14 @@
 			reftype = FILTER_ITEM_FOOD
 			return
 		}
 		if ( dbmode == DBMODE_REF_SPEC ) {
 			if ( dbspec == DBSPEC_TYPE ) {
-				return FILTER_ITEM_FOOD
+				return 57000
 			}
 			if ( dbspec == DBSPEC_TYPE_MINOR ) {
-				return FILTER_ITEM_FOOD_FRUIT
+				return 57004
 			}
 			if ( dbspec == DBSPEC_VALUE_ORG ) {
 				return 100000
 			}
 			if ( dbspec == DBSPEC_PARAM3_ORG ) {
@@ -78349,14 +80324,14 @@
 			reftype = FILTER_ITEM_SCROLL
 			return
 		}
 		if ( dbmode == DBMODE_REF_SPEC ) {
 			if ( dbspec == DBSPEC_TYPE ) {
-				return FILTER_ITEM_SCROLL
+				return 53000
 			}
 			if ( dbspec == DBSPEC_TYPE_MINOR ) {
-				return FILTER_NONE
+				return 99999
 			}
 			if ( dbspec == DBSPEC_VALUE_ORG ) {
 				return 450
 			}
 			if ( dbspec == DBSPEC_PARAM3_ORG ) {
@@ -78408,11 +80383,11 @@
 			inv(INV_ITEM_PIC, ci) = xy2pic(6, 19)
 			reftype = FILTER_ITEM_TOOL
 			reftypeminor = FILTER_NOTHING
 			inv(INV_ITEM_NUM, ci) = 1
 			fixeditemenc = 0
-			ibitmod ITEM_BIT_PRECIOUS, ci, 1
+			ibitmod ITEM_BIT_PRECIOUS, ci, TRUE
 			inv(INV_ITEM_IDENTIFY_LEVEL, ci) = 0
 			fixlv = FIX_QUALITY_UNIQUE
 			return
 		}
 		if ( dbmode == DBMODE_REF ) {
@@ -78421,14 +80396,14 @@
 			reftype = FILTER_ITEM_TOOL
 			return
 		}
 		if ( dbmode == DBMODE_REF_SPEC ) {
 			if ( dbspec == DBSPEC_TYPE ) {
-				return FILTER_ITEM_TOOL
+				return 59000
 			}
 			if ( dbspec == DBSPEC_TYPE_MINOR ) {
-				return FILTER_NONE
+				return 99999
 			}
 			if ( dbspec == DBSPEC_VALUE_ORG ) {
 				return 150000
 			}
 			if ( dbspec == DBSPEC_PARAM3_ORG ) {
@@ -78482,14 +80457,14 @@
 			reftype = FILTER_ITEM_TOOL
 			return
 		}
 		if ( dbmode == DBMODE_REF_SPEC ) {
 			if ( dbspec == DBSPEC_TYPE ) {
-				return FILTER_ITEM_TOOL
+				return 59000
 			}
 			if ( dbspec == DBSPEC_TYPE_MINOR ) {
-				return FILTER_NONE
+				return 99999
 			}
 			if ( dbspec == DBSPEC_VALUE_ORG ) {
 				return 800
 			}
 			if ( dbspec == DBSPEC_PARAM3_ORG ) {
@@ -78544,14 +80519,14 @@
 			reftype = FILTER_ITEM_TOOL
 			return
 		}
 		if ( dbmode == DBMODE_REF_SPEC ) {
 			if ( dbspec == DBSPEC_TYPE ) {
-				return FILTER_ITEM_TOOL
+				return 59000
 			}
 			if ( dbspec == DBSPEC_TYPE_MINOR ) {
-				return FILTER_NONE
+				return 99999
 			}
 			if ( dbspec == DBSPEC_VALUE_ORG ) {
 				return 7500
 			}
 			if ( dbspec == DBSPEC_PARAM3_ORG ) {
@@ -78609,14 +80584,14 @@
 			reftype = FILTER_ITEM_TOOL
 			return
 		}
 		if ( dbmode == DBMODE_REF_SPEC ) {
 			if ( dbspec == DBSPEC_TYPE ) {
-				return FILTER_ITEM_TOOL
+				return 59000
 			}
 			if ( dbspec == DBSPEC_TYPE_MINOR ) {
-				return FILTER_NONE
+				return 99999
 			}
 			if ( dbspec == DBSPEC_VALUE_ORG ) {
 				return 1200
 			}
 			if ( dbspec == DBSPEC_PARAM3_ORG ) {
@@ -78677,14 +80652,14 @@
 			reftype = FILTER_RANGE
 			return
 		}
 		if ( dbmode == DBMODE_REF_SPEC ) {
 			if ( dbspec == DBSPEC_TYPE ) {
-				return FILTER_RANGE
+				return 24000
 			}
 			if ( dbspec == DBSPEC_TYPE_MINOR ) {
-				return FILTER_RANGE_ROCK_THROW
+				return 24030
 			}
 			if ( dbspec == DBSPEC_VALUE_ORG ) {
 				return 13000
 			}
 			if ( dbspec == DBSPEC_PARAM3_ORG ) {
@@ -78738,14 +80713,14 @@
 			reftype = FILTER_ITEM_SCROLL
 			return
 		}
 		if ( dbmode == DBMODE_REF_SPEC ) {
 			if ( dbspec == DBSPEC_TYPE ) {
-				return FILTER_ITEM_SCROLL
+				return 53000
 			}
 			if ( dbspec == DBSPEC_TYPE_MINOR ) {
-				return FILTER_NONE
+				return 99999
 			}
 			if ( dbspec == DBSPEC_VALUE_ORG ) {
 				return 40000
 			}
 			if ( dbspec == DBSPEC_PARAM3_ORG ) {
@@ -78808,14 +80783,14 @@
 			reftype = FILTER_FURNITURE
 			return
 		}
 		if ( dbmode == DBMODE_REF_SPEC ) {
 			if ( dbspec == DBSPEC_TYPE ) {
-				return FILTER_FURNITURE
+				return 60000
 			}
 			if ( dbspec == DBSPEC_TYPE_MINOR ) {
-				return FILTER_NONE
+				return 99999
 			}
 			if ( dbspec == DBSPEC_VALUE_ORG ) {
 				return 50
 			}
 			if ( dbspec == DBSPEC_PARAM3_ORG ) {
@@ -78870,14 +80845,14 @@
 			reftype = FILTER_ITEM_TOOL
 			return
 		}
 		if ( dbmode == DBMODE_REF_SPEC ) {
 			if ( dbspec == DBSPEC_TYPE ) {
-				return FILTER_ITEM_TOOL
+				return 59000
 			}
 			if ( dbspec == DBSPEC_TYPE_MINOR ) {
-				return FILTER_NONE
+				return 99999
 			}
 			if ( dbspec == DBSPEC_VALUE_ORG ) {
 				return 2500
 			}
 			if ( dbspec == DBSPEC_PARAM3_ORG ) {
@@ -78925,26 +80900,26 @@
 			reftypeminor = FILTER_NOTHING
 			inv(INV_ITEM_NUM, ci) = 1
 			fixeditemenc = 0
 			inv(INV_ITEM_EFFECT, ci) = EFFECT_INCOGNITO
 			inv(INV_ITEM_IDENTIFY_LEVEL, ci) = 0
-			inv(INV_ITEM_CHARGE, ci) = 4 + rnd(4) - rnd(4)
-			ibitmod ITEM_BIT_CHARGE_ITEM, ci, 1
+			inv((9 /*!!!@[INV_ITEM_AMMO @@@ INV_ITEM_CHARGE @@@ INV_ITEM_CLIENT @@@ INV_ITEM_FILE @@@ INV_ITEM_NEXT_PERIOD]@!!! */), ci) = 4 + rnd(4) - rnd(4)
+			ibitmod ITEM_BIT_CHARGE_ITEM, ci, TRUE
 			return
 		}
 		if ( dbmode == DBMODE_REF ) {
 			ichargelevel = 4
 			infilterref = ""
 			reftype = FILTER_ITEM_TOOL
 			return
 		}
 		if ( dbmode == DBMODE_REF_SPEC ) {
 			if ( dbspec == DBSPEC_TYPE ) {
-				return FILTER_ITEM_TOOL
+				return 59000
 			}
 			if ( dbspec == DBSPEC_TYPE_MINOR ) {
-				return FILTER_NONE
+				return 99999
 			}
 			if ( dbspec == DBSPEC_VALUE_ORG ) {
 				return 7200
 			}
 			if ( dbspec == DBSPEC_PARAM3_ORG ) {
@@ -78991,26 +80966,26 @@
 			reftype = FILTER_ITEM_SPELLBOOK
 			reftypeminor = FILTER_NOTHING
 			inv(INV_ITEM_NUM, ci) = 1
 			fixeditemenc = 0
 			inv(INV_ITEM_IDENTIFY_LEVEL, ci) = 0
-			inv(INV_ITEM_CHARGE, ci) = 4 + rnd(4) - rnd(4)
-			ibitmod ITEM_BIT_CHARGE_ITEM, ci, 1
+			inv((9 /*!!!@[INV_ITEM_AMMO @@@ INV_ITEM_CHARGE @@@ INV_ITEM_CLIENT @@@ INV_ITEM_FILE @@@ INV_ITEM_NEXT_PERIOD]@!!! */), ci) = 4 + rnd(4) - rnd(4)
+			ibitmod ITEM_BIT_CHARGE_ITEM, ci, TRUE
 			return
 		}
 		if ( dbmode == DBMODE_REF ) {
 			ichargelevel = 4
 			infilterref = ""
 			reftype = FILTER_ITEM_SPELLBOOK
 			return
 		}
 		if ( dbmode == DBMODE_REF_SPEC ) {
 			if ( dbspec == DBSPEC_TYPE ) {
-				return FILTER_ITEM_SPELLBOOK
+				return 54000
 			}
 			if ( dbspec == DBSPEC_TYPE_MINOR ) {
-				return FILTER_NONE
+				return 99999
 			}
 			if ( dbspec == DBSPEC_VALUE_ORG ) {
 				return 3500
 			}
 			if ( dbspec == DBSPEC_PARAM3_ORG ) {
@@ -79064,12 +81039,12 @@
 			inv(INV_ITEM_ID, ci) = ITEM_ID_SAGES_HELM
 			inv(INV_ITEM_PIC, ci) = xy2pic(18, 14)
 			reftype = FILTER_HELM
 			reftypeminor = FILTER_HELM_HEAVY
 			inv(INV_ITEM_NUM, ci) = 1
-			fixeditemenc = ENCHANT_RES_CONFUSE, 100, ENCHANT_SEE_INVISIBLE, 100, ENCHANT_ATTRIBUTE * EXT_ENCHANTMENT + SKILL_ATTR_MAG, 200, ENCHANT_RESISTANCE * EXT_ENCHANTMENT + SKILL_RES_MIND, 250, ENCHANT_RESISTANCE * EXT_ENCHANTMENT + SKILL_RES_MAGIC, 150, ENCHANT_SKILL * EXT_ENCHANTMENT + SKILL_NORMAL_ANATOMY, 300, 0
-			ibitmod ITEM_BIT_PRECIOUS, ci, 1
+			fixeditemenc = 25, 100, 35, 100, ENCHANT_ATTRIBUTE * EXT_ENCHANTMENT + SKILL_ATTR_MAG, 200, ENCHANT_RESISTANCE * EXT_ENCHANTMENT + SKILL_RES_MIND, 250, ENCHANT_RESISTANCE * EXT_ENCHANTMENT + SKILL_RES_MAGIC, 150, ENCHANT_SKILL * EXT_ENCHANTMENT + SKILL_NORMAL_ANATOMY, 300, 0
+			ibitmod ITEM_BIT_PRECIOUS, ci, TRUE
 			inv(INV_ITEM_IDENTIFY_LEVEL, ci) = 500
 			fixlv = FIX_QUALITY_UNIQUE
 			return
 		}
 		if ( dbmode == DBMODE_REF ) {
@@ -79078,14 +81053,14 @@
 			reftype = FILTER_HELM
 			return
 		}
 		if ( dbmode == DBMODE_REF_SPEC ) {
 			if ( dbspec == DBSPEC_TYPE ) {
-				return FILTER_HELM
+				return 12000
 			}
 			if ( dbspec == DBSPEC_TYPE_MINOR ) {
-				return FILTER_HELM_HEAVY
+				return 12001
 			}
 			if ( dbspec == DBSPEC_VALUE_ORG ) {
 				return 40000
 			}
 			if ( dbspec == DBSPEC_PARAM3_ORG ) {
@@ -79128,11 +81103,11 @@
 			inv(INV_ITEM_PIC, ci) = xy2pic(24, 10)
 			reftype = FILTER_ITEM_POTION
 			reftypeminor = FILTER_NOTHING
 			inv(INV_ITEM_NUM, ci) = 1
 			fixeditemenc = 0
-			ibitmod ITEM_BIT_PRECIOUS, ci, 1
+			ibitmod ITEM_BIT_PRECIOUS, ci, TRUE
 			inv(INV_ITEM_IDENTIFY_LEVEL, ci) = 0
 			return
 		}
 		if ( dbmode == DBMODE_REF ) {
 			ichargelevel = 0
@@ -79140,14 +81115,14 @@
 			reftype = FILTER_ITEM_POTION
 			return
 		}
 		if ( dbmode == DBMODE_REF_SPEC ) {
 			if ( dbspec == DBSPEC_TYPE ) {
-				return FILTER_ITEM_POTION
+				return 52000
 			}
 			if ( dbspec == DBSPEC_TYPE_MINOR ) {
-				return FILTER_NONE
+				return 99999
 			}
 			if ( dbspec == DBSPEC_VALUE_ORG ) {
 				return 50000
 			}
 			if ( dbspec == DBSPEC_PARAM3_ORG ) {
@@ -79199,11 +81174,11 @@
 			inv(INV_ITEM_PIC, ci) = xy2pic(0, 19)
 			reftype = FILTER_FURNITURE
 			reftypeminor = FILTER_NOTHING
 			inv(INV_ITEM_NUM, ci) = 1
 			fixeditemenc = 0
-			ibitmod ITEM_BIT_PRECIOUS, ci, 1
+			ibitmod ITEM_BIT_PRECIOUS, ci, TRUE
 			inv(INV_ITEM_IDENTIFY_LEVEL, ci) = 0
 			return
 		}
 		if ( dbmode == DBMODE_REF ) {
 			ichargelevel = 0
@@ -79211,14 +81186,14 @@
 			reftype = FILTER_FURNITURE
 			return
 		}
 		if ( dbmode == DBMODE_REF_SPEC ) {
 			if ( dbspec == DBSPEC_TYPE ) {
-				return FILTER_FURNITURE
+				return 60000
 			}
 			if ( dbspec == DBSPEC_TYPE_MINOR ) {
-				return FILTER_NONE
+				return 99999
 			}
 			if ( dbspec == DBSPEC_VALUE_ORG ) {
 				return 7500
 			}
 			if ( dbspec == DBSPEC_PARAM3_ORG ) {
@@ -79261,11 +81236,11 @@
 			inv(INV_ITEM_PIC, ci) = xy2pic(0, 13)
 			reftype = FILTER_ITEM_BOOK
 			reftypeminor = FILTER_NOTHING
 			inv(INV_ITEM_NUM, ci) = 1
 			fixeditemenc = 0
-			ibitmod ITEM_BIT_PRECIOUS, ci, 1
+			ibitmod ITEM_BIT_PRECIOUS, ci, TRUE
 			inv(INV_ITEM_IDENTIFY_LEVEL, ci) = 0
 			return
 		}
 		if ( dbmode == DBMODE_REF ) {
 			ichargelevel = 0
@@ -79273,14 +81248,14 @@
 			reftype = FILTER_ITEM_BOOK
 			return
 		}
 		if ( dbmode == DBMODE_REF_SPEC ) {
 			if ( dbspec == DBSPEC_TYPE ) {
-				return FILTER_ITEM_BOOK
+				return 55000
 			}
 			if ( dbspec == DBSPEC_TYPE_MINOR ) {
-				return FILTER_NONE
+				return 99999
 			}
 			if ( dbspec == DBSPEC_VALUE_ORG ) {
 				return 10000
 			}
 			if ( dbspec == DBSPEC_PARAM3_ORG ) {
@@ -79332,11 +81307,11 @@
 			inv(INV_ITEM_PIC, ci) = xy2pic(0, 13)
 			reftype = FILTER_ITEM_BOOK
 			reftypeminor = FILTER_NOTHING
 			inv(INV_ITEM_NUM, ci) = 1
 			fixeditemenc = 0
-			ibitmod ITEM_BIT_PRECIOUS, ci, 1
+			ibitmod ITEM_BIT_PRECIOUS, ci, TRUE
 			inv(INV_ITEM_IDENTIFY_LEVEL, ci) = 0
 			return
 		}
 		if ( dbmode == DBMODE_REF ) {
 			ichargelevel = 0
@@ -79344,14 +81319,14 @@
 			reftype = FILTER_ITEM_BOOK
 			return
 		}
 		if ( dbmode == DBMODE_REF_SPEC ) {
 			if ( dbspec == DBSPEC_TYPE ) {
-				return FILTER_ITEM_BOOK
+				return 55000
 			}
 			if ( dbspec == DBSPEC_TYPE_MINOR ) {
-				return FILTER_NONE
+				return 99999
 			}
 			if ( dbspec == DBSPEC_VALUE_ORG ) {
 				return 15000
 			}
 			if ( dbspec == DBSPEC_PARAM3_ORG ) {
@@ -79403,11 +81378,11 @@
 			inv(INV_ITEM_PIC, ci) = xy2pic(0, 5)
 			reftype = FILTER_ORE
 			reftypeminor = FILTER_NOTHING
 			inv(INV_ITEM_NUM, ci) = 1
 			fixeditemenc = 0
-			ibitmod ITEM_BIT_PRECIOUS, ci, 1
+			ibitmod ITEM_BIT_PRECIOUS, ci, TRUE
 			inv(INV_ITEM_IDENTIFY_LEVEL, ci) = 0
 			return
 		}
 		if ( dbmode == DBMODE_REF ) {
 			ichargelevel = 0
@@ -79415,14 +81390,14 @@
 			reftype = FILTER_ORE
 			return
 		}
 		if ( dbmode == DBMODE_REF_SPEC ) {
 			if ( dbspec == DBSPEC_TYPE ) {
-				return FILTER_ORE
+				return 77000
 			}
 			if ( dbspec == DBSPEC_TYPE_MINOR ) {
-				return FILTER_NONE
+				return 99999
 			}
 			if ( dbspec == DBSPEC_VALUE_ORG ) {
 				return 1
 			}
 			if ( dbspec == DBSPEC_PARAM3_ORG ) {
@@ -79476,14 +81451,14 @@
 			reftype = FILTER_ITEM_SCROLL
 			return
 		}
 		if ( dbmode == DBMODE_REF_SPEC ) {
 			if ( dbspec == DBSPEC_TYPE ) {
-				return FILTER_ITEM_SCROLL
+				return 53000
 			}
 			if ( dbspec == DBSPEC_TYPE_MINOR ) {
-				return FILTER_NONE
+				return 99999
 			}
 			if ( dbspec == DBSPEC_VALUE_ORG ) {
 				return 10000
 			}
 			if ( dbspec == DBSPEC_PARAM3_ORG ) {
@@ -79546,14 +81521,14 @@
 			reftype = FILTER_ITEM_POTION
 			return
 		}
 		if ( dbmode == DBMODE_REF_SPEC ) {
 			if ( dbspec == DBSPEC_TYPE ) {
-				return FILTER_ITEM_POTION
+				return 52000
 			}
 			if ( dbspec == DBSPEC_TYPE_MINOR ) {
-				return FILTER_NONE
+				return 99999
 			}
 			if ( dbspec == DBSPEC_VALUE_ORG ) {
 				return 4500
 			}
 			if ( dbspec == DBSPEC_PARAM3_ORG ) {
@@ -79616,14 +81591,14 @@
 			reftype = FILTER_JUNK
 			return
 		}
 		if ( dbmode == DBMODE_REF_SPEC ) {
 			if ( dbspec == DBSPEC_TYPE ) {
-				return FILTER_JUNK
+				return 64000
 			}
 			if ( dbspec == DBSPEC_TYPE_MINOR ) {
-				return FILTER_NONE
+				return 99999
 			}
 			if ( dbspec == DBSPEC_VALUE_ORG ) {
 				return 1200
 			}
 			if ( dbspec == DBSPEC_PARAM3_ORG ) {
@@ -79680,14 +81655,14 @@
 			reftype = FILTER_ITEM_FOOD
 			return
 		}
 		if ( dbmode == DBMODE_REF_SPEC ) {
 			if ( dbspec == DBSPEC_TYPE ) {
-				return FILTER_ITEM_FOOD
+				return 57000
 			}
 			if ( dbspec == DBSPEC_TYPE_MINOR ) {
-				return FILTER_NONE
+				return 99999
 			}
 			if ( dbspec == DBSPEC_VALUE_ORG ) {
 				return 1200
 			}
 			if ( dbspec == DBSPEC_PARAM3_ORG ) {
@@ -79749,14 +81724,14 @@
 			reftype = FILTER_JUNK
 			return
 		}
 		if ( dbmode == DBMODE_REF_SPEC ) {
 			if ( dbspec == DBSPEC_TYPE ) {
-				return FILTER_JUNK
+				return 64000
 			}
 			if ( dbspec == DBSPEC_TYPE_MINOR ) {
-				return FILTER_NONE
+				return 99999
 			}
 			if ( dbspec == DBSPEC_VALUE_ORG ) {
 				return 1000
 			}
 			if ( dbspec == DBSPEC_PARAM3_ORG ) {
@@ -79799,11 +81774,11 @@
 			inv(INV_ITEM_PIC, ci) = xy2pic(21, 11)
 			reftype = FILTER_CONTAINER
 			reftypeminor = FILTER_NOTHING
 			inv(INV_ITEM_NUM, ci) = 1
 			fixeditemenc = 0
-			ibitmod ITEM_BIT_PRECIOUS, ci, 1
+			ibitmod ITEM_BIT_PRECIOUS, ci, TRUE
 			inv(INV_ITEM_IDENTIFY_LEVEL, ci) = 0
 			return
 		}
 		if ( dbmode == DBMODE_REF ) {
 			ichargelevel = 0
@@ -79811,14 +81786,14 @@
 			reftype = FILTER_CONTAINER
 			return
 		}
 		if ( dbmode == DBMODE_REF_SPEC ) {
 			if ( dbspec == DBSPEC_TYPE ) {
-				return FILTER_CONTAINER
+				return 72000
 			}
 			if ( dbspec == DBSPEC_TYPE_MINOR ) {
-				return FILTER_NONE
+				return 99999
 			}
 			if ( dbspec == DBSPEC_VALUE_ORG ) {
 				return 14500
 			}
 			if ( dbspec == DBSPEC_PARAM3_ORG ) {
@@ -79861,11 +81836,11 @@
 			inv(INV_ITEM_PIC, ci) = xy2pic(20, 11)
 			reftype = FILTER_ITEM_SCROLL
 			reftypeminor = FILTER_NOTHING
 			inv(INV_ITEM_NUM, ci) = 1
 			fixeditemenc = 0
-			ibitmod ITEM_BIT_PRECIOUS, ci, 1
+			ibitmod ITEM_BIT_PRECIOUS, ci, TRUE
 			inv(INV_ITEM_IDENTIFY_LEVEL, ci) = 0
 			return
 		}
 		if ( dbmode == DBMODE_REF ) {
 			ichargelevel = 0
@@ -79873,14 +81848,14 @@
 			reftype = FILTER_ITEM_SCROLL
 			return
 		}
 		if ( dbmode == DBMODE_REF_SPEC ) {
 			if ( dbspec == DBSPEC_TYPE ) {
-				return FILTER_ITEM_SCROLL
+				return 53000
 			}
 			if ( dbspec == DBSPEC_TYPE_MINOR ) {
-				return FILTER_NONE
+				return 99999
 			}
 			if ( dbspec == DBSPEC_VALUE_ORG ) {
 				return 100
 			}
 			if ( dbspec == DBSPEC_PARAM3_ORG ) {
@@ -79934,14 +81909,14 @@
 			reftype = FILTER_FURNITURE
 			return
 		}
 		if ( dbmode == DBMODE_REF_SPEC ) {
 			if ( dbspec == DBSPEC_TYPE ) {
-				return FILTER_FURNITURE
+				return 60000
 			}
 			if ( dbspec == DBSPEC_TYPE_MINOR ) {
-				return FILTER_NONE
+				return 99999
 			}
 			if ( dbspec == DBSPEC_VALUE_ORG ) {
 				return 2000
 			}
 			if ( dbspec == DBSPEC_PARAM3_ORG ) {
@@ -79996,14 +81971,14 @@
 			reftype = FILTER_FURNITURE
 			return
 		}
 		if ( dbmode == DBMODE_REF_SPEC ) {
 			if ( dbspec == DBSPEC_TYPE ) {
-				return FILTER_FURNITURE
+				return 60000
 			}
 			if ( dbspec == DBSPEC_TYPE_MINOR ) {
-				return FILTER_FURNITURE_BED
+				return 60004
 			}
 			if ( dbspec == DBSPEC_VALUE_ORG ) {
 				return 35000
 			}
 			if ( dbspec == DBSPEC_PARAM3_ORG ) {
@@ -80060,14 +82035,14 @@
 			reftype = FILTER_FURNITURE
 			return
 		}
 		if ( dbmode == DBMODE_REF_SPEC ) {
 			if ( dbspec == DBSPEC_TYPE ) {
-				return FILTER_FURNITURE
+				return 60000
 			}
 			if ( dbspec == DBSPEC_TYPE_MINOR ) {
-				return FILTER_NONE
+				return 99999
 			}
 			if ( dbspec == DBSPEC_VALUE_ORG ) {
 				return 1000
 			}
 			if ( dbspec == DBSPEC_PARAM3_ORG ) {
@@ -80122,14 +82097,14 @@
 			reftype = FILTER_ITEM_TOOL
 			return
 		}
 		if ( dbmode == DBMODE_REF_SPEC ) {
 			if ( dbspec == DBSPEC_TYPE ) {
-				return FILTER_ITEM_TOOL
+				return 59000
 			}
 			if ( dbspec == DBSPEC_TYPE_MINOR ) {
-				return FILTER_NONE
+				return 99999
 			}
 			if ( dbspec == DBSPEC_VALUE_ORG ) {
 				return 3500
 			}
 			if ( dbspec == DBSPEC_PARAM3_ORG ) {
@@ -80183,14 +82158,14 @@
 			reftype = FILTER_FURNITURE
 			return
 		}
 		if ( dbmode == DBMODE_REF_SPEC ) {
 			if ( dbspec == DBSPEC_TYPE ) {
-				return FILTER_FURNITURE
+				return 60000
 			}
 			if ( dbspec == DBSPEC_TYPE_MINOR ) {
-				return FILTER_NONE
+				return 99999
 			}
 			if ( dbspec == DBSPEC_VALUE_ORG ) {
 				return 1500
 			}
 			if ( dbspec == DBSPEC_PARAM3_ORG ) {
@@ -80244,14 +82219,14 @@
 			reftype = FILTER_FURNITURE
 			return
 		}
 		if ( dbmode == DBMODE_REF_SPEC ) {
 			if ( dbspec == DBSPEC_TYPE ) {
-				return FILTER_FURNITURE
+				return 60000
 			}
 			if ( dbspec == DBSPEC_TYPE_MINOR ) {
-				return FILTER_NONE
+				return 99999
 			}
 			if ( dbspec == DBSPEC_VALUE_ORG ) {
 				return 700
 			}
 			if ( dbspec == DBSPEC_PARAM3_ORG ) {
@@ -80305,14 +82280,14 @@
 			reftype = FILTER_FURNITURE
 			return
 		}
 		if ( dbmode == DBMODE_REF_SPEC ) {
 			if ( dbspec == DBSPEC_TYPE ) {
-				return FILTER_FURNITURE
+				return 60000
 			}
 			if ( dbspec == DBSPEC_TYPE_MINOR ) {
-				return FILTER_NONE
+				return 99999
 			}
 			if ( dbspec == DBSPEC_VALUE_ORG ) {
 				return 500
 			}
 			if ( dbspec == DBSPEC_PARAM3_ORG ) {
@@ -80366,14 +82341,14 @@
 			reftype = FILTER_FURNITURE
 			return
 		}
 		if ( dbmode == DBMODE_REF_SPEC ) {
 			if ( dbspec == DBSPEC_TYPE ) {
-				return FILTER_FURNITURE
+				return 60000
 			}
 			if ( dbspec == DBSPEC_TYPE_MINOR ) {
-				return FILTER_NONE
+				return 99999
 			}
 			if ( dbspec == DBSPEC_VALUE_ORG ) {
 				return 2600
 			}
 			if ( dbspec == DBSPEC_PARAM3_ORG ) {
@@ -80429,14 +82404,14 @@
 			reftype = FILTER_FURNITURE
 			return
 		}
 		if ( dbmode == DBMODE_REF_SPEC ) {
 			if ( dbspec == DBSPEC_TYPE ) {
-				return FILTER_FURNITURE
+				return 60000
 			}
 			if ( dbspec == DBSPEC_TYPE_MINOR ) {
-				return FILTER_NONE
+				return 99999
 			}
 			if ( dbspec == DBSPEC_VALUE_ORG ) {
 				return 9500
 			}
 			if ( dbspec == DBSPEC_PARAM3_ORG ) {
@@ -80490,14 +82465,14 @@
 			reftype = FILTER_FURNITURE
 			return
 		}
 		if ( dbmode == DBMODE_REF_SPEC ) {
 			if ( dbspec == DBSPEC_TYPE ) {
-				return FILTER_FURNITURE
+				return 60000
 			}
 			if ( dbspec == DBSPEC_TYPE_MINOR ) {
-				return FILTER_NONE
+				return 99999
 			}
 			if ( dbspec == DBSPEC_VALUE_ORG ) {
 				return 2200
 			}
 			if ( dbspec == DBSPEC_PARAM3_ORG ) {
@@ -80551,14 +82526,14 @@
 			reftype = FILTER_FURNITURE
 			return
 		}
 		if ( dbmode == DBMODE_REF_SPEC ) {
 			if ( dbspec == DBSPEC_TYPE ) {
-				return FILTER_FURNITURE
+				return 60000
 			}
 			if ( dbspec == DBSPEC_TYPE_MINOR ) {
-				return FILTER_NONE
+				return 99999
 			}
 			if ( dbspec == DBSPEC_VALUE_ORG ) {
 				return 400
 			}
 			if ( dbspec == DBSPEC_PARAM3_ORG ) {
@@ -80602,11 +82577,11 @@
 			reftype = FILTER_FURNITURE
 			reftypeminor = FILTER_NOTHING
 			inv(INV_ITEM_NUM, ci) = 1
 			fixeditemenc = 0
 			inv(INV_ITEM_EFFECT, ci) = EFFECT_CHAIR
-			ibitmod ITEM_BIT_PRECIOUS, ci, 1
+			ibitmod ITEM_BIT_PRECIOUS, ci, TRUE
 			inv(INV_ITEM_IDENTIFY_LEVEL, ci) = 0
 			return
 		}
 		if ( dbmode == DBMODE_REF ) {
 			ichargelevel = 0
@@ -80614,14 +82589,14 @@
 			reftype = FILTER_FURNITURE
 			return
 		}
 		if ( dbmode == DBMODE_REF_SPEC ) {
 			if ( dbspec == DBSPEC_TYPE ) {
-				return FILTER_FURNITURE
+				return 60000
 			}
 			if ( dbspec == DBSPEC_TYPE_MINOR ) {
-				return FILTER_NONE
+				return 99999
 			}
 			if ( dbspec == DBSPEC_VALUE_ORG ) {
 				return 12000
 			}
 			if ( dbspec == DBSPEC_PARAM3_ORG ) {
@@ -80676,14 +82651,14 @@
 			reftype = FILTER_FURNITURE_WELL
 			return
 		}
 		if ( dbmode == DBMODE_REF_SPEC ) {
 			if ( dbspec == DBSPEC_TYPE ) {
-				return FILTER_FURNITURE_WELL
+				return 60001
 			}
 			if ( dbspec == DBSPEC_TYPE_MINOR ) {
-				return FILTER_FURNITURE_WELL
+				return 60001
 			}
 			if ( dbspec == DBSPEC_VALUE_ORG ) {
 				return 185000
 			}
 			if ( dbspec == DBSPEC_PARAM3_ORG ) {
@@ -80744,14 +82719,14 @@
 			reftype = FILTER_ITEM_POTION
 			return
 		}
 		if ( dbmode == DBMODE_REF_SPEC ) {
 			if ( dbspec == DBSPEC_TYPE ) {
-				return FILTER_ITEM_POTION
+				return 52000
 			}
 			if ( dbspec == DBSPEC_TYPE_MINOR ) {
-				return FILTER_NONE
+				return 99999
 			}
 			if ( dbspec == DBSPEC_VALUE_ORG ) {
 				return 100
 			}
 			if ( dbspec == DBSPEC_PARAM3_ORG ) {
@@ -80794,11 +82769,11 @@
 			inv(INV_ITEM_PIC, ci) = xy2pic(7, 11)
 			reftype = FILTER_CONTAINER
 			reftypeminor = FILTER_NOTHING
 			inv(INV_ITEM_NUM, ci) = 1
 			fixeditemenc = 0
-			ibitmod ITEM_BIT_PRECIOUS, ci, 1
+			ibitmod ITEM_BIT_PRECIOUS, ci, TRUE
 			inv(INV_ITEM_IDENTIFY_LEVEL, ci) = 0
 			return
 		}
 		if ( dbmode == DBMODE_REF ) {
 			ichargelevel = 0
@@ -80806,14 +82781,14 @@
 			reftype = FILTER_CONTAINER
 			return
 		}
 		if ( dbmode == DBMODE_REF_SPEC ) {
 			if ( dbspec == DBSPEC_TYPE ) {
-				return FILTER_CONTAINER
+				return 72000
 			}
 			if ( dbspec == DBSPEC_TYPE_MINOR ) {
-				return FILTER_NONE
+				return 99999
 			}
 			if ( dbspec == DBSPEC_VALUE_ORG ) {
 				return 1800
 			}
 			if ( dbspec == DBSPEC_PARAM3_ORG ) {
@@ -80867,14 +82842,14 @@
 			reftype = FILTER_ENVIRONMENT
 			return
 		}
 		if ( dbmode == DBMODE_REF_SPEC ) {
 			if ( dbspec == DBSPEC_TYPE ) {
-				return FILTER_ENVIRONMENT
+				return 80000
 			}
 			if ( dbspec == DBSPEC_TYPE_MINOR ) {
-				return FILTER_NONE
+				return 99999
 			}
 			if ( dbspec == DBSPEC_VALUE_ORG ) {
 				return 4800
 			}
 			if ( dbspec == DBSPEC_PARAM3_ORG ) {
@@ -80929,14 +82904,14 @@
 			reftype = FILTER_CARGO_TRADE
 			return
 		}
 		if ( dbmode == DBMODE_REF_SPEC ) {
 			if ( dbspec == DBSPEC_TYPE ) {
-				return FILTER_CARGO_TRADE
+				return 92000
 			}
 			if ( dbspec == DBSPEC_TYPE_MINOR ) {
-				return FILTER_NONE
+				return 99999
 			}
 			if ( dbspec == DBSPEC_VALUE_ORG ) {
 				return 1650
 			}
 			if ( dbspec == DBSPEC_PARAM3_ORG ) {
@@ -80994,14 +82969,14 @@
 			reftype = FILTER_CARGO_TRADE
 			return
 		}
 		if ( dbmode == DBMODE_REF_SPEC ) {
 			if ( dbspec == DBSPEC_TYPE ) {
-				return FILTER_CARGO_TRADE
+				return 92000
 			}
 			if ( dbspec == DBSPEC_TYPE_MINOR ) {
-				return FILTER_NONE
+				return 99999
 			}
 			if ( dbspec == DBSPEC_VALUE_ORG ) {
 				return 10000
 			}
 			if ( dbspec == DBSPEC_PARAM3_ORG ) {
@@ -81058,14 +83033,14 @@
 			reftype = FILTER_FURNITURE
 			return
 		}
 		if ( dbmode == DBMODE_REF_SPEC ) {
 			if ( dbspec == DBSPEC_TYPE ) {
-				return FILTER_FURNITURE
+				return 60000
 			}
 			if ( dbspec == DBSPEC_TYPE_MINOR ) {
-				return FILTER_NONE
+				return 99999
 			}
 			if ( dbspec == DBSPEC_VALUE_ORG ) {
 				return 1800
 			}
 			if ( dbspec == DBSPEC_PARAM3_ORG ) {
@@ -81119,14 +83094,14 @@
 			reftype = FILTER_FURNITURE
 			return
 		}
 		if ( dbmode == DBMODE_REF_SPEC ) {
 			if ( dbspec == DBSPEC_TYPE ) {
-				return FILTER_FURNITURE
+				return 60000
 			}
 			if ( dbspec == DBSPEC_TYPE_MINOR ) {
-				return FILTER_NONE
+				return 99999
 			}
 			if ( dbspec == DBSPEC_VALUE_ORG ) {
 				return 2500
 			}
 			if ( dbspec == DBSPEC_PARAM3_ORG ) {
@@ -81180,14 +83155,14 @@
 			reftype = FILTER_FURNITURE
 			return
 		}
 		if ( dbmode == DBMODE_REF_SPEC ) {
 			if ( dbspec == DBSPEC_TYPE ) {
-				return FILTER_FURNITURE
+				return 60000
 			}
 			if ( dbspec == DBSPEC_TYPE_MINOR ) {
-				return FILTER_NONE
+				return 99999
 			}
 			if ( dbspec == DBSPEC_VALUE_ORG ) {
 				return 18000
 			}
 			if ( dbspec == DBSPEC_PARAM3_ORG ) {
@@ -81241,14 +83216,14 @@
 			reftype = FILTER_FURNITURE
 			return
 		}
 		if ( dbmode == DBMODE_REF_SPEC ) {
 			if ( dbspec == DBSPEC_TYPE ) {
-				return FILTER_FURNITURE
+				return 60000
 			}
 			if ( dbspec == DBSPEC_TYPE_MINOR ) {
-				return FILTER_NONE
+				return 99999
 			}
 			if ( dbspec == DBSPEC_VALUE_ORG ) {
 				return 7200
 			}
 			if ( dbspec == DBSPEC_PARAM3_ORG ) {
@@ -81302,14 +83277,14 @@
 			reftype = FILTER_FURNITURE
 			return
 		}
 		if ( dbmode == DBMODE_REF_SPEC ) {
 			if ( dbspec == DBSPEC_TYPE ) {
-				return FILTER_FURNITURE
+				return 60000
 			}
 			if ( dbspec == DBSPEC_TYPE_MINOR ) {
-				return FILTER_NONE
+				return 99999
 			}
 			if ( dbspec == DBSPEC_VALUE_ORG ) {
 				return 180
 			}
 			if ( dbspec == DBSPEC_PARAM3_ORG ) {
@@ -81363,14 +83338,14 @@
 			reftype = FILTER_FURNITURE
 			return
 		}
 		if ( dbmode == DBMODE_REF_SPEC ) {
 			if ( dbspec == DBSPEC_TYPE ) {
-				return FILTER_FURNITURE
+				return 60000
 			}
 			if ( dbspec == DBSPEC_TYPE_MINOR ) {
-				return FILTER_NONE
+				return 99999
 			}
 			if ( dbspec == DBSPEC_VALUE_ORG ) {
 				return 400
 			}
 			if ( dbspec == DBSPEC_PARAM3_ORG ) {
@@ -81424,14 +83399,14 @@
 			reftype = FILTER_JUNK
 			return
 		}
 		if ( dbmode == DBMODE_REF_SPEC ) {
 			if ( dbspec == DBSPEC_TYPE ) {
-				return FILTER_JUNK
+				return 64000
 			}
 			if ( dbspec == DBSPEC_TYPE_MINOR ) {
-				return FILTER_NONE
+				return 99999
 			}
 			if ( dbspec == DBSPEC_VALUE_ORG ) {
 				return 10
 			}
 			if ( dbspec == DBSPEC_PARAM3_ORG ) {
@@ -81485,14 +83460,14 @@
 			reftype = FILTER_ENVIRONMENT
 			return
 		}
 		if ( dbmode == DBMODE_REF_SPEC ) {
 			if ( dbspec == DBSPEC_TYPE ) {
-				return FILTER_ENVIRONMENT
+				return 80000
 			}
 			if ( dbspec == DBSPEC_TYPE_MINOR ) {
-				return FILTER_NONE
+				return 99999
 			}
 			if ( dbspec == DBSPEC_VALUE_ORG ) {
 				return 1800
 			}
 			if ( dbspec == DBSPEC_PARAM3_ORG ) {
@@ -81546,14 +83521,14 @@
 			reftype = FILTER_ENVIRONMENT
 			return
 		}
 		if ( dbmode == DBMODE_REF_SPEC ) {
 			if ( dbspec == DBSPEC_TYPE ) {
-				return FILTER_ENVIRONMENT
+				return 80000
 			}
 			if ( dbspec == DBSPEC_TYPE_MINOR ) {
-				return FILTER_NONE
+				return 99999
 			}
 			if ( dbspec == DBSPEC_VALUE_ORG ) {
 				return 500
 			}
 			if ( dbspec == DBSPEC_PARAM3_ORG ) {
@@ -81608,14 +83583,14 @@
 			reftype = FILTER_ITEM_POTION
 			return
 		}
 		if ( dbmode == DBMODE_REF_SPEC ) {
 			if ( dbspec == DBSPEC_TYPE ) {
-				return FILTER_ITEM_POTION
+				return 52000
 			}
 			if ( dbspec == DBSPEC_TYPE_MINOR ) {
-				return FILTER_NONE
+				return 99999
 			}
 			if ( dbspec == DBSPEC_VALUE_ORG ) {
 				return 10
 			}
 			if ( dbspec == DBSPEC_PARAM3_ORG ) {
@@ -81678,14 +83653,14 @@
 			reftype = FILTER_FURNITURE
 			return
 		}
 		if ( dbmode == DBMODE_REF_SPEC ) {
 			if ( dbspec == DBSPEC_TYPE ) {
-				return FILTER_FURNITURE
+				return 60000
 			}
 			if ( dbspec == DBSPEC_TYPE_MINOR ) {
-				return FILTER_NONE
+				return 99999
 			}
 			if ( dbspec == DBSPEC_VALUE_ORG ) {
 				return 7200
 			}
 			if ( dbspec == DBSPEC_PARAM3_ORG ) {
@@ -81739,14 +83714,14 @@
 			reftype = FILTER_FURNITURE
 			return
 		}
 		if ( dbmode == DBMODE_REF_SPEC ) {
 			if ( dbspec == DBSPEC_TYPE ) {
-				return FILTER_FURNITURE
+				return 60000
 			}
 			if ( dbspec == DBSPEC_TYPE_MINOR ) {
-				return FILTER_NONE
+				return 99999
 			}
 			if ( dbspec == DBSPEC_VALUE_ORG ) {
 				return 4500
 			}
 			if ( dbspec == DBSPEC_PARAM3_ORG ) {
@@ -81800,14 +83775,14 @@
 			reftype = FILTER_FURNITURE
 			return
 		}
 		if ( dbmode == DBMODE_REF_SPEC ) {
 			if ( dbspec == DBSPEC_TYPE ) {
-				return FILTER_FURNITURE
+				return 60000
 			}
 			if ( dbspec == DBSPEC_TYPE_MINOR ) {
-				return FILTER_NONE
+				return 99999
 			}
 			if ( dbspec == DBSPEC_VALUE_ORG ) {
 				return 1500
 			}
 			if ( dbspec == DBSPEC_PARAM3_ORG ) {
@@ -81863,14 +83838,14 @@
 			reftype = FILTER_ITEM_TOOL
 			return
 		}
 		if ( dbmode == DBMODE_REF_SPEC ) {
 			if ( dbspec == DBSPEC_TYPE ) {
-				return FILTER_ITEM_TOOL
+				return 59000
 			}
 			if ( dbspec == DBSPEC_TYPE_MINOR ) {
-				return FILTER_NONE
+				return 99999
 			}
 			if ( dbspec == DBSPEC_VALUE_ORG ) {
 				return 200
 			}
 			if ( dbspec == DBSPEC_PARAM3_ORG ) {
@@ -81917,26 +83892,26 @@
 			reftype = FILTER_ITEM_SPELLBOOK
 			reftypeminor = FILTER_NOTHING
 			inv(INV_ITEM_NUM, ci) = 1
 			fixeditemenc = 0
 			inv(INV_ITEM_IDENTIFY_LEVEL, ci) = 0
-			inv(INV_ITEM_CHARGE, ci) = 4 + rnd(4) - rnd(4)
-			ibitmod ITEM_BIT_CHARGE_ITEM, ci, 1
+			inv((9 /*!!!@[INV_ITEM_AMMO @@@ INV_ITEM_CHARGE @@@ INV_ITEM_CLIENT @@@ INV_ITEM_FILE @@@ INV_ITEM_NEXT_PERIOD]@!!! */), ci) = 4 + rnd(4) - rnd(4)
+			ibitmod ITEM_BIT_CHARGE_ITEM, ci, TRUE
 			return
 		}
 		if ( dbmode == DBMODE_REF ) {
 			ichargelevel = 4
 			infilterref = ""
 			reftype = FILTER_ITEM_SPELLBOOK
 			return
 		}
 		if ( dbmode == DBMODE_REF_SPEC ) {
 			if ( dbspec == DBSPEC_TYPE ) {
-				return FILTER_ITEM_SPELLBOOK
+				return 54000
 			}
 			if ( dbspec == DBSPEC_TYPE_MINOR ) {
-				return FILTER_NONE
+				return 99999
 			}
 			if ( dbspec == DBSPEC_VALUE_ORG ) {
 				return 1000
 			}
 			if ( dbspec == DBSPEC_PARAM3_ORG ) {
@@ -81985,30 +83960,30 @@
 		}
 		if ( dbmode == DBMODE_SET ) {
 			inv(INV_ITEM_ID, ci) = ITEM_ID_ROD_MAKE_DOOR
 			inv(INV_ITEM_PIC, ci) = xy2pic(9, 14)
 			reftype = FILTER_ITEM_ROD
-			reftypeminor = FILTER_ITEM_ROD_UTILITY
+			reftypeminor = FILTER_ITEM_ROD
 			inv(INV_ITEM_NUM, ci) = 1
 			fixeditemenc = 0
 			inv(INV_ITEM_IDENTIFY_LEVEL, ci) = 0
-			inv(INV_ITEM_CHARGE, ci) = 6 + rnd(6) - rnd(6)
-			ibitmod ITEM_BIT_CHARGE_ITEM, ci, 1
+			inv((9 /*!!!@[INV_ITEM_AMMO @@@ INV_ITEM_CHARGE @@@ INV_ITEM_CLIENT @@@ INV_ITEM_FILE @@@ INV_ITEM_NEXT_PERIOD]@!!! */), ci) = 6 + rnd(6) - rnd(6)
+			ibitmod ITEM_BIT_CHARGE_ITEM, ci, TRUE
 			return
 		}
 		if ( dbmode == DBMODE_REF ) {
 			ichargelevel = 6
 			infilterref = ""
 			reftype = FILTER_ITEM_ROD
 			return
 		}
 		if ( dbmode == DBMODE_REF_SPEC ) {
 			if ( dbspec == DBSPEC_TYPE ) {
-				return FILTER_ITEM_ROD
+				return 56000
 			}
 			if ( dbspec == DBSPEC_TYPE_MINOR ) {
-				return FILTER_ITEM_ROD_UTILITY
+				return 56000
 			}
 			if ( dbspec == DBSPEC_VALUE_ORG ) {
 				return 2000
 			}
 			if ( dbspec == DBSPEC_PARAM3_ORG ) {
@@ -82078,14 +84053,14 @@
 			reftype = FILTER_FURNITURE
 			return
 		}
 		if ( dbmode == DBMODE_REF_SPEC ) {
 			if ( dbspec == DBSPEC_TYPE ) {
-				return FILTER_FURNITURE
+				return 60000
 			}
 			if ( dbspec == DBSPEC_TYPE_MINOR ) {
-				return FILTER_NONE
+				return 99999
 			}
 			if ( dbspec == DBSPEC_VALUE_ORG ) {
 				return 1600
 			}
 			if ( dbspec == DBSPEC_PARAM3_ORG ) {
@@ -82139,14 +84114,14 @@
 			reftype = FILTER_CONTAINER
 			return
 		}
 		if ( dbmode == DBMODE_REF_SPEC ) {
 			if ( dbspec == DBSPEC_TYPE ) {
-				return FILTER_CONTAINER
+				return 72000
 			}
 			if ( dbspec == DBSPEC_TYPE_MINOR ) {
-				return FILTER_NONE
+				return 99999
 			}
 			if ( dbspec == DBSPEC_VALUE_ORG ) {
 				return 3800
 			}
 			if ( dbspec == DBSPEC_PARAM3_ORG ) {
@@ -82201,14 +84176,14 @@
 			reftype = FILTER_ITEM_TOOL
 			return
 		}
 		if ( dbmode == DBMODE_REF_SPEC ) {
 			if ( dbspec == DBSPEC_TYPE ) {
-				return FILTER_ITEM_TOOL
+				return 59000
 			}
 			if ( dbspec == DBSPEC_TYPE_MINOR ) {
-				return FILTER_NONE
+				return 99999
 			}
 			if ( dbspec == DBSPEC_VALUE_ORG ) {
 				return 1400
 			}
 			if ( dbspec == DBSPEC_PARAM3_ORG ) {
@@ -82265,14 +84240,14 @@
 			reftype = FILTER_ITEM_POTION
 			return
 		}
 		if ( dbmode == DBMODE_REF_SPEC ) {
 			if ( dbspec == DBSPEC_TYPE ) {
-				return FILTER_ITEM_POTION
+				return 52000
 			}
 			if ( dbspec == DBSPEC_TYPE_MINOR ) {
-				return FILTER_NONE
+				return 99999
 			}
 			if ( dbspec == DBSPEC_VALUE_ORG ) {
 				return 400
 			}
 			if ( dbspec == DBSPEC_PARAM3_ORG ) {
@@ -82336,14 +84311,14 @@
 			reftype = FILTER_ITEM_TOOL
 			return
 		}
 		if ( dbmode == DBMODE_REF_SPEC ) {
 			if ( dbspec == DBSPEC_TYPE ) {
-				return FILTER_ITEM_TOOL
+				return 59000
 			}
 			if ( dbspec == DBSPEC_TYPE_MINOR ) {
-				return FILTER_NONE
+				return 99999
 			}
 			if ( dbspec == DBSPEC_VALUE_ORG ) {
 				return 1000
 			}
 			if ( dbspec == DBSPEC_PARAM3_ORG ) {
@@ -82400,14 +84375,14 @@
 			reftype = FILTER_JUNK
 			return
 		}
 		if ( dbmode == DBMODE_REF_SPEC ) {
 			if ( dbspec == DBSPEC_TYPE ) {
-				return FILTER_JUNK
+				return 64000
 			}
 			if ( dbspec == DBSPEC_TYPE_MINOR ) {
-				return FILTER_NONE
+				return 99999
 			}
 			if ( dbspec == DBSPEC_VALUE_ORG ) {
 				return 25
 			}
 			if ( dbspec == DBSPEC_PARAM3_ORG ) {
@@ -82461,14 +84436,14 @@
 			reftype = FILTER_ITEM_POTION
 			return
 		}
 		if ( dbmode == DBMODE_REF_SPEC ) {
 			if ( dbspec == DBSPEC_TYPE ) {
-				return FILTER_ITEM_POTION
+				return 52000
 			}
 			if ( dbspec == DBSPEC_TYPE_MINOR ) {
-				return FILTER_NONE
+				return 99999
 			}
 			if ( dbspec == DBSPEC_VALUE_ORG ) {
 				return 1000
 			}
 			if ( dbspec == DBSPEC_PARAM3_ORG ) {
@@ -82532,14 +84507,14 @@
 			reftype = FILTER_ITEM_FOOD
 			return
 		}
 		if ( dbmode == DBMODE_REF_SPEC ) {
 			if ( dbspec == DBSPEC_TYPE ) {
-				return FILTER_ITEM_FOOD
+				return 57000
 			}
 			if ( dbspec == DBSPEC_TYPE_MINOR ) {
-				return FILTER_NONE
+				return 99999
 			}
 			if ( dbspec == DBSPEC_VALUE_ORG ) {
 				return 500
 			}
 			if ( dbspec == DBSPEC_PARAM3_ORG ) {
@@ -82593,14 +84568,14 @@
 			reftype = FILTER_ITEM_SCROLL
 			return
 		}
 		if ( dbmode == DBMODE_REF_SPEC ) {
 			if ( dbspec == DBSPEC_TYPE ) {
-				return FILTER_ITEM_SCROLL
+				return 53000
 			}
 			if ( dbspec == DBSPEC_TYPE_MINOR ) {
-				return FILTER_ITEM_DEED
+				return 53100
 			}
 			if ( dbspec == DBSPEC_VALUE_ORG ) {
 				return 80000
 			}
 			if ( dbspec == DBSPEC_PARAM3_ORG ) {
@@ -82662,14 +84637,14 @@
 			reftype = FILTER_ITEM_FOOD
 			return
 		}
 		if ( dbmode == DBMODE_REF_SPEC ) {
 			if ( dbspec == DBSPEC_TYPE ) {
-				return FILTER_ITEM_FOOD
+				return 57000
 			}
 			if ( dbspec == DBSPEC_TYPE_MINOR ) {
-				return FILTER_NONE
+				return 99999
 			}
 			if ( dbspec == DBSPEC_VALUE_ORG ) {
 				return 640
 			}
 			if ( dbspec == DBSPEC_PARAM3_ORG ) {
@@ -82709,30 +84684,30 @@
 		}
 		if ( dbmode == DBMODE_SET ) {
 			inv(INV_ITEM_ID, ci) = ITEM_ID_ROD_FIRE_WALL
 			inv(INV_ITEM_PIC, ci) = xy2pic(9, 14)
 			reftype = FILTER_ITEM_ROD
-			reftypeminor = FILTER_ITEM_ROD_ENVIRONMENTAL
+			reftypeminor = FILTER_ITEM_ROD
 			inv(INV_ITEM_NUM, ci) = 1
 			fixeditemenc = 0
 			inv(INV_ITEM_IDENTIFY_LEVEL, ci) = 0
-			inv(INV_ITEM_CHARGE, ci) = 8 + rnd(8) - rnd(8)
-			ibitmod ITEM_BIT_CHARGE_ITEM, ci, 1
+			inv((9 /*!!!@[INV_ITEM_AMMO @@@ INV_ITEM_CHARGE @@@ INV_ITEM_CLIENT @@@ INV_ITEM_FILE @@@ INV_ITEM_NEXT_PERIOD]@!!! */), ci) = 8 + rnd(8) - rnd(8)
+			ibitmod ITEM_BIT_CHARGE_ITEM, ci, TRUE
 			return
 		}
 		if ( dbmode == DBMODE_REF ) {
 			ichargelevel = 8
 			infilterref = ""
 			reftype = FILTER_ITEM_ROD
 			return
 		}
 		if ( dbmode == DBMODE_REF_SPEC ) {
 			if ( dbspec == DBSPEC_TYPE ) {
-				return FILTER_ITEM_ROD
+				return 56000
 			}
 			if ( dbspec == DBSPEC_TYPE_MINOR ) {
-				return FILTER_ITEM_ROD_ENVIRONMENTAL
+				return 56000
 			}
 			if ( dbspec == DBSPEC_VALUE_ORG ) {
 				return 3800
 			}
 			if ( dbspec == DBSPEC_PARAM3_ORG ) {
@@ -82792,26 +84767,26 @@
 			reftype = FILTER_ITEM_SPELLBOOK
 			reftypeminor = FILTER_NOTHING
 			inv(INV_ITEM_NUM, ci) = 1
 			fixeditemenc = 0
 			inv(INV_ITEM_IDENTIFY_LEVEL, ci) = 0
-			inv(INV_ITEM_CHARGE, ci) = 4 + rnd(4) - rnd(4)
-			ibitmod ITEM_BIT_CHARGE_ITEM, ci, 1
+			inv((9 /*!!!@[INV_ITEM_AMMO @@@ INV_ITEM_CHARGE @@@ INV_ITEM_CLIENT @@@ INV_ITEM_FILE @@@ INV_ITEM_NEXT_PERIOD]@!!! */), ci) = 4 + rnd(4) - rnd(4)
+			ibitmod ITEM_BIT_CHARGE_ITEM, ci, TRUE
 			return
 		}
 		if ( dbmode == DBMODE_REF ) {
 			ichargelevel = 4
 			infilterref = ""
 			reftype = FILTER_ITEM_SPELLBOOK
 			return
 		}
 		if ( dbmode == DBMODE_REF_SPEC ) {
 			if ( dbspec == DBSPEC_TYPE ) {
-				return FILTER_ITEM_SPELLBOOK
+				return 54000
 			}
 			if ( dbspec == DBSPEC_TYPE_MINOR ) {
-				return FILTER_NONE
+				return 99999
 			}
 			if ( dbspec == DBSPEC_VALUE_ORG ) {
 				return 2900
 			}
 			if ( dbspec == DBSPEC_PARAM3_ORG ) {
@@ -82864,26 +84839,26 @@
 			reftype = FILTER_ITEM_TOOL
 			reftypeminor = FILTER_NOTHING
 			inv(INV_ITEM_NUM, ci) = 1
 			fixeditemenc = 0
 			inv(INV_ITEM_IDENTIFY_LEVEL, ci) = 0
-			inv(INV_ITEM_CHARGE, ci) = 12 + rnd(12) - rnd(12)
-			ibitmod ITEM_BIT_CHARGE_ITEM, ci, 1
+			inv((9 /*!!!@[INV_ITEM_AMMO @@@ INV_ITEM_CHARGE @@@ INV_ITEM_CLIENT @@@ INV_ITEM_FILE @@@ INV_ITEM_NEXT_PERIOD]@!!! */), ci) = 12 + rnd(12) - rnd(12)
+			ibitmod ITEM_BIT_CHARGE_ITEM, ci, TRUE
 			return
 		}
 		if ( dbmode == DBMODE_REF ) {
 			ichargelevel = 12
 			infilterref = ""
 			reftype = FILTER_ITEM_TOOL
 			return
 		}
 		if ( dbmode == DBMODE_REF_SPEC ) {
 			if ( dbspec == DBSPEC_TYPE ) {
-				return FILTER_ITEM_TOOL
+				return 59000
 			}
 			if ( dbspec == DBSPEC_TYPE_MINOR ) {
-				return FILTER_NONE
+				return 99999
 			}
 			if ( dbspec == DBSPEC_VALUE_ORG ) {
 				return 2400
 			}
 			if ( dbspec == DBSPEC_PARAM3_ORG ) {
@@ -82927,26 +84902,26 @@
 			reftype = FILTER_ITEM_TOOL
 			reftypeminor = FILTER_NOTHING
 			inv(INV_ITEM_NUM, ci) = 1
 			fixeditemenc = 0
 			inv(INV_ITEM_IDENTIFY_LEVEL, ci) = 0
-			inv(INV_ITEM_CHARGE, ci) = 12 + rnd(12) - rnd(12)
-			ibitmod ITEM_BIT_CHARGE_ITEM, ci, 1
+			inv((9 /*!!!@[INV_ITEM_AMMO @@@ INV_ITEM_CHARGE @@@ INV_ITEM_CLIENT @@@ INV_ITEM_FILE @@@ INV_ITEM_NEXT_PERIOD]@!!! */), ci) = 12 + rnd(12) - rnd(12)
+			ibitmod ITEM_BIT_CHARGE_ITEM, ci, TRUE
 			return
 		}
 		if ( dbmode == DBMODE_REF ) {
 			ichargelevel = 12
 			infilterref = ""
 			reftype = FILTER_ITEM_TOOL
 			return
 		}
 		if ( dbmode == DBMODE_REF_SPEC ) {
 			if ( dbspec == DBSPEC_TYPE ) {
-				return FILTER_ITEM_TOOL
+				return 59000
 			}
 			if ( dbspec == DBSPEC_TYPE_MINOR ) {
-				return FILTER_NONE
+				return 99999
 			}
 			if ( dbspec == DBSPEC_VALUE_ORG ) {
 				return 2400
 			}
 			if ( dbspec == DBSPEC_PARAM3_ORG ) {
@@ -83000,14 +84975,14 @@
 			reftype = FILTER_ITEM_POTION
 			return
 		}
 		if ( dbmode == DBMODE_REF_SPEC ) {
 			if ( dbspec == DBSPEC_TYPE ) {
-				return FILTER_ITEM_POTION
+				return 52000
 			}
 			if ( dbspec == DBSPEC_TYPE_MINOR ) {
-				return FILTER_NONE
+				return 99999
 			}
 			if ( dbspec == DBSPEC_VALUE_ORG ) {
 				return 1900
 			}
 			if ( dbspec == DBSPEC_PARAM3_ORG ) {
@@ -83056,30 +85031,30 @@
 		}
 		if ( dbmode == DBMODE_SET ) {
 			inv(INV_ITEM_ID, ci) = ITEM_ID_ROD_ACID_GROUND
 			inv(INV_ITEM_PIC, ci) = xy2pic(9, 14)
 			reftype = FILTER_ITEM_ROD
-			reftypeminor = FILTER_ITEM_ROD_ENVIRONMENTAL
+			reftypeminor = FILTER_ITEM_ROD
 			inv(INV_ITEM_NUM, ci) = 1
 			fixeditemenc = 0
 			inv(INV_ITEM_IDENTIFY_LEVEL, ci) = 0
-			inv(INV_ITEM_CHARGE, ci) = 8 + rnd(8) - rnd(8)
-			ibitmod ITEM_BIT_CHARGE_ITEM, ci, 1
+			inv((9 /*!!!@[INV_ITEM_AMMO @@@ INV_ITEM_CHARGE @@@ INV_ITEM_CLIENT @@@ INV_ITEM_FILE @@@ INV_ITEM_NEXT_PERIOD]@!!! */), ci) = 8 + rnd(8) - rnd(8)
+			ibitmod ITEM_BIT_CHARGE_ITEM, ci, TRUE
 			return
 		}
 		if ( dbmode == DBMODE_REF ) {
 			ichargelevel = 8
 			infilterref = ""
 			reftype = FILTER_ITEM_ROD
 			return
 		}
 		if ( dbmode == DBMODE_REF_SPEC ) {
 			if ( dbspec == DBSPEC_TYPE ) {
-				return FILTER_ITEM_ROD
+				return 56000
 			}
 			if ( dbspec == DBSPEC_TYPE_MINOR ) {
-				return FILTER_ITEM_ROD_ENVIRONMENTAL
+				return 56000
 			}
 			if ( dbspec == DBSPEC_VALUE_ORG ) {
 				return 4400
 			}
 			if ( dbspec == DBSPEC_PARAM3_ORG ) {
@@ -83139,26 +85114,26 @@
 			reftype = FILTER_ITEM_SPELLBOOK
 			reftypeminor = FILTER_NOTHING
 			inv(INV_ITEM_NUM, ci) = 1
 			fixeditemenc = 0
 			inv(INV_ITEM_IDENTIFY_LEVEL, ci) = 0
-			inv(INV_ITEM_CHARGE, ci) = 4 + rnd(4) - rnd(4)
-			ibitmod ITEM_BIT_CHARGE_ITEM, ci, 1
+			inv((9 /*!!!@[INV_ITEM_AMMO @@@ INV_ITEM_CHARGE @@@ INV_ITEM_CLIENT @@@ INV_ITEM_FILE @@@ INV_ITEM_NEXT_PERIOD]@!!! */), ci) = 4 + rnd(4) - rnd(4)
+			ibitmod ITEM_BIT_CHARGE_ITEM, ci, TRUE
 			return
 		}
 		if ( dbmode == DBMODE_REF ) {
 			ichargelevel = 4
 			infilterref = ""
 			reftype = FILTER_ITEM_SPELLBOOK
 			return
 		}
 		if ( dbmode == DBMODE_REF_SPEC ) {
 			if ( dbspec == DBSPEC_TYPE ) {
-				return FILTER_ITEM_SPELLBOOK
+				return 54000
 			}
 			if ( dbspec == DBSPEC_TYPE_MINOR ) {
-				return FILTER_NONE
+				return 99999
 			}
 			if ( dbspec == DBSPEC_VALUE_ORG ) {
 				return 3800
 			}
 			if ( dbspec == DBSPEC_PARAM3_ORG ) {
@@ -83222,14 +85197,14 @@
 			reftype = FILTER_ITEM_BOOK
 			return
 		}
 		if ( dbmode == DBMODE_REF_SPEC ) {
 			if ( dbspec == DBSPEC_TYPE ) {
-				return FILTER_ITEM_BOOK
+				return 55000
 			}
 			if ( dbspec == DBSPEC_TYPE_MINOR ) {
-				return FILTER_NONE
+				return 99999
 			}
 			if ( dbspec == DBSPEC_VALUE_ORG ) {
 				return 4800
 			}
 			if ( dbspec == DBSPEC_PARAM3_ORG ) {
@@ -83291,14 +85266,14 @@
 			reftype = FILTER_ITEM_TOOL
 			return
 		}
 		if ( dbmode == DBMODE_REF_SPEC ) {
 			if ( dbspec == DBSPEC_TYPE ) {
-				return FILTER_ITEM_TOOL
+				return 59000
 			}
 			if ( dbspec == DBSPEC_TYPE_MINOR ) {
-				return FILTER_NONE
+				return 99999
 			}
 			if ( dbspec == DBSPEC_VALUE_ORG ) {
 				return 1500
 			}
 			if ( dbspec == DBSPEC_PARAM3_ORG ) {
@@ -83355,14 +85330,14 @@
 			reftype = FILTER_CONTAINER
 			return
 		}
 		if ( dbmode == DBMODE_REF_SPEC ) {
 			if ( dbspec == DBSPEC_TYPE ) {
-				return FILTER_CONTAINER
+				return 72000
 			}
 			if ( dbspec == DBSPEC_TYPE_MINOR ) {
-				return FILTER_NONE
+				return 99999
 			}
 			if ( dbspec == DBSPEC_VALUE_ORG ) {
 				return 7200
 			}
 			if ( dbspec == DBSPEC_PARAM3_ORG ) {
@@ -83405,11 +85380,11 @@
 			inv(INV_ITEM_PIC, ci) = xy2pic(1, 10)
 			reftype = FILTER_CONTAINER
 			reftypeminor = FILTER_NOTHING
 			inv(INV_ITEM_NUM, ci) = 1
 			fixeditemenc = 0
-			ibitmod ITEM_BIT_PRECIOUS, ci, 1
+			ibitmod ITEM_BIT_PRECIOUS, ci, TRUE
 			inv(INV_ITEM_IDENTIFY_LEVEL, ci) = 0
 			return
 		}
 		if ( dbmode == DBMODE_REF ) {
 			ichargelevel = 0
@@ -83417,14 +85392,14 @@
 			reftype = FILTER_CONTAINER
 			return
 		}
 		if ( dbmode == DBMODE_REF_SPEC ) {
 			if ( dbspec == DBSPEC_TYPE ) {
-				return FILTER_CONTAINER
+				return 72000
 			}
 			if ( dbspec == DBSPEC_TYPE_MINOR ) {
-				return FILTER_NONE
+				return 99999
 			}
 			if ( dbspec == DBSPEC_VALUE_ORG ) {
 				return 380
 			}
 			if ( dbspec == DBSPEC_PARAM3_ORG ) {
@@ -83478,14 +85453,14 @@
 			reftype = FILTER_ITEM_POTION
 			return
 		}
 		if ( dbmode == DBMODE_REF_SPEC ) {
 			if ( dbspec == DBSPEC_TYPE ) {
-				return FILTER_ITEM_POTION
+				return 52000
 			}
 			if ( dbspec == DBSPEC_TYPE_MINOR ) {
-				return FILTER_NONE
+				return 99999
 			}
 			if ( dbspec == DBSPEC_VALUE_ORG ) {
 				return 100000
 			}
 			if ( dbspec == DBSPEC_PARAM3_ORG ) {
@@ -83539,11 +85514,11 @@
 			inv(INV_ITEM_ID, ci) = ITEM_ID_AURORA_RING
 			inv(INV_ITEM_PIC, ci) = xy2pic(5, 26)
 			reftype = FILTER_ACCESSORY_RING
 			reftypeminor = FILTER_ACCESSORY_SMALL_RING
 			inv(INV_ITEM_NUM, ci) = 1
-			fixeditemenc = ENCHANT_RES_WEATHER, 100, ENCHANT_RESISTANCE * EXT_ENCHANTMENT + SKILL_RES_SOUND, 100, 0
+			fixeditemenc = 31, 100, ENCHANT_RESISTANCE * EXT_ENCHANTMENT + SKILL_RES_SOUND, 100, 0
 			inv(INV_ITEM_IDENTIFY_LEVEL, ci) = 0
 			return
 		}
 		if ( dbmode == DBMODE_REF ) {
 			ichargelevel = 0
@@ -83551,14 +85526,14 @@
 			reftype = FILTER_ACCESSORY_RING
 			return
 		}
 		if ( dbmode == DBMODE_REF_SPEC ) {
 			if ( dbspec == DBSPEC_TYPE ) {
-				return FILTER_ACCESSORY_RING
+				return 32000
 			}
 			if ( dbspec == DBSPEC_TYPE_MINOR ) {
-				return FILTER_ACCESSORY_SMALL_RING
+				return 32001
 			}
 			if ( dbspec == DBSPEC_VALUE_ORG ) {
 				return 13000
 			}
 			if ( dbspec == DBSPEC_PARAM3_ORG ) {
@@ -83611,11 +85586,11 @@
 			inv(INV_ITEM_ID, ci) = ITEM_ID_VINDALE_CLOAK
 			inv(INV_ITEM_PIC, ci) = xy2pic(26, 12)
 			reftype = FILTER_CLOAK
 			reftypeminor = FILTER_CLOAK_MEDIUM
 			inv(INV_ITEM_NUM, ci) = 1
-			fixeditemenc = ENCHANT_RES_ETHERWIND, 100, 0
+			fixeditemenc = 30, 100, 0
 			inv(INV_ITEM_IDENTIFY_LEVEL, ci) = 0
 			return
 		}
 		if ( dbmode == DBMODE_REF ) {
 			ichargelevel = 0
@@ -83623,14 +85598,14 @@
 			reftype = FILTER_CLOAK
 			return
 		}
 		if ( dbmode == DBMODE_REF_SPEC ) {
 			if ( dbspec == DBSPEC_TYPE ) {
-				return FILTER_CLOAK
+				return 20000
 			}
 			if ( dbspec == DBSPEC_TYPE_MINOR ) {
-				return FILTER_CLOAK_MEDIUM
+				return 20001
 			}
 			if ( dbspec == DBSPEC_VALUE_ORG ) {
 				return 13000
 			}
 			if ( dbspec == DBSPEC_PARAM3_ORG ) {
@@ -83675,11 +85650,11 @@
 			inv(INV_ITEM_ID, ci) = ITEM_ID_SEVEN_LEAGUE_BOOTS
 			inv(INV_ITEM_PIC, ci) = xy2pic(31, 13)
 			reftype = FILTER_BOOTS
 			reftypeminor = FILTER_BOOTS_LIGHT
 			inv(INV_ITEM_NUM, ci) = 1
-			fixeditemenc = ENCHANT_FAST_TRAVEL, 500, 0
+			fixeditemenc = 29, 500, 0
 			inv(INV_ITEM_IDENTIFY_LEVEL, ci) = 0
 			return
 		}
 		if ( dbmode == DBMODE_REF ) {
 			ichargelevel = 0
@@ -83687,14 +85662,14 @@
 			reftype = FILTER_BOOTS
 			return
 		}
 		if ( dbmode == DBMODE_REF_SPEC ) {
 			if ( dbspec == DBSPEC_TYPE ) {
-				return FILTER_BOOTS
+				return 18000
 			}
 			if ( dbspec == DBSPEC_TYPE_MINOR ) {
-				return FILTER_BOOTS_LIGHT
+				return 18002
 			}
 			if ( dbspec == DBSPEC_VALUE_ORG ) {
 				return 13000
 			}
 			if ( dbspec == DBSPEC_PARAM3_ORG ) {
@@ -83749,14 +85724,14 @@
 			reftype = FILTER_ITEM_TOOL
 			return
 		}
 		if ( dbmode == DBMODE_REF_SPEC ) {
 			if ( dbspec == DBSPEC_TYPE ) {
-				return FILTER_ITEM_TOOL
+				return 59000
 			}
 			if ( dbspec == DBSPEC_TYPE_MINOR ) {
-				return FILTER_NONE
+				return 99999
 			}
 			if ( dbspec == DBSPEC_VALUE_ORG ) {
 				return 6500
 			}
 			if ( dbspec == DBSPEC_PARAM3_ORG ) {
@@ -83815,14 +85790,14 @@
 			reftype = FILTER_ITEM_FOOD
 			return
 		}
 		if ( dbmode == DBMODE_REF_SPEC ) {
 			if ( dbspec == DBSPEC_TYPE ) {
-				return FILTER_ITEM_FOOD
+				return 57000
 			}
 			if ( dbspec == DBSPEC_TYPE_MINOR ) {
-				return FILTER_ITEM_SEED
+				return 58500
 			}
 			if ( dbspec == DBSPEC_VALUE_ORG ) {
 				return 3000
 			}
 			if ( dbspec == DBSPEC_PARAM3_ORG ) {
@@ -83881,14 +85856,14 @@
 			reftype = FILTER_ITEM_FOOD
 			return
 		}
 		if ( dbmode == DBMODE_REF_SPEC ) {
 			if ( dbspec == DBSPEC_TYPE ) {
-				return FILTER_ITEM_FOOD
+				return 57000
 			}
 			if ( dbspec == DBSPEC_TYPE_MINOR ) {
-				return FILTER_ITEM_SEED
+				return 58500
 			}
 			if ( dbspec == DBSPEC_VALUE_ORG ) {
 				return 500
 			}
 			if ( dbspec == DBSPEC_PARAM3_ORG ) {
@@ -83936,11 +85911,11 @@
 			inv(INV_ITEM_ID, ci) = ITEM_ID_FEATHER
 			inv(INV_ITEM_PIC, ci) = xy2pic(29, 9)
 			reftype = FILTER_CLOAK
 			reftypeminor = FILTER_CLOAK_MEDIUM
 			inv(INV_ITEM_NUM, ci) = 1
-			fixeditemenc = ENCHANT_FLOAT, 100, 0
+			fixeditemenc = 32, 100, 0
 			inv(INV_ITEM_IDENTIFY_LEVEL, ci) = 0
 			return
 		}
 		if ( dbmode == DBMODE_REF ) {
 			ichargelevel = 0
@@ -83948,14 +85923,14 @@
 			reftype = FILTER_CLOAK
 			return
 		}
 		if ( dbmode == DBMODE_REF_SPEC ) {
 			if ( dbspec == DBSPEC_TYPE ) {
-				return FILTER_CLOAK
+				return 20000
 			}
 			if ( dbspec == DBSPEC_TYPE_MINOR ) {
-				return FILTER_CLOAK_MEDIUM
+				return 20001
 			}
 			if ( dbspec == DBSPEC_VALUE_ORG ) {
 				return 8000
 			}
 			if ( dbspec == DBSPEC_PARAM3_ORG ) {
@@ -83999,26 +85974,26 @@
 			reftype = FILTER_ITEM_ROD
 			reftypeminor = FILTER_ITEM_ROD_HEALING
 			inv(INV_ITEM_NUM, ci) = 1
 			fixeditemenc = 0
 			inv(INV_ITEM_IDENTIFY_LEVEL, ci) = 0
-			inv(INV_ITEM_CHARGE, ci) = 3 + rnd(3) - rnd(3)
-			ibitmod ITEM_BIT_CHARGE_ITEM, ci, 1
+			inv((9 /*!!!@[INV_ITEM_AMMO @@@ INV_ITEM_CHARGE @@@ INV_ITEM_CLIENT @@@ INV_ITEM_FILE @@@ INV_ITEM_NEXT_PERIOD]@!!! */), ci) = 3 + rnd(3) - rnd(3)
+			ibitmod ITEM_BIT_CHARGE_ITEM, ci, TRUE
 			return
 		}
 		if ( dbmode == DBMODE_REF ) {
 			ichargelevel = 3
 			infilterref = ""
 			reftype = FILTER_ITEM_ROD
 			return
 		}
 		if ( dbmode == DBMODE_REF_SPEC ) {
 			if ( dbspec == DBSPEC_TYPE ) {
-				return FILTER_ITEM_ROD
+				return 56000
 			}
 			if ( dbspec == DBSPEC_TYPE_MINOR ) {
-				return FILTER_ITEM_ROD_HEALING
+				return 56001
 			}
 			if ( dbspec == DBSPEC_VALUE_ORG ) {
 				return 5600
 			}
 			if ( dbspec == DBSPEC_PARAM3_ORG ) {
@@ -84078,26 +86053,26 @@
 			reftype = FILTER_ITEM_SPELLBOOK
 			reftypeminor = FILTER_NOTHING
 			inv(INV_ITEM_NUM, ci) = 1
 			fixeditemenc = 0
 			inv(INV_ITEM_IDENTIFY_LEVEL, ci) = 0
-			inv(INV_ITEM_CHARGE, ci) = 4 + rnd(4) - rnd(4)
-			ibitmod ITEM_BIT_CHARGE_ITEM, ci, 1
+			inv((9 /*!!!@[INV_ITEM_AMMO @@@ INV_ITEM_CHARGE @@@ INV_ITEM_CLIENT @@@ INV_ITEM_FILE @@@ INV_ITEM_NEXT_PERIOD]@!!! */), ci) = 4 + rnd(4) - rnd(4)
+			ibitmod ITEM_BIT_CHARGE_ITEM, ci, TRUE
 			return
 		}
 		if ( dbmode == DBMODE_REF ) {
 			ichargelevel = 4
 			infilterref = ""
 			reftype = FILTER_ITEM_SPELLBOOK
 			return
 		}
 		if ( dbmode == DBMODE_REF_SPEC ) {
 			if ( dbspec == DBSPEC_TYPE ) {
-				return FILTER_ITEM_SPELLBOOK
+				return 54000
 			}
 			if ( dbspec == DBSPEC_TYPE_MINOR ) {
-				return FILTER_NONE
+				return 99999
 			}
 			if ( dbspec == DBSPEC_VALUE_ORG ) {
 				return 2900
 			}
 			if ( dbspec == DBSPEC_PARAM3_ORG ) {
@@ -84160,14 +86135,14 @@
 			reftype = FILTER_ITEM_SCROLL
 			return
 		}
 		if ( dbmode == DBMODE_REF_SPEC ) {
 			if ( dbspec == DBSPEC_TYPE ) {
-				return FILTER_ITEM_SCROLL
+				return 53000
 			}
 			if ( dbspec == DBSPEC_TYPE_MINOR ) {
-				return FILTER_NONE
+				return 99999
 			}
 			if ( dbspec == DBSPEC_VALUE_ORG ) {
 				return 3500
 			}
 			if ( dbspec == DBSPEC_PARAM3_ORG ) {
@@ -84220,26 +86195,26 @@
 			reftype = FILTER_ITEM_SPELLBOOK
 			reftypeminor = FILTER_NOTHING
 			inv(INV_ITEM_NUM, ci) = 1
 			fixeditemenc = 0
 			inv(INV_ITEM_IDENTIFY_LEVEL, ci) = 0
-			inv(INV_ITEM_CHARGE, ci) = 3 + rnd(3) - rnd(3)
-			ibitmod ITEM_BIT_CHARGE_ITEM, ci, 1
+			inv((9 /*!!!@[INV_ITEM_AMMO @@@ INV_ITEM_CHARGE @@@ INV_ITEM_CLIENT @@@ INV_ITEM_FILE @@@ INV_ITEM_NEXT_PERIOD]@!!! */), ci) = 3 + rnd(3) - rnd(3)
+			ibitmod ITEM_BIT_CHARGE_ITEM, ci, TRUE
 			return
 		}
 		if ( dbmode == DBMODE_REF ) {
 			ichargelevel = 3
 			infilterref = ""
 			reftype = FILTER_ITEM_SPELLBOOK
 			return
 		}
 		if ( dbmode == DBMODE_REF_SPEC ) {
 			if ( dbspec == DBSPEC_TYPE ) {
-				return FILTER_ITEM_SPELLBOOK
+				return 54000
 			}
 			if ( dbspec == DBSPEC_TYPE_MINOR ) {
-				return FILTER_NONE
+				return 99999
 			}
 			if ( dbspec == DBSPEC_VALUE_ORG ) {
 				return 4700
 			}
 			if ( dbspec == DBSPEC_PARAM3_ORG ) {
@@ -84302,14 +86277,14 @@
 			reftype = FILTER_CONTAINER
 			return
 		}
 		if ( dbmode == DBMODE_REF_SPEC ) {
 			if ( dbspec == DBSPEC_TYPE ) {
-				return FILTER_CONTAINER
+				return 72000
 			}
 			if ( dbspec == DBSPEC_TYPE_MINOR ) {
-				return FILTER_NONE
+				return 99999
 			}
 			if ( dbspec == DBSPEC_VALUE_ORG ) {
 				return 6400
 			}
 			if ( dbspec == DBSPEC_PARAM3_ORG ) {
@@ -84353,26 +86328,26 @@
 			reftype = FILTER_ITEM_SPELLBOOK
 			reftypeminor = FILTER_NOTHING
 			inv(INV_ITEM_NUM, ci) = 1
 			fixeditemenc = 0
 			inv(INV_ITEM_IDENTIFY_LEVEL, ci) = 0
-			inv(INV_ITEM_CHARGE, ci) = 4 + rnd(4) - rnd(4)
-			ibitmod ITEM_BIT_CHARGE_ITEM, ci, 1
+			inv((9 /*!!!@[INV_ITEM_AMMO @@@ INV_ITEM_CHARGE @@@ INV_ITEM_CLIENT @@@ INV_ITEM_FILE @@@ INV_ITEM_NEXT_PERIOD]@!!! */), ci) = 4 + rnd(4) - rnd(4)
+			ibitmod ITEM_BIT_CHARGE_ITEM, ci, TRUE
 			return
 		}
 		if ( dbmode == DBMODE_REF ) {
 			ichargelevel = 4
 			infilterref = ""
 			reftype = FILTER_ITEM_SPELLBOOK
 			return
 		}
 		if ( dbmode == DBMODE_REF_SPEC ) {
 			if ( dbspec == DBSPEC_TYPE ) {
-				return FILTER_ITEM_SPELLBOOK
+				return 54000
 			}
 			if ( dbspec == DBSPEC_TYPE_MINOR ) {
-				return FILTER_NONE
+				return 99999
 			}
 			if ( dbspec == DBSPEC_VALUE_ORG ) {
 				return 3400
 			}
 			if ( dbspec == DBSPEC_PARAM3_ORG ) {
@@ -84425,26 +86400,26 @@
 			reftype = FILTER_ITEM_ROD
 			reftypeminor = FILTER_ITEM_ROD_UTILITY
 			inv(INV_ITEM_NUM, ci) = 1
 			fixeditemenc = 0
 			inv(INV_ITEM_IDENTIFY_LEVEL, ci) = 0
-			inv(INV_ITEM_CHARGE, ci) = 7 + rnd(7) - rnd(7)
-			ibitmod ITEM_BIT_CHARGE_ITEM, ci, 1
+			inv((9 /*!!!@[INV_ITEM_AMMO @@@ INV_ITEM_CHARGE @@@ INV_ITEM_CLIENT @@@ INV_ITEM_FILE @@@ INV_ITEM_NEXT_PERIOD]@!!! */), ci) = 7 + rnd(7) - rnd(7)
+			ibitmod ITEM_BIT_CHARGE_ITEM, ci, TRUE
 			return
 		}
 		if ( dbmode == DBMODE_REF ) {
 			ichargelevel = 7
 			infilterref = ""
 			reftype = FILTER_ITEM_ROD
 			return
 		}
 		if ( dbmode == DBMODE_REF_SPEC ) {
 			if ( dbspec == DBSPEC_TYPE ) {
-				return FILTER_ITEM_ROD
+				return 56000
 			}
 			if ( dbspec == DBSPEC_TYPE_MINOR ) {
-				return FILTER_ITEM_ROD_UTILITY
+				return 56003
 			}
 			if ( dbspec == DBSPEC_VALUE_ORG ) {
 				return 4000
 			}
 			if ( dbspec == DBSPEC_PARAM3_ORG ) {
@@ -84516,14 +86491,14 @@
 			reftype = FILTER_ITEM_TOOL
 			return
 		}
 		if ( dbmode == DBMODE_REF_SPEC ) {
 			if ( dbspec == DBSPEC_TYPE ) {
-				return FILTER_ITEM_TOOL
+				return 59000
 			}
 			if ( dbspec == DBSPEC_TYPE_MINOR ) {
-				return FILTER_NONE
+				return 99999
 			}
 			if ( dbspec == DBSPEC_VALUE_ORG ) {
 				return 1000
 			}
 			if ( dbspec == DBSPEC_PARAM3_ORG ) {
@@ -84580,14 +86555,14 @@
 			reftype = FILTER_ITEM_SCROLL
 			return
 		}
 		if ( dbmode == DBMODE_REF_SPEC ) {
 			if ( dbspec == DBSPEC_TYPE ) {
-				return FILTER_ITEM_SCROLL
+				return 53000
 			}
 			if ( dbspec == DBSPEC_TYPE_MINOR ) {
-				return FILTER_ITEM_DEED
+				return 53100
 			}
 			if ( dbspec == DBSPEC_VALUE_ORG ) {
 				return 10000
 			}
 			if ( dbspec == DBSPEC_PARAM3_ORG ) {
@@ -84648,14 +86623,14 @@
 			reftype = FILTER_ITEM_SCROLL
 			return
 		}
 		if ( dbmode == DBMODE_REF_SPEC ) {
 			if ( dbspec == DBSPEC_TYPE ) {
-				return FILTER_ITEM_SCROLL
+				return 53000
 			}
 			if ( dbspec == DBSPEC_TYPE_MINOR ) {
-				return FILTER_ITEM_DEED
+				return 53100
 			}
 			if ( dbspec == DBSPEC_VALUE_ORG ) {
 				return 45000
 			}
 			if ( dbspec == DBSPEC_PARAM3_ORG ) {
@@ -84716,14 +86691,14 @@
 			reftype = FILTER_FURNITURE
 			return
 		}
 		if ( dbmode == DBMODE_REF_SPEC ) {
 			if ( dbspec == DBSPEC_TYPE ) {
-				return FILTER_FURNITURE
+				return 60000
 			}
 			if ( dbspec == DBSPEC_TYPE_MINOR ) {
-				return FILTER_NONE
+				return 99999
 			}
 			if ( dbspec == DBSPEC_VALUE_ORG ) {
 				return 200
 			}
 			if ( dbspec == DBSPEC_PARAM3_ORG ) {
@@ -84777,14 +86752,14 @@
 			reftype = FILTER_FURNITURE
 			return
 		}
 		if ( dbmode == DBMODE_REF_SPEC ) {
 			if ( dbspec == DBSPEC_TYPE ) {
-				return FILTER_FURNITURE
+				return 60000
 			}
 			if ( dbspec == DBSPEC_TYPE_MINOR ) {
-				return FILTER_NONE
+				return 99999
 			}
 			if ( dbspec == DBSPEC_VALUE_ORG ) {
 				return 7000
 			}
 			if ( dbspec == DBSPEC_PARAM3_ORG ) {
@@ -84838,14 +86813,14 @@
 			reftype = FILTER_FURNITURE
 			return
 		}
 		if ( dbmode == DBMODE_REF_SPEC ) {
 			if ( dbspec == DBSPEC_TYPE ) {
-				return FILTER_FURNITURE
+				return 60000
 			}
 			if ( dbspec == DBSPEC_TYPE_MINOR ) {
-				return FILTER_NONE
+				return 99999
 			}
 			if ( dbspec == DBSPEC_VALUE_ORG ) {
 				return 25000
 			}
 			if ( dbspec == DBSPEC_PARAM3_ORG ) {
@@ -84899,14 +86874,14 @@
 			reftype = FILTER_FURNITURE
 			return
 		}
 		if ( dbmode == DBMODE_REF_SPEC ) {
 			if ( dbspec == DBSPEC_TYPE ) {
-				return FILTER_FURNITURE
+				return 60000
 			}
 			if ( dbspec == DBSPEC_TYPE_MINOR ) {
-				return FILTER_NONE
+				return 99999
 			}
 			if ( dbspec == DBSPEC_VALUE_ORG ) {
 				return 12000
 			}
 			if ( dbspec == DBSPEC_PARAM3_ORG ) {
@@ -84960,14 +86935,14 @@
 			reftype = FILTER_FURNITURE
 			return
 		}
 		if ( dbmode == DBMODE_REF_SPEC ) {
 			if ( dbspec == DBSPEC_TYPE ) {
-				return FILTER_FURNITURE
+				return 60000
 			}
 			if ( dbspec == DBSPEC_TYPE_MINOR ) {
-				return FILTER_NONE
+				return 99999
 			}
 			if ( dbspec == DBSPEC_VALUE_ORG ) {
 				return 8200
 			}
 			if ( dbspec == DBSPEC_PARAM3_ORG ) {
@@ -85021,14 +86996,14 @@
 			reftype = FILTER_FURNITURE
 			return
 		}
 		if ( dbmode == DBMODE_REF_SPEC ) {
 			if ( dbspec == DBSPEC_TYPE ) {
-				return FILTER_FURNITURE
+				return 60000
 			}
 			if ( dbspec == DBSPEC_TYPE_MINOR ) {
-				return FILTER_NONE
+				return 99999
 			}
 			if ( dbspec == DBSPEC_VALUE_ORG ) {
 				return 8500
 			}
 			if ( dbspec == DBSPEC_PARAM3_ORG ) {
@@ -85083,14 +87058,14 @@
 			reftype = FILTER_FURNITURE
 			return
 		}
 		if ( dbmode == DBMODE_REF_SPEC ) {
 			if ( dbspec == DBSPEC_TYPE ) {
-				return FILTER_FURNITURE
+				return 60000
 			}
 			if ( dbspec == DBSPEC_TYPE_MINOR ) {
-				return FILTER_NONE
+				return 99999
 			}
 			if ( dbspec == DBSPEC_VALUE_ORG ) {
 				return 2400
 			}
 			if ( dbspec == DBSPEC_PARAM3_ORG ) {
@@ -85144,14 +87119,14 @@
 			reftype = FILTER_FURNITURE
 			return
 		}
 		if ( dbmode == DBMODE_REF_SPEC ) {
 			if ( dbspec == DBSPEC_TYPE ) {
-				return FILTER_FURNITURE
+				return 60000
 			}
 			if ( dbspec == DBSPEC_TYPE_MINOR ) {
-				return FILTER_NONE
+				return 99999
 			}
 			if ( dbspec == DBSPEC_VALUE_ORG ) {
 				return 4500
 			}
 			if ( dbspec == DBSPEC_PARAM3_ORG ) {
@@ -85205,14 +87180,14 @@
 			reftype = FILTER_FURNITURE
 			return
 		}
 		if ( dbmode == DBMODE_REF_SPEC ) {
 			if ( dbspec == DBSPEC_TYPE ) {
-				return FILTER_FURNITURE
+				return 60000
 			}
 			if ( dbspec == DBSPEC_TYPE_MINOR ) {
-				return FILTER_NONE
+				return 99999
 			}
 			if ( dbspec == DBSPEC_VALUE_ORG ) {
 				return 7500
 			}
 			if ( dbspec == DBSPEC_PARAM3_ORG ) {
@@ -85266,14 +87241,14 @@
 			reftype = FILTER_FURNITURE
 			return
 		}
 		if ( dbmode == DBMODE_REF_SPEC ) {
 			if ( dbspec == DBSPEC_TYPE ) {
-				return FILTER_FURNITURE
+				return 60000
 			}
 			if ( dbspec == DBSPEC_TYPE_MINOR ) {
-				return FILTER_NONE
+				return 99999
 			}
 			if ( dbspec == DBSPEC_VALUE_ORG ) {
 				return 9400
 			}
 			if ( dbspec == DBSPEC_PARAM3_ORG ) {
@@ -85327,14 +87302,14 @@
 			reftype = FILTER_FURNITURE
 			return
 		}
 		if ( dbmode == DBMODE_REF_SPEC ) {
 			if ( dbspec == DBSPEC_TYPE ) {
-				return FILTER_FURNITURE
+				return 60000
 			}
 			if ( dbspec == DBSPEC_TYPE_MINOR ) {
-				return FILTER_NONE
+				return 99999
 			}
 			if ( dbspec == DBSPEC_VALUE_ORG ) {
 				return 8500
 			}
 			if ( dbspec == DBSPEC_PARAM3_ORG ) {
@@ -85388,14 +87363,14 @@
 			reftype = FILTER_ENVIRONMENT
 			return
 		}
 		if ( dbmode == DBMODE_REF_SPEC ) {
 			if ( dbspec == DBSPEC_TYPE ) {
-				return FILTER_ENVIRONMENT
+				return 80000
 			}
 			if ( dbspec == DBSPEC_TYPE_MINOR ) {
-				return FILTER_NONE
+				return 99999
 			}
 			if ( dbspec == DBSPEC_VALUE_ORG ) {
 				return 900
 			}
 			if ( dbspec == DBSPEC_PARAM3_ORG ) {
@@ -85449,14 +87424,14 @@
 			reftype = FILTER_ENVIRONMENT
 			return
 		}
 		if ( dbmode == DBMODE_REF_SPEC ) {
 			if ( dbspec == DBSPEC_TYPE ) {
-				return FILTER_ENVIRONMENT
+				return 80000
 			}
 			if ( dbspec == DBSPEC_TYPE_MINOR ) {
-				return FILTER_NONE
+				return 99999
 			}
 			if ( dbspec == DBSPEC_VALUE_ORG ) {
 				return 1000
 			}
 			if ( dbspec == DBSPEC_PARAM3_ORG ) {
@@ -85510,14 +87485,14 @@
 			reftype = FILTER_ENVIRONMENT
 			return
 		}
 		if ( dbmode == DBMODE_REF_SPEC ) {
 			if ( dbspec == DBSPEC_TYPE ) {
-				return FILTER_ENVIRONMENT
+				return 80000
 			}
 			if ( dbspec == DBSPEC_TYPE_MINOR ) {
-				return FILTER_NONE
+				return 99999
 			}
 			if ( dbspec == DBSPEC_VALUE_ORG ) {
 				return 800
 			}
 			if ( dbspec == DBSPEC_PARAM3_ORG ) {
@@ -85571,14 +87546,14 @@
 			reftype = FILTER_ENVIRONMENT
 			return
 		}
 		if ( dbmode == DBMODE_REF_SPEC ) {
 			if ( dbspec == DBSPEC_TYPE ) {
-				return FILTER_ENVIRONMENT
+				return 80000
 			}
 			if ( dbspec == DBSPEC_TYPE_MINOR ) {
-				return FILTER_NONE
+				return 99999
 			}
 			if ( dbspec == DBSPEC_VALUE_ORG ) {
 				return 500
 			}
 			if ( dbspec == DBSPEC_PARAM3_ORG ) {
@@ -85634,14 +87609,14 @@
 			reftype = FILTER_ENVIRONMENT
 			return
 		}
 		if ( dbmode == DBMODE_REF_SPEC ) {
 			if ( dbspec == DBSPEC_TYPE ) {
-				return FILTER_ENVIRONMENT
+				return 80000
 			}
 			if ( dbspec == DBSPEC_TYPE_MINOR ) {
-				return FILTER_NONE
+				return 99999
 			}
 			if ( dbspec == DBSPEC_VALUE_ORG ) {
 				return 2000
 			}
 			if ( dbspec == DBSPEC_PARAM3_ORG ) {
@@ -85695,14 +87670,14 @@
 			reftype = FILTER_ENVIRONMENT
 			return
 		}
 		if ( dbmode == DBMODE_REF_SPEC ) {
 			if ( dbspec == DBSPEC_TYPE ) {
-				return FILTER_ENVIRONMENT
+				return 80000
 			}
 			if ( dbspec == DBSPEC_TYPE_MINOR ) {
-				return FILTER_NONE
+				return 99999
 			}
 			if ( dbspec == DBSPEC_VALUE_ORG ) {
 				return 500
 			}
 			if ( dbspec == DBSPEC_PARAM3_ORG ) {
@@ -85756,14 +87731,14 @@
 			reftype = FILTER_ENVIRONMENT
 			return
 		}
 		if ( dbmode == DBMODE_REF_SPEC ) {
 			if ( dbspec == DBSPEC_TYPE ) {
-				return FILTER_ENVIRONMENT
+				return 80000
 			}
 			if ( dbspec == DBSPEC_TYPE_MINOR ) {
-				return FILTER_NONE
+				return 99999
 			}
 			if ( dbspec == DBSPEC_VALUE_ORG ) {
 				return 500
 			}
 			if ( dbspec == DBSPEC_PARAM3_ORG ) {
@@ -85817,14 +87792,14 @@
 			reftype = FILTER_ENVIRONMENT
 			return
 		}
 		if ( dbmode == DBMODE_REF_SPEC ) {
 			if ( dbspec == DBSPEC_TYPE ) {
-				return FILTER_ENVIRONMENT
+				return 80000
 			}
 			if ( dbspec == DBSPEC_TYPE_MINOR ) {
-				return FILTER_NONE
+				return 99999
 			}
 			if ( dbspec == DBSPEC_VALUE_ORG ) {
 				return 700
 			}
 			if ( dbspec == DBSPEC_PARAM3_ORG ) {
@@ -85879,14 +87854,14 @@
 			reftype = FILTER_ITEM_SCROLL
 			return
 		}
 		if ( dbmode == DBMODE_REF_SPEC ) {
 			if ( dbspec == DBSPEC_TYPE ) {
-				return FILTER_ITEM_SCROLL
+				return 53000
 			}
 			if ( dbspec == DBSPEC_TYPE_MINOR ) {
-				return FILTER_ITEM_DEED
+				return 53100
 			}
 			if ( dbspec == DBSPEC_VALUE_ORG ) {
 				return 200000
 			}
 			if ( dbspec == DBSPEC_PARAM3_ORG ) {
@@ -85948,14 +87923,14 @@
 			reftype = FILTER_ITEM_SCROLL
 			return
 		}
 		if ( dbmode == DBMODE_REF_SPEC ) {
 			if ( dbspec == DBSPEC_TYPE ) {
-				return FILTER_ITEM_SCROLL
+				return 53000
 			}
 			if ( dbspec == DBSPEC_TYPE_MINOR ) {
-				return FILTER_ITEM_DEED
+				return 53100
 			}
 			if ( dbspec == DBSPEC_VALUE_ORG ) {
 				return 140000
 			}
 			if ( dbspec == DBSPEC_PARAM3_ORG ) {
@@ -86006,11 +87981,11 @@
 			inv(INV_ITEM_ID, ci) = ITEM_ID_WING
 			inv(INV_ITEM_PIC, ci) = xy2pic(27, 15)
 			reftype = FILTER_CLOAK
 			reftypeminor = FILTER_CLOAK_MEDIUM
 			inv(INV_ITEM_NUM, ci) = 1
-			fixeditemenc = ENCHANT_FLOAT, 100, 0
+			fixeditemenc = 32, 100, 0
 			inv(INV_ITEM_IDENTIFY_LEVEL, ci) = 0
 			return
 		}
 		if ( dbmode == DBMODE_REF ) {
 			ichargelevel = 0
@@ -86018,14 +87993,14 @@
 			reftype = FILTER_CLOAK
 			return
 		}
 		if ( dbmode == DBMODE_REF_SPEC ) {
 			if ( dbspec == DBSPEC_TYPE ) {
-				return FILTER_CLOAK
+				return 20000
 			}
 			if ( dbspec == DBSPEC_TYPE_MINOR ) {
-				return FILTER_CLOAK_MEDIUM
+				return 20001
 			}
 			if ( dbspec == DBSPEC_VALUE_ORG ) {
 				return 4500
 			}
 			if ( dbspec == DBSPEC_PARAM3_ORG ) {
@@ -86079,14 +88054,14 @@
 			reftype = FILTER_ITEM_POTION
 			return
 		}
 		if ( dbmode == DBMODE_REF_SPEC ) {
 			if ( dbspec == DBSPEC_TYPE ) {
-				return FILTER_ITEM_POTION
+				return 52000
 			}
 			if ( dbspec == DBSPEC_TYPE_MINOR ) {
-				return FILTER_NONE
+				return 99999
 			}
 			if ( dbspec == DBSPEC_VALUE_ORG ) {
 				return 500
 			}
 			if ( dbspec == DBSPEC_PARAM3_ORG ) {
@@ -86139,26 +88114,26 @@
 			reftype = FILTER_ITEM_ROD
 			reftypeminor = FILTER_ITEM_ROD_UTILITY
 			inv(INV_ITEM_NUM, ci) = 1
 			fixeditemenc = 0
 			inv(INV_ITEM_IDENTIFY_LEVEL, ci) = 0
-			inv(INV_ITEM_CHARGE, ci) = 3 + rnd(3) - rnd(3)
-			ibitmod ITEM_BIT_CHARGE_ITEM, ci, 1
+			inv((9 /*!!!@[INV_ITEM_AMMO @@@ INV_ITEM_CHARGE @@@ INV_ITEM_CLIENT @@@ INV_ITEM_FILE @@@ INV_ITEM_NEXT_PERIOD]@!!! */), ci) = 3 + rnd(3) - rnd(3)
+			ibitmod ITEM_BIT_CHARGE_ITEM, ci, TRUE
 			return
 		}
 		if ( dbmode == DBMODE_REF ) {
 			ichargelevel = 3
 			infilterref = ""
 			reftype = FILTER_ITEM_ROD
 			return
 		}
 		if ( dbmode == DBMODE_REF_SPEC ) {
 			if ( dbspec == DBSPEC_TYPE ) {
-				return FILTER_ITEM_ROD
+				return 56000
 			}
 			if ( dbspec == DBSPEC_TYPE_MINOR ) {
-				return FILTER_ITEM_ROD_UTILITY
+				return 56003
 			}
 			if ( dbspec == DBSPEC_VALUE_ORG ) {
 				return 6000
 			}
 			if ( dbspec == DBSPEC_PARAM3_ORG ) {
@@ -86218,26 +88193,26 @@
 			reftype = FILTER_ITEM_ROD
 			reftypeminor = FILTER_ITEM_ROD_ENVIRONMENTAL
 			inv(INV_ITEM_NUM, ci) = 1
 			fixeditemenc = 0
 			inv(INV_ITEM_IDENTIFY_LEVEL, ci) = 0
-			inv(INV_ITEM_CHARGE, ci) = 4 + rnd(4) - rnd(4)
-			ibitmod ITEM_BIT_CHARGE_ITEM, ci, 1
+			inv((9 /*!!!@[INV_ITEM_AMMO @@@ INV_ITEM_CHARGE @@@ INV_ITEM_CLIENT @@@ INV_ITEM_FILE @@@ INV_ITEM_NEXT_PERIOD]@!!! */), ci) = 4 + rnd(4) - rnd(4)
+			ibitmod ITEM_BIT_CHARGE_ITEM, ci, TRUE
 			return
 		}
 		if ( dbmode == DBMODE_REF ) {
 			ichargelevel = 4
 			infilterref = ""
 			reftype = FILTER_ITEM_ROD
 			return
 		}
 		if ( dbmode == DBMODE_REF_SPEC ) {
 			if ( dbspec == DBSPEC_TYPE ) {
-				return FILTER_ITEM_ROD
+				return 56000
 			}
 			if ( dbspec == DBSPEC_TYPE_MINOR ) {
-				return FILTER_ITEM_ROD_ENVIRONMENTAL
+				return 56004
 			}
 			if ( dbspec == DBSPEC_VALUE_ORG ) {
 				return 4500
 			}
 			if ( dbspec == DBSPEC_PARAM3_ORG ) {
@@ -86307,14 +88282,14 @@
 			reftype = FILTER_ITEM_POTION
 			return
 		}
 		if ( dbmode == DBMODE_REF_SPEC ) {
 			if ( dbspec == DBSPEC_TYPE ) {
-				return FILTER_ITEM_POTION
+				return 52000
 			}
 			if ( dbspec == DBSPEC_TYPE_MINOR ) {
-				return FILTER_NONE
+				return 99999
 			}
 			if ( dbspec == DBSPEC_VALUE_ORG ) {
 				return 280
 			}
 			if ( dbspec == DBSPEC_PARAM3_ORG ) {
@@ -86377,14 +88352,14 @@
 			reftype = FILTER_ITEM_SCROLL
 			return
 		}
 		if ( dbmode == DBMODE_REF_SPEC ) {
 			if ( dbspec == DBSPEC_TYPE ) {
-				return FILTER_ITEM_SCROLL
+				return 53000
 			}
 			if ( dbspec == DBSPEC_TYPE_MINOR ) {
-				return FILTER_NONE
+				return 99999
 			}
 			if ( dbspec == DBSPEC_VALUE_ORG ) {
 				return 2500
 			}
 			if ( dbspec == DBSPEC_PARAM3_ORG ) {
@@ -86442,11 +88417,11 @@
 			inv(INV_ITEM_PIC, ci) = xy2pic(31, 24)
 			reftype = FILTER_RANGE
 			reftypeminor = FILTER_RANGE_LASER
 			inv(INV_ITEM_NUM, ci) = 1
 			fixeditemenc = ENCHANT_PROC * EXT_ENCHANTMENT + ENCHANT_PROC_RAGING_ROAR, 350, ENCHANT_PROC * EXT_ENCHANTMENT + ENCHANT_PROC_CHAOS_BALL, 300, ENCHANT_ELEMENTAL_DMG * EXT_ENCHANTMENT + SKILL_RES_NERVE, 300, ENCHANT_RESISTANCE * EXT_ENCHANTMENT + SKILL_RES_SOUND, 300, ENCHANT_RESISTANCE * EXT_ENCHANTMENT + SKILL_RES_CHAOS, 300, 0
-			ibitmod ITEM_BIT_PRECIOUS, ci, 1
+			ibitmod ITEM_BIT_PRECIOUS, ci, TRUE
 			inv(INV_ITEM_IDENTIFY_LEVEL, ci) = 500
 			fixlv = FIX_QUALITY_UNIQUE
 			return
 		}
 		if ( dbmode == DBMODE_REF ) {
@@ -86455,14 +88430,14 @@
 			reftype = FILTER_RANGE
 			return
 		}
 		if ( dbmode == DBMODE_REF_SPEC ) {
 			if ( dbspec == DBSPEC_TYPE ) {
-				return FILTER_RANGE
+				return 24000
 			}
 			if ( dbspec == DBSPEC_TYPE_MINOR ) {
-				return FILTER_RANGE_LASER
+				return 24021
 			}
 			if ( dbspec == DBSPEC_VALUE_ORG ) {
 				return 60000
 			}
 			if ( dbspec == DBSPEC_PARAM3_ORG ) {
@@ -86521,14 +88496,14 @@
 			reftype = FILTER_AMMO
 			return
 		}
 		if ( dbmode == DBMODE_REF_SPEC ) {
 			if ( dbspec == DBSPEC_TYPE ) {
-				return FILTER_AMMO
+				return 25000
 			}
 			if ( dbspec == DBSPEC_TYPE_MINOR ) {
-				return FILTER_AMMO_ENERGY
+				return 25030
 			}
 			if ( dbspec == DBSPEC_VALUE_ORG ) {
 				return 150
 			}
 			if ( dbspec == DBSPEC_PARAM3_ORG ) {
@@ -86588,14 +88563,14 @@
 			reftype = FILTER_RANGE
 			return
 		}
 		if ( dbmode == DBMODE_REF_SPEC ) {
 			if ( dbspec == DBSPEC_TYPE ) {
-				return FILTER_RANGE
+				return 24000
 			}
 			if ( dbspec == DBSPEC_TYPE_MINOR ) {
-				return FILTER_RANGE_LASER
+				return 24021
 			}
 			if ( dbspec == DBSPEC_VALUE_ORG ) {
 				return 1200
 			}
 			if ( dbspec == DBSPEC_PARAM3_ORG ) {
@@ -86658,14 +88633,14 @@
 			reftype = FILTER_ITEM_SCROLL
 			return
 		}
 		if ( dbmode == DBMODE_REF_SPEC ) {
 			if ( dbspec == DBSPEC_TYPE ) {
-				return FILTER_ITEM_SCROLL
+				return 53000
 			}
 			if ( dbspec == DBSPEC_TYPE_MINOR ) {
-				return FILTER_NONE
+				return 99999
 			}
 			if ( dbspec == DBSPEC_VALUE_ORG ) {
 				return 10000
 			}
 			if ( dbspec == DBSPEC_PARAM3_ORG ) {
@@ -86728,14 +88703,14 @@
 			reftype = FILTER_CONTAINER
 			return
 		}
 		if ( dbmode == DBMODE_REF_SPEC ) {
 			if ( dbspec == DBSPEC_TYPE ) {
-				return FILTER_CONTAINER
+				return 72000
 			}
 			if ( dbspec == DBSPEC_TYPE_MINOR ) {
-				return FILTER_NONE
+				return 99999
 			}
 			if ( dbspec == DBSPEC_VALUE_ORG ) {
 				return 4500
 			}
 			if ( dbspec == DBSPEC_PARAM3_ORG ) {
@@ -86789,14 +88764,14 @@
 			reftype = FILTER_ITEM_SCROLL
 			return
 		}
 		if ( dbmode == DBMODE_REF_SPEC ) {
 			if ( dbspec == DBSPEC_TYPE ) {
-				return FILTER_ITEM_SCROLL
+				return 53000
 			}
 			if ( dbspec == DBSPEC_TYPE_MINOR ) {
-				return FILTER_NONE
+				return 99999
 			}
 			if ( dbspec == DBSPEC_VALUE_ORG ) {
 				return 14000
 			}
 			if ( dbspec == DBSPEC_PARAM3_ORG ) {
@@ -86859,14 +88834,14 @@
 			reftype = FILTER_ITEM_SCROLL
 			return
 		}
 		if ( dbmode == DBMODE_REF_SPEC ) {
 			if ( dbspec == DBSPEC_TYPE ) {
-				return FILTER_ITEM_SCROLL
+				return 53000
 			}
 			if ( dbspec == DBSPEC_TYPE_MINOR ) {
-				return FILTER_NONE
+				return 99999
 			}
 			if ( dbspec == DBSPEC_VALUE_ORG ) {
 				return 8000
 			}
 			if ( dbspec == DBSPEC_PARAM3_ORG ) {
@@ -86929,14 +88904,14 @@
 			reftype = FILTER_ITEM_SCROLL
 			return
 		}
 		if ( dbmode == DBMODE_REF_SPEC ) {
 			if ( dbspec == DBSPEC_TYPE ) {
-				return FILTER_ITEM_SCROLL
+				return 53000
 			}
 			if ( dbspec == DBSPEC_TYPE_MINOR ) {
-				return FILTER_NONE
+				return 99999
 			}
 			if ( dbspec == DBSPEC_VALUE_ORG ) {
 				return 14000
 			}
 			if ( dbspec == DBSPEC_PARAM3_ORG ) {
@@ -86999,14 +88974,14 @@
 			reftype = FILTER_ITEM_SCROLL
 			return
 		}
 		if ( dbmode == DBMODE_REF_SPEC ) {
 			if ( dbspec == DBSPEC_TYPE ) {
-				return FILTER_ITEM_SCROLL
+				return 53000
 			}
 			if ( dbspec == DBSPEC_TYPE_MINOR ) {
-				return FILTER_NONE
+				return 99999
 			}
 			if ( dbspec == DBSPEC_VALUE_ORG ) {
 				return 8000
 			}
 			if ( dbspec == DBSPEC_PARAM3_ORG ) {
@@ -87058,11 +89033,11 @@
 			inv(INV_ITEM_PIC, ci) = xy2pic(0, 13)
 			reftype = FILTER_ITEM_BOOK
 			reftypeminor = FILTER_NOTHING
 			inv(INV_ITEM_NUM, ci) = 1
 			fixeditemenc = 0
-			ibitmod ITEM_BIT_PRECIOUS, ci, 1
+			ibitmod ITEM_BIT_PRECIOUS, ci, TRUE
 			inv(INV_ITEM_IDENTIFY_LEVEL, ci) = 0
 			return
 		}
 		if ( dbmode == DBMODE_REF ) {
 			ichargelevel = 0
@@ -87070,14 +89045,14 @@
 			reftype = FILTER_ITEM_BOOK
 			return
 		}
 		if ( dbmode == DBMODE_REF_SPEC ) {
 			if ( dbspec == DBSPEC_TYPE ) {
-				return FILTER_ITEM_BOOK
+				return 55000
 			}
 			if ( dbspec == DBSPEC_TYPE_MINOR ) {
-				return FILTER_NONE
+				return 99999
 			}
 			if ( dbspec == DBSPEC_VALUE_ORG ) {
 				return 8000
 			}
 			if ( dbspec == DBSPEC_PARAM3_ORG ) {
@@ -87141,14 +89116,14 @@
 			reftype = FILTER_REMAINS
 			return
 		}
 		if ( dbmode == DBMODE_REF_SPEC ) {
 			if ( dbspec == DBSPEC_TYPE ) {
-				return FILTER_REMAINS
+				return 62000
 			}
 			if ( dbspec == DBSPEC_TYPE_MINOR ) {
-				return FILTER_NONE
+				return 99999
 			}
 			if ( dbspec == DBSPEC_VALUE_ORG ) {
 				return 500
 			}
 			if ( dbspec == DBSPEC_PARAM3_ORG ) {
@@ -87202,14 +89177,14 @@
 			reftype = FILTER_REMAINS
 			return
 		}
 		if ( dbmode == DBMODE_REF_SPEC ) {
 			if ( dbspec == DBSPEC_TYPE ) {
-				return FILTER_REMAINS
+				return 62000
 			}
 			if ( dbspec == DBSPEC_TYPE_MINOR ) {
-				return FILTER_NONE
+				return 99999
 			}
 			if ( dbspec == DBSPEC_VALUE_ORG ) {
 				return 1000
 			}
 			if ( dbspec == DBSPEC_PARAM3_ORG ) {
@@ -87263,14 +89238,14 @@
 			reftype = FILTER_ITEM_SCROLL
 			return
 		}
 		if ( dbmode == DBMODE_REF_SPEC ) {
 			if ( dbspec == DBSPEC_TYPE ) {
-				return FILTER_ITEM_SCROLL
+				return 53000
 			}
 			if ( dbspec == DBSPEC_TYPE_MINOR ) {
-				return FILTER_NONE
+				return 99999
 			}
 			if ( dbspec == DBSPEC_VALUE_ORG ) {
 				return 20000
 			}
 			if ( dbspec == DBSPEC_PARAM3_ORG ) {
@@ -87333,14 +89308,14 @@
 			reftype = FILTER_ITEM_SCROLL
 			return
 		}
 		if ( dbmode == DBMODE_REF_SPEC ) {
 			if ( dbspec == DBSPEC_TYPE ) {
-				return FILTER_ITEM_SCROLL
+				return 53000
 			}
 			if ( dbspec == DBSPEC_TYPE_MINOR ) {
-				return FILTER_NONE
+				return 99999
 			}
 			if ( dbspec == DBSPEC_VALUE_ORG ) {
 				return 5000
 			}
 			if ( dbspec == DBSPEC_PARAM3_ORG ) {
@@ -87403,14 +89378,14 @@
 			reftype = FILTER_ITEM_SCROLL
 			return
 		}
 		if ( dbmode == DBMODE_REF_SPEC ) {
 			if ( dbspec == DBSPEC_TYPE ) {
-				return FILTER_ITEM_SCROLL
+				return 53000
 			}
 			if ( dbspec == DBSPEC_TYPE_MINOR ) {
-				return FILTER_NONE
+				return 99999
 			}
 			if ( dbspec == DBSPEC_VALUE_ORG ) {
 				return 600
 			}
 			if ( dbspec == DBSPEC_PARAM3_ORG ) {
@@ -87474,14 +89449,14 @@
 			reftype = FILTER_ITEM_FOOD
 			return
 		}
 		if ( dbmode == DBMODE_REF_SPEC ) {
 			if ( dbspec == DBSPEC_TYPE ) {
-				return FILTER_ITEM_FOOD
+				return 57000
 			}
 			if ( dbspec == DBSPEC_TYPE_MINOR ) {
-				return FILTER_NONE
+				return 99999
 			}
 			if ( dbspec == DBSPEC_VALUE_ORG ) {
 				return 750
 			}
 			if ( dbspec == DBSPEC_PARAM3_ORG ) {
@@ -87536,14 +89511,14 @@
 			reftype = FILTER_ITEM_FOOD
 			return
 		}
 		if ( dbmode == DBMODE_REF_SPEC ) {
 			if ( dbspec == DBSPEC_TYPE ) {
-				return FILTER_ITEM_FOOD
+				return 57000
 			}
 			if ( dbspec == DBSPEC_TYPE_MINOR ) {
-				return FILTER_NONE
+				return 99999
 			}
 			if ( dbspec == DBSPEC_VALUE_ORG ) {
 				return 350
 			}
 			if ( dbspec == DBSPEC_PARAM3_ORG ) {
@@ -87598,14 +89573,14 @@
 			reftype = FILTER_ITEM_FOOD
 			return
 		}
 		if ( dbmode == DBMODE_REF_SPEC ) {
 			if ( dbspec == DBSPEC_TYPE ) {
-				return FILTER_ITEM_FOOD
+				return 57000
 			}
 			if ( dbspec == DBSPEC_TYPE_MINOR ) {
-				return FILTER_NONE
+				return 99999
 			}
 			if ( dbspec == DBSPEC_VALUE_ORG ) {
 				return 440
 			}
 			if ( dbspec == DBSPEC_PARAM3_ORG ) {
@@ -87653,11 +89628,11 @@
 			inv(INV_ITEM_ID, ci) = ITEM_ID_SHOT_GUN
 			inv(INV_ITEM_PIC, ci) = xy2pic(19, 15)
 			reftype = FILTER_RANGE
 			reftypeminor = FILTER_RANGE_PISTOL
 			inv(INV_ITEM_NUM, ci) = 1
-			fixeditemenc = ENCHANT_CRIT_CHANCE, 100, 0
+			fixeditemenc = 44, 100, 0
 			inv(INV_ITEM_IDENTIFY_LEVEL, ci) = 0
 			return
 		}
 		if ( dbmode == DBMODE_REF ) {
 			ichargelevel = 0
@@ -87665,14 +89640,14 @@
 			reftype = FILTER_RANGE
 			return
 		}
 		if ( dbmode == DBMODE_REF_SPEC ) {
 			if ( dbspec == DBSPEC_TYPE ) {
-				return FILTER_RANGE
+				return 24000
 			}
 			if ( dbspec == DBSPEC_TYPE_MINOR ) {
-				return FILTER_RANGE_PISTOL
+				return 24020
 			}
 			if ( dbspec == DBSPEC_VALUE_ORG ) {
 				return 700
 			}
 			if ( dbspec == DBSPEC_PARAM3_ORG ) {
@@ -87734,14 +89709,14 @@
 			reftype = FILTER_FURNITURE
 			return
 		}
 		if ( dbmode == DBMODE_REF_SPEC ) {
 			if ( dbspec == DBSPEC_TYPE ) {
-				return FILTER_FURNITURE
+				return 60000
 			}
 			if ( dbspec == DBSPEC_TYPE_MINOR ) {
-				return FILTER_NONE
+				return 99999
 			}
 			if ( dbspec == DBSPEC_VALUE_ORG ) {
 				return 1000
 			}
 			if ( dbspec == DBSPEC_PARAM3_ORG ) {
@@ -87803,14 +89778,14 @@
 			reftype = FILTER_FURNITURE
 			return
 		}
 		if ( dbmode == DBMODE_REF_SPEC ) {
 			if ( dbspec == DBSPEC_TYPE ) {
-				return FILTER_FURNITURE
+				return 60000
 			}
 			if ( dbspec == DBSPEC_TYPE_MINOR ) {
-				return FILTER_NONE
+				return 99999
 			}
 			if ( dbspec == DBSPEC_VALUE_ORG ) {
 				return 1200
 			}
 			if ( dbspec == DBSPEC_PARAM3_ORG ) {
@@ -87872,14 +89847,14 @@
 			reftype = FILTER_FURNITURE
 			return
 		}
 		if ( dbmode == DBMODE_REF_SPEC ) {
 			if ( dbspec == DBSPEC_TYPE ) {
-				return FILTER_FURNITURE
+				return 60000
 			}
 			if ( dbspec == DBSPEC_TYPE_MINOR ) {
-				return FILTER_NONE
+				return 99999
 			}
 			if ( dbspec == DBSPEC_VALUE_ORG ) {
 				return 1000
 			}
 			if ( dbspec == DBSPEC_PARAM3_ORG ) {
@@ -87933,14 +89908,14 @@
 			reftype = FILTER_FURNITURE
 			return
 		}
 		if ( dbmode == DBMODE_REF_SPEC ) {
 			if ( dbspec == DBSPEC_TYPE ) {
-				return FILTER_FURNITURE
+				return 60000
 			}
 			if ( dbspec == DBSPEC_TYPE_MINOR ) {
-				return FILTER_NONE
+				return 99999
 			}
 			if ( dbspec == DBSPEC_VALUE_ORG ) {
 				return 3100
 			}
 			if ( dbspec == DBSPEC_PARAM3_ORG ) {
@@ -88002,14 +89977,14 @@
 			reftype = FILTER_FURNITURE
 			return
 		}
 		if ( dbmode == DBMODE_REF_SPEC ) {
 			if ( dbspec == DBSPEC_TYPE ) {
-				return FILTER_FURNITURE
+				return 60000
 			}
 			if ( dbspec == DBSPEC_TYPE_MINOR ) {
-				return FILTER_NONE
+				return 99999
 			}
 			if ( dbspec == DBSPEC_VALUE_ORG ) {
 				return 2400
 			}
 			if ( dbspec == DBSPEC_PARAM3_ORG ) {
@@ -88071,14 +90046,14 @@
 			reftype = FILTER_FURNITURE
 			return
 		}
 		if ( dbmode == DBMODE_REF_SPEC ) {
 			if ( dbspec == DBSPEC_TYPE ) {
-				return FILTER_FURNITURE
+				return 60000
 			}
 			if ( dbspec == DBSPEC_TYPE_MINOR ) {
-				return FILTER_NONE
+				return 99999
 			}
 			if ( dbspec == DBSPEC_VALUE_ORG ) {
 				return 3200
 			}
 			if ( dbspec == DBSPEC_PARAM3_ORG ) {
@@ -88140,14 +90115,14 @@
 			reftype = FILTER_FURNITURE
 			return
 		}
 		if ( dbmode == DBMODE_REF_SPEC ) {
 			if ( dbspec == DBSPEC_TYPE ) {
-				return FILTER_FURNITURE
+				return 60000
 			}
 			if ( dbspec == DBSPEC_TYPE_MINOR ) {
-				return FILTER_NONE
+				return 99999
 			}
 			if ( dbspec == DBSPEC_VALUE_ORG ) {
 				return 1600
 			}
 			if ( dbspec == DBSPEC_PARAM3_ORG ) {
@@ -88210,14 +90185,14 @@
 			reftype = FILTER_FURNITURE
 			return
 		}
 		if ( dbmode == DBMODE_REF_SPEC ) {
 			if ( dbspec == DBSPEC_TYPE ) {
-				return FILTER_FURNITURE
+				return 60000
 			}
 			if ( dbspec == DBSPEC_TYPE_MINOR ) {
-				return FILTER_NONE
+				return 99999
 			}
 			if ( dbspec == DBSPEC_VALUE_ORG ) {
 				return 2400
 			}
 			if ( dbspec == DBSPEC_PARAM3_ORG ) {
@@ -88279,14 +90254,14 @@
 			reftype = FILTER_FURNITURE
 			return
 		}
 		if ( dbmode == DBMODE_REF_SPEC ) {
 			if ( dbspec == DBSPEC_TYPE ) {
-				return FILTER_FURNITURE
+				return 60000
 			}
 			if ( dbspec == DBSPEC_TYPE_MINOR ) {
-				return FILTER_NONE
+				return 99999
 			}
 			if ( dbspec == DBSPEC_VALUE_ORG ) {
 				return 4400
 			}
 			if ( dbspec == DBSPEC_PARAM3_ORG ) {
@@ -88348,14 +90323,14 @@
 			reftype = FILTER_FURNITURE
 			return
 		}
 		if ( dbmode == DBMODE_REF_SPEC ) {
 			if ( dbspec == DBSPEC_TYPE ) {
-				return FILTER_FURNITURE
+				return 60000
 			}
 			if ( dbspec == DBSPEC_TYPE_MINOR ) {
-				return FILTER_NONE
+				return 99999
 			}
 			if ( dbspec == DBSPEC_VALUE_ORG ) {
 				return 3600
 			}
 			if ( dbspec == DBSPEC_PARAM3_ORG ) {
@@ -88407,26 +90382,26 @@
 			reftype = FILTER_ITEM_ROD
 			reftypeminor = FILTER_ITEM_ROD_ENVIRONMENTAL
 			inv(INV_ITEM_NUM, ci) = 1
 			fixeditemenc = 0
 			inv(INV_ITEM_IDENTIFY_LEVEL, ci) = 0
-			inv(INV_ITEM_CHARGE, ci) = 8 + rnd(8) - rnd(8)
-			ibitmod ITEM_BIT_CHARGE_ITEM, ci, 1
+			inv((9 /*!!!@[INV_ITEM_AMMO @@@ INV_ITEM_CHARGE @@@ INV_ITEM_CLIENT @@@ INV_ITEM_FILE @@@ INV_ITEM_NEXT_PERIOD]@!!! */), ci) = 8 + rnd(8) - rnd(8)
+			ibitmod ITEM_BIT_CHARGE_ITEM, ci, TRUE
 			return
 		}
 		if ( dbmode == DBMODE_REF ) {
 			ichargelevel = 8
 			infilterref = ""
 			reftype = FILTER_ITEM_ROD
 			return
 		}
 		if ( dbmode == DBMODE_REF_SPEC ) {
 			if ( dbspec == DBSPEC_TYPE ) {
-				return FILTER_ITEM_ROD
+				return 56000
 			}
 			if ( dbspec == DBSPEC_TYPE_MINOR ) {
-				return FILTER_ITEM_ROD_ENVIRONMENTAL
+				return 56004
 			}
 			if ( dbspec == DBSPEC_VALUE_ORG ) {
 				return 3500
 			}
 			if ( dbspec == DBSPEC_PARAM3_ORG ) {
@@ -88486,26 +90461,26 @@
 			reftype = FILTER_ITEM_SPELLBOOK
 			reftypeminor = FILTER_NOTHING
 			inv(INV_ITEM_NUM, ci) = 1
 			fixeditemenc = 0
 			inv(INV_ITEM_IDENTIFY_LEVEL, ci) = 0
-			inv(INV_ITEM_CHARGE, ci) = 4 + rnd(4) - rnd(4)
-			ibitmod ITEM_BIT_CHARGE_ITEM, ci, 1
+			inv((9 /*!!!@[INV_ITEM_AMMO @@@ INV_ITEM_CHARGE @@@ INV_ITEM_CLIENT @@@ INV_ITEM_FILE @@@ INV_ITEM_NEXT_PERIOD]@!!! */), ci) = 4 + rnd(4) - rnd(4)
+			ibitmod ITEM_BIT_CHARGE_ITEM, ci, TRUE
 			return
 		}
 		if ( dbmode == DBMODE_REF ) {
 			ichargelevel = 4
 			infilterref = ""
 			reftype = FILTER_ITEM_SPELLBOOK
 			return
 		}
 		if ( dbmode == DBMODE_REF_SPEC ) {
 			if ( dbspec == DBSPEC_TYPE ) {
-				return FILTER_ITEM_SPELLBOOK
+				return 54000
 			}
 			if ( dbspec == DBSPEC_TYPE_MINOR ) {
-				return FILTER_NONE
+				return 99999
 			}
 			if ( dbspec == DBSPEC_VALUE_ORG ) {
 				return 2200
 			}
 			if ( dbspec == DBSPEC_PARAM3_ORG ) {
@@ -88574,14 +90549,14 @@
 			reftype = FILTER_AMMO
 			return
 		}
 		if ( dbmode == DBMODE_REF_SPEC ) {
 			if ( dbspec == DBSPEC_TYPE ) {
-				return FILTER_AMMO
+				return 25000
 			}
 			if ( dbspec == DBSPEC_TYPE_MINOR ) {
-				return FILTER_AMMO_BOLT
+				return 25002
 			}
 			if ( dbspec == DBSPEC_VALUE_ORG ) {
 				return 150
 			}
 			if ( dbspec == DBSPEC_PARAM3_ORG ) {
@@ -88649,14 +90624,14 @@
 			reftype = FILTER_RANGE
 			return
 		}
 		if ( dbmode == DBMODE_REF_SPEC ) {
 			if ( dbspec == DBSPEC_TYPE ) {
-				return FILTER_RANGE
+				return 24000
 			}
 			if ( dbspec == DBSPEC_TYPE_MINOR ) {
-				return FILTER_RANGE_CROSSBOW
+				return 24003
 			}
 			if ( dbspec == DBSPEC_VALUE_ORG ) {
 				return 500
 			}
 			if ( dbspec == DBSPEC_PARAM3_ORG ) {
@@ -88708,26 +90683,26 @@
 			reftype = FILTER_ITEM_SPELLBOOK
 			reftypeminor = FILTER_NOTHING
 			inv(INV_ITEM_NUM, ci) = 1
 			fixeditemenc = 0
 			inv(INV_ITEM_IDENTIFY_LEVEL, ci) = 0
-			inv(INV_ITEM_CHARGE, ci) = 2 + rnd(2) - rnd(2)
-			ibitmod ITEM_BIT_CHARGE_ITEM, ci, 1
+			inv((9 /*!!!@[INV_ITEM_AMMO @@@ INV_ITEM_CHARGE @@@ INV_ITEM_CLIENT @@@ INV_ITEM_FILE @@@ INV_ITEM_NEXT_PERIOD]@!!! */), ci) = 2 + rnd(2) - rnd(2)
+			ibitmod ITEM_BIT_CHARGE_ITEM, ci, TRUE
 			return
 		}
 		if ( dbmode == DBMODE_REF ) {
 			ichargelevel = 2
 			infilterref = ""
 			reftype = FILTER_ITEM_SPELLBOOK
 			return
 		}
 		if ( dbmode == DBMODE_REF_SPEC ) {
 			if ( dbspec == DBSPEC_TYPE ) {
-				return FILTER_ITEM_SPELLBOOK
+				return 54000
 			}
 			if ( dbspec == DBSPEC_TYPE_MINOR ) {
-				return FILTER_NONE
+				return 99999
 			}
 			if ( dbspec == DBSPEC_VALUE_ORG ) {
 				return 14000
 			}
 			if ( dbspec == DBSPEC_PARAM3_ORG ) {
@@ -88776,30 +90751,30 @@
 		}
 		if ( dbmode == DBMODE_SET ) {
 			inv(INV_ITEM_ID, ci) = ITEM_ID_ROD_DOMINATION
 			inv(INV_ITEM_PIC, ci) = xy2pic(9, 14)
 			reftype = FILTER_ITEM_ROD
-			reftypeminor = FILTER_ITEM_ROD_ENVIRONMENTAL
+			reftypeminor = FILTER_ITEM_ROD
 			inv(INV_ITEM_NUM, ci) = 1
 			fixeditemenc = 0
 			inv(INV_ITEM_IDENTIFY_LEVEL, ci) = 0
-			inv(INV_ITEM_CHARGE, ci) = 2 + rnd(2) - rnd(2)
-			ibitmod ITEM_BIT_CHARGE_ITEM, ci, 1
+			inv((9 /*!!!@[INV_ITEM_AMMO @@@ INV_ITEM_CHARGE @@@ INV_ITEM_CLIENT @@@ INV_ITEM_FILE @@@ INV_ITEM_NEXT_PERIOD]@!!! */), ci) = 2 + rnd(2) - rnd(2)
+			ibitmod ITEM_BIT_CHARGE_ITEM, ci, TRUE
 			return
 		}
 		if ( dbmode == DBMODE_REF ) {
 			ichargelevel = 2
 			infilterref = "/noshop/"
 			reftype = FILTER_ITEM_ROD
 			return
 		}
 		if ( dbmode == DBMODE_REF_SPEC ) {
 			if ( dbspec == DBSPEC_TYPE ) {
-				return FILTER_ITEM_ROD
+				return 56000
 			}
 			if ( dbspec == DBSPEC_TYPE_MINOR ) {
-				return FILTER_ITEM_ROD_ENVIRONMENTAL
+				return 56000
 			}
 			if ( dbspec == DBSPEC_VALUE_ORG ) {
 				return 16000
 			}
 			if ( dbspec == DBSPEC_PARAM3_ORG ) {
@@ -88869,14 +90844,14 @@
 			reftype = FILTER_ITEM_SCROLL
 			return
 		}
 		if ( dbmode == DBMODE_REF_SPEC ) {
 			if ( dbspec == DBSPEC_TYPE ) {
-				return FILTER_ITEM_SCROLL
+				return 53000
 			}
 			if ( dbspec == DBSPEC_TYPE_MINOR ) {
-				return FILTER_NONE
+				return 99999
 			}
 			if ( dbspec == DBSPEC_VALUE_ORG ) {
 				return 9000
 			}
 			if ( dbspec == DBSPEC_PARAM3_ORG ) {
@@ -88940,14 +90915,14 @@
 			reftype = FILTER_ITEM_TOOL
 			return
 		}
 		if ( dbmode == DBMODE_REF_SPEC ) {
 			if ( dbspec == DBSPEC_TYPE ) {
-				return FILTER_ITEM_TOOL
+				return 59000
 			}
 			if ( dbspec == DBSPEC_TYPE_MINOR ) {
-				return FILTER_NONE
+				return 99999
 			}
 			if ( dbspec == DBSPEC_VALUE_ORG ) {
 				return 1200
 			}
 			if ( dbspec == DBSPEC_PARAM3_ORG ) {
@@ -89005,14 +90980,14 @@
 			reftype = FILTER_ACCESSORY_RING
 			return
 		}
 		if ( dbmode == DBMODE_REF_SPEC ) {
 			if ( dbspec == DBSPEC_TYPE ) {
-				return FILTER_ACCESSORY_RING
+				return 32000
 			}
 			if ( dbspec == DBSPEC_TYPE_MINOR ) {
-				return FILTER_ACCESSORY_SMALL_RING
+				return 32001
 			}
 			if ( dbspec == DBSPEC_VALUE_ORG ) {
 				return 3200
 			}
 			if ( dbspec == DBSPEC_PARAM3_ORG ) {
@@ -89075,14 +91050,14 @@
 			reftype = FILTER_ACCESSORY_RING
 			return
 		}
 		if ( dbmode == DBMODE_REF_SPEC ) {
 			if ( dbspec == DBSPEC_TYPE ) {
-				return FILTER_ACCESSORY_RING
+				return 32000
 			}
 			if ( dbspec == DBSPEC_TYPE_MINOR ) {
-				return FILTER_ACCESSORY_SMALL_RING
+				return 32001
 			}
 			if ( dbspec == DBSPEC_VALUE_ORG ) {
 				return 450
 			}
 			if ( dbspec == DBSPEC_PARAM3_ORG ) {
@@ -89146,14 +91121,14 @@
 			reftype = FILTER_ACCESSORY_RING
 			return
 		}
 		if ( dbmode == DBMODE_REF_SPEC ) {
 			if ( dbspec == DBSPEC_TYPE ) {
-				return FILTER_ACCESSORY_RING
+				return 32000
 			}
 			if ( dbspec == DBSPEC_TYPE_MINOR ) {
-				return FILTER_ACCESSORY_SMALL_RING
+				return 32001
 			}
 			if ( dbspec == DBSPEC_VALUE_ORG ) {
 				return 450
 			}
 			if ( dbspec == DBSPEC_PARAM3_ORG ) {
@@ -89217,14 +91192,14 @@
 			reftype = FILTER_ACCESSORY_RING
 			return
 		}
 		if ( dbmode == DBMODE_REF_SPEC ) {
 			if ( dbspec == DBSPEC_TYPE ) {
-				return FILTER_ACCESSORY_RING
+				return 32000
 			}
 			if ( dbspec == DBSPEC_TYPE_MINOR ) {
-				return FILTER_ACCESSORY_SMALL_RING
+				return 32001
 			}
 			if ( dbspec == DBSPEC_VALUE_ORG ) {
 				return 450
 			}
 			if ( dbspec == DBSPEC_PARAM3_ORG ) {
@@ -89287,14 +91262,14 @@
 			reftype = FILTER_ACCESSORY_AMULET
 			return
 		}
 		if ( dbmode == DBMODE_REF_SPEC ) {
 			if ( dbspec == DBSPEC_TYPE ) {
-				return FILTER_ACCESSORY_AMULET
+				return 34000
 			}
 			if ( dbspec == DBSPEC_TYPE_MINOR ) {
-				return FILTER_ACCESSORY_SMALL_AMULET
+				return 34001
 			}
 			if ( dbspec == DBSPEC_VALUE_ORG ) {
 				return 3000
 			}
 			if ( dbspec == DBSPEC_PARAM3_ORG ) {
@@ -89357,14 +91332,14 @@
 			reftype = FILTER_ACCESSORY_AMULET
 			return
 		}
 		if ( dbmode == DBMODE_REF_SPEC ) {
 			if ( dbspec == DBSPEC_TYPE ) {
-				return FILTER_ACCESSORY_AMULET
+				return 34000
 			}
 			if ( dbspec == DBSPEC_TYPE_MINOR ) {
-				return FILTER_ACCESSORY_SMALL_AMULET
+				return 34001
 			}
 			if ( dbspec == DBSPEC_VALUE_ORG ) {
 				return 1800
 			}
 			if ( dbspec == DBSPEC_PARAM3_ORG ) {
@@ -89428,14 +91403,14 @@
 			reftype = FILTER_ACCESSORY_AMULET
 			return
 		}
 		if ( dbmode == DBMODE_REF_SPEC ) {
 			if ( dbspec == DBSPEC_TYPE ) {
-				return FILTER_ACCESSORY_AMULET
+				return 34000
 			}
 			if ( dbspec == DBSPEC_TYPE_MINOR ) {
-				return FILTER_ACCESSORY_SMALL_AMULET
+				return 34001
 			}
 			if ( dbspec == DBSPEC_VALUE_ORG ) {
 				return 2000
 			}
 			if ( dbspec == DBSPEC_PARAM3_ORG ) {
@@ -89499,14 +91474,14 @@
 			reftype = FILTER_ACCESSORY_AMULET
 			return
 		}
 		if ( dbmode == DBMODE_REF_SPEC ) {
 			if ( dbspec == DBSPEC_TYPE ) {
-				return FILTER_ACCESSORY_AMULET
+				return 34000
 			}
 			if ( dbspec == DBSPEC_TYPE_MINOR ) {
-				return FILTER_ACCESSORY_SMALL_AMULET
+				return 34001
 			}
 			if ( dbspec == DBSPEC_VALUE_ORG ) {
 				return 2200
 			}
 			if ( dbspec == DBSPEC_PARAM3_ORG ) {
@@ -89570,14 +91545,14 @@
 			reftype = FILTER_ACCESSORY_AMULET
 			return
 		}
 		if ( dbmode == DBMODE_REF_SPEC ) {
 			if ( dbspec == DBSPEC_TYPE ) {
-				return FILTER_ACCESSORY_AMULET
+				return 34000
 			}
 			if ( dbspec == DBSPEC_TYPE_MINOR ) {
-				return FILTER_ACCESSORY_SMALL_AMULET
+				return 34001
 			}
 			if ( dbspec == DBSPEC_VALUE_ORG ) {
 				return 4400
 			}
 			if ( dbspec == DBSPEC_PARAM3_ORG ) {
@@ -89641,14 +91616,14 @@
 			reftype = FILTER_ACCESSORY_AMULET
 			return
 		}
 		if ( dbmode == DBMODE_REF_SPEC ) {
 			if ( dbspec == DBSPEC_TYPE ) {
-				return FILTER_ACCESSORY_AMULET
+				return 34000
 			}
 			if ( dbspec == DBSPEC_TYPE_MINOR ) {
-				return FILTER_ACCESSORY_SMALL_AMULET
+				return 34001
 			}
 			if ( dbspec == DBSPEC_VALUE_ORG ) {
 				return 4400
 			}
 			if ( dbspec == DBSPEC_PARAM3_ORG ) {
@@ -89713,14 +91688,14 @@
 			reftype = FILTER_HELM
 			return
 		}
 		if ( dbmode == DBMODE_REF_SPEC ) {
 			if ( dbspec == DBSPEC_TYPE ) {
-				return FILTER_HELM
+				return 12000
 			}
 			if ( dbspec == DBSPEC_TYPE_MINOR ) {
-				return FILTER_HELM_HEAVY
+				return 12001
 			}
 			if ( dbspec == DBSPEC_VALUE_ORG ) {
 				return 8600
 			}
 			if ( dbspec == DBSPEC_PARAM3_ORG ) {
@@ -89777,14 +91752,14 @@
 			reftype = FILTER_HELM
 			return
 		}
 		if ( dbmode == DBMODE_REF_SPEC ) {
 			if ( dbspec == DBSPEC_TYPE ) {
-				return FILTER_HELM
+				return 12000
 			}
 			if ( dbspec == DBSPEC_TYPE_MINOR ) {
-				return FILTER_HELM_HEAVY
+				return 12001
 			}
 			if ( dbspec == DBSPEC_VALUE_ORG ) {
 				return 600
 			}
 			if ( dbspec == DBSPEC_PARAM3_ORG ) {
@@ -89841,14 +91816,14 @@
 			reftype = FILTER_HELM
 			return
 		}
 		if ( dbmode == DBMODE_REF_SPEC ) {
 			if ( dbspec == DBSPEC_TYPE ) {
-				return FILTER_HELM
+				return 12000
 			}
 			if ( dbspec == DBSPEC_TYPE_MINOR ) {
-				return FILTER_HELM_HEAVY
+				return 12001
 			}
 			if ( dbspec == DBSPEC_VALUE_ORG ) {
 				return 2200
 			}
 			if ( dbspec == DBSPEC_PARAM3_ORG ) {
@@ -89905,14 +91880,14 @@
 			reftype = FILTER_HELM
 			return
 		}
 		if ( dbmode == DBMODE_REF_SPEC ) {
 			if ( dbspec == DBSPEC_TYPE ) {
-				return FILTER_HELM
+				return 12000
 			}
 			if ( dbspec == DBSPEC_TYPE_MINOR ) {
-				return FILTER_HELM_HEAVY
+				return 12001
 			}
 			if ( dbspec == DBSPEC_VALUE_ORG ) {
 				return 4800
 			}
 			if ( dbspec == DBSPEC_PARAM3_ORG ) {
@@ -89969,14 +91944,14 @@
 			reftype = FILTER_HELM
 			return
 		}
 		if ( dbmode == DBMODE_REF_SPEC ) {
 			if ( dbspec == DBSPEC_TYPE ) {
-				return FILTER_HELM
+				return 12000
 			}
 			if ( dbspec == DBSPEC_TYPE_MINOR ) {
-				return FILTER_HELM_LIGHT
+				return 12002
 			}
 			if ( dbspec == DBSPEC_VALUE_ORG ) {
 				return 400
 			}
 			if ( dbspec == DBSPEC_PARAM3_ORG ) {
@@ -90033,14 +92008,14 @@
 			reftype = FILTER_CLOAK
 			return
 		}
 		if ( dbmode == DBMODE_REF_SPEC ) {
 			if ( dbspec == DBSPEC_TYPE ) {
-				return FILTER_CLOAK
+				return 20000
 			}
 			if ( dbspec == DBSPEC_TYPE_MINOR ) {
-				return FILTER_CLOAK_MEDIUM
+				return 20001
 			}
 			if ( dbspec == DBSPEC_VALUE_ORG ) {
 				return 3500
 			}
 			if ( dbspec == DBSPEC_PARAM3_ORG ) {
@@ -90097,14 +92072,14 @@
 			reftype = FILTER_CLOAK
 			return
 		}
 		if ( dbmode == DBMODE_REF_SPEC ) {
 			if ( dbspec == DBSPEC_TYPE ) {
-				return FILTER_CLOAK
+				return 20000
 			}
 			if ( dbspec == DBSPEC_TYPE_MINOR ) {
-				return FILTER_CLOAK_MEDIUM
+				return 20001
 			}
 			if ( dbspec == DBSPEC_VALUE_ORG ) {
 				return 1400
 			}
 			if ( dbspec == DBSPEC_PARAM3_ORG ) {
@@ -90161,14 +92136,14 @@
 			reftype = FILTER_GIRDLE
 			return
 		}
 		if ( dbmode == DBMODE_REF_SPEC ) {
 			if ( dbspec == DBSPEC_TYPE ) {
-				return FILTER_GIRDLE
+				return 19000
 			}
 			if ( dbspec == DBSPEC_TYPE_MINOR ) {
-				return FILTER_GIRDLE_MEDIUM
+				return 19001
 			}
 			if ( dbspec == DBSPEC_VALUE_ORG ) {
 				return 3900
 			}
 			if ( dbspec == DBSPEC_PARAM3_ORG ) {
@@ -90225,14 +92200,14 @@
 			reftype = FILTER_GIRDLE
 			return
 		}
 		if ( dbmode == DBMODE_REF_SPEC ) {
 			if ( dbspec == DBSPEC_TYPE ) {
-				return FILTER_GIRDLE
+				return 19000
 			}
 			if ( dbspec == DBSPEC_TYPE_MINOR ) {
-				return FILTER_GIRDLE_MEDIUM
+				return 19001
 			}
 			if ( dbspec == DBSPEC_VALUE_ORG ) {
 				return 2400
 			}
 			if ( dbspec == DBSPEC_PARAM3_ORG ) {
@@ -90288,14 +92263,14 @@
 			reftype = FILTER_BOOTS
 			return
 		}
 		if ( dbmode == DBMODE_REF_SPEC ) {
 			if ( dbspec == DBSPEC_TYPE ) {
-				return FILTER_BOOTS
+				return 18000
 			}
 			if ( dbspec == DBSPEC_TYPE_MINOR ) {
-				return FILTER_BOOTS_HEAVY
+				return 18001
 			}
 			if ( dbspec == DBSPEC_VALUE_ORG ) {
 				return 4800
 			}
 			if ( dbspec == DBSPEC_PARAM3_ORG ) {
@@ -90352,14 +92327,14 @@
 			reftype = FILTER_BOOTS
 			return
 		}
 		if ( dbmode == DBMODE_REF_SPEC ) {
 			if ( dbspec == DBSPEC_TYPE ) {
-				return FILTER_BOOTS
+				return 18000
 			}
 			if ( dbspec == DBSPEC_TYPE_MINOR ) {
-				return FILTER_BOOTS_LIGHT
+				return 18002
 			}
 			if ( dbspec == DBSPEC_VALUE_ORG ) {
 				return 3500
 			}
 			if ( dbspec == DBSPEC_PARAM3_ORG ) {
@@ -90416,14 +92391,14 @@
 			reftype = FILTER_BOOTS
 			return
 		}
 		if ( dbmode == DBMODE_REF_SPEC ) {
 			if ( dbspec == DBSPEC_TYPE ) {
-				return FILTER_BOOTS
+				return 18000
 			}
 			if ( dbspec == DBSPEC_TYPE_MINOR ) {
-				return FILTER_BOOTS_LIGHT
+				return 18002
 			}
 			if ( dbspec == DBSPEC_VALUE_ORG ) {
 				return 1500
 			}
 			if ( dbspec == DBSPEC_PARAM3_ORG ) {
@@ -90480,14 +92455,14 @@
 			reftype = FILTER_BOOTS
 			return
 		}
 		if ( dbmode == DBMODE_REF_SPEC ) {
 			if ( dbspec == DBSPEC_TYPE ) {
-				return FILTER_BOOTS
+				return 18000
 			}
 			if ( dbspec == DBSPEC_TYPE_MINOR ) {
-				return FILTER_BOOTS_LIGHT
+				return 18002
 			}
 			if ( dbspec == DBSPEC_VALUE_ORG ) {
 				return 260
 			}
 			if ( dbspec == DBSPEC_PARAM3_ORG ) {
@@ -90545,14 +92520,14 @@
 			reftype = FILTER_SHIELD
 			return
 		}
 		if ( dbmode == DBMODE_REF_SPEC ) {
 			if ( dbspec == DBSPEC_TYPE ) {
-				return FILTER_SHIELD
+				return 14000
 			}
 			if ( dbspec == DBSPEC_TYPE_MINOR ) {
-				return FILTER_SHIELD_SMALL
+				return 14003
 			}
 			if ( dbspec == DBSPEC_VALUE_ORG ) {
 				return 8000
 			}
 			if ( dbspec == DBSPEC_PARAM3_ORG ) {
@@ -90610,14 +92585,14 @@
 			reftype = FILTER_SHIELD
 			return
 		}
 		if ( dbmode == DBMODE_REF_SPEC ) {
 			if ( dbspec == DBSPEC_TYPE ) {
-				return FILTER_SHIELD
+				return 14000
 			}
 			if ( dbspec == DBSPEC_TYPE_MINOR ) {
-				return FILTER_SHIELD_SMALL
+				return 14003
 			}
 			if ( dbspec == DBSPEC_VALUE_ORG ) {
 				return 7000
 			}
 			if ( dbspec == DBSPEC_PARAM3_ORG ) {
@@ -90675,14 +92650,14 @@
 			reftype = FILTER_SHIELD
 			return
 		}
 		if ( dbmode == DBMODE_REF_SPEC ) {
 			if ( dbspec == DBSPEC_TYPE ) {
-				return FILTER_SHIELD
+				return 14000
 			}
 			if ( dbspec == DBSPEC_TYPE_MINOR ) {
-				return FILTER_SHIELD_SMALL
+				return 14003
 			}
 			if ( dbspec == DBSPEC_VALUE_ORG ) {
 				return 6000
 			}
 			if ( dbspec == DBSPEC_PARAM3_ORG ) {
@@ -90740,14 +92715,14 @@
 			reftype = FILTER_SHIELD
 			return
 		}
 		if ( dbmode == DBMODE_REF_SPEC ) {
 			if ( dbspec == DBSPEC_TYPE ) {
-				return FILTER_SHIELD
+				return 14000
 			}
 			if ( dbspec == DBSPEC_TYPE_MINOR ) {
-				return FILTER_SHIELD_SMALL
+				return 14003
 			}
 			if ( dbspec == DBSPEC_VALUE_ORG ) {
 				return 2500
 			}
 			if ( dbspec == DBSPEC_PARAM3_ORG ) {
@@ -90805,14 +92780,14 @@
 			reftype = FILTER_SHIELD
 			return
 		}
 		if ( dbmode == DBMODE_REF_SPEC ) {
 			if ( dbspec == DBSPEC_TYPE ) {
-				return FILTER_SHIELD
+				return 14000
 			}
 			if ( dbspec == DBSPEC_TYPE_MINOR ) {
-				return FILTER_SHIELD_SMALL
+				return 14003
 			}
 			if ( dbspec == DBSPEC_VALUE_ORG ) {
 				return 1200
 			}
 			if ( dbspec == DBSPEC_PARAM3_ORG ) {
@@ -90870,14 +92845,14 @@
 			reftype = FILTER_SHIELD
 			return
 		}
 		if ( dbmode == DBMODE_REF_SPEC ) {
 			if ( dbspec == DBSPEC_TYPE ) {
-				return FILTER_SHIELD
+				return 14000
 			}
 			if ( dbspec == DBSPEC_TYPE_MINOR ) {
-				return FILTER_SHIELD_SMALL
+				return 14003
 			}
 			if ( dbspec == DBSPEC_VALUE_ORG ) {
 				return 500
 			}
 			if ( dbspec == DBSPEC_PARAM3_ORG ) {
@@ -90936,14 +92911,14 @@
 			reftype = FILTER_GLOVES
 			return
 		}
 		if ( dbmode == DBMODE_REF_SPEC ) {
 			if ( dbspec == DBSPEC_TYPE ) {
-				return FILTER_GLOVES
+				return 22000
 			}
 			if ( dbspec == DBSPEC_TYPE_MINOR ) {
-				return FILTER_GLOVES_HEAVY
+				return 22001
 			}
 			if ( dbspec == DBSPEC_VALUE_ORG ) {
 				return 950
 			}
 			if ( dbspec == DBSPEC_PARAM3_ORG ) {
@@ -91001,14 +92976,14 @@
 			reftype = FILTER_GLOVES
 			return
 		}
 		if ( dbmode == DBMODE_REF_SPEC ) {
 			if ( dbspec == DBSPEC_TYPE ) {
-				return FILTER_GLOVES
+				return 22000
 			}
 			if ( dbspec == DBSPEC_TYPE_MINOR ) {
-				return FILTER_GLOVES_LIGHT
+				return 22003
 			}
 			if ( dbspec == DBSPEC_VALUE_ORG ) {
 				return 280
 			}
 			if ( dbspec == DBSPEC_PARAM3_ORG ) {
@@ -91067,14 +93042,14 @@
 			reftype = FILTER_GLOVES
 			return
 		}
 		if ( dbmode == DBMODE_REF_SPEC ) {
 			if ( dbspec == DBSPEC_TYPE ) {
-				return FILTER_GLOVES
+				return 22000
 			}
 			if ( dbspec == DBSPEC_TYPE_MINOR ) {
-				return FILTER_GLOVES_HEAVY
+				return 22001
 			}
 			if ( dbspec == DBSPEC_VALUE_ORG ) {
 				return 1800
 			}
 			if ( dbspec == DBSPEC_PARAM3_ORG ) {
@@ -91133,14 +93108,14 @@
 			reftype = FILTER_GLOVES
 			return
 		}
 		if ( dbmode == DBMODE_REF_SPEC ) {
 			if ( dbspec == DBSPEC_TYPE ) {
-				return FILTER_GLOVES
+				return 22000
 			}
 			if ( dbspec == DBSPEC_TYPE_MINOR ) {
-				return FILTER_GLOVES_LIGHT
+				return 22003
 			}
 			if ( dbspec == DBSPEC_VALUE_ORG ) {
 				return 800
 			}
 			if ( dbspec == DBSPEC_PARAM3_ORG ) {
@@ -91197,14 +93172,14 @@
 			reftype = FILTER_ARMOR
 			return
 		}
 		if ( dbmode == DBMODE_REF_SPEC ) {
 			if ( dbspec == DBSPEC_TYPE ) {
-				return FILTER_ARMOR
+				return 16000
 			}
 			if ( dbspec == DBSPEC_TYPE_MINOR ) {
-				return FILTER_ARMOR_LIGHT
+				return 16003
 			}
 			if ( dbspec == DBSPEC_VALUE_ORG ) {
 				return 7200
 			}
 			if ( dbspec == DBSPEC_PARAM3_ORG ) {
@@ -91261,14 +93236,14 @@
 			reftype = FILTER_ARMOR
 			return
 		}
 		if ( dbmode == DBMODE_REF_SPEC ) {
 			if ( dbspec == DBSPEC_TYPE ) {
-				return FILTER_ARMOR
+				return 16000
 			}
 			if ( dbspec == DBSPEC_TYPE_MINOR ) {
-				return FILTER_ARMOR_LIGHT
+				return 16003
 			}
 			if ( dbspec == DBSPEC_VALUE_ORG ) {
 				return 5500
 			}
 			if ( dbspec == DBSPEC_PARAM3_ORG ) {
@@ -91325,14 +93300,14 @@
 			reftype = FILTER_ARMOR
 			return
 		}
 		if ( dbmode == DBMODE_REF_SPEC ) {
 			if ( dbspec == DBSPEC_TYPE ) {
-				return FILTER_ARMOR
+				return 16000
 			}
 			if ( dbspec == DBSPEC_TYPE_MINOR ) {
-				return FILTER_ARMOR_LIGHT
+				return 16003
 			}
 			if ( dbspec == DBSPEC_VALUE_ORG ) {
 				return 2000
 			}
 			if ( dbspec == DBSPEC_PARAM3_ORG ) {
@@ -91389,14 +93364,14 @@
 			reftype = FILTER_ARMOR
 			return
 		}
 		if ( dbmode == DBMODE_REF_SPEC ) {
 			if ( dbspec == DBSPEC_TYPE ) {
-				return FILTER_ARMOR
+				return 16000
 			}
 			if ( dbspec == DBSPEC_TYPE_MINOR ) {
-				return FILTER_ARMOR_LIGHT
+				return 16003
 			}
 			if ( dbspec == DBSPEC_VALUE_ORG ) {
 				return 1200
 			}
 			if ( dbspec == DBSPEC_PARAM3_ORG ) {
@@ -91453,14 +93428,14 @@
 			reftype = FILTER_ARMOR
 			return
 		}
 		if ( dbmode == DBMODE_REF_SPEC ) {
 			if ( dbspec == DBSPEC_TYPE ) {
-				return FILTER_ARMOR
+				return 16000
 			}
 			if ( dbspec == DBSPEC_TYPE_MINOR ) {
-				return FILTER_ARMOR_LIGHT
+				return 16003
 			}
 			if ( dbspec == DBSPEC_VALUE_ORG ) {
 				return 8000
 			}
 			if ( dbspec == DBSPEC_PARAM3_ORG ) {
@@ -91517,14 +93492,14 @@
 			reftype = FILTER_ARMOR
 			return
 		}
 		if ( dbmode == DBMODE_REF_SPEC ) {
 			if ( dbspec == DBSPEC_TYPE ) {
-				return FILTER_ARMOR
+				return 16000
 			}
 			if ( dbspec == DBSPEC_TYPE_MINOR ) {
-				return FILTER_ARMOR_HEAVY
+				return 16001
 			}
 			if ( dbspec == DBSPEC_VALUE_ORG ) {
 				return 7000
 			}
 			if ( dbspec == DBSPEC_PARAM3_ORG ) {
@@ -91581,14 +93556,14 @@
 			reftype = FILTER_ARMOR
 			return
 		}
 		if ( dbmode == DBMODE_REF_SPEC ) {
 			if ( dbspec == DBSPEC_TYPE ) {
-				return FILTER_ARMOR
+				return 16000
 			}
 			if ( dbspec == DBSPEC_TYPE_MINOR ) {
-				return FILTER_ARMOR_HEAVY
+				return 16001
 			}
 			if ( dbspec == DBSPEC_VALUE_ORG ) {
 				return 4500
 			}
 			if ( dbspec == DBSPEC_PARAM3_ORG ) {
@@ -91645,14 +93620,14 @@
 			reftype = FILTER_ARMOR
 			return
 		}
 		if ( dbmode == DBMODE_REF_SPEC ) {
 			if ( dbspec == DBSPEC_TYPE ) {
-				return FILTER_ARMOR
+				return 16000
 			}
 			if ( dbspec == DBSPEC_TYPE_MINOR ) {
-				return FILTER_ARMOR_HEAVY
+				return 16001
 			}
 			if ( dbspec == DBSPEC_VALUE_ORG ) {
 				return 2400
 			}
 			if ( dbspec == DBSPEC_PARAM3_ORG ) {
@@ -91709,14 +93684,14 @@
 			reftype = FILTER_ARMOR
 			return
 		}
 		if ( dbmode == DBMODE_REF_SPEC ) {
 			if ( dbspec == DBSPEC_TYPE ) {
-				return FILTER_ARMOR
+				return 16000
 			}
 			if ( dbspec == DBSPEC_TYPE_MINOR ) {
-				return FILTER_ARMOR_HEAVY
+				return 16001
 			}
 			if ( dbspec == DBSPEC_VALUE_ORG ) {
 				return 9000
 			}
 			if ( dbspec == DBSPEC_PARAM3_ORG ) {
@@ -91773,14 +93748,14 @@
 			reftype = FILTER_ARMOR
 			return
 		}
 		if ( dbmode == DBMODE_REF_SPEC ) {
 			if ( dbspec == DBSPEC_TYPE ) {
-				return FILTER_ARMOR
+				return 16000
 			}
 			if ( dbspec == DBSPEC_TYPE_MINOR ) {
-				return FILTER_ARMOR_HEAVY
+				return 16001
 			}
 			if ( dbspec == DBSPEC_VALUE_ORG ) {
 				return 1500
 			}
 			if ( dbspec == DBSPEC_PARAM3_ORG ) {
@@ -91824,26 +93799,26 @@
 			reftype = FILTER_ITEM_SPELLBOOK
 			reftypeminor = FILTER_NOTHING
 			inv(INV_ITEM_NUM, ci) = 1
 			fixeditemenc = 0
 			inv(INV_ITEM_IDENTIFY_LEVEL, ci) = 0
-			inv(INV_ITEM_CHARGE, ci) = 2 + rnd(2) - rnd(2)
-			ibitmod ITEM_BIT_CHARGE_ITEM, ci, 1
+			inv((9 /*!!!@[INV_ITEM_AMMO @@@ INV_ITEM_CHARGE @@@ INV_ITEM_CLIENT @@@ INV_ITEM_FILE @@@ INV_ITEM_NEXT_PERIOD]@!!! */), ci) = 2 + rnd(2) - rnd(2)
+			ibitmod ITEM_BIT_CHARGE_ITEM, ci, TRUE
 			return
 		}
 		if ( dbmode == DBMODE_REF ) {
 			ichargelevel = 2
 			infilterref = ""
 			reftype = FILTER_ITEM_SPELLBOOK
 			return
 		}
 		if ( dbmode == DBMODE_REF_SPEC ) {
 			if ( dbspec == DBSPEC_TYPE ) {
-				return FILTER_ITEM_SPELLBOOK
+				return 54000
 			}
 			if ( dbspec == DBSPEC_TYPE_MINOR ) {
-				return FILTER_NONE
+				return 99999
 			}
 			if ( dbspec == DBSPEC_VALUE_ORG ) {
 				return 10000
 			}
 			if ( dbspec == DBSPEC_PARAM3_ORG ) {
@@ -91906,14 +93881,14 @@
 			reftype = FILTER_ITEM_POTION
 			return
 		}
 		if ( dbmode == DBMODE_REF_SPEC ) {
 			if ( dbspec == DBSPEC_TYPE ) {
-				return FILTER_ITEM_POTION
+				return 52000
 			}
 			if ( dbspec == DBSPEC_TYPE_MINOR ) {
-				return FILTER_NONE
+				return 99999
 			}
 			if ( dbspec == DBSPEC_VALUE_ORG ) {
 				return 4000
 			}
 			if ( dbspec == DBSPEC_PARAM3_ORG ) {
@@ -91976,14 +93951,14 @@
 			reftype = FILTER_ITEM_POTION
 			return
 		}
 		if ( dbmode == DBMODE_REF_SPEC ) {
 			if ( dbspec == DBSPEC_TYPE ) {
-				return FILTER_ITEM_POTION
+				return 52000
 			}
 			if ( dbspec == DBSPEC_TYPE_MINOR ) {
-				return FILTER_NONE
+				return 99999
 			}
 			if ( dbspec == DBSPEC_VALUE_ORG ) {
 				return 5000
 			}
 			if ( dbspec == DBSPEC_PARAM3_ORG ) {
@@ -92046,14 +94021,14 @@
 			reftype = FILTER_ITEM_SCROLL
 			return
 		}
 		if ( dbmode == DBMODE_REF_SPEC ) {
 			if ( dbspec == DBSPEC_TYPE ) {
-				return FILTER_ITEM_SCROLL
+				return 53000
 			}
 			if ( dbspec == DBSPEC_TYPE_MINOR ) {
-				return FILTER_NONE
+				return 99999
 			}
 			if ( dbspec == DBSPEC_VALUE_ORG ) {
 				return 12000
 			}
 			if ( dbspec == DBSPEC_PARAM3_ORG ) {
@@ -92116,14 +94091,14 @@
 			reftype = FILTER_ITEM_SCROLL
 			return
 		}
 		if ( dbmode == DBMODE_REF_SPEC ) {
 			if ( dbspec == DBSPEC_TYPE ) {
-				return FILTER_ITEM_SCROLL
+				return 53000
 			}
 			if ( dbspec == DBSPEC_TYPE_MINOR ) {
-				return FILTER_NONE
+				return 99999
 			}
 			if ( dbspec == DBSPEC_VALUE_ORG ) {
 				return 150000
 			}
 			if ( dbspec == DBSPEC_PARAM3_ORG ) {
@@ -92186,14 +94161,14 @@
 			reftype = FILTER_ITEM_POTION
 			return
 		}
 		if ( dbmode == DBMODE_REF_SPEC ) {
 			if ( dbspec == DBSPEC_TYPE ) {
-				return FILTER_ITEM_POTION
+				return 52000
 			}
 			if ( dbspec == DBSPEC_TYPE_MINOR ) {
-				return FILTER_NONE
+				return 99999
 			}
 			if ( dbspec == DBSPEC_VALUE_ORG ) {
 				return 150
 			}
 			if ( dbspec == DBSPEC_PARAM3_ORG ) {
@@ -92257,14 +94232,14 @@
 			reftype = FILTER_ITEM_TOOL
 			return
 		}
 		if ( dbmode == DBMODE_REF_SPEC ) {
 			if ( dbspec == DBSPEC_TYPE ) {
-				return FILTER_ITEM_TOOL
+				return 59000
 			}
 			if ( dbspec == DBSPEC_TYPE_MINOR ) {
-				return FILTER_FURNITURE_BED
+				return 60004
 			}
 			if ( dbspec == DBSPEC_VALUE_ORG ) {
 				return 800
 			}
 			if ( dbspec == DBSPEC_PARAM3_ORG ) {
@@ -92322,14 +94297,14 @@
 			reftype = FILTER_ITEM_FOOD
 			return
 		}
 		if ( dbmode == DBMODE_REF_SPEC ) {
 			if ( dbspec == DBSPEC_TYPE ) {
-				return FILTER_ITEM_FOOD
+				return 57000
 			}
 			if ( dbspec == DBSPEC_TYPE_MINOR ) {
-				return FILTER_ITEM_FOOD_HERB
+				return 58005
 			}
 			if ( dbspec == DBSPEC_VALUE_ORG ) {
 				return 800
 			}
 			if ( dbspec == DBSPEC_PARAM3_ORG ) {
@@ -92384,14 +94359,14 @@
 			reftype = FILTER_ITEM_FOOD
 			return
 		}
 		if ( dbmode == DBMODE_REF_SPEC ) {
 			if ( dbspec == DBSPEC_TYPE ) {
-				return FILTER_ITEM_FOOD
+				return 57000
 			}
 			if ( dbspec == DBSPEC_TYPE_MINOR ) {
-				return FILTER_ITEM_FOOD_HERB
+				return 58005
 			}
 			if ( dbspec == DBSPEC_VALUE_ORG ) {
 				return 1200
 			}
 			if ( dbspec == DBSPEC_PARAM3_ORG ) {
@@ -92446,14 +94421,14 @@
 			reftype = FILTER_ITEM_FOOD
 			return
 		}
 		if ( dbmode == DBMODE_REF_SPEC ) {
 			if ( dbspec == DBSPEC_TYPE ) {
-				return FILTER_ITEM_FOOD
+				return 57000
 			}
 			if ( dbspec == DBSPEC_TYPE_MINOR ) {
-				return FILTER_ITEM_FOOD_HERB
+				return 58005
 			}
 			if ( dbspec == DBSPEC_VALUE_ORG ) {
 				return 680
 			}
 			if ( dbspec == DBSPEC_PARAM3_ORG ) {
@@ -92508,14 +94483,14 @@
 			reftype = FILTER_ITEM_FOOD
 			return
 		}
 		if ( dbmode == DBMODE_REF_SPEC ) {
 			if ( dbspec == DBSPEC_TYPE ) {
-				return FILTER_ITEM_FOOD
+				return 57000
 			}
 			if ( dbspec == DBSPEC_TYPE_MINOR ) {
-				return FILTER_ITEM_FOOD_HERB
+				return 58005
 			}
 			if ( dbspec == DBSPEC_VALUE_ORG ) {
 				return 900
 			}
 			if ( dbspec == DBSPEC_PARAM3_ORG ) {
@@ -92570,14 +94545,14 @@
 			reftype = FILTER_ITEM_FOOD
 			return
 		}
 		if ( dbmode == DBMODE_REF_SPEC ) {
 			if ( dbspec == DBSPEC_TYPE ) {
-				return FILTER_ITEM_FOOD
+				return 57000
 			}
 			if ( dbspec == DBSPEC_TYPE_MINOR ) {
-				return FILTER_ITEM_FOOD_HERB
+				return 58005
 			}
 			if ( dbspec == DBSPEC_VALUE_ORG ) {
 				return 800
 			}
 			if ( dbspec == DBSPEC_PARAM3_ORG ) {
@@ -92632,14 +94607,14 @@
 			reftype = FILTER_ITEM_FOOD
 			return
 		}
 		if ( dbmode == DBMODE_REF_SPEC ) {
 			if ( dbspec == DBSPEC_TYPE ) {
-				return FILTER_ITEM_FOOD
+				return 57000
 			}
 			if ( dbspec == DBSPEC_TYPE_MINOR ) {
-				return FILTER_ITEM_FOOD_HERB
+				return 58005
 			}
 			if ( dbspec == DBSPEC_VALUE_ORG ) {
 				return 1050
 			}
 			if ( dbspec == DBSPEC_PARAM3_ORG ) {
@@ -92695,14 +94670,14 @@
 			reftype = FILTER_ITEM_FOOD
 			return
 		}
 		if ( dbmode == DBMODE_REF_SPEC ) {
 			if ( dbspec == DBSPEC_TYPE ) {
-				return FILTER_ITEM_FOOD
+				return 57000
 			}
 			if ( dbspec == DBSPEC_TYPE_MINOR ) {
-				return FILTER_ITEM_SEED
+				return 58500
 			}
 			if ( dbspec == DBSPEC_VALUE_ORG ) {
 				return 120000
 			}
 			if ( dbspec == DBSPEC_PARAM3_ORG ) {
@@ -92761,14 +94736,14 @@
 			reftype = FILTER_ITEM_FOOD
 			return
 		}
 		if ( dbmode == DBMODE_REF_SPEC ) {
 			if ( dbspec == DBSPEC_TYPE ) {
-				return FILTER_ITEM_FOOD
+				return 57000
 			}
 			if ( dbspec == DBSPEC_TYPE_MINOR ) {
-				return FILTER_ITEM_SEED
+				return 58500
 			}
 			if ( dbspec == DBSPEC_VALUE_ORG ) {
 				return 2500
 			}
 			if ( dbspec == DBSPEC_PARAM3_ORG ) {
@@ -92827,14 +94802,14 @@
 			reftype = FILTER_ITEM_FOOD
 			return
 		}
 		if ( dbmode == DBMODE_REF_SPEC ) {
 			if ( dbspec == DBSPEC_TYPE ) {
-				return FILTER_ITEM_FOOD
+				return 57000
 			}
 			if ( dbspec == DBSPEC_TYPE_MINOR ) {
-				return FILTER_ITEM_SEED
+				return 58500
 			}
 			if ( dbspec == DBSPEC_VALUE_ORG ) {
 				return 2000
 			}
 			if ( dbspec == DBSPEC_PARAM3_ORG ) {
@@ -92893,14 +94868,14 @@
 			reftype = FILTER_ITEM_FOOD
 			return
 		}
 		if ( dbmode == DBMODE_REF_SPEC ) {
 			if ( dbspec == DBSPEC_TYPE ) {
-				return FILTER_ITEM_FOOD
+				return 57000
 			}
 			if ( dbspec == DBSPEC_TYPE_MINOR ) {
-				return FILTER_ITEM_SEED
+				return 58500
 			}
 			if ( dbspec == DBSPEC_VALUE_ORG ) {
 				return 280
 			}
 			if ( dbspec == DBSPEC_PARAM3_ORG ) {
@@ -92959,14 +94934,14 @@
 			reftype = FILTER_ITEM_FOOD
 			return
 		}
 		if ( dbmode == DBMODE_REF_SPEC ) {
 			if ( dbspec == DBSPEC_TYPE ) {
-				return FILTER_ITEM_FOOD
+				return 57000
 			}
 			if ( dbspec == DBSPEC_TYPE_MINOR ) {
-				return FILTER_ITEM_SEED
+				return 58500
 			}
 			if ( dbspec == DBSPEC_VALUE_ORG ) {
 				return 240
 			}
 			if ( dbspec == DBSPEC_PARAM3_ORG ) {
@@ -93023,14 +94998,14 @@
 			reftype = FILTER_CONTAINER
 			return
 		}
 		if ( dbmode == DBMODE_REF_SPEC ) {
 			if ( dbspec == DBSPEC_TYPE ) {
-				return FILTER_CONTAINER
+				return 72000
 			}
 			if ( dbspec == DBSPEC_TYPE_MINOR ) {
-				return FILTER_NONE
+				return 99999
 			}
 			if ( dbspec == DBSPEC_VALUE_ORG ) {
 				return 12000
 			}
 			if ( dbspec == DBSPEC_PARAM3_ORG ) {
@@ -93084,14 +95059,14 @@
 			reftype = FILTER_CONTAINER
 			return
 		}
 		if ( dbmode == DBMODE_REF_SPEC ) {
 			if ( dbspec == DBSPEC_TYPE ) {
-				return FILTER_CONTAINER
+				return 72000
 			}
 			if ( dbspec == DBSPEC_TYPE_MINOR ) {
-				return FILTER_NONE
+				return 99999
 			}
 			if ( dbspec == DBSPEC_VALUE_ORG ) {
 				return 4000
 			}
 			if ( dbspec == DBSPEC_PARAM3_ORG ) {
@@ -93145,14 +95120,14 @@
 			reftype = FILTER_FURNITURE
 			return
 		}
 		if ( dbmode == DBMODE_REF_SPEC ) {
 			if ( dbspec == DBSPEC_TYPE ) {
-				return FILTER_FURNITURE
+				return 60000
 			}
 			if ( dbspec == DBSPEC_TYPE_MINOR ) {
-				return FILTER_NONE
+				return 99999
 			}
 			if ( dbspec == DBSPEC_VALUE_ORG ) {
 				return 30000
 			}
 			if ( dbspec == DBSPEC_PARAM3_ORG ) {
@@ -93209,14 +95184,14 @@
 			reftype = FILTER_FURNITURE
 			return
 		}
 		if ( dbmode == DBMODE_REF_SPEC ) {
 			if ( dbspec == DBSPEC_TYPE ) {
-				return FILTER_FURNITURE
+				return 60000
 			}
 			if ( dbspec == DBSPEC_TYPE_MINOR ) {
-				return FILTER_NONE
+				return 99999
 			}
 			if ( dbspec == DBSPEC_VALUE_ORG ) {
 				return 15000
 			}
 			if ( dbspec == DBSPEC_PARAM3_ORG ) {
@@ -93263,26 +95238,26 @@
 			reftype = FILTER_ITEM_ROD
 			reftypeminor = FILTER_ITEM_ROD_HEALING
 			inv(INV_ITEM_NUM, ci) = 1
 			fixeditemenc = 0
 			inv(INV_ITEM_IDENTIFY_LEVEL, ci) = 0
-			inv(INV_ITEM_CHARGE, ci) = 3 + rnd(3) - rnd(3)
-			ibitmod ITEM_BIT_CHARGE_ITEM, ci, 1
+			inv((9 /*!!!@[INV_ITEM_AMMO @@@ INV_ITEM_CHARGE @@@ INV_ITEM_CLIENT @@@ INV_ITEM_FILE @@@ INV_ITEM_NEXT_PERIOD]@!!! */), ci) = 3 + rnd(3) - rnd(3)
+			ibitmod ITEM_BIT_CHARGE_ITEM, ci, TRUE
 			return
 		}
 		if ( dbmode == DBMODE_REF ) {
 			ichargelevel = 3
 			infilterref = ""
 			reftype = FILTER_ITEM_ROD
 			return
 		}
 		if ( dbmode == DBMODE_REF_SPEC ) {
 			if ( dbspec == DBSPEC_TYPE ) {
-				return FILTER_ITEM_ROD
+				return 56000
 			}
 			if ( dbspec == DBSPEC_TYPE_MINOR ) {
-				return FILTER_ITEM_ROD_HEALING
+				return 56001
 			}
 			if ( dbspec == DBSPEC_VALUE_ORG ) {
 				return 3800
 			}
 			if ( dbspec == DBSPEC_PARAM3_ORG ) {
@@ -93352,14 +95327,14 @@
 			reftype = FILTER_ITEM_SCROLL
 			return
 		}
 		if ( dbmode == DBMODE_REF_SPEC ) {
 			if ( dbspec == DBSPEC_TYPE ) {
-				return FILTER_ITEM_SCROLL
+				return 53000
 			}
 			if ( dbspec == DBSPEC_TYPE_MINOR ) {
-				return FILTER_NONE
+				return 99999
 			}
 			if ( dbspec == DBSPEC_VALUE_ORG ) {
 				return 350
 			}
 			if ( dbspec == DBSPEC_PARAM3_ORG ) {
@@ -93412,26 +95387,26 @@
 			reftype = FILTER_ITEM_SPELLBOOK
 			reftypeminor = FILTER_NOTHING
 			inv(INV_ITEM_NUM, ci) = 1
 			fixeditemenc = 0
 			inv(INV_ITEM_IDENTIFY_LEVEL, ci) = 0
-			inv(INV_ITEM_CHARGE, ci) = 4 + rnd(4) - rnd(4)
-			ibitmod ITEM_BIT_CHARGE_ITEM, ci, 1
+			inv((9 /*!!!@[INV_ITEM_AMMO @@@ INV_ITEM_CHARGE @@@ INV_ITEM_CLIENT @@@ INV_ITEM_FILE @@@ INV_ITEM_NEXT_PERIOD]@!!! */), ci) = 4 + rnd(4) - rnd(4)
+			ibitmod ITEM_BIT_CHARGE_ITEM, ci, TRUE
 			return
 		}
 		if ( dbmode == DBMODE_REF ) {
 			ichargelevel = 4
 			infilterref = ""
 			reftype = FILTER_ITEM_SPELLBOOK
 			return
 		}
 		if ( dbmode == DBMODE_REF_SPEC ) {
 			if ( dbspec == DBSPEC_TYPE ) {
-				return FILTER_ITEM_SPELLBOOK
+				return 54000
 			}
 			if ( dbspec == DBSPEC_TYPE_MINOR ) {
-				return FILTER_NONE
+				return 99999
 			}
 			if ( dbspec == DBSPEC_VALUE_ORG ) {
 				return 2000
 			}
 			if ( dbspec == DBSPEC_PARAM3_ORG ) {
@@ -93495,14 +95470,14 @@
 			reftype = FILTER_CARGO_TRADE
 			return
 		}
 		if ( dbmode == DBMODE_REF_SPEC ) {
 			if ( dbspec == DBSPEC_TYPE ) {
-				return FILTER_CARGO_TRADE
+				return 92000
 			}
 			if ( dbspec == DBSPEC_TYPE_MINOR ) {
-				return FILTER_NONE
+				return 99999
 			}
 			if ( dbspec == DBSPEC_VALUE_ORG ) {
 				return 150
 			}
 			if ( dbspec == DBSPEC_PARAM3_ORG ) {
@@ -93560,14 +95535,14 @@
 			reftype = FILTER_CARGO_TRADE
 			return
 		}
 		if ( dbmode == DBMODE_REF_SPEC ) {
 			if ( dbspec == DBSPEC_TYPE ) {
-				return FILTER_CARGO_TRADE
+				return 92000
 			}
 			if ( dbspec == DBSPEC_TYPE_MINOR ) {
-				return FILTER_NONE
+				return 99999
 			}
 			if ( dbspec == DBSPEC_VALUE_ORG ) {
 				return 5790
 			}
 			if ( dbspec == DBSPEC_PARAM3_ORG ) {
@@ -93625,14 +95600,14 @@
 			reftype = FILTER_CARGO_TRADE
 			return
 		}
 		if ( dbmode == DBMODE_REF_SPEC ) {
 			if ( dbspec == DBSPEC_TYPE ) {
-				return FILTER_CARGO_TRADE
+				return 92000
 			}
 			if ( dbspec == DBSPEC_TYPE_MINOR ) {
-				return FILTER_NONE
+				return 99999
 			}
 			if ( dbspec == DBSPEC_VALUE_ORG ) {
 				return 2640
 			}
 			if ( dbspec == DBSPEC_PARAM3_ORG ) {
@@ -93690,14 +95665,14 @@
 			reftype = FILTER_CARGO_TRADE
 			return
 		}
 		if ( dbmode == DBMODE_REF_SPEC ) {
 			if ( dbspec == DBSPEC_TYPE ) {
-				return FILTER_CARGO_TRADE
+				return 92000
 			}
 			if ( dbspec == DBSPEC_TYPE_MINOR ) {
-				return FILTER_NONE
+				return 99999
 			}
 			if ( dbspec == DBSPEC_VALUE_ORG ) {
 				return 1170
 			}
 			if ( dbspec == DBSPEC_PARAM3_ORG ) {
@@ -93755,14 +95730,14 @@
 			reftype = FILTER_CARGO_TRADE
 			return
 		}
 		if ( dbmode == DBMODE_REF_SPEC ) {
 			if ( dbspec == DBSPEC_TYPE ) {
-				return FILTER_CARGO_TRADE
+				return 92000
 			}
 			if ( dbspec == DBSPEC_TYPE_MINOR ) {
-				return FILTER_NONE
+				return 99999
 			}
 			if ( dbspec == DBSPEC_VALUE_ORG ) {
 				return 9450
 			}
 			if ( dbspec == DBSPEC_PARAM3_ORG ) {
@@ -93820,14 +95795,14 @@
 			reftype = FILTER_CARGO_TRADE
 			return
 		}
 		if ( dbmode == DBMODE_REF_SPEC ) {
 			if ( dbspec == DBSPEC_TYPE ) {
-				return FILTER_CARGO_TRADE
+				return 92000
 			}
 			if ( dbspec == DBSPEC_TYPE_MINOR ) {
-				return FILTER_NONE
+				return 99999
 			}
 			if ( dbspec == DBSPEC_VALUE_ORG ) {
 				return 3570
 			}
 			if ( dbspec == DBSPEC_PARAM3_ORG ) {
@@ -93885,14 +95860,14 @@
 			reftype = FILTER_CARGO_TRADE
 			return
 		}
 		if ( dbmode == DBMODE_REF_SPEC ) {
 			if ( dbspec == DBSPEC_TYPE ) {
-				return FILTER_CARGO_TRADE
+				return 92000
 			}
 			if ( dbspec == DBSPEC_TYPE_MINOR ) {
-				return FILTER_NONE
+				return 99999
 			}
 			if ( dbspec == DBSPEC_VALUE_ORG ) {
 				return 1930
 			}
 			if ( dbspec == DBSPEC_PARAM3_ORG ) {
@@ -93950,14 +95925,14 @@
 			reftype = FILTER_CARGO_TRADE
 			return
 		}
 		if ( dbmode == DBMODE_REF_SPEC ) {
 			if ( dbspec == DBSPEC_TYPE ) {
-				return FILTER_CARGO_TRADE
+				return 92000
 			}
 			if ( dbspec == DBSPEC_TYPE_MINOR ) {
-				return FILTER_NONE
+				return 99999
 			}
 			if ( dbspec == DBSPEC_VALUE_ORG ) {
 				return 740
 			}
 			if ( dbspec == DBSPEC_PARAM3_ORG ) {
@@ -94015,14 +95990,14 @@
 			reftype = FILTER_CARGO_TRADE
 			return
 		}
 		if ( dbmode == DBMODE_REF_SPEC ) {
 			if ( dbspec == DBSPEC_TYPE ) {
-				return FILTER_CARGO_TRADE
+				return 92000
 			}
 			if ( dbspec == DBSPEC_TYPE_MINOR ) {
-				return FILTER_NONE
+				return 99999
 			}
 			if ( dbspec == DBSPEC_VALUE_ORG ) {
 				return 9950
 			}
 			if ( dbspec == DBSPEC_PARAM3_ORG ) {
@@ -94080,14 +96055,14 @@
 			reftype = FILTER_CARGO_TRADE
 			return
 		}
 		if ( dbmode == DBMODE_REF_SPEC ) {
 			if ( dbspec == DBSPEC_TYPE ) {
-				return FILTER_CARGO_TRADE
+				return 92000
 			}
 			if ( dbspec == DBSPEC_TYPE_MINOR ) {
-				return FILTER_NONE
+				return 99999
 			}
 			if ( dbspec == DBSPEC_VALUE_ORG ) {
 				return 1590
 			}
 			if ( dbspec == DBSPEC_PARAM3_ORG ) {
@@ -94145,14 +96120,14 @@
 			reftype = FILTER_CARGO_TRADE
 			return
 		}
 		if ( dbmode == DBMODE_REF_SPEC ) {
 			if ( dbspec == DBSPEC_TYPE ) {
-				return FILTER_CARGO_TRADE
+				return 92000
 			}
 			if ( dbspec == DBSPEC_TYPE_MINOR ) {
-				return FILTER_NONE
+				return 99999
 			}
 			if ( dbspec == DBSPEC_VALUE_ORG ) {
 				return 1010
 			}
 			if ( dbspec == DBSPEC_PARAM3_ORG ) {
@@ -94209,14 +96184,14 @@
 			reftype = FILTER_ITEM_SCROLL
 			return
 		}
 		if ( dbmode == DBMODE_REF_SPEC ) {
 			if ( dbspec == DBSPEC_TYPE ) {
-				return FILTER_ITEM_SCROLL
+				return 53000
 			}
 			if ( dbspec == DBSPEC_TYPE_MINOR ) {
-				return FILTER_NONE
+				return 99999
 			}
 			if ( dbspec == DBSPEC_VALUE_ORG ) {
 				return 1800
 			}
 			if ( dbspec == DBSPEC_PARAM3_ORG ) {
@@ -94269,26 +96244,26 @@
 			reftype = FILTER_ITEM_SPELLBOOK
 			reftypeminor = FILTER_NOTHING
 			inv(INV_ITEM_NUM, ci) = 1
 			fixeditemenc = 0
 			inv(INV_ITEM_IDENTIFY_LEVEL, ci) = 0
-			inv(INV_ITEM_CHARGE, ci) = 5 + rnd(5) - rnd(5)
-			ibitmod ITEM_BIT_CHARGE_ITEM, ci, 1
+			inv((9 /*!!!@[INV_ITEM_AMMO @@@ INV_ITEM_CHARGE @@@ INV_ITEM_CLIENT @@@ INV_ITEM_FILE @@@ INV_ITEM_NEXT_PERIOD]@!!! */), ci) = 5 + rnd(5) - rnd(5)
+			ibitmod ITEM_BIT_CHARGE_ITEM, ci, TRUE
 			return
 		}
 		if ( dbmode == DBMODE_REF ) {
 			ichargelevel = 5
 			infilterref = ""
 			reftype = FILTER_ITEM_SPELLBOOK
 			return
 		}
 		if ( dbmode == DBMODE_REF_SPEC ) {
 			if ( dbspec == DBSPEC_TYPE ) {
-				return FILTER_ITEM_SPELLBOOK
+				return 54000
 			}
 			if ( dbspec == DBSPEC_TYPE_MINOR ) {
-				return FILTER_NONE
+				return 99999
 			}
 			if ( dbspec == DBSPEC_VALUE_ORG ) {
 				return 1900
 			}
 			if ( dbspec == DBSPEC_PARAM3_ORG ) {
@@ -94341,26 +96316,26 @@
 			reftype = FILTER_ITEM_SPELLBOOK
 			reftypeminor = FILTER_NOTHING
 			inv(INV_ITEM_NUM, ci) = 1
 			fixeditemenc = 0
 			inv(INV_ITEM_IDENTIFY_LEVEL, ci) = 0
-			inv(INV_ITEM_CHARGE, ci) = 4 + rnd(4) - rnd(4)
-			ibitmod ITEM_BIT_CHARGE_ITEM, ci, 1
+			inv((9 /*!!!@[INV_ITEM_AMMO @@@ INV_ITEM_CHARGE @@@ INV_ITEM_CLIENT @@@ INV_ITEM_FILE @@@ INV_ITEM_NEXT_PERIOD]@!!! */), ci) = 4 + rnd(4) - rnd(4)
+			ibitmod ITEM_BIT_CHARGE_ITEM, ci, TRUE
 			return
 		}
 		if ( dbmode == DBMODE_REF ) {
 			ichargelevel = 4
 			infilterref = ""
 			reftype = FILTER_ITEM_SPELLBOOK
 			return
 		}
 		if ( dbmode == DBMODE_REF_SPEC ) {
 			if ( dbspec == DBSPEC_TYPE ) {
-				return FILTER_ITEM_SPELLBOOK
+				return 54000
 			}
 			if ( dbspec == DBSPEC_TYPE_MINOR ) {
-				return FILTER_NONE
+				return 99999
 			}
 			if ( dbspec == DBSPEC_VALUE_ORG ) {
 				return 1700
 			}
 			if ( dbspec == DBSPEC_PARAM3_ORG ) {
@@ -94423,14 +96398,14 @@
 			reftype = FILTER_ITEM_SCROLL
 			return
 		}
 		if ( dbmode == DBMODE_REF_SPEC ) {
 			if ( dbspec == DBSPEC_TYPE ) {
-				return FILTER_ITEM_SCROLL
+				return 53000
 			}
 			if ( dbspec == DBSPEC_TYPE_MINOR ) {
-				return FILTER_NONE
+				return 99999
 			}
 			if ( dbspec == DBSPEC_VALUE_ORG ) {
 				return 3800
 			}
 			if ( dbspec == DBSPEC_PARAM3_ORG ) {
@@ -94493,14 +96468,14 @@
 			reftype = FILTER_CONTAINER
 			return
 		}
 		if ( dbmode == DBMODE_REF_SPEC ) {
 			if ( dbspec == DBSPEC_TYPE ) {
-				return FILTER_CONTAINER
+				return 72000
 			}
 			if ( dbspec == DBSPEC_TYPE_MINOR ) {
-				return FILTER_NONE
+				return 99999
 			}
 			if ( dbspec == DBSPEC_VALUE_ORG ) {
 				return 500
 			}
 			if ( dbspec == DBSPEC_PARAM3_ORG ) {
@@ -94555,14 +96530,14 @@
 			reftype = FILTER_ITEM_TOOL
 			return
 		}
 		if ( dbmode == DBMODE_REF_SPEC ) {
 			if ( dbspec == DBSPEC_TYPE ) {
-				return FILTER_ITEM_TOOL
+				return 59000
 			}
 			if ( dbspec == DBSPEC_TYPE_MINOR ) {
-				return FILTER_NONE
+				return 99999
 			}
 			if ( dbspec == DBSPEC_VALUE_ORG ) {
 				return 2000
 			}
 			if ( dbspec == DBSPEC_PARAM3_ORG ) {
@@ -94619,14 +96594,14 @@
 			reftype = FILTER_ITEM_POTION
 			return
 		}
 		if ( dbmode == DBMODE_REF_SPEC ) {
 			if ( dbspec == DBSPEC_TYPE ) {
-				return FILTER_ITEM_POTION
+				return 52000
 			}
 			if ( dbspec == DBSPEC_TYPE_MINOR ) {
-				return FILTER_NONE
+				return 99999
 			}
 			if ( dbspec == DBSPEC_VALUE_ORG ) {
 				return 800
 			}
 			if ( dbspec == DBSPEC_PARAM3_ORG ) {
@@ -94679,26 +96654,26 @@
 			reftype = FILTER_ITEM_ROD
 			reftypeminor = FILTER_ITEM_ROD_HEALING
 			inv(INV_ITEM_NUM, ci) = 1
 			fixeditemenc = 0
 			inv(INV_ITEM_IDENTIFY_LEVEL, ci) = 0
-			inv(INV_ITEM_CHARGE, ci) = 4 + rnd(4) - rnd(4)
-			ibitmod ITEM_BIT_CHARGE_ITEM, ci, 1
+			inv((9 /*!!!@[INV_ITEM_AMMO @@@ INV_ITEM_CHARGE @@@ INV_ITEM_CLIENT @@@ INV_ITEM_FILE @@@ INV_ITEM_NEXT_PERIOD]@!!! */), ci) = 4 + rnd(4) - rnd(4)
+			ibitmod ITEM_BIT_CHARGE_ITEM, ci, TRUE
 			return
 		}
 		if ( dbmode == DBMODE_REF ) {
 			ichargelevel = 4
 			infilterref = ""
 			reftype = FILTER_ITEM_ROD
 			return
 		}
 		if ( dbmode == DBMODE_REF_SPEC ) {
 			if ( dbspec == DBSPEC_TYPE ) {
-				return FILTER_ITEM_ROD
+				return 56000
 			}
 			if ( dbspec == DBSPEC_TYPE_MINOR ) {
-				return FILTER_ITEM_ROD_HEALING
+				return 56001
 			}
 			if ( dbspec == DBSPEC_VALUE_ORG ) {
 				return 4100
 			}
 			if ( dbspec == DBSPEC_PARAM3_ORG ) {
@@ -94768,14 +96743,14 @@
 			reftype = FILTER_ITEM_SCROLL
 			return
 		}
 		if ( dbmode == DBMODE_REF_SPEC ) {
 			if ( dbspec == DBSPEC_TYPE ) {
-				return FILTER_ITEM_SCROLL
+				return 53000
 			}
 			if ( dbspec == DBSPEC_TYPE_MINOR ) {
-				return FILTER_NONE
+				return 99999
 			}
 			if ( dbspec == DBSPEC_VALUE_ORG ) {
 				return 2400
 			}
 			if ( dbspec == DBSPEC_PARAM3_ORG ) {
@@ -94838,14 +96813,14 @@
 			reftype = FILTER_ITEM_SCROLL
 			return
 		}
 		if ( dbmode == DBMODE_REF_SPEC ) {
 			if ( dbspec == DBSPEC_TYPE ) {
-				return FILTER_ITEM_SCROLL
+				return 53000
 			}
 			if ( dbspec == DBSPEC_TYPE_MINOR ) {
-				return FILTER_NONE
+				return 99999
 			}
 			if ( dbspec == DBSPEC_VALUE_ORG ) {
 				return 1400
 			}
 			if ( dbspec == DBSPEC_PARAM3_ORG ) {
@@ -94908,14 +96883,14 @@
 			reftype = FILTER_ITEM_SCROLL
 			return
 		}
 		if ( dbmode == DBMODE_REF_SPEC ) {
 			if ( dbspec == DBSPEC_TYPE ) {
-				return FILTER_ITEM_SCROLL
+				return 53000
 			}
 			if ( dbspec == DBSPEC_TYPE_MINOR ) {
-				return FILTER_NONE
+				return 99999
 			}
 			if ( dbspec == DBSPEC_VALUE_ORG ) {
 				return 350
 			}
 			if ( dbspec == DBSPEC_PARAM3_ORG ) {
@@ -94968,26 +96943,26 @@
 			reftype = FILTER_ITEM_SPELLBOOK
 			reftypeminor = FILTER_NOTHING
 			inv(INV_ITEM_NUM, ci) = 1
 			fixeditemenc = 0
 			inv(INV_ITEM_IDENTIFY_LEVEL, ci) = 0
-			inv(INV_ITEM_CHARGE, ci) = 3 + rnd(3) - rnd(3)
-			ibitmod ITEM_BIT_CHARGE_ITEM, ci, 1
+			inv((9 /*!!!@[INV_ITEM_AMMO @@@ INV_ITEM_CHARGE @@@ INV_ITEM_CLIENT @@@ INV_ITEM_FILE @@@ INV_ITEM_NEXT_PERIOD]@!!! */), ci) = 3 + rnd(3) - rnd(3)
+			ibitmod ITEM_BIT_CHARGE_ITEM, ci, TRUE
 			return
 		}
 		if ( dbmode == DBMODE_REF ) {
 			ichargelevel = 3
 			infilterref = ""
 			reftype = FILTER_ITEM_SPELLBOOK
 			return
 		}
 		if ( dbmode == DBMODE_REF_SPEC ) {
 			if ( dbspec == DBSPEC_TYPE ) {
-				return FILTER_ITEM_SPELLBOOK
+				return 54000
 			}
 			if ( dbspec == DBSPEC_TYPE_MINOR ) {
-				return FILTER_NONE
+				return 99999
 			}
 			if ( dbspec == DBSPEC_VALUE_ORG ) {
 				return 4900
 			}
 			if ( dbspec == DBSPEC_PARAM3_ORG ) {
@@ -95040,26 +97015,26 @@
 			reftype = FILTER_ITEM_SPELLBOOK
 			reftypeminor = FILTER_NOTHING
 			inv(INV_ITEM_NUM, ci) = 1
 			fixeditemenc = 0
 			inv(INV_ITEM_IDENTIFY_LEVEL, ci) = 0
-			inv(INV_ITEM_CHARGE, ci) = 3 + rnd(3) - rnd(3)
-			ibitmod ITEM_BIT_CHARGE_ITEM, ci, 1
+			inv((9 /*!!!@[INV_ITEM_AMMO @@@ INV_ITEM_CHARGE @@@ INV_ITEM_CLIENT @@@ INV_ITEM_FILE @@@ INV_ITEM_NEXT_PERIOD]@!!! */), ci) = 3 + rnd(3) - rnd(3)
+			ibitmod ITEM_BIT_CHARGE_ITEM, ci, TRUE
 			return
 		}
 		if ( dbmode == DBMODE_REF ) {
 			ichargelevel = 3
 			infilterref = ""
 			reftype = FILTER_ITEM_SPELLBOOK
 			return
 		}
 		if ( dbmode == DBMODE_REF_SPEC ) {
 			if ( dbspec == DBSPEC_TYPE ) {
-				return FILTER_ITEM_SPELLBOOK
+				return 54000
 			}
 			if ( dbspec == DBSPEC_TYPE_MINOR ) {
-				return FILTER_NONE
+				return 99999
 			}
 			if ( dbspec == DBSPEC_VALUE_ORG ) {
 				return 3000
 			}
 			if ( dbspec == DBSPEC_PARAM3_ORG ) {
@@ -95112,26 +97087,26 @@
 			reftype = FILTER_ITEM_ROD
 			reftypeminor = FILTER_ITEM_ROD_HEALING
 			inv(INV_ITEM_NUM, ci) = 1
 			fixeditemenc = 0
 			inv(INV_ITEM_IDENTIFY_LEVEL, ci) = 0
-			inv(INV_ITEM_CHARGE, ci) = 6 + rnd(6) - rnd(6)
-			ibitmod ITEM_BIT_CHARGE_ITEM, ci, 1
+			inv((9 /*!!!@[INV_ITEM_AMMO @@@ INV_ITEM_CHARGE @@@ INV_ITEM_CLIENT @@@ INV_ITEM_FILE @@@ INV_ITEM_NEXT_PERIOD]@!!! */), ci) = 6 + rnd(6) - rnd(6)
+			ibitmod ITEM_BIT_CHARGE_ITEM, ci, TRUE
 			return
 		}
 		if ( dbmode == DBMODE_REF ) {
 			ichargelevel = 6
 			infilterref = ""
 			reftype = FILTER_ITEM_ROD
 			return
 		}
 		if ( dbmode == DBMODE_REF_SPEC ) {
 			if ( dbspec == DBSPEC_TYPE ) {
-				return FILTER_ITEM_ROD
+				return 56000
 			}
 			if ( dbspec == DBSPEC_TYPE_MINOR ) {
-				return FILTER_ITEM_ROD_HEALING
+				return 56001
 			}
 			if ( dbspec == DBSPEC_VALUE_ORG ) {
 				return 3600
 			}
 			if ( dbspec == DBSPEC_PARAM3_ORG ) {
@@ -95201,14 +97176,14 @@
 			reftype = FILTER_ITEM_SCROLL
 			return
 		}
 		if ( dbmode == DBMODE_REF_SPEC ) {
 			if ( dbspec == DBSPEC_TYPE ) {
-				return FILTER_ITEM_SCROLL
+				return 53000
 			}
 			if ( dbspec == DBSPEC_TYPE_MINOR ) {
-				return FILTER_NONE
+				return 99999
 			}
 			if ( dbspec == DBSPEC_VALUE_ORG ) {
 				return 1500
 			}
 			if ( dbspec == DBSPEC_PARAM3_ORG ) {
@@ -95261,26 +97236,26 @@
 			reftype = FILTER_ITEM_SPELLBOOK
 			reftypeminor = FILTER_NOTHING
 			inv(INV_ITEM_NUM, ci) = 1
 			fixeditemenc = 0
 			inv(INV_ITEM_IDENTIFY_LEVEL, ci) = 0
-			inv(INV_ITEM_CHARGE, ci) = 4 + rnd(4) - rnd(4)
-			ibitmod ITEM_BIT_CHARGE_ITEM, ci, 1
+			inv((9 /*!!!@[INV_ITEM_AMMO @@@ INV_ITEM_CHARGE @@@ INV_ITEM_CLIENT @@@ INV_ITEM_FILE @@@ INV_ITEM_NEXT_PERIOD]@!!! */), ci) = 4 + rnd(4) - rnd(4)
+			ibitmod ITEM_BIT_CHARGE_ITEM, ci, TRUE
 			return
 		}
 		if ( dbmode == DBMODE_REF ) {
 			ichargelevel = 4
 			infilterref = ""
 			reftype = FILTER_ITEM_SPELLBOOK
 			return
 		}
 		if ( dbmode == DBMODE_REF_SPEC ) {
 			if ( dbspec == DBSPEC_TYPE ) {
-				return FILTER_ITEM_SPELLBOOK
+				return 54000
 			}
 			if ( dbspec == DBSPEC_TYPE_MINOR ) {
-				return FILTER_NONE
+				return 99999
 			}
 			if ( dbspec == DBSPEC_VALUE_ORG ) {
 				return 2000
 			}
 			if ( dbspec == DBSPEC_PARAM3_ORG ) {
@@ -95343,14 +97318,14 @@
 			reftype = FILTER_ITEM_POTION
 			return
 		}
 		if ( dbmode == DBMODE_REF_SPEC ) {
 			if ( dbspec == DBSPEC_TYPE ) {
-				return FILTER_ITEM_POTION
+				return 52000
 			}
 			if ( dbspec == DBSPEC_TYPE_MINOR ) {
-				return FILTER_NONE
+				return 99999
 			}
 			if ( dbspec == DBSPEC_VALUE_ORG ) {
 				return 30
 			}
 			if ( dbspec == DBSPEC_PARAM3_ORG ) {
@@ -95403,26 +97378,26 @@
 			reftype = FILTER_ITEM_SPELLBOOK
 			reftypeminor = FILTER_NOTHING
 			inv(INV_ITEM_NUM, ci) = 1
 			fixeditemenc = 0
 			inv(INV_ITEM_IDENTIFY_LEVEL, ci) = 0
-			inv(INV_ITEM_CHARGE, ci) = 3 + rnd(3) - rnd(3)
-			ibitmod ITEM_BIT_CHARGE_ITEM, ci, 1
+			inv((9 /*!!!@[INV_ITEM_AMMO @@@ INV_ITEM_CHARGE @@@ INV_ITEM_CLIENT @@@ INV_ITEM_FILE @@@ INV_ITEM_NEXT_PERIOD]@!!! */), ci) = 3 + rnd(3) - rnd(3)
+			ibitmod ITEM_BIT_CHARGE_ITEM, ci, TRUE
 			return
 		}
 		if ( dbmode == DBMODE_REF ) {
 			ichargelevel = 3
 			infilterref = ""
 			reftype = FILTER_ITEM_SPELLBOOK
 			return
 		}
 		if ( dbmode == DBMODE_REF_SPEC ) {
 			if ( dbspec == DBSPEC_TYPE ) {
-				return FILTER_ITEM_SPELLBOOK
+				return 54000
 			}
 			if ( dbspec == DBSPEC_TYPE_MINOR ) {
-				return FILTER_NONE
+				return 99999
 			}
 			if ( dbspec == DBSPEC_VALUE_ORG ) {
 				return 3200
 			}
 			if ( dbspec == DBSPEC_PARAM3_ORG ) {
@@ -95475,26 +97450,26 @@
 			reftype = FILTER_ITEM_SPELLBOOK
 			reftypeminor = FILTER_NOTHING
 			inv(INV_ITEM_NUM, ci) = 1
 			fixeditemenc = 0
 			inv(INV_ITEM_IDENTIFY_LEVEL, ci) = 0
-			inv(INV_ITEM_CHARGE, ci) = 3 + rnd(3) - rnd(3)
-			ibitmod ITEM_BIT_CHARGE_ITEM, ci, 1
+			inv((9 /*!!!@[INV_ITEM_AMMO @@@ INV_ITEM_CHARGE @@@ INV_ITEM_CLIENT @@@ INV_ITEM_FILE @@@ INV_ITEM_NEXT_PERIOD]@!!! */), ci) = 3 + rnd(3) - rnd(3)
+			ibitmod ITEM_BIT_CHARGE_ITEM, ci, TRUE
 			return
 		}
 		if ( dbmode == DBMODE_REF ) {
 			ichargelevel = 3
 			infilterref = ""
 			reftype = FILTER_ITEM_SPELLBOOK
 			return
 		}
 		if ( dbmode == DBMODE_REF_SPEC ) {
 			if ( dbspec == DBSPEC_TYPE ) {
-				return FILTER_ITEM_SPELLBOOK
+				return 54000
 			}
 			if ( dbspec == DBSPEC_TYPE_MINOR ) {
-				return FILTER_NONE
+				return 99999
 			}
 			if ( dbspec == DBSPEC_VALUE_ORG ) {
 				return 1200
 			}
 			if ( dbspec == DBSPEC_PARAM3_ORG ) {
@@ -95557,14 +97532,14 @@
 			reftype = FILTER_ITEM_POTION
 			return
 		}
 		if ( dbmode == DBMODE_REF_SPEC ) {
 			if ( dbspec == DBSPEC_TYPE ) {
-				return FILTER_ITEM_POTION
+				return 52000
 			}
 			if ( dbspec == DBSPEC_TYPE_MINOR ) {
-				return FILTER_NONE
+				return 99999
 			}
 			if ( dbspec == DBSPEC_VALUE_ORG ) {
 				return 450
 			}
 			if ( dbspec == DBSPEC_PARAM3_ORG ) {
@@ -95617,26 +97592,26 @@
 			reftype = FILTER_ITEM_SPELLBOOK
 			reftypeminor = FILTER_NOTHING
 			inv(INV_ITEM_NUM, ci) = 1
 			fixeditemenc = 0
 			inv(INV_ITEM_IDENTIFY_LEVEL, ci) = 0
-			inv(INV_ITEM_CHARGE, ci) = 5 + rnd(5) - rnd(5)
-			ibitmod ITEM_BIT_CHARGE_ITEM, ci, 1
+			inv((9 /*!!!@[INV_ITEM_AMMO @@@ INV_ITEM_CHARGE @@@ INV_ITEM_CLIENT @@@ INV_ITEM_FILE @@@ INV_ITEM_NEXT_PERIOD]@!!! */), ci) = 5 + rnd(5) - rnd(5)
+			ibitmod ITEM_BIT_CHARGE_ITEM, ci, TRUE
 			return
 		}
 		if ( dbmode == DBMODE_REF ) {
 			ichargelevel = 5
 			infilterref = ""
 			reftype = FILTER_ITEM_SPELLBOOK
 			return
 		}
 		if ( dbmode == DBMODE_REF_SPEC ) {
 			if ( dbspec == DBSPEC_TYPE ) {
-				return FILTER_ITEM_SPELLBOOK
+				return 54000
 			}
 			if ( dbspec == DBSPEC_TYPE_MINOR ) {
-				return FILTER_NONE
+				return 99999
 			}
 			if ( dbspec == DBSPEC_VALUE_ORG ) {
 				return 1300
 			}
 			if ( dbspec == DBSPEC_PARAM3_ORG ) {
@@ -95689,26 +97664,26 @@
 			reftype = FILTER_ITEM_ROD
 			reftypeminor = FILTER_ITEM_ROD_HEALING
 			inv(INV_ITEM_NUM, ci) = 1
 			fixeditemenc = 0
 			inv(INV_ITEM_IDENTIFY_LEVEL, ci) = 0
-			inv(INV_ITEM_CHARGE, ci) = 8 + rnd(8) - rnd(8)
-			ibitmod ITEM_BIT_CHARGE_ITEM, ci, 1
+			inv((9 /*!!!@[INV_ITEM_AMMO @@@ INV_ITEM_CHARGE @@@ INV_ITEM_CLIENT @@@ INV_ITEM_FILE @@@ INV_ITEM_NEXT_PERIOD]@!!! */), ci) = 8 + rnd(8) - rnd(8)
+			ibitmod ITEM_BIT_CHARGE_ITEM, ci, TRUE
 			return
 		}
 		if ( dbmode == DBMODE_REF ) {
 			ichargelevel = 8
 			infilterref = ""
 			reftype = FILTER_ITEM_ROD
 			return
 		}
 		if ( dbmode == DBMODE_REF_SPEC ) {
 			if ( dbspec == DBSPEC_TYPE ) {
-				return FILTER_ITEM_ROD
+				return 56000
 			}
 			if ( dbspec == DBSPEC_TYPE_MINOR ) {
-				return FILTER_ITEM_ROD_HEALING
+				return 56001
 			}
 			if ( dbspec == DBSPEC_VALUE_ORG ) {
 				return 4200
 			}
 			if ( dbspec == DBSPEC_PARAM3_ORG ) {
@@ -95778,14 +97753,14 @@
 			reftype = FILTER_ITEM_POTION
 			return
 		}
 		if ( dbmode == DBMODE_REF_SPEC ) {
 			if ( dbspec == DBSPEC_TYPE ) {
-				return FILTER_ITEM_POTION
+				return 52000
 			}
 			if ( dbspec == DBSPEC_TYPE_MINOR ) {
-				return FILTER_NONE
+				return 99999
 			}
 			if ( dbspec == DBSPEC_VALUE_ORG ) {
 				return 30
 			}
 			if ( dbspec == DBSPEC_PARAM3_ORG ) {
@@ -95848,14 +97823,14 @@
 			reftype = FILTER_ITEM_POTION
 			return
 		}
 		if ( dbmode == DBMODE_REF_SPEC ) {
 			if ( dbspec == DBSPEC_TYPE ) {
-				return FILTER_ITEM_POTION
+				return 52000
 			}
 			if ( dbspec == DBSPEC_TYPE_MINOR ) {
-				return FILTER_NONE
+				return 99999
 			}
 			if ( dbspec == DBSPEC_VALUE_ORG ) {
 				return 850
 			}
 			if ( dbspec == DBSPEC_PARAM3_ORG ) {
@@ -95908,26 +97883,26 @@
 			reftype = FILTER_ITEM_SPELLBOOK
 			reftypeminor = FILTER_NOTHING
 			inv(INV_ITEM_NUM, ci) = 1
 			fixeditemenc = 0
 			inv(INV_ITEM_IDENTIFY_LEVEL, ci) = 0
-			inv(INV_ITEM_CHARGE, ci) = 4 + rnd(4) - rnd(4)
-			ibitmod ITEM_BIT_CHARGE_ITEM, ci, 1
+			inv((9 /*!!!@[INV_ITEM_AMMO @@@ INV_ITEM_CHARGE @@@ INV_ITEM_CLIENT @@@ INV_ITEM_FILE @@@ INV_ITEM_NEXT_PERIOD]@!!! */), ci) = 4 + rnd(4) - rnd(4)
+			ibitmod ITEM_BIT_CHARGE_ITEM, ci, TRUE
 			return
 		}
 		if ( dbmode == DBMODE_REF ) {
 			ichargelevel = 4
 			infilterref = ""
 			reftype = FILTER_ITEM_SPELLBOOK
 			return
 		}
 		if ( dbmode == DBMODE_REF_SPEC ) {
 			if ( dbspec == DBSPEC_TYPE ) {
-				return FILTER_ITEM_SPELLBOOK
+				return 54000
 			}
 			if ( dbspec == DBSPEC_TYPE_MINOR ) {
-				return FILTER_NONE
+				return 99999
 			}
 			if ( dbspec == DBSPEC_VALUE_ORG ) {
 				return 2400
 			}
 			if ( dbspec == DBSPEC_PARAM3_ORG ) {
@@ -95980,26 +97955,26 @@
 			reftype = FILTER_ITEM_SPELLBOOK
 			reftypeminor = FILTER_NOTHING
 			inv(INV_ITEM_NUM, ci) = 1
 			fixeditemenc = 0
 			inv(INV_ITEM_IDENTIFY_LEVEL, ci) = 0
-			inv(INV_ITEM_CHARGE, ci) = 3 + rnd(3) - rnd(3)
-			ibitmod ITEM_BIT_CHARGE_ITEM, ci, 1
+			inv((9 /*!!!@[INV_ITEM_AMMO @@@ INV_ITEM_CHARGE @@@ INV_ITEM_CLIENT @@@ INV_ITEM_FILE @@@ INV_ITEM_NEXT_PERIOD]@!!! */), ci) = 3 + rnd(3) - rnd(3)
+			ibitmod ITEM_BIT_CHARGE_ITEM, ci, TRUE
 			return
 		}
 		if ( dbmode == DBMODE_REF ) {
 			ichargelevel = 3
 			infilterref = ""
 			reftype = FILTER_ITEM_SPELLBOOK
 			return
 		}
 		if ( dbmode == DBMODE_REF_SPEC ) {
 			if ( dbspec == DBSPEC_TYPE ) {
-				return FILTER_ITEM_SPELLBOOK
+				return 54000
 			}
 			if ( dbspec == DBSPEC_TYPE_MINOR ) {
-				return FILTER_NONE
+				return 99999
 			}
 			if ( dbspec == DBSPEC_VALUE_ORG ) {
 				return 6000
 			}
 			if ( dbspec == DBSPEC_PARAM3_ORG ) {
@@ -96062,14 +98037,14 @@
 			reftype = FILTER_ITEM_POTION
 			return
 		}
 		if ( dbmode == DBMODE_REF_SPEC ) {
 			if ( dbspec == DBSPEC_TYPE ) {
-				return FILTER_ITEM_POTION
+				return 52000
 			}
 			if ( dbspec == DBSPEC_TYPE_MINOR ) {
-				return FILTER_NONE
+				return 99999
 			}
 			if ( dbspec == DBSPEC_VALUE_ORG ) {
 				return 700
 			}
 			if ( dbspec == DBSPEC_PARAM3_ORG ) {
@@ -96122,26 +98097,26 @@
 			reftype = FILTER_ITEM_SPELLBOOK
 			reftypeminor = FILTER_NOTHING
 			inv(INV_ITEM_NUM, ci) = 1
 			fixeditemenc = 0
 			inv(INV_ITEM_IDENTIFY_LEVEL, ci) = 0
-			inv(INV_ITEM_CHARGE, ci) = 3 + rnd(3) - rnd(3)
-			ibitmod ITEM_BIT_CHARGE_ITEM, ci, 1
+			inv((9 /*!!!@[INV_ITEM_AMMO @@@ INV_ITEM_CHARGE @@@ INV_ITEM_CLIENT @@@ INV_ITEM_FILE @@@ INV_ITEM_NEXT_PERIOD]@!!! */), ci) = 3 + rnd(3) - rnd(3)
+			ibitmod ITEM_BIT_CHARGE_ITEM, ci, TRUE
 			return
 		}
 		if ( dbmode == DBMODE_REF ) {
 			ichargelevel = 3
 			infilterref = ""
 			reftype = FILTER_ITEM_SPELLBOOK
 			return
 		}
 		if ( dbmode == DBMODE_REF_SPEC ) {
 			if ( dbspec == DBSPEC_TYPE ) {
-				return FILTER_ITEM_SPELLBOOK
+				return 54000
 			}
 			if ( dbspec == DBSPEC_TYPE_MINOR ) {
-				return FILTER_NONE
+				return 99999
 			}
 			if ( dbspec == DBSPEC_VALUE_ORG ) {
 				return 3200
 			}
 			if ( dbspec == DBSPEC_PARAM3_ORG ) {
@@ -96204,14 +98179,14 @@
 			reftype = FILTER_ITEM_POTION
 			return
 		}
 		if ( dbmode == DBMODE_REF_SPEC ) {
 			if ( dbspec == DBSPEC_TYPE ) {
-				return FILTER_ITEM_POTION
+				return 52000
 			}
 			if ( dbspec == DBSPEC_TYPE_MINOR ) {
-				return FILTER_NONE
+				return 99999
 			}
 			if ( dbspec == DBSPEC_VALUE_ORG ) {
 				return 800
 			}
 			if ( dbspec == DBSPEC_PARAM3_ORG ) {
@@ -96264,26 +98239,26 @@
 			reftype = FILTER_ITEM_SPELLBOOK
 			reftypeminor = FILTER_NOTHING
 			inv(INV_ITEM_NUM, ci) = 1
 			fixeditemenc = 0
 			inv(INV_ITEM_IDENTIFY_LEVEL, ci) = 0
-			inv(INV_ITEM_CHARGE, ci) = 4 + rnd(4) - rnd(4)
-			ibitmod ITEM_BIT_CHARGE_ITEM, ci, 1
+			inv((9 /*!!!@[INV_ITEM_AMMO @@@ INV_ITEM_CHARGE @@@ INV_ITEM_CLIENT @@@ INV_ITEM_FILE @@@ INV_ITEM_NEXT_PERIOD]@!!! */), ci) = 4 + rnd(4) - rnd(4)
+			ibitmod ITEM_BIT_CHARGE_ITEM, ci, TRUE
 			return
 		}
 		if ( dbmode == DBMODE_REF ) {
 			ichargelevel = 4
 			infilterref = ""
 			reftype = FILTER_ITEM_SPELLBOOK
 			return
 		}
 		if ( dbmode == DBMODE_REF_SPEC ) {
 			if ( dbspec == DBSPEC_TYPE ) {
-				return FILTER_ITEM_SPELLBOOK
+				return 54000
 			}
 			if ( dbspec == DBSPEC_TYPE_MINOR ) {
-				return FILTER_NONE
+				return 99999
 			}
 			if ( dbspec == DBSPEC_VALUE_ORG ) {
 				return 2200
 			}
 			if ( dbspec == DBSPEC_PARAM3_ORG ) {
@@ -96346,14 +98321,14 @@
 			reftype = FILTER_ITEM_POTION
 			return
 		}
 		if ( dbmode == DBMODE_REF_SPEC ) {
 			if ( dbspec == DBSPEC_TYPE ) {
-				return FILTER_ITEM_POTION
+				return 52000
 			}
 			if ( dbspec == DBSPEC_TYPE_MINOR ) {
-				return FILTER_NONE
+				return 99999
 			}
 			if ( dbspec == DBSPEC_VALUE_ORG ) {
 				return 40
 			}
 			if ( dbspec == DBSPEC_PARAM3_ORG ) {
@@ -96406,26 +98381,26 @@
 			reftype = FILTER_ITEM_SPELLBOOK
 			reftypeminor = FILTER_NOTHING
 			inv(INV_ITEM_NUM, ci) = 1
 			fixeditemenc = 0
 			inv(INV_ITEM_IDENTIFY_LEVEL, ci) = 0
-			inv(INV_ITEM_CHARGE, ci) = 3 + rnd(3) - rnd(3)
-			ibitmod ITEM_BIT_CHARGE_ITEM, ci, 1
+			inv((9 /*!!!@[INV_ITEM_AMMO @@@ INV_ITEM_CHARGE @@@ INV_ITEM_CLIENT @@@ INV_ITEM_FILE @@@ INV_ITEM_NEXT_PERIOD]@!!! */), ci) = 3 + rnd(3) - rnd(3)
+			ibitmod ITEM_BIT_CHARGE_ITEM, ci, TRUE
 			return
 		}
 		if ( dbmode == DBMODE_REF ) {
 			ichargelevel = 3
 			infilterref = ""
 			reftype = FILTER_ITEM_SPELLBOOK
 			return
 		}
 		if ( dbmode == DBMODE_REF_SPEC ) {
 			if ( dbspec == DBSPEC_TYPE ) {
-				return FILTER_ITEM_SPELLBOOK
+				return 54000
 			}
 			if ( dbspec == DBSPEC_TYPE_MINOR ) {
-				return FILTER_NONE
+				return 99999
 			}
 			if ( dbspec == DBSPEC_VALUE_ORG ) {
 				return 4200
 			}
 			if ( dbspec == DBSPEC_PARAM3_ORG ) {
@@ -96478,26 +98453,26 @@
 			reftype = FILTER_ITEM_ROD
 			reftypeminor = FILTER_ITEM_ROD_ENVIRONMENTAL
 			inv(INV_ITEM_NUM, ci) = 1
 			fixeditemenc = 0
 			inv(INV_ITEM_IDENTIFY_LEVEL, ci) = 0
-			inv(INV_ITEM_CHARGE, ci) = 7 + rnd(7) - rnd(7)
-			ibitmod ITEM_BIT_CHARGE_ITEM, ci, 1
+			inv((9 /*!!!@[INV_ITEM_AMMO @@@ INV_ITEM_CHARGE @@@ INV_ITEM_CLIENT @@@ INV_ITEM_FILE @@@ INV_ITEM_NEXT_PERIOD]@!!! */), ci) = 7 + rnd(7) - rnd(7)
+			ibitmod ITEM_BIT_CHARGE_ITEM, ci, TRUE
 			return
 		}
 		if ( dbmode == DBMODE_REF ) {
 			ichargelevel = 7
 			infilterref = ""
 			reftype = FILTER_ITEM_ROD
 			return
 		}
 		if ( dbmode == DBMODE_REF_SPEC ) {
 			if ( dbspec == DBSPEC_TYPE ) {
-				return FILTER_ITEM_ROD
+				return 56000
 			}
 			if ( dbspec == DBSPEC_TYPE_MINOR ) {
-				return FILTER_ITEM_ROD_ENVIRONMENTAL
+				return 56004
 			}
 			if ( dbspec == DBSPEC_VALUE_ORG ) {
 				return 1080
 			}
 			if ( dbspec == DBSPEC_PARAM3_ORG ) {
@@ -96557,26 +98532,26 @@
 			reftype = FILTER_ITEM_SPELLBOOK
 			reftypeminor = FILTER_NOTHING
 			inv(INV_ITEM_NUM, ci) = 1
 			fixeditemenc = 0
 			inv(INV_ITEM_IDENTIFY_LEVEL, ci) = 0
-			inv(INV_ITEM_CHARGE, ci) = 5 + rnd(5) - rnd(5)
-			ibitmod ITEM_BIT_CHARGE_ITEM, ci, 1
+			inv((9 /*!!!@[INV_ITEM_AMMO @@@ INV_ITEM_CHARGE @@@ INV_ITEM_CLIENT @@@ INV_ITEM_FILE @@@ INV_ITEM_NEXT_PERIOD]@!!! */), ci) = 5 + rnd(5) - rnd(5)
+			ibitmod ITEM_BIT_CHARGE_ITEM, ci, TRUE
 			return
 		}
 		if ( dbmode == DBMODE_REF ) {
 			ichargelevel = 5
 			infilterref = ""
 			reftype = FILTER_ITEM_SPELLBOOK
 			return
 		}
 		if ( dbmode == DBMODE_REF_SPEC ) {
 			if ( dbspec == DBSPEC_TYPE ) {
-				return FILTER_ITEM_SPELLBOOK
+				return 54000
 			}
 			if ( dbspec == DBSPEC_TYPE_MINOR ) {
-				return FILTER_NONE
+				return 99999
 			}
 			if ( dbspec == DBSPEC_VALUE_ORG ) {
 				return 1400
 			}
 			if ( dbspec == DBSPEC_PARAM3_ORG ) {
@@ -96639,14 +98614,14 @@
 			reftype = FILTER_ITEM_POTION
 			return
 		}
 		if ( dbmode == DBMODE_REF_SPEC ) {
 			if ( dbspec == DBSPEC_TYPE ) {
-				return FILTER_ITEM_POTION
+				return 52000
 			}
 			if ( dbspec == DBSPEC_TYPE_MINOR ) {
-				return FILTER_NONE
+				return 99999
 			}
 			if ( dbspec == DBSPEC_VALUE_ORG ) {
 				return 150
 			}
 			if ( dbspec == DBSPEC_PARAM3_ORG ) {
@@ -96709,14 +98684,14 @@
 			reftype = FILTER_ITEM_SCROLL
 			return
 		}
 		if ( dbmode == DBMODE_REF_SPEC ) {
 			if ( dbspec == DBSPEC_TYPE ) {
-				return FILTER_ITEM_SCROLL
+				return 53000
 			}
 			if ( dbspec == DBSPEC_TYPE_MINOR ) {
-				return FILTER_NONE
+				return 99999
 			}
 			if ( dbspec == DBSPEC_VALUE_ORG ) {
 				return 4400
 			}
 			if ( dbspec == DBSPEC_PARAM3_ORG ) {
@@ -96779,14 +98754,14 @@
 			reftype = FILTER_ITEM_SCROLL
 			return
 		}
 		if ( dbmode == DBMODE_REF_SPEC ) {
 			if ( dbspec == DBSPEC_TYPE ) {
-				return FILTER_ITEM_SCROLL
+				return 53000
 			}
 			if ( dbspec == DBSPEC_TYPE_MINOR ) {
-				return FILTER_NONE
+				return 99999
 			}
 			if ( dbspec == DBSPEC_VALUE_ORG ) {
 				return 3500
 			}
 			if ( dbspec == DBSPEC_PARAM3_ORG ) {
@@ -96849,14 +98824,14 @@
 			reftype = FILTER_CONTAINER
 			return
 		}
 		if ( dbmode == DBMODE_REF_SPEC ) {
 			if ( dbspec == DBSPEC_TYPE ) {
-				return FILTER_CONTAINER
+				return 72000
 			}
 			if ( dbspec == DBSPEC_TYPE_MINOR ) {
-				return FILTER_NONE
+				return 99999
 			}
 			if ( dbspec == DBSPEC_VALUE_ORG ) {
 				return 380
 			}
 			if ( dbspec == DBSPEC_PARAM3_ORG ) {
@@ -96901,12 +98876,12 @@
 			inv(INV_ITEM_ID, ci) = ITEM_ID_PALMIA_PRIDE
 			inv(INV_ITEM_PIC, ci) = xy2pic(11, 12)
 			reftype = FILTER_ACCESSORY_RING
 			reftypeminor = FILTER_ACCESSORY_SMALL_RING
 			inv(INV_ITEM_NUM, ci) = 1
-			fixeditemenc = ENCHANT_RES_STEAL, 100, ENCHANT_ATTRIBUTE * EXT_ENCHANTMENT + SKILL_ATTR_LUC, 700, ENCHANT_ATTRIBUTE * EXT_ENCHANTMENT + SKILL_ATTR_SPD, 350, ENCHANT_ATTRIBUTE * EXT_ENCHANTMENT + SKILL_ATTR_CHA, 550, ENCHANT_RESISTANCE * EXT_ENCHANTMENT + SKILL_RES_DARKNESS, 200, ENCHANT_RESISTANCE * EXT_ENCHANTMENT + SKILL_RES_CHAOS, 200, 0
-			ibitmod ITEM_BIT_PRECIOUS, ci, 1
+			fixeditemenc = 41, 100, ENCHANT_ATTRIBUTE * EXT_ENCHANTMENT + SKILL_ATTR_LUC, 700, ENCHANT_ATTRIBUTE * EXT_ENCHANTMENT + SKILL_ATTR_SPD, 350, ENCHANT_ATTRIBUTE * EXT_ENCHANTMENT + SKILL_ATTR_CHA, 550, ENCHANT_RESISTANCE * EXT_ENCHANTMENT + SKILL_RES_DARKNESS, 200, ENCHANT_RESISTANCE * EXT_ENCHANTMENT + SKILL_RES_CHAOS, 200, 0
+			ibitmod ITEM_BIT_PRECIOUS, ci, TRUE
 			inv(INV_ITEM_IDENTIFY_LEVEL, ci) = 500
 			fixlv = FIX_QUALITY_UNIQUE
 			return
 		}
 		if ( dbmode == DBMODE_REF ) {
@@ -96915,14 +98890,14 @@
 			reftype = FILTER_ACCESSORY_RING
 			return
 		}
 		if ( dbmode == DBMODE_REF_SPEC ) {
 			if ( dbspec == DBSPEC_TYPE ) {
-				return FILTER_ACCESSORY_RING
+				return 32000
 			}
 			if ( dbspec == DBSPEC_TYPE_MINOR ) {
-				return FILTER_ACCESSORY_SMALL_RING
+				return 32001
 			}
 			if ( dbspec == DBSPEC_VALUE_ORG ) {
 				return 30000
 			}
 			if ( dbspec == DBSPEC_PARAM3_ORG ) {
@@ -96971,12 +98946,12 @@
 			inv(INV_ITEM_ID, ci) = ITEM_ID_RANKIS
 			inv(INV_ITEM_PIC, ci) = xy2pic(30, 12)
 			reftype = FILTER_WEAPON
 			reftypeminor = FILTER_WEAPON_POLEARM
 			inv(INV_ITEM_NUM, ci) = 1
-			fixeditemenc = ENCHANT_TIME_STOP, 400, ENCHANT_ELEMENTAL_DMG * EXT_ENCHANTMENT + SKILL_RES_NETHER, 400, ENCHANT_RESISTANCE * EXT_ENCHANTMENT + SKILL_RES_NETHER, 300, ENCHANT_RES_FEAR, 100, 0
-			ibitmod ITEM_BIT_PRECIOUS, ci, 1
+			fixeditemenc = 40, 400, ENCHANT_ELEMENTAL_DMG * EXT_ENCHANTMENT + SKILL_RES_NETHER, 400, ENCHANT_RESISTANCE * EXT_ENCHANTMENT + SKILL_RES_NETHER, 300, 26, 100, 0
+			ibitmod ITEM_BIT_PRECIOUS, ci, TRUE
 			inv(INV_ITEM_IDENTIFY_LEVEL, ci) = 500
 			fixlv = FIX_QUALITY_UNIQUE
 			return
 		}
 		if ( dbmode == DBMODE_REF ) {
@@ -96985,14 +98960,14 @@
 			reftype = FILTER_WEAPON
 			return
 		}
 		if ( dbmode == DBMODE_REF_SPEC ) {
 			if ( dbspec == DBSPEC_TYPE ) {
-				return FILTER_WEAPON
+				return 10000
 			}
 			if ( dbspec == DBSPEC_TYPE_MINOR ) {
-				return FILTER_WEAPON_POLEARM
+				return 10007
 			}
 			if ( dbspec == DBSPEC_VALUE_ORG ) {
 				return 30000
 			}
 			if ( dbspec == DBSPEC_PARAM3_ORG ) {
@@ -97042,12 +99017,12 @@
 			inv(INV_ITEM_ID, ci) = ITEM_ID_STAFF_OF_INSANITY
 			inv(INV_ITEM_PIC, ci) = xy2pic(29, 12)
 			reftype = FILTER_WEAPON
 			reftypeminor = FILTER_WEAPON_STAVE
 			inv(INV_ITEM_NUM, ci) = 1
-			fixeditemenc = ENCHANT_PROC * EXT_ENCHANTMENT + ENCHANT_PROC_NIGHTMARE, 400, ENCHANT_ELEMENTAL_DMG * EXT_ENCHANTMENT + SKILL_RES_MIND, 350, ENCHANT_ELEMENTAL_DMG * EXT_ENCHANTMENT + SKILL_RES_NERVE, 350, ENCHANT_ATTRIBUTE * EXT_ENCHANTMENT + SKILL_ATTR_MAG, 450, ENCHANT_ENHANCE_SPELL, 350, ENCHANT_SKILL * EXT_ENCHANTMENT + SKILL_NORMAL_CASTING, 420, 0
-			ibitmod ITEM_BIT_PRECIOUS, ci, 1
+			fixeditemenc = ENCHANT_PROC * EXT_ENCHANTMENT + ENCHANT_PROC_NIGHTMARE, 400, ENCHANT_ELEMENTAL_DMG * EXT_ENCHANTMENT + SKILL_RES_MIND, 350, ENCHANT_ELEMENTAL_DMG * EXT_ENCHANTMENT + SKILL_RES_NERVE, 350, ENCHANT_ATTRIBUTE * EXT_ENCHANTMENT + SKILL_ATTR_MAG, 450, 34, 350, ENCHANT_SKILL * EXT_ENCHANTMENT + SKILL_NORMAL_CASTING, 420, 0
+			ibitmod ITEM_BIT_PRECIOUS, ci, TRUE
 			inv(INV_ITEM_IDENTIFY_LEVEL, ci) = 500
 			fixlv = FIX_QUALITY_UNIQUE
 			return
 		}
 		if ( dbmode == DBMODE_REF ) {
@@ -97056,14 +99031,14 @@
 			reftype = FILTER_WEAPON
 			return
 		}
 		if ( dbmode == DBMODE_REF_SPEC ) {
 			if ( dbspec == DBSPEC_TYPE ) {
-				return FILTER_WEAPON
+				return 10000
 			}
 			if ( dbspec == DBSPEC_TYPE_MINOR ) {
-				return FILTER_WEAPON_STAVE
+				return 10006
 			}
 			if ( dbspec == DBSPEC_VALUE_ORG ) {
 				return 30000
 			}
 			if ( dbspec == DBSPEC_PARAM3_ORG ) {
@@ -97107,12 +99082,12 @@
 			inv(INV_ITEM_ID, ci) = ITEM_ID_RING_OF_STEEL_DRAGON
 			inv(INV_ITEM_PIC, ci) = xy2pic(11, 12)
 			reftype = FILTER_ACCESSORY_RING
 			reftypeminor = FILTER_ACCESSORY_SMALL_RING
 			inv(INV_ITEM_NUM, ci) = 1
-			fixeditemenc = ENCHANT_EAT_ROTTEN, 100, ENCHANT_RESISTANCE * EXT_ENCHANTMENT + SKILL_RES_MAGIC, 250, ENCHANT_RESISTANCE * EXT_ENCHANTMENT + SKILL_RES_LIGHTNING, 450, ENCHANT_ATTRIBUTE * EXT_ENCHANTMENT + SKILL_ATTR_STR, 450, ENCHANT_SKILL * EXT_ENCHANTMENT + SKILL_NORMAL_WEIGHT_LIFTING, 550, ENCHANT_ATTRIBUTE * EXT_ENCHANTMENT + SKILL_ATTR_SPD, -1400, ENCHANT_RES_FEAR, 100, ENCHANT_RES_PARALYZE, 100, 0
-			ibitmod ITEM_BIT_PRECIOUS, ci, 1
+			fixeditemenc = 42, 100, ENCHANT_RESISTANCE * EXT_ENCHANTMENT + SKILL_RES_MAGIC, 250, ENCHANT_RESISTANCE * EXT_ENCHANTMENT + SKILL_RES_LIGHTNING, 450, ENCHANT_ATTRIBUTE * EXT_ENCHANTMENT + SKILL_ATTR_STR, 450, ENCHANT_SKILL * EXT_ENCHANTMENT + SKILL_NORMAL_WEIGHT_LIFTING, 550, ENCHANT_ATTRIBUTE * EXT_ENCHANTMENT + SKILL_ATTR_SPD, -1400, 26, 100, 24, 100, 0
+			ibitmod ITEM_BIT_PRECIOUS, ci, TRUE
 			inv(INV_ITEM_IDENTIFY_LEVEL, ci) = 500
 			fixlv = FIX_QUALITY_UNIQUE
 			return
 		}
 		if ( dbmode == DBMODE_REF ) {
@@ -97121,14 +99096,14 @@
 			reftype = FILTER_ACCESSORY_RING
 			return
 		}
 		if ( dbmode == DBMODE_REF_SPEC ) {
 			if ( dbspec == DBSPEC_TYPE ) {
-				return FILTER_ACCESSORY_RING
+				return 32000
 			}
 			if ( dbspec == DBSPEC_TYPE_MINOR ) {
-				return FILTER_ACCESSORY_SMALL_RING
+				return 32001
 			}
 			if ( dbspec == DBSPEC_VALUE_ORG ) {
 				return 30000
 			}
 			if ( dbspec == DBSPEC_PARAM3_ORG ) {
@@ -97176,12 +99151,12 @@
 			inv(INV_ITEM_ID, ci) = ITEM_ID_BLOOD_MOON
 			inv(INV_ITEM_PIC, ci) = xy2pic(31, 12)
 			reftype = FILTER_WEAPON
 			reftypeminor = FILTER_WEAPON_CLUB
 			inv(INV_ITEM_NUM, ci) = 1
-			fixeditemenc = ENCHANT_ABSORB_MP, 300, ENCHANT_RESISTANCE * EXT_ENCHANTMENT + SKILL_RES_FIRE, 200, ENCHANT_RESISTANCE * EXT_ENCHANTMENT + SKILL_RES_NETHER, 250, ENCHANT_ELEMENTAL_DMG * EXT_ENCHANTMENT + SKILL_RES_FIRE, 350, ENCHANT_RES_CONFUSE, 100, ENCHANT_RES_FEAR, 100, 0
-			ibitmod ITEM_BIT_PRECIOUS, ci, 1
+			fixeditemenc = 38, 300, ENCHANT_RESISTANCE * EXT_ENCHANTMENT + SKILL_RES_FIRE, 200, ENCHANT_RESISTANCE * EXT_ENCHANTMENT + SKILL_RES_NETHER, 250, ENCHANT_ELEMENTAL_DMG * EXT_ENCHANTMENT + SKILL_RES_FIRE, 350, 25, 100, 26, 100, 0
+			ibitmod ITEM_BIT_PRECIOUS, ci, TRUE
 			inv(INV_ITEM_IDENTIFY_LEVEL, ci) = 500
 			fixlv = FIX_QUALITY_UNIQUE
 			return
 		}
 		if ( dbmode == DBMODE_REF ) {
@@ -97190,14 +99165,14 @@
 			reftype = FILTER_WEAPON
 			return
 		}
 		if ( dbmode == DBMODE_REF_SPEC ) {
 			if ( dbspec == DBSPEC_TYPE ) {
-				return FILTER_WEAPON
+				return 10000
 			}
 			if ( dbspec == DBSPEC_TYPE_MINOR ) {
-				return FILTER_WEAPON_CLUB
+				return 10004
 			}
 			if ( dbspec == DBSPEC_VALUE_ORG ) {
 				return 30000
 			}
 			if ( dbspec == DBSPEC_PARAM3_ORG ) {
@@ -97242,12 +99217,12 @@
 			inv(INV_ITEM_ID, ci) = ITEM_ID_GLOVES_OF_VESDA
 			inv(INV_ITEM_PIC, ci) = xy2pic(18, 12)
 			reftype = FILTER_GLOVES
 			reftypeminor = FILTER_GLOVES_LIGHT
 			inv(INV_ITEM_NUM, ci) = 1
-			fixeditemenc = ENCHANT_PIERCING_CHANCE, 150, ENCHANT_RESISTANCE * EXT_ENCHANTMENT + SKILL_RES_FIRE, 550, ENCHANT_ATTRIBUTE * EXT_ENCHANTMENT + SKILL_ATTR_STR, 400, ENCHANT_RESISTANCE * EXT_ENCHANTMENT + SKILL_RES_SOUND, 200, ENCHANT_SKILL * EXT_ENCHANTMENT + SKILL_NORMAL_DUAL_WIELD, 450, ENCHANT_ATTRIBUTE * EXT_ENCHANTMENT + SKILL_ATTR_LUC, 500, ENCHANT_RES_CONFUSE, 100, 0
-			ibitmod ITEM_BIT_PRECIOUS, ci, 1
+			fixeditemenc = 39, 150, ENCHANT_RESISTANCE * EXT_ENCHANTMENT + SKILL_RES_FIRE, 550, ENCHANT_ATTRIBUTE * EXT_ENCHANTMENT + SKILL_ATTR_STR, 400, ENCHANT_RESISTANCE * EXT_ENCHANTMENT + SKILL_RES_SOUND, 200, ENCHANT_SKILL * EXT_ENCHANTMENT + SKILL_NORMAL_DUAL_WIELD, 450, ENCHANT_ATTRIBUTE * EXT_ENCHANTMENT + SKILL_ATTR_LUC, 500, 25, 100, 0
+			ibitmod ITEM_BIT_PRECIOUS, ci, TRUE
 			inv(INV_ITEM_IDENTIFY_LEVEL, ci) = 500
 			fixlv = FIX_QUALITY_UNIQUE
 			return
 		}
 		if ( dbmode == DBMODE_REF ) {
@@ -97256,14 +99231,14 @@
 			reftype = FILTER_GLOVES
 			return
 		}
 		if ( dbmode == DBMODE_REF_SPEC ) {
 			if ( dbspec == DBSPEC_TYPE ) {
-				return FILTER_GLOVES
+				return 22000
 			}
 			if ( dbspec == DBSPEC_TYPE_MINOR ) {
-				return FILTER_GLOVES_LIGHT
+				return 22003
 			}
 			if ( dbspec == DBSPEC_VALUE_ORG ) {
 				return 40000
 			}
 			if ( dbspec == DBSPEC_PARAM3_ORG ) {
@@ -97320,14 +99295,14 @@
 			reftype = FILTER_ITEM_FOOD
 			return
 		}
 		if ( dbmode == DBMODE_REF_SPEC ) {
 			if ( dbspec == DBSPEC_TYPE ) {
-				return FILTER_ITEM_FOOD
+				return 57000
 			}
 			if ( dbspec == DBSPEC_TYPE_MINOR ) {
-				return FILTER_NONE
+				return 99999
 			}
 			if ( dbspec == DBSPEC_VALUE_ORG ) {
 				return 380
 			}
 			if ( dbspec == DBSPEC_PARAM3_ORG ) {
@@ -97392,14 +99367,14 @@
 			reftype = FILTER_ITEM_FOOD
 			return
 		}
 		if ( dbmode == DBMODE_REF_SPEC ) {
 			if ( dbspec == DBSPEC_TYPE ) {
-				return FILTER_ITEM_FOOD
+				return 57000
 			}
 			if ( dbspec == DBSPEC_TYPE_MINOR ) {
-				return FILTER_NONE
+				return 99999
 			}
 			if ( dbspec == DBSPEC_VALUE_ORG ) {
 				return 620
 			}
 			if ( dbspec == DBSPEC_PARAM3_ORG ) {
@@ -97464,14 +99439,14 @@
 			reftype = FILTER_ITEM_FOOD
 			return
 		}
 		if ( dbmode == DBMODE_REF_SPEC ) {
 			if ( dbspec == DBSPEC_TYPE ) {
-				return FILTER_ITEM_FOOD
+				return 57000
 			}
 			if ( dbspec == DBSPEC_TYPE_MINOR ) {
-				return FILTER_NONE
+				return 99999
 			}
 			if ( dbspec == DBSPEC_VALUE_ORG ) {
 				return 640
 			}
 			if ( dbspec == DBSPEC_PARAM3_ORG ) {
@@ -97536,14 +99511,14 @@
 			reftype = FILTER_ITEM_FOOD
 			return
 		}
 		if ( dbmode == DBMODE_REF_SPEC ) {
 			if ( dbspec == DBSPEC_TYPE ) {
-				return FILTER_ITEM_FOOD
+				return 57000
 			}
 			if ( dbspec == DBSPEC_TYPE_MINOR ) {
-				return FILTER_NONE
+				return 99999
 			}
 			if ( dbspec == DBSPEC_VALUE_ORG ) {
 				return 320
 			}
 			if ( dbspec == DBSPEC_PARAM3_ORG ) {
@@ -97608,14 +99583,14 @@
 			reftype = FILTER_ITEM_FOOD
 			return
 		}
 		if ( dbmode == DBMODE_REF_SPEC ) {
 			if ( dbspec == DBSPEC_TYPE ) {
-				return FILTER_ITEM_FOOD
+				return 57000
 			}
 			if ( dbspec == DBSPEC_TYPE_MINOR ) {
-				return FILTER_NONE
+				return 99999
 			}
 			if ( dbspec == DBSPEC_VALUE_ORG ) {
 				return 170
 			}
 			if ( dbspec == DBSPEC_PARAM3_ORG ) {
@@ -97680,14 +99655,14 @@
 			reftype = FILTER_ITEM_FOOD
 			return
 		}
 		if ( dbmode == DBMODE_REF_SPEC ) {
 			if ( dbspec == DBSPEC_TYPE ) {
-				return FILTER_ITEM_FOOD
+				return 57000
 			}
 			if ( dbspec == DBSPEC_TYPE_MINOR ) {
-				return FILTER_NONE
+				return 99999
 			}
 			if ( dbspec == DBSPEC_VALUE_ORG ) {
 				return 150
 			}
 			if ( dbspec == DBSPEC_PARAM3_ORG ) {
@@ -97752,14 +99727,14 @@
 			reftype = FILTER_ITEM_FOOD
 			return
 		}
 		if ( dbmode == DBMODE_REF_SPEC ) {
 			if ( dbspec == DBSPEC_TYPE ) {
-				return FILTER_ITEM_FOOD
+				return 57000
 			}
 			if ( dbspec == DBSPEC_TYPE_MINOR ) {
-				return FILTER_NONE
+				return 99999
 			}
 			if ( dbspec == DBSPEC_VALUE_ORG ) {
 				return 1500
 			}
 			if ( dbspec == DBSPEC_PARAM3_ORG ) {
@@ -97824,14 +99799,14 @@
 			reftype = FILTER_ITEM_FOOD
 			return
 		}
 		if ( dbmode == DBMODE_REF_SPEC ) {
 			if ( dbspec == DBSPEC_TYPE ) {
-				return FILTER_ITEM_FOOD
+				return 57000
 			}
 			if ( dbspec == DBSPEC_TYPE_MINOR ) {
-				return FILTER_NONE
+				return 99999
 			}
 			if ( dbspec == DBSPEC_VALUE_ORG ) {
 				return 700
 			}
 			if ( dbspec == DBSPEC_PARAM3_ORG ) {
@@ -97896,14 +99871,14 @@
 			reftype = FILTER_ITEM_FOOD
 			return
 		}
 		if ( dbmode == DBMODE_REF_SPEC ) {
 			if ( dbspec == DBSPEC_TYPE ) {
-				return FILTER_ITEM_FOOD
+				return 57000
 			}
 			if ( dbspec == DBSPEC_TYPE_MINOR ) {
-				return FILTER_NONE
+				return 99999
 			}
 			if ( dbspec == DBSPEC_VALUE_ORG ) {
 				return 1200
 			}
 			if ( dbspec == DBSPEC_PARAM3_ORG ) {
@@ -97968,14 +99943,14 @@
 			reftype = FILTER_ITEM_FOOD
 			return
 		}
 		if ( dbmode == DBMODE_REF_SPEC ) {
 			if ( dbspec == DBSPEC_TYPE ) {
-				return FILTER_ITEM_FOOD
+				return 57000
 			}
 			if ( dbspec == DBSPEC_TYPE_MINOR ) {
-				return FILTER_NONE
+				return 99999
 			}
 			if ( dbspec == DBSPEC_VALUE_ORG ) {
 				return 900
 			}
 			if ( dbspec == DBSPEC_PARAM3_ORG ) {
@@ -98038,14 +100013,14 @@
 			reftype = FILTER_ITEM_SCROLL
 			return
 		}
 		if ( dbmode == DBMODE_REF_SPEC ) {
 			if ( dbspec == DBSPEC_TYPE ) {
-				return FILTER_ITEM_SCROLL
+				return 53000
 			}
 			if ( dbspec == DBSPEC_TYPE_MINOR ) {
-				return FILTER_ITEM_DEED
+				return 53100
 			}
 			if ( dbspec == DBSPEC_VALUE_ORG ) {
 				return 50000
 			}
 			if ( dbspec == DBSPEC_PARAM3_ORG ) {
@@ -98107,14 +100082,14 @@
 			reftype = FILTER_FURNITURE
 			return
 		}
 		if ( dbmode == DBMODE_REF_SPEC ) {
 			if ( dbspec == DBSPEC_TYPE ) {
-				return FILTER_FURNITURE
+				return 60000
 			}
 			if ( dbspec == DBSPEC_TYPE_MINOR ) {
-				return FILTER_NONE
+				return 99999
 			}
 			if ( dbspec == DBSPEC_VALUE_ORG ) {
 				return 780
 			}
 			if ( dbspec == DBSPEC_PARAM3_ORG ) {
@@ -98173,14 +100148,14 @@
 			reftype = FILTER_ITEM_TOOL
 			return
 		}
 		if ( dbmode == DBMODE_REF_SPEC ) {
 			if ( dbspec == DBSPEC_TYPE ) {
-				return FILTER_ITEM_TOOL
+				return 59000
 			}
 			if ( dbspec == DBSPEC_TYPE_MINOR ) {
-				return FILTER_NONE
+				return 99999
 			}
 			if ( dbspec == DBSPEC_VALUE_ORG ) {
 				return 1200
 			}
 			if ( dbspec == DBSPEC_PARAM3_ORG ) {
@@ -98234,14 +100209,14 @@
 			reftype = FILTER_REMAINS
 			return
 		}
 		if ( dbmode == DBMODE_REF_SPEC ) {
 			if ( dbspec == DBSPEC_TYPE ) {
-				return FILTER_REMAINS
+				return 62000
 			}
 			if ( dbspec == DBSPEC_TYPE_MINOR ) {
-				return FILTER_NONE
+				return 99999
 			}
 			if ( dbspec == DBSPEC_VALUE_ORG ) {
 				return 100
 			}
 			if ( dbspec == DBSPEC_PARAM3_ORG ) {
@@ -98295,14 +100270,14 @@
 			reftype = FILTER_REMAINS
 			return
 		}
 		if ( dbmode == DBMODE_REF_SPEC ) {
 			if ( dbspec == DBSPEC_TYPE ) {
-				return FILTER_REMAINS
+				return 62000
 			}
 			if ( dbspec == DBSPEC_TYPE_MINOR ) {
-				return FILTER_NONE
+				return 99999
 			}
 			if ( dbspec == DBSPEC_VALUE_ORG ) {
 				return 100
 			}
 			if ( dbspec == DBSPEC_PARAM3_ORG ) {
@@ -98356,14 +100331,14 @@
 			reftype = FILTER_REMAINS
 			return
 		}
 		if ( dbmode == DBMODE_REF_SPEC ) {
 			if ( dbspec == DBSPEC_TYPE ) {
-				return FILTER_REMAINS
+				return 62000
 			}
 			if ( dbspec == DBSPEC_TYPE_MINOR ) {
-				return FILTER_NONE
+				return 99999
 			}
 			if ( dbspec == DBSPEC_VALUE_ORG ) {
 				return 100
 			}
 			if ( dbspec == DBSPEC_PARAM3_ORG ) {
@@ -98417,14 +100392,14 @@
 			reftype = FILTER_REMAINS
 			return
 		}
 		if ( dbmode == DBMODE_REF_SPEC ) {
 			if ( dbspec == DBSPEC_TYPE ) {
-				return FILTER_REMAINS
+				return 62000
 			}
 			if ( dbspec == DBSPEC_TYPE_MINOR ) {
-				return FILTER_NONE
+				return 99999
 			}
 			if ( dbspec == DBSPEC_VALUE_ORG ) {
 				return 100
 			}
 			if ( dbspec == DBSPEC_PARAM3_ORG ) {
@@ -98478,14 +100453,14 @@
 			reftype = FILTER_REMAINS
 			return
 		}
 		if ( dbmode == DBMODE_REF_SPEC ) {
 			if ( dbspec == DBSPEC_TYPE ) {
-				return FILTER_REMAINS
+				return 62000
 			}
 			if ( dbspec == DBSPEC_TYPE_MINOR ) {
-				return FILTER_NONE
+				return 99999
 			}
 			if ( dbspec == DBSPEC_VALUE_ORG ) {
 				return 100
 			}
 			if ( dbspec == DBSPEC_PARAM3_ORG ) {
@@ -98539,14 +100514,14 @@
 			reftype = FILTER_FURNITURE
 			return
 		}
 		if ( dbmode == DBMODE_REF_SPEC ) {
 			if ( dbspec == DBSPEC_TYPE ) {
-				return FILTER_FURNITURE
+				return 60000
 			}
 			if ( dbspec == DBSPEC_TYPE_MINOR ) {
-				return FILTER_NONE
+				return 99999
 			}
 			if ( dbspec == DBSPEC_VALUE_ORG ) {
 				return 3200
 			}
 			if ( dbspec == DBSPEC_PARAM3_ORG ) {
@@ -98600,14 +100575,14 @@
 			reftype = FILTER_FURNITURE
 			return
 		}
 		if ( dbmode == DBMODE_REF_SPEC ) {
 			if ( dbspec == DBSPEC_TYPE ) {
-				return FILTER_FURNITURE
+				return 60000
 			}
 			if ( dbspec == DBSPEC_TYPE_MINOR ) {
-				return FILTER_NONE
+				return 99999
 			}
 			if ( dbspec == DBSPEC_VALUE_ORG ) {
 				return 1200
 			}
 			if ( dbspec == DBSPEC_PARAM3_ORG ) {
@@ -98662,14 +100637,14 @@
 			reftype = FILTER_FURNITURE
 			return
 		}
 		if ( dbmode == DBMODE_REF_SPEC ) {
 			if ( dbspec == DBSPEC_TYPE ) {
-				return FILTER_FURNITURE
+				return 60000
 			}
 			if ( dbspec == DBSPEC_TYPE_MINOR ) {
-				return FILTER_NONE
+				return 99999
 			}
 			if ( dbspec == DBSPEC_VALUE_ORG ) {
 				return 6800
 			}
 			if ( dbspec == DBSPEC_PARAM3_ORG ) {
@@ -98724,14 +100699,14 @@
 			reftype = FILTER_CARGO_FOOD
 			return
 		}
 		if ( dbmode == DBMODE_REF_SPEC ) {
 			if ( dbspec == DBSPEC_TYPE ) {
-				return FILTER_CARGO_FOOD
+				return 91000
 			}
 			if ( dbspec == DBSPEC_TYPE_MINOR ) {
-				return FILTER_NONE
+				return 99999
 			}
 			if ( dbspec == DBSPEC_VALUE_ORG ) {
 				return 40
 			}
 			if ( dbspec == DBSPEC_PARAM3_ORG ) {
@@ -98789,14 +100764,14 @@
 			reftype = FILTER_FURNITURE
 			return
 		}
 		if ( dbmode == DBMODE_REF_SPEC ) {
 			if ( dbspec == DBSPEC_TYPE ) {
-				return FILTER_FURNITURE
+				return 60000
 			}
 			if ( dbspec == DBSPEC_TYPE_MINOR ) {
-				return FILTER_NONE
+				return 99999
 			}
 			if ( dbspec == DBSPEC_VALUE_ORG ) {
 				return 1200
 			}
 			if ( dbspec == DBSPEC_PARAM3_ORG ) {
@@ -98850,14 +100825,14 @@
 			reftype = FILTER_FURNITURE
 			return
 		}
 		if ( dbmode == DBMODE_REF_SPEC ) {
 			if ( dbspec == DBSPEC_TYPE ) {
-				return FILTER_FURNITURE
+				return 60000
 			}
 			if ( dbspec == DBSPEC_TYPE_MINOR ) {
-				return FILTER_NONE
+				return 99999
 			}
 			if ( dbspec == DBSPEC_VALUE_ORG ) {
 				return 4500
 			}
 			if ( dbspec == DBSPEC_PARAM3_ORG ) {
@@ -98912,14 +100887,14 @@
 			reftype = FILTER_JUNK
 			return
 		}
 		if ( dbmode == DBMODE_REF_SPEC ) {
 			if ( dbspec == DBSPEC_TYPE ) {
-				return FILTER_JUNK
+				return 64000
 			}
 			if ( dbspec == DBSPEC_TYPE_MINOR ) {
-				return FILTER_NONE
+				return 99999
 			}
 			if ( dbspec == DBSPEC_VALUE_ORG ) {
 				return 250
 			}
 			if ( dbspec == DBSPEC_PARAM3_ORG ) {
@@ -98973,14 +100948,14 @@
 			reftype = FILTER_FURNITURE
 			return
 		}
 		if ( dbmode == DBMODE_REF_SPEC ) {
 			if ( dbspec == DBSPEC_TYPE ) {
-				return FILTER_FURNITURE
+				return 60000
 			}
 			if ( dbspec == DBSPEC_TYPE_MINOR ) {
-				return FILTER_NONE
+				return 99999
 			}
 			if ( dbspec == DBSPEC_VALUE_ORG ) {
 				return 1500
 			}
 			if ( dbspec == DBSPEC_PARAM3_ORG ) {
@@ -99037,14 +101012,14 @@
 			reftype = FILTER_FURNITURE
 			return
 		}
 		if ( dbmode == DBMODE_REF_SPEC ) {
 			if ( dbspec == DBSPEC_TYPE ) {
-				return FILTER_FURNITURE
+				return 60000
 			}
 			if ( dbspec == DBSPEC_TYPE_MINOR ) {
-				return FILTER_FURNITURE_INSTRUMENT
+				return 60005
 			}
 			if ( dbspec == DBSPEC_VALUE_ORG ) {
 				return 4600
 			}
 			if ( dbspec == DBSPEC_PARAM3_ORG ) {
@@ -99099,14 +101074,14 @@
 			reftype = FILTER_FURNITURE
 			return
 		}
 		if ( dbmode == DBMODE_REF_SPEC ) {
 			if ( dbspec == DBSPEC_TYPE ) {
-				return FILTER_FURNITURE
+				return 60000
 			}
 			if ( dbspec == DBSPEC_TYPE_MINOR ) {
-				return FILTER_NONE
+				return 99999
 			}
 			if ( dbspec == DBSPEC_VALUE_ORG ) {
 				return 600
 			}
 			if ( dbspec == DBSPEC_PARAM3_ORG ) {
@@ -99160,14 +101135,14 @@
 			reftype = FILTER_FURNITURE
 			return
 		}
 		if ( dbmode == DBMODE_REF_SPEC ) {
 			if ( dbspec == DBSPEC_TYPE ) {
-				return FILTER_FURNITURE
+				return 60000
 			}
 			if ( dbspec == DBSPEC_TYPE_MINOR ) {
-				return FILTER_NONE
+				return 99999
 			}
 			if ( dbspec == DBSPEC_VALUE_ORG ) {
 				return 1400
 			}
 			if ( dbspec == DBSPEC_PARAM3_ORG ) {
@@ -99222,14 +101197,14 @@
 			reftype = FILTER_FURNITURE
 			return
 		}
 		if ( dbmode == DBMODE_REF_SPEC ) {
 			if ( dbspec == DBSPEC_TYPE ) {
-				return FILTER_FURNITURE
+				return 60000
 			}
 			if ( dbspec == DBSPEC_TYPE_MINOR ) {
-				return FILTER_FURNITURE_BED
+				return 60004
 			}
 			if ( dbspec == DBSPEC_VALUE_ORG ) {
 				return 2800
 			}
 			if ( dbspec == DBSPEC_PARAM3_ORG ) {
@@ -99286,14 +101261,14 @@
 			reftype = FILTER_FURNITURE
 			return
 		}
 		if ( dbmode == DBMODE_REF_SPEC ) {
 			if ( dbspec == DBSPEC_TYPE ) {
-				return FILTER_FURNITURE
+				return 60000
 			}
 			if ( dbspec == DBSPEC_TYPE_MINOR ) {
-				return FILTER_NONE
+				return 99999
 			}
 			if ( dbspec == DBSPEC_VALUE_ORG ) {
 				return 1500
 			}
 			if ( dbspec == DBSPEC_PARAM3_ORG ) {
@@ -99347,14 +101322,14 @@
 			reftype = FILTER_FURNITURE
 			return
 		}
 		if ( dbmode == DBMODE_REF_SPEC ) {
 			if ( dbspec == DBSPEC_TYPE ) {
-				return FILTER_FURNITURE
+				return 60000
 			}
 			if ( dbspec == DBSPEC_TYPE_MINOR ) {
-				return FILTER_NONE
+				return 99999
 			}
 			if ( dbspec == DBSPEC_VALUE_ORG ) {
 				return 2800
 			}
 			if ( dbspec == DBSPEC_PARAM3_ORG ) {
@@ -99409,14 +101384,14 @@
 			reftype = FILTER_FURNITURE
 			return
 		}
 		if ( dbmode == DBMODE_REF_SPEC ) {
 			if ( dbspec == DBSPEC_TYPE ) {
-				return FILTER_FURNITURE
+				return 60000
 			}
 			if ( dbspec == DBSPEC_TYPE_MINOR ) {
-				return FILTER_NONE
+				return 99999
 			}
 			if ( dbspec == DBSPEC_VALUE_ORG ) {
 				return 2200
 			}
 			if ( dbspec == DBSPEC_PARAM3_ORG ) {
@@ -99470,14 +101445,14 @@
 			reftype = FILTER_FURNITURE
 			return
 		}
 		if ( dbmode == DBMODE_REF_SPEC ) {
 			if ( dbspec == DBSPEC_TYPE ) {
-				return FILTER_FURNITURE
+				return 60000
 			}
 			if ( dbspec == DBSPEC_TYPE_MINOR ) {
-				return FILTER_NONE
+				return 99999
 			}
 			if ( dbspec == DBSPEC_VALUE_ORG ) {
 				return 1480
 			}
 			if ( dbspec == DBSPEC_PARAM3_ORG ) {
@@ -99531,14 +101506,14 @@
 			reftype = FILTER_FURNITURE
 			return
 		}
 		if ( dbmode == DBMODE_REF_SPEC ) {
 			if ( dbspec == DBSPEC_TYPE ) {
-				return FILTER_FURNITURE
+				return 60000
 			}
 			if ( dbspec == DBSPEC_TYPE_MINOR ) {
-				return FILTER_NONE
+				return 99999
 			}
 			if ( dbspec == DBSPEC_VALUE_ORG ) {
 				return 900
 			}
 			if ( dbspec == DBSPEC_PARAM3_ORG ) {
@@ -99593,14 +101568,14 @@
 			reftype = FILTER_FURNITURE
 			return
 		}
 		if ( dbmode == DBMODE_REF_SPEC ) {
 			if ( dbspec == DBSPEC_TYPE ) {
-				return FILTER_FURNITURE
+				return 60000
 			}
 			if ( dbspec == DBSPEC_TYPE_MINOR ) {
-				return FILTER_FURNITURE_BED
+				return 60004
 			}
 			if ( dbspec == DBSPEC_VALUE_ORG ) {
 				return 880
 			}
 			if ( dbspec == DBSPEC_PARAM3_ORG ) {
@@ -99658,14 +101633,14 @@
 			reftype = FILTER_FURNITURE
 			return
 		}
 		if ( dbmode == DBMODE_REF_SPEC ) {
 			if ( dbspec == DBSPEC_TYPE ) {
-				return FILTER_FURNITURE
+				return 60000
 			}
 			if ( dbspec == DBSPEC_TYPE_MINOR ) {
-				return FILTER_NONE
+				return 99999
 			}
 			if ( dbspec == DBSPEC_VALUE_ORG ) {
 				return 1020
 			}
 			if ( dbspec == DBSPEC_PARAM3_ORG ) {
@@ -99719,14 +101694,14 @@
 			reftype = FILTER_FURNITURE
 			return
 		}
 		if ( dbmode == DBMODE_REF_SPEC ) {
 			if ( dbspec == DBSPEC_TYPE ) {
-				return FILTER_FURNITURE
+				return 60000
 			}
 			if ( dbspec == DBSPEC_TYPE_MINOR ) {
-				return FILTER_NONE
+				return 99999
 			}
 			if ( dbspec == DBSPEC_VALUE_ORG ) {
 				return 890
 			}
 			if ( dbspec == DBSPEC_PARAM3_ORG ) {
@@ -99780,14 +101755,14 @@
 			reftype = FILTER_FURNITURE
 			return
 		}
 		if ( dbmode == DBMODE_REF_SPEC ) {
 			if ( dbspec == DBSPEC_TYPE ) {
-				return FILTER_FURNITURE
+				return 60000
 			}
 			if ( dbspec == DBSPEC_TYPE_MINOR ) {
-				return FILTER_NONE
+				return 99999
 			}
 			if ( dbspec == DBSPEC_VALUE_ORG ) {
 				return 3200
 			}
 			if ( dbspec == DBSPEC_PARAM3_ORG ) {
@@ -99841,14 +101816,14 @@
 			reftype = FILTER_FURNITURE
 			return
 		}
 		if ( dbmode == DBMODE_REF_SPEC ) {
 			if ( dbspec == DBSPEC_TYPE ) {
-				return FILTER_FURNITURE
+				return 60000
 			}
 			if ( dbspec == DBSPEC_TYPE_MINOR ) {
-				return FILTER_NONE
+				return 99999
 			}
 			if ( dbspec == DBSPEC_VALUE_ORG ) {
 				return 1800
 			}
 			if ( dbspec == DBSPEC_PARAM3_ORG ) {
@@ -99905,14 +101880,14 @@
 			reftype = FILTER_FURNITURE
 			return
 		}
 		if ( dbmode == DBMODE_REF_SPEC ) {
 			if ( dbspec == DBSPEC_TYPE ) {
-				return FILTER_FURNITURE
+				return 60000
 			}
 			if ( dbspec == DBSPEC_TYPE_MINOR ) {
-				return FILTER_NONE
+				return 99999
 			}
 			if ( dbspec == DBSPEC_VALUE_ORG ) {
 				return 2000
 			}
 			if ( dbspec == DBSPEC_PARAM3_ORG ) {
@@ -99969,14 +101944,14 @@
 			reftype = FILTER_FURNITURE
 			return
 		}
 		if ( dbmode == DBMODE_REF_SPEC ) {
 			if ( dbspec == DBSPEC_TYPE ) {
-				return FILTER_FURNITURE
+				return 60000
 			}
 			if ( dbspec == DBSPEC_TYPE_MINOR ) {
-				return FILTER_NONE
+				return 99999
 			}
 			if ( dbspec == DBSPEC_VALUE_ORG ) {
 				return 2800
 			}
 			if ( dbspec == DBSPEC_PARAM3_ORG ) {
@@ -100033,14 +102008,14 @@
 			reftype = FILTER_FURNITURE
 			return
 		}
 		if ( dbmode == DBMODE_REF_SPEC ) {
 			if ( dbspec == DBSPEC_TYPE ) {
-				return FILTER_FURNITURE
+				return 60000
 			}
 			if ( dbspec == DBSPEC_TYPE_MINOR ) {
-				return FILTER_NONE
+				return 99999
 			}
 			if ( dbspec == DBSPEC_VALUE_ORG ) {
 				return 2800
 			}
 			if ( dbspec == DBSPEC_PARAM3_ORG ) {
@@ -100097,14 +102072,14 @@
 			reftype = FILTER_FURNITURE
 			return
 		}
 		if ( dbmode == DBMODE_REF_SPEC ) {
 			if ( dbspec == DBSPEC_TYPE ) {
-				return FILTER_FURNITURE
+				return 60000
 			}
 			if ( dbspec == DBSPEC_TYPE_MINOR ) {
-				return FILTER_NONE
+				return 99999
 			}
 			if ( dbspec == DBSPEC_VALUE_ORG ) {
 				return 4800
 			}
 			if ( dbspec == DBSPEC_PARAM3_ORG ) {
@@ -100159,14 +102134,14 @@
 			reftype = FILTER_FURNITURE
 			return
 		}
 		if ( dbmode == DBMODE_REF_SPEC ) {
 			if ( dbspec == DBSPEC_TYPE ) {
-				return FILTER_FURNITURE
+				return 60000
 			}
 			if ( dbspec == DBSPEC_TYPE_MINOR ) {
-				return FILTER_FURNITURE_BED
+				return 60004
 			}
 			if ( dbspec == DBSPEC_VALUE_ORG ) {
 				return 1500
 			}
 			if ( dbspec == DBSPEC_PARAM3_ORG ) {
@@ -100224,14 +102199,14 @@
 			reftype = FILTER_FURNITURE
 			return
 		}
 		if ( dbmode == DBMODE_REF_SPEC ) {
 			if ( dbspec == DBSPEC_TYPE ) {
-				return FILTER_FURNITURE
+				return 60000
 			}
 			if ( dbspec == DBSPEC_TYPE_MINOR ) {
-				return FILTER_NONE
+				return 99999
 			}
 			if ( dbspec == DBSPEC_VALUE_ORG ) {
 				return 2400
 			}
 			if ( dbspec == DBSPEC_PARAM3_ORG ) {
@@ -100285,14 +102260,14 @@
 			reftype = FILTER_FURNITURE
 			return
 		}
 		if ( dbmode == DBMODE_REF_SPEC ) {
 			if ( dbspec == DBSPEC_TYPE ) {
-				return FILTER_FURNITURE
+				return 60000
 			}
 			if ( dbspec == DBSPEC_TYPE_MINOR ) {
-				return FILTER_NONE
+				return 99999
 			}
 			if ( dbspec == DBSPEC_VALUE_ORG ) {
 				return 1200
 			}
 			if ( dbspec == DBSPEC_PARAM3_ORG ) {
@@ -100347,14 +102322,14 @@
 			reftype = FILTER_FURNITURE
 			return
 		}
 		if ( dbmode == DBMODE_REF_SPEC ) {
 			if ( dbspec == DBSPEC_TYPE ) {
-				return FILTER_FURNITURE
+				return 60000
 			}
 			if ( dbspec == DBSPEC_TYPE_MINOR ) {
-				return FILTER_FURNITURE_BED
+				return 60004
 			}
 			if ( dbspec == DBSPEC_VALUE_ORG ) {
 				return 2200
 			}
 			if ( dbspec == DBSPEC_PARAM3_ORG ) {
@@ -100413,14 +102388,14 @@
 			reftype = FILTER_FURNITURE
 			return
 		}
 		if ( dbmode == DBMODE_REF_SPEC ) {
 			if ( dbspec == DBSPEC_TYPE ) {
-				return FILTER_FURNITURE
+				return 60000
 			}
 			if ( dbspec == DBSPEC_TYPE_MINOR ) {
-				return FILTER_NONE
+				return 99999
 			}
 			if ( dbspec == DBSPEC_VALUE_ORG ) {
 				return 5200
 			}
 			if ( dbspec == DBSPEC_PARAM3_ORG ) {
@@ -100475,14 +102450,14 @@
 			reftype = FILTER_FURNITURE
 			return
 		}
 		if ( dbmode == DBMODE_REF_SPEC ) {
 			if ( dbspec == DBSPEC_TYPE ) {
-				return FILTER_FURNITURE
+				return 60000
 			}
 			if ( dbspec == DBSPEC_TYPE_MINOR ) {
-				return FILTER_FURNITURE_BED
+				return 60004
 			}
 			if ( dbspec == DBSPEC_VALUE_ORG ) {
 				return 2400
 			}
 			if ( dbspec == DBSPEC_PARAM3_ORG ) {
@@ -100540,14 +102515,14 @@
 			reftype = FILTER_FURNITURE
 			return
 		}
 		if ( dbmode == DBMODE_REF_SPEC ) {
 			if ( dbspec == DBSPEC_TYPE ) {
-				return FILTER_FURNITURE
+				return 60000
 			}
 			if ( dbspec == DBSPEC_TYPE_MINOR ) {
-				return FILTER_FURNITURE_BED
+				return 60004
 			}
 			if ( dbspec == DBSPEC_VALUE_ORG ) {
 				return 1200
 			}
 			if ( dbspec == DBSPEC_PARAM3_ORG ) {
@@ -100605,14 +102580,14 @@
 			reftype = FILTER_FURNITURE
 			return
 		}
 		if ( dbmode == DBMODE_REF_SPEC ) {
 			if ( dbspec == DBSPEC_TYPE ) {
-				return FILTER_FURNITURE
+				return 60000
 			}
 			if ( dbspec == DBSPEC_TYPE_MINOR ) {
-				return FILTER_FURNITURE_BED
+				return 60004
 			}
 			if ( dbspec == DBSPEC_VALUE_ORG ) {
 				return 3800
 			}
 			if ( dbspec == DBSPEC_PARAM3_ORG ) {
@@ -100669,14 +102644,14 @@
 			reftype = FILTER_FURNITURE
 			return
 		}
 		if ( dbmode == DBMODE_REF_SPEC ) {
 			if ( dbspec == DBSPEC_TYPE ) {
-				return FILTER_FURNITURE
+				return 60000
 			}
 			if ( dbspec == DBSPEC_TYPE_MINOR ) {
-				return FILTER_NONE
+				return 99999
 			}
 			if ( dbspec == DBSPEC_VALUE_ORG ) {
 				return 1500
 			}
 			if ( dbspec == DBSPEC_PARAM3_ORG ) {
@@ -100730,14 +102705,14 @@
 			reftype = FILTER_JUNK
 			return
 		}
 		if ( dbmode == DBMODE_REF_SPEC ) {
 			if ( dbspec == DBSPEC_TYPE ) {
-				return FILTER_JUNK
+				return 64000
 			}
 			if ( dbspec == DBSPEC_TYPE_MINOR ) {
-				return FILTER_NONE
+				return 99999
 			}
 			if ( dbspec == DBSPEC_VALUE_ORG ) {
 				return 1240
 			}
 			if ( dbspec == DBSPEC_PARAM3_ORG ) {
@@ -100791,14 +102766,14 @@
 			reftype = FILTER_FURNITURE
 			return
 		}
 		if ( dbmode == DBMODE_REF_SPEC ) {
 			if ( dbspec == DBSPEC_TYPE ) {
-				return FILTER_FURNITURE
+				return 60000
 			}
 			if ( dbspec == DBSPEC_TYPE_MINOR ) {
-				return FILTER_NONE
+				return 99999
 			}
 			if ( dbspec == DBSPEC_VALUE_ORG ) {
 				return 1900
 			}
 			if ( dbspec == DBSPEC_PARAM3_ORG ) {
@@ -100853,14 +102828,14 @@
 			reftype = FILTER_FURNITURE
 			return
 		}
 		if ( dbmode == DBMODE_REF_SPEC ) {
 			if ( dbspec == DBSPEC_TYPE ) {
-				return FILTER_FURNITURE
+				return 60000
 			}
 			if ( dbspec == DBSPEC_TYPE_MINOR ) {
-				return FILTER_NONE
+				return 99999
 			}
 			if ( dbspec == DBSPEC_VALUE_ORG ) {
 				return 5500
 			}
 			if ( dbspec == DBSPEC_PARAM3_ORG ) {
@@ -100914,14 +102889,14 @@
 			reftype = FILTER_FURNITURE
 			return
 		}
 		if ( dbmode == DBMODE_REF_SPEC ) {
 			if ( dbspec == DBSPEC_TYPE ) {
-				return FILTER_FURNITURE
+				return 60000
 			}
 			if ( dbspec == DBSPEC_TYPE_MINOR ) {
-				return FILTER_NONE
+				return 99999
 			}
 			if ( dbspec == DBSPEC_VALUE_ORG ) {
 				return 2000
 			}
 			if ( dbspec == DBSPEC_PARAM3_ORG ) {
@@ -100976,14 +102951,14 @@
 			reftype = FILTER_FURNITURE
 			return
 		}
 		if ( dbmode == DBMODE_REF_SPEC ) {
 			if ( dbspec == DBSPEC_TYPE ) {
-				return FILTER_FURNITURE
+				return 60000
 			}
 			if ( dbspec == DBSPEC_TYPE_MINOR ) {
-				return FILTER_FURNITURE_BED
+				return 60004
 			}
 			if ( dbspec == DBSPEC_VALUE_ORG ) {
 				return 4500
 			}
 			if ( dbspec == DBSPEC_PARAM3_ORG ) {
@@ -101040,14 +103015,14 @@
 			reftype = FILTER_FURNITURE
 			return
 		}
 		if ( dbmode == DBMODE_REF_SPEC ) {
 			if ( dbspec == DBSPEC_TYPE ) {
-				return FILTER_FURNITURE
+				return 60000
 			}
 			if ( dbspec == DBSPEC_TYPE_MINOR ) {
-				return FILTER_NONE
+				return 99999
 			}
 			if ( dbspec == DBSPEC_VALUE_ORG ) {
 				return 2400
 			}
 			if ( dbspec == DBSPEC_PARAM3_ORG ) {
@@ -101102,14 +103077,14 @@
 			reftype = FILTER_FURNITURE
 			return
 		}
 		if ( dbmode == DBMODE_REF_SPEC ) {
 			if ( dbspec == DBSPEC_TYPE ) {
-				return FILTER_FURNITURE
+				return 60000
 			}
 			if ( dbspec == DBSPEC_TYPE_MINOR ) {
-				return FILTER_NONE
+				return 99999
 			}
 			if ( dbspec == DBSPEC_VALUE_ORG ) {
 				return 890
 			}
 			if ( dbspec == DBSPEC_PARAM3_ORG ) {
@@ -101163,14 +103138,14 @@
 			reftype = FILTER_FURNITURE
 			return
 		}
 		if ( dbmode == DBMODE_REF_SPEC ) {
 			if ( dbspec == DBSPEC_TYPE ) {
-				return FILTER_FURNITURE
+				return 60000
 			}
 			if ( dbspec == DBSPEC_TYPE_MINOR ) {
-				return FILTER_NONE
+				return 99999
 			}
 			if ( dbspec == DBSPEC_VALUE_ORG ) {
 				return 320
 			}
 			if ( dbspec == DBSPEC_PARAM3_ORG ) {
@@ -101224,14 +103199,14 @@
 			reftype = FILTER_FURNITURE
 			return
 		}
 		if ( dbmode == DBMODE_REF_SPEC ) {
 			if ( dbspec == DBSPEC_TYPE ) {
-				return FILTER_FURNITURE
+				return 60000
 			}
 			if ( dbspec == DBSPEC_TYPE_MINOR ) {
-				return FILTER_NONE
+				return 99999
 			}
 			if ( dbspec == DBSPEC_VALUE_ORG ) {
 				return 2000
 			}
 			if ( dbspec == DBSPEC_PARAM3_ORG ) {
@@ -101285,14 +103260,14 @@
 			reftype = FILTER_FURNITURE
 			return
 		}
 		if ( dbmode == DBMODE_REF_SPEC ) {
 			if ( dbspec == DBSPEC_TYPE ) {
-				return FILTER_FURNITURE
+				return 60000
 			}
 			if ( dbspec == DBSPEC_TYPE_MINOR ) {
-				return FILTER_NONE
+				return 99999
 			}
 			if ( dbspec == DBSPEC_VALUE_ORG ) {
 				return 1800
 			}
 			if ( dbspec == DBSPEC_PARAM3_ORG ) {
@@ -101346,14 +103321,14 @@
 			reftype = FILTER_FURNITURE
 			return
 		}
 		if ( dbmode == DBMODE_REF_SPEC ) {
 			if ( dbspec == DBSPEC_TYPE ) {
-				return FILTER_FURNITURE
+				return 60000
 			}
 			if ( dbspec == DBSPEC_TYPE_MINOR ) {
-				return FILTER_NONE
+				return 99999
 			}
 			if ( dbspec == DBSPEC_VALUE_ORG ) {
 				return 1500
 			}
 			if ( dbspec == DBSPEC_PARAM3_ORG ) {
@@ -101393,30 +103368,30 @@
 		}
 		if ( dbmode == DBMODE_SET ) {
 			inv(INV_ITEM_ID, ci) = ITEM_ID_ROD_WISHING
 			inv(INV_ITEM_PIC, ci) = xy2pic(9, 14)
 			reftype = FILTER_ITEM_ROD
-			reftypeminor = FILTER_ITEM_ROD_UTILITY
+			reftypeminor = FILTER_ITEM_ROD
 			inv(INV_ITEM_NUM, ci) = 1
 			fixeditemenc = 0
 			inv(INV_ITEM_IDENTIFY_LEVEL, ci) = 0
-			inv(INV_ITEM_CHARGE, ci) = 1 + rnd(1) - rnd(1)
-			ibitmod ITEM_BIT_CHARGE_ITEM, ci, 1
+			inv((9 /*!!!@[INV_ITEM_AMMO @@@ INV_ITEM_CHARGE @@@ INV_ITEM_CLIENT @@@ INV_ITEM_FILE @@@ INV_ITEM_NEXT_PERIOD]@!!! */), ci) = 1 + rnd(1) - rnd(1)
+			ibitmod ITEM_BIT_CHARGE_ITEM, ci, TRUE
 			return
 		}
 		if ( dbmode == DBMODE_REF ) {
 			ichargelevel = 1
 			infilterref = "/noshop/"
 			reftype = FILTER_ITEM_ROD
 			return
 		}
 		if ( dbmode == DBMODE_REF_SPEC ) {
 			if ( dbspec == DBSPEC_TYPE ) {
-				return FILTER_ITEM_ROD
+				return 56000
 			}
 			if ( dbspec == DBSPEC_TYPE_MINOR ) {
-				return FILTER_ITEM_ROD_UTILITY
+				return 56000
 			}
 			if ( dbspec == DBSPEC_VALUE_ORG ) {
 				return 300000
 			}
 			if ( dbspec == DBSPEC_PARAM3_ORG ) {
@@ -101476,26 +103451,26 @@
 			reftype = FILTER_ITEM_SPELLBOOK
 			reftypeminor = FILTER_NOTHING
 			inv(INV_ITEM_NUM, ci) = 1
 			fixeditemenc = 0
 			inv(INV_ITEM_IDENTIFY_LEVEL, ci) = 0
-			inv(INV_ITEM_CHARGE, ci) = 1 + rnd(1) - rnd(1)
-			ibitmod ITEM_BIT_CHARGE_ITEM, ci, 1
+			inv((9 /*!!!@[INV_ITEM_AMMO @@@ INV_ITEM_CHARGE @@@ INV_ITEM_CLIENT @@@ INV_ITEM_FILE @@@ INV_ITEM_NEXT_PERIOD]@!!! */), ci) = 1 + rnd(1) - rnd(1)
+			ibitmod ITEM_BIT_CHARGE_ITEM, ci, TRUE
 			return
 		}
 		if ( dbmode == DBMODE_REF ) {
 			ichargelevel = 1
 			infilterref = ""
 			reftype = FILTER_ITEM_SPELLBOOK
 			return
 		}
 		if ( dbmode == DBMODE_REF_SPEC ) {
 			if ( dbspec == DBSPEC_TYPE ) {
-				return FILTER_ITEM_SPELLBOOK
+				return 54000
 			}
 			if ( dbspec == DBSPEC_TYPE_MINOR ) {
-				return FILTER_NONE
+				return 99999
 			}
 			if ( dbspec == DBSPEC_VALUE_ORG ) {
 				return 40000
 			}
 			if ( dbspec == DBSPEC_PARAM3_ORG ) {
@@ -101558,14 +103533,14 @@
 			reftype = FILTER_ITEM_SCROLL
 			return
 		}
 		if ( dbmode == DBMODE_REF_SPEC ) {
 			if ( dbspec == DBSPEC_TYPE ) {
-				return FILTER_ITEM_SCROLL
+				return 53000
 			}
 			if ( dbspec == DBSPEC_TYPE_MINOR ) {
-				return FILTER_NONE
+				return 99999
 			}
 			if ( dbspec == DBSPEC_VALUE_ORG ) {
 				return 150
 			}
 			if ( dbspec == DBSPEC_PARAM3_ORG ) {
@@ -101628,14 +103603,14 @@
 			reftype = FILTER_ITEM_POTION
 			return
 		}
 		if ( dbmode == DBMODE_REF_SPEC ) {
 			if ( dbspec == DBSPEC_TYPE ) {
-				return FILTER_ITEM_POTION
+				return 52000
 			}
 			if ( dbspec == DBSPEC_TYPE_MINOR ) {
-				return FILTER_NONE
+				return 99999
 			}
 			if ( dbspec == DBSPEC_VALUE_ORG ) {
 				return 50000
 			}
 			if ( dbspec == DBSPEC_PARAM3_ORG ) {
@@ -101698,14 +103673,14 @@
 			reftype = FILTER_ITEM_POTION
 			return
 		}
 		if ( dbmode == DBMODE_REF_SPEC ) {
 			if ( dbspec == DBSPEC_TYPE ) {
-				return FILTER_ITEM_POTION
+				return 52000
 			}
 			if ( dbspec == DBSPEC_TYPE_MINOR ) {
-				return FILTER_ITEM_POTION_HEAL
+				return 52001
 			}
 			if ( dbspec == DBSPEC_VALUE_ORG ) {
 				return 280
 			}
 			if ( dbspec == DBSPEC_PARAM3_ORG ) {
@@ -101768,14 +103743,14 @@
 			reftype = FILTER_ITEM_POTION
 			return
 		}
 		if ( dbmode == DBMODE_REF_SPEC ) {
 			if ( dbspec == DBSPEC_TYPE ) {
-				return FILTER_ITEM_POTION
+				return 52000
 			}
 			if ( dbspec == DBSPEC_TYPE_MINOR ) {
-				return FILTER_ITEM_POTION_HEAL
+				return 52001
 			}
 			if ( dbspec == DBSPEC_VALUE_ORG ) {
 				return 280
 			}
 			if ( dbspec == DBSPEC_PARAM3_ORG ) {
@@ -101838,14 +103813,14 @@
 			reftype = FILTER_CONTAINER
 			return
 		}
 		if ( dbmode == DBMODE_REF_SPEC ) {
 			if ( dbspec == DBSPEC_TYPE ) {
-				return FILTER_CONTAINER
+				return 72000
 			}
 			if ( dbspec == DBSPEC_TYPE_MINOR ) {
-				return FILTER_NONE
+				return 99999
 			}
 			if ( dbspec == DBSPEC_VALUE_ORG ) {
 				return 380
 			}
 			if ( dbspec == DBSPEC_PARAM3_ORG ) {
@@ -101899,14 +103874,14 @@
 			reftype = FILTER_CONTAINER
 			return
 		}
 		if ( dbmode == DBMODE_REF_SPEC ) {
 			if ( dbspec == DBSPEC_TYPE ) {
-				return FILTER_CONTAINER
+				return 72000
 			}
 			if ( dbspec == DBSPEC_TYPE_MINOR ) {
-				return FILTER_NONE
+				return 99999
 			}
 			if ( dbspec == DBSPEC_VALUE_ORG ) {
 				return 380
 			}
 			if ( dbspec == DBSPEC_PARAM3_ORG ) {
@@ -101960,14 +103935,14 @@
 			reftype = FILTER_FURNITURE
 			return
 		}
 		if ( dbmode == DBMODE_REF_SPEC ) {
 			if ( dbspec == DBSPEC_TYPE ) {
-				return FILTER_FURNITURE
+				return 60000
 			}
 			if ( dbspec == DBSPEC_TYPE_MINOR ) {
-				return FILTER_NONE
+				return 99999
 			}
 			if ( dbspec == DBSPEC_VALUE_ORG ) {
 				return 380
 			}
 			if ( dbspec == DBSPEC_PARAM3_ORG ) {
@@ -102021,14 +103996,14 @@
 			reftype = FILTER_FURNITURE
 			return
 		}
 		if ( dbmode == DBMODE_REF_SPEC ) {
 			if ( dbspec == DBSPEC_TYPE ) {
-				return FILTER_FURNITURE
+				return 60000
 			}
 			if ( dbspec == DBSPEC_TYPE_MINOR ) {
-				return FILTER_NONE
+				return 99999
 			}
 			if ( dbspec == DBSPEC_VALUE_ORG ) {
 				return 380
 			}
 			if ( dbspec == DBSPEC_PARAM3_ORG ) {
@@ -102083,14 +104058,14 @@
 			reftype = FILTER_FURNITURE
 			return
 		}
 		if ( dbmode == DBMODE_REF_SPEC ) {
 			if ( dbspec == DBSPEC_TYPE ) {
-				return FILTER_FURNITURE
+				return 60000
 			}
 			if ( dbspec == DBSPEC_TYPE_MINOR ) {
-				return FILTER_NONE
+				return 99999
 			}
 			if ( dbspec == DBSPEC_VALUE_ORG ) {
 				return 1800
 			}
 			if ( dbspec == DBSPEC_PARAM3_ORG ) {
@@ -102144,14 +104119,14 @@
 			reftype = FILTER_FURNITURE
 			return
 		}
 		if ( dbmode == DBMODE_REF_SPEC ) {
 			if ( dbspec == DBSPEC_TYPE ) {
-				return FILTER_FURNITURE
+				return 60000
 			}
 			if ( dbspec == DBSPEC_TYPE_MINOR ) {
-				return FILTER_NONE
+				return 99999
 			}
 			if ( dbspec == DBSPEC_VALUE_ORG ) {
 				return 380
 			}
 			if ( dbspec == DBSPEC_PARAM3_ORG ) {
@@ -102205,14 +104180,14 @@
 			reftype = FILTER_FURNITURE
 			return
 		}
 		if ( dbmode == DBMODE_REF_SPEC ) {
 			if ( dbspec == DBSPEC_TYPE ) {
-				return FILTER_FURNITURE
+				return 60000
 			}
 			if ( dbspec == DBSPEC_TYPE_MINOR ) {
-				return FILTER_NONE
+				return 99999
 			}
 			if ( dbspec == DBSPEC_VALUE_ORG ) {
 				return 1200
 			}
 			if ( dbspec == DBSPEC_PARAM3_ORG ) {
@@ -102266,14 +104241,14 @@
 			reftype = FILTER_FURNITURE
 			return
 		}
 		if ( dbmode == DBMODE_REF_SPEC ) {
 			if ( dbspec == DBSPEC_TYPE ) {
-				return FILTER_FURNITURE
+				return 60000
 			}
 			if ( dbspec == DBSPEC_TYPE_MINOR ) {
-				return FILTER_NONE
+				return 99999
 			}
 			if ( dbspec == DBSPEC_VALUE_ORG ) {
 				return 1300
 			}
 			if ( dbspec == DBSPEC_PARAM3_ORG ) {
@@ -102327,14 +104302,14 @@
 			reftype = FILTER_FURNITURE
 			return
 		}
 		if ( dbmode == DBMODE_REF_SPEC ) {
 			if ( dbspec == DBSPEC_TYPE ) {
-				return FILTER_FURNITURE
+				return 60000
 			}
 			if ( dbspec == DBSPEC_TYPE_MINOR ) {
-				return FILTER_NONE
+				return 99999
 			}
 			if ( dbspec == DBSPEC_VALUE_ORG ) {
 				return 2600
 			}
 			if ( dbspec == DBSPEC_PARAM3_ORG ) {
@@ -102388,14 +104363,14 @@
 			reftype = FILTER_JUNK
 			return
 		}
 		if ( dbmode == DBMODE_REF_SPEC ) {
 			if ( dbspec == DBSPEC_TYPE ) {
-				return FILTER_JUNK
+				return 64000
 			}
 			if ( dbspec == DBSPEC_TYPE_MINOR ) {
-				return FILTER_NONE
+				return 99999
 			}
 			if ( dbspec == DBSPEC_VALUE_ORG ) {
 				return 100
 			}
 			if ( dbspec == DBSPEC_PARAM3_ORG ) {
@@ -102449,14 +104424,14 @@
 			reftype = FILTER_JUNK
 			return
 		}
 		if ( dbmode == DBMODE_REF_SPEC ) {
 			if ( dbspec == DBSPEC_TYPE ) {
-				return FILTER_JUNK
+				return 64000
 			}
 			if ( dbspec == DBSPEC_TYPE_MINOR ) {
-				return FILTER_NONE
+				return 99999
 			}
 			if ( dbspec == DBSPEC_VALUE_ORG ) {
 				return 10
 			}
 			if ( dbspec == DBSPEC_PARAM3_ORG ) {
@@ -102510,14 +104485,14 @@
 			reftype = FILTER_JUNK
 			return
 		}
 		if ( dbmode == DBMODE_REF_SPEC ) {
 			if ( dbspec == DBSPEC_TYPE ) {
-				return FILTER_JUNK
+				return 64000
 			}
 			if ( dbspec == DBSPEC_TYPE_MINOR ) {
-				return FILTER_NONE
+				return 99999
 			}
 			if ( dbspec == DBSPEC_VALUE_ORG ) {
 				return 10
 			}
 			if ( dbspec == DBSPEC_PARAM3_ORG ) {
@@ -102550,40 +104525,40 @@
 		}
 		return 0
 	}
 	if ( dbid == ITEM_ID_SPELLBOOK_CHAOS_BALL ) {
 		if ( dbmode == DBMODE_SET_STATS | dbmode == DBMODE_SET ) {
-			inv(INV_ITEM_VALUE, ci) = 6000
+			inv(INV_ITEM_VALUE, ci) = 4800
 			inv(INV_ITEM_WEIGHT, ci) = 380
 		}
 		if ( dbmode == DBMODE_SET ) {
 			inv(INV_ITEM_ID, ci) = ITEM_ID_SPELLBOOK_CHAOS_BALL
 			inv(INV_ITEM_PIC, ci) = xy2pic(0, 13)
 			reftype = FILTER_ITEM_SPELLBOOK
 			reftypeminor = FILTER_NOTHING
 			inv(INV_ITEM_NUM, ci) = 1
 			fixeditemenc = 0
 			inv(INV_ITEM_IDENTIFY_LEVEL, ci) = 0
-			inv(INV_ITEM_CHARGE, ci) = 4 + rnd(4) - rnd(4)
-			ibitmod ITEM_BIT_CHARGE_ITEM, ci, 1
+			inv((9 /*!!!@[INV_ITEM_AMMO @@@ INV_ITEM_CHARGE @@@ INV_ITEM_CLIENT @@@ INV_ITEM_FILE @@@ INV_ITEM_NEXT_PERIOD]@!!! */), ci) = 3 + rnd(3) - rnd(3)
+			ibitmod ITEM_BIT_CHARGE_ITEM, ci, TRUE
 			return
 		}
 		if ( dbmode == DBMODE_REF ) {
-			ichargelevel = 4
+			ichargelevel = 3
 			infilterref = ""
 			reftype = FILTER_ITEM_SPELLBOOK
 			return
 		}
 		if ( dbmode == DBMODE_REF_SPEC ) {
 			if ( dbspec == DBSPEC_TYPE ) {
-				return FILTER_ITEM_SPELLBOOK
+				return 54000
 			}
 			if ( dbspec == DBSPEC_TYPE_MINOR ) {
-				return FILTER_NONE
+				return 99999
 			}
 			if ( dbspec == DBSPEC_VALUE_ORG ) {
-				return 6000
+				return 4800
 			}
 			if ( dbspec == DBSPEC_PARAM3_ORG ) {
 				return
 			}
 			if ( dbspec == DBSPEC_CAN_READ ) {
@@ -102591,11 +104566,11 @@
 			}
 			if ( dbspec == DBSPEC_PCC ) {
 				return 0
 			}
 			if ( dbspec == DBSPEC_OBJ_LEVEL ) {
-				return 15
+				return 35
 			}
 			if ( dbspec == DBSPEC_RARE_LEVEL ) {
 				return 700
 			}
 			return 0
@@ -102607,11 +104582,11 @@
 			return -1
 		}
 		if ( dbmode == DBMODE_DESC ) {
 			if ( jp ) {
 				description(0) = "\t\t「混沌の渦」という呪文について学ぶことができる魔法書。めちゃくちゃに騒ぎたいあなたに。\n#〜本の為の本・魔法書編〜\n"
-				description(1) = "<ランク9魔法>"
+				description(1) = "<ランク7魔法>"
 				description(2) = ""
 				description(3) = "\t\t混沌属性の範囲魔法呪文を唱える為に必要な本。読むことができる。\n#〜鑑定報告書：＜書物＞カテゴリ〜\n"
 			}
 			else {
 				description(0) = ""
@@ -102622,40 +104597,40 @@
 		}
 		return 0
 	}
 	if ( dbid == ITEM_ID_SPELLBOOK_SOUND_BALL ) {
 		if ( dbmode == DBMODE_SET_STATS | dbmode == DBMODE_SET ) {
-			inv(INV_ITEM_VALUE, ci) = 4200
+			inv(INV_ITEM_VALUE, ci) = 4800
 			inv(INV_ITEM_WEIGHT, ci) = 380
 		}
 		if ( dbmode == DBMODE_SET ) {
 			inv(INV_ITEM_ID, ci) = ITEM_ID_SPELLBOOK_SOUND_BALL
 			inv(INV_ITEM_PIC, ci) = xy2pic(0, 13)
 			reftype = FILTER_ITEM_SPELLBOOK
 			reftypeminor = FILTER_NOTHING
 			inv(INV_ITEM_NUM, ci) = 1
 			fixeditemenc = 0
 			inv(INV_ITEM_IDENTIFY_LEVEL, ci) = 0
-			inv(INV_ITEM_CHARGE, ci) = 4 + rnd(4) - rnd(4)
-			ibitmod ITEM_BIT_CHARGE_ITEM, ci, 1
+			inv((9 /*!!!@[INV_ITEM_AMMO @@@ INV_ITEM_CHARGE @@@ INV_ITEM_CLIENT @@@ INV_ITEM_FILE @@@ INV_ITEM_NEXT_PERIOD]@!!! */), ci) = 3 + rnd(3) - rnd(3)
+			ibitmod ITEM_BIT_CHARGE_ITEM, ci, TRUE
 			return
 		}
 		if ( dbmode == DBMODE_REF ) {
-			ichargelevel = 4
+			ichargelevel = 3
 			infilterref = ""
 			reftype = FILTER_ITEM_SPELLBOOK
 			return
 		}
 		if ( dbmode == DBMODE_REF_SPEC ) {
 			if ( dbspec == DBSPEC_TYPE ) {
-				return FILTER_ITEM_SPELLBOOK
+				return 54000
 			}
 			if ( dbspec == DBSPEC_TYPE_MINOR ) {
-				return FILTER_NONE
+				return 99999
 			}
 			if ( dbspec == DBSPEC_VALUE_ORG ) {
-				return 4200
+				return 4800
 			}
 			if ( dbspec == DBSPEC_PARAM3_ORG ) {
 				return
 			}
 			if ( dbspec == DBSPEC_CAN_READ ) {
@@ -102663,14 +104638,14 @@
 			}
 			if ( dbspec == DBSPEC_PCC ) {
 				return 0
 			}
 			if ( dbspec == DBSPEC_OBJ_LEVEL ) {
-				return 10
+				return 35
 			}
 			if ( dbspec == DBSPEC_RARE_LEVEL ) {
-				return 800
+				return 700
 			}
 			return 0
 		}
 		if ( dbmode == DBMODE_ON_READ ) {
 			efid = SKILL_SPELL_RAGING_ROAR
@@ -102681,11 +104656,11 @@
 		if ( dbmode == DBMODE_DESC ) {
 			if ( jp ) {
 				description(0) = "\t\t「轟音の波動」という呪文について学ぶことができる魔法書。大音量で騒ぎたいあなたに。\n#〜本の為の本・魔法書編〜\n"
 				description(1) = "<ランク7魔法>"
 				description(2) = ""
-				description(3) = "\t\t音波属性の範囲魔法呪文を唱える為に必要な本。読むことができる。\n#〜鑑定報告書：＜書物＞カテゴリ〜\n"
+				description(3) = "\t\t音属性の範囲魔法呪文を唱える為に必要な本。読むことができる。\n#〜鑑定報告書：＜書物＞カテゴリ〜\n"
 			}
 			else {
 				description(0) = ""
 				description(1) = ""
 				description(3) = "You can swear you hear a buzzing sound from this tome."
@@ -102694,40 +104669,40 @@
 		}
 		return 0
 	}
 	if ( dbid == ITEM_ID_SPELLBOOK_FIRE_BALL ) {
 		if ( dbmode == DBMODE_SET_STATS | dbmode == DBMODE_SET ) {
-			inv(INV_ITEM_VALUE, ci) = 2700
+			inv(INV_ITEM_VALUE, ci) = 4500
 			inv(INV_ITEM_WEIGHT, ci) = 380
 		}
 		if ( dbmode == DBMODE_SET ) {
 			inv(INV_ITEM_ID, ci) = ITEM_ID_SPELLBOOK_FIRE_BALL
 			inv(INV_ITEM_PIC, ci) = xy2pic(0, 13)
 			reftype = FILTER_ITEM_SPELLBOOK
 			reftypeminor = FILTER_NOTHING
 			inv(INV_ITEM_NUM, ci) = 1
 			fixeditemenc = 0
 			inv(INV_ITEM_IDENTIFY_LEVEL, ci) = 0
-			inv(INV_ITEM_CHARGE, ci) = 4 + rnd(4) - rnd(4)
-			ibitmod ITEM_BIT_CHARGE_ITEM, ci, 1
+			inv((9 /*!!!@[INV_ITEM_AMMO @@@ INV_ITEM_CHARGE @@@ INV_ITEM_CLIENT @@@ INV_ITEM_FILE @@@ INV_ITEM_NEXT_PERIOD]@!!! */), ci) = 3 + rnd(3) - rnd(3)
+			ibitmod ITEM_BIT_CHARGE_ITEM, ci, TRUE
 			return
 		}
 		if ( dbmode == DBMODE_REF ) {
-			ichargelevel = 4
+			ichargelevel = 3
 			infilterref = ""
 			reftype = FILTER_ITEM_SPELLBOOK
 			return
 		}
 		if ( dbmode == DBMODE_REF_SPEC ) {
 			if ( dbspec == DBSPEC_TYPE ) {
-				return FILTER_ITEM_SPELLBOOK
+				return 54000
 			}
 			if ( dbspec == DBSPEC_TYPE_MINOR ) {
-				return FILTER_NONE
+				return 99999
 			}
 			if ( dbspec == DBSPEC_VALUE_ORG ) {
-				return 2700
+				return 4500
 			}
 			if ( dbspec == DBSPEC_PARAM3_ORG ) {
 				return
 			}
 			if ( dbspec == DBSPEC_CAN_READ ) {
@@ -102735,14 +104710,14 @@
 			}
 			if ( dbspec == DBSPEC_PCC ) {
 				return 0
 			}
 			if ( dbspec == DBSPEC_OBJ_LEVEL ) {
-				return 3
+				return 30
 			}
 			if ( dbspec == DBSPEC_RARE_LEVEL ) {
-				return 1000
+				return 700
 			}
 			return 0
 		}
 		if ( dbmode == DBMODE_ON_READ ) {
 			efid = SKILL_SPELL_FIRE_BALL
@@ -102751,13 +104726,13 @@
 			return -1
 		}
 		if ( dbmode == DBMODE_DESC ) {
 			if ( jp ) {
 				description(0) = "\t\t「灼熱の嵐」という呪文について学ぶことができる魔法書。辺りを暖かくしたいあなたに。\n#〜本の為の本・魔法書編〜\n"
-				description(1) = "<ランク5魔法>"
+				description(1) = "<ランク6魔法>"
 				description(2) = ""
-				description(3) = "\t\t炎属性の範囲魔法呪文を唱える為に必要な本。読むことができる。\n#〜鑑定報告書：＜書物＞カテゴリ〜\n"
+				description(3) = "\t\t火炎属性の範囲魔法呪文を唱える為に必要な本。読むことができる。\n#〜鑑定報告書：＜書物＞カテゴリ〜\n"
 			}
 			else {
 				description(0) = ""
 				description(1) = ""
 				description(3) = "This tome is hot."
@@ -102766,40 +104741,40 @@
 		}
 		return 0
 	}
 	if ( dbid == ITEM_ID_SPELLBOOK_ICE_BALL ) {
 		if ( dbmode == DBMODE_SET_STATS | dbmode == DBMODE_SET ) {
-			inv(INV_ITEM_VALUE, ci) = 2700
+			inv(INV_ITEM_VALUE, ci) = 4500
 			inv(INV_ITEM_WEIGHT, ci) = 380
 		}
 		if ( dbmode == DBMODE_SET ) {
 			inv(INV_ITEM_ID, ci) = ITEM_ID_SPELLBOOK_ICE_BALL
 			inv(INV_ITEM_PIC, ci) = xy2pic(0, 13)
 			reftype = FILTER_ITEM_SPELLBOOK
 			reftypeminor = FILTER_NOTHING
 			inv(INV_ITEM_NUM, ci) = 1
 			fixeditemenc = 0
 			inv(INV_ITEM_IDENTIFY_LEVEL, ci) = 0
-			inv(INV_ITEM_CHARGE, ci) = 4 + rnd(4) - rnd(4)
-			ibitmod ITEM_BIT_CHARGE_ITEM, ci, 1
+			inv((9 /*!!!@[INV_ITEM_AMMO @@@ INV_ITEM_CHARGE @@@ INV_ITEM_CLIENT @@@ INV_ITEM_FILE @@@ INV_ITEM_NEXT_PERIOD]@!!! */), ci) = 3 + rnd(3) - rnd(3)
+			ibitmod ITEM_BIT_CHARGE_ITEM, ci, TRUE
 			return
 		}
 		if ( dbmode == DBMODE_REF ) {
-			ichargelevel = 4
+			ichargelevel = 3
 			infilterref = ""
 			reftype = FILTER_ITEM_SPELLBOOK
 			return
 		}
 		if ( dbmode == DBMODE_REF_SPEC ) {
 			if ( dbspec == DBSPEC_TYPE ) {
-				return FILTER_ITEM_SPELLBOOK
+				return 54000
 			}
 			if ( dbspec == DBSPEC_TYPE_MINOR ) {
-				return FILTER_NONE
+				return 99999
 			}
 			if ( dbspec == DBSPEC_VALUE_ORG ) {
-				return 2700
+				return 4500
 			}
 			if ( dbspec == DBSPEC_PARAM3_ORG ) {
 				return
 			}
 			if ( dbspec == DBSPEC_CAN_READ ) {
@@ -102807,14 +104782,14 @@
 			}
 			if ( dbspec == DBSPEC_PCC ) {
 				return 0
 			}
 			if ( dbspec == DBSPEC_OBJ_LEVEL ) {
-				return 3
+				return 30
 			}
 			if ( dbspec == DBSPEC_RARE_LEVEL ) {
-				return 1000
+				return 700
 			}
 			return 0
 		}
 		if ( dbmode == DBMODE_ON_READ ) {
 			efid = SKILL_SPELL_ICE_BALL
@@ -102823,13 +104798,13 @@
 			return -1
 		}
 		if ( dbmode == DBMODE_DESC ) {
 			if ( jp ) {
 				description(0) = "\t\t「氷結の波動」という呪文について学ぶことができる魔法書。辺りを涼しくしたいあなたに。\n#〜本の為の本・魔法書編〜\n"
-				description(1) = "<ランク5魔法>"
+				description(1) = "<ランク6魔法>"
 				description(2) = ""
-				description(3) = "\t\t氷属性の範囲魔法呪文を唱える為に必要な本。読むことができる。\n#〜鑑定報告書：＜書物＞カテゴリ〜\n"
+				description(3) = "\t\t冷気属性の範囲魔法呪文を唱える為に必要な本。読むことができる。\n#〜鑑定報告書：＜書物＞カテゴリ〜\n"
 			}
 			else {
 				description(0) = ""
 				description(1) = ""
 				description(3) = "This tome is cold."
@@ -102849,26 +104824,26 @@
 			reftype = FILTER_ITEM_SPELLBOOK
 			reftypeminor = FILTER_NOTHING
 			inv(INV_ITEM_NUM, ci) = 1
 			fixeditemenc = 0
 			inv(INV_ITEM_IDENTIFY_LEVEL, ci) = 0
-			inv(INV_ITEM_CHARGE, ci) = 4 + rnd(4) - rnd(4)
-			ibitmod ITEM_BIT_CHARGE_ITEM, ci, 1
+			inv((9 /*!!!@[INV_ITEM_AMMO @@@ INV_ITEM_CHARGE @@@ INV_ITEM_CLIENT @@@ INV_ITEM_FILE @@@ INV_ITEM_NEXT_PERIOD]@!!! */), ci) = 4 + rnd(4) - rnd(4)
+			ibitmod ITEM_BIT_CHARGE_ITEM, ci, TRUE
 			return
 		}
 		if ( dbmode == DBMODE_REF ) {
 			ichargelevel = 4
 			infilterref = ""
 			reftype = FILTER_ITEM_SPELLBOOK
 			return
 		}
 		if ( dbmode == DBMODE_REF_SPEC ) {
 			if ( dbspec == DBSPEC_TYPE ) {
-				return FILTER_ITEM_SPELLBOOK
+				return 54000
 			}
 			if ( dbspec == DBSPEC_TYPE_MINOR ) {
-				return FILTER_NONE
+				return 99999
 			}
 			if ( dbspec == DBSPEC_VALUE_ORG ) {
 				return 2700
 			}
 			if ( dbspec == DBSPEC_PARAM3_ORG ) {
@@ -102895,13 +104870,13 @@
 			return -1
 		}
 		if ( dbmode == DBMODE_DESC ) {
 			if ( jp ) {
 				description(0) = "\t\t「マインドボルト」という呪文について学ぶことができる魔法書。魅惑的なウインクのできるあなたに。\n#〜本の為の本・魔法書編〜\n"
-				description(1) = "<ランク4魔法>"
+				description(1) = "<ランク6魔法>"
 				description(2) = ""
-				description(3) = "\t\t眩惑属性のボルトを唱える為に必要な本。読むことができる。\n#〜鑑定報告書：＜書物＞カテゴリ〜\n"
+				description(3) = "\t\t幻惑属性のボルトを唱える為に必要な本。読むことができる。\n#〜鑑定報告書：＜書物＞カテゴリ〜\n"
 			}
 			else {
 				description(0) = ""
 				description(1) = ""
 				description(3) = "The tome that hurt's your eyes when read."
@@ -102921,26 +104896,26 @@
 			reftype = FILTER_ITEM_SPELLBOOK
 			reftypeminor = FILTER_NOTHING
 			inv(INV_ITEM_NUM, ci) = 1
 			fixeditemenc = 0
 			inv(INV_ITEM_IDENTIFY_LEVEL, ci) = 0
-			inv(INV_ITEM_CHARGE, ci) = 4 + rnd(4) - rnd(4)
-			ibitmod ITEM_BIT_CHARGE_ITEM, ci, 1
+			inv((9 /*!!!@[INV_ITEM_AMMO @@@ INV_ITEM_CHARGE @@@ INV_ITEM_CLIENT @@@ INV_ITEM_FILE @@@ INV_ITEM_NEXT_PERIOD]@!!! */), ci) = 4 + rnd(4) - rnd(4)
+			ibitmod ITEM_BIT_CHARGE_ITEM, ci, TRUE
 			return
 		}
 		if ( dbmode == DBMODE_REF ) {
 			ichargelevel = 4
 			infilterref = ""
 			reftype = FILTER_ITEM_SPELLBOOK
 			return
 		}
 		if ( dbmode == DBMODE_REF_SPEC ) {
 			if ( dbspec == DBSPEC_TYPE ) {
-				return FILTER_ITEM_SPELLBOOK
+				return 54000
 			}
 			if ( dbspec == DBSPEC_TYPE_MINOR ) {
-				return FILTER_NONE
+				return 99999
 			}
 			if ( dbspec == DBSPEC_VALUE_ORG ) {
 				return 2200
 			}
 			if ( dbspec == DBSPEC_PARAM3_ORG ) {
@@ -102967,11 +104942,11 @@
 			return -1
 		}
 		if ( dbmode == DBMODE_DESC ) {
 			if ( jp ) {
 				description(0) = "\t\t「ダークネスボルト」という呪文について学ぶことができる魔法書。周りを威圧する眼光を持つあなたに。\n#〜本の為の本・魔法書編〜\n"
-				description(1) = "<ランク4魔法>"
+				description(1) = "<ランク6魔法>"
 				description(2) = ""
 				description(3) = "\t\t暗黒属性のボルトを唱える為に必要な本。読むことができる。\n#〜鑑定報告書：＜書物＞カテゴリ〜\n"
 			}
 			else {
 				description(0) = ""
@@ -103010,14 +104985,14 @@
 			reftype = FILTER_WEAPON
 			return
 		}
 		if ( dbmode == DBMODE_REF_SPEC ) {
 			if ( dbspec == DBSPEC_TYPE ) {
-				return FILTER_WEAPON
+				return 10000
 			}
 			if ( dbspec == DBSPEC_TYPE_MINOR ) {
-				return FILTER_WEAPON_SHORTSWORD
+				return 10003
 			}
 			if ( dbspec == DBSPEC_VALUE_ORG ) {
 				return 500
 			}
 			if ( dbspec == DBSPEC_PARAM3_ORG ) {
@@ -103061,26 +105036,26 @@
 			reftype = FILTER_ITEM_SPELLBOOK
 			reftypeminor = FILTER_NOTHING
 			inv(INV_ITEM_NUM, ci) = 1
 			fixeditemenc = 0
 			inv(INV_ITEM_IDENTIFY_LEVEL, ci) = 0
-			inv(INV_ITEM_CHARGE, ci) = 3 + rnd(3) - rnd(3)
-			ibitmod ITEM_BIT_CHARGE_ITEM, ci, 1
+			inv((9 /*!!!@[INV_ITEM_AMMO @@@ INV_ITEM_CHARGE @@@ INV_ITEM_CLIENT @@@ INV_ITEM_FILE @@@ INV_ITEM_NEXT_PERIOD]@!!! */), ci) = 5 + rnd(5) - rnd(5)
+			ibitmod ITEM_BIT_CHARGE_ITEM, ci, TRUE
 			return
 		}
 		if ( dbmode == DBMODE_REF ) {
-			ichargelevel = 3
+			ichargelevel = 5
 			infilterref = ""
 			reftype = FILTER_ITEM_SPELLBOOK
 			return
 		}
 		if ( dbmode == DBMODE_REF_SPEC ) {
 			if ( dbspec == DBSPEC_TYPE ) {
-				return FILTER_ITEM_SPELLBOOK
+				return 54000
 			}
 			if ( dbspec == DBSPEC_TYPE_MINOR ) {
-				return FILTER_NONE
+				return 99999
 			}
 			if ( dbspec == DBSPEC_VALUE_ORG ) {
 				return 3200
 			}
 			if ( dbspec == DBSPEC_PARAM3_ORG ) {
@@ -103106,12 +105081,12 @@
 			gosub *readSpellbook
 			return -1
 		}
 		if ( dbmode == DBMODE_DESC ) {
 			if ( jp ) {
-				description(0) = "\t\t「麻痺の矢」という呪文について学ぶことができる魔法書。運命の出会いと勘違いしやすいあなたに。\n#〜本の為の本・魔法書編〜\n"
-				description(1) = "<ランク5魔法>"
+				description(0) = "\t\t「神経の針」という呪文について学ぶことができる魔法書。運命の出会いと勘違いしやすいあなたに。\n#〜本の為の本・魔法書編〜\n"
+				description(1) = "<ランク3魔法>"
 				description(2) = ""
 				description(3) = "\t\t神経属性の矢を唱える為に必要な本。読むことができる。\n#〜鑑定報告書：＜書物＞カテゴリ〜\n"
 			}
 			else {
 				description(0) = ""
@@ -103133,26 +105108,26 @@
 			reftype = FILTER_ITEM_SPELLBOOK
 			reftypeminor = FILTER_NOTHING
 			inv(INV_ITEM_NUM, ci) = 1
 			fixeditemenc = 0
 			inv(INV_ITEM_IDENTIFY_LEVEL, ci) = 0
-			inv(INV_ITEM_CHARGE, ci) = 3 + rnd(3) - rnd(3)
-			ibitmod ITEM_BIT_CHARGE_ITEM, ci, 1
+			inv((9 /*!!!@[INV_ITEM_AMMO @@@ INV_ITEM_CHARGE @@@ INV_ITEM_CLIENT @@@ INV_ITEM_FILE @@@ INV_ITEM_NEXT_PERIOD]@!!! */), ci) = 5 + rnd(5) - rnd(5)
+			ibitmod ITEM_BIT_CHARGE_ITEM, ci, TRUE
 			return
 		}
 		if ( dbmode == DBMODE_REF ) {
-			ichargelevel = 3
+			ichargelevel = 5
 			infilterref = ""
 			reftype = FILTER_ITEM_SPELLBOOK
 			return
 		}
 		if ( dbmode == DBMODE_REF_SPEC ) {
 			if ( dbspec == DBSPEC_TYPE ) {
-				return FILTER_ITEM_SPELLBOOK
+				return 54000
 			}
 			if ( dbspec == DBSPEC_TYPE_MINOR ) {
-				return FILTER_NONE
+				return 99999
 			}
 			if ( dbspec == DBSPEC_VALUE_ORG ) {
 				return 4800
 			}
 			if ( dbspec == DBSPEC_PARAM3_ORG ) {
@@ -103166,11 +105141,11 @@
 			}
 			if ( dbspec == DBSPEC_OBJ_LEVEL ) {
 				return 12
 			}
 			if ( dbspec == DBSPEC_RARE_LEVEL ) {
-				return 800
+				return 1000
 			}
 			return 0
 		}
 		if ( dbmode == DBMODE_ON_READ ) {
 			efid = SKILL_SPELL_CHAOS_EYE
@@ -103179,11 +105154,11 @@
 			return -1
 		}
 		if ( dbmode == DBMODE_DESC ) {
 			if ( jp ) {
 				description(0) = "\t\t「混沌の瞳」という呪文について学ぶことができる魔法書。流し眼を練習しているあなたに。\n#〜本の為の本・魔法書編〜\n"
-				description(1) = "<ランク6魔法>"
+				description(1) = "<ランク3魔法>"
 				description(2) = ""
 				description(3) = "\t\t混沌属性の矢を唱える為に必要な本。読むことができる。\n#〜鑑定報告書：＜書物＞カテゴリ〜\n"
 			}
 			else {
 				description(0) = ""
@@ -103205,26 +105180,26 @@
 			reftype = FILTER_ITEM_SPELLBOOK
 			reftypeminor = FILTER_NOTHING
 			inv(INV_ITEM_NUM, ci) = 1
 			fixeditemenc = 0
 			inv(INV_ITEM_IDENTIFY_LEVEL, ci) = 0
-			inv(INV_ITEM_CHARGE, ci) = 3 + rnd(3) - rnd(3)
-			ibitmod ITEM_BIT_CHARGE_ITEM, ci, 1
+			inv((9 /*!!!@[INV_ITEM_AMMO @@@ INV_ITEM_CHARGE @@@ INV_ITEM_CLIENT @@@ INV_ITEM_FILE @@@ INV_ITEM_NEXT_PERIOD]@!!! */), ci) = 5 + rnd(5) - rnd(5)
+			ibitmod ITEM_BIT_CHARGE_ITEM, ci, TRUE
 			return
 		}
 		if ( dbmode == DBMODE_REF ) {
-			ichargelevel = 3
+			ichargelevel = 5
 			infilterref = ""
 			reftype = FILTER_ITEM_SPELLBOOK
 			return
 		}
 		if ( dbmode == DBMODE_REF_SPEC ) {
 			if ( dbspec == DBSPEC_TYPE ) {
-				return FILTER_ITEM_SPELLBOOK
+				return 54000
 			}
 			if ( dbspec == DBSPEC_TYPE_MINOR ) {
-				return FILTER_NONE
+				return 99999
 			}
 			if ( dbspec == DBSPEC_VALUE_ORG ) {
 				return 3600
 			}
 			if ( dbspec == DBSPEC_PARAM3_ORG ) {
@@ -103251,11 +105226,11 @@
 			return -1
 		}
 		if ( dbmode == DBMODE_DESC ) {
 			if ( jp ) {
 				description(0) = "\t\t「地獄の吐息」という呪文について学ぶことができる魔法書。悪魔ぶりたいあなたに。\n#〜本の為の本・魔法書編〜\n"
-				description(1) = "<ランク5魔法>"
+				description(1) = "<ランク3魔法>"
 				description(2) = ""
 				description(3) = "\t\t地獄属性の矢を唱える為に必要な本。読むことができる。\n#〜鑑定報告書：＜書物＞カテゴリ〜\n"
 			}
 			else {
 				description(0) = ""
@@ -103287,14 +105262,14 @@
 			reftype = FILTER_ITEM_POTION
 			return
 		}
 		if ( dbmode == DBMODE_REF_SPEC ) {
 			if ( dbspec == DBSPEC_TYPE ) {
-				return FILTER_ITEM_POTION
+				return 52000
 			}
 			if ( dbspec == DBSPEC_TYPE_MINOR ) {
-				return FILTER_NONE
+				return 99999
 			}
 			if ( dbspec == DBSPEC_VALUE_ORG ) {
 				return 120
 			}
 			if ( dbspec == DBSPEC_PARAM3_ORG ) {
@@ -103360,14 +105335,14 @@
 			reftype = FILTER_ITEM_FOOD
 			return
 		}
 		if ( dbmode == DBMODE_REF_SPEC ) {
 			if ( dbspec == DBSPEC_TYPE ) {
-				return FILTER_ITEM_FOOD
+				return 57000
 			}
 			if ( dbspec == DBSPEC_TYPE_MINOR ) {
-				return FILTER_NONE
+				return 99999
 			}
 			if ( dbspec == DBSPEC_VALUE_ORG ) {
 				return 280
 			}
 			if ( dbspec == DBSPEC_PARAM3_ORG ) {
@@ -103430,14 +105405,14 @@
 			reftype = FILTER_ITEM_FOOD
 			return
 		}
 		if ( dbmode == DBMODE_REF_SPEC ) {
 			if ( dbspec == DBSPEC_TYPE ) {
-				return FILTER_ITEM_FOOD
+				return 57000
 			}
 			if ( dbspec == DBSPEC_TYPE_MINOR ) {
-				return FILTER_ITEM_FOOD_BREAD
+				return 57001
 			}
 			if ( dbspec == DBSPEC_VALUE_ORG ) {
 				return 280
 			}
 			if ( dbspec == DBSPEC_PARAM3_ORG ) {
@@ -103494,14 +105469,14 @@
 			reftype = FILTER_ITEM_FOOD
 			return
 		}
 		if ( dbmode == DBMODE_REF_SPEC ) {
 			if ( dbspec == DBSPEC_TYPE ) {
-				return FILTER_ITEM_FOOD
+				return 57000
 			}
 			if ( dbspec == DBSPEC_TYPE_MINOR ) {
-				return FILTER_ITEM_FOOD_PASTA
+				return 57002
 			}
 			if ( dbspec == DBSPEC_VALUE_ORG ) {
 				return 280
 			}
 			if ( dbspec == DBSPEC_PARAM3_ORG ) {
@@ -103556,14 +105531,14 @@
 			reftype = FILTER_ITEM_FOOD
 			return
 		}
 		if ( dbmode == DBMODE_REF_SPEC ) {
 			if ( dbspec == DBSPEC_TYPE ) {
-				return FILTER_ITEM_FOOD
+				return 57000
 			}
 			if ( dbspec == DBSPEC_TYPE_MINOR ) {
-				return FILTER_NONE
+				return 99999
 			}
 			if ( dbspec == DBSPEC_VALUE_ORG ) {
 				return 280
 			}
 			if ( dbspec == DBSPEC_PARAM3_ORG ) {
@@ -103607,26 +105582,26 @@
 			reftype = FILTER_ITEM_SPELLBOOK
 			reftypeminor = FILTER_NOTHING
 			inv(INV_ITEM_NUM, ci) = 1
 			fixeditemenc = 0
 			inv(INV_ITEM_IDENTIFY_LEVEL, ci) = 0
-			inv(INV_ITEM_CHARGE, ci) = 5 + rnd(5) - rnd(5)
-			ibitmod ITEM_BIT_CHARGE_ITEM, ci, 1
+			inv((9 /*!!!@[INV_ITEM_AMMO @@@ INV_ITEM_CHARGE @@@ INV_ITEM_CLIENT @@@ INV_ITEM_FILE @@@ INV_ITEM_NEXT_PERIOD]@!!! */), ci) = 5 + rnd(5) - rnd(5)
+			ibitmod ITEM_BIT_CHARGE_ITEM, ci, TRUE
 			return
 		}
 		if ( dbmode == DBMODE_REF ) {
 			ichargelevel = 5
 			infilterref = ""
 			reftype = FILTER_ITEM_SPELLBOOK
 			return
 		}
 		if ( dbmode == DBMODE_REF_SPEC ) {
 			if ( dbspec == DBSPEC_TYPE ) {
-				return FILTER_ITEM_SPELLBOOK
+				return 54000
 			}
 			if ( dbspec == DBSPEC_TYPE_MINOR ) {
-				return FILTER_NONE
+				return 99999
 			}
 			if ( dbspec == DBSPEC_VALUE_ORG ) {
 				return 1200
 			}
 			if ( dbspec == DBSPEC_PARAM3_ORG ) {
@@ -103691,14 +105666,14 @@
 			reftype = FILTER_ITEM_TOOL
 			return
 		}
 		if ( dbmode == DBMODE_REF_SPEC ) {
 			if ( dbspec == DBSPEC_TYPE ) {
-				return FILTER_ITEM_TOOL
+				return 59000
 			}
 			if ( dbspec == DBSPEC_TYPE_MINOR ) {
-				return FILTER_NONE
+				return 99999
 			}
 			if ( dbspec == DBSPEC_VALUE_ORG ) {
 				return 1860
 			}
 			if ( dbspec == DBSPEC_PARAM3_ORG ) {
@@ -103754,14 +105729,14 @@
 			reftype = FILTER_ITEM_TOOL
 			return
 		}
 		if ( dbmode == DBMODE_REF_SPEC ) {
 			if ( dbspec == DBSPEC_TYPE ) {
-				return FILTER_ITEM_TOOL
+				return 59000
 			}
 			if ( dbspec == DBSPEC_TYPE_MINOR ) {
-				return FILTER_NONE
+				return 99999
 			}
 			if ( dbspec == DBSPEC_VALUE_ORG ) {
 				return 1860
 			}
 			if ( dbspec == DBSPEC_PARAM3_ORG ) {
@@ -103818,14 +105793,14 @@
 			reftype = FILTER_FURNITURE
 			return
 		}
 		if ( dbmode == DBMODE_REF_SPEC ) {
 			if ( dbspec == DBSPEC_TYPE ) {
-				return FILTER_FURNITURE
+				return 60000
 			}
 			if ( dbspec == DBSPEC_TYPE_MINOR ) {
-				return FILTER_FURNITURE_INSTRUMENT
+				return 60005
 			}
 			if ( dbspec == DBSPEC_VALUE_ORG ) {
 				return 2500
 			}
 			if ( dbspec == DBSPEC_PARAM3_ORG ) {
@@ -103879,14 +105854,14 @@
 			reftype = FILTER_ITEM_POTION
 			return
 		}
 		if ( dbmode == DBMODE_REF_SPEC ) {
 			if ( dbspec == DBSPEC_TYPE ) {
-				return FILTER_ITEM_POTION
+				return 52000
 			}
 			if ( dbspec == DBSPEC_TYPE_MINOR ) {
-				return FILTER_ITEM_POTION_ALE
+				return 52002
 			}
 			if ( dbspec == DBSPEC_VALUE_ORG ) {
 				return 280
 			}
 			if ( dbspec == DBSPEC_PARAM3_ORG ) {
@@ -103939,26 +105914,26 @@
 			reftype = FILTER_ITEM_SPELLBOOK
 			reftypeminor = FILTER_NOTHING
 			inv(INV_ITEM_NUM, ci) = 1
 			fixeditemenc = 0
 			inv(INV_ITEM_IDENTIFY_LEVEL, ci) = 0
-			inv(INV_ITEM_CHARGE, ci) = 2 + rnd(2) - rnd(2)
-			ibitmod ITEM_BIT_CHARGE_ITEM, ci, 1
+			inv((9 /*!!!@[INV_ITEM_AMMO @@@ INV_ITEM_CHARGE @@@ INV_ITEM_CLIENT @@@ INV_ITEM_FILE @@@ INV_ITEM_NEXT_PERIOD]@!!! */), ci) = 2 + rnd(2) - rnd(2)
+			ibitmod ITEM_BIT_CHARGE_ITEM, ci, TRUE
 			return
 		}
 		if ( dbmode == DBMODE_REF ) {
 			ichargelevel = 2
 			infilterref = ""
 			reftype = FILTER_ITEM_SPELLBOOK
 			return
 		}
 		if ( dbmode == DBMODE_REF_SPEC ) {
 			if ( dbspec == DBSPEC_TYPE ) {
-				return FILTER_ITEM_SPELLBOOK
+				return 54000
 			}
 			if ( dbspec == DBSPEC_TYPE_MINOR ) {
-				return FILTER_NONE
+				return 99999
 			}
 			if ( dbspec == DBSPEC_VALUE_ORG ) {
 				return 10000
 			}
 			if ( dbspec == DBSPEC_PARAM3_ORG ) {
@@ -104011,26 +105986,26 @@
 			reftype = FILTER_ITEM_SPELLBOOK
 			reftypeminor = FILTER_NOTHING
 			inv(INV_ITEM_NUM, ci) = 1
 			fixeditemenc = 0
 			inv(INV_ITEM_IDENTIFY_LEVEL, ci) = 0
-			inv(INV_ITEM_CHARGE, ci) = 3 + rnd(3) - rnd(3)
-			ibitmod ITEM_BIT_CHARGE_ITEM, ci, 1
+			inv((9 /*!!!@[INV_ITEM_AMMO @@@ INV_ITEM_CHARGE @@@ INV_ITEM_CLIENT @@@ INV_ITEM_FILE @@@ INV_ITEM_NEXT_PERIOD]@!!! */), ci) = 3 + rnd(3) - rnd(3)
+			ibitmod ITEM_BIT_CHARGE_ITEM, ci, TRUE
 			return
 		}
 		if ( dbmode == DBMODE_REF ) {
 			ichargelevel = 3
 			infilterref = ""
 			reftype = FILTER_ITEM_SPELLBOOK
 			return
 		}
 		if ( dbmode == DBMODE_REF_SPEC ) {
 			if ( dbspec == DBSPEC_TYPE ) {
-				return FILTER_ITEM_SPELLBOOK
+				return 54000
 			}
 			if ( dbspec == DBSPEC_TYPE_MINOR ) {
-				return FILTER_NONE
+				return 99999
 			}
 			if ( dbspec == DBSPEC_VALUE_ORG ) {
 				return 7000
 			}
 			if ( dbspec == DBSPEC_PARAM3_ORG ) {
@@ -104083,26 +106058,26 @@
 			reftype = FILTER_ITEM_SPELLBOOK
 			reftypeminor = FILTER_NOTHING
 			inv(INV_ITEM_NUM, ci) = 1
 			fixeditemenc = 0
 			inv(INV_ITEM_IDENTIFY_LEVEL, ci) = 0
-			inv(INV_ITEM_CHARGE, ci) = 4 + rnd(4) - rnd(4)
-			ibitmod ITEM_BIT_CHARGE_ITEM, ci, 1
+			inv((9 /*!!!@[INV_ITEM_AMMO @@@ INV_ITEM_CHARGE @@@ INV_ITEM_CLIENT @@@ INV_ITEM_FILE @@@ INV_ITEM_NEXT_PERIOD]@!!! */), ci) = 4 + rnd(4) - rnd(4)
+			ibitmod ITEM_BIT_CHARGE_ITEM, ci, TRUE
 			return
 		}
 		if ( dbmode == DBMODE_REF ) {
 			ichargelevel = 4
 			infilterref = ""
 			reftype = FILTER_ITEM_SPELLBOOK
 			return
 		}
 		if ( dbmode == DBMODE_REF_SPEC ) {
 			if ( dbspec == DBSPEC_TYPE ) {
-				return FILTER_ITEM_SPELLBOOK
+				return 54000
 			}
 			if ( dbspec == DBSPEC_TYPE_MINOR ) {
-				return FILTER_NONE
+				return 99999
 			}
 			if ( dbspec == DBSPEC_VALUE_ORG ) {
 				return 4500
 			}
 			if ( dbspec == DBSPEC_PARAM3_ORG ) {
@@ -104155,26 +106130,26 @@
 			reftype = FILTER_ITEM_SPELLBOOK
 			reftypeminor = FILTER_NOTHING
 			inv(INV_ITEM_NUM, ci) = 1
 			fixeditemenc = 0
 			inv(INV_ITEM_IDENTIFY_LEVEL, ci) = 0
-			inv(INV_ITEM_CHARGE, ci) = 5 + rnd(5) - rnd(5)
-			ibitmod ITEM_BIT_CHARGE_ITEM, ci, 1
+			inv((9 /*!!!@[INV_ITEM_AMMO @@@ INV_ITEM_CHARGE @@@ INV_ITEM_CLIENT @@@ INV_ITEM_FILE @@@ INV_ITEM_NEXT_PERIOD]@!!! */), ci) = 5 + rnd(5) - rnd(5)
+			ibitmod ITEM_BIT_CHARGE_ITEM, ci, TRUE
 			return
 		}
 		if ( dbmode == DBMODE_REF ) {
 			ichargelevel = 5
 			infilterref = ""
 			reftype = FILTER_ITEM_SPELLBOOK
 			return
 		}
 		if ( dbmode == DBMODE_REF_SPEC ) {
 			if ( dbspec == DBSPEC_TYPE ) {
-				return FILTER_ITEM_SPELLBOOK
+				return 54000
 			}
 			if ( dbspec == DBSPEC_TYPE_MINOR ) {
-				return FILTER_NONE
+				return 99999
 			}
 			if ( dbspec == DBSPEC_VALUE_ORG ) {
 				return 2200
 			}
 			if ( dbspec == DBSPEC_PARAM3_ORG ) {
@@ -104227,26 +106202,26 @@
 			reftype = FILTER_ITEM_SPELLBOOK
 			reftypeminor = FILTER_NOTHING
 			inv(INV_ITEM_NUM, ci) = 1
 			fixeditemenc = 0
 			inv(INV_ITEM_IDENTIFY_LEVEL, ci) = 0
-			inv(INV_ITEM_CHARGE, ci) = 3 + rnd(3) - rnd(3)
-			ibitmod ITEM_BIT_CHARGE_ITEM, ci, 1
+			inv((9 /*!!!@[INV_ITEM_AMMO @@@ INV_ITEM_CHARGE @@@ INV_ITEM_CLIENT @@@ INV_ITEM_FILE @@@ INV_ITEM_NEXT_PERIOD]@!!! */), ci) = 3 + rnd(3) - rnd(3)
+			ibitmod ITEM_BIT_CHARGE_ITEM, ci, TRUE
 			return
 		}
 		if ( dbmode == DBMODE_REF ) {
 			ichargelevel = 3
 			infilterref = ""
 			reftype = FILTER_ITEM_SPELLBOOK
 			return
 		}
 		if ( dbmode == DBMODE_REF_SPEC ) {
 			if ( dbspec == DBSPEC_TYPE ) {
-				return FILTER_ITEM_SPELLBOOK
+				return 54000
 			}
 			if ( dbspec == DBSPEC_TYPE_MINOR ) {
-				return FILTER_NONE
+				return 99999
 			}
 			if ( dbspec == DBSPEC_VALUE_ORG ) {
 				return 4400
 			}
 			if ( dbspec == DBSPEC_PARAM3_ORG ) {
@@ -104299,26 +106274,26 @@
 			reftype = FILTER_ITEM_SPELLBOOK
 			reftypeminor = FILTER_NOTHING
 			inv(INV_ITEM_NUM, ci) = 1
 			fixeditemenc = 0
 			inv(INV_ITEM_IDENTIFY_LEVEL, ci) = 0
-			inv(INV_ITEM_CHARGE, ci) = 2 + rnd(2) - rnd(2)
-			ibitmod ITEM_BIT_CHARGE_ITEM, ci, 1
+			inv((9 /*!!!@[INV_ITEM_AMMO @@@ INV_ITEM_CHARGE @@@ INV_ITEM_CLIENT @@@ INV_ITEM_FILE @@@ INV_ITEM_NEXT_PERIOD]@!!! */), ci) = 2 + rnd(2) - rnd(2)
+			ibitmod ITEM_BIT_CHARGE_ITEM, ci, TRUE
 			return
 		}
 		if ( dbmode == DBMODE_REF ) {
 			ichargelevel = 2
 			infilterref = ""
 			reftype = FILTER_ITEM_SPELLBOOK
 			return
 		}
 		if ( dbmode == DBMODE_REF_SPEC ) {
 			if ( dbspec == DBSPEC_TYPE ) {
-				return FILTER_ITEM_SPELLBOOK
+				return 54000
 			}
 			if ( dbspec == DBSPEC_TYPE_MINOR ) {
-				return FILTER_NONE
+				return 99999
 			}
 			if ( dbspec == DBSPEC_VALUE_ORG ) {
 				return 12000
 			}
 			if ( dbspec == DBSPEC_PARAM3_ORG ) {
@@ -104371,26 +106346,26 @@
 			reftype = FILTER_ITEM_SPELLBOOK
 			reftypeminor = FILTER_NOTHING
 			inv(INV_ITEM_NUM, ci) = 1
 			fixeditemenc = 0
 			inv(INV_ITEM_IDENTIFY_LEVEL, ci) = 0
-			inv(INV_ITEM_CHARGE, ci) = 4 + rnd(4) - rnd(4)
-			ibitmod ITEM_BIT_CHARGE_ITEM, ci, 1
+			inv((9 /*!!!@[INV_ITEM_AMMO @@@ INV_ITEM_CHARGE @@@ INV_ITEM_CLIENT @@@ INV_ITEM_FILE @@@ INV_ITEM_NEXT_PERIOD]@!!! */), ci) = 4 + rnd(4) - rnd(4)
+			ibitmod ITEM_BIT_CHARGE_ITEM, ci, TRUE
 			return
 		}
 		if ( dbmode == DBMODE_REF ) {
 			ichargelevel = 4
 			infilterref = ""
 			reftype = FILTER_ITEM_SPELLBOOK
 			return
 		}
 		if ( dbmode == DBMODE_REF_SPEC ) {
 			if ( dbspec == DBSPEC_TYPE ) {
-				return FILTER_ITEM_SPELLBOOK
+				return 54000
 			}
 			if ( dbspec == DBSPEC_TYPE_MINOR ) {
-				return FILTER_NONE
+				return 99999
 			}
 			if ( dbspec == DBSPEC_VALUE_ORG ) {
 				return 4200
 			}
 			if ( dbspec == DBSPEC_PARAM3_ORG ) {
@@ -104453,14 +106428,14 @@
 			reftype = FILTER_ITEM_SCROLL
 			return
 		}
 		if ( dbmode == DBMODE_REF_SPEC ) {
 			if ( dbspec == DBSPEC_TYPE ) {
-				return FILTER_ITEM_SCROLL
+				return 53000
 			}
 			if ( dbspec == DBSPEC_TYPE_MINOR ) {
-				return FILTER_NONE
+				return 99999
 			}
 			if ( dbspec == DBSPEC_VALUE_ORG ) {
 				return 200
 			}
 			if ( dbspec == DBSPEC_PARAM3_ORG ) {
@@ -104523,14 +106498,14 @@
 			reftype = FILTER_ITEM_SCROLL
 			return
 		}
 		if ( dbmode == DBMODE_REF_SPEC ) {
 			if ( dbspec == DBSPEC_TYPE ) {
-				return FILTER_ITEM_SCROLL
+				return 53000
 			}
 			if ( dbspec == DBSPEC_TYPE_MINOR ) {
-				return FILTER_NONE
+				return 99999
 			}
 			if ( dbspec == DBSPEC_VALUE_ORG ) {
 				return 8000
 			}
 			if ( dbspec == DBSPEC_PARAM3_ORG ) {
@@ -104593,14 +106568,14 @@
 			reftype = FILTER_ITEM_SCROLL
 			return
 		}
 		if ( dbmode == DBMODE_REF_SPEC ) {
 			if ( dbspec == DBSPEC_TYPE ) {
-				return FILTER_ITEM_SCROLL
+				return 53000
 			}
 			if ( dbspec == DBSPEC_TYPE_MINOR ) {
-				return FILTER_NONE
+				return 99999
 			}
 			if ( dbspec == DBSPEC_VALUE_ORG ) {
 				return 24000
 			}
 			if ( dbspec == DBSPEC_PARAM3_ORG ) {
@@ -104663,14 +106638,14 @@
 			reftype = FILTER_ITEM_SCROLL
 			return
 		}
 		if ( dbmode == DBMODE_REF_SPEC ) {
 			if ( dbspec == DBSPEC_TYPE ) {
-				return FILTER_ITEM_SCROLL
+				return 53000
 			}
 			if ( dbspec == DBSPEC_TYPE_MINOR ) {
-				return FILTER_NONE
+				return 99999
 			}
 			if ( dbspec == DBSPEC_VALUE_ORG ) {
 				return 480
 			}
 			if ( dbspec == DBSPEC_PARAM3_ORG ) {
@@ -104733,14 +106708,14 @@
 			reftype = FILTER_CONTAINER
 			return
 		}
 		if ( dbmode == DBMODE_REF_SPEC ) {
 			if ( dbspec == DBSPEC_TYPE ) {
-				return FILTER_CONTAINER
+				return 72000
 			}
 			if ( dbspec == DBSPEC_TYPE_MINOR ) {
-				return FILTER_NONE
+				return 99999
 			}
 			if ( dbspec == DBSPEC_VALUE_ORG ) {
 				return 1000
 			}
 			if ( dbspec == DBSPEC_PARAM3_ORG ) {
@@ -104794,14 +106769,14 @@
 			reftype = FILTER_CONTAINER
 			return
 		}
 		if ( dbmode == DBMODE_REF_SPEC ) {
 			if ( dbspec == DBSPEC_TYPE ) {
-				return FILTER_CONTAINER
+				return 72000
 			}
 			if ( dbspec == DBSPEC_TYPE_MINOR ) {
-				return FILTER_NONE
+				return 99999
 			}
 			if ( dbspec == DBSPEC_VALUE_ORG ) {
 				return 1200
 			}
 			if ( dbspec == DBSPEC_PARAM3_ORG ) {
@@ -104855,14 +106830,14 @@
 			reftype = FILTER_CONTAINER
 			return
 		}
 		if ( dbmode == DBMODE_REF_SPEC ) {
 			if ( dbspec == DBSPEC_TYPE ) {
-				return FILTER_CONTAINER
+				return 72000
 			}
 			if ( dbspec == DBSPEC_TYPE_MINOR ) {
-				return FILTER_NONE
+				return 99999
 			}
 			if ( dbspec == DBSPEC_VALUE_ORG ) {
 				return 3000
 			}
 			if ( dbspec == DBSPEC_PARAM3_ORG ) {
@@ -104916,14 +106891,14 @@
 			reftype = FILTER_FURNITURE
 			return
 		}
 		if ( dbmode == DBMODE_REF_SPEC ) {
 			if ( dbspec == DBSPEC_TYPE ) {
-				return FILTER_FURNITURE
+				return 60000
 			}
 			if ( dbspec == DBSPEC_TYPE_MINOR ) {
-				return FILTER_NONE
+				return 99999
 			}
 			if ( dbspec == DBSPEC_VALUE_ORG ) {
 				return 2000
 			}
 			if ( dbspec == DBSPEC_PARAM3_ORG ) {
@@ -104977,14 +106952,14 @@
 			reftype = FILTER_FURNITURE
 			return
 		}
 		if ( dbmode == DBMODE_REF_SPEC ) {
 			if ( dbspec == DBSPEC_TYPE ) {
-				return FILTER_FURNITURE
+				return 60000
 			}
 			if ( dbspec == DBSPEC_TYPE_MINOR ) {
-				return FILTER_NONE
+				return 99999
 			}
 			if ( dbspec == DBSPEC_VALUE_ORG ) {
 				return 2000
 			}
 			if ( dbspec == DBSPEC_PARAM3_ORG ) {
@@ -105038,14 +107013,14 @@
 			reftype = FILTER_ITEM_SCROLL
 			return
 		}
 		if ( dbmode == DBMODE_REF_SPEC ) {
 			if ( dbspec == DBSPEC_TYPE ) {
-				return FILTER_ITEM_SCROLL
+				return 53000
 			}
 			if ( dbspec == DBSPEC_TYPE_MINOR ) {
-				return FILTER_NONE
+				return 99999
 			}
 			if ( dbspec == DBSPEC_VALUE_ORG ) {
 				return 750
 			}
 			if ( dbspec == DBSPEC_PARAM3_ORG ) {
@@ -105114,14 +107089,14 @@
 			reftype = FILTER_WEAPON
 			return
 		}
 		if ( dbmode == DBMODE_REF_SPEC ) {
 			if ( dbspec == DBSPEC_TYPE ) {
-				return FILTER_WEAPON
+				return 10000
 			}
 			if ( dbspec == DBSPEC_TYPE_MINOR ) {
-				return FILTER_WEAPON_HEAVY_POLEARM
+				return 10008
 			}
 			if ( dbspec == DBSPEC_VALUE_ORG ) {
 				return 500
 			}
 			if ( dbspec == DBSPEC_PARAM3_ORG ) {
@@ -105181,14 +107156,14 @@
 			reftype = FILTER_WEAPON
 			return
 		}
 		if ( dbmode == DBMODE_REF_SPEC ) {
 			if ( dbspec == DBSPEC_TYPE ) {
-				return FILTER_WEAPON
+				return 10000
 			}
 			if ( dbspec == DBSPEC_TYPE_MINOR ) {
-				return FILTER_WEAPON_LARGE_AXE
+				return 10010
 			}
 			if ( dbspec == DBSPEC_VALUE_ORG ) {
 				return 500
 			}
 			if ( dbspec == DBSPEC_PARAM3_ORG ) {
@@ -105243,14 +107218,14 @@
 			reftype = FILTER_ITEM_FOOD
 			return
 		}
 		if ( dbmode == DBMODE_REF_SPEC ) {
 			if ( dbspec == DBSPEC_TYPE ) {
-				return FILTER_ITEM_FOOD
+				return 57000
 			}
 			if ( dbspec == DBSPEC_TYPE_MINOR ) {
-				return FILTER_NONE
+				return 99999
 			}
 			if ( dbspec == DBSPEC_VALUE_ORG ) {
 				return 280
 			}
 			if ( dbspec == DBSPEC_PARAM3_ORG ) {
@@ -105310,14 +107285,14 @@
 			reftype = FILTER_WEAPON
 			return
 		}
 		if ( dbmode == DBMODE_REF_SPEC ) {
 			if ( dbspec == DBSPEC_TYPE ) {
-				return FILTER_WEAPON
+				return 10000
 			}
 			if ( dbspec == DBSPEC_TYPE_MINOR ) {
-				return FILTER_WEAPON_HEAVY_SWORD
+				return 10001
 			}
 			if ( dbspec == DBSPEC_VALUE_ORG ) {
 				return 500
 			}
 			if ( dbspec == DBSPEC_PARAM3_ORG ) {
@@ -105377,14 +107352,14 @@
 			reftype = FILTER_RANGE
 			return
 		}
 		if ( dbmode == DBMODE_REF_SPEC ) {
 			if ( dbspec == DBSPEC_TYPE ) {
-				return FILTER_RANGE
+				return 24000
 			}
 			if ( dbspec == DBSPEC_TYPE_MINOR ) {
-				return FILTER_RANGE_PISTOL
+				return 24020
 			}
 			if ( dbspec == DBSPEC_VALUE_ORG ) {
 				return 500
 			}
 			if ( dbspec == DBSPEC_PARAM3_ORG ) {
@@ -105436,11 +107411,11 @@
 			inv(INV_ITEM_WEIGHT, ci) = 800
 		}
 		if ( dbmode == DBMODE_SET ) {
 			inv(INV_ITEM_SKILL_REF, ci) = SKILL_WEAPON_BOW
 			inv(INV_ITEM_ID, ci) = ITEM_ID_SHORT_BOW
-			inv(INV_ITEM_PIC, ci) = 989
+			inv(INV_ITEM_PIC, ci) = xy2pic(32, 29)
 			reftype = FILTER_RANGE
 			reftypeminor = FILTER_RANGE_SHORTBOW
 			inv(INV_ITEM_NUM, ci) = 1
 			fixeditemenc = ENCHANT_SKILL * EXT_ENCHANTMENT + SKILL_NORMAL_EVASION, 250, 0
 			inv(INV_ITEM_IDENTIFY_LEVEL, ci) = 0
@@ -105452,14 +107427,14 @@
 			reftype = FILTER_RANGE
 			return
 		}
 		if ( dbmode == DBMODE_REF_SPEC ) {
 			if ( dbspec == DBSPEC_TYPE ) {
-				return FILTER_RANGE
+				return 24000
 			}
 			if ( dbspec == DBSPEC_TYPE_MINOR ) {
-				return FILTER_RANGE_SHORTBOW
+				return 24001
 			}
 			if ( dbspec == DBSPEC_VALUE_ORG ) {
 				return 500
 			}
 			if ( dbspec == DBSPEC_PARAM3_ORG ) {
@@ -105528,14 +107503,14 @@
 			reftype = FILTER_WEAPON
 			return
 		}
 		if ( dbmode == DBMODE_REF_SPEC ) {
 			if ( dbspec == DBSPEC_TYPE ) {
-				return FILTER_WEAPON
+				return 10000
 			}
 			if ( dbspec == DBSPEC_TYPE_MINOR ) {
-				return FILTER_WEAPON_STAVE
+				return 10006
 			}
 			if ( dbspec == DBSPEC_VALUE_ORG ) {
 				return 500
 			}
 			if ( dbspec == DBSPEC_PARAM3_ORG ) {
@@ -105596,14 +107571,14 @@
 			reftype = FILTER_WEAPON
 			return
 		}
 		if ( dbmode == DBMODE_REF_SPEC ) {
 			if ( dbspec == DBSPEC_TYPE ) {
-				return FILTER_WEAPON
+				return 10000
 			}
 			if ( dbspec == DBSPEC_TYPE_MINOR ) {
-				return FILTER_WEAPON_POLEARM
+				return 10007
 			}
 			if ( dbspec == DBSPEC_VALUE_ORG ) {
 				return 500
 			}
 			if ( dbspec == DBSPEC_PARAM3_ORG ) {
@@ -105651,11 +107626,11 @@
 			inv(INV_ITEM_ID, ci) = ITEM_ID_HAMMER
 			inv(INV_ITEM_PIC, ci) = xy2pic(9, 15)
 			reftype = FILTER_WEAPON
 			reftypeminor = FILTER_WEAPON_HAMMER
 			inv(INV_ITEM_NUM, ci) = 1
-			fixeditemenc = ENCHANT_RES_FEAR, 100, 0
+			fixeditemenc = 26, 100, 0
 			inv(INV_ITEM_IDENTIFY_LEVEL, ci) = 0
 			return
 		}
 		if ( dbmode == DBMODE_REF ) {
 			ichargelevel = 0
@@ -105663,14 +107638,14 @@
 			reftype = FILTER_WEAPON
 			return
 		}
 		if ( dbmode == DBMODE_REF_SPEC ) {
 			if ( dbspec == DBSPEC_TYPE ) {
-				return FILTER_WEAPON
+				return 10000
 			}
 			if ( dbspec == DBSPEC_TYPE_MINOR ) {
-				return FILTER_WEAPON_HAMMER
+				return 10005
 			}
 			if ( dbspec == DBSPEC_VALUE_ORG ) {
 				return 500
 			}
 			if ( dbspec == DBSPEC_PARAM3_ORG ) {
@@ -105730,14 +107705,14 @@
 			reftype = FILTER_WEAPON
 			return
 		}
 		if ( dbmode == DBMODE_REF_SPEC ) {
 			if ( dbspec == DBSPEC_TYPE ) {
-				return FILTER_WEAPON
+				return 10000
 			}
 			if ( dbspec == DBSPEC_TYPE_MINOR ) {
-				return FILTER_WEAPON_LARGE_AXE
+				return 10010
 			}
 			if ( dbspec == DBSPEC_VALUE_ORG ) {
 				return 500
 			}
 			if ( dbspec == DBSPEC_PARAM3_ORG ) {
@@ -105798,14 +107773,14 @@
 			reftype = FILTER_WEAPON
 			return
 		}
 		if ( dbmode == DBMODE_REF_SPEC ) {
 			if ( dbspec == DBSPEC_TYPE ) {
-				return FILTER_WEAPON
+				return 10000
 			}
 			if ( dbspec == DBSPEC_TYPE_MINOR ) {
-				return FILTER_WEAPON_SHORTSWORD
+				return 10003
 			}
 			if ( dbspec == DBSPEC_VALUE_ORG ) {
 				return 500
 			}
 			if ( dbspec == DBSPEC_PARAM3_ORG ) {
@@ -105864,14 +107839,14 @@
 			reftype = FILTER_WEAPON
 			return
 		}
 		if ( dbmode == DBMODE_REF_SPEC ) {
 			if ( dbspec == DBSPEC_TYPE ) {
-				return FILTER_WEAPON
+				return 10000
 			}
 			if ( dbspec == DBSPEC_TYPE_MINOR ) {
-				return FILTER_WEAPON_LONGSWORD
+				return 10002
 			}
 			if ( dbspec == DBSPEC_VALUE_ORG ) {
 				return 500
 			}
 			if ( dbspec == DBSPEC_PARAM3_ORG ) {
@@ -105927,14 +107902,14 @@
 			reftype = FILTER_ITEM_TOOL
 			return
 		}
 		if ( dbmode == DBMODE_REF_SPEC ) {
 			if ( dbspec == DBSPEC_TYPE ) {
-				return FILTER_ITEM_TOOL
+				return 59000
 			}
 			if ( dbspec == DBSPEC_TYPE_MINOR ) {
-				return FILTER_NONE
+				return 99999
 			}
 			if ( dbspec == DBSPEC_VALUE_ORG ) {
 				return 150
 			}
 			if ( dbspec == DBSPEC_PARAM3_ORG ) {
@@ -105988,14 +107963,14 @@
 			reftype = FILTER_JUNK
 			return
 		}
 		if ( dbmode == DBMODE_REF_SPEC ) {
 			if ( dbspec == DBSPEC_TYPE ) {
-				return FILTER_JUNK
+				return 64000
 			}
 			if ( dbspec == DBSPEC_TYPE_MINOR ) {
-				return FILTER_JUNK
+				return 64000
 			}
 			if ( dbspec == DBSPEC_VALUE_ORG ) {
 				return 8
 			}
 			if ( dbspec == DBSPEC_PARAM3_ORG ) {
@@ -106049,14 +108024,14 @@
 			reftype = FILTER_JUNK
 			return
 		}
 		if ( dbmode == DBMODE_REF_SPEC ) {
 			if ( dbspec == DBSPEC_TYPE ) {
-				return FILTER_JUNK
+				return 64000
 			}
 			if ( dbspec == DBSPEC_TYPE_MINOR ) {
-				return FILTER_NONE
+				return 99999
 			}
 			if ( dbspec == DBSPEC_VALUE_ORG ) {
 				return 7
 			}
 			if ( dbspec == DBSPEC_PARAM3_ORG ) {
@@ -106110,14 +108085,14 @@
 			reftype = FILTER_JUNK
 			return
 		}
 		if ( dbmode == DBMODE_REF_SPEC ) {
 			if ( dbspec == DBSPEC_TYPE ) {
-				return FILTER_JUNK
+				return 64000
 			}
 			if ( dbspec == DBSPEC_TYPE_MINOR ) {
-				return FILTER_JUNK
+				return 64000
 			}
 			if ( dbspec == DBSPEC_VALUE_ORG ) {
 				return 4
 			}
 			if ( dbspec == DBSPEC_PARAM3_ORG ) {
@@ -106180,14 +108155,14 @@
 			reftype = FILTER_ITEM_TOOL
 			return
 		}
 		if ( dbmode == DBMODE_REF_SPEC ) {
 			if ( dbspec == DBSPEC_TYPE ) {
-				return FILTER_ITEM_TOOL
+				return 59000
 			}
 			if ( dbspec == DBSPEC_TYPE_MINOR ) {
-				return FILTER_JUNK
+				return 64000
 			}
 			if ( dbspec == DBSPEC_VALUE_ORG ) {
 				return 180
 			}
 			if ( dbspec == DBSPEC_PARAM3_ORG ) {
@@ -106241,14 +108216,14 @@
 			reftype = FILTER_JUNK
 			return
 		}
 		if ( dbmode == DBMODE_REF_SPEC ) {
 			if ( dbspec == DBSPEC_TYPE ) {
-				return FILTER_JUNK
+				return 64000
 			}
 			if ( dbspec == DBSPEC_TYPE_MINOR ) {
-				return FILTER_NONE
+				return 99999
 			}
 			if ( dbspec == DBSPEC_VALUE_ORG ) {
 				return 30
 			}
 			if ( dbspec == DBSPEC_PARAM3_ORG ) {
@@ -106302,14 +108277,14 @@
 			reftype = FILTER_JUNK
 			return
 		}
 		if ( dbmode == DBMODE_REF_SPEC ) {
 			if ( dbspec == DBSPEC_TYPE ) {
-				return FILTER_JUNK
+				return 64000
 			}
 			if ( dbspec == DBSPEC_TYPE_MINOR ) {
-				return FILTER_NONE
+				return 99999
 			}
 			if ( dbspec == DBSPEC_VALUE_ORG ) {
 				return 25
 			}
 			if ( dbspec == DBSPEC_PARAM3_ORG ) {
@@ -106363,14 +108338,14 @@
 			reftype = FILTER_JUNK
 			return
 		}
 		if ( dbmode == DBMODE_REF_SPEC ) {
 			if ( dbspec == DBSPEC_TYPE ) {
-				return FILTER_JUNK
+				return 64000
 			}
 			if ( dbspec == DBSPEC_TYPE_MINOR ) {
-				return FILTER_NONE
+				return 99999
 			}
 			if ( dbspec == DBSPEC_VALUE_ORG ) {
 				return 40
 			}
 			if ( dbspec == DBSPEC_PARAM3_ORG ) {
@@ -106424,14 +108399,14 @@
 			reftype = FILTER_JUNK
 			return
 		}
 		if ( dbmode == DBMODE_REF_SPEC ) {
 			if ( dbspec == DBSPEC_TYPE ) {
-				return FILTER_JUNK
+				return 64000
 			}
 			if ( dbspec == DBSPEC_TYPE_MINOR ) {
-				return FILTER_JUNK_TOWN
+				return 64100
 			}
 			if ( dbspec == DBSPEC_VALUE_ORG ) {
 				return 10
 			}
 			if ( dbspec == DBSPEC_PARAM3_ORG ) {
@@ -106485,14 +108460,14 @@
 			reftype = FILTER_JUNK
 			return
 		}
 		if ( dbmode == DBMODE_REF_SPEC ) {
 			if ( dbspec == DBSPEC_TYPE ) {
-				return FILTER_JUNK
+				return 64000
 			}
 			if ( dbspec == DBSPEC_TYPE_MINOR ) {
-				return FILTER_JUNK
+				return 64000
 			}
 			if ( dbspec == DBSPEC_VALUE_ORG ) {
 				return 180
 			}
 			if ( dbspec == DBSPEC_PARAM3_ORG ) {
@@ -106541,11 +108516,11 @@
 			inv(INV_ITEM_ID, ci) = ITEM_ID_SPEAR
 			inv(INV_ITEM_PIC, ci) = xy2pic(5, 12)
 			reftype = FILTER_WEAPON
 			reftypeminor = FILTER_WEAPON_POLEARM
 			inv(INV_ITEM_NUM, ci) = 1
-			fixeditemenc = ENCHANT_PIERCING_CHANCE, 50, 0
+			fixeditemenc = 39, 50, 0
 			inv(INV_ITEM_IDENTIFY_LEVEL, ci) = 0
 			return
 		}
 		if ( dbmode == DBMODE_REF ) {
 			ichargelevel = 0
@@ -106553,14 +108528,14 @@
 			reftype = FILTER_WEAPON
 			return
 		}
 		if ( dbmode == DBMODE_REF_SPEC ) {
 			if ( dbspec == DBSPEC_TYPE ) {
-				return FILTER_WEAPON
+				return 10000
 			}
 			if ( dbspec == DBSPEC_TYPE_MINOR ) {
-				return FILTER_WEAPON_POLEARM
+				return 10007
 			}
 			if ( dbspec == DBSPEC_VALUE_ORG ) {
 				return 500
 			}
 			if ( dbspec == DBSPEC_PARAM3_ORG ) {
@@ -106621,14 +108596,14 @@
 			reftype = FILTER_WEAPON
 			return
 		}
 		if ( dbmode == DBMODE_REF_SPEC ) {
 			if ( dbspec == DBSPEC_TYPE ) {
-				return FILTER_WEAPON
+				return 10000
 			}
 			if ( dbspec == DBSPEC_TYPE_MINOR ) {
-				return FILTER_WEAPON_STAVE
+				return 10006
 			}
 			if ( dbspec == DBSPEC_VALUE_ORG ) {
 				return 500
 			}
 			if ( dbspec == DBSPEC_PARAM3_ORG ) {
@@ -106688,14 +108663,14 @@
 			reftype = FILTER_WEAPON
 			return
 		}
 		if ( dbmode == DBMODE_REF_SPEC ) {
 			if ( dbspec == DBSPEC_TYPE ) {
-				return FILTER_WEAPON
+				return 10000
 			}
 			if ( dbspec == DBSPEC_TYPE_MINOR ) {
-				return FILTER_WEAPON_SICKLE
+				return 10011
 			}
 			if ( dbspec == DBSPEC_VALUE_ORG ) {
 				return 500
 			}
 			if ( dbspec == DBSPEC_PARAM3_ORG ) {
@@ -106753,14 +108728,14 @@
 			reftype = FILTER_RANGE
 			return
 		}
 		if ( dbmode == DBMODE_REF_SPEC ) {
 			if ( dbspec == DBSPEC_TYPE ) {
-				return FILTER_RANGE
+				return 24000
 			}
 			if ( dbspec == DBSPEC_TYPE_MINOR ) {
-				return FILTER_RANGE_ROCK_THROW
+				return 24030
 			}
 			if ( dbspec == DBSPEC_VALUE_ORG ) {
 				return 180
 			}
 			if ( dbspec == DBSPEC_PARAM3_ORG ) {
@@ -106814,14 +108789,14 @@
 			reftype = FILTER_ITEM_SCROLL
 			return
 		}
 		if ( dbmode == DBMODE_REF_SPEC ) {
 			if ( dbspec == DBSPEC_TYPE ) {
-				return FILTER_ITEM_SCROLL
+				return 53000
 			}
 			if ( dbspec == DBSPEC_TYPE_MINOR ) {
-				return FILTER_NONE
+				return 99999
 			}
 			if ( dbspec == DBSPEC_VALUE_ORG ) {
 				return 1050
 			}
 			if ( dbspec == DBSPEC_PARAM3_ORG ) {
@@ -106884,14 +108859,14 @@
 			reftype = FILTER_ORE
 			return
 		}
 		if ( dbmode == DBMODE_REF_SPEC ) {
 			if ( dbspec == DBSPEC_TYPE ) {
-				return FILTER_ORE
+				return 77000
 			}
 			if ( dbspec == DBSPEC_TYPE_MINOR ) {
-				return FILTER_NONE
+				return 99999
 			}
 			if ( dbspec == DBSPEC_VALUE_ORG ) {
 				return 1
 			}
 			if ( dbspec == DBSPEC_PARAM3_ORG ) {
@@ -106940,11 +108915,11 @@
 			inv(INV_ITEM_PIC, ci) = xy2pic(8, 12)
 			reftype = FILTER_RANGE
 			reftypeminor = FILTER_RANGE_SHORTBOW
 			inv(INV_ITEM_NUM, ci) = 1
 			fixeditemenc = ENCHANT_PROC * EXT_ENCHANTMENT + ENCHANT_PROC_DRAW_SHADOW, 100, ENCHANT_SUSTAIN * EXT_ENCHANTMENT + SKILL_ATTR_DEX, 100, ENCHANT_SUSTAIN * EXT_ENCHANTMENT + SKILL_ATTR_PER, 100, ENCHANT_ATTRIBUTE * EXT_ENCHANTMENT + SKILL_ATTR_DEX, 450, ENCHANT_RESISTANCE * EXT_ENCHANTMENT + SKILL_RES_POISON, 300, ENCHANT_ELEMENTAL_DMG * EXT_ENCHANTMENT + SKILL_RES_POISON, 300, 0
-			ibitmod ITEM_BIT_PRECIOUS, ci, 1
+			ibitmod ITEM_BIT_PRECIOUS, ci, TRUE
 			inv(INV_ITEM_IDENTIFY_LEVEL, ci) = 500
 			fixlv = FIX_QUALITY_UNIQUE
 			return
 		}
 		if ( dbmode == DBMODE_REF ) {
@@ -106953,14 +108928,14 @@
 			reftype = FILTER_RANGE
 			return
 		}
 		if ( dbmode == DBMODE_REF_SPEC ) {
 			if ( dbspec == DBSPEC_TYPE ) {
-				return FILTER_RANGE
+				return 24000
 			}
 			if ( dbspec == DBSPEC_TYPE_MINOR ) {
-				return FILTER_RANGE_SHORTBOW
+				return 24001
 			}
 			if ( dbspec == DBSPEC_VALUE_ORG ) {
 				return 60000
 			}
 			if ( dbspec == DBSPEC_PARAM3_ORG ) {
@@ -107011,11 +108986,11 @@
 			inv(INV_ITEM_PIC, ci) = xy2pic(4, 12)
 			reftype = FILTER_WEAPON
 			reftypeminor = FILTER_WEAPON_SHORTSWORD
 			inv(INV_ITEM_NUM, ci) = 1
 			fixeditemenc = ENCHANT_PROC * EXT_ENCHANTMENT + ENCHANT_PROC_ELEMENT_SCAR, 200, ENCHANT_ELEMENTAL_DMG * EXT_ENCHANTMENT + SKILL_RES_LIGHTNING, 300, ENCHANT_RESISTANCE * EXT_ENCHANTMENT + SKILL_RES_LIGHTNING, 250, ENCHANT_SKILL * EXT_ENCHANTMENT + SKILL_NORMAL_CASTING, 350, 0
-			ibitmod ITEM_BIT_PRECIOUS, ci, 1
+			ibitmod ITEM_BIT_PRECIOUS, ci, TRUE
 			inv(INV_ITEM_IDENTIFY_LEVEL, ci) = 500
 			fixlv = FIX_QUALITY_UNIQUE
 			return
 		}
 		if ( dbmode == DBMODE_REF ) {
@@ -107024,14 +108999,14 @@
 			reftype = FILTER_WEAPON
 			return
 		}
 		if ( dbmode == DBMODE_REF_SPEC ) {
 			if ( dbspec == DBSPEC_TYPE ) {
-				return FILTER_WEAPON
+				return 10000
 			}
 			if ( dbspec == DBSPEC_TYPE_MINOR ) {
-				return FILTER_WEAPON_SHORTSWORD
+				return 10003
 			}
 			if ( dbspec == DBSPEC_VALUE_ORG ) {
 				return 60000
 			}
 			if ( dbspec == DBSPEC_PARAM3_ORG ) {
@@ -107085,14 +109060,14 @@
 			reftype = FILTER_ITEM_POTION
 			return
 		}
 		if ( dbmode == DBMODE_REF_SPEC ) {
 			if ( dbspec == DBSPEC_TYPE ) {
-				return FILTER_ITEM_POTION
+				return 52000
 			}
 			if ( dbspec == DBSPEC_TYPE_MINOR ) {
-				return FILTER_ITEM_POTION_ALE
+				return 52002
 			}
 			if ( dbspec == DBSPEC_VALUE_ORG ) {
 				return 180
 			}
 			if ( dbspec == DBSPEC_PARAM3_ORG ) {
@@ -107158,14 +109133,14 @@
 			reftype = FILTER_ITEM_FOOD
 			return
 		}
 		if ( dbmode == DBMODE_REF_SPEC ) {
 			if ( dbspec == DBSPEC_TYPE ) {
-				return FILTER_ITEM_FOOD
+				return 57000
 			}
 			if ( dbspec == DBSPEC_TYPE_MINOR ) {
-				return FILTER_NONE
+				return 99999
 			}
 			if ( dbspec == DBSPEC_VALUE_ORG ) {
 				return 80
 			}
 			if ( dbspec == DBSPEC_PARAM3_ORG ) {
@@ -107179,11 +109154,16 @@
 			}
 			if ( dbspec == DBSPEC_RARE_LEVEL ) {
 				return 1000
 			}
 			if ( dbspec == DBSPEC_OFFER ) {
-				return 1
+				if ( 1 ) {
+					return 1
+				}
+				else {
+					return 0
+				}
 			}
 			return 0
 		}
 		if ( dbmode == DBMODE_DESC ) {
 			if ( jp ) {
@@ -107208,30 +109188,30 @@
 		}
 		if ( dbmode == DBMODE_SET ) {
 			inv(INV_ITEM_ID, ci) = ITEM_ID_ROD_CURE
 			inv(INV_ITEM_PIC, ci) = xy2pic(9, 14)
 			reftype = FILTER_ITEM_ROD
-			reftypeminor = FILTER_ITEM_ROD_HEALING
+			reftypeminor = FILTER_ITEM_ROD
 			inv(INV_ITEM_NUM, ci) = 1
 			fixeditemenc = 0
 			inv(INV_ITEM_IDENTIFY_LEVEL, ci) = 0
-			inv(INV_ITEM_CHARGE, ci) = 8 + rnd(8) - rnd(8)
-			ibitmod ITEM_BIT_CHARGE_ITEM, ci, 1
+			inv((9 /*!!!@[INV_ITEM_AMMO @@@ INV_ITEM_CHARGE @@@ INV_ITEM_CLIENT @@@ INV_ITEM_FILE @@@ INV_ITEM_NEXT_PERIOD]@!!! */), ci) = 8 + rnd(8) - rnd(8)
+			ibitmod ITEM_BIT_CHARGE_ITEM, ci, TRUE
 			return
 		}
 		if ( dbmode == DBMODE_REF ) {
 			ichargelevel = 8
 			infilterref = ""
 			reftype = FILTER_ITEM_ROD
 			return
 		}
 		if ( dbmode == DBMODE_REF_SPEC ) {
 			if ( dbspec == DBSPEC_TYPE ) {
-				return FILTER_ITEM_ROD
+				return 56000
 			}
 			if ( dbspec == DBSPEC_TYPE_MINOR ) {
-				return FILTER_ITEM_ROD_HEALING
+				return 56000
 			}
 			if ( dbspec == DBSPEC_VALUE_ORG ) {
 				return 2600
 			}
 			if ( dbspec == DBSPEC_PARAM3_ORG ) {
@@ -107291,26 +109271,26 @@
 			reftype = FILTER_ITEM_ROD
 			reftypeminor = FILTER_ITEM_ROD_UTILITY
 			inv(INV_ITEM_NUM, ci) = 1
 			fixeditemenc = 0
 			inv(INV_ITEM_IDENTIFY_LEVEL, ci) = 0
-			inv(INV_ITEM_CHARGE, ci) = 9 + rnd(9) - rnd(9)
-			ibitmod ITEM_BIT_CHARGE_ITEM, ci, 1
+			inv((9 /*!!!@[INV_ITEM_AMMO @@@ INV_ITEM_CHARGE @@@ INV_ITEM_CLIENT @@@ INV_ITEM_FILE @@@ INV_ITEM_NEXT_PERIOD]@!!! */), ci) = 9 + rnd(9) - rnd(9)
+			ibitmod ITEM_BIT_CHARGE_ITEM, ci, TRUE
 			return
 		}
 		if ( dbmode == DBMODE_REF ) {
 			ichargelevel = 9
 			infilterref = ""
 			reftype = FILTER_ITEM_ROD
 			return
 		}
 		if ( dbmode == DBMODE_REF_SPEC ) {
 			if ( dbspec == DBSPEC_TYPE ) {
-				return FILTER_ITEM_ROD
+				return 56000
 			}
 			if ( dbspec == DBSPEC_TYPE_MINOR ) {
-				return FILTER_ITEM_ROD_UTILITY
+				return 56003
 			}
 			if ( dbspec == DBSPEC_VALUE_ORG ) {
 				return 3250
 			}
 			if ( dbspec == DBSPEC_PARAM3_ORG ) {
@@ -107383,14 +109363,14 @@
 			reftype = FILTER_ITEM_FOOD
 			return
 		}
 		if ( dbmode == DBMODE_REF_SPEC ) {
 			if ( dbspec == DBSPEC_TYPE ) {
-				return FILTER_ITEM_FOOD
+				return 57000
 			}
 			if ( dbspec == DBSPEC_TYPE_MINOR ) {
-				return FILTER_ITEM_FOOD_VEGETABLE
+				return 57003
 			}
 			if ( dbspec == DBSPEC_VALUE_ORG ) {
 				return 200
 			}
 			if ( dbspec == DBSPEC_PARAM3_ORG ) {
@@ -107455,14 +109435,14 @@
 			reftype = FILTER_ITEM_FOOD
 			return
 		}
 		if ( dbmode == DBMODE_REF_SPEC ) {
 			if ( dbspec == DBSPEC_TYPE ) {
-				return FILTER_ITEM_FOOD
+				return 57000
 			}
 			if ( dbspec == DBSPEC_TYPE_MINOR ) {
-				return FILTER_ITEM_FOOD_VEGETABLE
+				return 57003
 			}
 			if ( dbspec == DBSPEC_VALUE_ORG ) {
 				return 30
 			}
 			if ( dbspec == DBSPEC_PARAM3_ORG ) {
@@ -107527,14 +109507,14 @@
 			reftype = FILTER_ITEM_FOOD
 			return
 		}
 		if ( dbmode == DBMODE_REF_SPEC ) {
 			if ( dbspec == DBSPEC_TYPE ) {
-				return FILTER_ITEM_FOOD
+				return 57000
 			}
 			if ( dbspec == DBSPEC_TYPE_MINOR ) {
-				return FILTER_ITEM_FOOD_VEGETABLE
+				return 57003
 			}
 			if ( dbspec == DBSPEC_VALUE_ORG ) {
 				return 220
 			}
 			if ( dbspec == DBSPEC_PARAM3_ORG ) {
@@ -107599,14 +109579,14 @@
 			reftype = FILTER_ITEM_FOOD
 			return
 		}
 		if ( dbmode == DBMODE_REF_SPEC ) {
 			if ( dbspec == DBSPEC_TYPE ) {
-				return FILTER_ITEM_FOOD
+				return 57000
 			}
 			if ( dbspec == DBSPEC_TYPE_MINOR ) {
-				return FILTER_ITEM_FOOD_VEGETABLE
+				return 57003
 			}
 			if ( dbspec == DBSPEC_VALUE_ORG ) {
 				return 260
 			}
 			if ( dbspec == DBSPEC_PARAM3_ORG ) {
@@ -107671,14 +109651,14 @@
 			reftype = FILTER_ITEM_FOOD
 			return
 		}
 		if ( dbmode == DBMODE_REF_SPEC ) {
 			if ( dbspec == DBSPEC_TYPE ) {
-				return FILTER_ITEM_FOOD
+				return 57000
 			}
 			if ( dbspec == DBSPEC_TYPE_MINOR ) {
-				return FILTER_ITEM_FOOD_FRUIT
+				return 57004
 			}
 			if ( dbspec == DBSPEC_VALUE_ORG ) {
 				return 240
 			}
 			if ( dbspec == DBSPEC_PARAM3_ORG ) {
@@ -107735,14 +109715,14 @@
 			reftype = FILTER_ITEM_FOOD
 			return
 		}
 		if ( dbmode == DBMODE_REF_SPEC ) {
 			if ( dbspec == DBSPEC_TYPE ) {
-				return FILTER_ITEM_FOOD
+				return 57000
 			}
 			if ( dbspec == DBSPEC_TYPE_MINOR ) {
-				return FILTER_ITEM_FOOD_FRUIT
+				return 57004
 			}
 			if ( dbspec == DBSPEC_VALUE_ORG ) {
 				return 130
 			}
 			if ( dbspec == DBSPEC_PARAM3_ORG ) {
@@ -107799,14 +109779,14 @@
 			reftype = FILTER_ITEM_FOOD
 			return
 		}
 		if ( dbmode == DBMODE_REF_SPEC ) {
 			if ( dbspec == DBSPEC_TYPE ) {
-				return FILTER_ITEM_FOOD
+				return 57000
 			}
 			if ( dbspec == DBSPEC_TYPE_MINOR ) {
-				return FILTER_ITEM_FOOD_FRUIT
+				return 57004
 			}
 			if ( dbspec == DBSPEC_VALUE_ORG ) {
 				return 100
 			}
 			if ( dbspec == DBSPEC_PARAM3_ORG ) {
@@ -107863,14 +109843,14 @@
 			reftype = FILTER_ITEM_FOOD
 			return
 		}
 		if ( dbmode == DBMODE_REF_SPEC ) {
 			if ( dbspec == DBSPEC_TYPE ) {
-				return FILTER_ITEM_FOOD
+				return 57000
 			}
 			if ( dbspec == DBSPEC_TYPE_MINOR ) {
-				return FILTER_ITEM_FOOD_FRUIT
+				return 57004
 			}
 			if ( dbspec == DBSPEC_VALUE_ORG ) {
 				return 320
 			}
 			if ( dbspec == DBSPEC_PARAM3_ORG ) {
@@ -107925,14 +109905,14 @@
 			reftype = FILTER_ITEM_FOOD
 			return
 		}
 		if ( dbmode == DBMODE_REF_SPEC ) {
 			if ( dbspec == DBSPEC_TYPE ) {
-				return FILTER_ITEM_FOOD
+				return 57000
 			}
 			if ( dbspec == DBSPEC_TYPE_MINOR ) {
-				return FILTER_JUNK
+				return 64000
 			}
 			if ( dbspec == DBSPEC_VALUE_ORG ) {
 				return 240
 			}
 			if ( dbspec == DBSPEC_PARAM3_ORG ) {
@@ -107981,11 +109961,11 @@
 		}
 		if ( dbmode == DBMODE_SET ) {
 			inv(INV_ITEM_ID, ci) = ITEM_ID_STRAWBERRY
 			inv(INV_ITEM_PIC, ci) = xy2pic(19, 5)
 			reftype = FILTER_ITEM_FOOD
-			reftypeminor = FILTER_NONE
+			reftypeminor = FILTER_ITEM_FOOD_VEGETABLE
 			inv(INV_ITEM_NUM, ci) = 1
 			fixeditemenc = 0
 			inv(INV_ITEM_PARAM1, ci) = 3000
 			inv(INV_ITEM_PARAM3, ci) = 16
 			inv(INV_ITEM_IDENTIFY_LEVEL, ci) = 0
@@ -107997,14 +109977,14 @@
 			reftype = FILTER_ITEM_FOOD
 			return
 		}
 		if ( dbmode == DBMODE_REF_SPEC ) {
 			if ( dbspec == DBSPEC_TYPE ) {
-				return FILTER_ITEM_FOOD
+				return 57000
 			}
 			if ( dbspec == DBSPEC_TYPE_MINOR ) {
-				return FILTER_NONE
+				return 57003
 			}
 			if ( dbspec == DBSPEC_VALUE_ORG ) {
 				return 260
 			}
 			if ( dbspec == DBSPEC_PARAM3_ORG ) {
@@ -108059,14 +110039,14 @@
 			reftype = FILTER_ITEM_FOOD
 			return
 		}
 		if ( dbmode == DBMODE_REF_SPEC ) {
 			if ( dbspec == DBSPEC_TYPE ) {
-				return FILTER_ITEM_FOOD
+				return 57000
 			}
 			if ( dbspec == DBSPEC_TYPE_MINOR ) {
-				return FILTER_JUNK
+				return 64000
 			}
 			if ( dbspec == DBSPEC_VALUE_ORG ) {
 				return 80
 			}
 			if ( dbspec == DBSPEC_PARAM3_ORG ) {
@@ -108121,14 +110101,14 @@
 			reftype = FILTER_ITEM_FOOD
 			return
 		}
 		if ( dbmode == DBMODE_REF_SPEC ) {
 			if ( dbspec == DBSPEC_TYPE ) {
-				return FILTER_ITEM_FOOD
+				return 57000
 			}
 			if ( dbspec == DBSPEC_TYPE_MINOR ) {
-				return FILTER_ITEM_FOOD_VEGETABLE
+				return 57003
 			}
 			if ( dbspec == DBSPEC_VALUE_ORG ) {
 				return 140
 			}
 			if ( dbspec == DBSPEC_PARAM3_ORG ) {
@@ -108190,14 +110170,14 @@
 			reftype = FILTER_FURNITURE
 			return
 		}
 		if ( dbmode == DBMODE_REF_SPEC ) {
 			if ( dbspec == DBSPEC_TYPE ) {
-				return FILTER_FURNITURE
+				return 60000
 			}
 			if ( dbspec == DBSPEC_TYPE_MINOR ) {
-				return FILTER_NONE
+				return 99999
 			}
 			if ( dbspec == DBSPEC_VALUE_ORG ) {
 				return 120
 			}
 			if ( dbspec == DBSPEC_PARAM3_ORG ) {
@@ -108254,14 +110234,14 @@
 			reftype = FILTER_ITEM_FOOD
 			return
 		}
 		if ( dbmode == DBMODE_REF_SPEC ) {
 			if ( dbspec == DBSPEC_TYPE ) {
-				return FILTER_ITEM_FOOD
+				return 57000
 			}
 			if ( dbspec == DBSPEC_TYPE_MINOR ) {
-				return FILTER_ITEM_FOOD_VEGETABLE
+				return 57003
 			}
 			if ( dbspec == DBSPEC_VALUE_ORG ) {
 				return 50
 			}
 			if ( dbspec == DBSPEC_PARAM3_ORG ) {
@@ -108324,14 +110304,14 @@
 			reftype = FILTER_ITEM_FOOD
 			return
 		}
 		if ( dbmode == DBMODE_REF_SPEC ) {
 			if ( dbspec == DBSPEC_TYPE ) {
-				return FILTER_ITEM_FOOD
+				return 57000
 			}
 			if ( dbspec == DBSPEC_TYPE_MINOR ) {
-				return FILTER_ITEM_FOOD_VEGETABLE
+				return 57003
 			}
 			if ( dbspec == DBSPEC_VALUE_ORG ) {
 				return 40
 			}
 			if ( dbspec == DBSPEC_PARAM3_ORG ) {
@@ -108396,14 +110376,14 @@
 			reftype = FILTER_ITEM_FOOD
 			return
 		}
 		if ( dbmode == DBMODE_REF_SPEC ) {
 			if ( dbspec == DBSPEC_TYPE ) {
-				return FILTER_ITEM_FOOD
+				return 57000
 			}
 			if ( dbspec == DBSPEC_TYPE_MINOR ) {
-				return FILTER_ITEM_FOOD_VEGETABLE
+				return 57003
 			}
 			if ( dbspec == DBSPEC_VALUE_ORG ) {
 				return 60
 			}
 			if ( dbspec == DBSPEC_PARAM3_ORG ) {
@@ -108468,14 +110448,14 @@
 			reftype = FILTER_ITEM_FOOD
 			return
 		}
 		if ( dbmode == DBMODE_REF_SPEC ) {
 			if ( dbspec == DBSPEC_TYPE ) {
-				return FILTER_ITEM_FOOD
+				return 57000
 			}
 			if ( dbspec == DBSPEC_TYPE_MINOR ) {
-				return FILTER_ITEM_FOOD_VEGETABLE
+				return 57003
 			}
 			if ( dbspec == DBSPEC_VALUE_ORG ) {
 				return 190
 			}
 			if ( dbspec == DBSPEC_PARAM3_ORG ) {
@@ -108540,14 +110520,14 @@
 			reftype = FILTER_ITEM_FOOD
 			return
 		}
 		if ( dbmode == DBMODE_REF_SPEC ) {
 			if ( dbspec == DBSPEC_TYPE ) {
-				return FILTER_ITEM_FOOD
+				return 57000
 			}
 			if ( dbspec == DBSPEC_TYPE_MINOR ) {
-				return FILTER_ITEM_FOOD_VEGETABLE
+				return 57003
 			}
 			if ( dbspec == DBSPEC_VALUE_ORG ) {
 				return 240
 			}
 			if ( dbspec == DBSPEC_PARAM3_ORG ) {
@@ -108604,14 +110584,14 @@
 			reftype = FILTER_ITEM_FOOD
 			return
 		}
 		if ( dbmode == DBMODE_REF_SPEC ) {
 			if ( dbspec == DBSPEC_TYPE ) {
-				return FILTER_ITEM_FOOD
+				return 57000
 			}
 			if ( dbspec == DBSPEC_TYPE_MINOR ) {
-				return FILTER_ITEM_FOOD_FRUIT
+				return 57004
 			}
 			if ( dbspec == DBSPEC_VALUE_ORG ) {
 				return 170
 			}
 			if ( dbspec == DBSPEC_PARAM3_ORG ) {
@@ -108668,14 +110648,14 @@
 			reftype = FILTER_ITEM_FOOD
 			return
 		}
 		if ( dbmode == DBMODE_REF_SPEC ) {
 			if ( dbspec == DBSPEC_TYPE ) {
-				return FILTER_ITEM_FOOD
+				return 57000
 			}
 			if ( dbspec == DBSPEC_TYPE_MINOR ) {
-				return FILTER_ITEM_FOOD_FRUIT
+				return 57004
 			}
 			if ( dbspec == DBSPEC_VALUE_ORG ) {
 				return 140
 			}
 			if ( dbspec == DBSPEC_PARAM3_ORG ) {
@@ -108732,14 +110712,14 @@
 			reftype = FILTER_ITEM_FOOD
 			return
 		}
 		if ( dbmode == DBMODE_REF_SPEC ) {
 			if ( dbspec == DBSPEC_TYPE ) {
-				return FILTER_ITEM_FOOD
+				return 57000
 			}
 			if ( dbspec == DBSPEC_TYPE_MINOR ) {
-				return FILTER_ITEM_FOOD_FRUIT
+				return 57004
 			}
 			if ( dbspec == DBSPEC_VALUE_ORG ) {
 				return 150
 			}
 			if ( dbspec == DBSPEC_PARAM3_ORG ) {
@@ -108796,14 +110776,14 @@
 			reftype = FILTER_ITEM_FOOD
 			return
 		}
 		if ( dbmode == DBMODE_REF_SPEC ) {
 			if ( dbspec == DBSPEC_TYPE ) {
-				return FILTER_ITEM_FOOD
+				return 57000
 			}
 			if ( dbspec == DBSPEC_TYPE_MINOR ) {
-				return FILTER_ITEM_FOOD_FRUIT
+				return 57004
 			}
 			if ( dbspec == DBSPEC_VALUE_ORG ) {
 				return 360
 			}
 			if ( dbspec == DBSPEC_PARAM3_ORG ) {
@@ -108860,14 +110840,14 @@
 			reftype = FILTER_ITEM_FOOD
 			return
 		}
 		if ( dbmode == DBMODE_REF_SPEC ) {
 			if ( dbspec == DBSPEC_TYPE ) {
-				return FILTER_ITEM_FOOD
+				return 57000
 			}
 			if ( dbspec == DBSPEC_TYPE_MINOR ) {
-				return FILTER_JUNK
+				return 64000
 			}
 			if ( dbspec == DBSPEC_VALUE_ORG ) {
 				return 60
 			}
 			if ( dbspec == DBSPEC_PARAM3_ORG ) {
@@ -108932,14 +110912,14 @@
 			reftype = FILTER_ITEM_FOOD
 			return
 		}
 		if ( dbmode == DBMODE_REF_SPEC ) {
 			if ( dbspec == DBSPEC_TYPE ) {
-				return FILTER_ITEM_FOOD
+				return 57000
 			}
 			if ( dbspec == DBSPEC_TYPE_MINOR ) {
-				return FILTER_ITEM_FOOD_VEGETABLE
+				return 57003
 			}
 			if ( dbspec == DBSPEC_VALUE_ORG ) {
 				return 110
 			}
 			if ( dbspec == DBSPEC_PARAM3_ORG ) {
@@ -108996,14 +110976,14 @@
 			reftype = FILTER_ITEM_FOOD
 			return
 		}
 		if ( dbmode == DBMODE_REF_SPEC ) {
 			if ( dbspec == DBSPEC_TYPE ) {
-				return FILTER_ITEM_FOOD
+				return 57000
 			}
 			if ( dbspec == DBSPEC_TYPE_MINOR ) {
-				return FILTER_ITEM_FOOD_VEGETABLE
+				return 57003
 			}
 			if ( dbspec == DBSPEC_VALUE_ORG ) {
 				return 100
 			}
 			if ( dbspec == DBSPEC_PARAM3_ORG ) {
@@ -109047,26 +111027,26 @@
 			reftype = FILTER_ITEM_ROD
 			reftypeminor = FILTER_ITEM_ROD_ENVIRONMENTAL
 			inv(INV_ITEM_NUM, ci) = 1
 			fixeditemenc = 0
 			inv(INV_ITEM_IDENTIFY_LEVEL, ci) = 0
-			inv(INV_ITEM_CHARGE, ci) = 8 + rnd(8) - rnd(8)
-			ibitmod ITEM_BIT_CHARGE_ITEM, ci, 1
+			inv((9 /*!!!@[INV_ITEM_AMMO @@@ INV_ITEM_CHARGE @@@ INV_ITEM_CLIENT @@@ INV_ITEM_FILE @@@ INV_ITEM_NEXT_PERIOD]@!!! */), ci) = 8 + rnd(8) - rnd(8)
+			ibitmod ITEM_BIT_CHARGE_ITEM, ci, TRUE
 			return
 		}
 		if ( dbmode == DBMODE_REF ) {
 			ichargelevel = 8
 			infilterref = ""
 			reftype = FILTER_ITEM_ROD
 			return
 		}
 		if ( dbmode == DBMODE_REF_SPEC ) {
 			if ( dbspec == DBSPEC_TYPE ) {
-				return FILTER_ITEM_ROD
+				return 56000
 			}
 			if ( dbspec == DBSPEC_TYPE_MINOR ) {
-				return FILTER_ITEM_ROD_ENVIRONMENTAL
+				return 56004
 			}
 			if ( dbspec == DBSPEC_VALUE_ORG ) {
 				return 1500
 			}
 			if ( dbspec == DBSPEC_PARAM3_ORG ) {
@@ -109122,30 +111102,30 @@
 		}
 		if ( dbmode == DBMODE_SET ) {
 			inv(INV_ITEM_ID, ci) = ITEM_ID_ROD_LIGHTNING_BOLT
 			inv(INV_ITEM_PIC, ci) = xy2pic(9, 14)
 			reftype = FILTER_ITEM_ROD
-			reftypeminor = FILTER_ITEM_ROD_DAMAGE
+			reftypeminor = FILTER_ITEM_ROD
 			inv(INV_ITEM_NUM, ci) = 1
 			fixeditemenc = 0
 			inv(INV_ITEM_IDENTIFY_LEVEL, ci) = 0
-			inv(INV_ITEM_CHARGE, ci) = 15 + rnd(15) - rnd(15)
-			ibitmod ITEM_BIT_CHARGE_ITEM, ci, 1
+			inv((9 /*!!!@[INV_ITEM_AMMO @@@ INV_ITEM_CHARGE @@@ INV_ITEM_CLIENT @@@ INV_ITEM_FILE @@@ INV_ITEM_NEXT_PERIOD]@!!! */), ci) = 15 + rnd(15) - rnd(15)
+			ibitmod ITEM_BIT_CHARGE_ITEM, ci, TRUE
 			return
 		}
 		if ( dbmode == DBMODE_REF ) {
 			ichargelevel = 15
 			infilterref = ""
 			reftype = FILTER_ITEM_ROD
 			return
 		}
 		if ( dbmode == DBMODE_REF_SPEC ) {
 			if ( dbspec == DBSPEC_TYPE ) {
-				return FILTER_ITEM_ROD
+				return 56000
 			}
 			if ( dbspec == DBSPEC_TYPE_MINOR ) {
-				return FILTER_ITEM_ROD_DAMAGE
+				return 56000
 			}
 			if ( dbspec == DBSPEC_VALUE_ORG ) {
 				return 1900
 			}
 			if ( dbspec == DBSPEC_PARAM3_ORG ) {
@@ -109181,11 +111161,11 @@
 		if ( dbmode == DBMODE_DESC ) {
 			if ( jp ) {
 				description(0) = "\t\t特定の魔法が封じ込められた杖。半透明の黄色い宝石が取り付けられている。\n#〜魔具全典〜\n"
 				description(1) = ""
 				description(2) = ""
-				description(3) = "\t\t振ることで対象に雷属性のボルトを放つ魔法の杖だ。\n#〜鑑定報告書：＜魔道具＞カテゴリ〜\n"
+				description(3) = "\t\t振ることで対象に電撃属性のボルトを放つ魔法の杖だ。\n#〜鑑定報告書：＜魔道具＞カテゴリ〜\n"
 			}
 			else {
 				description(0) = ""
 				description(1) = ""
 				description(3) = "A rod made out of bronze."
@@ -109216,14 +111196,14 @@
 			reftype = FILTER_FURNITURE
 			return
 		}
 		if ( dbmode == DBMODE_REF_SPEC ) {
 			if ( dbspec == DBSPEC_TYPE ) {
-				return FILTER_FURNITURE
+				return 60000
 			}
 			if ( dbspec == DBSPEC_TYPE_MINOR ) {
-				return FILTER_FURNITURE_BED
+				return 60004
 			}
 			if ( dbspec == DBSPEC_VALUE_ORG ) {
 				return 2200
 			}
 			if ( dbspec == DBSPEC_PARAM3_ORG ) {
@@ -109281,14 +111261,14 @@
 			reftype = FILTER_FURNITURE_WELL
 			return
 		}
 		if ( dbmode == DBMODE_REF_SPEC ) {
 			if ( dbspec == DBSPEC_TYPE ) {
-				return FILTER_FURNITURE_WELL
+				return 60001
 			}
 			if ( dbspec == DBSPEC_TYPE_MINOR ) {
-				return FILTER_FURNITURE_WELL
+				return 60001
 			}
 			if ( dbspec == DBSPEC_VALUE_ORG ) {
 				return 2400
 			}
 			if ( dbspec == DBSPEC_PARAM3_ORG ) {
@@ -109349,14 +111329,14 @@
 			reftype = FILTER_FURNITURE_ALTAR
 			return
 		}
 		if ( dbmode == DBMODE_REF_SPEC ) {
 			if ( dbspec == DBSPEC_TYPE ) {
-				return FILTER_FURNITURE_ALTAR
+				return 60002
 			}
 			if ( dbspec == DBSPEC_TYPE_MINOR ) {
-				return FILTER_FURNITURE_ALTAR
+				return 60002
 			}
 			if ( dbspec == DBSPEC_VALUE_ORG ) {
 				return 1600
 			}
 			if ( dbspec == DBSPEC_PARAM3_ORG ) {
@@ -109410,14 +111390,14 @@
 			reftype = FILTER_FURNITURE_ALTAR
 			return
 		}
 		if ( dbmode == DBMODE_REF_SPEC ) {
 			if ( dbspec == DBSPEC_TYPE ) {
-				return FILTER_FURNITURE_ALTAR
+				return 60002
 			}
 			if ( dbspec == DBSPEC_TYPE_MINOR ) {
-				return FILTER_FURNITURE_ALTAR
+				return 60002
 			}
 			if ( dbspec == DBSPEC_VALUE_ORG ) {
 				return 1500
 			}
 			if ( dbspec == DBSPEC_PARAM3_ORG ) {
@@ -109471,14 +111451,14 @@
 			reftype = FILTER_FURNITURE
 			return
 		}
 		if ( dbmode == DBMODE_REF_SPEC ) {
 			if ( dbspec == DBSPEC_TYPE ) {
-				return FILTER_FURNITURE
+				return 60000
 			}
 			if ( dbspec == DBSPEC_TYPE_MINOR ) {
-				return FILTER_NONE
+				return 99999
 			}
 			if ( dbspec == DBSPEC_VALUE_ORG ) {
 				return 2400
 			}
 			if ( dbspec == DBSPEC_PARAM3_ORG ) {
@@ -109532,14 +111512,14 @@
 			reftype = FILTER_FURNITURE
 			return
 		}
 		if ( dbmode == DBMODE_REF_SPEC ) {
 			if ( dbspec == DBSPEC_TYPE ) {
-				return FILTER_FURNITURE
+				return 60000
 			}
 			if ( dbspec == DBSPEC_TYPE_MINOR ) {
-				return FILTER_NONE
+				return 99999
 			}
 			if ( dbspec == DBSPEC_VALUE_ORG ) {
 				return 6500
 			}
 			if ( dbspec == DBSPEC_PARAM3_ORG ) {
@@ -109593,14 +111573,14 @@
 			reftype = FILTER_FURNITURE
 			return
 		}
 		if ( dbmode == DBMODE_REF_SPEC ) {
 			if ( dbspec == DBSPEC_TYPE ) {
-				return FILTER_FURNITURE
+				return 60000
 			}
 			if ( dbspec == DBSPEC_TYPE_MINOR ) {
-				return FILTER_NONE
+				return 99999
 			}
 			if ( dbspec == DBSPEC_VALUE_ORG ) {
 				return 4400
 			}
 			if ( dbspec == DBSPEC_PARAM3_ORG ) {
@@ -109654,14 +111634,14 @@
 			reftype = FILTER_FURNITURE
 			return
 		}
 		if ( dbmode == DBMODE_REF_SPEC ) {
 			if ( dbspec == DBSPEC_TYPE ) {
-				return FILTER_FURNITURE
+				return 60000
 			}
 			if ( dbspec == DBSPEC_TYPE_MINOR ) {
-				return FILTER_NONE
+				return 99999
 			}
 			if ( dbspec == DBSPEC_VALUE_ORG ) {
 				return 2500
 			}
 			if ( dbspec == DBSPEC_PARAM3_ORG ) {
@@ -109715,14 +111695,14 @@
 			reftype = FILTER_FURNITURE
 			return
 		}
 		if ( dbmode == DBMODE_REF_SPEC ) {
 			if ( dbspec == DBSPEC_TYPE ) {
-				return FILTER_FURNITURE
+				return 60000
 			}
 			if ( dbspec == DBSPEC_TYPE_MINOR ) {
-				return FILTER_JUNK
+				return 64000
 			}
 			if ( dbspec == DBSPEC_VALUE_ORG ) {
 				return 3250
 			}
 			if ( dbspec == DBSPEC_PARAM3_ORG ) {
@@ -109776,14 +111756,14 @@
 			reftype = FILTER_FURNITURE
 			return
 		}
 		if ( dbmode == DBMODE_REF_SPEC ) {
 			if ( dbspec == DBSPEC_TYPE ) {
-				return FILTER_FURNITURE
+				return 60000
 			}
 			if ( dbspec == DBSPEC_TYPE_MINOR ) {
-				return FILTER_JUNK
+				return 64000
 			}
 			if ( dbspec == DBSPEC_VALUE_ORG ) {
 				return 1700
 			}
 			if ( dbspec == DBSPEC_PARAM3_ORG ) {
@@ -109837,14 +111817,14 @@
 			reftype = FILTER_FURNITURE
 			return
 		}
 		if ( dbmode == DBMODE_REF_SPEC ) {
 			if ( dbspec == DBSPEC_TYPE ) {
-				return FILTER_FURNITURE
+				return 60000
 			}
 			if ( dbspec == DBSPEC_TYPE_MINOR ) {
-				return FILTER_JUNK
+				return 64000
 			}
 			if ( dbspec == DBSPEC_VALUE_ORG ) {
 				return 1800
 			}
 			if ( dbspec == DBSPEC_PARAM3_ORG ) {
@@ -109898,14 +111878,14 @@
 			reftype = FILTER_FURNITURE
 			return
 		}
 		if ( dbmode == DBMODE_REF_SPEC ) {
 			if ( dbspec == DBSPEC_TYPE ) {
-				return FILTER_FURNITURE
+				return 60000
 			}
 			if ( dbspec == DBSPEC_TYPE_MINOR ) {
-				return FILTER_NONE
+				return 99999
 			}
 			if ( dbspec == DBSPEC_VALUE_ORG ) {
 				return 1400
 			}
 			if ( dbspec == DBSPEC_PARAM3_ORG ) {
@@ -109959,14 +111939,14 @@
 			reftype = FILTER_FURNITURE
 			return
 		}
 		if ( dbmode == DBMODE_REF_SPEC ) {
 			if ( dbspec == DBSPEC_TYPE ) {
-				return FILTER_FURNITURE
+				return 60000
 			}
 			if ( dbspec == DBSPEC_TYPE_MINOR ) {
-				return FILTER_NONE
+				return 99999
 			}
 			if ( dbspec == DBSPEC_VALUE_ORG ) {
 				return 430
 			}
 			if ( dbspec == DBSPEC_PARAM3_ORG ) {
@@ -110021,14 +112001,14 @@
 			reftype = FILTER_ITEM_TOOL
 			return
 		}
 		if ( dbmode == DBMODE_REF_SPEC ) {
 			if ( dbspec == DBSPEC_TYPE ) {
-				return FILTER_ITEM_TOOL
+				return 59000
 			}
 			if ( dbspec == DBSPEC_TYPE_MINOR ) {
-				return FILTER_NONE
+				return 99999
 			}
 			if ( dbspec == DBSPEC_VALUE_ORG ) {
 				return 1250
 			}
 			if ( dbspec == DBSPEC_PARAM3_ORG ) {
@@ -110086,14 +112066,14 @@
 			reftype = FILTER_ITEM_TOOL
 			return
 		}
 		if ( dbmode == DBMODE_REF_SPEC ) {
 			if ( dbspec == DBSPEC_TYPE ) {
-				return FILTER_ITEM_TOOL
+				return 59000
 			}
 			if ( dbspec == DBSPEC_TYPE_MINOR ) {
-				return FILTER_NONE
+				return 99999
 			}
 			if ( dbspec == DBSPEC_VALUE_ORG ) {
 				return 780
 			}
 			if ( dbspec == DBSPEC_PARAM3_ORG ) {
@@ -110150,14 +112130,14 @@
 			reftype = FILTER_FURNITURE
 			return
 		}
 		if ( dbmode == DBMODE_REF_SPEC ) {
 			if ( dbspec == DBSPEC_TYPE ) {
-				return FILTER_FURNITURE
+				return 60000
 			}
 			if ( dbspec == DBSPEC_TYPE_MINOR ) {
-				return FILTER_NONE
+				return 99999
 			}
 			if ( dbspec == DBSPEC_VALUE_ORG ) {
 				return 1200
 			}
 			if ( dbspec == DBSPEC_PARAM3_ORG ) {
@@ -110211,14 +112191,14 @@
 			reftype = FILTER_FURNITURE
 			return
 		}
 		if ( dbmode == DBMODE_REF_SPEC ) {
 			if ( dbspec == DBSPEC_TYPE ) {
-				return FILTER_FURNITURE
+				return 60000
 			}
 			if ( dbspec == DBSPEC_TYPE_MINOR ) {
-				return FILTER_NONE
+				return 99999
 			}
 			if ( dbspec == DBSPEC_VALUE_ORG ) {
 				return 800
 			}
 			if ( dbspec == DBSPEC_PARAM3_ORG ) {
@@ -110272,14 +112252,14 @@
 			reftype = FILTER_FURNITURE
 			return
 		}
 		if ( dbmode == DBMODE_REF_SPEC ) {
 			if ( dbspec == DBSPEC_TYPE ) {
-				return FILTER_FURNITURE
+				return 60000
 			}
 			if ( dbspec == DBSPEC_TYPE_MINOR ) {
-				return FILTER_NONE
+				return 99999
 			}
 			if ( dbspec == DBSPEC_VALUE_ORG ) {
 				return 3500
 			}
 			if ( dbspec == DBSPEC_PARAM3_ORG ) {
@@ -110333,14 +112313,14 @@
 			reftype = FILTER_FURNITURE
 			return
 		}
 		if ( dbmode == DBMODE_REF_SPEC ) {
 			if ( dbspec == DBSPEC_TYPE ) {
-				return FILTER_FURNITURE
+				return 60000
 			}
 			if ( dbspec == DBSPEC_TYPE_MINOR ) {
-				return FILTER_NONE
+				return 99999
 			}
 			if ( dbspec == DBSPEC_VALUE_ORG ) {
 				return 1200
 			}
 			if ( dbspec == DBSPEC_PARAM3_ORG ) {
@@ -110396,14 +112376,14 @@
 			reftype = FILTER_FURNITURE
 			return
 		}
 		if ( dbmode == DBMODE_REF_SPEC ) {
 			if ( dbspec == DBSPEC_TYPE ) {
-				return FILTER_FURNITURE
+				return 60000
 			}
 			if ( dbspec == DBSPEC_TYPE_MINOR ) {
-				return FILTER_NONE
+				return 99999
 			}
 			if ( dbspec == DBSPEC_VALUE_ORG ) {
 				return 1500
 			}
 			if ( dbspec == DBSPEC_PARAM3_ORG ) {
@@ -110459,14 +112439,14 @@
 			reftype = FILTER_FURNITURE
 			return
 		}
 		if ( dbmode == DBMODE_REF_SPEC ) {
 			if ( dbspec == DBSPEC_TYPE ) {
-				return FILTER_FURNITURE
+				return 60000
 			}
 			if ( dbspec == DBSPEC_TYPE_MINOR ) {
-				return FILTER_NONE
+				return 99999
 			}
 			if ( dbspec == DBSPEC_VALUE_ORG ) {
 				return 1100
 			}
 			if ( dbspec == DBSPEC_PARAM3_ORG ) {
@@ -110522,14 +112502,14 @@
 			reftype = FILTER_FURNITURE
 			return
 		}
 		if ( dbmode == DBMODE_REF_SPEC ) {
 			if ( dbspec == DBSPEC_TYPE ) {
-				return FILTER_FURNITURE
+				return 60000
 			}
 			if ( dbspec == DBSPEC_TYPE_MINOR ) {
-				return FILTER_NONE
+				return 99999
 			}
 			if ( dbspec == DBSPEC_VALUE_ORG ) {
 				return 1200
 			}
 			if ( dbspec == DBSPEC_PARAM3_ORG ) {
@@ -110583,14 +112563,14 @@
 			reftype = FILTER_FURNITURE
 			return
 		}
 		if ( dbmode == DBMODE_REF_SPEC ) {
 			if ( dbspec == DBSPEC_TYPE ) {
-				return FILTER_FURNITURE
+				return 60000
 			}
 			if ( dbspec == DBSPEC_TYPE_MINOR ) {
-				return FILTER_NONE
+				return 99999
 			}
 			if ( dbspec == DBSPEC_VALUE_ORG ) {
 				return 350
 			}
 			if ( dbspec == DBSPEC_PARAM3_ORG ) {
@@ -110645,14 +112625,14 @@
 			reftype = FILTER_FURNITURE
 			return
 		}
 		if ( dbmode == DBMODE_REF_SPEC ) {
 			if ( dbspec == DBSPEC_TYPE ) {
-				return FILTER_FURNITURE
+				return 60000
 			}
 			if ( dbspec == DBSPEC_TYPE_MINOR ) {
-				return FILTER_NONE
+				return 99999
 			}
 			if ( dbspec == DBSPEC_VALUE_ORG ) {
 				return 4400
 			}
 			if ( dbspec == DBSPEC_PARAM3_ORG ) {
@@ -110706,14 +112686,14 @@
 			reftype = FILTER_FURNITURE
 			return
 		}
 		if ( dbmode == DBMODE_REF_SPEC ) {
 			if ( dbspec == DBSPEC_TYPE ) {
-				return FILTER_FURNITURE
+				return 60000
 			}
 			if ( dbspec == DBSPEC_TYPE_MINOR ) {
-				return FILTER_NONE
+				return 99999
 			}
 			if ( dbspec == DBSPEC_VALUE_ORG ) {
 				return 4500
 			}
 			if ( dbspec == DBSPEC_PARAM3_ORG ) {
@@ -110767,14 +112747,14 @@
 			reftype = FILTER_FURNITURE
 			return
 		}
 		if ( dbmode == DBMODE_REF_SPEC ) {
 			if ( dbspec == DBSPEC_TYPE ) {
-				return FILTER_FURNITURE
+				return 60000
 			}
 			if ( dbspec == DBSPEC_TYPE_MINOR ) {
-				return FILTER_NONE
+				return 99999
 			}
 			if ( dbspec == DBSPEC_VALUE_ORG ) {
 				return 320
 			}
 			if ( dbspec == DBSPEC_PARAM3_ORG ) {
@@ -110828,14 +112808,14 @@
 			reftype = FILTER_FURNITURE
 			return
 		}
 		if ( dbmode == DBMODE_REF_SPEC ) {
 			if ( dbspec == DBSPEC_TYPE ) {
-				return FILTER_FURNITURE
+				return 60000
 			}
 			if ( dbspec == DBSPEC_TYPE_MINOR ) {
-				return FILTER_NONE
+				return 99999
 			}
 			if ( dbspec == DBSPEC_VALUE_ORG ) {
 				return 240
 			}
 			if ( dbspec == DBSPEC_PARAM3_ORG ) {
@@ -110889,14 +112869,14 @@
 			reftype = FILTER_FURNITURE
 			return
 		}
 		if ( dbmode == DBMODE_REF_SPEC ) {
 			if ( dbspec == DBSPEC_TYPE ) {
-				return FILTER_FURNITURE
+				return 60000
 			}
 			if ( dbspec == DBSPEC_TYPE_MINOR ) {
-				return FILTER_NONE
+				return 99999
 			}
 			if ( dbspec == DBSPEC_VALUE_ORG ) {
 				return 3600
 			}
 			if ( dbspec == DBSPEC_PARAM3_ORG ) {
@@ -110950,14 +112930,14 @@
 			reftype = FILTER_FURNITURE
 			return
 		}
 		if ( dbmode == DBMODE_REF_SPEC ) {
 			if ( dbspec == DBSPEC_TYPE ) {
-				return FILTER_FURNITURE
+				return 60000
 			}
 			if ( dbspec == DBSPEC_TYPE_MINOR ) {
-				return FILTER_NONE
+				return 99999
 			}
 			if ( dbspec == DBSPEC_VALUE_ORG ) {
 				return 2100
 			}
 			if ( dbspec == DBSPEC_PARAM3_ORG ) {
@@ -111011,14 +112991,14 @@
 			reftype = FILTER_FURNITURE
 			return
 		}
 		if ( dbmode == DBMODE_REF_SPEC ) {
 			if ( dbspec == DBSPEC_TYPE ) {
-				return FILTER_FURNITURE
+				return 60000
 			}
 			if ( dbspec == DBSPEC_TYPE_MINOR ) {
-				return FILTER_NONE
+				return 99999
 			}
 			if ( dbspec == DBSPEC_VALUE_ORG ) {
 				return 1800
 			}
 			if ( dbspec == DBSPEC_PARAM3_ORG ) {
@@ -111072,14 +113052,14 @@
 			reftype = FILTER_FURNITURE
 			return
 		}
 		if ( dbmode == DBMODE_REF_SPEC ) {
 			if ( dbspec == DBSPEC_TYPE ) {
-				return FILTER_FURNITURE
+				return 60000
 			}
 			if ( dbspec == DBSPEC_TYPE_MINOR ) {
-				return FILTER_NONE
+				return 99999
 			}
 			if ( dbspec == DBSPEC_VALUE_ORG ) {
 				return 940
 			}
 			if ( dbspec == DBSPEC_PARAM3_ORG ) {
@@ -111133,14 +113113,14 @@
 			reftype = FILTER_FURNITURE
 			return
 		}
 		if ( dbmode == DBMODE_REF_SPEC ) {
 			if ( dbspec == DBSPEC_TYPE ) {
-				return FILTER_FURNITURE
+				return 60000
 			}
 			if ( dbspec == DBSPEC_TYPE_MINOR ) {
-				return FILTER_NONE
+				return 99999
 			}
 			if ( dbspec == DBSPEC_VALUE_ORG ) {
 				return 240
 			}
 			if ( dbspec == DBSPEC_PARAM3_ORG ) {
@@ -111196,14 +113176,14 @@
 			reftype = FILTER_FURNITURE
 			return
 		}
 		if ( dbmode == DBMODE_REF_SPEC ) {
 			if ( dbspec == DBSPEC_TYPE ) {
-				return FILTER_FURNITURE
+				return 60000
 			}
 			if ( dbspec == DBSPEC_TYPE_MINOR ) {
-				return FILTER_NONE
+				return 99999
 			}
 			if ( dbspec == DBSPEC_VALUE_ORG ) {
 				return 7800
 			}
 			if ( dbspec == DBSPEC_PARAM3_ORG ) {
@@ -111257,14 +113237,14 @@
 			reftype = FILTER_FURNITURE
 			return
 		}
 		if ( dbmode == DBMODE_REF_SPEC ) {
 			if ( dbspec == DBSPEC_TYPE ) {
-				return FILTER_FURNITURE
+				return 60000
 			}
 			if ( dbspec == DBSPEC_TYPE_MINOR ) {
-				return FILTER_NONE
+				return 99999
 			}
 			if ( dbspec == DBSPEC_VALUE_ORG ) {
 				return 450
 			}
 			if ( dbspec == DBSPEC_PARAM3_ORG ) {
@@ -111327,14 +113307,14 @@
 			reftype = FILTER_ITEM_TOOL
 			return
 		}
 		if ( dbmode == DBMODE_REF_SPEC ) {
 			if ( dbspec == DBSPEC_TYPE ) {
-				return FILTER_ITEM_TOOL
+				return 59000
 			}
 			if ( dbspec == DBSPEC_TYPE_MINOR ) {
-				return FILTER_NONE
+				return 99999
 			}
 			if ( dbspec == DBSPEC_VALUE_ORG ) {
 				return 830
 			}
 			if ( dbspec == DBSPEC_PARAM3_ORG ) {
@@ -111388,14 +113368,14 @@
 			reftype = FILTER_FURNITURE
 			return
 		}
 		if ( dbmode == DBMODE_REF_SPEC ) {
 			if ( dbspec == DBSPEC_TYPE ) {
-				return FILTER_FURNITURE
+				return 60000
 			}
 			if ( dbspec == DBSPEC_TYPE_MINOR ) {
-				return FILTER_NONE
+				return 99999
 			}
 			if ( dbspec == DBSPEC_VALUE_ORG ) {
 				return 3900
 			}
 			if ( dbspec == DBSPEC_PARAM3_ORG ) {
@@ -111449,14 +113429,14 @@
 			reftype = FILTER_FURNITURE
 			return
 		}
 		if ( dbmode == DBMODE_REF_SPEC ) {
 			if ( dbspec == DBSPEC_TYPE ) {
-				return FILTER_FURNITURE
+				return 60000
 			}
 			if ( dbspec == DBSPEC_TYPE_MINOR ) {
-				return FILTER_NONE
+				return 99999
 			}
 			if ( dbspec == DBSPEC_VALUE_ORG ) {
 				return 3400
 			}
 			if ( dbspec == DBSPEC_PARAM3_ORG ) {
@@ -111510,14 +113490,14 @@
 			reftype = FILTER_FURNITURE
 			return
 		}
 		if ( dbmode == DBMODE_REF_SPEC ) {
 			if ( dbspec == DBSPEC_TYPE ) {
-				return FILTER_FURNITURE
+				return 60000
 			}
 			if ( dbspec == DBSPEC_TYPE_MINOR ) {
-				return FILTER_NONE
+				return 99999
 			}
 			if ( dbspec == DBSPEC_VALUE_ORG ) {
 				return 780
 			}
 			if ( dbspec == DBSPEC_PARAM3_ORG ) {
@@ -111543,11 +113523,10 @@
 			}
 			else {
 				description(0) = ""
 				description(1) = ""
 				description(3) = "A symbol of love toward's one's parent's."
-				description(3) = "\t\tPotted plant for ornamental purposes."
 			}
 			return
 		}
 		return 0
 	}
@@ -111572,14 +113551,14 @@
 			reftype = FILTER_FURNITURE
 			return
 		}
 		if ( dbmode == DBMODE_REF_SPEC ) {
 			if ( dbspec == DBSPEC_TYPE ) {
-				return FILTER_FURNITURE
+				return 60000
 			}
 			if ( dbspec == DBSPEC_TYPE_MINOR ) {
-				return FILTER_NONE
+				return 99999
 			}
 			if ( dbspec == DBSPEC_VALUE_ORG ) {
 				return 1500
 			}
 			if ( dbspec == DBSPEC_PARAM3_ORG ) {
@@ -111633,14 +113612,14 @@
 			reftype = FILTER_FURNITURE
 			return
 		}
 		if ( dbmode == DBMODE_REF_SPEC ) {
 			if ( dbspec == DBSPEC_TYPE ) {
-				return FILTER_FURNITURE
+				return 60000
 			}
 			if ( dbspec == DBSPEC_TYPE_MINOR ) {
-				return FILTER_NONE
+				return 99999
 			}
 			if ( dbspec == DBSPEC_VALUE_ORG ) {
 				return 920
 			}
 			if ( dbspec == DBSPEC_PARAM3_ORG ) {
@@ -111666,11 +113645,10 @@
 			}
 			else {
 				description(0) = ""
 				description(1) = ""
 				description(3) = "A type of herb."
-				description(3) = "\t\tPotted plant for ornamental purposes."
 			}
 			return
 		}
 		return 0
 	}
@@ -111695,14 +113673,14 @@
 			reftype = FILTER_FURNITURE
 			return
 		}
 		if ( dbmode == DBMODE_REF_SPEC ) {
 			if ( dbspec == DBSPEC_TYPE ) {
-				return FILTER_FURNITURE
+				return 60000
 			}
 			if ( dbspec == DBSPEC_TYPE_MINOR ) {
-				return FILTER_NONE
+				return 99999
 			}
 			if ( dbspec == DBSPEC_VALUE_ORG ) {
 				return 880
 			}
 			if ( dbspec == DBSPEC_PARAM3_ORG ) {
@@ -111756,14 +113734,14 @@
 			reftype = FILTER_FURNITURE
 			return
 		}
 		if ( dbmode == DBMODE_REF_SPEC ) {
 			if ( dbspec == DBSPEC_TYPE ) {
-				return FILTER_FURNITURE
+				return 60000
 			}
 			if ( dbspec == DBSPEC_TYPE_MINOR ) {
-				return FILTER_NONE
+				return 99999
 			}
 			if ( dbspec == DBSPEC_VALUE_ORG ) {
 				return 750
 			}
 			if ( dbspec == DBSPEC_PARAM3_ORG ) {
@@ -111817,14 +113795,14 @@
 			reftype = FILTER_FURNITURE
 			return
 		}
 		if ( dbmode == DBMODE_REF_SPEC ) {
 			if ( dbspec == DBSPEC_TYPE ) {
-				return FILTER_FURNITURE
+				return 60000
 			}
 			if ( dbspec == DBSPEC_TYPE_MINOR ) {
-				return FILTER_NONE
+				return 99999
 			}
 			if ( dbspec == DBSPEC_VALUE_ORG ) {
 				return 650
 			}
 			if ( dbspec == DBSPEC_PARAM3_ORG ) {
@@ -111878,14 +113856,14 @@
 			reftype = FILTER_FURNITURE
 			return
 		}
 		if ( dbmode == DBMODE_REF_SPEC ) {
 			if ( dbspec == DBSPEC_TYPE ) {
-				return FILTER_FURNITURE
+				return 60000
 			}
 			if ( dbspec == DBSPEC_TYPE_MINOR ) {
-				return FILTER_NONE
+				return 99999
 			}
 			if ( dbspec == DBSPEC_VALUE_ORG ) {
 				return 1800
 			}
 			if ( dbspec == DBSPEC_PARAM3_ORG ) {
@@ -111939,14 +113917,14 @@
 			reftype = FILTER_FURNITURE
 			return
 		}
 		if ( dbmode == DBMODE_REF_SPEC ) {
 			if ( dbspec == DBSPEC_TYPE ) {
-				return FILTER_FURNITURE
+				return 60000
 			}
 			if ( dbspec == DBSPEC_TYPE_MINOR ) {
-				return FILTER_NONE
+				return 99999
 			}
 			if ( dbspec == DBSPEC_VALUE_ORG ) {
 				return 1050
 			}
 			if ( dbspec == DBSPEC_PARAM3_ORG ) {
@@ -112000,14 +113978,14 @@
 			reftype = FILTER_FURNITURE
 			return
 		}
 		if ( dbmode == DBMODE_REF_SPEC ) {
 			if ( dbspec == DBSPEC_TYPE ) {
-				return FILTER_FURNITURE
+				return 60000
 			}
 			if ( dbspec == DBSPEC_TYPE_MINOR ) {
-				return FILTER_NONE
+				return 99999
 			}
 			if ( dbspec == DBSPEC_VALUE_ORG ) {
 				return 850
 			}
 			if ( dbspec == DBSPEC_PARAM3_ORG ) {
@@ -112061,14 +114039,14 @@
 			reftype = FILTER_FURNITURE
 			return
 		}
 		if ( dbmode == DBMODE_REF_SPEC ) {
 			if ( dbspec == DBSPEC_TYPE ) {
-				return FILTER_FURNITURE
+				return 60000
 			}
 			if ( dbspec == DBSPEC_TYPE_MINOR ) {
-				return FILTER_NONE
+				return 99999
 			}
 			if ( dbspec == DBSPEC_VALUE_ORG ) {
 				return 3500
 			}
 			if ( dbspec == DBSPEC_PARAM3_ORG ) {
@@ -112123,14 +114101,14 @@
 			reftype = FILTER_ITEM_TOOL
 			return
 		}
 		if ( dbmode == DBMODE_REF_SPEC ) {
 			if ( dbspec == DBSPEC_TYPE ) {
-				return FILTER_ITEM_TOOL
+				return 59000
 			}
 			if ( dbspec == DBSPEC_TYPE_MINOR ) {
-				return FILTER_NONE
+				return 99999
 			}
 			if ( dbspec == DBSPEC_VALUE_ORG ) {
 				return 1960
 			}
 			if ( dbspec == DBSPEC_PARAM3_ORG ) {
@@ -112187,14 +114165,14 @@
 			reftype = FILTER_FURNITURE
 			return
 		}
 		if ( dbmode == DBMODE_REF_SPEC ) {
 			if ( dbspec == DBSPEC_TYPE ) {
-				return FILTER_FURNITURE
+				return 60000
 			}
 			if ( dbspec == DBSPEC_TYPE_MINOR ) {
-				return FILTER_NONE
+				return 99999
 			}
 			if ( dbspec == DBSPEC_VALUE_ORG ) {
 				return 80
 			}
 			if ( dbspec == DBSPEC_PARAM3_ORG ) {
@@ -112234,30 +114212,30 @@
 		}
 		if ( dbmode == DBMODE_SET ) {
 			inv(INV_ITEM_ID, ci) = ITEM_ID_ROD_LIFE
 			inv(INV_ITEM_PIC, ci) = xy2pic(9, 14)
 			reftype = FILTER_ITEM_ROD
-			reftypeminor = FILTER_ITEM_ROD_HEALING
+			reftypeminor = FILTER_ITEM_ROD
 			inv(INV_ITEM_NUM, ci) = 1
 			fixeditemenc = 0
 			inv(INV_ITEM_IDENTIFY_LEVEL, ci) = 0
-			inv(INV_ITEM_CHARGE, ci) = 4 + rnd(4) - rnd(4)
-			ibitmod ITEM_BIT_CHARGE_ITEM, ci, 1
+			inv((9 /*!!!@[INV_ITEM_AMMO @@@ INV_ITEM_CHARGE @@@ INV_ITEM_CLIENT @@@ INV_ITEM_FILE @@@ INV_ITEM_NEXT_PERIOD]@!!! */), ci) = 4 + rnd(4) - rnd(4)
+			ibitmod ITEM_BIT_CHARGE_ITEM, ci, TRUE
 			return
 		}
 		if ( dbmode == DBMODE_REF ) {
 			ichargelevel = 4
 			infilterref = ""
 			reftype = FILTER_ITEM_ROD
 			return
 		}
 		if ( dbmode == DBMODE_REF_SPEC ) {
 			if ( dbspec == DBSPEC_TYPE ) {
-				return FILTER_ITEM_ROD
+				return 56000
 			}
 			if ( dbspec == DBSPEC_TYPE_MINOR ) {
-				return FILTER_ITEM_ROD_HEALING
+				return 56000
 			}
 			if ( dbspec == DBSPEC_VALUE_ORG ) {
 				return 4800
 			}
 			if ( dbspec == DBSPEC_PARAM3_ORG ) {
@@ -112328,14 +114306,14 @@
 			reftype = FILTER_FURNITURE
 			return
 		}
 		if ( dbmode == DBMODE_REF_SPEC ) {
 			if ( dbspec == DBSPEC_TYPE ) {
-				return FILTER_FURNITURE
+				return 60000
 			}
 			if ( dbspec == DBSPEC_TYPE_MINOR ) {
-				return FILTER_NONE
+				return 99999
 			}
 			if ( dbspec == DBSPEC_VALUE_ORG ) {
 				return 1400
 			}
 			if ( dbspec == DBSPEC_PARAM3_ORG ) {
@@ -112375,30 +114353,30 @@
 		}
 		if ( dbmode == DBMODE_SET ) {
 			inv(INV_ITEM_ID, ci) = ITEM_ID_ROD_FIRE_BOLT
 			inv(INV_ITEM_PIC, ci) = xy2pic(9, 14)
 			reftype = FILTER_ITEM_ROD
-			reftypeminor = FILTER_ITEM_ROD_DAMAGE
+			reftypeminor = FILTER_ITEM_ROD
 			inv(INV_ITEM_NUM, ci) = 1
 			fixeditemenc = 0
 			inv(INV_ITEM_IDENTIFY_LEVEL, ci) = 0
-			inv(INV_ITEM_CHARGE, ci) = 18 + rnd(18) - rnd(18)
-			ibitmod ITEM_BIT_CHARGE_ITEM, ci, 1
+			inv((9 /*!!!@[INV_ITEM_AMMO @@@ INV_ITEM_CHARGE @@@ INV_ITEM_CLIENT @@@ INV_ITEM_FILE @@@ INV_ITEM_NEXT_PERIOD]@!!! */), ci) = 18 + rnd(18) - rnd(18)
+			ibitmod ITEM_BIT_CHARGE_ITEM, ci, TRUE
 			return
 		}
 		if ( dbmode == DBMODE_REF ) {
 			ichargelevel = 18
 			infilterref = ""
 			reftype = FILTER_ITEM_ROD
 			return
 		}
 		if ( dbmode == DBMODE_REF_SPEC ) {
 			if ( dbspec == DBSPEC_TYPE ) {
-				return FILTER_ITEM_ROD
+				return 56000
 			}
 			if ( dbspec == DBSPEC_TYPE_MINOR ) {
-				return FILTER_ITEM_ROD_DAMAGE
+				return 56000
 			}
 			if ( dbspec == DBSPEC_VALUE_ORG ) {
 				return 1600
 			}
 			if ( dbspec == DBSPEC_PARAM3_ORG ) {
@@ -112434,11 +114412,11 @@
 		if ( dbmode == DBMODE_DESC ) {
 			if ( jp ) {
 				description(0) = "\t\t特定の魔法が封じ込められた杖。半透明の赤い宝石が取り付けられている。\n#〜魔具全典〜\n"
 				description(1) = ""
 				description(2) = ""
-				description(3) = "\t\t振ることで対象に炎属性のボルトを放つ魔法の杖だ。\n#〜鑑定報告書：＜魔道具＞カテゴリ〜\n"
+				description(3) = "\t\t振ることで対象に火炎属性のボルトを放つ魔法の杖だ。\n#〜鑑定報告書：＜魔道具＞カテゴリ〜\n"
 			}
 			else {
 				description(0) = ""
 				description(1) = ""
 				description(3) = "A rod made out of metal."
@@ -112454,30 +114432,30 @@
 		}
 		if ( dbmode == DBMODE_SET ) {
 			inv(INV_ITEM_ID, ci) = ITEM_ID_ROD_ICE_BOLT
 			inv(INV_ITEM_PIC, ci) = xy2pic(9, 14)
 			reftype = FILTER_ITEM_ROD
-			reftypeminor = FILTER_ITEM_ROD_DAMAGE
+			reftypeminor = FILTER_ITEM_ROD
 			inv(INV_ITEM_NUM, ci) = 1
 			fixeditemenc = 0
 			inv(INV_ITEM_IDENTIFY_LEVEL, ci) = 0
-			inv(INV_ITEM_CHARGE, ci) = 18 + rnd(18) - rnd(18)
-			ibitmod ITEM_BIT_CHARGE_ITEM, ci, 1
+			inv((9 /*!!!@[INV_ITEM_AMMO @@@ INV_ITEM_CHARGE @@@ INV_ITEM_CLIENT @@@ INV_ITEM_FILE @@@ INV_ITEM_NEXT_PERIOD]@!!! */), ci) = 18 + rnd(18) - rnd(18)
+			ibitmod ITEM_BIT_CHARGE_ITEM, ci, TRUE
 			return
 		}
 		if ( dbmode == DBMODE_REF ) {
 			ichargelevel = 18
 			infilterref = ""
 			reftype = FILTER_ITEM_ROD
 			return
 		}
 		if ( dbmode == DBMODE_REF_SPEC ) {
 			if ( dbspec == DBSPEC_TYPE ) {
-				return FILTER_ITEM_ROD
+				return 56000
 			}
 			if ( dbspec == DBSPEC_TYPE_MINOR ) {
-				return FILTER_ITEM_ROD_DAMAGE
+				return 56000
 			}
 			if ( dbspec == DBSPEC_VALUE_ORG ) {
 				return 1460
 			}
 			if ( dbspec == DBSPEC_PARAM3_ORG ) {
@@ -112513,11 +114491,11 @@
 		if ( dbmode == DBMODE_DESC ) {
 			if ( jp ) {
 				description(0) = "\t\t特定の魔法が封じ込められた杖。半透明の青い宝石が取り付けられている。\n#〜魔具全典〜\n"
 				description(1) = ""
 				description(2) = ""
-				description(3) = "\t\t振ることで対象に氷属性のボルトを放つ魔法の杖だ。\n#〜鑑定報告書：＜魔道具＞カテゴリ〜\n"
+				description(3) = "\t\t振ることで対象に冷気属性のボルトを放つ魔法の杖だ。\n#〜鑑定報告書：＜魔道具＞カテゴリ〜\n"
 			}
 			else {
 				description(0) = ""
 				description(1) = ""
 				description(3) = "A rod made out of wood."
@@ -112537,26 +114515,26 @@
 			reftype = FILTER_ITEM_ROD
 			reftypeminor = FILTER_ITEM_ROD_ENVIRONMENTAL
 			inv(INV_ITEM_NUM, ci) = 1
 			fixeditemenc = 0
 			inv(INV_ITEM_IDENTIFY_LEVEL, ci) = 0
-			inv(INV_ITEM_CHARGE, ci) = 8 + rnd(8) - rnd(8)
-			ibitmod ITEM_BIT_CHARGE_ITEM, ci, 1
+			inv((9 /*!!!@[INV_ITEM_AMMO @@@ INV_ITEM_CHARGE @@@ INV_ITEM_CLIENT @@@ INV_ITEM_FILE @@@ INV_ITEM_NEXT_PERIOD]@!!! */), ci) = 8 + rnd(8) - rnd(8)
+			ibitmod ITEM_BIT_CHARGE_ITEM, ci, TRUE
 			return
 		}
 		if ( dbmode == DBMODE_REF ) {
 			ichargelevel = 8
 			infilterref = ""
 			reftype = FILTER_ITEM_ROD
 			return
 		}
 		if ( dbmode == DBMODE_REF_SPEC ) {
 			if ( dbspec == DBSPEC_TYPE ) {
-				return FILTER_ITEM_ROD
+				return 56000
 			}
 			if ( dbspec == DBSPEC_TYPE_MINOR ) {
-				return FILTER_ITEM_ROD_ENVIRONMENTAL
+				return 56004
 			}
 			if ( dbspec == DBSPEC_VALUE_ORG ) {
 				return 700
 			}
 			if ( dbspec == DBSPEC_PARAM3_ORG ) {
@@ -112612,30 +114590,30 @@
 		}
 		if ( dbmode == DBMODE_SET ) {
 			inv(INV_ITEM_ID, ci) = ITEM_ID_ROD_MAGIC_MISSILE
 			inv(INV_ITEM_PIC, ci) = xy2pic(9, 14)
 			reftype = FILTER_ITEM_ROD
-			reftypeminor = FILTER_ITEM_ROD_UTILITY
+			reftypeminor = FILTER_ITEM_ROD
 			inv(INV_ITEM_NUM, ci) = 1
 			fixeditemenc = 0
 			inv(INV_ITEM_IDENTIFY_LEVEL, ci) = 0
-			inv(INV_ITEM_CHARGE, ci) = 16 + rnd(16) - rnd(16)
-			ibitmod ITEM_BIT_CHARGE_ITEM, ci, 1
+			inv((9 /*!!!@[INV_ITEM_AMMO @@@ INV_ITEM_CHARGE @@@ INV_ITEM_CLIENT @@@ INV_ITEM_FILE @@@ INV_ITEM_NEXT_PERIOD]@!!! */), ci) = 16 + rnd(16) - rnd(16)
+			ibitmod ITEM_BIT_CHARGE_ITEM, ci, TRUE
 			return
 		}
 		if ( dbmode == DBMODE_REF ) {
 			ichargelevel = 16
 			infilterref = ""
 			reftype = FILTER_ITEM_ROD
 			return
 		}
 		if ( dbmode == DBMODE_REF_SPEC ) {
 			if ( dbspec == DBSPEC_TYPE ) {
-				return FILTER_ITEM_ROD
+				return 56000
 			}
 			if ( dbspec == DBSPEC_TYPE_MINOR ) {
-				return FILTER_ITEM_ROD_UTILITY
+				return 56000
 			}
 			if ( dbspec == DBSPEC_VALUE_ORG ) {
 				return 800
 			}
 			if ( dbspec == DBSPEC_PARAM3_ORG ) {
@@ -112691,30 +114669,30 @@
 		}
 		if ( dbmode == DBMODE_SET ) {
 			inv(INV_ITEM_ID, ci) = ITEM_ID_ROD_CURE_MINOR_WOUND
 			inv(INV_ITEM_PIC, ci) = xy2pic(9, 14)
 			reftype = FILTER_ITEM_ROD
-			reftypeminor = FILTER_ITEM_ROD_HEALING
+			reftypeminor = FILTER_ITEM_ROD
 			inv(INV_ITEM_NUM, ci) = 1
 			fixeditemenc = 0
 			inv(INV_ITEM_IDENTIFY_LEVEL, ci) = 0
-			inv(INV_ITEM_CHARGE, ci) = 8 + rnd(8) - rnd(8)
-			ibitmod ITEM_BIT_CHARGE_ITEM, ci, 1
+			inv((9 /*!!!@[INV_ITEM_AMMO @@@ INV_ITEM_CHARGE @@@ INV_ITEM_CLIENT @@@ INV_ITEM_FILE @@@ INV_ITEM_NEXT_PERIOD]@!!! */), ci) = 8 + rnd(8) - rnd(8)
+			ibitmod ITEM_BIT_CHARGE_ITEM, ci, TRUE
 			return
 		}
 		if ( dbmode == DBMODE_REF ) {
 			ichargelevel = 8
 			infilterref = ""
 			reftype = FILTER_ITEM_ROD
 			return
 		}
 		if ( dbmode == DBMODE_REF_SPEC ) {
 			if ( dbspec == DBSPEC_TYPE ) {
-				return FILTER_ITEM_ROD
+				return 56000
 			}
 			if ( dbspec == DBSPEC_TYPE_MINOR ) {
-				return FILTER_ITEM_ROD_HEALING
+				return 56000
 			}
 			if ( dbspec == DBSPEC_VALUE_ORG ) {
 				return 650
 			}
 			if ( dbspec == DBSPEC_PARAM3_ORG ) {
@@ -112774,26 +114752,26 @@
 			reftype = FILTER_ITEM_SPELLBOOK
 			reftypeminor = FILTER_NOTHING
 			inv(INV_ITEM_NUM, ci) = 1
 			fixeditemenc = 0
 			inv(INV_ITEM_IDENTIFY_LEVEL, ci) = 0
-			inv(INV_ITEM_CHARGE, ci) = 4 + rnd(4) - rnd(4)
-			ibitmod ITEM_BIT_CHARGE_ITEM, ci, 1
+			inv((9 /*!!!@[INV_ITEM_AMMO @@@ INV_ITEM_CHARGE @@@ INV_ITEM_CLIENT @@@ INV_ITEM_FILE @@@ INV_ITEM_NEXT_PERIOD]@!!! */), ci) = 4 + rnd(4) - rnd(4)
+			ibitmod ITEM_BIT_CHARGE_ITEM, ci, TRUE
 			return
 		}
 		if ( dbmode == DBMODE_REF ) {
 			ichargelevel = 4
 			infilterref = ""
 			reftype = FILTER_ITEM_SPELLBOOK
 			return
 		}
 		if ( dbmode == DBMODE_REF_SPEC ) {
 			if ( dbspec == DBSPEC_TYPE ) {
-				return FILTER_ITEM_SPELLBOOK
+				return 54000
 			}
 			if ( dbspec == DBSPEC_TYPE_MINOR ) {
-				return FILTER_NONE
+				return 99999
 			}
 			if ( dbspec == DBSPEC_VALUE_ORG ) {
 				return 3000
 			}
 			if ( dbspec == DBSPEC_PARAM3_ORG ) {
@@ -112856,14 +114834,14 @@
 			reftype = FILTER_JUNK
 			return
 		}
 		if ( dbmode == DBMODE_REF_SPEC ) {
 			if ( dbspec == DBSPEC_TYPE ) {
-				return FILTER_JUNK
+				return 64000
 			}
 			if ( dbspec == DBSPEC_TYPE_MINOR ) {
-				return FILTER_JUNK
+				return 64000
 			}
 			if ( dbspec == DBSPEC_VALUE_ORG ) {
 				return 20
 			}
 			if ( dbspec == DBSPEC_PARAM3_ORG ) {
@@ -112907,26 +114885,26 @@
 			reftype = FILTER_ITEM_SPELLBOOK
 			reftypeminor = FILTER_NOTHING
 			inv(INV_ITEM_NUM, ci) = 1
 			fixeditemenc = 0
 			inv(INV_ITEM_IDENTIFY_LEVEL, ci) = 0
-			inv(INV_ITEM_CHARGE, ci) = 4 + rnd(4) - rnd(4)
-			ibitmod ITEM_BIT_CHARGE_ITEM, ci, 1
+			inv((9 /*!!!@[INV_ITEM_AMMO @@@ INV_ITEM_CHARGE @@@ INV_ITEM_CLIENT @@@ INV_ITEM_FILE @@@ INV_ITEM_NEXT_PERIOD]@!!! */), ci) = 4 + rnd(4) - rnd(4)
+			ibitmod ITEM_BIT_CHARGE_ITEM, ci, TRUE
 			return
 		}
 		if ( dbmode == DBMODE_REF ) {
 			ichargelevel = 4
 			infilterref = ""
 			reftype = FILTER_ITEM_SPELLBOOK
 			return
 		}
 		if ( dbmode == DBMODE_REF_SPEC ) {
 			if ( dbspec == DBSPEC_TYPE ) {
-				return FILTER_ITEM_SPELLBOOK
+				return 54000
 			}
 			if ( dbspec == DBSPEC_TYPE_MINOR ) {
-				return FILTER_NONE
+				return 99999
 			}
 			if ( dbspec == DBSPEC_VALUE_ORG ) {
 				return 1200
 			}
 			if ( dbspec == DBSPEC_PARAM3_ORG ) {
@@ -112989,14 +114967,14 @@
 			reftype = FILTER_FURNITURE
 			return
 		}
 		if ( dbmode == DBMODE_REF_SPEC ) {
 			if ( dbspec == DBSPEC_TYPE ) {
-				return FILTER_FURNITURE
+				return 60000
 			}
 			if ( dbspec == DBSPEC_TYPE_MINOR ) {
-				return FILTER_NONE
+				return 99999
 			}
 			if ( dbspec == DBSPEC_VALUE_ORG ) {
 				return 240
 			}
 			if ( dbspec == DBSPEC_PARAM3_ORG ) {
@@ -113050,14 +115028,14 @@
 			reftype = FILTER_FURNITURE
 			return
 		}
 		if ( dbmode == DBMODE_REF_SPEC ) {
 			if ( dbspec == DBSPEC_TYPE ) {
-				return FILTER_FURNITURE
+				return 60000
 			}
 			if ( dbspec == DBSPEC_TYPE_MINOR ) {
-				return FILTER_NONE
+				return 99999
 			}
 			if ( dbspec == DBSPEC_VALUE_ORG ) {
 				return 120
 			}
 			if ( dbspec == DBSPEC_PARAM3_ORG ) {
@@ -113111,14 +115089,14 @@
 			reftype = FILTER_FURNITURE
 			return
 		}
 		if ( dbmode == DBMODE_REF_SPEC ) {
 			if ( dbspec == DBSPEC_TYPE ) {
-				return FILTER_FURNITURE
+				return 60000
 			}
 			if ( dbspec == DBSPEC_TYPE_MINOR ) {
-				return FILTER_NONE
+				return 99999
 			}
 			if ( dbspec == DBSPEC_VALUE_ORG ) {
 				return 100
 			}
 			if ( dbspec == DBSPEC_PARAM3_ORG ) {
@@ -113174,14 +115152,14 @@
 			reftype = FILTER_FURNITURE
 			return
 		}
 		if ( dbmode == DBMODE_REF_SPEC ) {
 			if ( dbspec == DBSPEC_TYPE ) {
-				return FILTER_FURNITURE
+				return 60000
 			}
 			if ( dbspec == DBSPEC_TYPE_MINOR ) {
-				return FILTER_NONE
+				return 99999
 			}
 			if ( dbspec == DBSPEC_VALUE_ORG ) {
 				return 8500
 			}
 			if ( dbspec == DBSPEC_PARAM3_ORG ) {
@@ -113235,14 +115213,14 @@
 			reftype = FILTER_FURNITURE
 			return
 		}
 		if ( dbmode == DBMODE_REF_SPEC ) {
 			if ( dbspec == DBSPEC_TYPE ) {
-				return FILTER_FURNITURE
+				return 60000
 			}
 			if ( dbspec == DBSPEC_TYPE_MINOR ) {
-				return FILTER_NONE
+				return 99999
 			}
 			if ( dbspec == DBSPEC_VALUE_ORG ) {
 				return 4400
 			}
 			if ( dbspec == DBSPEC_PARAM3_ORG ) {
@@ -113296,14 +115274,14 @@
 			reftype = FILTER_FURNITURE
 			return
 		}
 		if ( dbmode == DBMODE_REF_SPEC ) {
 			if ( dbspec == DBSPEC_TYPE ) {
-				return FILTER_FURNITURE
+				return 60000
 			}
 			if ( dbspec == DBSPEC_TYPE_MINOR ) {
-				return FILTER_NONE
+				return 99999
 			}
 			if ( dbspec == DBSPEC_VALUE_ORG ) {
 				return 3000
 			}
 			if ( dbspec == DBSPEC_PARAM3_ORG ) {
@@ -113358,14 +115336,14 @@
 			reftype = FILTER_FURNITURE_WELL
 			return
 		}
 		if ( dbmode == DBMODE_REF_SPEC ) {
 			if ( dbspec == DBSPEC_TYPE ) {
-				return FILTER_FURNITURE_WELL
+				return 60001
 			}
 			if ( dbspec == DBSPEC_TYPE_MINOR ) {
-				return FILTER_FURNITURE_WELL
+				return 60001
 			}
 			if ( dbspec == DBSPEC_VALUE_ORG ) {
 				return 1800
 			}
 			if ( dbspec == DBSPEC_PARAM3_ORG ) {
@@ -113426,14 +115404,14 @@
 			reftype = FILTER_FURNITURE
 			return
 		}
 		if ( dbmode == DBMODE_REF_SPEC ) {
 			if ( dbspec == DBSPEC_TYPE ) {
-				return FILTER_FURNITURE
+				return 60000
 			}
 			if ( dbspec == DBSPEC_TYPE_MINOR ) {
-				return FILTER_NONE
+				return 99999
 			}
 			if ( dbspec == DBSPEC_VALUE_ORG ) {
 				return 1300
 			}
 			if ( dbspec == DBSPEC_PARAM3_ORG ) {
@@ -113487,14 +115465,14 @@
 			reftype = FILTER_FURNITURE
 			return
 		}
 		if ( dbmode == DBMODE_REF_SPEC ) {
 			if ( dbspec == DBSPEC_TYPE ) {
-				return FILTER_FURNITURE
+				return 60000
 			}
 			if ( dbspec == DBSPEC_TYPE_MINOR ) {
-				return FILTER_NONE
+				return 99999
 			}
 			if ( dbspec == DBSPEC_VALUE_ORG ) {
 				return 1050
 			}
 			if ( dbspec == DBSPEC_PARAM3_ORG ) {
@@ -113548,14 +115526,14 @@
 			reftype = FILTER_FURNITURE
 			return
 		}
 		if ( dbmode == DBMODE_REF_SPEC ) {
 			if ( dbspec == DBSPEC_TYPE ) {
-				return FILTER_FURNITURE
+				return 60000
 			}
 			if ( dbspec == DBSPEC_TYPE_MINOR ) {
-				return FILTER_NONE
+				return 99999
 			}
 			if ( dbspec == DBSPEC_VALUE_ORG ) {
 				return 1500
 			}
 			if ( dbspec == DBSPEC_PARAM3_ORG ) {
@@ -113609,14 +115587,14 @@
 			reftype = FILTER_FURNITURE
 			return
 		}
 		if ( dbmode == DBMODE_REF_SPEC ) {
 			if ( dbspec == DBSPEC_TYPE ) {
-				return FILTER_FURNITURE
+				return 60000
 			}
 			if ( dbspec == DBSPEC_TYPE_MINOR ) {
-				return FILTER_NONE
+				return 99999
 			}
 			if ( dbspec == DBSPEC_VALUE_ORG ) {
 				return 1800
 			}
 			if ( dbspec == DBSPEC_PARAM3_ORG ) {
@@ -113670,14 +115648,14 @@
 			reftype = FILTER_FURNITURE
 			return
 		}
 		if ( dbmode == DBMODE_REF_SPEC ) {
 			if ( dbspec == DBSPEC_TYPE ) {
-				return FILTER_FURNITURE
+				return 60000
 			}
 			if ( dbspec == DBSPEC_TYPE_MINOR ) {
-				return FILTER_NONE
+				return 99999
 			}
 			if ( dbspec == DBSPEC_VALUE_ORG ) {
 				return 750
 			}
 			if ( dbspec == DBSPEC_PARAM3_ORG ) {
@@ -113731,14 +115709,14 @@
 			reftype = FILTER_FURNITURE
 			return
 		}
 		if ( dbmode == DBMODE_REF_SPEC ) {
 			if ( dbspec == DBSPEC_TYPE ) {
-				return FILTER_FURNITURE
+				return 60000
 			}
 			if ( dbspec == DBSPEC_TYPE_MINOR ) {
-				return FILTER_NONE
+				return 99999
 			}
 			if ( dbspec == DBSPEC_VALUE_ORG ) {
 				return 2400
 			}
 			if ( dbspec == DBSPEC_PARAM3_ORG ) {
@@ -113793,14 +115771,14 @@
 			reftype = FILTER_FURNITURE
 			return
 		}
 		if ( dbmode == DBMODE_REF_SPEC ) {
 			if ( dbspec == DBSPEC_TYPE ) {
-				return FILTER_FURNITURE
+				return 60000
 			}
 			if ( dbspec == DBSPEC_TYPE_MINOR ) {
-				return FILTER_NONE
+				return 99999
 			}
 			if ( dbspec == DBSPEC_VALUE_ORG ) {
 				return 120
 			}
 			if ( dbspec == DBSPEC_PARAM3_ORG ) {
@@ -113855,14 +115833,14 @@
 			reftype = FILTER_FURNITURE
 			return
 		}
 		if ( dbmode == DBMODE_REF_SPEC ) {
 			if ( dbspec == DBSPEC_TYPE ) {
-				return FILTER_FURNITURE
+				return 60000
 			}
 			if ( dbspec == DBSPEC_TYPE_MINOR ) {
-				return FILTER_NONE
+				return 99999
 			}
 			if ( dbspec == DBSPEC_VALUE_ORG ) {
 				return 360
 			}
 			if ( dbspec == DBSPEC_PARAM3_ORG ) {
@@ -113917,14 +115895,14 @@
 			reftype = FILTER_FURNITURE
 			return
 		}
 		if ( dbmode == DBMODE_REF_SPEC ) {
 			if ( dbspec == DBSPEC_TYPE ) {
-				return FILTER_FURNITURE
+				return 60000
 			}
 			if ( dbspec == DBSPEC_TYPE_MINOR ) {
-				return FILTER_NONE
+				return 99999
 			}
 			if ( dbspec == DBSPEC_VALUE_ORG ) {
 				return 3800
 			}
 			if ( dbspec == DBSPEC_PARAM3_ORG ) {
@@ -113979,14 +115957,14 @@
 			reftype = FILTER_FURNITURE
 			return
 		}
 		if ( dbmode == DBMODE_REF_SPEC ) {
 			if ( dbspec == DBSPEC_TYPE ) {
-				return FILTER_FURNITURE
+				return 60000
 			}
 			if ( dbspec == DBSPEC_TYPE_MINOR ) {
-				return FILTER_NONE
+				return 99999
 			}
 			if ( dbspec == DBSPEC_VALUE_ORG ) {
 				return 1050
 			}
 			if ( dbspec == DBSPEC_PARAM3_ORG ) {
@@ -114040,14 +116018,14 @@
 			reftype = FILTER_FURNITURE
 			return
 		}
 		if ( dbmode == DBMODE_REF_SPEC ) {
 			if ( dbspec == DBSPEC_TYPE ) {
-				return FILTER_FURNITURE
+				return 60000
 			}
 			if ( dbspec == DBSPEC_TYPE_MINOR ) {
-				return FILTER_NONE
+				return 99999
 			}
 			if ( dbspec == DBSPEC_VALUE_ORG ) {
 				return 120
 			}
 			if ( dbspec == DBSPEC_PARAM3_ORG ) {
@@ -114101,14 +116079,14 @@
 			reftype = FILTER_FURNITURE
 			return
 		}
 		if ( dbmode == DBMODE_REF_SPEC ) {
 			if ( dbspec == DBSPEC_TYPE ) {
-				return FILTER_FURNITURE
+				return 60000
 			}
 			if ( dbspec == DBSPEC_TYPE_MINOR ) {
-				return FILTER_NONE
+				return 99999
 			}
 			if ( dbspec == DBSPEC_VALUE_ORG ) {
 				return 140
 			}
 			if ( dbspec == DBSPEC_PARAM3_ORG ) {
@@ -114162,14 +116140,14 @@
 			reftype = FILTER_FURNITURE
 			return
 		}
 		if ( dbmode == DBMODE_REF_SPEC ) {
 			if ( dbspec == DBSPEC_TYPE ) {
-				return FILTER_FURNITURE
+				return 60000
 			}
 			if ( dbspec == DBSPEC_TYPE_MINOR ) {
-				return FILTER_NONE
+				return 99999
 			}
 			if ( dbspec == DBSPEC_VALUE_ORG ) {
 				return 3500
 			}
 			if ( dbspec == DBSPEC_PARAM3_ORG ) {
@@ -114223,14 +116201,14 @@
 			reftype = FILTER_FURNITURE
 			return
 		}
 		if ( dbmode == DBMODE_REF_SPEC ) {
 			if ( dbspec == DBSPEC_TYPE ) {
-				return FILTER_FURNITURE
+				return 60000
 			}
 			if ( dbspec == DBSPEC_TYPE_MINOR ) {
-				return FILTER_NONE
+				return 99999
 			}
 			if ( dbspec == DBSPEC_VALUE_ORG ) {
 				return 4200
 			}
 			if ( dbspec == DBSPEC_PARAM3_ORG ) {
@@ -114284,14 +116262,14 @@
 			reftype = FILTER_FURNITURE
 			return
 		}
 		if ( dbmode == DBMODE_REF_SPEC ) {
 			if ( dbspec == DBSPEC_TYPE ) {
-				return FILTER_FURNITURE
+				return 60000
 			}
 			if ( dbspec == DBSPEC_TYPE_MINOR ) {
-				return FILTER_NONE
+				return 99999
 			}
 			if ( dbspec == DBSPEC_VALUE_ORG ) {
 				return 120
 			}
 			if ( dbspec == DBSPEC_PARAM3_ORG ) {
@@ -114345,14 +116323,14 @@
 			reftype = FILTER_FURNITURE
 			return
 		}
 		if ( dbmode == DBMODE_REF_SPEC ) {
 			if ( dbspec == DBSPEC_TYPE ) {
-				return FILTER_FURNITURE
+				return 60000
 			}
 			if ( dbspec == DBSPEC_TYPE_MINOR ) {
-				return FILTER_NONE
+				return 99999
 			}
 			if ( dbspec == DBSPEC_VALUE_ORG ) {
 				return 160
 			}
 			if ( dbspec == DBSPEC_PARAM3_ORG ) {
@@ -114407,14 +116385,14 @@
 			reftype = FILTER_FURNITURE
 			return
 		}
 		if ( dbmode == DBMODE_REF_SPEC ) {
 			if ( dbspec == DBSPEC_TYPE ) {
-				return FILTER_FURNITURE
+				return 60000
 			}
 			if ( dbspec == DBSPEC_TYPE_MINOR ) {
-				return FILTER_NONE
+				return 99999
 			}
 			if ( dbspec == DBSPEC_VALUE_ORG ) {
 				return 750
 			}
 			if ( dbspec == DBSPEC_PARAM3_ORG ) {
@@ -114468,14 +116446,14 @@
 			reftype = FILTER_FURNITURE
 			return
 		}
 		if ( dbmode == DBMODE_REF_SPEC ) {
 			if ( dbspec == DBSPEC_TYPE ) {
-				return FILTER_FURNITURE
+				return 60000
 			}
 			if ( dbspec == DBSPEC_TYPE_MINOR ) {
-				return FILTER_NONE
+				return 99999
 			}
 			if ( dbspec == DBSPEC_VALUE_ORG ) {
 				return 180
 			}
 			if ( dbspec == DBSPEC_PARAM3_ORG ) {
@@ -114529,14 +116507,14 @@
 			reftype = FILTER_FURNITURE
 			return
 		}
 		if ( dbmode == DBMODE_REF_SPEC ) {
 			if ( dbspec == DBSPEC_TYPE ) {
-				return FILTER_FURNITURE
+				return 60000
 			}
 			if ( dbspec == DBSPEC_TYPE_MINOR ) {
-				return FILTER_NONE
+				return 99999
 			}
 			if ( dbspec == DBSPEC_VALUE_ORG ) {
 				return 1200
 			}
 			if ( dbspec == DBSPEC_PARAM3_ORG ) {
@@ -114590,14 +116568,14 @@
 			reftype = FILTER_FURNITURE
 			return
 		}
 		if ( dbmode == DBMODE_REF_SPEC ) {
 			if ( dbspec == DBSPEC_TYPE ) {
-				return FILTER_FURNITURE
+				return 60000
 			}
 			if ( dbspec == DBSPEC_TYPE_MINOR ) {
-				return FILTER_NONE
+				return 99999
 			}
 			if ( dbspec == DBSPEC_VALUE_ORG ) {
 				return 1200
 			}
 			if ( dbspec == DBSPEC_PARAM3_ORG ) {
@@ -114654,14 +116632,14 @@
 			reftype = FILTER_FURNITURE
 			return
 		}
 		if ( dbmode == DBMODE_REF_SPEC ) {
 			if ( dbspec == DBSPEC_TYPE ) {
-				return FILTER_FURNITURE
+				return 60000
 			}
 			if ( dbspec == DBSPEC_TYPE_MINOR ) {
-				return FILTER_FURNITURE_INSTRUMENT
+				return 60005
 			}
 			if ( dbspec == DBSPEC_VALUE_ORG ) {
 				return 15000
 			}
 			if ( dbspec == DBSPEC_PARAM3_ORG ) {
@@ -114715,14 +116693,14 @@
 			reftype = FILTER_FURNITURE
 			return
 		}
 		if ( dbmode == DBMODE_REF_SPEC ) {
 			if ( dbspec == DBSPEC_TYPE ) {
-				return FILTER_FURNITURE
+				return 60000
 			}
 			if ( dbspec == DBSPEC_TYPE_MINOR ) {
-				return FILTER_NONE
+				return 99999
 			}
 			if ( dbspec == DBSPEC_VALUE_ORG ) {
 				return 720
 			}
 			if ( dbspec == DBSPEC_PARAM3_ORG ) {
@@ -114776,14 +116754,14 @@
 			reftype = FILTER_FURNITURE
 			return
 		}
 		if ( dbmode == DBMODE_REF_SPEC ) {
 			if ( dbspec == DBSPEC_TYPE ) {
-				return FILTER_FURNITURE
+				return 60000
 			}
 			if ( dbspec == DBSPEC_TYPE_MINOR ) {
-				return FILTER_NONE
+				return 99999
 			}
 			if ( dbspec == DBSPEC_VALUE_ORG ) {
 				return 450
 			}
 			if ( dbspec == DBSPEC_PARAM3_ORG ) {
@@ -114837,14 +116815,14 @@
 			reftype = FILTER_FURNITURE
 			return
 		}
 		if ( dbmode == DBMODE_REF_SPEC ) {
 			if ( dbspec == DBSPEC_TYPE ) {
-				return FILTER_FURNITURE
+				return 60000
 			}
 			if ( dbspec == DBSPEC_TYPE_MINOR ) {
-				return FILTER_NONE
+				return 99999
 			}
 			if ( dbspec == DBSPEC_VALUE_ORG ) {
 				return 1600
 			}
 			if ( dbspec == DBSPEC_PARAM3_ORG ) {
@@ -114898,14 +116876,14 @@
 			reftype = FILTER_FURNITURE
 			return
 		}
 		if ( dbmode == DBMODE_REF_SPEC ) {
 			if ( dbspec == DBSPEC_TYPE ) {
-				return FILTER_FURNITURE
+				return 60000
 			}
 			if ( dbspec == DBSPEC_TYPE_MINOR ) {
-				return FILTER_NONE
+				return 99999
 			}
 			if ( dbspec == DBSPEC_VALUE_ORG ) {
 				return 3800
 			}
 			if ( dbspec == DBSPEC_PARAM3_ORG ) {
@@ -114960,14 +116938,14 @@
 			reftype = FILTER_FURNITURE
 			return
 		}
 		if ( dbmode == DBMODE_REF_SPEC ) {
 			if ( dbspec == DBSPEC_TYPE ) {
-				return FILTER_FURNITURE
+				return 60000
 			}
 			if ( dbspec == DBSPEC_TYPE_MINOR ) {
-				return FILTER_NONE
+				return 99999
 			}
 			if ( dbspec == DBSPEC_VALUE_ORG ) {
 				return 2400
 			}
 			if ( dbspec == DBSPEC_PARAM3_ORG ) {
@@ -115021,14 +116999,14 @@
 			reftype = FILTER_FURNITURE
 			return
 		}
 		if ( dbmode == DBMODE_REF_SPEC ) {
 			if ( dbspec == DBSPEC_TYPE ) {
-				return FILTER_FURNITURE
+				return 60000
 			}
 			if ( dbspec == DBSPEC_TYPE_MINOR ) {
-				return FILTER_NONE
+				return 99999
 			}
 			if ( dbspec == DBSPEC_VALUE_ORG ) {
 				return 320
 			}
 			if ( dbspec == DBSPEC_PARAM3_ORG ) {
@@ -115083,14 +117061,14 @@
 			reftype = FILTER_FURNITURE
 			return
 		}
 		if ( dbmode == DBMODE_REF_SPEC ) {
 			if ( dbspec == DBSPEC_TYPE ) {
-				return FILTER_FURNITURE
+				return 60000
 			}
 			if ( dbspec == DBSPEC_TYPE_MINOR ) {
-				return FILTER_NONE
+				return 99999
 			}
 			if ( dbspec == DBSPEC_VALUE_ORG ) {
 				return 240
 			}
 			if ( dbspec == DBSPEC_PARAM3_ORG ) {
@@ -115145,14 +117123,14 @@
 			reftype = FILTER_FURNITURE
 			return
 		}
 		if ( dbmode == DBMODE_REF_SPEC ) {
 			if ( dbspec == DBSPEC_TYPE ) {
-				return FILTER_FURNITURE
+				return 60000
 			}
 			if ( dbspec == DBSPEC_TYPE_MINOR ) {
-				return FILTER_FURNITURE_BED
+				return 60004
 			}
 			if ( dbspec == DBSPEC_VALUE_ORG ) {
 				return 1400
 			}
 			if ( dbspec == DBSPEC_PARAM3_ORG ) {
@@ -115209,14 +117187,14 @@
 			reftype = FILTER_FURNITURE
 			return
 		}
 		if ( dbmode == DBMODE_REF_SPEC ) {
 			if ( dbspec == DBSPEC_TYPE ) {
-				return FILTER_FURNITURE
+				return 60000
 			}
 			if ( dbspec == DBSPEC_TYPE_MINOR ) {
-				return FILTER_NONE
+				return 99999
 			}
 			if ( dbspec == DBSPEC_VALUE_ORG ) {
 				return 6400
 			}
 			if ( dbspec == DBSPEC_PARAM3_ORG ) {
@@ -115271,14 +117249,14 @@
 			reftype = FILTER_FURNITURE
 			return
 		}
 		if ( dbmode == DBMODE_REF_SPEC ) {
 			if ( dbspec == DBSPEC_TYPE ) {
-				return FILTER_FURNITURE
+				return 60000
 			}
 			if ( dbspec == DBSPEC_TYPE_MINOR ) {
-				return FILTER_NONE
+				return 99999
 			}
 			if ( dbspec == DBSPEC_VALUE_ORG ) {
 				return 1800
 			}
 			if ( dbspec == DBSPEC_PARAM3_ORG ) {
@@ -115333,14 +117311,14 @@
 			reftype = FILTER_FURNITURE
 			return
 		}
 		if ( dbmode == DBMODE_REF_SPEC ) {
 			if ( dbspec == DBSPEC_TYPE ) {
-				return FILTER_FURNITURE
+				return 60000
 			}
 			if ( dbspec == DBSPEC_TYPE_MINOR ) {
-				return FILTER_NONE
+				return 99999
 			}
 			if ( dbspec == DBSPEC_VALUE_ORG ) {
 				return 80
 			}
 			if ( dbspec == DBSPEC_PARAM3_ORG ) {
@@ -115394,14 +117372,14 @@
 			reftype = FILTER_ITEM_POTION
 			return
 		}
 		if ( dbmode == DBMODE_REF_SPEC ) {
 			if ( dbspec == DBSPEC_TYPE ) {
-				return FILTER_ITEM_POTION
+				return 52000
 			}
 			if ( dbspec == DBSPEC_TYPE_MINOR ) {
-				return FILTER_ITEM_POTION_HEAL
+				return 52001
 			}
 			if ( dbspec == DBSPEC_VALUE_ORG ) {
 				return 15000
 			}
 			if ( dbspec == DBSPEC_PARAM3_ORG ) {
@@ -115464,14 +117442,14 @@
 			reftype = FILTER_ITEM_POTION
 			return
 		}
 		if ( dbmode == DBMODE_REF_SPEC ) {
 			if ( dbspec == DBSPEC_TYPE ) {
-				return FILTER_ITEM_POTION
+				return 52000
 			}
 			if ( dbspec == DBSPEC_TYPE_MINOR ) {
-				return FILTER_ITEM_POTION_HEAL
+				return 52001
 			}
 			if ( dbspec == DBSPEC_VALUE_ORG ) {
 				return 10000
 			}
 			if ( dbspec == DBSPEC_PARAM3_ORG ) {
@@ -115534,14 +117512,14 @@
 			reftype = FILTER_ITEM_POTION
 			return
 		}
 		if ( dbmode == DBMODE_REF_SPEC ) {
 			if ( dbspec == DBSPEC_TYPE ) {
-				return FILTER_ITEM_POTION
+				return 52000
 			}
 			if ( dbspec == DBSPEC_TYPE_MINOR ) {
-				return FILTER_ITEM_POTION_HEAL
+				return 52001
 			}
 			if ( dbspec == DBSPEC_VALUE_ORG ) {
 				return 7500
 			}
 			if ( dbspec == DBSPEC_PARAM3_ORG ) {
@@ -115600,12 +117578,12 @@
 			inv(INV_ITEM_ID, ci) = ITEM_ID_RAGNAROK
 			inv(INV_ITEM_PIC, ci) = xy2pic(9, 12)
 			reftype = FILTER_WEAPON
 			reftypeminor = FILTER_WEAPON_LONGSWORD
 			inv(INV_ITEM_NUM, ci) = 1
-			fixeditemenc = ENCHANT_RAGNAROK, 100, 0
-			ibitmod ITEM_BIT_PRECIOUS, ci, 1
+			fixeditemenc = 37, 100, 0
+			ibitmod ITEM_BIT_PRECIOUS, ci, TRUE
 			inv(INV_ITEM_IDENTIFY_LEVEL, ci) = 500
 			fixlv = FIX_QUALITY_UNIQUE
 			return
 		}
 		if ( dbmode == DBMODE_REF ) {
@@ -115614,14 +117592,14 @@
 			reftype = FILTER_WEAPON
 			return
 		}
 		if ( dbmode == DBMODE_REF_SPEC ) {
 			if ( dbspec == DBSPEC_TYPE ) {
-				return FILTER_WEAPON
+				return 10000
 			}
 			if ( dbspec == DBSPEC_TYPE_MINOR ) {
-				return FILTER_WEAPON_LONGSWORD
+				return 10002
 			}
 			if ( dbspec == DBSPEC_VALUE_ORG ) {
 				return 20000
 			}
 			if ( dbspec == DBSPEC_PARAM3_ORG ) {
@@ -115675,14 +117653,14 @@
 			reftype = FILTER_ITEM_POTION
 			return
 		}
 		if ( dbmode == DBMODE_REF_SPEC ) {
 			if ( dbspec == DBSPEC_TYPE ) {
-				return FILTER_ITEM_POTION
+				return 52000
 			}
 			if ( dbspec == DBSPEC_TYPE_MINOR ) {
-				return FILTER_ITEM_POTION_HEAL
+				return 52001
 			}
 			if ( dbspec == DBSPEC_VALUE_ORG ) {
 				return 5000
 			}
 			if ( dbspec == DBSPEC_PARAM3_ORG ) {
@@ -115745,14 +117723,14 @@
 			reftype = FILTER_ITEM_POTION
 			return
 		}
 		if ( dbmode == DBMODE_REF_SPEC ) {
 			if ( dbspec == DBSPEC_TYPE ) {
-				return FILTER_ITEM_POTION
+				return 52000
 			}
 			if ( dbspec == DBSPEC_TYPE_MINOR ) {
-				return FILTER_ITEM_POTION_HEAL
+				return 52001
 			}
 			if ( dbspec == DBSPEC_VALUE_ORG ) {
 				return 3000
 			}
 			if ( dbspec == DBSPEC_PARAM3_ORG ) {
@@ -115815,14 +117793,14 @@
 			reftype = FILTER_ITEM_POTION
 			return
 		}
 		if ( dbmode == DBMODE_REF_SPEC ) {
 			if ( dbspec == DBSPEC_TYPE ) {
-				return FILTER_ITEM_POTION
+				return 52000
 			}
 			if ( dbspec == DBSPEC_TYPE_MINOR ) {
-				return FILTER_ITEM_POTION_HEAL
+				return 52001
 			}
 			if ( dbspec == DBSPEC_VALUE_ORG ) {
 				return 1280
 			}
 			if ( dbspec == DBSPEC_PARAM3_ORG ) {
@@ -115885,14 +117863,14 @@
 			reftype = FILTER_ITEM_POTION
 			return
 		}
 		if ( dbmode == DBMODE_REF_SPEC ) {
 			if ( dbspec == DBSPEC_TYPE ) {
-				return FILTER_ITEM_POTION
+				return 52000
 			}
 			if ( dbspec == DBSPEC_TYPE_MINOR ) {
-				return FILTER_ITEM_POTION_HEAL
+				return 52001
 			}
 			if ( dbspec == DBSPEC_VALUE_ORG ) {
 				return 300
 			}
 			if ( dbspec == DBSPEC_PARAM3_ORG ) {
@@ -115955,14 +117933,14 @@
 			reftype = FILTER_ITEM_POTION
 			return
 		}
 		if ( dbmode == DBMODE_REF_SPEC ) {
 			if ( dbspec == DBSPEC_TYPE ) {
-				return FILTER_ITEM_POTION
+				return 52000
 			}
 			if ( dbspec == DBSPEC_TYPE_MINOR ) {
-				return FILTER_ITEM_POTION_HEAL
+				return 52001
 			}
 			if ( dbspec == DBSPEC_VALUE_ORG ) {
 				return 150
 			}
 			if ( dbspec == DBSPEC_PARAM3_ORG ) {
@@ -116026,14 +118004,14 @@
 			reftype = FILTER_ACCESSORY_AMULET
 			return
 		}
 		if ( dbmode == DBMODE_REF_SPEC ) {
 			if ( dbspec == DBSPEC_TYPE ) {
-				return FILTER_ACCESSORY_AMULET
+				return 34000
 			}
 			if ( dbspec == DBSPEC_TYPE_MINOR ) {
-				return FILTER_ACCESSORY_SMALL_AMULET
+				return 34001
 			}
 			if ( dbspec == DBSPEC_VALUE_ORG ) {
 				return 200
 			}
 			if ( dbspec == DBSPEC_PARAM3_ORG ) {
@@ -116098,14 +118076,14 @@
 			reftype = FILTER_GIRDLE
 			return
 		}
 		if ( dbmode == DBMODE_REF_SPEC ) {
 			if ( dbspec == DBSPEC_TYPE ) {
-				return FILTER_GIRDLE
+				return 19000
 			}
 			if ( dbspec == DBSPEC_TYPE_MINOR ) {
-				return FILTER_GIRDLE_MEDIUM
+				return 19001
 			}
 			if ( dbspec == DBSPEC_VALUE_ORG ) {
 				return 300
 			}
 			if ( dbspec == DBSPEC_PARAM3_ORG ) {
@@ -116162,14 +118140,14 @@
 			reftype = FILTER_CLOAK
 			return
 		}
 		if ( dbmode == DBMODE_REF_SPEC ) {
 			if ( dbspec == DBSPEC_TYPE ) {
-				return FILTER_CLOAK
+				return 20000
 			}
 			if ( dbspec == DBSPEC_TYPE_MINOR ) {
-				return FILTER_CLOAK_MEDIUM
+				return 20001
 			}
 			if ( dbspec == DBSPEC_VALUE_ORG ) {
 				return 250
 			}
 			if ( dbspec == DBSPEC_PARAM3_ORG ) {
@@ -116219,12 +118197,12 @@
 			inv(INV_ITEM_ID, ci) = ITEM_ID_MOURNBLADE
 			inv(INV_ITEM_PIC, ci) = xy2pic(13, 34)
 			reftype = FILTER_WEAPON
 			reftypeminor = FILTER_WEAPON_LONGSWORD
 			inv(INV_ITEM_NUM, ci) = 1
-			fixeditemenc = ENCHANT_ABSORB_STAMINA, 300, ENCHANT_ELEMENTAL_DMG * EXT_ENCHANTMENT + SKILL_RES_CHAOS, 300, ENCHANT_ELEMENTAL_DMG * EXT_ENCHANTMENT + SKILL_RES_NETHER, 250, ENCHANT_SKILL * EXT_ENCHANTMENT + SKILL_NORMAL_DUAL_WIELD, 300, ENCHANT_RESISTANCE * EXT_ENCHANTMENT + SKILL_RES_CHAOS, 250, ENCHANT_RESISTANCE * EXT_ENCHANTMENT + SKILL_RES_NETHER, 200, 0
-			ibitmod ITEM_BIT_PRECIOUS, ci, 1
+			fixeditemenc = 36, 300, ENCHANT_ELEMENTAL_DMG * EXT_ENCHANTMENT + SKILL_RES_CHAOS, 300, ENCHANT_ELEMENTAL_DMG * EXT_ENCHANTMENT + SKILL_RES_NETHER, 250, ENCHANT_SKILL * EXT_ENCHANTMENT + SKILL_NORMAL_DUAL_WIELD, 300, ENCHANT_RESISTANCE * EXT_ENCHANTMENT + SKILL_RES_CHAOS, 250, ENCHANT_RESISTANCE * EXT_ENCHANTMENT + SKILL_RES_NETHER, 200, 0
+			ibitmod ITEM_BIT_PRECIOUS, ci, TRUE
 			inv(INV_ITEM_IDENTIFY_LEVEL, ci) = 500
 			fixlv = FIX_QUALITY_UNIQUE
 			return
 		}
 		if ( dbmode == DBMODE_REF ) {
@@ -116233,14 +118211,14 @@
 			reftype = FILTER_WEAPON
 			return
 		}
 		if ( dbmode == DBMODE_REF_SPEC ) {
 			if ( dbspec == DBSPEC_TYPE ) {
-				return FILTER_WEAPON
+				return 10000
 			}
 			if ( dbspec == DBSPEC_TYPE_MINOR ) {
-				return FILTER_WEAPON_LONGSWORD
+				return 10002
 			}
 			if ( dbspec == DBSPEC_VALUE_ORG ) {
 				return 60000
 			}
 			if ( dbspec == DBSPEC_PARAM3_ORG ) {
@@ -116287,12 +118265,12 @@
 			inv(INV_ITEM_ID, ci) = ITEM_ID_SCYTHE_OF_THE_VOID
 			inv(INV_ITEM_PIC, ci) = xy2pic(25, 12)
 			reftype = FILTER_WEAPON
 			reftypeminor = FILTER_WEAPON_SICKLE
 			inv(INV_ITEM_NUM, ci) = 1
-			fixeditemenc = ENCHANT_FLOAT, 100, ENCHANT_ABSORB_MP, 500, ENCHANT_ENHANCE_SPELL, 450, ENCHANT_RESISTANCE * EXT_ENCHANTMENT + SKILL_RES_MAGIC, 250, ENCHANT_PROC * EXT_ENCHANTMENT + ENCHANT_PROC_DECAPITATION, 100, 0
-			ibitmod ITEM_BIT_PRECIOUS, ci, 1
+			fixeditemenc = 32, 100, 38, 500, 34, 450, ENCHANT_RESISTANCE * EXT_ENCHANTMENT + SKILL_RES_MAGIC, 250, ENCHANT_PROC * EXT_ENCHANTMENT + ENCHANT_PROC_DECAPITATION, 100, 0
+			ibitmod ITEM_BIT_PRECIOUS, ci, TRUE
 			inv(INV_ITEM_IDENTIFY_LEVEL, ci) = 500
 			fixlv = FIX_QUALITY_UNIQUE
 			return
 		}
 		if ( dbmode == DBMODE_REF ) {
@@ -116301,14 +118279,14 @@
 			reftype = FILTER_WEAPON
 			return
 		}
 		if ( dbmode == DBMODE_REF_SPEC ) {
 			if ( dbspec == DBSPEC_TYPE ) {
-				return FILTER_WEAPON
+				return 10000
 			}
 			if ( dbspec == DBSPEC_TYPE_MINOR ) {
-				return FILTER_WEAPON_SICKLE
+				return 10011
 			}
 			if ( dbspec == DBSPEC_VALUE_ORG ) {
 				return 50000
 			}
 			if ( dbspec == DBSPEC_PARAM3_ORG ) {
@@ -116368,14 +118346,14 @@
 			reftype = FILTER_AMMO
 			return
 		}
 		if ( dbmode == DBMODE_REF_SPEC ) {
 			if ( dbspec == DBSPEC_TYPE ) {
-				return FILTER_AMMO
+				return 25000
 			}
 			if ( dbspec == DBSPEC_TYPE_MINOR ) {
-				return FILTER_AMMO_BULLET
+				return 25020
 			}
 			if ( dbspec == DBSPEC_VALUE_ORG ) {
 				return 150
 			}
 			if ( dbspec == DBSPEC_PARAM3_ORG ) {
@@ -116435,14 +118413,14 @@
 			reftype = FILTER_AMMO
 			return
 		}
 		if ( dbmode == DBMODE_REF_SPEC ) {
 			if ( dbspec == DBSPEC_TYPE ) {
-				return FILTER_AMMO
+				return 25000
 			}
 			if ( dbspec == DBSPEC_TYPE_MINOR ) {
-				return FILTER_AMMO_ARROW
+				return 25001
 			}
 			if ( dbspec == DBSPEC_VALUE_ORG ) {
 				return 150
 			}
 			if ( dbspec == DBSPEC_PARAM3_ORG ) {
@@ -116510,14 +118488,14 @@
 			reftype = FILTER_RANGE
 			return
 		}
 		if ( dbmode == DBMODE_REF_SPEC ) {
 			if ( dbspec == DBSPEC_TYPE ) {
-				return FILTER_RANGE
+				return 24000
 			}
 			if ( dbspec == DBSPEC_TYPE_MINOR ) {
-				return FILTER_RANGE_PISTOL
+				return 24020
 			}
 			if ( dbspec == DBSPEC_VALUE_ORG ) {
 				return 500
 			}
 			if ( dbspec == DBSPEC_PARAM3_ORG ) {
@@ -116583,14 +118561,14 @@
 			reftype = FILTER_SHIELD
 			return
 		}
 		if ( dbmode == DBMODE_REF_SPEC ) {
 			if ( dbspec == DBSPEC_TYPE ) {
-				return FILTER_SHIELD
+				return 14000
 			}
 			if ( dbspec == DBSPEC_TYPE_MINOR ) {
-				return FILTER_SHIELD_SMALL
+				return 14003
 			}
 			if ( dbspec == DBSPEC_VALUE_ORG ) {
 				return 4800
 			}
 			if ( dbspec == DBSPEC_PARAM3_ORG ) {
@@ -116634,11 +118612,11 @@
 			inv(INV_ITEM_WEIGHT, ci) = 1200
 		}
 		if ( dbmode == DBMODE_SET ) {
 			inv(INV_ITEM_SKILL_REF, ci) = SKILL_WEAPON_BOW
 			inv(INV_ITEM_ID, ci) = ITEM_ID_LONG_BOW
-			inv(INV_ITEM_PIC, ci) = 404
+			inv(INV_ITEM_PIC, ci) = xy2pic(8, 12)
 			reftype = FILTER_RANGE
 			reftypeminor = FILTER_RANGE_SHORTBOW
 			inv(INV_ITEM_NUM, ci) = 1
 			fixeditemenc = ENCHANT_ATTRIBUTE * EXT_ENCHANTMENT + SKILL_ATTR_DEX, 200, 0
 			inv(INV_ITEM_IDENTIFY_LEVEL, ci) = 0
@@ -116650,14 +118628,14 @@
 			reftype = FILTER_RANGE
 			return
 		}
 		if ( dbmode == DBMODE_REF_SPEC ) {
 			if ( dbspec == DBSPEC_TYPE ) {
-				return FILTER_RANGE
+				return 24000
 			}
 			if ( dbspec == DBSPEC_TYPE_MINOR ) {
-				return FILTER_RANGE_SHORTBOW
+				return 24001
 			}
 			if ( dbspec == DBSPEC_VALUE_ORG ) {
 				return 500
 			}
 			if ( dbspec == DBSPEC_PARAM3_ORG ) {
@@ -116712,12 +118690,12 @@
 			inv(INV_ITEM_ID, ci) = ITEM_ID_ZANTETSUKEN
 			inv(INV_ITEM_PIC, ci) = xy2pic(6, 15)
 			reftype = FILTER_WEAPON
 			reftypeminor = FILTER_WEAPON_LONGSWORD
 			inv(INV_ITEM_NUM, ci) = 1
-			fixeditemenc = ENCHANT_PIERCING_CHANCE, 400, ENCHANT_RES_CONFUSE, 100, ENCHANT_ATTRIBUTE * EXT_ENCHANTMENT + SKILL_ATTR_STR, 300, ENCHANT_RESISTANCE * EXT_ENCHANTMENT + SKILL_RES_NERVE, 200, 0
-			ibitmod ITEM_BIT_PRECIOUS, ci, 1
+			fixeditemenc = 39, 400, 25, 100, ENCHANT_ATTRIBUTE * EXT_ENCHANTMENT + SKILL_ATTR_STR, 300, ENCHANT_RESISTANCE * EXT_ENCHANTMENT + SKILL_RES_NERVE, 200, 84, 300, 0
+			ibitmod ITEM_BIT_PRECIOUS, ci, TRUE
 			inv(INV_ITEM_IDENTIFY_LEVEL, ci) = 500
 			fixlv = FIX_QUALITY_UNIQUE
 			return
 		}
 		if ( dbmode == DBMODE_REF ) {
@@ -116726,14 +118704,14 @@
 			reftype = FILTER_WEAPON
 			return
 		}
 		if ( dbmode == DBMODE_REF_SPEC ) {
 			if ( dbspec == DBSPEC_TYPE ) {
-				return FILTER_WEAPON
+				return 10000
 			}
 			if ( dbspec == DBSPEC_TYPE_MINOR ) {
-				return FILTER_WEAPON_LONGSWORD
+				return 10002
 			}
 			if ( dbspec == DBSPEC_VALUE_ORG ) {
 				return 40000
 			}
 			if ( dbspec == DBSPEC_PARAM3_ORG ) {
@@ -116783,12 +118761,12 @@
 			inv(INV_ITEM_ID, ci) = ITEM_ID_DIABLOS
 			inv(INV_ITEM_PIC, ci) = xy2pic(9, 12)
 			reftype = FILTER_WEAPON
 			reftypeminor = FILTER_WEAPON_LONGSWORD
 			inv(INV_ITEM_NUM, ci) = 1
-			fixeditemenc = ENCHANT_TIME_STOP, 300, ENCHANT_ELEMENTAL_DMG * EXT_ENCHANTMENT + SKILL_RES_NERVE, 400, ENCHANT_ATTRIBUTE * EXT_ENCHANTMENT + SKILL_ATTR_SPD, 300, ENCHANT_RES_PARALYZE, 100, 0
-			ibitmod ITEM_BIT_PRECIOUS, ci, 1
+			fixeditemenc = 40, 300, ENCHANT_ELEMENTAL_DMG * EXT_ENCHANTMENT + SKILL_RES_NERVE, 400, ENCHANT_ATTRIBUTE * EXT_ENCHANTMENT + SKILL_ATTR_SPD, 300, 24, 100, 0
+			ibitmod ITEM_BIT_PRECIOUS, ci, TRUE
 			inv(INV_ITEM_IDENTIFY_LEVEL, ci) = 500
 			fixlv = FIX_QUALITY_UNIQUE
 			return
 		}
 		if ( dbmode == DBMODE_REF ) {
@@ -116797,14 +118775,14 @@
 			reftype = FILTER_WEAPON
 			return
 		}
 		if ( dbmode == DBMODE_REF_SPEC ) {
 			if ( dbspec == DBSPEC_TYPE ) {
-				return FILTER_WEAPON
+				return 10000
 			}
 			if ( dbspec == DBSPEC_TYPE_MINOR ) {
-				return FILTER_WEAPON_LONGSWORD
+				return 10002
 			}
 			if ( dbspec == DBSPEC_VALUE_ORG ) {
 				return 40000
 			}
 			if ( dbspec == DBSPEC_PARAM3_ORG ) {
@@ -116830,11 +118808,10 @@
 			}
 			else {
 				description(0) = ""
 				description(1) = ""
 				description(3) = "This sword seem's to be sentient."
-				description(3) = "\t\tA long sword that stops time."
 			}
 			return
 		}
 		return 0
 	}
@@ -116859,14 +118836,14 @@
 			reftype = FILTER_PLATINUM
 			return
 		}
 		if ( dbmode == DBMODE_REF_SPEC ) {
 			if ( dbspec == DBSPEC_TYPE ) {
-				return FILTER_PLATINUM
+				return 69000
 			}
 			if ( dbspec == DBSPEC_TYPE_MINOR ) {
-				return FILTER_NONE
+				return 99999
 			}
 			if ( dbspec == DBSPEC_VALUE_ORG ) {
 				return 1
 			}
 			if ( dbspec == DBSPEC_PARAM3_ORG ) {
@@ -116920,14 +118897,14 @@
 			reftype = FILTER_GOLD
 			return
 		}
 		if ( dbmode == DBMODE_REF_SPEC ) {
 			if ( dbspec == DBSPEC_TYPE ) {
-				return FILTER_GOLD
+				return 68000
 			}
 			if ( dbspec == DBSPEC_TYPE_MINOR ) {
-				return FILTER_NONE
+				return 99999
 			}
 			if ( dbspec == DBSPEC_VALUE_ORG ) {
 				return 1
 			}
 			if ( dbspec == DBSPEC_PARAM3_ORG ) {
@@ -116981,14 +118958,14 @@
 			reftype = FILTER_FURNITURE
 			return
 		}
 		if ( dbmode == DBMODE_REF_SPEC ) {
 			if ( dbspec == DBSPEC_TYPE ) {
-				return FILTER_FURNITURE
+				return 60000
 			}
 			if ( dbspec == DBSPEC_TYPE_MINOR ) {
-				return FILTER_NONE
+				return 99999
 			}
 			if ( dbspec == DBSPEC_VALUE_ORG ) {
 				return 10
 			}
 			if ( dbspec == DBSPEC_PARAM3_ORG ) {
@@ -117014,11 +118991,10 @@
 			}
 			else {
 				description(0) = ""
 				description(1) = ""
 				description(3) = "Please do not kick the tombstones."
-				description(3) = "\t\tA stone slab with letters written on it."
 			}
 			return
 		}
 		return 0
 	}
@@ -117043,14 +119019,14 @@
 			reftype = FILTER_JUNK
 			return
 		}
 		if ( dbmode == DBMODE_REF_SPEC ) {
 			if ( dbspec == DBSPEC_TYPE ) {
-				return FILTER_JUNK
+				return 64000
 			}
 			if ( dbspec == DBSPEC_TYPE_MINOR ) {
-				return FILTER_NONE
+				return 99999
 			}
 			if ( dbspec == DBSPEC_VALUE_ORG ) {
 				return 10
 			}
 			if ( dbspec == DBSPEC_PARAM3_ORG ) {
@@ -117104,14 +119080,14 @@
 			reftype = FILTER_JUNK
 			return
 		}
 		if ( dbmode == DBMODE_REF_SPEC ) {
 			if ( dbspec == DBSPEC_TYPE ) {
-				return FILTER_JUNK
+				return 64000
 			}
 			if ( dbspec == DBSPEC_TYPE_MINOR ) {
-				return FILTER_JUNK
+				return 64000
 			}
 			if ( dbspec == DBSPEC_VALUE_ORG ) {
 				return 10
 			}
 			if ( dbspec == DBSPEC_PARAM3_ORG ) {
@@ -117137,11 +119113,10 @@
 			}
 			else {
 				description(0) = ""
 				description(1) = ""
 				description(3) = "Some bone's are valuabl"
-				description(3) = "\t\tA bone that was left behind by something. Some bones are valuable.\n"
 			}
 			return
 		}
 		return 0
 	}
@@ -117166,14 +119141,14 @@
 			reftype = FILTER_JUNK
 			return
 		}
 		if ( dbmode == DBMODE_REF_SPEC ) {
 			if ( dbspec == DBSPEC_TYPE ) {
-				return FILTER_JUNK
+				return 64000
 			}
 			if ( dbspec == DBSPEC_TYPE_MINOR ) {
-				return FILTER_JUNK
+				return 64000
 			}
 			if ( dbspec == DBSPEC_VALUE_ORG ) {
 				return 10
 			}
 			if ( dbspec == DBSPEC_PARAM3_ORG ) {
@@ -117227,14 +119202,14 @@
 			reftype = FILTER_JUNK
 			return
 		}
 		if ( dbmode == DBMODE_REF_SPEC ) {
 			if ( dbspec == DBSPEC_TYPE ) {
-				return FILTER_JUNK
+				return 64000
 			}
 			if ( dbspec == DBSPEC_TYPE_MINOR ) {
-				return FILTER_NONE
+				return 99999
 			}
 			if ( dbspec == DBSPEC_VALUE_ORG ) {
 				return 130
 			}
 			if ( dbspec == DBSPEC_PARAM3_ORG ) {
@@ -117288,14 +119263,14 @@
 			reftype = FILTER_JUNK
 			return
 		}
 		if ( dbmode == DBMODE_REF_SPEC ) {
 			if ( dbspec == DBSPEC_TYPE ) {
-				return FILTER_JUNK
+				return 64000
 			}
 			if ( dbspec == DBSPEC_TYPE_MINOR ) {
-				return FILTER_NONE
+				return 99999
 			}
 			if ( dbspec == DBSPEC_VALUE_ORG ) {
 				return 170
 			}
 			if ( dbspec == DBSPEC_PARAM3_ORG ) {
@@ -117349,14 +119324,14 @@
 			reftype = FILTER_JUNK
 			return
 		}
 		if ( dbmode == DBMODE_REF_SPEC ) {
 			if ( dbspec == DBSPEC_TYPE ) {
-				return FILTER_JUNK
+				return 64000
 			}
 			if ( dbspec == DBSPEC_TYPE_MINOR ) {
-				return FILTER_JUNK_TOWN
+				return 64100
 			}
 			if ( dbspec == DBSPEC_VALUE_ORG ) {
 				return 140
 			}
 			if ( dbspec == DBSPEC_PARAM3_ORG ) {
@@ -117410,14 +119385,14 @@
 			reftype = FILTER_JUNK
 			return
 		}
 		if ( dbmode == DBMODE_REF_SPEC ) {
 			if ( dbspec == DBSPEC_TYPE ) {
-				return FILTER_JUNK
+				return 64000
 			}
 			if ( dbspec == DBSPEC_TYPE_MINOR ) {
-				return FILTER_JUNK
+				return 64000
 			}
 			if ( dbspec == DBSPEC_VALUE_ORG ) {
 				return 6
 			}
 			if ( dbspec == DBSPEC_PARAM3_ORG ) {
@@ -117471,14 +119446,14 @@
 			reftype = FILTER_JUNK
 			return
 		}
 		if ( dbmode == DBMODE_REF_SPEC ) {
 			if ( dbspec == DBSPEC_TYPE ) {
-				return FILTER_JUNK
+				return 64000
 			}
 			if ( dbspec == DBSPEC_TYPE_MINOR ) {
-				return FILTER_JUNK
+				return 64000
 			}
 			if ( dbspec == DBSPEC_VALUE_ORG ) {
 				return 8
 			}
 			if ( dbspec == DBSPEC_PARAM3_ORG ) {
@@ -117532,14 +119507,14 @@
 			reftype = FILTER_ORE
 			return
 		}
 		if ( dbmode == DBMODE_REF_SPEC ) {
 			if ( dbspec == DBSPEC_TYPE ) {
-				return FILTER_ORE
+				return 77000
 			}
 			if ( dbspec == DBSPEC_TYPE_MINOR ) {
-				return FILTER_JUNK
+				return 64000
 			}
 			if ( dbspec == DBSPEC_VALUE_ORG ) {
 				return 10
 			}
 			if ( dbspec == DBSPEC_PARAM3_ORG ) {
@@ -117601,14 +119576,14 @@
 			reftype = FILTER_JUNK
 			return
 		}
 		if ( dbmode == DBMODE_REF_SPEC ) {
 			if ( dbspec == DBSPEC_TYPE ) {
-				return FILTER_JUNK
+				return 64000
 			}
 			if ( dbspec == DBSPEC_TYPE_MINOR ) {
-				return FILTER_JUNK
+				return 64000
 			}
 			if ( dbspec == DBSPEC_VALUE_ORG ) {
 				return 10
 			}
 			if ( dbspec == DBSPEC_PARAM3_ORG ) {
@@ -117662,14 +119637,14 @@
 			reftype = FILTER_ORE
 			return
 		}
 		if ( dbmode == DBMODE_REF_SPEC ) {
 			if ( dbspec == DBSPEC_TYPE ) {
-				return FILTER_ORE
+				return 77000
 			}
 			if ( dbspec == DBSPEC_TYPE_MINOR ) {
-				return FILTER_ORE_GEM
+				return 77001
 			}
 			if ( dbspec == DBSPEC_VALUE_ORG ) {
 				return 4200
 			}
 			if ( dbspec == DBSPEC_PARAM3_ORG ) {
@@ -117731,14 +119706,14 @@
 			reftype = FILTER_ORE
 			return
 		}
 		if ( dbmode == DBMODE_REF_SPEC ) {
 			if ( dbspec == DBSPEC_TYPE ) {
-				return FILTER_ORE
+				return 77000
 			}
 			if ( dbspec == DBSPEC_TYPE_MINOR ) {
-				return FILTER_ORE_GEM
+				return 77001
 			}
 			if ( dbspec == DBSPEC_VALUE_ORG ) {
 				return 2450
 			}
 			if ( dbspec == DBSPEC_PARAM3_ORG ) {
@@ -117800,14 +119775,14 @@
 			reftype = FILTER_ORE
 			return
 		}
 		if ( dbmode == DBMODE_REF_SPEC ) {
 			if ( dbspec == DBSPEC_TYPE ) {
-				return FILTER_ORE
+				return 77000
 			}
 			if ( dbspec == DBSPEC_TYPE_MINOR ) {
-				return FILTER_ORE_GEM
+				return 77001
 			}
 			if ( dbspec == DBSPEC_VALUE_ORG ) {
 				return 720
 			}
 			if ( dbspec == DBSPEC_PARAM3_ORG ) {
@@ -117869,14 +119844,14 @@
 			reftype = FILTER_ORE
 			return
 		}
 		if ( dbmode == DBMODE_REF_SPEC ) {
 			if ( dbspec == DBSPEC_TYPE ) {
-				return FILTER_ORE
+				return 77000
 			}
 			if ( dbspec == DBSPEC_TYPE_MINOR ) {
-				return FILTER_ORE_GEM
+				return 77001
 			}
 			if ( dbspec == DBSPEC_VALUE_ORG ) {
 				return 1400
 			}
 			if ( dbspec == DBSPEC_PARAM3_ORG ) {
@@ -117938,14 +119913,14 @@
 			reftype = FILTER_ORE
 			return
 		}
 		if ( dbmode == DBMODE_REF_SPEC ) {
 			if ( dbspec == DBSPEC_TYPE ) {
-				return FILTER_ORE
+				return 77000
 			}
 			if ( dbspec == DBSPEC_TYPE_MINOR ) {
-				return FILTER_NONE
+				return 99999
 			}
 			if ( dbspec == DBSPEC_VALUE_ORG ) {
 				return 2000
 			}
 			if ( dbspec == DBSPEC_PARAM3_ORG ) {
@@ -118007,14 +119982,14 @@
 			reftype = FILTER_ORE
 			return
 		}
 		if ( dbmode == DBMODE_REF_SPEC ) {
 			if ( dbspec == DBSPEC_TYPE ) {
-				return FILTER_ORE
+				return 77000
 			}
 			if ( dbspec == DBSPEC_TYPE_MINOR ) {
-				return FILTER_NONE
+				return 99999
 			}
 			if ( dbspec == DBSPEC_VALUE_ORG ) {
 				return 450
 			}
 			if ( dbspec == DBSPEC_PARAM3_ORG ) {
@@ -118076,14 +120051,14 @@
 			reftype = FILTER_ORE
 			return
 		}
 		if ( dbmode == DBMODE_REF_SPEC ) {
 			if ( dbspec == DBSPEC_TYPE ) {
-				return FILTER_ORE
+				return 77000
 			}
 			if ( dbspec == DBSPEC_TYPE_MINOR ) {
-				return FILTER_NONE
+				return 99999
 			}
 			if ( dbspec == DBSPEC_VALUE_ORG ) {
 				return 470
 			}
 			if ( dbspec == DBSPEC_PARAM3_ORG ) {
@@ -118145,14 +120120,14 @@
 			reftype = FILTER_ORE
 			return
 		}
 		if ( dbmode == DBMODE_REF_SPEC ) {
 			if ( dbspec == DBSPEC_TYPE ) {
-				return FILTER_ORE
+				return 77000
 			}
 			if ( dbspec == DBSPEC_TYPE_MINOR ) {
-				return FILTER_NONE
+				return 99999
 			}
 			if ( dbspec == DBSPEC_VALUE_ORG ) {
 				return 450
 			}
 			if ( dbspec == DBSPEC_PARAM3_ORG ) {
@@ -118204,26 +120179,26 @@
 			reftype = FILTER_ITEM_SPELLBOOK
 			reftypeminor = FILTER_NOTHING
 			inv(INV_ITEM_NUM, ci) = 1
 			fixeditemenc = 0
 			inv(INV_ITEM_IDENTIFY_LEVEL, ci) = 0
-			inv(INV_ITEM_CHARGE, ci) = 4 + rnd(4) - rnd(4)
-			ibitmod ITEM_BIT_CHARGE_ITEM, ci, 1
+			inv((9 /*!!!@[INV_ITEM_AMMO @@@ INV_ITEM_CHARGE @@@ INV_ITEM_CLIENT @@@ INV_ITEM_FILE @@@ INV_ITEM_NEXT_PERIOD]@!!! */), ci) = 4 + rnd(4) - rnd(4)
+			ibitmod ITEM_BIT_CHARGE_ITEM, ci, TRUE
 			return
 		}
 		if ( dbmode == DBMODE_REF ) {
 			ichargelevel = 4
 			infilterref = ""
 			reftype = FILTER_ITEM_SPELLBOOK
 			return
 		}
 		if ( dbmode == DBMODE_REF_SPEC ) {
 			if ( dbspec == DBSPEC_TYPE ) {
-				return FILTER_ITEM_SPELLBOOK
+				return 54000
 			}
 			if ( dbspec == DBSPEC_TYPE_MINOR ) {
-				return FILTER_NONE
+				return 99999
 			}
 			if ( dbspec == DBSPEC_VALUE_ORG ) {
 				return 1900
 			}
 			if ( dbspec == DBSPEC_PARAM3_ORG ) {
@@ -118234,11 +120209,11 @@
 			}
 			if ( dbspec == DBSPEC_PCC ) {
 				return 0
 			}
 			if ( dbspec == DBSPEC_OBJ_LEVEL ) {
-				return 1
+				return 12
 			}
 			if ( dbspec == DBSPEC_RARE_LEVEL ) {
 				return 1000
 			}
 			return 0
@@ -118250,13 +120225,13 @@
 			return -1
 		}
 		if ( dbmode == DBMODE_DESC ) {
 			if ( jp ) {
 				description(0) = "\t\t「ライトニングボルト」という呪文について学ぶことができる魔法書。いつでも雷を見たいあなたに。\n#〜本の為の本・魔法書編〜\n"
-				description(1) = "<ランク3魔法>"
+				description(1) = "<ランク4魔法>"
 				description(2) = ""
-				description(3) = "\t\t雷属性のボルトを唱える為に必要な本。読むことができる。\n#〜鑑定報告書：＜書物＞カテゴリ〜\n"
+				description(3) = "\t\t電撃属性のボルトを唱える為に必要な本。読むことができる。\n#〜鑑定報告書：＜書物＞カテゴリ〜\n"
 			}
 			else {
 				description(0) = ""
 				description(1) = ""
 				description(3) = "This tome let's off a static discharge."
@@ -118276,26 +120251,26 @@
 			reftype = FILTER_ITEM_SPELLBOOK
 			reftypeminor = FILTER_NOTHING
 			inv(INV_ITEM_NUM, ci) = 1
 			fixeditemenc = 0
 			inv(INV_ITEM_IDENTIFY_LEVEL, ci) = 0
-			inv(INV_ITEM_CHARGE, ci) = 4 + rnd(4) - rnd(4)
-			ibitmod ITEM_BIT_CHARGE_ITEM, ci, 1
+			inv((9 /*!!!@[INV_ITEM_AMMO @@@ INV_ITEM_CHARGE @@@ INV_ITEM_CLIENT @@@ INV_ITEM_FILE @@@ INV_ITEM_NEXT_PERIOD]@!!! */), ci) = 4 + rnd(4) - rnd(4)
+			ibitmod ITEM_BIT_CHARGE_ITEM, ci, TRUE
 			return
 		}
 		if ( dbmode == DBMODE_REF ) {
 			ichargelevel = 4
 			infilterref = ""
 			reftype = FILTER_ITEM_SPELLBOOK
 			return
 		}
 		if ( dbmode == DBMODE_REF_SPEC ) {
 			if ( dbspec == DBSPEC_TYPE ) {
-				return FILTER_ITEM_SPELLBOOK
+				return 54000
 			}
 			if ( dbspec == DBSPEC_TYPE_MINOR ) {
-				return FILTER_NONE
+				return 99999
 			}
 			if ( dbspec == DBSPEC_VALUE_ORG ) {
 				return 1900
 			}
 			if ( dbspec == DBSPEC_PARAM3_ORG ) {
@@ -118306,11 +120281,11 @@
 			}
 			if ( dbspec == DBSPEC_PCC ) {
 				return 0
 			}
 			if ( dbspec == DBSPEC_OBJ_LEVEL ) {
-				return 1
+				return 12
 			}
 			if ( dbspec == DBSPEC_RARE_LEVEL ) {
 				return 1000
 			}
 			return 0
@@ -118322,13 +120297,13 @@
 			return -1
 		}
 		if ( dbmode == DBMODE_DESC ) {
 			if ( jp ) {
 				description(0) = "\t\t「ファイアボルト」という呪文について学ぶことができる魔法書。寒がりなあなたに。\n#〜本の為の本・魔法書編〜\n"
-				description(1) = "<ランク3魔法>"
+				description(1) = "<ランク4魔法>"
 				description(2) = ""
-				description(3) = "\t\t炎属性のボルトを唱える為に必要な本。読むことができる。\n#〜鑑定報告書：＜書物＞カテゴリ〜\n"
+				description(3) = "\t\t火炎属性のボルトを唱える為に必要な本。読むことができる。\n#〜鑑定報告書：＜書物＞カテゴリ〜\n"
 			}
 			else {
 				description(0) = ""
 				description(1) = ""
 				description(3) = "The tome is strangely warm."
@@ -118348,26 +120323,26 @@
 			reftype = FILTER_ITEM_SPELLBOOK
 			reftypeminor = FILTER_NOTHING
 			inv(INV_ITEM_NUM, ci) = 1
 			fixeditemenc = 0
 			inv(INV_ITEM_IDENTIFY_LEVEL, ci) = 0
-			inv(INV_ITEM_CHARGE, ci) = 4 + rnd(4) - rnd(4)
-			ibitmod ITEM_BIT_CHARGE_ITEM, ci, 1
+			inv((9 /*!!!@[INV_ITEM_AMMO @@@ INV_ITEM_CHARGE @@@ INV_ITEM_CLIENT @@@ INV_ITEM_FILE @@@ INV_ITEM_NEXT_PERIOD]@!!! */), ci) = 4 + rnd(4) - rnd(4)
+			ibitmod ITEM_BIT_CHARGE_ITEM, ci, TRUE
 			return
 		}
 		if ( dbmode == DBMODE_REF ) {
 			ichargelevel = 4
 			infilterref = ""
 			reftype = FILTER_ITEM_SPELLBOOK
 			return
 		}
 		if ( dbmode == DBMODE_REF_SPEC ) {
 			if ( dbspec == DBSPEC_TYPE ) {
-				return FILTER_ITEM_SPELLBOOK
+				return 54000
 			}
 			if ( dbspec == DBSPEC_TYPE_MINOR ) {
-				return FILTER_NONE
+				return 99999
 			}
 			if ( dbspec == DBSPEC_VALUE_ORG ) {
 				return 1900
 			}
 			if ( dbspec == DBSPEC_PARAM3_ORG ) {
@@ -118378,11 +120353,11 @@
 			}
 			if ( dbspec == DBSPEC_PCC ) {
 				return 0
 			}
 			if ( dbspec == DBSPEC_OBJ_LEVEL ) {
-				return 1
+				return 12
 			}
 			if ( dbspec == DBSPEC_RARE_LEVEL ) {
 				return 1000
 			}
 			return 0
@@ -118394,13 +120369,13 @@
 			return -1
 		}
 		if ( dbmode == DBMODE_DESC ) {
 			if ( jp ) {
 				description(0) = "\t\t「アイスボルト」という呪文について学ぶことができる魔法書。暑がりなあなたに。\n#〜本の為の本・魔法書編〜\n"
-				description(1) = "<ランク3魔法>"
+				description(1) = "<ランク4魔法>"
 				description(2) = ""
-				description(3) = "\t\t氷属性のボルトを唱える為に必要な本。読むことができる。\n#〜鑑定報告書：＜書物＞カテゴリ〜\n"
+				description(3) = "\t\t冷気属性のボルトを唱える為に必要な本。読むことができる。\n#〜鑑定報告書：＜書物＞カテゴリ〜\n"
 			}
 			else {
 				description(0) = ""
 				description(1) = ""
 				description(3) = "The tome is cool to the touch."
@@ -118430,14 +120405,14 @@
 			reftype = FILTER_ITEM_POTION
 			return
 		}
 		if ( dbmode == DBMODE_REF_SPEC ) {
 			if ( dbspec == DBSPEC_TYPE ) {
-				return FILTER_ITEM_POTION
+				return 52000
 			}
 			if ( dbspec == DBSPEC_TYPE_MINOR ) {
-				return FILTER_ITEM_POTION_ALE
+				return 52002
 			}
 			if ( dbspec == DBSPEC_VALUE_ORG ) {
 				return 280
 			}
 			if ( dbspec == DBSPEC_PARAM3_ORG ) {
@@ -118500,14 +120475,14 @@
 			reftype = FILTER_ITEM_POTION
 			return
 		}
 		if ( dbmode == DBMODE_REF_SPEC ) {
 			if ( dbspec == DBSPEC_TYPE ) {
-				return FILTER_ITEM_POTION
+				return 52000
 			}
 			if ( dbspec == DBSPEC_TYPE_MINOR ) {
-				return FILTER_NONE
+				return 99999
 			}
 			if ( dbspec == DBSPEC_VALUE_ORG ) {
 				return 120
 			}
 			if ( dbspec == DBSPEC_PARAM3_ORG ) {
@@ -118570,14 +120545,14 @@
 			reftype = FILTER_ITEM_POTION
 			return
 		}
 		if ( dbmode == DBMODE_REF_SPEC ) {
 			if ( dbspec == DBSPEC_TYPE ) {
-				return FILTER_ITEM_POTION
+				return 52000
 			}
 			if ( dbspec == DBSPEC_TYPE_MINOR ) {
-				return FILTER_NONE
+				return 99999
 			}
 			if ( dbspec == DBSPEC_VALUE_ORG ) {
 				return 40
 			}
 			if ( dbspec == DBSPEC_PARAM3_ORG ) {
@@ -118640,14 +120615,14 @@
 			reftype = FILTER_ITEM_POTION
 			return
 		}
 		if ( dbmode == DBMODE_REF_SPEC ) {
 			if ( dbspec == DBSPEC_TYPE ) {
-				return FILTER_ITEM_POTION
+				return 52000
 			}
 			if ( dbspec == DBSPEC_TYPE_MINOR ) {
-				return FILTER_NONE
+				return 99999
 			}
 			if ( dbspec == DBSPEC_VALUE_ORG ) {
 				return 30
 			}
 			if ( dbspec == DBSPEC_PARAM3_ORG ) {
@@ -118710,14 +120685,14 @@
 			reftype = FILTER_ITEM_POTION
 			return
 		}
 		if ( dbmode == DBMODE_REF_SPEC ) {
 			if ( dbspec == DBSPEC_TYPE ) {
-				return FILTER_ITEM_POTION
+				return 52000
 			}
 			if ( dbspec == DBSPEC_TYPE_MINOR ) {
-				return FILTER_NONE
+				return 99999
 			}
 			if ( dbspec == DBSPEC_VALUE_ORG ) {
 				return 20
 			}
 			if ( dbspec == DBSPEC_PARAM3_ORG ) {
@@ -118780,14 +120755,14 @@
 			reftype = FILTER_ITEM_POTION
 			return
 		}
 		if ( dbmode == DBMODE_REF_SPEC ) {
 			if ( dbspec == DBSPEC_TYPE ) {
-				return FILTER_ITEM_POTION
+				return 52000
 			}
 			if ( dbspec == DBSPEC_TYPE_MINOR ) {
-				return FILTER_NONE
+				return 99999
 			}
 			if ( dbspec == DBSPEC_VALUE_ORG ) {
 				return 100
 			}
 			if ( dbspec == DBSPEC_PARAM3_ORG ) {
@@ -118850,14 +120825,14 @@
 			reftype = FILTER_ITEM_BOOK
 			return
 		}
 		if ( dbmode == DBMODE_REF_SPEC ) {
 			if ( dbspec == DBSPEC_TYPE ) {
-				return FILTER_ITEM_BOOK
+				return 55000
 			}
 			if ( dbspec == DBSPEC_TYPE_MINOR ) {
-				return FILTER_NONE
+				return 99999
 			}
 			if ( dbspec == DBSPEC_VALUE_ORG ) {
 				return 100
 			}
 			if ( dbspec == DBSPEC_PARAM3_ORG ) {
@@ -118876,11 +120851,11 @@
 				return 1000
 			}
 			return 0
 		}
 		if ( dbmode == DBMODE_ON_READ ) {
-			inv(INV_ITEM_BOOK_ID, ci) = 2
+			inv(INV_ITEM_PARAM1, ci) = 2
 			gosub *read
 			return -1
 		}
 		if ( dbmode == DBMODE_DESC ) {
 			if ( jp ) {
@@ -118920,14 +120895,14 @@
 			reftype = FILTER_ITEM_BOOK
 			return
 		}
 		if ( dbmode == DBMODE_REF_SPEC ) {
 			if ( dbspec == DBSPEC_TYPE ) {
-				return FILTER_ITEM_BOOK
+				return 55000
 			}
 			if ( dbspec == DBSPEC_TYPE_MINOR ) {
-				return FILTER_NONE
+				return 99999
 			}
 			if ( dbspec == DBSPEC_VALUE_ORG ) {
 				return 500
 			}
 			if ( dbspec == DBSPEC_PARAM3_ORG ) {
@@ -118989,14 +120964,14 @@
 			reftype = FILTER_ITEM_BOOK
 			return
 		}
 		if ( dbmode == DBMODE_REF_SPEC ) {
 			if ( dbspec == DBSPEC_TYPE ) {
-				return FILTER_ITEM_BOOK
+				return 55000
 			}
 			if ( dbspec == DBSPEC_TYPE_MINOR ) {
-				return FILTER_NONE
+				return 99999
 			}
 			if ( dbspec == DBSPEC_VALUE_ORG ) {
 				return 100
 			}
 			if ( dbspec == DBSPEC_PARAM3_ORG ) {
@@ -119015,11 +120990,11 @@
 				return 1000
 			}
 			return 0
 		}
 		if ( dbmode == DBMODE_ON_READ ) {
-			inv(INV_ITEM_BOOK_ID, ci) = 1
+			inv(INV_ITEM_PARAM1, ci) = 1
 			gosub *read
 			return -1
 		}
 		if ( dbmode == DBMODE_DESC ) {
 			if ( jp ) {
@@ -119048,26 +121023,26 @@
 			reftype = FILTER_ITEM_SPELLBOOK
 			reftypeminor = FILTER_NOTHING
 			inv(INV_ITEM_NUM, ci) = 1
 			fixeditemenc = 0
 			inv(INV_ITEM_IDENTIFY_LEVEL, ci) = 0
-			inv(INV_ITEM_CHARGE, ci) = 4 + rnd(4) - rnd(4)
-			ibitmod ITEM_BIT_CHARGE_ITEM, ci, 1
+			inv((9 /*!!!@[INV_ITEM_AMMO @@@ INV_ITEM_CHARGE @@@ INV_ITEM_CLIENT @@@ INV_ITEM_FILE @@@ INV_ITEM_NEXT_PERIOD]@!!! */), ci) = 4 + rnd(4) - rnd(4)
+			ibitmod ITEM_BIT_CHARGE_ITEM, ci, TRUE
 			return
 		}
 		if ( dbmode == DBMODE_REF ) {
 			ichargelevel = 4
 			infilterref = ""
 			reftype = FILTER_ITEM_SPELLBOOK
 			return
 		}
 		if ( dbmode == DBMODE_REF_SPEC ) {
 			if ( dbspec == DBSPEC_TYPE ) {
-				return FILTER_ITEM_SPELLBOOK
+				return 54000
 			}
 			if ( dbspec == DBSPEC_TYPE_MINOR ) {
-				return FILTER_NONE
+				return 99999
 			}
 			if ( dbspec == DBSPEC_VALUE_ORG ) {
 				return 3200
 			}
 			if ( dbspec == DBSPEC_PARAM3_ORG ) {
@@ -119120,26 +121095,26 @@
 			reftype = FILTER_ITEM_SPELLBOOK
 			reftypeminor = FILTER_NOTHING
 			inv(INV_ITEM_NUM, ci) = 1
 			fixeditemenc = 0
 			inv(INV_ITEM_IDENTIFY_LEVEL, ci) = 0
-			inv(INV_ITEM_CHARGE, ci) = 4 + rnd(4) - rnd(4)
-			ibitmod ITEM_BIT_CHARGE_ITEM, ci, 1
+			inv((9 /*!!!@[INV_ITEM_AMMO @@@ INV_ITEM_CHARGE @@@ INV_ITEM_CLIENT @@@ INV_ITEM_FILE @@@ INV_ITEM_NEXT_PERIOD]@!!! */), ci) = 4 + rnd(4) - rnd(4)
+			ibitmod ITEM_BIT_CHARGE_ITEM, ci, TRUE
 			return
 		}
 		if ( dbmode == DBMODE_REF ) {
 			ichargelevel = 4
 			infilterref = ""
 			reftype = FILTER_ITEM_SPELLBOOK
 			return
 		}
 		if ( dbmode == DBMODE_REF_SPEC ) {
 			if ( dbspec == DBSPEC_TYPE ) {
-				return FILTER_ITEM_SPELLBOOK
+				return 54000
 			}
 			if ( dbspec == DBSPEC_TYPE_MINOR ) {
-				return FILTER_NONE
+				return 99999
 			}
 			if ( dbspec == DBSPEC_VALUE_ORG ) {
 				return 2800
 			}
 			if ( dbspec == DBSPEC_PARAM3_ORG ) {
@@ -119192,26 +121167,26 @@
 			reftype = FILTER_ITEM_SPELLBOOK
 			reftypeminor = FILTER_NOTHING
 			inv(INV_ITEM_NUM, ci) = 1
 			fixeditemenc = 0
 			inv(INV_ITEM_IDENTIFY_LEVEL, ci) = 0
-			inv(INV_ITEM_CHARGE, ci) = 5 + rnd(5) - rnd(5)
-			ibitmod ITEM_BIT_CHARGE_ITEM, ci, 1
+			inv((9 /*!!!@[INV_ITEM_AMMO @@@ INV_ITEM_CHARGE @@@ INV_ITEM_CLIENT @@@ INV_ITEM_FILE @@@ INV_ITEM_NEXT_PERIOD]@!!! */), ci) = 5 + rnd(5) - rnd(5)
+			ibitmod ITEM_BIT_CHARGE_ITEM, ci, TRUE
 			return
 		}
 		if ( dbmode == DBMODE_REF ) {
 			ichargelevel = 5
 			infilterref = ""
 			reftype = FILTER_ITEM_SPELLBOOK
 			return
 		}
 		if ( dbmode == DBMODE_REF_SPEC ) {
 			if ( dbspec == DBSPEC_TYPE ) {
-				return FILTER_ITEM_SPELLBOOK
+				return 54000
 			}
 			if ( dbspec == DBSPEC_TYPE_MINOR ) {
-				return FILTER_NONE
+				return 99999
 			}
 			if ( dbspec == DBSPEC_VALUE_ORG ) {
 				return 1600
 			}
 			if ( dbspec == DBSPEC_PARAM3_ORG ) {
@@ -119264,26 +121239,26 @@
 			reftype = FILTER_ITEM_ROD
 			reftypeminor = FILTER_ITEM_ROD_UTILITY
 			inv(INV_ITEM_NUM, ci) = 1
 			fixeditemenc = 0
 			inv(INV_ITEM_IDENTIFY_LEVEL, ci) = 0
-			inv(INV_ITEM_CHARGE, ci) = 12 + rnd(12) - rnd(12)
-			ibitmod ITEM_BIT_CHARGE_ITEM, ci, 1
+			inv((9 /*!!!@[INV_ITEM_AMMO @@@ INV_ITEM_CHARGE @@@ INV_ITEM_CLIENT @@@ INV_ITEM_FILE @@@ INV_ITEM_NEXT_PERIOD]@!!! */), ci) = 12 + rnd(12) - rnd(12)
+			ibitmod ITEM_BIT_CHARGE_ITEM, ci, TRUE
 			return
 		}
 		if ( dbmode == DBMODE_REF ) {
 			ichargelevel = 12
 			infilterref = ""
 			reftype = FILTER_ITEM_ROD
 			return
 		}
 		if ( dbmode == DBMODE_REF_SPEC ) {
 			if ( dbspec == DBSPEC_TYPE ) {
-				return FILTER_ITEM_ROD
+				return 56000
 			}
 			if ( dbspec == DBSPEC_TYPE_MINOR ) {
-				return FILTER_ITEM_ROD_UTILITY
+				return 56003
 			}
 			if ( dbspec == DBSPEC_VALUE_ORG ) {
 				return 840
 			}
 			if ( dbspec == DBSPEC_PARAM3_ORG ) {
@@ -119343,26 +121318,26 @@
 			reftype = FILTER_ITEM_ROD
 			reftypeminor = FILTER_ITEM_ROD_UTILITY
 			inv(INV_ITEM_NUM, ci) = 1
 			fixeditemenc = 0
 			inv(INV_ITEM_IDENTIFY_LEVEL, ci) = 0
-			inv(INV_ITEM_CHARGE, ci) = 8 + rnd(8) - rnd(8)
-			ibitmod ITEM_BIT_CHARGE_ITEM, ci, 1
+			inv((9 /*!!!@[INV_ITEM_AMMO @@@ INV_ITEM_CHARGE @@@ INV_ITEM_CLIENT @@@ INV_ITEM_FILE @@@ INV_ITEM_NEXT_PERIOD]@!!! */), ci) = 8 + rnd(8) - rnd(8)
+			ibitmod ITEM_BIT_CHARGE_ITEM, ci, TRUE
 			return
 		}
 		if ( dbmode == DBMODE_REF ) {
 			ichargelevel = 8
 			infilterref = ""
 			reftype = FILTER_ITEM_ROD
 			return
 		}
 		if ( dbmode == DBMODE_REF_SPEC ) {
 			if ( dbspec == DBSPEC_TYPE ) {
-				return FILTER_ITEM_ROD
+				return 56000
 			}
 			if ( dbspec == DBSPEC_TYPE_MINOR ) {
-				return FILTER_ITEM_ROD_UTILITY
+				return 56003
 			}
 			if ( dbspec == DBSPEC_VALUE_ORG ) {
 				return 1080
 			}
 			if ( dbspec == DBSPEC_PARAM3_ORG ) {
@@ -119432,14 +121407,14 @@
 			reftype = FILTER_ITEM_SCROLL
 			return
 		}
 		if ( dbmode == DBMODE_REF_SPEC ) {
 			if ( dbspec == DBSPEC_TYPE ) {
-				return FILTER_ITEM_SCROLL
+				return 53000
 			}
 			if ( dbspec == DBSPEC_TYPE_MINOR ) {
-				return FILTER_NONE
+				return 99999
 			}
 			if ( dbspec == DBSPEC_VALUE_ORG ) {
 				return 3500
 			}
 			if ( dbspec == DBSPEC_PARAM3_ORG ) {
@@ -119502,14 +121477,14 @@
 			reftype = FILTER_ITEM_SCROLL
 			return
 		}
 		if ( dbmode == DBMODE_REF_SPEC ) {
 			if ( dbspec == DBSPEC_TYPE ) {
-				return FILTER_ITEM_SCROLL
+				return 53000
 			}
 			if ( dbspec == DBSPEC_TYPE_MINOR ) {
-				return FILTER_NONE
+				return 99999
 			}
 			if ( dbspec == DBSPEC_VALUE_ORG ) {
 				return 200
 			}
 			if ( dbspec == DBSPEC_PARAM3_ORG ) {
@@ -119572,14 +121547,14 @@
 			reftype = FILTER_ITEM_SCROLL
 			return
 		}
 		if ( dbmode == DBMODE_REF_SPEC ) {
 			if ( dbspec == DBSPEC_TYPE ) {
-				return FILTER_ITEM_SCROLL
+				return 53000
 			}
 			if ( dbspec == DBSPEC_TYPE_MINOR ) {
-				return FILTER_NONE
+				return 99999
 			}
 			if ( dbspec == DBSPEC_VALUE_ORG ) {
 				return 12000
 			}
 			if ( dbspec == DBSPEC_PARAM3_ORG ) {
@@ -119642,14 +121617,14 @@
 			reftype = FILTER_ITEM_SCROLL
 			return
 		}
 		if ( dbmode == DBMODE_REF_SPEC ) {
 			if ( dbspec == DBSPEC_TYPE ) {
-				return FILTER_ITEM_SCROLL
+				return 53000
 			}
 			if ( dbspec == DBSPEC_TYPE_MINOR ) {
-				return FILTER_NONE
+				return 99999
 			}
 			if ( dbspec == DBSPEC_VALUE_ORG ) {
 				return 480
 			}
 			if ( dbspec == DBSPEC_PARAM3_ORG ) {
@@ -119713,14 +121688,14 @@
 			reftype = FILTER_ACCESSORY_RING
 			return
 		}
 		if ( dbmode == DBMODE_REF_SPEC ) {
 			if ( dbspec == DBSPEC_TYPE ) {
-				return FILTER_ACCESSORY_RING
+				return 32000
 			}
 			if ( dbspec == DBSPEC_TYPE_MINOR ) {
-				return FILTER_ACCESSORY_SMALL_RING
+				return 32001
 			}
 			if ( dbspec == DBSPEC_VALUE_ORG ) {
 				return 450
 			}
 			if ( dbspec == DBSPEC_PARAM3_ORG ) {
@@ -119785,14 +121760,14 @@
 			reftype = FILTER_BOOTS
 			return
 		}
 		if ( dbmode == DBMODE_REF_SPEC ) {
 			if ( dbspec == DBSPEC_TYPE ) {
-				return FILTER_BOOTS
+				return 18000
 			}
 			if ( dbspec == DBSPEC_TYPE_MINOR ) {
-				return FILTER_BOOTS_HEAVY
+				return 18001
 			}
 			if ( dbspec == DBSPEC_VALUE_ORG ) {
 				return 2200
 			}
 			if ( dbspec == DBSPEC_PARAM3_ORG ) {
@@ -119849,14 +121824,14 @@
 			reftype = FILTER_BOOTS
 			return
 		}
 		if ( dbmode == DBMODE_REF_SPEC ) {
 			if ( dbspec == DBSPEC_TYPE ) {
-				return FILTER_BOOTS
+				return 18000
 			}
 			if ( dbspec == DBSPEC_TYPE_MINOR ) {
-				return FILTER_BOOTS_HEAVY
+				return 18001
 			}
 			if ( dbspec == DBSPEC_VALUE_ORG ) {
 				return 480
 			}
 			if ( dbspec == DBSPEC_PARAM3_ORG ) {
@@ -119915,14 +121890,14 @@
 			reftype = FILTER_GLOVES
 			return
 		}
 		if ( dbmode == DBMODE_REF_SPEC ) {
 			if ( dbspec == DBSPEC_TYPE ) {
-				return FILTER_GLOVES
+				return 22000
 			}
 			if ( dbspec == DBSPEC_TYPE_MINOR ) {
-				return FILTER_GLOVES_HEAVY
+				return 22001
 			}
 			if ( dbspec == DBSPEC_VALUE_ORG ) {
 				return 400
 			}
 			if ( dbspec == DBSPEC_PARAM3_ORG ) {
@@ -119981,14 +121956,14 @@
 			reftype = FILTER_GLOVES
 			return
 		}
 		if ( dbmode == DBMODE_REF_SPEC ) {
 			if ( dbspec == DBSPEC_TYPE ) {
-				return FILTER_GLOVES
+				return 22000
 			}
 			if ( dbspec == DBSPEC_TYPE_MINOR ) {
-				return FILTER_GLOVES_LIGHT
+				return 22003
 			}
 			if ( dbspec == DBSPEC_VALUE_ORG ) {
 				return 1400
 			}
 			if ( dbspec == DBSPEC_PARAM3_ORG ) {
@@ -120045,14 +122020,14 @@
 			reftype = FILTER_ARMOR
 			return
 		}
 		if ( dbmode == DBMODE_REF_SPEC ) {
 			if ( dbspec == DBSPEC_TYPE ) {
-				return FILTER_ARMOR
+				return 16000
 			}
 			if ( dbspec == DBSPEC_TYPE_MINOR ) {
-				return FILTER_ARMOR_LIGHT
+				return 16003
 			}
 			if ( dbspec == DBSPEC_VALUE_ORG ) {
 				return 450
 			}
 			if ( dbspec == DBSPEC_PARAM3_ORG ) {
@@ -120097,11 +122072,11 @@
 			inv(INV_ITEM_ID, ci) = ITEM_ID_BREASTPLATE
 			inv(INV_ITEM_PIC, ci) = xy2pic(0, 12)
 			reftype = FILTER_ARMOR
 			reftypeminor = FILTER_ARMOR_HEAVY
 			inv(INV_ITEM_NUM, ci) = 1
-			fixeditemenc = ENCHANT_RES_FEAR, 100, 0
+			fixeditemenc = 26, 100, 0
 			inv(INV_ITEM_IDENTIFY_LEVEL, ci) = 0
 			return
 		}
 		if ( dbmode == DBMODE_REF ) {
 			ichargelevel = 0
@@ -120109,14 +122084,14 @@
 			reftype = FILTER_ARMOR
 			return
 		}
 		if ( dbmode == DBMODE_REF_SPEC ) {
 			if ( dbspec == DBSPEC_TYPE ) {
-				return FILTER_ARMOR
+				return 16000
 			}
 			if ( dbspec == DBSPEC_TYPE_MINOR ) {
-				return FILTER_ARMOR_HEAVY
+				return 16001
 			}
 			if ( dbspec == DBSPEC_VALUE_ORG ) {
 				return 600
 			}
 			if ( dbspec == DBSPEC_PARAM3_ORG ) {
@@ -120161,11 +122136,11 @@
 			inv(INV_ITEM_ID, ci) = ITEM_ID_FAIRY_HAT
 			inv(INV_ITEM_PIC, ci) = xy2pic(16, 14)
 			reftype = FILTER_HELM
 			reftypeminor = FILTER_HELM_LIGHT
 			inv(INV_ITEM_NUM, ci) = 1
-			fixeditemenc = ENCHANT_RES_MUTATION, 100, 0
+			fixeditemenc = 33, 100, 0
 			inv(INV_ITEM_IDENTIFY_LEVEL, ci) = 0
 			return
 		}
 		if ( dbmode == DBMODE_REF ) {
 			ichargelevel = 0
@@ -120173,14 +122148,14 @@
 			reftype = FILTER_HELM
 			return
 		}
 		if ( dbmode == DBMODE_REF_SPEC ) {
 			if ( dbspec == DBSPEC_TYPE ) {
-				return FILTER_HELM
+				return 12000
 			}
 			if ( dbspec == DBSPEC_TYPE_MINOR ) {
-				return FILTER_HELM_LIGHT
+				return 12002
 			}
 			if ( dbspec == DBSPEC_VALUE_ORG ) {
 				return 7200
 			}
 			if ( dbspec == DBSPEC_PARAM3_ORG ) {
@@ -120237,14 +122212,14 @@
 			reftype = FILTER_HELM
 			return
 		}
 		if ( dbmode == DBMODE_REF_SPEC ) {
 			if ( dbspec == DBSPEC_TYPE ) {
-				return FILTER_HELM
+				return 12000
 			}
 			if ( dbspec == DBSPEC_TYPE_MINOR ) {
-				return FILTER_HELM_LIGHT
+				return 12002
 			}
 			if ( dbspec == DBSPEC_VALUE_ORG ) {
 				return 1400
 			}
 			if ( dbspec == DBSPEC_PARAM3_ORG ) {
@@ -120304,14 +122279,14 @@
 			reftype = FILTER_WEAPON
 			return
 		}
 		if ( dbmode == DBMODE_REF_SPEC ) {
 			if ( dbspec == DBSPEC_TYPE ) {
-				return FILTER_WEAPON
+				return 10000
 			}
 			if ( dbspec == DBSPEC_TYPE_MINOR ) {
-				return FILTER_WEAPON_CLUB
+				return 10004
 			}
 			if ( dbspec == DBSPEC_VALUE_ORG ) {
 				return 500
 			}
 			if ( dbspec == DBSPEC_PARAM3_ORG ) {
@@ -120371,14 +122346,14 @@
 			reftype = FILTER_WEAPON
 			return
 		}
 		if ( dbmode == DBMODE_REF_SPEC ) {
 			if ( dbspec == DBSPEC_TYPE ) {
-				return FILTER_WEAPON
+				return 10000
 			}
 			if ( dbspec == DBSPEC_TYPE_MINOR ) {
-				return FILTER_WEAPON_SMALL_AXE
+				return 10009
 			}
 			if ( dbspec == DBSPEC_VALUE_ORG ) {
 				return 500
 			}
 			if ( dbspec == DBSPEC_PARAM3_ORG ) {
@@ -120439,14 +122414,14 @@
 			reftype = FILTER_WEAPON
 			return
 		}
 		if ( dbmode == DBMODE_REF_SPEC ) {
 			if ( dbspec == DBSPEC_TYPE ) {
-				return FILTER_WEAPON
+				return 10000
 			}
 			if ( dbspec == DBSPEC_TYPE_MINOR ) {
-				return FILTER_WEAPON_SHORTSWORD
+				return 10003
 			}
 			if ( dbspec == DBSPEC_VALUE_ORG ) {
 				return 500
 			}
 			if ( dbspec == DBSPEC_PARAM3_ORG ) {
@@ -120506,14 +122481,14 @@
 			reftype = FILTER_WEAPON
 			return
 		}
 		if ( dbmode == DBMODE_REF_SPEC ) {
 			if ( dbspec == DBSPEC_TYPE ) {
-				return FILTER_WEAPON
+				return 10000
 			}
 			if ( dbspec == DBSPEC_TYPE_MINOR ) {
-				return FILTER_WEAPON_LONGSWORD
+				return 10002
 			}
 			if ( dbspec == DBSPEC_VALUE_ORG ) {
 				return 500
 			}
 			if ( dbspec == DBSPEC_PARAM3_ORG ) {
@@ -120552,29 +122527,29 @@
 			inv(INV_ITEM_WEIGHT, ci) = 1
 		}
 		if ( dbmode == DBMODE_SET ) {
 			inv(INV_ITEM_ID, ci) = ITEM_ID_DUMMY
 			inv(INV_ITEM_PIC, ci) = xy2pic(0, 1)
-			reftype = 99999999
-			reftypeminor = 99999999
+			reftype = FILTER_NONE2
+			reftypeminor = FILTER_NONE2
 			inv(INV_ITEM_NUM, ci) = 1
 			fixeditemenc = 0
 			inv(INV_ITEM_IDENTIFY_LEVEL, ci) = 0
 			return
 		}
 		if ( dbmode == DBMODE_REF ) {
 			ichargelevel = 0
 			infilterref = ""
-			reftype = 99999999
+			reftype = FILTER_NONE2
 			return
 		}
 		if ( dbmode == DBMODE_REF_SPEC ) {
 			if ( dbspec == DBSPEC_TYPE ) {
-				return FILTER_NONE2
+				return 99999999
 			}
 			if ( dbspec == DBSPEC_TYPE_MINOR ) {
-				return FILTER_NONE2
+				return 99999999
 			}
 			if ( dbspec == DBSPEC_VALUE_ORG ) {
 				return 1
 			}
 			if ( dbspec == DBSPEC_PARAM3_ORG ) {
@@ -120606,40 +122581,49 @@
 			return
 		}
 		return 0
 	}
 	return -999
-
 *db_setFilterItem
-	filter_item(ITEM_ID_DYING_CICADA) = ""
-	rffilter_item(ITEM_ID_DYING_CICADA) = ""
-	filter_item(ITEM_ID_M01_GARNET) = ""
-	rffilter_item(ITEM_ID_M01_GARNET) = "/ore/"
-	filter_item(ITEM_ID_M02_AMETHYST) = ""
-	rffilter_item(ITEM_ID_M02_AMETHYST) = "/ore/"
-	filter_item(ITEM_ID_M03_AQUAMARINE) = ""
-	rffilter_item(ITEM_ID_M03_AQUAMARINE) = "/ore/"
-	filter_item(ITEM_ID_M04_DIAMOND) = ""
-	rffilter_item(ITEM_ID_M04_DIAMOND) = "/ore/"
-	filter_item(ITEM_ID_M05_EMERALD) = ""
-	rffilter_item(ITEM_ID_M05_EMERALD) = "/ore/"
-	filter_item(ITEM_ID_M06_ALEXANDRITE) = ""
-	rffilter_item(ITEM_ID_M06_ALEXANDRITE) = "/ore/"
-	filter_item(ITEM_ID_M07_RUBY) = ""
-	rffilter_item(ITEM_ID_M07_RUBY) = "/ore/"
-	filter_item(ITEM_ID_M08_SARDONYX) = ""
-	rffilter_item(ITEM_ID_M08_SARDONYX) = "/ore/"
-	filter_item(ITEM_ID_M09_SAPPHIRE) = ""
-	rffilter_item(ITEM_ID_M09_SAPPHIRE) = "/ore/"
-	filter_item(ITEM_ID_M10_OPAL) = ""
-	rffilter_item(ITEM_ID_M10_OPAL) = "/ore/"
-	filter_item(ITEM_ID_M11_TOPAZ) = ""
-	rffilter_item(ITEM_ID_M11_TOPAZ) = "/ore/"
-	filter_item(ITEM_ID_M12_LAPIS_LAZULI) = ""
-	rffilter_item(ITEM_ID_M12_LAPIS_LAZULI) = "/ore/"
-	filter_item(ITEM_ID_GOLDEN_MEAD) = ""
-	rffilter_item(ITEM_ID_GOLDEN_MEAD) = "/ale/"
+	filter_item(ITEM_ID_SPELLBOOK_OF_THUNDER_VORTEX) = ""
+	rffilter_item(ITEM_ID_SPELLBOOK_OF_THUNDER_VORTEX) = ""
+	filter_item(ITEM_ID_SPELLBOOK_OF_ECLIPSE_JAIL) = ""
+	rffilter_item(ITEM_ID_SPELLBOOK_OF_ECLIPSE_JAIL) = ""
+	filter_item(ITEM_ID_SPELLBOOK_OF_NETHER_ROAR) = ""
+	rffilter_item(ITEM_ID_SPELLBOOK_OF_NETHER_ROAR) = ""
+	filter_item(ITEM_ID_SPELLBOOK_OF_POISON_STORM) = ""
+	rffilter_item(ITEM_ID_SPELLBOOK_OF_POISON_STORM) = ""
+	filter_item(ITEM_ID_SPELLBOOK_OF_BUBBLE_STORM) = ""
+	rffilter_item(ITEM_ID_SPELLBOOK_OF_BUBBLE_STORM) = ""
+	filter_item(ITEM_ID_SPELLBOOK_OF_ILLUSION_ROAR) = ""
+	rffilter_item(ITEM_ID_SPELLBOOK_OF_ILLUSION_ROAR) = ""
+	filter_item(ITEM_ID_SPELLBOOK_OF_ANGUISH_JAIL) = ""
+	rffilter_item(ITEM_ID_SPELLBOOK_OF_ANGUISH_JAIL) = ""
+	filter_item(ITEM_ID_SPELLBOOK_OF_NETHER_BOLT) = ""
+	rffilter_item(ITEM_ID_SPELLBOOK_OF_NETHER_BOLT) = ""
+	filter_item(ITEM_ID_SPELLBOOK_OF_POISON_BOLT) = ""
+	rffilter_item(ITEM_ID_SPELLBOOK_OF_POISON_BOLT) = ""
+	filter_item(ITEM_ID_SPELLBOOK_OF_SOUND_BOLT) = ""
+	rffilter_item(ITEM_ID_SPELLBOOK_OF_SOUND_BOLT) = ""
+	filter_item(ITEM_ID_SPELLBOOK_OF_CHAOS_BOLT) = ""
+	rffilter_item(ITEM_ID_SPELLBOOK_OF_CHAOS_BOLT) = ""
+	filter_item(ITEM_ID_SPELLBOOK_OF_NERVE_BOLT) = ""
+	rffilter_item(ITEM_ID_SPELLBOOK_OF_NERVE_BOLT) = ""
+	filter_item(ITEM_ID_SPELLBOOK_OF_FIRE_CLAW) = ""
+	rffilter_item(ITEM_ID_SPELLBOOK_OF_FIRE_CLAW) = ""
+	filter_item(ITEM_ID_SPELLBOOK_OF_COLD_BLADE) = ""
+	rffilter_item(ITEM_ID_SPELLBOOK_OF_COLD_BLADE) = ""
+	filter_item(ITEM_ID_SPELLBOOK_OF_LIGHTNING_SPEAR) = ""
+	rffilter_item(ITEM_ID_SPELLBOOK_OF_LIGHTNING_SPEAR) = ""
+	filter_item(ITEM_ID_SPELLBOOK_OF_MIND_THORN) = ""
+	rffilter_item(ITEM_ID_SPELLBOOK_OF_MIND_THORN) = ""
+	filter_item(ITEM_ID_SPELLBOOK_OF_POISON_MUCUS) = ""
+	rffilter_item(ITEM_ID_SPELLBOOK_OF_POISON_MUCUS) = ""
+	filter_item(ITEM_ID_SPELLBOOK_OF_SOUND_CANNONBALL) = ""
+	rffilter_item(ITEM_ID_SPELLBOOK_OF_SOUND_CANNONBALL) = ""
+	filter_item(ITEM_ID_SPELLBOOK_OF_HYDRO_FANG) = ""
+	rffilter_item(ITEM_ID_SPELLBOOK_OF_HYDRO_FANG) = ""
 	filter_item(ITEM_ID_DYING_CICADA) = ""
 	rffilter_item(ITEM_ID_DYING_CICADA) = ""
 	filter_item(ITEM_ID_M01_GARNET) = ""
 	rffilter_item(ITEM_ID_M01_GARNET) = "/ore/"
 	filter_item(ITEM_ID_M02_AMETHYST) = ""
@@ -123095,12 +125079,296 @@
 	filter_item(ITEM_ID_LONG_SWORD) = ""
 	rffilter_item(ITEM_ID_LONG_SWORD) = "/sharp/"
 	filter_item(ITEM_ID_DUMMY) = ""
 	rffilter_item(ITEM_ID_DUMMY) = ""
 	return
-
 *db_setItem
+	ilight(ITEM_ID_SPELLBOOK_OF_THUNDER_VORTEX) = LIGHT_TYPE_NONE
+	ialphanameref(ITEM_ID_SPELLBOOK_OF_THUNDER_VORTEX) = ""
+	iorgweight(ITEM_ID_SPELLBOOK_OF_THUNDER_VORTEX) = 380
+	if ( jp ) {
+		ioriginalnameref(ITEM_ID_SPELLBOOK_OF_THUNDER_VORTEX) = "雷霆の渦の魔法書"
+	}
+	else {
+		ioriginalnameref(ITEM_ID_SPELLBOOK_OF_THUNDER_VORTEX) = "thunder vortex"
+		ioriginalnameref2(ITEM_ID_SPELLBOOK_OF_THUNDER_VORTEX) = "spellbook"
+	}
+	ipicref(ITEM_ID_SPELLBOOK_OF_THUNDER_VORTEX) = xy2pic(0, 13)
+	p = (1247 + gdata(GDATA_RAND_SEED_A)) \ 6
+	iknownnameref(ITEM_ID_SPELLBOOK_OF_THUNDER_VORTEX) = _namespellbook(p) + strblank + strspellbook
+	icolref(ITEM_ID_SPELLBOOK_OF_THUNDER_VORTEX) = _randcolor(p)
+	irandomname(ITEM_ID_SPELLBOOK_OF_THUNDER_VORTEX) = 1
+	ilight(ITEM_ID_SPELLBOOK_OF_ECLIPSE_JAIL) = LIGHT_TYPE_NONE
+	ialphanameref(ITEM_ID_SPELLBOOK_OF_ECLIPSE_JAIL) = ""
+	iorgweight(ITEM_ID_SPELLBOOK_OF_ECLIPSE_JAIL) = 380
+	if ( jp ) {
+		ioriginalnameref(ITEM_ID_SPELLBOOK_OF_ECLIPSE_JAIL) = "月蝕の檻の魔法書"
+	}
+	else {
+		ioriginalnameref(ITEM_ID_SPELLBOOK_OF_ECLIPSE_JAIL) = "eclipse jail"
+		ioriginalnameref2(ITEM_ID_SPELLBOOK_OF_ECLIPSE_JAIL) = "spellbook"
+	}
+	ipicref(ITEM_ID_SPELLBOOK_OF_ECLIPSE_JAIL) = xy2pic(0, 13)
+	p = (1246 + gdata(GDATA_RAND_SEED_A)) \ 6
+	iknownnameref(ITEM_ID_SPELLBOOK_OF_ECLIPSE_JAIL) = _namespellbook(p) + strblank + strspellbook
+	icolref(ITEM_ID_SPELLBOOK_OF_ECLIPSE_JAIL) = _randcolor(p)
+	irandomname(ITEM_ID_SPELLBOOK_OF_ECLIPSE_JAIL) = 1
+	ilight(ITEM_ID_SPELLBOOK_OF_NETHER_ROAR) = LIGHT_TYPE_NONE
+	ialphanameref(ITEM_ID_SPELLBOOK_OF_NETHER_ROAR) = ""
+	iorgweight(ITEM_ID_SPELLBOOK_OF_NETHER_ROAR) = 380
+	if ( jp ) {
+		ioriginalnameref(ITEM_ID_SPELLBOOK_OF_NETHER_ROAR) = "冥王の咆哮の魔法書"
+	}
+	else {
+		ioriginalnameref(ITEM_ID_SPELLBOOK_OF_NETHER_ROAR) = "nether roar"
+		ioriginalnameref2(ITEM_ID_SPELLBOOK_OF_NETHER_ROAR) = "spellbook"
+	}
+	ipicref(ITEM_ID_SPELLBOOK_OF_NETHER_ROAR) = xy2pic(0, 13)
+	p = (1245 + gdata(GDATA_RAND_SEED_A)) \ 6
+	iknownnameref(ITEM_ID_SPELLBOOK_OF_NETHER_ROAR) = _namespellbook(p) + strblank + strspellbook
+	icolref(ITEM_ID_SPELLBOOK_OF_NETHER_ROAR) = _randcolor(p)
+	irandomname(ITEM_ID_SPELLBOOK_OF_NETHER_ROAR) = 1
+	ilight(ITEM_ID_SPELLBOOK_OF_POISON_STORM) = LIGHT_TYPE_NONE
+	ialphanameref(ITEM_ID_SPELLBOOK_OF_POISON_STORM) = ""
+	iorgweight(ITEM_ID_SPELLBOOK_OF_POISON_STORM) = 380
+	if ( jp ) {
+		ioriginalnameref(ITEM_ID_SPELLBOOK_OF_POISON_STORM) = "猛毒の嵐の魔法書"
+	}
+	else {
+		ioriginalnameref(ITEM_ID_SPELLBOOK_OF_POISON_STORM) = "poison storm"
+		ioriginalnameref2(ITEM_ID_SPELLBOOK_OF_POISON_STORM) = "spellbook"
+	}
+	ipicref(ITEM_ID_SPELLBOOK_OF_POISON_STORM) = xy2pic(0, 13)
+	p = (1244 + gdata(GDATA_RAND_SEED_A)) \ 6
+	iknownnameref(ITEM_ID_SPELLBOOK_OF_POISON_STORM) = _namespellbook(p) + strblank + strspellbook
+	icolref(ITEM_ID_SPELLBOOK_OF_POISON_STORM) = _randcolor(p)
+	irandomname(ITEM_ID_SPELLBOOK_OF_POISON_STORM) = 1
+	ilight(ITEM_ID_SPELLBOOK_OF_BUBBLE_STORM) = LIGHT_TYPE_NONE
+	ialphanameref(ITEM_ID_SPELLBOOK_OF_BUBBLE_STORM) = ""
+	iorgweight(ITEM_ID_SPELLBOOK_OF_BUBBLE_STORM) = 380
+	if ( jp ) {
+		ioriginalnameref(ITEM_ID_SPELLBOOK_OF_BUBBLE_STORM) = "泡沫の嵐の魔法書"
+	}
+	else {
+		ioriginalnameref(ITEM_ID_SPELLBOOK_OF_BUBBLE_STORM) = "bubble storm"
+		ioriginalnameref2(ITEM_ID_SPELLBOOK_OF_BUBBLE_STORM) = "spellbook"
+	}
+	ipicref(ITEM_ID_SPELLBOOK_OF_BUBBLE_STORM) = xy2pic(0, 13)
+	p = (1243 + gdata(GDATA_RAND_SEED_A)) \ 6
+	iknownnameref(ITEM_ID_SPELLBOOK_OF_BUBBLE_STORM) = _namespellbook(p) + strblank + strspellbook
+	icolref(ITEM_ID_SPELLBOOK_OF_BUBBLE_STORM) = _randcolor(p)
+	irandomname(ITEM_ID_SPELLBOOK_OF_BUBBLE_STORM) = 1
+	ilight(ITEM_ID_SPELLBOOK_OF_ILLUSION_ROAR) = LIGHT_TYPE_NONE
+	ialphanameref(ITEM_ID_SPELLBOOK_OF_ILLUSION_ROAR) = ""
+	iorgweight(ITEM_ID_SPELLBOOK_OF_ILLUSION_ROAR) = 380
+	if ( jp ) {
+		ioriginalnameref(ITEM_ID_SPELLBOOK_OF_ILLUSION_ROAR) = "夢幻の咆哮の魔法書"
+	}
+	else {
+		ioriginalnameref(ITEM_ID_SPELLBOOK_OF_ILLUSION_ROAR) = "illusion roar"
+		ioriginalnameref2(ITEM_ID_SPELLBOOK_OF_ILLUSION_ROAR) = "spellbook"
+	}
+	ipicref(ITEM_ID_SPELLBOOK_OF_ILLUSION_ROAR) = xy2pic(0, 13)
+	p = (1242 + gdata(GDATA_RAND_SEED_A)) \ 6
+	iknownnameref(ITEM_ID_SPELLBOOK_OF_ILLUSION_ROAR) = _namespellbook(p) + strblank + strspellbook
+	icolref(ITEM_ID_SPELLBOOK_OF_ILLUSION_ROAR) = _randcolor(p)
+	irandomname(ITEM_ID_SPELLBOOK_OF_ILLUSION_ROAR) = 1
+	ilight(ITEM_ID_SPELLBOOK_OF_ANGUISH_JAIL) = LIGHT_TYPE_NONE
+	ialphanameref(ITEM_ID_SPELLBOOK_OF_ANGUISH_JAIL) = ""
+	iorgweight(ITEM_ID_SPELLBOOK_OF_ANGUISH_JAIL) = 380
+	if ( jp ) {
+		ioriginalnameref(ITEM_ID_SPELLBOOK_OF_ANGUISH_JAIL) = "苦悶の檻の魔法書"
+	}
+	else {
+		ioriginalnameref(ITEM_ID_SPELLBOOK_OF_ANGUISH_JAIL) = "anguish jail"
+		ioriginalnameref2(ITEM_ID_SPELLBOOK_OF_ANGUISH_JAIL) = "spellbook"
+	}
+	ipicref(ITEM_ID_SPELLBOOK_OF_ANGUISH_JAIL) = xy2pic(0, 13)
+	p = (1241 + gdata(GDATA_RAND_SEED_A)) \ 6
+	iknownnameref(ITEM_ID_SPELLBOOK_OF_ANGUISH_JAIL) = _namespellbook(p) + strblank + strspellbook
+	icolref(ITEM_ID_SPELLBOOK_OF_ANGUISH_JAIL) = _randcolor(p)
+	irandomname(ITEM_ID_SPELLBOOK_OF_ANGUISH_JAIL) = 1
+	ilight(ITEM_ID_SPELLBOOK_OF_NETHER_BOLT) = LIGHT_TYPE_NONE
+	ialphanameref(ITEM_ID_SPELLBOOK_OF_NETHER_BOLT) = ""
+	iorgweight(ITEM_ID_SPELLBOOK_OF_NETHER_BOLT) = 380
+	if ( jp ) {
+		ioriginalnameref(ITEM_ID_SPELLBOOK_OF_NETHER_BOLT) = "ネザーボルトの魔法書"
+	}
+	else {
+		ioriginalnameref(ITEM_ID_SPELLBOOK_OF_NETHER_BOLT) = "nether bolt"
+		ioriginalnameref2(ITEM_ID_SPELLBOOK_OF_NETHER_BOLT) = "spellbook"
+	}
+	ipicref(ITEM_ID_SPELLBOOK_OF_NETHER_BOLT) = xy2pic(0, 13)
+	p = (1240 + gdata(GDATA_RAND_SEED_A)) \ 6
+	iknownnameref(ITEM_ID_SPELLBOOK_OF_NETHER_BOLT) = _namespellbook(p) + strblank + strspellbook
+	icolref(ITEM_ID_SPELLBOOK_OF_NETHER_BOLT) = _randcolor(p)
+	irandomname(ITEM_ID_SPELLBOOK_OF_NETHER_BOLT) = 1
+	ilight(ITEM_ID_SPELLBOOK_OF_POISON_BOLT) = LIGHT_TYPE_NONE
+	ialphanameref(ITEM_ID_SPELLBOOK_OF_POISON_BOLT) = ""
+	iorgweight(ITEM_ID_SPELLBOOK_OF_POISON_BOLT) = 380
+	if ( jp ) {
+		ioriginalnameref(ITEM_ID_SPELLBOOK_OF_POISON_BOLT) = "ポイズンボルトの魔法書"
+	}
+	else {
+		ioriginalnameref(ITEM_ID_SPELLBOOK_OF_POISON_BOLT) = "poison bolt"
+		ioriginalnameref2(ITEM_ID_SPELLBOOK_OF_POISON_BOLT) = "spellbook"
+	}
+	ipicref(ITEM_ID_SPELLBOOK_OF_POISON_BOLT) = xy2pic(0, 13)
+	p = (1239 + gdata(GDATA_RAND_SEED_A)) \ 6
+	iknownnameref(ITEM_ID_SPELLBOOK_OF_POISON_BOLT) = _namespellbook(p) + strblank + strspellbook
+	icolref(ITEM_ID_SPELLBOOK_OF_POISON_BOLT) = _randcolor(p)
+	irandomname(ITEM_ID_SPELLBOOK_OF_POISON_BOLT) = 1
+	ilight(ITEM_ID_SPELLBOOK_OF_SOUND_BOLT) = LIGHT_TYPE_NONE
+	ialphanameref(ITEM_ID_SPELLBOOK_OF_SOUND_BOLT) = ""
+	iorgweight(ITEM_ID_SPELLBOOK_OF_SOUND_BOLT) = 380
+	if ( jp ) {
+		ioriginalnameref(ITEM_ID_SPELLBOOK_OF_SOUND_BOLT) = "サウンドボルトの魔法書"
+	}
+	else {
+		ioriginalnameref(ITEM_ID_SPELLBOOK_OF_SOUND_BOLT) = "sound bolt"
+		ioriginalnameref2(ITEM_ID_SPELLBOOK_OF_SOUND_BOLT) = "spellbook"
+	}
+	ipicref(ITEM_ID_SPELLBOOK_OF_SOUND_BOLT) = xy2pic(0, 13)
+	p = (1238 + gdata(GDATA_RAND_SEED_A)) \ 6
+	iknownnameref(ITEM_ID_SPELLBOOK_OF_SOUND_BOLT) = _namespellbook(p) + strblank + strspellbook
+	icolref(ITEM_ID_SPELLBOOK_OF_SOUND_BOLT) = _randcolor(p)
+	irandomname(ITEM_ID_SPELLBOOK_OF_SOUND_BOLT) = 1
+	ilight(ITEM_ID_SPELLBOOK_OF_CHAOS_BOLT) = LIGHT_TYPE_NONE
+	ialphanameref(ITEM_ID_SPELLBOOK_OF_CHAOS_BOLT) = ""
+	iorgweight(ITEM_ID_SPELLBOOK_OF_CHAOS_BOLT) = 380
+	if ( jp ) {
+		ioriginalnameref(ITEM_ID_SPELLBOOK_OF_CHAOS_BOLT) = "カオスボルトの魔法書"
+	}
+	else {
+		ioriginalnameref(ITEM_ID_SPELLBOOK_OF_CHAOS_BOLT) = "chaos bolt"
+		ioriginalnameref2(ITEM_ID_SPELLBOOK_OF_CHAOS_BOLT) = "spellbook"
+	}
+	ipicref(ITEM_ID_SPELLBOOK_OF_CHAOS_BOLT) = xy2pic(0, 13)
+	p = (1237 + gdata(GDATA_RAND_SEED_A)) \ 6
+	iknownnameref(ITEM_ID_SPELLBOOK_OF_CHAOS_BOLT) = _namespellbook(p) + strblank + strspellbook
+	icolref(ITEM_ID_SPELLBOOK_OF_CHAOS_BOLT) = _randcolor(p)
+	irandomname(ITEM_ID_SPELLBOOK_OF_CHAOS_BOLT) = 1
+	ilight(ITEM_ID_SPELLBOOK_OF_NERVE_BOLT) = LIGHT_TYPE_NONE
+	ialphanameref(ITEM_ID_SPELLBOOK_OF_NERVE_BOLT) = ""
+	iorgweight(ITEM_ID_SPELLBOOK_OF_NERVE_BOLT) = 380
+	if ( jp ) {
+		ioriginalnameref(ITEM_ID_SPELLBOOK_OF_NERVE_BOLT) = "ナーブボルトの魔法書"
+	}
+	else {
+		ioriginalnameref(ITEM_ID_SPELLBOOK_OF_NERVE_BOLT) = "nerve bolt"
+		ioriginalnameref2(ITEM_ID_SPELLBOOK_OF_NERVE_BOLT) = "spellbook"
+	}
+	ipicref(ITEM_ID_SPELLBOOK_OF_NERVE_BOLT) = xy2pic(0, 13)
+	p = (1236 + gdata(GDATA_RAND_SEED_A)) \ 6
+	iknownnameref(ITEM_ID_SPELLBOOK_OF_NERVE_BOLT) = _namespellbook(p) + strblank + strspellbook
+	icolref(ITEM_ID_SPELLBOOK_OF_NERVE_BOLT) = _randcolor(p)
+	irandomname(ITEM_ID_SPELLBOOK_OF_NERVE_BOLT) = 1
+	ilight(ITEM_ID_SPELLBOOK_OF_FIRE_CLAW) = LIGHT_TYPE_NONE
+	ialphanameref(ITEM_ID_SPELLBOOK_OF_FIRE_CLAW) = ""
+	iorgweight(ITEM_ID_SPELLBOOK_OF_FIRE_CLAW) = 380
+	if ( jp ) {
+		ioriginalnameref(ITEM_ID_SPELLBOOK_OF_FIRE_CLAW) = "火炎の爪の魔法書"
+	}
+	else {
+		ioriginalnameref(ITEM_ID_SPELLBOOK_OF_FIRE_CLAW) = "fire claw"
+		ioriginalnameref2(ITEM_ID_SPELLBOOK_OF_FIRE_CLAW) = "spellbook"
+	}
+	ipicref(ITEM_ID_SPELLBOOK_OF_FIRE_CLAW) = xy2pic(0, 13)
+	p = (1235 + gdata(GDATA_RAND_SEED_A)) \ 6
+	iknownnameref(ITEM_ID_SPELLBOOK_OF_FIRE_CLAW) = _namespellbook(p) + strblank + strspellbook
+	icolref(ITEM_ID_SPELLBOOK_OF_FIRE_CLAW) = _randcolor(p)
+	irandomname(ITEM_ID_SPELLBOOK_OF_FIRE_CLAW) = 1
+	ilight(ITEM_ID_SPELLBOOK_OF_COLD_BLADE) = LIGHT_TYPE_NONE
+	ialphanameref(ITEM_ID_SPELLBOOK_OF_COLD_BLADE) = ""
+	iorgweight(ITEM_ID_SPELLBOOK_OF_COLD_BLADE) = 380
+	if ( jp ) {
+		ioriginalnameref(ITEM_ID_SPELLBOOK_OF_COLD_BLADE) = "冷気の刃の魔法書"
+	}
+	else {
+		ioriginalnameref(ITEM_ID_SPELLBOOK_OF_COLD_BLADE) = "cold blade"
+		ioriginalnameref2(ITEM_ID_SPELLBOOK_OF_COLD_BLADE) = "spellbook"
+	}
+	ipicref(ITEM_ID_SPELLBOOK_OF_COLD_BLADE) = xy2pic(0, 13)
+	p = (1234 + gdata(GDATA_RAND_SEED_A)) \ 6
+	iknownnameref(ITEM_ID_SPELLBOOK_OF_COLD_BLADE) = _namespellbook(p) + strblank + strspellbook
+	icolref(ITEM_ID_SPELLBOOK_OF_COLD_BLADE) = _randcolor(p)
+	irandomname(ITEM_ID_SPELLBOOK_OF_COLD_BLADE) = 1
+	ilight(ITEM_ID_SPELLBOOK_OF_LIGHTNING_SPEAR) = LIGHT_TYPE_NONE
+	ialphanameref(ITEM_ID_SPELLBOOK_OF_LIGHTNING_SPEAR) = ""
+	iorgweight(ITEM_ID_SPELLBOOK_OF_LIGHTNING_SPEAR) = 380
+	if ( jp ) {
+		ioriginalnameref(ITEM_ID_SPELLBOOK_OF_LIGHTNING_SPEAR) = "電撃の槍の魔法書"
+	}
+	else {
+		ioriginalnameref(ITEM_ID_SPELLBOOK_OF_LIGHTNING_SPEAR) = "lightning spear"
+		ioriginalnameref2(ITEM_ID_SPELLBOOK_OF_LIGHTNING_SPEAR) = "spellbook"
+	}
+	ipicref(ITEM_ID_SPELLBOOK_OF_LIGHTNING_SPEAR) = xy2pic(0, 13)
+	p = (1233 + gdata(GDATA_RAND_SEED_A)) \ 6
+	iknownnameref(ITEM_ID_SPELLBOOK_OF_LIGHTNING_SPEAR) = _namespellbook(p) + strblank + strspellbook
+	icolref(ITEM_ID_SPELLBOOK_OF_LIGHTNING_SPEAR) = _randcolor(p)
+	irandomname(ITEM_ID_SPELLBOOK_OF_LIGHTNING_SPEAR) = 1
+	ilight(ITEM_ID_SPELLBOOK_OF_MIND_THORN) = LIGHT_TYPE_NONE
+	ialphanameref(ITEM_ID_SPELLBOOK_OF_MIND_THORN) = ""
+	iorgweight(ITEM_ID_SPELLBOOK_OF_MIND_THORN) = 380
+	if ( jp ) {
+		ioriginalnameref(ITEM_ID_SPELLBOOK_OF_MIND_THORN) = "幻惑の棘の魔法書"
+	}
+	else {
+		ioriginalnameref(ITEM_ID_SPELLBOOK_OF_MIND_THORN) = "mind thorn"
+		ioriginalnameref2(ITEM_ID_SPELLBOOK_OF_MIND_THORN) = "spellbook"
+	}
+	ipicref(ITEM_ID_SPELLBOOK_OF_MIND_THORN) = xy2pic(0, 13)
+	p = (1232 + gdata(GDATA_RAND_SEED_A)) \ 6
+	iknownnameref(ITEM_ID_SPELLBOOK_OF_MIND_THORN) = _namespellbook(p) + strblank + strspellbook
+	icolref(ITEM_ID_SPELLBOOK_OF_MIND_THORN) = _randcolor(p)
+	irandomname(ITEM_ID_SPELLBOOK_OF_MIND_THORN) = 1
+	ilight(ITEM_ID_SPELLBOOK_OF_POISON_MUCUS) = LIGHT_TYPE_NONE
+	ialphanameref(ITEM_ID_SPELLBOOK_OF_POISON_MUCUS) = ""
+	iorgweight(ITEM_ID_SPELLBOOK_OF_POISON_MUCUS) = 380
+	if ( jp ) {
+		ioriginalnameref(ITEM_ID_SPELLBOOK_OF_POISON_MUCUS) = "毒の粘液の魔法書"
+	}
+	else {
+		ioriginalnameref(ITEM_ID_SPELLBOOK_OF_POISON_MUCUS) = "poison mucus"
+		ioriginalnameref2(ITEM_ID_SPELLBOOK_OF_POISON_MUCUS) = "spellbook"
+	}
+	ipicref(ITEM_ID_SPELLBOOK_OF_POISON_MUCUS) = xy2pic(0, 13)
+	p = (1231 + gdata(GDATA_RAND_SEED_A)) \ 6
+	iknownnameref(ITEM_ID_SPELLBOOK_OF_POISON_MUCUS) = _namespellbook(p) + strblank + strspellbook
+	icolref(ITEM_ID_SPELLBOOK_OF_POISON_MUCUS) = _randcolor(p)
+	irandomname(ITEM_ID_SPELLBOOK_OF_POISON_MUCUS) = 1
+	ilight(ITEM_ID_SPELLBOOK_OF_SOUND_CANNONBALL) = LIGHT_TYPE_NONE
+	ialphanameref(ITEM_ID_SPELLBOOK_OF_SOUND_CANNONBALL) = ""
+	iorgweight(ITEM_ID_SPELLBOOK_OF_SOUND_CANNONBALL) = 380
+	if ( jp ) {
+		ioriginalnameref(ITEM_ID_SPELLBOOK_OF_SOUND_CANNONBALL) = "音の砲弾の魔法書"
+	}
+	else {
+		ioriginalnameref(ITEM_ID_SPELLBOOK_OF_SOUND_CANNONBALL) = "sound cannonball"
+		ioriginalnameref2(ITEM_ID_SPELLBOOK_OF_SOUND_CANNONBALL) = "spellbook"
+	}
+	ipicref(ITEM_ID_SPELLBOOK_OF_SOUND_CANNONBALL) = xy2pic(0, 13)
+	p = (1230 + gdata(GDATA_RAND_SEED_A)) \ 6
+	iknownnameref(ITEM_ID_SPELLBOOK_OF_SOUND_CANNONBALL) = _namespellbook(p) + strblank + strspellbook
+	icolref(ITEM_ID_SPELLBOOK_OF_SOUND_CANNONBALL) = _randcolor(p)
+	irandomname(ITEM_ID_SPELLBOOK_OF_SOUND_CANNONBALL) = 1
+	ilight(ITEM_ID_SPELLBOOK_OF_HYDRO_FANG) = LIGHT_TYPE_NONE
+	ialphanameref(ITEM_ID_SPELLBOOK_OF_HYDRO_FANG) = ""
+	iorgweight(ITEM_ID_SPELLBOOK_OF_HYDRO_FANG) = 380
+	if ( jp ) {
+		ioriginalnameref(ITEM_ID_SPELLBOOK_OF_HYDRO_FANG) = "水の牙の魔法書"
+	}
+	else {
+		ioriginalnameref(ITEM_ID_SPELLBOOK_OF_HYDRO_FANG) = "hydro fang"
+		ioriginalnameref2(ITEM_ID_SPELLBOOK_OF_HYDRO_FANG) = "spellbook"
+	}
+	ipicref(ITEM_ID_SPELLBOOK_OF_HYDRO_FANG) = xy2pic(0, 13)
+	p = (1229 + gdata(GDATA_RAND_SEED_A)) \ 6
+	iknownnameref(ITEM_ID_SPELLBOOK_OF_HYDRO_FANG) = _namespellbook(p) + strblank + strspellbook
+	icolref(ITEM_ID_SPELLBOOK_OF_HYDRO_FANG) = _randcolor(p)
+	irandomname(ITEM_ID_SPELLBOOK_OF_HYDRO_FANG) = 1
 	ilight(ITEM_ID_DYING_CICADA) = LIGHT_TYPE_NONE
 	ialphanameref(ITEM_ID_DYING_CICADA) = ""
 	iorgweight(ITEM_ID_DYING_CICADA) = 10
 	if ( jp ) {
 		ioriginalnameref(ITEM_ID_DYING_CICADA) = "喪蝉"
@@ -123798,11 +126066,11 @@
 	iorgweight(ITEM_ID_YACA_POINT_CARD) = 10
 	if ( jp ) {
 		ioriginalnameref(ITEM_ID_YACA_POINT_CARD) = "ヤカポイントカード"
 	}
 	else {
-		ioriginalnameref(ITEM_ID_YACA_POINT_CARD) = "YacaPoint card"
+		ioriginalnameref(ITEM_ID_YACA_POINT_CARD) = "yaca point card"
 		ioriginalnameref2(ITEM_ID_YACA_POINT_CARD) = ""
 	}
 	ipicref(ITEM_ID_YACA_POINT_CARD) = xy2pic(16, 34)
 	iknownnameref(ITEM_ID_YACA_POINT_CARD) = ioriginalnameref(ITEM_ID_YACA_POINT_CARD)
 	icolref(ITEM_ID_YACA_POINT_CARD) = COLOR_DEFAULT
@@ -123979,11 +126247,11 @@
 	}
 	else {
 		ioriginalnameref(ITEM_ID_GO_RENGE) = "<Go-Renge>"
 		ioriginalnameref2(ITEM_ID_GO_RENGE) = ""
 	}
-	ipicref(ITEM_ID_GO_RENGE) = 1180
+	ipicref(ITEM_ID_GO_RENGE) = xy2pic(25, 35)
 	if ( jp ) {
 		iknownnameref(ITEM_ID_GO_RENGE) = "吹雪の苦無"
 	}
 	else {
 		iknownnameref(ITEM_ID_GO_RENGE) = "five sets of kunai"
@@ -123997,11 +126265,11 @@
 	}
 	else {
 		ioriginalnameref(ITEM_ID_EPECLAIR) = "<Epeclair>"
 		ioriginalnameref2(ITEM_ID_EPECLAIR) = ""
 	}
-	ipicref(ITEM_ID_EPECLAIR) = 1153
+	ipicref(ITEM_ID_EPECLAIR) = xy2pic(31, 34)
 	if ( jp ) {
 		iknownnameref(ITEM_ID_EPECLAIR) = "稲妻の細剣"
 	}
 	else {
 		iknownnameref(ITEM_ID_EPECLAIR) = "lightning fleure"
@@ -124015,11 +126283,11 @@
 	}
 	else {
 		ioriginalnameref(ITEM_ID_GOUTEN) = "<Gouten>"
 		ioriginalnameref2(ITEM_ID_GOUTEN) = ""
 	}
-	ipicref(ITEM_ID_GOUTEN) = 1152
+	ipicref(ITEM_ID_GOUTEN) = xy2pic(30, 34)
 	if ( jp ) {
 		iknownnameref(ITEM_ID_GOUTEN) = "空飛ぶ螺旋機"
 	}
 	else {
 		iknownnameref(ITEM_ID_GOUTEN) = "flying drill"
@@ -124033,11 +126301,11 @@
 	}
 	else {
 		ioriginalnameref(ITEM_ID_DGT_101) = "<DGT-101>"
 		ioriginalnameref2(ITEM_ID_DGT_101) = ""
 	}
-	ipicref(ITEM_ID_DGT_101) = 1181
+	ipicref(ITEM_ID_DGT_101) = xy2pic(26, 35)
 	if ( jp ) {
 		iknownnameref(ITEM_ID_DGT_101) = "長大な投斧"
 	}
 	else {
 		iknownnameref(ITEM_ID_DGT_101) = "double tomahawk"
@@ -124051,11 +126319,11 @@
 	}
 	else {
 		ioriginalnameref(ITEM_ID_NUMENIUS) = "<Numenius>"
 		ioriginalnameref2(ITEM_ID_NUMENIUS) = ""
 	}
-	ipicref(ITEM_ID_NUMENIUS) = 1149
+	ipicref(ITEM_ID_NUMENIUS) = xy2pic(27, 34)
 	if ( jp ) {
 		iknownnameref(ITEM_ID_NUMENIUS) = "鋭い鋏鎌"
 	}
 	else {
 		iknownnameref(ITEM_ID_NUMENIUS) = "sharp scissors"
@@ -124069,11 +126337,11 @@
 	}
 	else {
 		ioriginalnameref(ITEM_ID_ENGOKU) = "<Engoku>"
 		ioriginalnameref2(ITEM_ID_ENGOKU) = ""
 	}
-	ipicref(ITEM_ID_ENGOKU) = 1145
+	ipicref(ITEM_ID_ENGOKU) = xy2pic(23, 34)
 	if ( jp ) {
 		iknownnameref(ITEM_ID_ENGOKU) = "怪しい錫杖"
 	}
 	else {
 		iknownnameref(ITEM_ID_ENGOKU) = "suspicious shakujo"
@@ -124087,11 +126355,11 @@
 	}
 	else {
 		ioriginalnameref(ITEM_ID_POWER_TRIANGLE) = "<Power Triangle>"
 		ioriginalnameref2(ITEM_ID_POWER_TRIANGLE) = ""
 	}
-	ipicref(ITEM_ID_POWER_TRIANGLE) = 1144
+	ipicref(ITEM_ID_POWER_TRIANGLE) = xy2pic(22, 34)
 	if ( jp ) {
 		iknownnameref(ITEM_ID_POWER_TRIANGLE) = "赤い節棍"
 	}
 	else {
 		iknownnameref(ITEM_ID_POWER_TRIANGLE) = "triple rod"
@@ -124105,11 +126373,11 @@
 	}
 	else {
 		ioriginalnameref(ITEM_ID_CROSS_RAIL) = "<Cross Rail>"
 		ioriginalnameref2(ITEM_ID_CROSS_RAIL) = ""
 	}
-	ipicref(ITEM_ID_CROSS_RAIL) = 1142
+	ipicref(ITEM_ID_CROSS_RAIL) = xy2pic(20, 34)
 	if ( jp ) {
 		iknownnameref(ITEM_ID_CROSS_RAIL) = "アンバランスな炎弩"
 	}
 	else {
 		iknownnameref(ITEM_ID_CROSS_RAIL) = "electro crossfire"
@@ -124123,11 +126391,11 @@
 	}
 	else {
 		ioriginalnameref(ITEM_ID_NAZUNAS_SOX) = "<Nazuna's Sox>"
 		ioriginalnameref2(ITEM_ID_NAZUNAS_SOX) = ""
 	}
-	ipicref(ITEM_ID_NAZUNAS_SOX) = 1183
+	ipicref(ITEM_ID_NAZUNAS_SOX) = xy2pic(28, 35)
 	if ( jp ) {
 		iknownnameref(ITEM_ID_NAZUNAS_SOX) = "異臭放つ靴下"
 	}
 	else {
 		iknownnameref(ITEM_ID_NAZUNAS_SOX) = "tabi"
@@ -124141,11 +126409,11 @@
 	}
 	else {
 		ioriginalnameref(ITEM_ID_SCORPIERCE) = "<Scorpierce>"
 		ioriginalnameref2(ITEM_ID_SCORPIERCE) = ""
 	}
-	ipicref(ITEM_ID_SCORPIERCE) = 927
+	ipicref(ITEM_ID_SCORPIERCE) = xy2pic(3, 28)
 	if ( jp ) {
 		iknownnameref(ITEM_ID_SCORPIERCE) = "狙撃用弩砲"
 	}
 	else {
 		iknownnameref(ITEM_ID_SCORPIERCE) = "sniper ballista"
@@ -124159,11 +126427,11 @@
 	}
 	else {
 		ioriginalnameref(ITEM_ID_YOMI_TO) = "<Yomi-to>"
 		ioriginalnameref2(ITEM_ID_YOMI_TO) = ""
 	}
-	ipicref(ITEM_ID_YOMI_TO) = 924
+	ipicref(ITEM_ID_YOMI_TO) = xy2pic(0, 28)
 	if ( jp ) {
 		iknownnameref(ITEM_ID_YOMI_TO) = "死臭纏う大岩"
 	}
 	else {
 		iknownnameref(ITEM_ID_YOMI_TO) = "hell rock fragment"
@@ -124177,11 +126445,11 @@
 	}
 	else {
 		ioriginalnameref(ITEM_ID_RINKHALS) = "<Rinkhals>"
 		ioriginalnameref2(ITEM_ID_RINKHALS) = ""
 	}
-	ipicref(ITEM_ID_RINKHALS) = 595
+	ipicref(ITEM_ID_RINKHALS) = xy2pic(1, 18)
 	if ( jp ) {
 		iknownnameref(ITEM_ID_RINKHALS) = "毒噴きの連弩"
 	}
 	else {
 		iknownnameref(ITEM_ID_RINKHALS) = "viper repeating bow"
@@ -124195,11 +126463,11 @@
 	}
 	else {
 		ioriginalnameref(ITEM_ID_LINGS_BOW) = "<Ling's Bow>"
 		ioriginalnameref2(ITEM_ID_LINGS_BOW) = ""
 	}
-	ipicref(ITEM_ID_LINGS_BOW) = 1182
+	ipicref(ITEM_ID_LINGS_BOW) = xy2pic(27, 35)
 	if ( jp ) {
 		iknownnameref(ITEM_ID_LINGS_BOW) = "小さな弓"
 	}
 	else {
 		iknownnameref(ITEM_ID_LINGS_BOW) = "short short bow"
@@ -124444,11 +126712,11 @@
 	iorgweight(ITEM_ID_CHICORY) = 90
 	if ( jp ) {
 		ioriginalnameref(ITEM_ID_CHICORY) = "チクリー"
 	}
 	else {
-		ioriginalnameref(ITEM_ID_CHICORY) = "chicory"
+		ioriginalnameref(ITEM_ID_CHICORY) = "chicury"
 		ioriginalnameref2(ITEM_ID_CHICORY) = ""
 	}
 	ipicref(ITEM_ID_CHICORY) = xy2pic(21, 33)
 	iknownnameref(ITEM_ID_CHICORY) = ioriginalnameref(ITEM_ID_CHICORY)
 	icolref(ITEM_ID_CHICORY) = COLOR_DEFAULT
@@ -124470,11 +126738,11 @@
 	iorgweight(ITEM_ID_FIXITY_ANCHOR) = 4000
 	if ( jp ) {
 		ioriginalnameref(ITEM_ID_FIXITY_ANCHOR) = "姿勢制御アンカー"
 	}
 	else {
-		ioriginalnameref(ITEM_ID_FIXITY_ANCHOR) = "fixity anchor"
+		ioriginalnameref(ITEM_ID_FIXITY_ANCHOR) = "Fixity anchor"
 		ioriginalnameref2(ITEM_ID_FIXITY_ANCHOR) = ""
 	}
 	ipicref(ITEM_ID_FIXITY_ANCHOR) = xy2pic(22, 33)
 	if ( jp ) {
 		iknownnameref(ITEM_ID_FIXITY_ANCHOR) = "固定器具"
@@ -124488,11 +126756,11 @@
 	iorgweight(ITEM_ID_DEED_PROPERTY_TRANSFER) = 100
 	if ( jp ) {
 		ioriginalnameref(ITEM_ID_DEED_PROPERTY_TRANSFER) = "物件移設の申請書"
 	}
 	else {
-		ioriginalnameref(ITEM_ID_DEED_PROPERTY_TRANSFER) = "property transfer"
+		ioriginalnameref(ITEM_ID_DEED_PROPERTY_TRANSFER) = "property transfer deed"
 		ioriginalnameref2(ITEM_ID_DEED_PROPERTY_TRANSFER) = "deed"
 	}
 	ipicref(ITEM_ID_DEED_PROPERTY_TRANSFER) = xy2pic(22, 16)
 	iknownnameref(ITEM_ID_DEED_PROPERTY_TRANSFER) = ioriginalnameref(ITEM_ID_DEED_PROPERTY_TRANSFER)
 	icolref(ITEM_ID_DEED_PROPERTY_TRANSFER) = COLOR_YELLOW
@@ -124527,11 +126795,11 @@
 	iorgweight(ITEM_ID_BARLEY_TEA) = 100
 	if ( jp ) {
 		ioriginalnameref(ITEM_ID_BARLEY_TEA) = "麦茶"
 	}
 	else {
-		ioriginalnameref(ITEM_ID_BARLEY_TEA) = "barley tea"
+		ioriginalnameref(ITEM_ID_BARLEY_TEA) = "mugi tea"
 		ioriginalnameref2(ITEM_ID_BARLEY_TEA) = ""
 	}
 	ipicref(ITEM_ID_BARLEY_TEA) = xy2pic(31, 29)
 	iknownnameref(ITEM_ID_BARLEY_TEA) = ioriginalnameref(ITEM_ID_BARLEY_TEA)
 	icolref(ITEM_ID_BARLEY_TEA) = COLOR_DEFAULT
@@ -124540,11 +126808,11 @@
 	iorgweight(ITEM_ID_DEVIL_FRAGMENT) = 100
 	if ( jp ) {
 		ioriginalnameref(ITEM_ID_DEVIL_FRAGMENT) = "魔神の欠片"
 	}
 	else {
-		ioriginalnameref(ITEM_ID_DEVIL_FRAGMENT) = "devil fragment"
+		ioriginalnameref(ITEM_ID_DEVIL_FRAGMENT) = "dark fragment"
 		ioriginalnameref2(ITEM_ID_DEVIL_FRAGMENT) = ""
 	}
 	ipicref(ITEM_ID_DEVIL_FRAGMENT) = xy2pic(16, 6)
 	iknownnameref(ITEM_ID_DEVIL_FRAGMENT) = ioriginalnameref(ITEM_ID_DEVIL_FRAGMENT)
 	icolref(ITEM_ID_DEVIL_FRAGMENT) = COLOR_RED2
@@ -124553,11 +126821,11 @@
 	iorgweight(ITEM_ID_CHEWED_UP_GUM) = 20
 	if ( jp ) {
 		ioriginalnameref(ITEM_ID_CHEWED_UP_GUM) = "ガムの残骸"
 	}
 	else {
-		ioriginalnameref(ITEM_ID_CHEWED_UP_GUM) = "chewed-up gum"
+		ioriginalnameref(ITEM_ID_CHEWED_UP_GUM) = "gum remnant"
 		ioriginalnameref2(ITEM_ID_CHEWED_UP_GUM) = ""
 	}
 	ipicref(ITEM_ID_CHEWED_UP_GUM) = xy2pic(24, 33)
 	iknownnameref(ITEM_ID_CHEWED_UP_GUM) = ioriginalnameref(ITEM_ID_CHEWED_UP_GUM)
 	icolref(ITEM_ID_CHEWED_UP_GUM) = COLOR_DEFAULT
@@ -124618,11 +126886,11 @@
 	iorgweight(ITEM_ID_MYSTERIOUS_FOSSIL) = 3200
 	if ( jp ) {
 		ioriginalnameref(ITEM_ID_MYSTERIOUS_FOSSIL) = "謎の化石"
 	}
 	else {
-		ioriginalnameref(ITEM_ID_MYSTERIOUS_FOSSIL) = "mysterious fossil"
+		ioriginalnameref(ITEM_ID_MYSTERIOUS_FOSSIL) = "something fossil"
 		ioriginalnameref2(ITEM_ID_MYSTERIOUS_FOSSIL) = ""
 	}
 	ipicref(ITEM_ID_MYSTERIOUS_FOSSIL) = xy2pic(29, 29)
 	iknownnameref(ITEM_ID_MYSTERIOUS_FOSSIL) = ioriginalnameref(ITEM_ID_MYSTERIOUS_FOSSIL)
 	icolref(ITEM_ID_MYSTERIOUS_FOSSIL) = COLOR_DEFAULT
@@ -124661,22 +126929,22 @@
 	else {
 		ioriginalnameref(ITEM_ID_BUTLERS_DIARY) = "butler's diary"
 		ioriginalnameref2(ITEM_ID_BUTLERS_DIARY) = ""
 	}
 	ipicref(ITEM_ID_BUTLERS_DIARY) = xy2pic(0, 13)
-	p = (ITEM_ID_BUTLERS_DIARY + gdata(GDATA_RAND_SEED_A)) \ 6
+	p = (1121 + gdata(GDATA_RAND_SEED_A)) \ 6
 	iknownnameref(ITEM_ID_BUTLERS_DIARY) = _namespellbook(p) + strblank + strspellbook
 	icolref(ITEM_ID_BUTLERS_DIARY) = _randcolor(p)
 	irandomname(ITEM_ID_BUTLERS_DIARY) = 1
 	ilight(ITEM_ID_ENCOUNTER_CANCELLER) = LIGHT_TYPE_NONE
 	ialphanameref(ITEM_ID_ENCOUNTER_CANCELLER) = ""
 	iorgweight(ITEM_ID_ENCOUNTER_CANCELLER) = 100
 	if ( jp ) {
 		ioriginalnameref(ITEM_ID_ENCOUNTER_CANCELLER) = "アラートドキシン"
 	}
 	else {
-		ioriginalnameref(ITEM_ID_ENCOUNTER_CANCELLER) = "encounter canceller"
+		ioriginalnameref(ITEM_ID_ENCOUNTER_CANCELLER) = "encount canceller"
 		ioriginalnameref2(ITEM_ID_ENCOUNTER_CANCELLER) = ""
 	}
 	ipicref(ITEM_ID_ENCOUNTER_CANCELLER) = xy2pic(21, 26)
 	iknownnameref(ITEM_ID_ENCOUNTER_CANCELLER) = ioriginalnameref(ITEM_ID_ENCOUNTER_CANCELLER)
 	icolref(ITEM_ID_ENCOUNTER_CANCELLER) = COLOR_GREEN
@@ -124978,11 +127246,11 @@
 	iorgweight(ITEM_ID_LULWYS_PHOTO_COLLECTION) = 800
 	if ( jp ) {
 		ioriginalnameref(ITEM_ID_LULWYS_PHOTO_COLLECTION) = "ルルウィの写真集"
 	}
 	else {
-		ioriginalnameref(ITEM_ID_LULWYS_PHOTO_COLLECTION) = "Lulwy's photo collection"
+		ioriginalnameref(ITEM_ID_LULWYS_PHOTO_COLLECTION) = "lulwy's photo collection"
 		ioriginalnameref2(ITEM_ID_LULWYS_PHOTO_COLLECTION) = ""
 	}
 	ipicref(ITEM_ID_LULWYS_PHOTO_COLLECTION) = xy2pic(17, 29)
 	iknownnameref(ITEM_ID_LULWYS_PHOTO_COLLECTION) = ioriginalnameref(ITEM_ID_LULWYS_PHOTO_COLLECTION)
 	icolref(ITEM_ID_LULWYS_PHOTO_COLLECTION) = COLOR_DEFAULT
@@ -125270,11 +127538,11 @@
 	else {
 		ioriginalnameref(ITEM_ID_POTION_GEM) = "gem"
 		ioriginalnameref2(ITEM_ID_POTION_GEM) = "potion"
 	}
 	ipicref(ITEM_ID_POTION_GEM) = xy2pic(24, 10)
-	p = (ITEM_ID_POTION_GEM + gdata(GDATA_RAND_SEED_A)) \ 6
+	p = (1077 + gdata(GDATA_RAND_SEED_A)) \ 6
 	iknownnameref(ITEM_ID_POTION_GEM) = _namepotion(p) + strblank + strpotion
 	icolref(ITEM_ID_POTION_GEM) = _randcolor(p)
 	irandomname(ITEM_ID_POTION_GEM) = 1
 	ilight(ITEM_ID_SPELLBOOK_GEM) = LIGHT_TYPE_NONE
 	ialphanameref(ITEM_ID_SPELLBOOK_GEM) = ""
@@ -125285,11 +127553,11 @@
 	else {
 		ioriginalnameref(ITEM_ID_SPELLBOOK_GEM) = "gem"
 		ioriginalnameref2(ITEM_ID_SPELLBOOK_GEM) = "spellbook"
 	}
 	ipicref(ITEM_ID_SPELLBOOK_GEM) = xy2pic(0, 13)
-	p = (ITEM_ID_SPELLBOOK_GEM + gdata(GDATA_RAND_SEED_A)) \ 6
+	p = (1076 + gdata(GDATA_RAND_SEED_A)) \ 6
 	iknownnameref(ITEM_ID_SPELLBOOK_GEM) = _namespellbook(p) + strblank + strspellbook
 	icolref(ITEM_ID_SPELLBOOK_GEM) = _randcolor(p)
 	irandomname(ITEM_ID_SPELLBOOK_GEM) = 1
 	ilight(ITEM_ID_ASSAULT_GOLD) = LIGHT_TYPE_ITEM
 	ialphanameref(ITEM_ID_ASSAULT_GOLD) = ""
@@ -125354,11 +127622,11 @@
 	if ( jp ) {
 		ioriginalnameref(ITEM_ID_LIVESTOCK_FEED) = "家畜の餌"
 	}
 	else {
 		ioriginalnameref(ITEM_ID_LIVESTOCK_FEED) = "livestock feed"
-		ioriginalnameref2(ITEM_ID_LIVESTOCK_FEED) = ""
+		ioriginalnameref2(ITEM_ID_LIVESTOCK_FEED) = "147600"
 	}
 	ipicref(ITEM_ID_LIVESTOCK_FEED) = xy2pic(2, 7)
 	iknownnameref(ITEM_ID_LIVESTOCK_FEED) = ioriginalnameref(ITEM_ID_LIVESTOCK_FEED)
 	icolref(ITEM_ID_LIVESTOCK_FEED) = COLOR_YELLOW2
 	ilight(ITEM_ID_GREEN_TEA) = LIGHT_TYPE_NONE
@@ -125392,11 +127660,11 @@
 	iorgweight(ITEM_ID_HEART_OF_TWILIGHT) = 1200
 	if ( jp ) {
 		ioriginalnameref(ITEM_ID_HEART_OF_TWILIGHT) = "黄昏の心臓"
 	}
 	else {
-		ioriginalnameref(ITEM_ID_HEART_OF_TWILIGHT) = "Heart of Twilight"
+		ioriginalnameref(ITEM_ID_HEART_OF_TWILIGHT) = "Heart of twilight "
 		ioriginalnameref2(ITEM_ID_HEART_OF_TWILIGHT) = "yellow gem stone"
 	}
 	ipicref(ITEM_ID_HEART_OF_TWILIGHT) = xy2pic(30, 19)
 	if ( jp ) {
 		iknownnameref(ITEM_ID_HEART_OF_TWILIGHT) = "神々しい宝石"
@@ -125902,15 +128170,15 @@
 	iorgweight(ITEM_ID_SPELLBOOK_WATER_BEAM) = 380
 	if ( jp ) {
 		ioriginalnameref(ITEM_ID_SPELLBOOK_WATER_BEAM) = "ハイドロボルトの魔法書"
 	}
 	else {
-		ioriginalnameref(ITEM_ID_SPELLBOOK_WATER_BEAM) = "water beam"
+		ioriginalnameref(ITEM_ID_SPELLBOOK_WATER_BEAM) = "hydro bolt"
 		ioriginalnameref2(ITEM_ID_SPELLBOOK_WATER_BEAM) = "spellbook"
 	}
 	ipicref(ITEM_ID_SPELLBOOK_WATER_BEAM) = xy2pic(0, 13)
-	p = (ITEM_ID_SPELLBOOK_WATER_BEAM + gdata(GDATA_RAND_SEED_A)) \ 6
+	p = (1033 + gdata(GDATA_RAND_SEED_A)) \ 6
 	iknownnameref(ITEM_ID_SPELLBOOK_WATER_BEAM) = _namespellbook(p) + strblank + strspellbook
 	icolref(ITEM_ID_SPELLBOOK_WATER_BEAM) = _randcolor(p)
 	irandomname(ITEM_ID_SPELLBOOK_WATER_BEAM) = 1
 	ilight(ITEM_ID_ROD_BUBBLE_BALL) = LIGHT_TYPE_NONE
 	ialphanameref(ITEM_ID_ROD_BUBBLE_BALL) = ""
@@ -125921,11 +128189,11 @@
 	else {
 		ioriginalnameref(ITEM_ID_ROD_BUBBLE_BALL) = "bubble ball"
 		ioriginalnameref2(ITEM_ID_ROD_BUBBLE_BALL) = "rod"
 	}
 	ipicref(ITEM_ID_ROD_BUBBLE_BALL) = xy2pic(9, 14)
-	p = (ITEM_ID_ROD_BUBBLE_BALL + gdata(GDATA_RAND_SEED_A)) \ 6
+	p = (1032 + gdata(GDATA_RAND_SEED_A)) \ 6
 	iknownnameref(ITEM_ID_ROD_BUBBLE_BALL) = _namestaff(p) + strblank + strstaff
 	icolref(ITEM_ID_ROD_BUBBLE_BALL) = _randcolor(p)
 	irandomname(ITEM_ID_ROD_BUBBLE_BALL) = 1
 	ilight(ITEM_ID_ATOMIC_LAUNCHER) = LIGHT_TYPE_NONE
 	ialphanameref(ITEM_ID_ATOMIC_LAUNCHER) = ""
@@ -125988,11 +128256,11 @@
 	else {
 		ioriginalnameref(ITEM_ID_ROD_MAGIC_LASER) = "magic laser"
 		ioriginalnameref2(ITEM_ID_ROD_MAGIC_LASER) = "rod"
 	}
 	ipicref(ITEM_ID_ROD_MAGIC_LASER) = xy2pic(9, 14)
-	p = (ITEM_ID_ROD_MAGIC_LASER + gdata(GDATA_RAND_SEED_A)) \ 6
+	p = (1027 + gdata(GDATA_RAND_SEED_A)) \ 6
 	iknownnameref(ITEM_ID_ROD_MAGIC_LASER) = _namestaff(p) + strblank + strstaff
 	icolref(ITEM_ID_ROD_MAGIC_LASER) = _randcolor(p)
 	irandomname(ITEM_ID_ROD_MAGIC_LASER) = 1
 	ilight(ITEM_ID_ROD_POISON_BALL) = LIGHT_TYPE_NONE
 	ialphanameref(ITEM_ID_ROD_POISON_BALL) = ""
@@ -126003,11 +128271,11 @@
 	else {
 		ioriginalnameref(ITEM_ID_ROD_POISON_BALL) = "poison ball"
 		ioriginalnameref2(ITEM_ID_ROD_POISON_BALL) = "rod"
 	}
 	ipicref(ITEM_ID_ROD_POISON_BALL) = xy2pic(9, 14)
-	p = (ITEM_ID_ROD_POISON_BALL + gdata(GDATA_RAND_SEED_A)) \ 6
+	p = (1026 + gdata(GDATA_RAND_SEED_A)) \ 6
 	iknownnameref(ITEM_ID_ROD_POISON_BALL) = _namestaff(p) + strblank + strstaff
 	icolref(ITEM_ID_ROD_POISON_BALL) = _randcolor(p)
 	irandomname(ITEM_ID_ROD_POISON_BALL) = 1
 	ilight(ITEM_ID_AMULET_OF_YEKUB) = LIGHT_TYPE_ITEM
 	ialphanameref(ITEM_ID_AMULET_OF_YEKUB) = ""
@@ -126058,11 +128326,11 @@
 	iorgweight(ITEM_ID_SPECIAL_AMMO_BOX) = 8000
 	if ( jp ) {
 		ioriginalnameref(ITEM_ID_SPECIAL_AMMO_BOX) = "特殊矢弾箱"
 	}
 	else {
-		ioriginalnameref(ITEM_ID_SPECIAL_AMMO_BOX) = "special ammo box"
+		ioriginalnameref(ITEM_ID_SPECIAL_AMMO_BOX) = "special ammos box"
 		ioriginalnameref2(ITEM_ID_SPECIAL_AMMO_BOX) = ""
 	}
 	ipicref(ITEM_ID_SPECIAL_AMMO_BOX) = xy2pic(32, 30)
 	iknownnameref(ITEM_ID_SPECIAL_AMMO_BOX) = ioriginalnameref(ITEM_ID_SPECIAL_AMMO_BOX)
 	icolref(ITEM_ID_SPECIAL_AMMO_BOX) = COLOR_DEFAULT
@@ -126128,11 +128396,11 @@
 	iorgweight(ITEM_ID_CANDLE_OF_LULWY) = 300
 	if ( jp ) {
 		ioriginalnameref(ITEM_ID_CANDLE_OF_LULWY) = "媚赤蝋燭"
 	}
 	else {
-		ioriginalnameref(ITEM_ID_CANDLE_OF_LULWY) = "<Candle of Lulwy>"
+		ioriginalnameref(ITEM_ID_CANDLE_OF_LULWY) = "<Candle of Luluwy>"
 		ioriginalnameref2(ITEM_ID_CANDLE_OF_LULWY) = ""
 	}
 	ipicref(ITEM_ID_CANDLE_OF_LULWY) = xy2pic(28, 30)
 	iknownnameref(ITEM_ID_CANDLE_OF_LULWY) = ioriginalnameref(ITEM_ID_CANDLE_OF_LULWY)
 	icolref(ITEM_ID_CANDLE_OF_LULWY) = COLOR_DEFAULT
@@ -126219,11 +128487,11 @@
 	iorgweight(ITEM_ID_BLOOD_ROD) = 4800
 	if ( jp ) {
 		ioriginalnameref(ITEM_ID_BLOOD_ROD) = "《ブラッドロッド》"
 	}
 	else {
-		ioriginalnameref(ITEM_ID_BLOOD_ROD) = "<Blood Rod>"
+		ioriginalnameref(ITEM_ID_BLOOD_ROD) = "<Blood rod>"
 		ioriginalnameref2(ITEM_ID_BLOOD_ROD) = ""
 	}
 	ipicref(ITEM_ID_BLOOD_ROD) = xy2pic(23, 30)
 	if ( jp ) {
 		iknownnameref(ITEM_ID_BLOOD_ROD) = "紅魔の杖"
@@ -126317,11 +128585,11 @@
 	iorgweight(ITEM_ID_JUICE_MIXER) = 4000
 	if ( jp ) {
 		ioriginalnameref(ITEM_ID_JUICE_MIXER) = "ジュースミキサー"
 	}
 	else {
-		ioriginalnameref(ITEM_ID_JUICE_MIXER) = "juice mixer"
+		ioriginalnameref(ITEM_ID_JUICE_MIXER) = "Juice mixer"
 		ioriginalnameref2(ITEM_ID_JUICE_MIXER) = ""
 	}
 	ipicref(ITEM_ID_JUICE_MIXER) = xy2pic(18, 30)
 	iknownnameref(ITEM_ID_JUICE_MIXER) = ioriginalnameref(ITEM_ID_JUICE_MIXER)
 	icolref(ITEM_ID_JUICE_MIXER) = COLOR_DEFAULT
@@ -126431,11 +128699,11 @@
 	iorgweight(ITEM_ID_ION_CAKRAM) = 400
 	if ( jp ) {
 		ioriginalnameref(ITEM_ID_ION_CAKRAM) = "《イオンチャクラム》"
 	}
 	else {
-		ioriginalnameref(ITEM_ID_ION_CAKRAM) = "<Ion Chakram>"
+		ioriginalnameref(ITEM_ID_ION_CAKRAM) = "<Ion Cakram>"
 		ioriginalnameref2(ITEM_ID_ION_CAKRAM) = ""
 	}
 	ipicref(ITEM_ID_ION_CAKRAM) = xy2pic(14, 30)
 	if ( jp ) {
 		iknownnameref(ITEM_ID_ION_CAKRAM) = "光の戦輪"
@@ -126699,11 +128967,11 @@
 	else {
 		ioriginalnameref(ITEM_ID_SPELLBOOK_CONCENTRATION) = "concentration"
 		ioriginalnameref2(ITEM_ID_SPELLBOOK_CONCENTRATION) = "spellbook"
 	}
 	ipicref(ITEM_ID_SPELLBOOK_CONCENTRATION) = xy2pic(0, 13)
-	p = (ITEM_ID_SPELLBOOK_CONCENTRATION + gdata(GDATA_RAND_SEED_A)) \ 6
+	p = (978 + gdata(GDATA_RAND_SEED_A)) \ 6
 	iknownnameref(ITEM_ID_SPELLBOOK_CONCENTRATION) = _namespellbook(p) + strblank + strspellbook
 	icolref(ITEM_ID_SPELLBOOK_CONCENTRATION) = _randcolor(p)
 	irandomname(ITEM_ID_SPELLBOOK_CONCENTRATION) = 1
 	ilight(ITEM_ID_POTION_FEATHER) = LIGHT_TYPE_NONE
 	ialphanameref(ITEM_ID_POTION_FEATHER) = ""
@@ -126714,11 +128982,11 @@
 	else {
 		ioriginalnameref(ITEM_ID_POTION_FEATHER) = "feather"
 		ioriginalnameref2(ITEM_ID_POTION_FEATHER) = "potion"
 	}
 	ipicref(ITEM_ID_POTION_FEATHER) = xy2pic(24, 10)
-	p = (ITEM_ID_POTION_FEATHER + gdata(GDATA_RAND_SEED_A)) \ 6
+	p = (977 + gdata(GDATA_RAND_SEED_A)) \ 6
 	iknownnameref(ITEM_ID_POTION_FEATHER) = _namepotion(p) + strblank + strpotion
 	icolref(ITEM_ID_POTION_FEATHER) = _randcolor(p)
 	irandomname(ITEM_ID_POTION_FEATHER) = 1
 	ilight(ITEM_ID_POTION_CONCENTRATION) = LIGHT_TYPE_NONE
 	ialphanameref(ITEM_ID_POTION_CONCENTRATION) = ""
@@ -126729,11 +128997,11 @@
 	else {
 		ioriginalnameref(ITEM_ID_POTION_CONCENTRATION) = "concentration"
 		ioriginalnameref2(ITEM_ID_POTION_CONCENTRATION) = "potion"
 	}
 	ipicref(ITEM_ID_POTION_CONCENTRATION) = xy2pic(24, 10)
-	p = (ITEM_ID_POTION_CONCENTRATION + gdata(GDATA_RAND_SEED_A)) \ 6
+	p = (976 + gdata(GDATA_RAND_SEED_A)) \ 6
 	iknownnameref(ITEM_ID_POTION_CONCENTRATION) = _namepotion(p) + strblank + strpotion
 	icolref(ITEM_ID_POTION_CONCENTRATION) = _randcolor(p)
 	irandomname(ITEM_ID_POTION_CONCENTRATION) = 1
 	ilight(ITEM_ID_ARGENT_SNOW) = LIGHT_TYPE_ITEM
 	ialphanameref(ITEM_ID_ARGENT_SNOW) = ""
@@ -127310,12 +129578,12 @@
 	iorgweight(ITEM_ID_TREE_SAKURA) = 20000
 	if ( jp ) {
 		ioriginalnameref(ITEM_ID_TREE_SAKURA) = "常世桜"
 	}
 	else {
-		ioriginalnameref(ITEM_ID_TREE_SAKURA) = "sakura tree"
-		ioriginalnameref2(ITEM_ID_TREE_SAKURA) = ""
+		ioriginalnameref(ITEM_ID_TREE_SAKURA) = "sakura"
+		ioriginalnameref2(ITEM_ID_TREE_SAKURA) = "tree"
 	}
 	ipicref(ITEM_ID_TREE_SAKURA) = xy2pic(4, 17)
 	iknownnameref(ITEM_ID_TREE_SAKURA) = ioriginalnameref(ITEM_ID_TREE_SAKURA)
 	icolref(ITEM_ID_TREE_SAKURA) = COLOR_DEFAULT
 	ilight(ITEM_ID_COFFEE) = LIGHT_TYPE_NONE
@@ -127450,11 +129718,11 @@
 	iorgweight(ITEM_ID_TABLET_EMERALD) = 380
 	if ( jp ) {
 		ioriginalnameref(ITEM_ID_TABLET_EMERALD) = "エメラルド・タブレット"
 	}
 	else {
-		ioriginalnameref(ITEM_ID_TABLET_EMERALD) = "emerald"
+		ioriginalnameref(ITEM_ID_TABLET_EMERALD) = "emerald tablet"
 		ioriginalnameref2(ITEM_ID_TABLET_EMERALD) = "tablet"
 	}
 	ipicref(ITEM_ID_TABLET_EMERALD) = xy2pic(16, 7)
 	iknownnameref(ITEM_ID_TABLET_EMERALD) = ioriginalnameref(ITEM_ID_TABLET_EMERALD)
 	icolref(ITEM_ID_TABLET_EMERALD) = COLOR_GREEN
@@ -127646,11 +129914,11 @@
 	else {
 		ioriginalnameref(ITEM_ID_BOTTLE_ANTISEPTIC) = "antiseptic"
 		ioriginalnameref2(ITEM_ID_BOTTLE_ANTISEPTIC) = "bottle"
 	}
 	ipicref(ITEM_ID_BOTTLE_ANTISEPTIC) = xy2pic(21, 26)
-	p = (ITEM_ID_BOTTLE_ANTISEPTIC + gdata(GDATA_RAND_SEED_A)) \ 6
+	p = (911 + gdata(GDATA_RAND_SEED_A)) \ 6
 	iknownnameref(ITEM_ID_BOTTLE_ANTISEPTIC) = _namepotion(p) + strblank + strpotion
 	icolref(ITEM_ID_BOTTLE_ANTISEPTIC) = _randcolor(p)
 	irandomname(ITEM_ID_BOTTLE_ANTISEPTIC) = 1
 	ilight(ITEM_ID_MINIATURE_BLIMP) = LIGHT_TYPE_NONE
 	ialphanameref(ITEM_ID_MINIATURE_BLIMP) = ""
@@ -127701,11 +129969,11 @@
 	iorgweight(ITEM_ID_HANDMADE_CHOCOLATE_KIT) = 3800
 	if ( jp ) {
 		ioriginalnameref(ITEM_ID_HANDMADE_CHOCOLATE_KIT) = "チョコレート手作りキット"
 	}
 	else {
-		ioriginalnameref(ITEM_ID_HANDMADE_CHOCOLATE_KIT) = "handmade chocolate kit"
+		ioriginalnameref(ITEM_ID_HANDMADE_CHOCOLATE_KIT) = "kit of making chocolate"
 		ioriginalnameref2(ITEM_ID_HANDMADE_CHOCOLATE_KIT) = ""
 	}
 	ipicref(ITEM_ID_HANDMADE_CHOCOLATE_KIT) = xy2pic(1, 3)
 	iknownnameref(ITEM_ID_HANDMADE_CHOCOLATE_KIT) = ioriginalnameref(ITEM_ID_HANDMADE_CHOCOLATE_KIT)
 	icolref(ITEM_ID_HANDMADE_CHOCOLATE_KIT) = COLOR_BROWN
@@ -127776,11 +130044,11 @@
 	iorgweight(ITEM_ID_COCONUT_CRAB) = 1500
 	if ( jp ) {
 		ioriginalnameref(ITEM_ID_COCONUT_CRAB) = "たらばがに"
 	}
 	else {
-		ioriginalnameref(ITEM_ID_COCONUT_CRAB) = "coconut crab"
+		ioriginalnameref(ITEM_ID_COCONUT_CRAB) = "coconut crab "
 		ioriginalnameref2(ITEM_ID_COCONUT_CRAB) = ""
 	}
 	ipicref(ITEM_ID_COCONUT_CRAB) = xy2pic(13, 26)
 	iknownnameref(ITEM_ID_COCONUT_CRAB) = ioriginalnameref(ITEM_ID_COCONUT_CRAB)
 	icolref(ITEM_ID_COCONUT_CRAB) = COLOR_DEFAULT
@@ -127793,11 +130061,11 @@
 	else {
 		ioriginalnameref(ITEM_ID_ROD_LIGHTNING_BALL) = "lightning ball"
 		ioriginalnameref2(ITEM_ID_ROD_LIGHTNING_BALL) = "rod"
 	}
 	ipicref(ITEM_ID_ROD_LIGHTNING_BALL) = xy2pic(9, 14)
-	p = (ITEM_ID_ROD_LIGHTNING_BALL + gdata(GDATA_RAND_SEED_A)) \ 6
+	p = (901 + gdata(GDATA_RAND_SEED_A)) \ 6
 	iknownnameref(ITEM_ID_ROD_LIGHTNING_BALL) = _namestaff(p) + strblank + strstaff
 	icolref(ITEM_ID_ROD_LIGHTNING_BALL) = _randcolor(p)
 	irandomname(ITEM_ID_ROD_LIGHTNING_BALL) = 1
 	ilight(ITEM_ID_ASTRAL_LIGHT_PEN) = LIGHT_TYPE_CRYSTAL
 	ialphanameref(ITEM_ID_ASTRAL_LIGHT_PEN) = ""
@@ -127858,11 +130126,11 @@
 	iorgweight(ITEM_ID_DEED_HOME_RELOCATION) = 500
 	if ( jp ) {
 		ioriginalnameref(ITEM_ID_DEED_HOME_RELOCATION) = "引越しの権利書"
 	}
 	else {
-		ioriginalnameref(ITEM_ID_DEED_HOME_RELOCATION) = "home relocation"
+		ioriginalnameref(ITEM_ID_DEED_HOME_RELOCATION) = "removal deed"
 		ioriginalnameref2(ITEM_ID_DEED_HOME_RELOCATION) = "deed"
 	}
 	ipicref(ITEM_ID_DEED_HOME_RELOCATION) = xy2pic(11, 9)
 	iknownnameref(ITEM_ID_DEED_HOME_RELOCATION) = ioriginalnameref(ITEM_ID_DEED_HOME_RELOCATION)
 	icolref(ITEM_ID_DEED_HOME_RELOCATION) = COLOR_BLACK
@@ -127875,11 +130143,11 @@
 	else {
 		ioriginalnameref(ITEM_ID_MYSTERIOUS_DIARY) = "mysterious diary"
 		ioriginalnameref2(ITEM_ID_MYSTERIOUS_DIARY) = ""
 	}
 	ipicref(ITEM_ID_MYSTERIOUS_DIARY) = xy2pic(0, 13)
-	p = (ITEM_ID_MYSTERIOUS_DIARY + gdata(GDATA_RAND_SEED_A)) \ 6
+	p = (896 + gdata(GDATA_RAND_SEED_A)) \ 6
 	iknownnameref(ITEM_ID_MYSTERIOUS_DIARY) = _namespellbook(p) + strblank + strspellbook
 	icolref(ITEM_ID_MYSTERIOUS_DIARY) = _randcolor(p)
 	irandomname(ITEM_ID_MYSTERIOUS_DIARY) = 1
 	ilight(ITEM_ID_MANDRAKE_SALAD) = LIGHT_TYPE_NONE
 	ialphanameref(ITEM_ID_MANDRAKE_SALAD) = ""
@@ -128007,11 +130275,11 @@
 	iorgweight(ITEM_ID_SUPER_LURE) = 400
 	if ( jp ) {
 		ioriginalnameref(ITEM_ID_SUPER_LURE) = "マシンルアー"
 	}
 	else {
-		ioriginalnameref(ITEM_ID_SUPER_LURE) = "<Super Lure>"
+		ioriginalnameref(ITEM_ID_SUPER_LURE) = "<super lure>"
 		ioriginalnameref2(ITEM_ID_SUPER_LURE) = ""
 	}
 	ipicref(ITEM_ID_SUPER_LURE) = xy2pic(3, 26)
 	if ( jp ) {
 		iknownnameref(ITEM_ID_SUPER_LURE) = "機械仕掛けの疑似餌"
@@ -128060,11 +130328,11 @@
 	else {
 		ioriginalnameref(ITEM_ID_ROD_ECLIPSE) = "eclipse"
 		ioriginalnameref2(ITEM_ID_ROD_ECLIPSE) = "rod"
 	}
 	ipicref(ITEM_ID_ROD_ECLIPSE) = xy2pic(9, 14)
-	p = (ITEM_ID_ROD_ECLIPSE + gdata(GDATA_RAND_SEED_A)) \ 6
+	p = (887 + gdata(GDATA_RAND_SEED_A)) \ 6
 	iknownnameref(ITEM_ID_ROD_ECLIPSE) = _namestaff(p) + strblank + strstaff
 	icolref(ITEM_ID_ROD_ECLIPSE) = _randcolor(p)
 	irandomname(ITEM_ID_ROD_ECLIPSE) = 1
 	ilight(ITEM_ID_CLEANING_DOLL) = LIGHT_TYPE_NONE
 	ialphanameref(ITEM_ID_CLEANING_DOLL) = ""
@@ -128107,11 +130375,11 @@
 	iorgweight(ITEM_ID_POTION_NEKTAR) = 14000
 	if ( jp ) {
 		ioriginalnameref(ITEM_ID_POTION_NEKTAR) = "ネクタル"
 	}
 	else {
-		ioriginalnameref(ITEM_ID_POTION_NEKTAR) = "nektar"
+		ioriginalnameref(ITEM_ID_POTION_NEKTAR) = "nektar "
 		ioriginalnameref2(ITEM_ID_POTION_NEKTAR) = "high potion"
 	}
 	ipicref(ITEM_ID_POTION_NEKTAR) = xy2pic(6, 2)
 	if ( jp ) {
 		iknownnameref(ITEM_ID_POTION_NEKTAR) = "タル詰めの神酒"
@@ -128335,11 +130603,11 @@
 	else {
 		ioriginalnameref(ITEM_ID_SPELLBOOK_FEATHER) = "feather"
 		ioriginalnameref2(ITEM_ID_SPELLBOOK_FEATHER) = "spellbook"
 	}
 	ipicref(ITEM_ID_SPELLBOOK_FEATHER) = xy2pic(0, 13)
-	p = (ITEM_ID_SPELLBOOK_FEATHER + gdata(GDATA_RAND_SEED_A)) \ 6
+	p = (870 + gdata(GDATA_RAND_SEED_A)) \ 6
 	iknownnameref(ITEM_ID_SPELLBOOK_FEATHER) = _namespellbook(p) + strblank + strspellbook
 	icolref(ITEM_ID_SPELLBOOK_FEATHER) = _randcolor(p)
 	irandomname(ITEM_ID_SPELLBOOK_FEATHER) = 1
 	ilight(ITEM_ID_EVITEM) = LIGHT_TYPE_ITEM
 	ialphanameref(ITEM_ID_EVITEM) = ""
@@ -128398,11 +130666,11 @@
 	ipicref(ITEM_ID_NOVA_GRENADE) = xy2pic(9, 16)
 	if ( jp ) {
 		iknownnameref(ITEM_ID_NOVA_GRENADE) = "新星榴弾"
 	}
 	else {
-		iknownnameref(ITEM_ID_NOVA_GRENADE) = "nova grenade"
+		iknownnameref(ITEM_ID_NOVA_GRENADE) = ""
 	}
 	icolref(ITEM_ID_NOVA_GRENADE) = COLOR_ORANGE
 	ilight(ITEM_ID_COMMAND_FLAG) = LIGHT_TYPE_ITEM
 	ialphanameref(ITEM_ID_COMMAND_FLAG) = ""
 	iorgweight(ITEM_ID_COMMAND_FLAG) = 400
@@ -128488,11 +130756,11 @@
 	iorgweight(ITEM_ID_VITAL_FLAYER) = 2500
 	if ( jp ) {
 		ioriginalnameref(ITEM_ID_VITAL_FLAYER) = "《躰蝕の魔杖》"
 	}
 	else {
-		ioriginalnameref(ITEM_ID_VITAL_FLAYER) = "<Vital Flayer>"
+		ioriginalnameref(ITEM_ID_VITAL_FLAYER) = "<Vital flayer>"
 		ioriginalnameref2(ITEM_ID_VITAL_FLAYER) = ""
 	}
 	ipicref(ITEM_ID_VITAL_FLAYER) = xy2pic(9, 22)
 	if ( jp ) {
 		iknownnameref(ITEM_ID_VITAL_FLAYER) = "剛魔の杖"
@@ -128673,11 +130941,11 @@
 	else {
 		ioriginalnameref(ITEM_ID_BOTTLE_SPEED_UPPER) = "speed upper"
 		ioriginalnameref2(ITEM_ID_BOTTLE_SPEED_UPPER) = "bottle"
 	}
 	ipicref(ITEM_ID_BOTTLE_SPEED_UPPER) = xy2pic(24, 10)
-	p = (ITEM_ID_BOTTLE_SPEED_UPPER + gdata(GDATA_RAND_SEED_A)) \ 6
+	p = (847 + gdata(GDATA_RAND_SEED_A)) \ 6
 	iknownnameref(ITEM_ID_BOTTLE_SPEED_UPPER) = _namepotion(p) + strblank + strpotion
 	icolref(ITEM_ID_BOTTLE_SPEED_UPPER) = _randcolor(p)
 	irandomname(ITEM_ID_BOTTLE_SPEED_UPPER) = 1
 	ilight(ITEM_ID_NIGHTMARE) = LIGHT_TYPE_ITEM
 	ialphanameref(ITEM_ID_NIGHTMARE) = ""
@@ -128974,11 +131242,11 @@
 	iorgweight(ITEM_ID_BLACK_MONKSHOOD) = 600
 	if ( jp ) {
 		ioriginalnameref(ITEM_ID_BLACK_MONKSHOOD) = "《妖刀黒鳥兜》"
 	}
 	else {
-		ioriginalnameref(ITEM_ID_BLACK_MONKSHOOD) = "<Black Monkshood>"
+		ioriginalnameref(ITEM_ID_BLACK_MONKSHOOD) = "<Black monkshood>"
 		ioriginalnameref2(ITEM_ID_BLACK_MONKSHOOD) = ""
 	}
 	ipicref(ITEM_ID_BLACK_MONKSHOOD) = xy2pic(3, 13)
 	if ( jp ) {
 		iknownnameref(ITEM_ID_BLACK_MONKSHOOD) = "黒染めの忍刀"
@@ -129023,11 +131291,11 @@
 	iorgweight(ITEM_ID_MECHANICAL_BINDER) = 15000
 	if ( jp ) {
 		ioriginalnameref(ITEM_ID_MECHANICAL_BINDER) = "《機械拘束具》"
 	}
 	else {
-		ioriginalnameref(ITEM_ID_MECHANICAL_BINDER) = "<Mechanical Binder>"
+		ioriginalnameref(ITEM_ID_MECHANICAL_BINDER) = "<Mechanical binder>"
 		ioriginalnameref2(ITEM_ID_MECHANICAL_BINDER) = ""
 	}
 	ipicref(ITEM_ID_MECHANICAL_BINDER) = xy2pic(6, 1)
 	if ( jp ) {
 		iknownnameref(ITEM_ID_MECHANICAL_BINDER) = "神の光玉"
@@ -129041,11 +131309,11 @@
 	iorgweight(ITEM_ID_GREEN_GOD_THORN) = 500
 	if ( jp ) {
 		ioriginalnameref(ITEM_ID_GREEN_GOD_THORN) = "《神緑の茨》"
 	}
 	else {
-		ioriginalnameref(ITEM_ID_GREEN_GOD_THORN) = "<Green God Thorn>"
+		ioriginalnameref(ITEM_ID_GREEN_GOD_THORN) = "<Green god thorn>"
 		ioriginalnameref2(ITEM_ID_GREEN_GOD_THORN) = ""
 	}
 	ipicref(ITEM_ID_GREEN_GOD_THORN) = xy2pic(1, 1)
 	if ( jp ) {
 		iknownnameref(ITEM_ID_GREEN_GOD_THORN) = "神の光玉"
@@ -129059,11 +131327,11 @@
 	iorgweight(ITEM_ID_FETTER_OF_EARTH) = 500
 	if ( jp ) {
 		ioriginalnameref(ITEM_ID_FETTER_OF_EARTH) = "《大地の足枷》"
 	}
 	else {
-		ioriginalnameref(ITEM_ID_FETTER_OF_EARTH) = "<Fetter of Earth>"
+		ioriginalnameref(ITEM_ID_FETTER_OF_EARTH) = "<Fetter of earth>"
 		ioriginalnameref2(ITEM_ID_FETTER_OF_EARTH) = ""
 	}
 	ipicref(ITEM_ID_FETTER_OF_EARTH) = xy2pic(2, 1)
 	if ( jp ) {
 		iknownnameref(ITEM_ID_FETTER_OF_EARTH) = "神の光玉"
@@ -129077,11 +131345,11 @@
 	iorgweight(ITEM_ID_WHEEL_OF_FORTUNE) = 500
 	if ( jp ) {
 		ioriginalnameref(ITEM_ID_WHEEL_OF_FORTUNE) = "《運命の輪》"
 	}
 	else {
-		ioriginalnameref(ITEM_ID_WHEEL_OF_FORTUNE) = "<Wheel of Fortune>"
+		ioriginalnameref(ITEM_ID_WHEEL_OF_FORTUNE) = "<Wheel of fortune>"
 		ioriginalnameref2(ITEM_ID_WHEEL_OF_FORTUNE) = ""
 	}
 	ipicref(ITEM_ID_WHEEL_OF_FORTUNE) = xy2pic(3, 1)
 	if ( jp ) {
 		iknownnameref(ITEM_ID_WHEEL_OF_FORTUNE) = "神の光玉"
@@ -129095,11 +131363,11 @@
 	iorgweight(ITEM_ID_TEMPEST_CHOKER) = 500
 	if ( jp ) {
 		ioriginalnameref(ITEM_ID_TEMPEST_CHOKER) = "《暴風の首輪》"
 	}
 	else {
-		ioriginalnameref(ITEM_ID_TEMPEST_CHOKER) = "<Tempest Choker>"
+		ioriginalnameref(ITEM_ID_TEMPEST_CHOKER) = "<Tempest coller>"
 		ioriginalnameref2(ITEM_ID_TEMPEST_CHOKER) = ""
 	}
 	ipicref(ITEM_ID_TEMPEST_CHOKER) = xy2pic(4, 1)
 	if ( jp ) {
 		iknownnameref(ITEM_ID_TEMPEST_CHOKER) = "神の光玉"
@@ -129228,11 +131496,11 @@
 	else {
 		ioriginalnameref(ITEM_ID_DOG_SISTERS_DIARY) = "dog sister's diary"
 		ioriginalnameref2(ITEM_ID_DOG_SISTERS_DIARY) = ""
 	}
 	ipicref(ITEM_ID_DOG_SISTERS_DIARY) = xy2pic(0, 13)
-	p = (ITEM_ID_DOG_SISTERS_DIARY + gdata(GDATA_RAND_SEED_A)) \ 6
+	p = (811 + gdata(GDATA_RAND_SEED_A)) \ 6
 	iknownnameref(ITEM_ID_DOG_SISTERS_DIARY) = _namespellbook(p) + strblank + strspellbook
 	icolref(ITEM_ID_DOG_SISTERS_DIARY) = _randcolor(p)
 	irandomname(ITEM_ID_DOG_SISTERS_DIARY) = 1
 	ilight(ITEM_ID_STORM_BRINGER) = LIGHT_TYPE_ITEM
 	ialphanameref(ITEM_ID_STORM_BRINGER) = ""
@@ -129257,15 +131525,15 @@
 	iorgweight(ITEM_ID_OLDER_SISTERS_DIARY) = 380
 	if ( jp ) {
 		ioriginalnameref(ITEM_ID_OLDER_SISTERS_DIARY) = "姉の日記"
 	}
 	else {
-		ioriginalnameref(ITEM_ID_OLDER_SISTERS_DIARY) = "older sister's diary"
+		ioriginalnameref(ITEM_ID_OLDER_SISTERS_DIARY) = "OlderSister's diary"
 		ioriginalnameref2(ITEM_ID_OLDER_SISTERS_DIARY) = ""
 	}
 	ipicref(ITEM_ID_OLDER_SISTERS_DIARY) = xy2pic(0, 13)
-	p = (ITEM_ID_OLDER_SISTERS_DIARY + gdata(GDATA_RAND_SEED_A)) \ 6
+	p = (809 + gdata(GDATA_RAND_SEED_A)) \ 6
 	iknownnameref(ITEM_ID_OLDER_SISTERS_DIARY) = _namespellbook(p) + strblank + strspellbook
 	icolref(ITEM_ID_OLDER_SISTERS_DIARY) = _randcolor(p)
 	irandomname(ITEM_ID_OLDER_SISTERS_DIARY) = 1
 	ilight(ITEM_ID_KINDNESS_BLADE) = LIGHT_TYPE_ITEM
 	ialphanameref(ITEM_ID_KINDNESS_BLADE) = ""
@@ -129362,11 +131630,11 @@
 	iorgweight(ITEM_ID_HEROS_CLOAK) = 1500
 	if ( jp ) {
 		ioriginalnameref(ITEM_ID_HEROS_CLOAK) = "《英雄のマント》"
 	}
 	else {
-		ioriginalnameref(ITEM_ID_HEROS_CLOAK) = "<Hero's Cloak>"
+		ioriginalnameref(ITEM_ID_HEROS_CLOAK) = "<Hero's cloak>"
 		ioriginalnameref2(ITEM_ID_HEROS_CLOAK) = ""
 	}
 	ipicref(ITEM_ID_HEROS_CLOAK) = xy2pic(14, 14)
 	if ( jp ) {
 		iknownnameref(ITEM_ID_HEROS_CLOAK) = "よれよれの外套"
@@ -129380,11 +131648,11 @@
 	iorgweight(ITEM_ID_GEMINI) = 2200
 	if ( jp ) {
 		ioriginalnameref(ITEM_ID_GEMINI) = "《カストル＆ポルックス》"
 	}
 	else {
-		ioriginalnameref(ITEM_ID_GEMINI) = "<Gemini>"
+		ioriginalnameref(ITEM_ID_GEMINI) = "<Gemini >"
 		ioriginalnameref2(ITEM_ID_GEMINI) = ""
 	}
 	ipicref(ITEM_ID_GEMINI) = xy2pic(12, 21)
 	if ( jp ) {
 		iknownnameref(ITEM_ID_GEMINI) = "双生の銃"
@@ -129695,11 +131963,11 @@
 	iorgweight(ITEM_ID_LARGE_DISH) = 150
 	if ( jp ) {
 		ioriginalnameref(ITEM_ID_LARGE_DISH) = "皿"
 	}
 	else {
-		ioriginalnameref(ITEM_ID_LARGE_DISH) = "large dish"
+		ioriginalnameref(ITEM_ID_LARGE_DISH) = "dish"
 		ioriginalnameref2(ITEM_ID_LARGE_DISH) = ""
 	}
 	ipicref(ITEM_ID_LARGE_DISH) = xy2pic(30, 10)
 	iknownnameref(ITEM_ID_LARGE_DISH) = ioriginalnameref(ITEM_ID_LARGE_DISH)
 	icolref(ITEM_ID_LARGE_DISH) = COLOR_DEFAULT
@@ -130244,11 +132512,11 @@
 	iorgweight(ITEM_ID_SCHRODINGERS_CAT) = 3400
 	if ( jp ) {
 		ioriginalnameref(ITEM_ID_SCHRODINGERS_CAT) = "シュレディンガーの猫"
 	}
 	else {
-		ioriginalnameref(ITEM_ID_SCHRODINGERS_CAT) = "Schrodinger's Cat"
+		ioriginalnameref(ITEM_ID_SCHRODINGERS_CAT) = "Schrodinger's cat "
 		ioriginalnameref2(ITEM_ID_SCHRODINGERS_CAT) = "catbox"
 	}
 	ipicref(ITEM_ID_SCHRODINGERS_CAT) = xy2pic(14, 21)
 	if ( jp ) {
 		iknownnameref(ITEM_ID_SCHRODINGERS_CAT) = "謎の箱"
@@ -130369,11 +132637,11 @@
 	else {
 		ioriginalnameref(ITEM_ID_SCROLL_NAME) = "name"
 		ioriginalnameref2(ITEM_ID_SCROLL_NAME) = "scroll"
 	}
 	ipicref(ITEM_ID_SCROLL_NAME) = xy2pic(8, 14)
-	p = (ITEM_ID_SCROLL_NAME + gdata(GDATA_RAND_SEED_A)) \ 6
+	p = (737 + gdata(GDATA_RAND_SEED_A)) \ 6
 	iknownnameref(ITEM_ID_SCROLL_NAME) = _namescroll(p) + strblank + strscroll
 	icolref(ITEM_ID_SCROLL_NAME) = _randcolor(p)
 	irandomname(ITEM_ID_SCROLL_NAME) = 1
 	ilight(ITEM_ID_FIREPROOF_LIQUID) = LIGHT_TYPE_NONE
 	ialphanameref(ITEM_ID_FIREPROOF_LIQUID) = ""
@@ -130384,11 +132652,11 @@
 	else {
 		ioriginalnameref(ITEM_ID_FIREPROOF_LIQUID) = "fireproof liquid"
 		ioriginalnameref2(ITEM_ID_FIREPROOF_LIQUID) = ""
 	}
 	ipicref(ITEM_ID_FIREPROOF_LIQUID) = xy2pic(24, 10)
-	p = (ITEM_ID_FIREPROOF_LIQUID + gdata(GDATA_RAND_SEED_A)) \ 6
+	p = (736 + gdata(GDATA_RAND_SEED_A)) \ 6
 	iknownnameref(ITEM_ID_FIREPROOF_LIQUID) = _namepotion(p) + strblank + strpotion
 	icolref(ITEM_ID_FIREPROOF_LIQUID) = _randcolor(p)
 	irandomname(ITEM_ID_FIREPROOF_LIQUID) = 1
 	ilight(ITEM_ID_SCYTHE) = LIGHT_TYPE_NONE
 	ialphanameref(ITEM_ID_SCYTHE) = "サイズ"
@@ -130438,11 +132706,11 @@
 	else {
 		ioriginalnameref(ITEM_ID_SPELLBOOK_HARVEST) = "harvest"
 		ioriginalnameref2(ITEM_ID_SPELLBOOK_HARVEST) = "spellbook"
 	}
 	ipicref(ITEM_ID_SPELLBOOK_HARVEST) = xy2pic(0, 13)
-	p = (ITEM_ID_SPELLBOOK_HARVEST + gdata(GDATA_RAND_SEED_A)) \ 6
+	p = (732 + gdata(GDATA_RAND_SEED_A)) \ 6
 	iknownnameref(ITEM_ID_SPELLBOOK_HARVEST) = _namespellbook(p) + strblank + strspellbook
 	icolref(ITEM_ID_SPELLBOOK_HARVEST) = _randcolor(p)
 	irandomname(ITEM_ID_SPELLBOOK_HARVEST) = 1
 	ilight(ITEM_ID_SPELLBOOK_4D_POCKET) = LIGHT_TYPE_NONE
 	ialphanameref(ITEM_ID_SPELLBOOK_4D_POCKET) = ""
@@ -130453,11 +132721,11 @@
 	else {
 		ioriginalnameref(ITEM_ID_SPELLBOOK_4D_POCKET) = "4 dimensional pocket"
 		ioriginalnameref2(ITEM_ID_SPELLBOOK_4D_POCKET) = "spellbook"
 	}
 	ipicref(ITEM_ID_SPELLBOOK_4D_POCKET) = xy2pic(0, 13)
-	p = (ITEM_ID_SPELLBOOK_4D_POCKET + gdata(GDATA_RAND_SEED_A)) \ 6
+	p = (731 + gdata(GDATA_RAND_SEED_A)) \ 6
 	iknownnameref(ITEM_ID_SPELLBOOK_4D_POCKET) = _namespellbook(p) + strblank + strspellbook
 	icolref(ITEM_ID_SPELLBOOK_4D_POCKET) = _randcolor(p)
 	irandomname(ITEM_ID_SPELLBOOK_4D_POCKET) = 1
 	ilight(ITEM_ID_TOKEN_FRIENDSHIP) = LIGHT_TYPE_NONE
 	ialphanameref(ITEM_ID_TOKEN_FRIENDSHIP) = ""
@@ -130513,11 +132781,11 @@
 	iorgweight(ITEM_ID_SHIELD_OF_THORNS) = 950
 	if ( jp ) {
 		ioriginalnameref(ITEM_ID_SHIELD_OF_THORNS) = "《棘の盾》"
 	}
 	else {
-		ioriginalnameref(ITEM_ID_SHIELD_OF_THORNS) = "<Shield of Thorns>"
+		ioriginalnameref(ITEM_ID_SHIELD_OF_THORNS) = "<Shield ofThorn>"
 		ioriginalnameref2(ITEM_ID_SHIELD_OF_THORNS) = ""
 	}
 	ipicref(ITEM_ID_SHIELD_OF_THORNS) = xy2pic(24, 13)
 	if ( jp ) {
 		iknownnameref(ITEM_ID_SHIELD_OF_THORNS) = "チクチクする盾"
@@ -130785,11 +133053,11 @@
 	else {
 		ioriginalnameref(ITEM_ID_POTION_EVOLUTION) = "evolution"
 		ioriginalnameref2(ITEM_ID_POTION_EVOLUTION) = "potion"
 	}
 	ipicref(ITEM_ID_POTION_EVOLUTION) = xy2pic(24, 10)
-	p = (ITEM_ID_POTION_EVOLUTION + gdata(GDATA_RAND_SEED_A)) \ 6
+	p = (711 + gdata(GDATA_RAND_SEED_A)) \ 6
 	iknownnameref(ITEM_ID_POTION_EVOLUTION) = _namepotion(p) + strblank + strpotion
 	icolref(ITEM_ID_POTION_EVOLUTION) = _randcolor(p)
 	irandomname(ITEM_ID_POTION_EVOLUTION) = 1
 	ilight(ITEM_ID_SPELLBOOK_CONTINGENCY) = LIGHT_TYPE_NONE
 	ialphanameref(ITEM_ID_SPELLBOOK_CONTINGENCY) = ""
@@ -130800,11 +133068,11 @@
 	else {
 		ioriginalnameref(ITEM_ID_SPELLBOOK_CONTINGENCY) = "contingency"
 		ioriginalnameref2(ITEM_ID_SPELLBOOK_CONTINGENCY) = "spellbook"
 	}
 	ipicref(ITEM_ID_SPELLBOOK_CONTINGENCY) = xy2pic(0, 13)
-	p = (ITEM_ID_SPELLBOOK_CONTINGENCY + gdata(GDATA_RAND_SEED_A)) \ 6
+	p = (710 + gdata(GDATA_RAND_SEED_A)) \ 6
 	iknownnameref(ITEM_ID_SPELLBOOK_CONTINGENCY) = _namespellbook(p) + strblank + strspellbook
 	icolref(ITEM_ID_SPELLBOOK_CONTINGENCY) = _randcolor(p)
 	irandomname(ITEM_ID_SPELLBOOK_CONTINGENCY) = 1
 	ilight(ITEM_ID_SCROLL_CONTINGENCY) = LIGHT_TYPE_NONE
 	ialphanameref(ITEM_ID_SCROLL_CONTINGENCY) = ""
@@ -130815,11 +133083,11 @@
 	else {
 		ioriginalnameref(ITEM_ID_SCROLL_CONTINGENCY) = "contingency"
 		ioriginalnameref2(ITEM_ID_SCROLL_CONTINGENCY) = "scroll"
 	}
 	ipicref(ITEM_ID_SCROLL_CONTINGENCY) = xy2pic(8, 14)
-	p = (ITEM_ID_SCROLL_CONTINGENCY + gdata(GDATA_RAND_SEED_A)) \ 6
+	p = (709 + gdata(GDATA_RAND_SEED_A)) \ 6
 	iknownnameref(ITEM_ID_SCROLL_CONTINGENCY) = _namescroll(p) + strblank + strscroll
 	icolref(ITEM_ID_SCROLL_CONTINGENCY) = _randcolor(p)
 	irandomname(ITEM_ID_SCROLL_CONTINGENCY) = 1
 	ilight(ITEM_ID_BOOK_RESURRECTION) = LIGHT_TYPE_NONE
 	ialphanameref(ITEM_ID_BOOK_RESURRECTION) = ""
@@ -130830,11 +133098,11 @@
 	else {
 		ioriginalnameref(ITEM_ID_BOOK_RESURRECTION) = "resurrection"
 		ioriginalnameref2(ITEM_ID_BOOK_RESURRECTION) = "book"
 	}
 	ipicref(ITEM_ID_BOOK_RESURRECTION) = xy2pic(0, 13)
-	p = (ITEM_ID_BOOK_RESURRECTION + gdata(GDATA_RAND_SEED_A)) \ 6
+	p = (708 + gdata(GDATA_RAND_SEED_A)) \ 6
 	iknownnameref(ITEM_ID_BOOK_RESURRECTION) = _namespellbook(p) + strblank + strspellbook
 	icolref(ITEM_ID_BOOK_RESURRECTION) = _randcolor(p)
 	irandomname(ITEM_ID_BOOK_RESURRECTION) = 1
 	ilight(ITEM_ID_STRADIVARIUS) = LIGHT_TYPE_ITEM
 	ialphanameref(ITEM_ID_STRADIVARIUS) = ""
@@ -130863,22 +133131,22 @@
 	else {
 		ioriginalnameref(ITEM_ID_POTION_DESCENT) = "descent"
 		ioriginalnameref2(ITEM_ID_POTION_DESCENT) = "potion"
 	}
 	ipicref(ITEM_ID_POTION_DESCENT) = xy2pic(24, 10)
-	p = (ITEM_ID_POTION_DESCENT + gdata(GDATA_RAND_SEED_A)) \ 6
+	p = (706 + gdata(GDATA_RAND_SEED_A)) \ 6
 	iknownnameref(ITEM_ID_POTION_DESCENT) = _namepotion(p) + strblank + strpotion
 	icolref(ITEM_ID_POTION_DESCENT) = _randcolor(p)
 	irandomname(ITEM_ID_POTION_DESCENT) = 1
 	ilight(ITEM_ID_BEGGARS_PENDANT) = LIGHT_TYPE_ITEM
 	ialphanameref(ITEM_ID_BEGGARS_PENDANT) = ""
 	iorgweight(ITEM_ID_BEGGARS_PENDANT) = 250
 	if ( jp ) {
 		ioriginalnameref(ITEM_ID_BEGGARS_PENDANT) = "《乞食のペンダント》"
 	}
 	else {
-		ioriginalnameref(ITEM_ID_BEGGARS_PENDANT) = "<Beggar's Pendant>"
+		ioriginalnameref(ITEM_ID_BEGGARS_PENDANT) = "<Begger's Pendant>"
 		ioriginalnameref2(ITEM_ID_BEGGARS_PENDANT) = ""
 	}
 	ipicref(ITEM_ID_BEGGARS_PENDANT) = xy2pic(7, 26)
 	if ( jp ) {
 		iknownnameref(ITEM_ID_BEGGARS_PENDANT) = "うす汚れたペンダント"
@@ -130990,33 +133258,33 @@
 	icolref(ITEM_ID_POTION_SALT_SOLUTION) = COLOR_DEFAULT
 	ilight(ITEM_ID_SPELLBOOK_MAGIC_LASER) = LIGHT_TYPE_NONE
 	ialphanameref(ITEM_ID_SPELLBOOK_MAGIC_LASER) = ""
 	iorgweight(ITEM_ID_SPELLBOOK_MAGIC_LASER) = 380
 	if ( jp ) {
-		ioriginalnameref(ITEM_ID_SPELLBOOK_MAGIC_LASER) = "魔力の集積の魔法書"
+		ioriginalnameref(ITEM_ID_SPELLBOOK_MAGIC_LASER) = "マジックボルトの魔法書"
 	}
 	else {
-		ioriginalnameref(ITEM_ID_SPELLBOOK_MAGIC_LASER) = "magic laser"
+		ioriginalnameref(ITEM_ID_SPELLBOOK_MAGIC_LASER) = "magic bolt"
 		ioriginalnameref2(ITEM_ID_SPELLBOOK_MAGIC_LASER) = "spellbook"
 	}
 	ipicref(ITEM_ID_SPELLBOOK_MAGIC_LASER) = xy2pic(0, 13)
-	p = (ITEM_ID_SPELLBOOK_MAGIC_LASER + gdata(GDATA_RAND_SEED_A)) \ 6
+	p = (697 + gdata(GDATA_RAND_SEED_A)) \ 6
 	iknownnameref(ITEM_ID_SPELLBOOK_MAGIC_LASER) = _namespellbook(p) + strblank + strspellbook
 	icolref(ITEM_ID_SPELLBOOK_MAGIC_LASER) = _randcolor(p)
 	irandomname(ITEM_ID_SPELLBOOK_MAGIC_LASER) = 1
 	ilight(ITEM_ID_SPELLBOOK_MAGIC_BALL) = LIGHT_TYPE_NONE
 	ialphanameref(ITEM_ID_SPELLBOOK_MAGIC_BALL) = ""
 	iorgweight(ITEM_ID_SPELLBOOK_MAGIC_BALL) = 380
 	if ( jp ) {
 		ioriginalnameref(ITEM_ID_SPELLBOOK_MAGIC_BALL) = "魔力の嵐の魔法書"
 	}
 	else {
-		ioriginalnameref(ITEM_ID_SPELLBOOK_MAGIC_BALL) = "magic ball"
+		ioriginalnameref(ITEM_ID_SPELLBOOK_MAGIC_BALL) = "magic storm"
 		ioriginalnameref2(ITEM_ID_SPELLBOOK_MAGIC_BALL) = "spellbook"
 	}
 	ipicref(ITEM_ID_SPELLBOOK_MAGIC_BALL) = xy2pic(0, 13)
-	p = (ITEM_ID_SPELLBOOK_MAGIC_BALL + gdata(GDATA_RAND_SEED_A)) \ 6
+	p = (696 + gdata(GDATA_RAND_SEED_A)) \ 6
 	iknownnameref(ITEM_ID_SPELLBOOK_MAGIC_BALL) = _namespellbook(p) + strblank + strspellbook
 	icolref(ITEM_ID_SPELLBOOK_MAGIC_BALL) = _randcolor(p)
 	irandomname(ITEM_ID_SPELLBOOK_MAGIC_BALL) = 1
 	ilight(ITEM_ID_AXE_OF_DESTRUCTION) = LIGHT_TYPE_ITEM
 	ialphanameref(ITEM_ID_AXE_OF_DESTRUCTION) = ""
@@ -131266,11 +133534,11 @@
 	iorgweight(ITEM_ID_GAIA_HAMMER) = 6500
 	if ( jp ) {
 		ioriginalnameref(ITEM_ID_GAIA_HAMMER) = "《大地の大槌》"
 	}
 	else {
-		ioriginalnameref(ITEM_ID_GAIA_HAMMER) = "<Gaia Hammer>"
+		ioriginalnameref(ITEM_ID_GAIA_HAMMER) = "Gaia Hammer>"
 		ioriginalnameref2(ITEM_ID_GAIA_HAMMER) = ""
 	}
 	ipicref(ITEM_ID_GAIA_HAMMER) = xy2pic(9, 15)
 	if ( jp ) {
 		iknownnameref(ITEM_ID_GAIA_HAMMER) = "巨大な槌"
@@ -131302,29 +133570,29 @@
 	iorgweight(ITEM_ID_HOLY_LANCE) = 4400
 	if ( jp ) {
 		ioriginalnameref(ITEM_ID_HOLY_LANCE) = "《ホーリーランス》"
 	}
 	else {
-		ioriginalnameref(ITEM_ID_HOLY_LANCE) = "<Holy Lance>"
+		ioriginalnameref(ITEM_ID_HOLY_LANCE) = "<Holy Rance>"
 		ioriginalnameref2(ITEM_ID_HOLY_LANCE) = ""
 	}
 	ipicref(ITEM_ID_HOLY_LANCE) = xy2pic(19, 12)
 	if ( jp ) {
 		iknownnameref(ITEM_ID_HOLY_LANCE) = "聖なる槍"
 	}
 	else {
-		iknownnameref(ITEM_ID_HOLY_LANCE) = "holy lance"
+		iknownnameref(ITEM_ID_HOLY_LANCE) = "holy rance"
 	}
 	icolref(ITEM_ID_HOLY_LANCE) = COLOR_DEFAULT
 	ilight(ITEM_ID_ELEMENTAL_STAFF) = LIGHT_TYPE_ITEM
 	ialphanameref(ITEM_ID_ELEMENTAL_STAFF) = ""
 	iorgweight(ITEM_ID_ELEMENTAL_STAFF) = 900
 	if ( jp ) {
 		ioriginalnameref(ITEM_ID_ELEMENTAL_STAFF) = "《エレメンタルスタッフ》"
 	}
 	else {
-		ioriginalnameref(ITEM_ID_ELEMENTAL_STAFF) = "<Elemental Staff>"
+		ioriginalnameref(ITEM_ID_ELEMENTAL_STAFF) = "<Elemental Staff)"
 		ioriginalnameref2(ITEM_ID_ELEMENTAL_STAFF) = ""
 	}
 	ipicref(ITEM_ID_ELEMENTAL_STAFF) = xy2pic(29, 12)
 	if ( jp ) {
 		iknownnameref(ITEM_ID_ELEMENTAL_STAFF) = "元素の杖"
@@ -131338,19 +133606,19 @@
 	iorgweight(ITEM_ID_KUMIROMI_SCYTHE) = 850
 	if ( jp ) {
 		ioriginalnameref(ITEM_ID_KUMIROMI_SCYTHE) = "《クミロミサイズ》"
 	}
 	else {
-		ioriginalnameref(ITEM_ID_KUMIROMI_SCYTHE) = "<Kumiromi Scythe>"
+		ioriginalnameref(ITEM_ID_KUMIROMI_SCYTHE) = "<Kumiromi Sythe>"
 		ioriginalnameref2(ITEM_ID_KUMIROMI_SCYTHE) = ""
 	}
 	ipicref(ITEM_ID_KUMIROMI_SCYTHE) = xy2pic(25, 12)
 	if ( jp ) {
 		iknownnameref(ITEM_ID_KUMIROMI_SCYTHE) = "収穫の鎌"
 	}
 	else {
-		iknownnameref(ITEM_ID_KUMIROMI_SCYTHE) = "harvest scythe"
+		iknownnameref(ITEM_ID_KUMIROMI_SCYTHE) = "harvest sythe"
 	}
 	icolref(ITEM_ID_KUMIROMI_SCYTHE) = COLOR_GREEN
 	ilight(ITEM_ID_WINCHESTER_PREMIUM) = LIGHT_TYPE_ITEM
 	ialphanameref(ITEM_ID_WINCHESTER_PREMIUM) = ""
 	iorgweight(ITEM_ID_WINCHESTER_PREMIUM) = 2800
@@ -131520,11 +133788,11 @@
 	else {
 		ioriginalnameref(ITEM_ID_SPEED_RING) = "speed ring"
 		ioriginalnameref2(ITEM_ID_SPEED_RING) = ""
 	}
 	ipicref(ITEM_ID_SPEED_RING) = xy2pic(14, 26)
-	p = (ITEM_ID_SPEED_RING + gdata(GDATA_RAND_SEED_A)) \ 6
+	p = (664 + gdata(GDATA_RAND_SEED_A)) \ 6
 	iknownnameref(ITEM_ID_SPEED_RING) = _namering(p) + strblank + strring
 	icolref(ITEM_ID_SPEED_RING) = COLOR_DEFAULT
 	irandomname(ITEM_ID_SPEED_RING) = 1
 	ilight(ITEM_ID_MONSTER_HEART) = LIGHT_TYPE_ITEM
 	ialphanameref(ITEM_ID_MONSTER_HEART) = ""
@@ -131582,18 +133850,18 @@
 	icolref(ITEM_ID_DAL_I_THALION) = COLOR_RED
 	ilight(ITEM_ID_SPELLBOOK_DARKNESS_ARROW) = LIGHT_TYPE_NONE
 	ialphanameref(ITEM_ID_SPELLBOOK_DARKNESS_ARROW) = ""
 	iorgweight(ITEM_ID_SPELLBOOK_DARKNESS_ARROW) = 380
 	if ( jp ) {
-		ioriginalnameref(ITEM_ID_SPELLBOOK_DARKNESS_ARROW) = "暗黒の矢の魔法書"
+		ioriginalnameref(ITEM_ID_SPELLBOOK_DARKNESS_ARROW) = "暗黒の楔の魔法書"
 	}
 	else {
-		ioriginalnameref(ITEM_ID_SPELLBOOK_DARKNESS_ARROW) = "darkness arrow"
+		ioriginalnameref(ITEM_ID_SPELLBOOK_DARKNESS_ARROW) = "darkness wedge"
 		ioriginalnameref2(ITEM_ID_SPELLBOOK_DARKNESS_ARROW) = "spellbook"
 	}
 	ipicref(ITEM_ID_SPELLBOOK_DARKNESS_ARROW) = xy2pic(0, 13)
-	p = (ITEM_ID_SPELLBOOK_DARKNESS_ARROW + gdata(GDATA_RAND_SEED_A)) \ 6
+	p = (660 + gdata(GDATA_RAND_SEED_A)) \ 6
 	iknownnameref(ITEM_ID_SPELLBOOK_DARKNESS_ARROW) = _namespellbook(p) + strblank + strspellbook
 	icolref(ITEM_ID_SPELLBOOK_DARKNESS_ARROW) = _randcolor(p)
 	irandomname(ITEM_ID_SPELLBOOK_DARKNESS_ARROW) = 1
 	ilight(ITEM_ID_PARTITION) = LIGHT_TYPE_NONE
 	ialphanameref(ITEM_ID_PARTITION) = ""
@@ -131892,11 +134160,11 @@
 	else {
 		ioriginalnameref(ITEM_ID_SCROLL_ESCAPE) = "escape"
 		ioriginalnameref2(ITEM_ID_SCROLL_ESCAPE) = "scroll"
 	}
 	ipicref(ITEM_ID_SCROLL_ESCAPE) = xy2pic(8, 14)
-	p = (ITEM_ID_SCROLL_ESCAPE + gdata(GDATA_RAND_SEED_A)) \ 6
+	p = (638 + gdata(GDATA_RAND_SEED_A)) \ 6
 	iknownnameref(ITEM_ID_SCROLL_ESCAPE) = _namescroll(p) + strblank + strscroll
 	icolref(ITEM_ID_SCROLL_ESCAPE) = _randcolor(p)
 	irandomname(ITEM_ID_SCROLL_ESCAPE) = 1
 	ilight(ITEM_ID_SKELETON_KEY) = LIGHT_TYPE_NONE
 	ialphanameref(ITEM_ID_SKELETON_KEY) = ""
@@ -131977,11 +134245,11 @@
 	else {
 		ioriginalnameref(ITEM_ID_FLYING_SCROLL) = "flying scroll"
 		ioriginalnameref2(ITEM_ID_FLYING_SCROLL) = ""
 	}
 	ipicref(ITEM_ID_FLYING_SCROLL) = xy2pic(8, 14)
-	p = (ITEM_ID_FLYING_SCROLL + gdata(GDATA_RAND_SEED_A)) \ 6
+	p = (632 + gdata(GDATA_RAND_SEED_A)) \ 6
 	iknownnameref(ITEM_ID_FLYING_SCROLL) = _namescroll(p) + strblank + strscroll
 	icolref(ITEM_ID_FLYING_SCROLL) = _randcolor(p)
 	irandomname(ITEM_ID_FLYING_SCROLL) = 1
 	ilight(ITEM_ID_MOON_GATE) = LIGHT_TYPE_GATE
 	ialphanameref(ITEM_ID_MOON_GATE) = ""
@@ -132031,11 +134299,11 @@
 	else {
 		ioriginalnameref(ITEM_ID_SPELLBOOK_INCOGNITO) = "incognito"
 		ioriginalnameref2(ITEM_ID_SPELLBOOK_INCOGNITO) = "spellbook"
 	}
 	ipicref(ITEM_ID_SPELLBOOK_INCOGNITO) = xy2pic(0, 13)
-	p = (ITEM_ID_SPELLBOOK_INCOGNITO + gdata(GDATA_RAND_SEED_A)) \ 6
+	p = (628 + gdata(GDATA_RAND_SEED_A)) \ 6
 	iknownnameref(ITEM_ID_SPELLBOOK_INCOGNITO) = _namespellbook(p) + strblank + strspellbook
 	icolref(ITEM_ID_SPELLBOOK_INCOGNITO) = _randcolor(p)
 	irandomname(ITEM_ID_SPELLBOOK_INCOGNITO) = 1
 	ilight(ITEM_ID_SAGES_HELM) = LIGHT_TYPE_ITEM
 	ialphanameref(ITEM_ID_SAGES_HELM) = ""
@@ -132064,11 +134332,11 @@
 	else {
 		ioriginalnameref(ITEM_ID_BOTTLE_HERMES_BLOOD) = "hermes blood"
 		ioriginalnameref2(ITEM_ID_BOTTLE_HERMES_BLOOD) = "bottle"
 	}
 	ipicref(ITEM_ID_BOTTLE_HERMES_BLOOD) = xy2pic(24, 10)
-	p = (ITEM_ID_BOTTLE_HERMES_BLOOD + gdata(GDATA_RAND_SEED_A)) \ 6
+	p = (626 + gdata(GDATA_RAND_SEED_A)) \ 6
 	iknownnameref(ITEM_ID_BOTTLE_HERMES_BLOOD) = _namepotion(p) + strblank + strpotion
 	icolref(ITEM_ID_BOTTLE_HERMES_BLOOD) = _randcolor(p)
 	irandomname(ITEM_ID_BOTTLE_HERMES_BLOOD) = 1
 	ilight(ITEM_ID_SHRINE_GATE) = LIGHT_TYPE_NONE
 	ialphanameref(ITEM_ID_SHRINE_GATE) = ""
@@ -132097,11 +134365,11 @@
 	else {
 		ioriginalnameref(ITEM_ID_GIRLS_DIARY) = "girl's diary"
 		ioriginalnameref2(ITEM_ID_GIRLS_DIARY) = ""
 	}
 	ipicref(ITEM_ID_GIRLS_DIARY) = xy2pic(0, 13)
-	p = (ITEM_ID_GIRLS_DIARY + gdata(GDATA_RAND_SEED_A)) \ 6
+	p = (624 + gdata(GDATA_RAND_SEED_A)) \ 6
 	iknownnameref(ITEM_ID_GIRLS_DIARY) = _namespellbook(p) + strblank + strspellbook
 	icolref(ITEM_ID_GIRLS_DIARY) = _randcolor(p)
 	irandomname(ITEM_ID_GIRLS_DIARY) = 1
 	ilight(ITEM_ID_CAT_SISTERS_DIARY) = LIGHT_TYPE_NONE
 	ialphanameref(ITEM_ID_CAT_SISTERS_DIARY) = ""
@@ -132112,11 +134380,11 @@
 	else {
 		ioriginalnameref(ITEM_ID_CAT_SISTERS_DIARY) = "cat sister's diary"
 		ioriginalnameref2(ITEM_ID_CAT_SISTERS_DIARY) = ""
 	}
 	ipicref(ITEM_ID_CAT_SISTERS_DIARY) = xy2pic(0, 13)
-	p = (ITEM_ID_CAT_SISTERS_DIARY + gdata(GDATA_RAND_SEED_A)) \ 6
+	p = (623 + gdata(GDATA_RAND_SEED_A)) \ 6
 	iknownnameref(ITEM_ID_CAT_SISTERS_DIARY) = _namespellbook(p) + strblank + strspellbook
 	icolref(ITEM_ID_CAT_SISTERS_DIARY) = _randcolor(p)
 	irandomname(ITEM_ID_CAT_SISTERS_DIARY) = 1
 	ilight(ITEM_ID_SMALL_MEDAL) = LIGHT_TYPE_NONE
 	ialphanameref(ITEM_ID_SMALL_MEDAL) = ""
@@ -132592,12 +134860,12 @@
 	iorgweight(ITEM_ID_TREE_FIR) = 28000
 	if ( jp ) {
 		ioriginalnameref(ITEM_ID_TREE_FIR) = "モミの木"
 	}
 	else {
-		ioriginalnameref(ITEM_ID_TREE_FIR) = "fir tree"
-		ioriginalnameref2(ITEM_ID_TREE_FIR) = ""
+		ioriginalnameref(ITEM_ID_TREE_FIR) = "fir"
+		ioriginalnameref2(ITEM_ID_TREE_FIR) = "tree"
 	}
 	ipicref(ITEM_ID_TREE_FIR) = xy2pic(13, 17)
 	iknownnameref(ITEM_ID_TREE_FIR) = ioriginalnameref(ITEM_ID_TREE_FIR)
 	icolref(ITEM_ID_TREE_FIR) = COLOR_DEFAULT
 	ilight(ITEM_ID_TREE_NAKED) = LIGHT_TYPE_NONE
@@ -132605,12 +134873,12 @@
 	iorgweight(ITEM_ID_TREE_NAKED) = 14000
 	if ( jp ) {
 		ioriginalnameref(ITEM_ID_TREE_NAKED) = "葉の散った木"
 	}
 	else {
-		ioriginalnameref(ITEM_ID_TREE_NAKED) = "naked tree"
-		ioriginalnameref2(ITEM_ID_TREE_NAKED) = ""
+		ioriginalnameref(ITEM_ID_TREE_NAKED) = "naked"
+		ioriginalnameref2(ITEM_ID_TREE_NAKED) = "tree"
 	}
 	ipicref(ITEM_ID_TREE_NAKED) = xy2pic(14, 17)
 	iknownnameref(ITEM_ID_TREE_NAKED) = ioriginalnameref(ITEM_ID_TREE_NAKED)
 	icolref(ITEM_ID_TREE_NAKED) = COLOR_DEFAULT
 	ilight(ITEM_ID_HANDFUL_SNOW) = LIGHT_TYPE_ITEM
@@ -132687,11 +134955,11 @@
 	else {
 		ioriginalnameref(ITEM_ID_SPELLBOOK_MAKE_DOOR) = "make door"
 		ioriginalnameref2(ITEM_ID_SPELLBOOK_MAKE_DOOR) = "spellbook"
 	}
 	ipicref(ITEM_ID_SPELLBOOK_MAKE_DOOR) = xy2pic(0, 13)
-	p = (ITEM_ID_SPELLBOOK_MAKE_DOOR + gdata(GDATA_RAND_SEED_A)) \ 6
+	p = (582 + gdata(GDATA_RAND_SEED_A)) \ 6
 	iknownnameref(ITEM_ID_SPELLBOOK_MAKE_DOOR) = _namespellbook(p) + strblank + strspellbook
 	icolref(ITEM_ID_SPELLBOOK_MAKE_DOOR) = _randcolor(p)
 	irandomname(ITEM_ID_SPELLBOOK_MAKE_DOOR) = 1
 	ilight(ITEM_ID_ROD_MAKE_DOOR) = LIGHT_TYPE_NONE
 	ialphanameref(ITEM_ID_ROD_MAKE_DOOR) = ""
@@ -132702,11 +134970,11 @@
 	else {
 		ioriginalnameref(ITEM_ID_ROD_MAKE_DOOR) = "make door"
 		ioriginalnameref2(ITEM_ID_ROD_MAKE_DOOR) = "rod"
 	}
 	ipicref(ITEM_ID_ROD_MAKE_DOOR) = xy2pic(9, 14)
-	p = (ITEM_ID_ROD_MAKE_DOOR + gdata(GDATA_RAND_SEED_A)) \ 6
+	p = (581 + gdata(GDATA_RAND_SEED_A)) \ 6
 	iknownnameref(ITEM_ID_ROD_MAKE_DOOR) = _namestaff(p) + strblank + strstaff
 	icolref(ITEM_ID_ROD_MAKE_DOOR) = _randcolor(p)
 	irandomname(ITEM_ID_ROD_MAKE_DOOR) = 1
 	ilight(ITEM_ID_MODERN_RACK) = LIGHT_TYPE_NONE
 	ialphanameref(ITEM_ID_MODERN_RACK) = ""
@@ -132756,11 +135024,11 @@
 	else {
 		ioriginalnameref(ITEM_ID_MOLOTOV) = "molotov"
 		ioriginalnameref2(ITEM_ID_MOLOTOV) = ""
 	}
 	ipicref(ITEM_ID_MOLOTOV) = xy2pic(8, 26)
-	p = (ITEM_ID_MOLOTOV + gdata(GDATA_RAND_SEED_A)) \ 6
+	p = (577 + gdata(GDATA_RAND_SEED_A)) \ 6
 	iknownnameref(ITEM_ID_MOLOTOV) = _namepotion(p) + strblank + strpotion
 	icolref(ITEM_ID_MOLOTOV) = _randcolor(p)
 	irandomname(ITEM_ID_MOLOTOV) = 1
 	ilight(ITEM_ID_PLAYBACK_DISC) = LIGHT_TYPE_ITEM
 	ialphanameref(ITEM_ID_PLAYBACK_DISC) = ""
@@ -132849,11 +135117,11 @@
 	else {
 		ioriginalnameref(ITEM_ID_ROD_FIRE_WALL) = "fire wall"
 		ioriginalnameref2(ITEM_ID_ROD_FIRE_WALL) = "rod"
 	}
 	ipicref(ITEM_ID_ROD_FIRE_WALL) = xy2pic(9, 14)
-	p = (ITEM_ID_ROD_FIRE_WALL + gdata(GDATA_RAND_SEED_A)) \ 6
+	p = (570 + gdata(GDATA_RAND_SEED_A)) \ 6
 	iknownnameref(ITEM_ID_ROD_FIRE_WALL) = _namestaff(p) + strblank + strstaff
 	icolref(ITEM_ID_ROD_FIRE_WALL) = _randcolor(p)
 	irandomname(ITEM_ID_ROD_FIRE_WALL) = 1
 	ilight(ITEM_ID_SPELLBOOK_FIRE_WALL) = LIGHT_TYPE_NONE
 	ialphanameref(ITEM_ID_SPELLBOOK_FIRE_WALL) = ""
@@ -132864,11 +135132,11 @@
 	else {
 		ioriginalnameref(ITEM_ID_SPELLBOOK_FIRE_WALL) = "fire wall"
 		ioriginalnameref2(ITEM_ID_SPELLBOOK_FIRE_WALL) = "spellbook"
 	}
 	ipicref(ITEM_ID_SPELLBOOK_FIRE_WALL) = xy2pic(0, 13)
-	p = (ITEM_ID_SPELLBOOK_FIRE_WALL + gdata(GDATA_RAND_SEED_A)) \ 6
+	p = (569 + gdata(GDATA_RAND_SEED_A)) \ 6
 	iknownnameref(ITEM_ID_SPELLBOOK_FIRE_WALL) = _namespellbook(p) + strblank + strspellbook
 	icolref(ITEM_ID_SPELLBOOK_FIRE_WALL) = _randcolor(p)
 	irandomname(ITEM_ID_SPELLBOOK_FIRE_WALL) = 1
 	ilight(ITEM_ID_COLDPROOF_BLANKET) = LIGHT_TYPE_NONE
 	ialphanameref(ITEM_ID_COLDPROOF_BLANKET) = ""
@@ -132905,11 +135173,11 @@
 	else {
 		ioriginalnameref(ITEM_ID_ACIDPROOF_LIQUID) = "acidproof liquid"
 		ioriginalnameref2(ITEM_ID_ACIDPROOF_LIQUID) = ""
 	}
 	ipicref(ITEM_ID_ACIDPROOF_LIQUID) = xy2pic(24, 10)
-	p = (ITEM_ID_ACIDPROOF_LIQUID + gdata(GDATA_RAND_SEED_A)) \ 6
+	p = (566 + gdata(GDATA_RAND_SEED_A)) \ 6
 	iknownnameref(ITEM_ID_ACIDPROOF_LIQUID) = _namepotion(p) + strblank + strpotion
 	icolref(ITEM_ID_ACIDPROOF_LIQUID) = _randcolor(p)
 	irandomname(ITEM_ID_ACIDPROOF_LIQUID) = 1
 	ilight(ITEM_ID_ROD_ACID_GROUND) = LIGHT_TYPE_NONE
 	ialphanameref(ITEM_ID_ROD_ACID_GROUND) = ""
@@ -132920,11 +135188,11 @@
 	else {
 		ioriginalnameref(ITEM_ID_ROD_ACID_GROUND) = "acid ground"
 		ioriginalnameref2(ITEM_ID_ROD_ACID_GROUND) = "rod"
 	}
 	ipicref(ITEM_ID_ROD_ACID_GROUND) = xy2pic(9, 14)
-	p = (ITEM_ID_ROD_ACID_GROUND + gdata(GDATA_RAND_SEED_A)) \ 6
+	p = (565 + gdata(GDATA_RAND_SEED_A)) \ 6
 	iknownnameref(ITEM_ID_ROD_ACID_GROUND) = _namestaff(p) + strblank + strstaff
 	icolref(ITEM_ID_ROD_ACID_GROUND) = _randcolor(p)
 	irandomname(ITEM_ID_ROD_ACID_GROUND) = 1
 	ilight(ITEM_ID_SPELLBOOK_ACID_GROUND) = LIGHT_TYPE_NONE
 	ialphanameref(ITEM_ID_SPELLBOOK_ACID_GROUND) = ""
@@ -132935,11 +135203,11 @@
 	else {
 		ioriginalnameref(ITEM_ID_SPELLBOOK_ACID_GROUND) = "acid ground"
 		ioriginalnameref2(ITEM_ID_SPELLBOOK_ACID_GROUND) = "spellbook"
 	}
 	ipicref(ITEM_ID_SPELLBOOK_ACID_GROUND) = xy2pic(0, 13)
-	p = (ITEM_ID_SPELLBOOK_ACID_GROUND + gdata(GDATA_RAND_SEED_A)) \ 6
+	p = (564 + gdata(GDATA_RAND_SEED_A)) \ 6
 	iknownnameref(ITEM_ID_SPELLBOOK_ACID_GROUND) = _namespellbook(p) + strblank + strspellbook
 	icolref(ITEM_ID_SPELLBOOK_ACID_GROUND) = _randcolor(p)
 	irandomname(ITEM_ID_SPELLBOOK_ACID_GROUND) = 1
 	ilight(ITEM_ID_SKILLBOOK) = LIGHT_TYPE_NONE
 	ialphanameref(ITEM_ID_SKILLBOOK) = ""
@@ -133012,11 +135280,11 @@
 	else {
 		ioriginalnameref(ITEM_ID_POTION_CURE_CORRUPTION) = "cure corruption"
 		ioriginalnameref2(ITEM_ID_POTION_CURE_CORRUPTION) = "potion"
 	}
 	ipicref(ITEM_ID_POTION_CURE_CORRUPTION) = xy2pic(24, 10)
-	p = (ITEM_ID_POTION_CURE_CORRUPTION + gdata(GDATA_RAND_SEED_A)) \ 6
+	p = (559 + gdata(GDATA_RAND_SEED_A)) \ 6
 	iknownnameref(ITEM_ID_POTION_CURE_CORRUPTION) = _namepotion(p) + strblank + strpotion
 	icolref(ITEM_ID_POTION_CURE_CORRUPTION) = _randcolor(p)
 	irandomname(ITEM_ID_POTION_CURE_CORRUPTION) = 1
 	ilight(ITEM_ID_AURORA_RING) = LIGHT_TYPE_NONE
 	ialphanameref(ITEM_ID_AURORA_RING) = "オーロラリング"
@@ -133027,11 +135295,11 @@
 	else {
 		ioriginalnameref(ITEM_ID_AURORA_RING) = "aurora ring"
 		ioriginalnameref2(ITEM_ID_AURORA_RING) = ""
 	}
 	ipicref(ITEM_ID_AURORA_RING) = xy2pic(5, 26)
-	p = (ITEM_ID_AURORA_RING + gdata(GDATA_RAND_SEED_A)) \ 6
+	p = (558 + gdata(GDATA_RAND_SEED_A)) \ 6
 	iknownnameref(ITEM_ID_AURORA_RING) = _namering(p) + strblank + strring
 	icolref(ITEM_ID_AURORA_RING) = COLOR_DEFAULT
 	irandomname(ITEM_ID_AURORA_RING) = 1
 	ilight(ITEM_ID_VINDALE_CLOAK) = LIGHT_TYPE_NONE
 	ialphanameref(ITEM_ID_VINDALE_CLOAK) = "ヴィンデールクローク"
@@ -133120,11 +135388,11 @@
 	else {
 		ioriginalnameref(ITEM_ID_ROD_HEALING_HANDS) = "healing hands"
 		ioriginalnameref2(ITEM_ID_ROD_HEALING_HANDS) = "rod"
 	}
 	ipicref(ITEM_ID_ROD_HEALING_HANDS) = xy2pic(9, 14)
-	p = (ITEM_ID_ROD_HEALING_HANDS + gdata(GDATA_RAND_SEED_A)) \ 6
+	p = (551 + gdata(GDATA_RAND_SEED_A)) \ 6
 	iknownnameref(ITEM_ID_ROD_HEALING_HANDS) = _namestaff(p) + strblank + strstaff
 	icolref(ITEM_ID_ROD_HEALING_HANDS) = _randcolor(p)
 	irandomname(ITEM_ID_ROD_HEALING_HANDS) = 1
 	ilight(ITEM_ID_SPELLBOOK_HEALING_HANDS) = LIGHT_TYPE_NONE
 	ialphanameref(ITEM_ID_SPELLBOOK_HEALING_HANDS) = ""
@@ -133135,11 +135403,11 @@
 	else {
 		ioriginalnameref(ITEM_ID_SPELLBOOK_HEALING_HANDS) = "healing hands"
 		ioriginalnameref2(ITEM_ID_SPELLBOOK_HEALING_HANDS) = "spellbook"
 	}
 	ipicref(ITEM_ID_SPELLBOOK_HEALING_HANDS) = xy2pic(0, 13)
-	p = (ITEM_ID_SPELLBOOK_HEALING_HANDS + gdata(GDATA_RAND_SEED_A)) \ 6
+	p = (550 + gdata(GDATA_RAND_SEED_A)) \ 6
 	iknownnameref(ITEM_ID_SPELLBOOK_HEALING_HANDS) = _namespellbook(p) + strblank + strspellbook
 	icolref(ITEM_ID_SPELLBOOK_HEALING_HANDS) = _randcolor(p)
 	irandomname(ITEM_ID_SPELLBOOK_HEALING_HANDS) = 1
 	ilight(ITEM_ID_SCROLL_HEALING_RAIN) = LIGHT_TYPE_NONE
 	ialphanameref(ITEM_ID_SCROLL_HEALING_RAIN) = ""
@@ -133150,11 +135418,11 @@
 	else {
 		ioriginalnameref(ITEM_ID_SCROLL_HEALING_RAIN) = "healing rain"
 		ioriginalnameref2(ITEM_ID_SCROLL_HEALING_RAIN) = "scroll"
 	}
 	ipicref(ITEM_ID_SCROLL_HEALING_RAIN) = xy2pic(8, 14)
-	p = (ITEM_ID_SCROLL_HEALING_RAIN + gdata(GDATA_RAND_SEED_A)) \ 6
+	p = (549 + gdata(GDATA_RAND_SEED_A)) \ 6
 	iknownnameref(ITEM_ID_SCROLL_HEALING_RAIN) = _namescroll(p) + strblank + strscroll
 	icolref(ITEM_ID_SCROLL_HEALING_RAIN) = _randcolor(p)
 	irandomname(ITEM_ID_SCROLL_HEALING_RAIN) = 1
 	ilight(ITEM_ID_SPELLBOOK_HEALING_RAIN) = LIGHT_TYPE_NONE
 	ialphanameref(ITEM_ID_SPELLBOOK_HEALING_RAIN) = ""
@@ -133165,11 +135433,11 @@
 	else {
 		ioriginalnameref(ITEM_ID_SPELLBOOK_HEALING_RAIN) = "healing rain"
 		ioriginalnameref2(ITEM_ID_SPELLBOOK_HEALING_RAIN) = "spellbook"
 	}
 	ipicref(ITEM_ID_SPELLBOOK_HEALING_RAIN) = xy2pic(0, 13)
-	p = (ITEM_ID_SPELLBOOK_HEALING_RAIN + gdata(GDATA_RAND_SEED_A)) \ 6
+	p = (548 + gdata(GDATA_RAND_SEED_A)) \ 6
 	iknownnameref(ITEM_ID_SPELLBOOK_HEALING_RAIN) = _namespellbook(p) + strblank + strspellbook
 	icolref(ITEM_ID_SPELLBOOK_HEALING_RAIN) = _randcolor(p)
 	irandomname(ITEM_ID_SPELLBOOK_HEALING_RAIN) = 1
 	ilight(ITEM_ID_SALARY_CHEST) = LIGHT_TYPE_NONE
 	ialphanameref(ITEM_ID_SALARY_CHEST) = ""
@@ -133193,11 +135461,11 @@
 	else {
 		ioriginalnameref(ITEM_ID_SPELLBOOK_WALL_CREATION) = "wall creation"
 		ioriginalnameref2(ITEM_ID_SPELLBOOK_WALL_CREATION) = "spellbook"
 	}
 	ipicref(ITEM_ID_SPELLBOOK_WALL_CREATION) = xy2pic(0, 13)
-	p = (ITEM_ID_SPELLBOOK_WALL_CREATION + gdata(GDATA_RAND_SEED_A)) \ 6
+	p = (546 + gdata(GDATA_RAND_SEED_A)) \ 6
 	iknownnameref(ITEM_ID_SPELLBOOK_WALL_CREATION) = _namespellbook(p) + strblank + strspellbook
 	icolref(ITEM_ID_SPELLBOOK_WALL_CREATION) = _randcolor(p)
 	irandomname(ITEM_ID_SPELLBOOK_WALL_CREATION) = 1
 	ilight(ITEM_ID_ROD_WALL_CREATION) = LIGHT_TYPE_NONE
 	ialphanameref(ITEM_ID_ROD_WALL_CREATION) = ""
@@ -133208,11 +135476,11 @@
 	else {
 		ioriginalnameref(ITEM_ID_ROD_WALL_CREATION) = "wall creation"
 		ioriginalnameref2(ITEM_ID_ROD_WALL_CREATION) = "rod"
 	}
 	ipicref(ITEM_ID_ROD_WALL_CREATION) = xy2pic(9, 14)
-	p = (ITEM_ID_ROD_WALL_CREATION + gdata(GDATA_RAND_SEED_A)) \ 6
+	p = (545 + gdata(GDATA_RAND_SEED_A)) \ 6
 	iknownnameref(ITEM_ID_ROD_WALL_CREATION) = _namestaff(p) + strblank + strstaff
 	icolref(ITEM_ID_ROD_WALL_CREATION) = _randcolor(p)
 	irandomname(ITEM_ID_ROD_WALL_CREATION) = 1
 	ilight(ITEM_ID_DISC) = LIGHT_TYPE_ITEM
 	ialphanameref(ITEM_ID_DISC) = ""
@@ -133401,12 +135669,12 @@
 	iorgweight(ITEM_ID_TREE_ASH) = 28000
 	if ( jp ) {
 		ioriginalnameref(ITEM_ID_TREE_ASH) = "トネリコの木"
 	}
 	else {
-		ioriginalnameref(ITEM_ID_TREE_ASH) = "ash tree"
-		ioriginalnameref2(ITEM_ID_TREE_ASH) = ""
+		ioriginalnameref(ITEM_ID_TREE_ASH) = "ash"
+		ioriginalnameref2(ITEM_ID_TREE_ASH) = "tree"
 	}
 	ipicref(ITEM_ID_TREE_ASH) = xy2pic(26, 17)
 	iknownnameref(ITEM_ID_TREE_ASH) = ioriginalnameref(ITEM_ID_TREE_ASH)
 	icolref(ITEM_ID_TREE_ASH) = COLOR_DEFAULT
 	ilight(ITEM_ID_TREE_PALM) = LIGHT_TYPE_NONE
@@ -133414,12 +135682,12 @@
 	iorgweight(ITEM_ID_TREE_PALM) = 39000
 	if ( jp ) {
 		ioriginalnameref(ITEM_ID_TREE_PALM) = "ヤシの木"
 	}
 	else {
-		ioriginalnameref(ITEM_ID_TREE_PALM) = "palm tree"
-		ioriginalnameref2(ITEM_ID_TREE_PALM) = ""
+		ioriginalnameref(ITEM_ID_TREE_PALM) = "palm"
+		ioriginalnameref2(ITEM_ID_TREE_PALM) = "tree"
 	}
 	ipicref(ITEM_ID_TREE_PALM) = xy2pic(27, 17)
 	iknownnameref(ITEM_ID_TREE_PALM) = ioriginalnameref(ITEM_ID_TREE_PALM)
 	icolref(ITEM_ID_TREE_PALM) = COLOR_DEFAULT
 	ilight(ITEM_ID_TREE_ZELKOVA) = LIGHT_TYPE_NONE
@@ -133427,12 +135695,12 @@
 	iorgweight(ITEM_ID_TREE_ZELKOVA) = 28000
 	if ( jp ) {
 		ioriginalnameref(ITEM_ID_TREE_ZELKOVA) = "ケヤキの木"
 	}
 	else {
-		ioriginalnameref(ITEM_ID_TREE_ZELKOVA) = "zelkova tree"
-		ioriginalnameref2(ITEM_ID_TREE_ZELKOVA) = ""
+		ioriginalnameref(ITEM_ID_TREE_ZELKOVA) = "zelkova"
+		ioriginalnameref2(ITEM_ID_TREE_ZELKOVA) = "tree"
 	}
 	ipicref(ITEM_ID_TREE_ZELKOVA) = xy2pic(28, 17)
 	iknownnameref(ITEM_ID_TREE_ZELKOVA) = ioriginalnameref(ITEM_ID_TREE_ZELKOVA)
 	icolref(ITEM_ID_TREE_ZELKOVA) = COLOR_DEFAULT
 	ilight(ITEM_ID_TREE_DEAD_TREE) = LIGHT_TYPE_NONE
@@ -133453,12 +135721,12 @@
 	iorgweight(ITEM_ID_TREE_FRUIT) = 42000
 	if ( jp ) {
 		ioriginalnameref(ITEM_ID_TREE_FRUIT) = "果実の木"
 	}
 	else {
-		ioriginalnameref(ITEM_ID_TREE_FRUIT) = "fruit tree"
-		ioriginalnameref2(ITEM_ID_TREE_FRUIT) = ""
+		ioriginalnameref(ITEM_ID_TREE_FRUIT) = "fruits"
+		ioriginalnameref2(ITEM_ID_TREE_FRUIT) = "tree"
 	}
 	ipicref(ITEM_ID_TREE_FRUIT) = xy2pic(30, 17)
 	iknownnameref(ITEM_ID_TREE_FRUIT) = ioriginalnameref(ITEM_ID_TREE_FRUIT)
 	icolref(ITEM_ID_TREE_FRUIT) = COLOR_DEFAULT
 	ilight(ITEM_ID_TREE_FRUITLESS) = LIGHT_TYPE_NONE
@@ -133466,12 +135734,12 @@
 	iorgweight(ITEM_ID_TREE_FRUITLESS) = 35000
 	if ( jp ) {
 		ioriginalnameref(ITEM_ID_TREE_FRUITLESS) = "果実のない木"
 	}
 	else {
-		ioriginalnameref(ITEM_ID_TREE_FRUITLESS) = "fruitless tree"
-		ioriginalnameref2(ITEM_ID_TREE_FRUITLESS) = ""
+		ioriginalnameref(ITEM_ID_TREE_FRUITLESS) = "fruitless"
+		ioriginalnameref2(ITEM_ID_TREE_FRUITLESS) = "tree"
 	}
 	ipicref(ITEM_ID_TREE_FRUITLESS) = xy2pic(31, 17)
 	iknownnameref(ITEM_ID_TREE_FRUITLESS) = ioriginalnameref(ITEM_ID_TREE_FRUITLESS)
 	icolref(ITEM_ID_TREE_FRUITLESS) = COLOR_DEFAULT
 	ilight(ITEM_ID_TREE_CEDAR) = LIGHT_TYPE_NONE
@@ -133479,12 +135747,12 @@
 	iorgweight(ITEM_ID_TREE_CEDAR) = 38000
 	if ( jp ) {
 		ioriginalnameref(ITEM_ID_TREE_CEDAR) = "スギの木"
 	}
 	else {
-		ioriginalnameref(ITEM_ID_TREE_CEDAR) = "cedar tree"
-		ioriginalnameref2(ITEM_ID_TREE_CEDAR) = ""
+		ioriginalnameref(ITEM_ID_TREE_CEDAR) = "cedar"
+		ioriginalnameref2(ITEM_ID_TREE_CEDAR) = "tree"
 	}
 	ipicref(ITEM_ID_TREE_CEDAR) = xy2pic(32, 17)
 	iknownnameref(ITEM_ID_TREE_CEDAR) = ioriginalnameref(ITEM_ID_TREE_CEDAR)
 	icolref(ITEM_ID_TREE_CEDAR) = COLOR_DEFAULT
 	ilight(ITEM_ID_TREE_BEECH) = LIGHT_TYPE_NONE
@@ -133492,12 +135760,12 @@
 	iorgweight(ITEM_ID_TREE_BEECH) = 45000
 	if ( jp ) {
 		ioriginalnameref(ITEM_ID_TREE_BEECH) = "ブナの木"
 	}
 	else {
-		ioriginalnameref(ITEM_ID_TREE_BEECH) = "beech tree"
-		ioriginalnameref2(ITEM_ID_TREE_BEECH) = ""
+		ioriginalnameref(ITEM_ID_TREE_BEECH) = "beech"
+		ioriginalnameref2(ITEM_ID_TREE_BEECH) = "tree"
 	}
 	ipicref(ITEM_ID_TREE_BEECH) = xy2pic(32, 15)
 	iknownnameref(ITEM_ID_TREE_BEECH) = ioriginalnameref(ITEM_ID_TREE_BEECH)
 	icolref(ITEM_ID_TREE_BEECH) = COLOR_DEFAULT
 	ilight(ITEM_ID_DEED_SHOP) = LIGHT_TYPE_NONE
@@ -133548,11 +135816,11 @@
 	else {
 		ioriginalnameref(ITEM_ID_BOTTLE_DYE) = "dye"
 		ioriginalnameref2(ITEM_ID_BOTTLE_DYE) = "bottle"
 	}
 	ipicref(ITEM_ID_BOTTLE_DYE) = xy2pic(24, 10)
-	p = (ITEM_ID_BOTTLE_DYE + gdata(GDATA_RAND_SEED_A)) \ 6
+	p = (519 + gdata(GDATA_RAND_SEED_A)) \ 6
 	iknownnameref(ITEM_ID_BOTTLE_DYE) = _namepotion(p) + strblank + strpotion
 	icolref(ITEM_ID_BOTTLE_DYE) = _randcolor(p)
 	irandomname(ITEM_ID_BOTTLE_DYE) = 1
 	ilight(ITEM_ID_ROD_ALCHEMY) = LIGHT_TYPE_NONE
 	ialphanameref(ITEM_ID_ROD_ALCHEMY) = ""
@@ -133563,11 +135831,11 @@
 	else {
 		ioriginalnameref(ITEM_ID_ROD_ALCHEMY) = "alchemy"
 		ioriginalnameref2(ITEM_ID_ROD_ALCHEMY) = "rod"
 	}
 	ipicref(ITEM_ID_ROD_ALCHEMY) = xy2pic(9, 14)
-	p = (ITEM_ID_ROD_ALCHEMY + gdata(GDATA_RAND_SEED_A)) \ 6
+	p = (518 + gdata(GDATA_RAND_SEED_A)) \ 6
 	iknownnameref(ITEM_ID_ROD_ALCHEMY) = _namestaff(p) + strblank + strstaff
 	icolref(ITEM_ID_ROD_ALCHEMY) = _randcolor(p)
 	irandomname(ITEM_ID_ROD_ALCHEMY) = 1
 	ilight(ITEM_ID_ROD_CHANGE_CREATURE) = LIGHT_TYPE_NONE
 	ialphanameref(ITEM_ID_ROD_CHANGE_CREATURE) = ""
@@ -133578,11 +135846,11 @@
 	else {
 		ioriginalnameref(ITEM_ID_ROD_CHANGE_CREATURE) = "change creature"
 		ioriginalnameref2(ITEM_ID_ROD_CHANGE_CREATURE) = "rod"
 	}
 	ipicref(ITEM_ID_ROD_CHANGE_CREATURE) = xy2pic(9, 14)
-	p = (ITEM_ID_ROD_CHANGE_CREATURE + gdata(GDATA_RAND_SEED_A)) \ 6
+	p = (517 + gdata(GDATA_RAND_SEED_A)) \ 6
 	iknownnameref(ITEM_ID_ROD_CHANGE_CREATURE) = _namestaff(p) + strblank + strstaff
 	icolref(ITEM_ID_ROD_CHANGE_CREATURE) = _randcolor(p)
 	irandomname(ITEM_ID_ROD_CHANGE_CREATURE) = 1
 	ilight(ITEM_ID_BOTTLE_WATER) = LIGHT_TYPE_NONE
 	ialphanameref(ITEM_ID_BOTTLE_WATER) = ""
@@ -133611,11 +135879,11 @@
 	else {
 		ioriginalnameref(ITEM_ID_SCROLL_RECHARGE) = "recharge"
 		ioriginalnameref2(ITEM_ID_SCROLL_RECHARGE) = "scroll"
 	}
 	ipicref(ITEM_ID_SCROLL_RECHARGE) = xy2pic(8, 14)
-	p = (ITEM_ID_SCROLL_RECHARGE + gdata(GDATA_RAND_SEED_A)) \ 6
+	p = (515 + gdata(GDATA_RAND_SEED_A)) \ 6
 	iknownnameref(ITEM_ID_SCROLL_RECHARGE) = _namescroll(p) + strblank + strscroll
 	icolref(ITEM_ID_SCROLL_RECHARGE) = _randcolor(p)
 	irandomname(ITEM_ID_SCROLL_RECHARGE) = 1
 	ilight(ITEM_ID_RAIL_GUN) = LIGHT_TYPE_ITEM
 	ialphanameref(ITEM_ID_RAIL_GUN) = ""
@@ -133696,11 +135964,11 @@
 	else {
 		ioriginalnameref(ITEM_ID_SCROLL_GREATER_ENCHANT_ARMOR) = "greater enchant armor"
 		ioriginalnameref2(ITEM_ID_SCROLL_GREATER_ENCHANT_ARMOR) = "scroll"
 	}
 	ipicref(ITEM_ID_SCROLL_GREATER_ENCHANT_ARMOR) = xy2pic(8, 14)
-	p = (ITEM_ID_SCROLL_GREATER_ENCHANT_ARMOR + gdata(GDATA_RAND_SEED_A)) \ 6
+	p = (509 + gdata(GDATA_RAND_SEED_A)) \ 6
 	iknownnameref(ITEM_ID_SCROLL_GREATER_ENCHANT_ARMOR) = _namescroll(p) + strblank + strscroll
 	icolref(ITEM_ID_SCROLL_GREATER_ENCHANT_ARMOR) = _randcolor(p)
 	irandomname(ITEM_ID_SCROLL_GREATER_ENCHANT_ARMOR) = 1
 	ilight(ITEM_ID_SCROLL_ENCHANT_ARMOR) = LIGHT_TYPE_NONE
 	ialphanameref(ITEM_ID_SCROLL_ENCHANT_ARMOR) = ""
@@ -133711,11 +135979,11 @@
 	else {
 		ioriginalnameref(ITEM_ID_SCROLL_ENCHANT_ARMOR) = "enchant armor"
 		ioriginalnameref2(ITEM_ID_SCROLL_ENCHANT_ARMOR) = "scroll"
 	}
 	ipicref(ITEM_ID_SCROLL_ENCHANT_ARMOR) = xy2pic(8, 14)
-	p = (ITEM_ID_SCROLL_ENCHANT_ARMOR + gdata(GDATA_RAND_SEED_A)) \ 6
+	p = (508 + gdata(GDATA_RAND_SEED_A)) \ 6
 	iknownnameref(ITEM_ID_SCROLL_ENCHANT_ARMOR) = _namescroll(p) + strblank + strscroll
 	icolref(ITEM_ID_SCROLL_ENCHANT_ARMOR) = _randcolor(p)
 	irandomname(ITEM_ID_SCROLL_ENCHANT_ARMOR) = 1
 	ilight(ITEM_ID_SCROLL_GREATER_ENCHANT_WEAPON) = LIGHT_TYPE_NONE
 	ialphanameref(ITEM_ID_SCROLL_GREATER_ENCHANT_WEAPON) = ""
@@ -133726,11 +135994,11 @@
 	else {
 		ioriginalnameref(ITEM_ID_SCROLL_GREATER_ENCHANT_WEAPON) = "greater enchant weapon"
 		ioriginalnameref2(ITEM_ID_SCROLL_GREATER_ENCHANT_WEAPON) = "scroll"
 	}
 	ipicref(ITEM_ID_SCROLL_GREATER_ENCHANT_WEAPON) = xy2pic(8, 14)
-	p = (ITEM_ID_SCROLL_GREATER_ENCHANT_WEAPON + gdata(GDATA_RAND_SEED_A)) \ 6
+	p = (507 + gdata(GDATA_RAND_SEED_A)) \ 6
 	iknownnameref(ITEM_ID_SCROLL_GREATER_ENCHANT_WEAPON) = _namescroll(p) + strblank + strscroll
 	icolref(ITEM_ID_SCROLL_GREATER_ENCHANT_WEAPON) = _randcolor(p)
 	irandomname(ITEM_ID_SCROLL_GREATER_ENCHANT_WEAPON) = 1
 	ilight(ITEM_ID_SCROLL_ENCHANT_WEAPON) = LIGHT_TYPE_NONE
 	ialphanameref(ITEM_ID_SCROLL_ENCHANT_WEAPON) = ""
@@ -133741,11 +136009,11 @@
 	else {
 		ioriginalnameref(ITEM_ID_SCROLL_ENCHANT_WEAPON) = "enchant weapon"
 		ioriginalnameref2(ITEM_ID_SCROLL_ENCHANT_WEAPON) = "scroll"
 	}
 	ipicref(ITEM_ID_SCROLL_ENCHANT_WEAPON) = xy2pic(8, 14)
-	p = (ITEM_ID_SCROLL_ENCHANT_WEAPON + gdata(GDATA_RAND_SEED_A)) \ 6
+	p = (506 + gdata(GDATA_RAND_SEED_A)) \ 6
 	iknownnameref(ITEM_ID_SCROLL_ENCHANT_WEAPON) = _namescroll(p) + strblank + strscroll
 	icolref(ITEM_ID_SCROLL_ENCHANT_WEAPON) = _randcolor(p)
 	irandomname(ITEM_ID_SCROLL_ENCHANT_WEAPON) = 1
 	ilight(ITEM_ID_LITTLE_SISTERS_DIARY) = LIGHT_TYPE_NONE
 	ialphanameref(ITEM_ID_LITTLE_SISTERS_DIARY) = ""
@@ -133756,11 +136024,11 @@
 	else {
 		ioriginalnameref(ITEM_ID_LITTLE_SISTERS_DIARY) = "little sister's diary"
 		ioriginalnameref2(ITEM_ID_LITTLE_SISTERS_DIARY) = ""
 	}
 	ipicref(ITEM_ID_LITTLE_SISTERS_DIARY) = xy2pic(0, 13)
-	p = (ITEM_ID_LITTLE_SISTERS_DIARY + gdata(GDATA_RAND_SEED_A)) \ 6
+	p = (505 + gdata(GDATA_RAND_SEED_A)) \ 6
 	iknownnameref(ITEM_ID_LITTLE_SISTERS_DIARY) = _namespellbook(p) + strblank + strspellbook
 	icolref(ITEM_ID_LITTLE_SISTERS_DIARY) = _randcolor(p)
 	irandomname(ITEM_ID_LITTLE_SISTERS_DIARY) = 1
 	ilight(ITEM_ID_CARD) = LIGHT_TYPE_NONE
 	ialphanameref(ITEM_ID_CARD) = ""
@@ -133797,11 +136065,11 @@
 	else {
 		ioriginalnameref(ITEM_ID_SCROLL_SUPERIOR_MATERIAL) = "superior material"
 		ioriginalnameref2(ITEM_ID_SCROLL_SUPERIOR_MATERIAL) = "scroll"
 	}
 	ipicref(ITEM_ID_SCROLL_SUPERIOR_MATERIAL) = xy2pic(8, 14)
-	p = (ITEM_ID_SCROLL_SUPERIOR_MATERIAL + gdata(GDATA_RAND_SEED_A)) \ 6
+	p = (502 + gdata(GDATA_RAND_SEED_A)) \ 6
 	iknownnameref(ITEM_ID_SCROLL_SUPERIOR_MATERIAL) = _namescroll(p) + strblank + strscroll
 	icolref(ITEM_ID_SCROLL_SUPERIOR_MATERIAL) = _randcolor(p)
 	irandomname(ITEM_ID_SCROLL_SUPERIOR_MATERIAL) = 1
 	ilight(ITEM_ID_SCROLL_CHANGE_MATERIAL) = LIGHT_TYPE_NONE
 	ialphanameref(ITEM_ID_SCROLL_CHANGE_MATERIAL) = ""
@@ -133812,11 +136080,11 @@
 	else {
 		ioriginalnameref(ITEM_ID_SCROLL_CHANGE_MATERIAL) = "change material"
 		ioriginalnameref2(ITEM_ID_SCROLL_CHANGE_MATERIAL) = "scroll"
 	}
 	ipicref(ITEM_ID_SCROLL_CHANGE_MATERIAL) = xy2pic(8, 14)
-	p = (ITEM_ID_SCROLL_CHANGE_MATERIAL + gdata(GDATA_RAND_SEED_A)) \ 6
+	p = (501 + gdata(GDATA_RAND_SEED_A)) \ 6
 	iknownnameref(ITEM_ID_SCROLL_CHANGE_MATERIAL) = _namescroll(p) + strblank + strscroll
 	icolref(ITEM_ID_SCROLL_CHANGE_MATERIAL) = _randcolor(p)
 	irandomname(ITEM_ID_SCROLL_CHANGE_MATERIAL) = 1
 	ilight(ITEM_ID_SCROLL_INFERIOR_MATERIAL) = LIGHT_TYPE_NONE
 	ialphanameref(ITEM_ID_SCROLL_INFERIOR_MATERIAL) = ""
@@ -133827,11 +136095,11 @@
 	else {
 		ioriginalnameref(ITEM_ID_SCROLL_INFERIOR_MATERIAL) = "inferior material"
 		ioriginalnameref2(ITEM_ID_SCROLL_INFERIOR_MATERIAL) = "scroll"
 	}
 	ipicref(ITEM_ID_SCROLL_INFERIOR_MATERIAL) = xy2pic(8, 14)
-	p = (ITEM_ID_SCROLL_INFERIOR_MATERIAL + gdata(GDATA_RAND_SEED_A)) \ 6
+	p = (500 + gdata(GDATA_RAND_SEED_A)) \ 6
 	iknownnameref(ITEM_ID_SCROLL_INFERIOR_MATERIAL) = _namescroll(p) + strblank + strscroll
 	icolref(ITEM_ID_SCROLL_INFERIOR_MATERIAL) = _randcolor(p)
 	irandomname(ITEM_ID_SCROLL_INFERIOR_MATERIAL) = 1
 	ilight(ITEM_ID_CYBER_SNACK) = LIGHT_TYPE_NONE
 	ialphanameref(ITEM_ID_CYBER_SNACK) = ""
@@ -134024,11 +136292,11 @@
 	else {
 		ioriginalnameref(ITEM_ID_ROD_WEB) = "web"
 		ioriginalnameref2(ITEM_ID_ROD_WEB) = "rod"
 	}
 	ipicref(ITEM_ID_ROD_WEB) = xy2pic(9, 14)
-	p = (ITEM_ID_ROD_WEB + gdata(GDATA_RAND_SEED_A)) \ 6
+	p = (485 + gdata(GDATA_RAND_SEED_A)) \ 6
 	iknownnameref(ITEM_ID_ROD_WEB) = _namestaff(p) + strblank + strstaff
 	icolref(ITEM_ID_ROD_WEB) = _randcolor(p)
 	irandomname(ITEM_ID_ROD_WEB) = 1
 	ilight(ITEM_ID_SPELLBOOK_WEB) = LIGHT_TYPE_NONE
 	ialphanameref(ITEM_ID_SPELLBOOK_WEB) = ""
@@ -134039,11 +136307,11 @@
 	else {
 		ioriginalnameref(ITEM_ID_SPELLBOOK_WEB) = "web"
 		ioriginalnameref2(ITEM_ID_SPELLBOOK_WEB) = "spellbook"
 	}
 	ipicref(ITEM_ID_SPELLBOOK_WEB) = xy2pic(0, 13)
-	p = (ITEM_ID_SPELLBOOK_WEB + gdata(GDATA_RAND_SEED_A)) \ 6
+	p = (484 + gdata(GDATA_RAND_SEED_A)) \ 6
 	iknownnameref(ITEM_ID_SPELLBOOK_WEB) = _namespellbook(p) + strblank + strspellbook
 	icolref(ITEM_ID_SPELLBOOK_WEB) = _randcolor(p)
 	irandomname(ITEM_ID_SPELLBOOK_WEB) = 1
 	ilight(ITEM_ID_BOLT) = LIGHT_TYPE_NONE
 	ialphanameref(ITEM_ID_BOLT) = "ボルト"
@@ -134080,11 +136348,11 @@
 	else {
 		ioriginalnameref(ITEM_ID_SPELLBOOK_DOMINATION) = "domination"
 		ioriginalnameref2(ITEM_ID_SPELLBOOK_DOMINATION) = "spellbook"
 	}
 	ipicref(ITEM_ID_SPELLBOOK_DOMINATION) = xy2pic(0, 13)
-	p = (ITEM_ID_SPELLBOOK_DOMINATION + gdata(GDATA_RAND_SEED_A)) \ 6
+	p = (481 + gdata(GDATA_RAND_SEED_A)) \ 6
 	iknownnameref(ITEM_ID_SPELLBOOK_DOMINATION) = _namespellbook(p) + strblank + strspellbook
 	icolref(ITEM_ID_SPELLBOOK_DOMINATION) = _randcolor(p)
 	irandomname(ITEM_ID_SPELLBOOK_DOMINATION) = 1
 	ilight(ITEM_ID_ROD_DOMINATION) = LIGHT_TYPE_NONE
 	ialphanameref(ITEM_ID_ROD_DOMINATION) = ""
@@ -134095,11 +136363,11 @@
 	else {
 		ioriginalnameref(ITEM_ID_ROD_DOMINATION) = "domination"
 		ioriginalnameref2(ITEM_ID_ROD_DOMINATION) = "rod"
 	}
 	ipicref(ITEM_ID_ROD_DOMINATION) = xy2pic(9, 14)
-	p = (ITEM_ID_ROD_DOMINATION + gdata(GDATA_RAND_SEED_A)) \ 6
+	p = (480 + gdata(GDATA_RAND_SEED_A)) \ 6
 	iknownnameref(ITEM_ID_ROD_DOMINATION) = _namestaff(p) + strblank + strstaff
 	icolref(ITEM_ID_ROD_DOMINATION) = _randcolor(p)
 	irandomname(ITEM_ID_ROD_DOMINATION) = 1
 	ilight(ITEM_ID_SCROLL_ALLY) = LIGHT_TYPE_NONE
 	ialphanameref(ITEM_ID_SCROLL_ALLY) = ""
@@ -134110,11 +136378,11 @@
 	else {
 		ioriginalnameref(ITEM_ID_SCROLL_ALLY) = "ally"
 		ioriginalnameref2(ITEM_ID_SCROLL_ALLY) = "scroll"
 	}
 	ipicref(ITEM_ID_SCROLL_ALLY) = xy2pic(8, 14)
-	p = (ITEM_ID_SCROLL_ALLY + gdata(GDATA_RAND_SEED_A)) \ 6
+	p = (479 + gdata(GDATA_RAND_SEED_A)) \ 6
 	iknownnameref(ITEM_ID_SCROLL_ALLY) = _namescroll(p) + strblank + strscroll
 	icolref(ITEM_ID_SCROLL_ALLY) = _randcolor(p)
 	irandomname(ITEM_ID_SCROLL_ALLY) = 1
 	ilight(ITEM_ID_STETHOSCOPE) = LIGHT_TYPE_NONE
 	ialphanameref(ITEM_ID_STETHOSCOPE) = ""
@@ -134138,11 +136406,11 @@
 	else {
 		ioriginalnameref(ITEM_ID_ENGAGEMENT_RING) = "engagement ring"
 		ioriginalnameref2(ITEM_ID_ENGAGEMENT_RING) = ""
 	}
 	ipicref(ITEM_ID_ENGAGEMENT_RING) = xy2pic(27, 14)
-	p = (ITEM_ID_ENGAGEMENT_RING + gdata(GDATA_RAND_SEED_A)) \ 6
+	p = (477 + gdata(GDATA_RAND_SEED_A)) \ 6
 	iknownnameref(ITEM_ID_ENGAGEMENT_RING) = _namering(p) + strblank + strring
 	icolref(ITEM_ID_ENGAGEMENT_RING) = COLOR_DEFAULT
 	irandomname(ITEM_ID_ENGAGEMENT_RING) = 1
 	ilight(ITEM_ID_RING) = LIGHT_TYPE_NONE
 	ialphanameref(ITEM_ID_RING) = "リング"
@@ -134153,11 +136421,11 @@
 	else {
 		ioriginalnameref(ITEM_ID_RING) = "ring"
 		ioriginalnameref2(ITEM_ID_RING) = ""
 	}
 	ipicref(ITEM_ID_RING) = xy2pic(28, 14)
-	p = (ITEM_ID_RING + gdata(GDATA_RAND_SEED_A)) \ 6
+	p = (476 + gdata(GDATA_RAND_SEED_A)) \ 6
 	iknownnameref(ITEM_ID_RING) = _namering(p) + strblank + strring
 	icolref(ITEM_ID_RING) = COLOR_DEFAULT
 	irandomname(ITEM_ID_RING) = 1
 	ilight(ITEM_ID_ARMORED_RING) = LIGHT_TYPE_NONE
 	ialphanameref(ITEM_ID_ARMORED_RING) = "ガードリング"
@@ -134168,11 +136436,11 @@
 	else {
 		ioriginalnameref(ITEM_ID_ARMORED_RING) = "armored ring"
 		ioriginalnameref2(ITEM_ID_ARMORED_RING) = ""
 	}
 	ipicref(ITEM_ID_ARMORED_RING) = xy2pic(29, 14)
-	p = (ITEM_ID_ARMORED_RING + gdata(GDATA_RAND_SEED_A)) \ 6
+	p = (475 + gdata(GDATA_RAND_SEED_A)) \ 6
 	iknownnameref(ITEM_ID_ARMORED_RING) = _namering(p) + strblank + strring
 	icolref(ITEM_ID_ARMORED_RING) = COLOR_DEFAULT
 	irandomname(ITEM_ID_ARMORED_RING) = 1
 	ilight(ITEM_ID_COMPOSITE_RING) = LIGHT_TYPE_NONE
 	ialphanameref(ITEM_ID_COMPOSITE_RING) = "ハイリング"
@@ -134183,11 +136451,11 @@
 	else {
 		ioriginalnameref(ITEM_ID_COMPOSITE_RING) = "composite ring"
 		ioriginalnameref2(ITEM_ID_COMPOSITE_RING) = ""
 	}
 	ipicref(ITEM_ID_COMPOSITE_RING) = xy2pic(30, 14)
-	p = (ITEM_ID_COMPOSITE_RING + gdata(GDATA_RAND_SEED_A)) \ 6
+	p = (474 + gdata(GDATA_RAND_SEED_A)) \ 6
 	iknownnameref(ITEM_ID_COMPOSITE_RING) = _namering(p) + strblank + strring
 	icolref(ITEM_ID_COMPOSITE_RING) = COLOR_DEFAULT
 	irandomname(ITEM_ID_COMPOSITE_RING) = 1
 	ilight(ITEM_ID_ENGAGEMENT_AMULET) = LIGHT_TYPE_NONE
 	ialphanameref(ITEM_ID_ENGAGEMENT_AMULET) = "ウェディングネックレス"
@@ -134198,11 +136466,11 @@
 	else {
 		ioriginalnameref(ITEM_ID_ENGAGEMENT_AMULET) = "engagement amulet"
 		ioriginalnameref2(ITEM_ID_ENGAGEMENT_AMULET) = ""
 	}
 	ipicref(ITEM_ID_ENGAGEMENT_AMULET) = xy2pic(21, 14)
-	p = (ITEM_ID_ENGAGEMENT_AMULET + gdata(GDATA_RAND_SEED_A)) \ 6
+	p = (473 + gdata(GDATA_RAND_SEED_A)) \ 6
 	iknownnameref(ITEM_ID_ENGAGEMENT_AMULET) = _namering(p) + strblank + stramulet
 	icolref(ITEM_ID_ENGAGEMENT_AMULET) = COLOR_DEFAULT
 	irandomname(ITEM_ID_ENGAGEMENT_AMULET) = 1
 	ilight(ITEM_ID_BEJEWELED_AMULET) = LIGHT_TYPE_NONE
 	ialphanameref(ITEM_ID_BEJEWELED_AMULET) = "ポリシュドネックレス"
@@ -134213,11 +136481,11 @@
 	else {
 		ioriginalnameref(ITEM_ID_BEJEWELED_AMULET) = "bejeweled amulet"
 		ioriginalnameref2(ITEM_ID_BEJEWELED_AMULET) = ""
 	}
 	ipicref(ITEM_ID_BEJEWELED_AMULET) = xy2pic(22, 14)
-	p = (ITEM_ID_BEJEWELED_AMULET + gdata(GDATA_RAND_SEED_A)) \ 6
+	p = (472 + gdata(GDATA_RAND_SEED_A)) \ 6
 	iknownnameref(ITEM_ID_BEJEWELED_AMULET) = _namering(p) + strblank + stramulet
 	icolref(ITEM_ID_BEJEWELED_AMULET) = COLOR_DEFAULT
 	irandomname(ITEM_ID_BEJEWELED_AMULET) = 1
 	ilight(ITEM_ID_CHARM) = LIGHT_TYPE_NONE
 	ialphanameref(ITEM_ID_CHARM) = "チャーム"
@@ -134228,11 +136496,11 @@
 	else {
 		ioriginalnameref(ITEM_ID_CHARM) = "charm"
 		ioriginalnameref2(ITEM_ID_CHARM) = ""
 	}
 	ipicref(ITEM_ID_CHARM) = xy2pic(23, 14)
-	p = (ITEM_ID_CHARM + gdata(GDATA_RAND_SEED_A)) \ 6
+	p = (471 + gdata(GDATA_RAND_SEED_A)) \ 6
 	iknownnameref(ITEM_ID_CHARM) = _namering(p) + strblank + stramulet
 	icolref(ITEM_ID_CHARM) = COLOR_DEFAULT
 	irandomname(ITEM_ID_CHARM) = 1
 	ilight(ITEM_ID_NECK_GUARD) = LIGHT_TYPE_NONE
 	ialphanameref(ITEM_ID_NECK_GUARD) = "ネックガード"
@@ -134243,11 +136511,11 @@
 	else {
 		ioriginalnameref(ITEM_ID_NECK_GUARD) = "neck guard"
 		ioriginalnameref2(ITEM_ID_NECK_GUARD) = ""
 	}
 	ipicref(ITEM_ID_NECK_GUARD) = xy2pic(24, 14)
-	p = (ITEM_ID_NECK_GUARD + gdata(GDATA_RAND_SEED_A)) \ 6
+	p = (470 + gdata(GDATA_RAND_SEED_A)) \ 6
 	iknownnameref(ITEM_ID_NECK_GUARD) = _namering(p) + strblank + stramulet
 	icolref(ITEM_ID_NECK_GUARD) = COLOR_DEFAULT
 	irandomname(ITEM_ID_NECK_GUARD) = 1
 	ilight(ITEM_ID_TALISMAN) = LIGHT_TYPE_NONE
 	ialphanameref(ITEM_ID_TALISMAN) = "タリスマン"
@@ -134258,11 +136526,11 @@
 	else {
 		ioriginalnameref(ITEM_ID_TALISMAN) = "talisman"
 		ioriginalnameref2(ITEM_ID_TALISMAN) = ""
 	}
 	ipicref(ITEM_ID_TALISMAN) = xy2pic(25, 14)
-	p = (ITEM_ID_TALISMAN + gdata(GDATA_RAND_SEED_A)) \ 6
+	p = (469 + gdata(GDATA_RAND_SEED_A)) \ 6
 	iknownnameref(ITEM_ID_TALISMAN) = _namering(p) + strblank + stramulet
 	icolref(ITEM_ID_TALISMAN) = COLOR_DEFAULT
 	irandomname(ITEM_ID_TALISMAN) = 1
 	ilight(ITEM_ID_PERIDOT) = LIGHT_TYPE_NONE
 	ialphanameref(ITEM_ID_PERIDOT) = "ペリドット"
@@ -134273,11 +136541,11 @@
 	else {
 		ioriginalnameref(ITEM_ID_PERIDOT) = "peridot"
 		ioriginalnameref2(ITEM_ID_PERIDOT) = ""
 	}
 	ipicref(ITEM_ID_PERIDOT) = xy2pic(26, 14)
-	p = (ITEM_ID_PERIDOT + gdata(GDATA_RAND_SEED_A)) \ 6
+	p = (468 + gdata(GDATA_RAND_SEED_A)) \ 6
 	iknownnameref(ITEM_ID_PERIDOT) = _namering(p) + strblank + stramulet
 	icolref(ITEM_ID_PERIDOT) = COLOR_DEFAULT
 	irandomname(ITEM_ID_PERIDOT) = 1
 	ilight(ITEM_ID_COMPOSITE_HELM) = LIGHT_TYPE_NONE
 	ialphanameref(ITEM_ID_COMPOSITE_HELM) = "ハイヘルム"
@@ -134717,11 +136985,11 @@
 	else {
 		ioriginalnameref(ITEM_ID_SPELLBOOK_MUTATION) = "mutation"
 		ioriginalnameref2(ITEM_ID_SPELLBOOK_MUTATION) = "spellbook"
 	}
 	ipicref(ITEM_ID_SPELLBOOK_MUTATION) = xy2pic(0, 13)
-	p = (ITEM_ID_SPELLBOOK_MUTATION + gdata(GDATA_RAND_SEED_A)) \ 6
+	p = (434 + gdata(GDATA_RAND_SEED_A)) \ 6
 	iknownnameref(ITEM_ID_SPELLBOOK_MUTATION) = _namespellbook(p) + strblank + strspellbook
 	icolref(ITEM_ID_SPELLBOOK_MUTATION) = _randcolor(p)
 	irandomname(ITEM_ID_SPELLBOOK_MUTATION) = 1
 	ilight(ITEM_ID_POTION_CURE_MUTATION) = LIGHT_TYPE_NONE
 	ialphanameref(ITEM_ID_POTION_CURE_MUTATION) = ""
@@ -134732,11 +137000,11 @@
 	else {
 		ioriginalnameref(ITEM_ID_POTION_CURE_MUTATION) = "cure mutation"
 		ioriginalnameref2(ITEM_ID_POTION_CURE_MUTATION) = "potion"
 	}
 	ipicref(ITEM_ID_POTION_CURE_MUTATION) = xy2pic(24, 10)
-	p = (ITEM_ID_POTION_CURE_MUTATION + gdata(GDATA_RAND_SEED_A)) \ 6
+	p = (433 + gdata(GDATA_RAND_SEED_A)) \ 6
 	iknownnameref(ITEM_ID_POTION_CURE_MUTATION) = _namepotion(p) + strblank + strpotion
 	icolref(ITEM_ID_POTION_CURE_MUTATION) = _randcolor(p)
 	irandomname(ITEM_ID_POTION_CURE_MUTATION) = 1
 	ilight(ITEM_ID_POTION_MUTATION) = LIGHT_TYPE_NONE
 	ialphanameref(ITEM_ID_POTION_MUTATION) = ""
@@ -134747,11 +137015,11 @@
 	else {
 		ioriginalnameref(ITEM_ID_POTION_MUTATION) = "mutation"
 		ioriginalnameref2(ITEM_ID_POTION_MUTATION) = "potion"
 	}
 	ipicref(ITEM_ID_POTION_MUTATION) = xy2pic(24, 10)
-	p = (ITEM_ID_POTION_MUTATION + gdata(GDATA_RAND_SEED_A)) \ 6
+	p = (432 + gdata(GDATA_RAND_SEED_A)) \ 6
 	iknownnameref(ITEM_ID_POTION_MUTATION) = _namepotion(p) + strblank + strpotion
 	icolref(ITEM_ID_POTION_MUTATION) = _randcolor(p)
 	irandomname(ITEM_ID_POTION_MUTATION) = 1
 	ilight(ITEM_ID_SCROLL_FAITH) = LIGHT_TYPE_NONE
 	ialphanameref(ITEM_ID_SCROLL_FAITH) = ""
@@ -134762,11 +137030,11 @@
 	else {
 		ioriginalnameref(ITEM_ID_SCROLL_FAITH) = "faith"
 		ioriginalnameref2(ITEM_ID_SCROLL_FAITH) = "scroll"
 	}
 	ipicref(ITEM_ID_SCROLL_FAITH) = xy2pic(8, 14)
-	p = (ITEM_ID_SCROLL_FAITH + gdata(GDATA_RAND_SEED_A)) \ 6
+	p = (431 + gdata(GDATA_RAND_SEED_A)) \ 6
 	iknownnameref(ITEM_ID_SCROLL_FAITH) = _namescroll(p) + strblank + strscroll
 	icolref(ITEM_ID_SCROLL_FAITH) = _randcolor(p)
 	irandomname(ITEM_ID_SCROLL_FAITH) = 1
 	ilight(ITEM_ID_SCROLL_GROWTH) = LIGHT_TYPE_NONE
 	ialphanameref(ITEM_ID_SCROLL_GROWTH) = ""
@@ -134777,11 +137045,11 @@
 	else {
 		ioriginalnameref(ITEM_ID_SCROLL_GROWTH) = "growth"
 		ioriginalnameref2(ITEM_ID_SCROLL_GROWTH) = "scroll"
 	}
 	ipicref(ITEM_ID_SCROLL_GROWTH) = xy2pic(8, 14)
-	p = (ITEM_ID_SCROLL_GROWTH + gdata(GDATA_RAND_SEED_A)) \ 6
+	p = (430 + gdata(GDATA_RAND_SEED_A)) \ 6
 	iknownnameref(ITEM_ID_SCROLL_GROWTH) = _namescroll(p) + strblank + strscroll
 	icolref(ITEM_ID_SCROLL_GROWTH) = _randcolor(p)
 	irandomname(ITEM_ID_SCROLL_GROWTH) = 1
 	ilight(ITEM_ID_POTION_WEAKEN_RESISTANCE) = LIGHT_TYPE_NONE
 	ialphanameref(ITEM_ID_POTION_WEAKEN_RESISTANCE) = ""
@@ -134792,11 +137060,11 @@
 	else {
 		ioriginalnameref(ITEM_ID_POTION_WEAKEN_RESISTANCE) = "weaken resistance"
 		ioriginalnameref2(ITEM_ID_POTION_WEAKEN_RESISTANCE) = "potion"
 	}
 	ipicref(ITEM_ID_POTION_WEAKEN_RESISTANCE) = xy2pic(24, 10)
-	p = (ITEM_ID_POTION_WEAKEN_RESISTANCE + gdata(GDATA_RAND_SEED_A)) \ 6
+	p = (429 + gdata(GDATA_RAND_SEED_A)) \ 6
 	iknownnameref(ITEM_ID_POTION_WEAKEN_RESISTANCE) = _namepotion(p) + strblank + strpotion
 	icolref(ITEM_ID_POTION_WEAKEN_RESISTANCE) = _randcolor(p)
 	irandomname(ITEM_ID_POTION_WEAKEN_RESISTANCE) = 1
 	ilight(ITEM_ID_SLEEPING_BAG) = LIGHT_TYPE_NONE
 	ialphanameref(ITEM_ID_SLEEPING_BAG) = ""
@@ -135015,11 +137283,11 @@
 	else {
 		ioriginalnameref(ITEM_ID_ROD_UNCURSE) = "uncurse"
 		ioriginalnameref2(ITEM_ID_ROD_UNCURSE) = "rod"
 	}
 	ipicref(ITEM_ID_ROD_UNCURSE) = xy2pic(9, 14)
-	p = (ITEM_ID_ROD_UNCURSE + gdata(GDATA_RAND_SEED_A)) \ 6
+	p = (412 + gdata(GDATA_RAND_SEED_A)) \ 6
 	iknownnameref(ITEM_ID_ROD_UNCURSE) = _namestaff(p) + strblank + strstaff
 	icolref(ITEM_ID_ROD_UNCURSE) = _randcolor(p)
 	irandomname(ITEM_ID_ROD_UNCURSE) = 1
 	ilight(ITEM_ID_SCROLL_DETECT_OBJECTS) = LIGHT_TYPE_NONE
 	ialphanameref(ITEM_ID_SCROLL_DETECT_OBJECTS) = ""
@@ -135030,11 +137298,11 @@
 	else {
 		ioriginalnameref(ITEM_ID_SCROLL_DETECT_OBJECTS) = "detect objects"
 		ioriginalnameref2(ITEM_ID_SCROLL_DETECT_OBJECTS) = "scroll"
 	}
 	ipicref(ITEM_ID_SCROLL_DETECT_OBJECTS) = xy2pic(8, 14)
-	p = (ITEM_ID_SCROLL_DETECT_OBJECTS + gdata(GDATA_RAND_SEED_A)) \ 6
+	p = (411 + gdata(GDATA_RAND_SEED_A)) \ 6
 	iknownnameref(ITEM_ID_SCROLL_DETECT_OBJECTS) = _namescroll(p) + strblank + strscroll
 	icolref(ITEM_ID_SCROLL_DETECT_OBJECTS) = _randcolor(p)
 	irandomname(ITEM_ID_SCROLL_DETECT_OBJECTS) = 1
 	ilight(ITEM_ID_SPELLBOOK_DETECT_OBJECTS) = LIGHT_TYPE_NONE
 	ialphanameref(ITEM_ID_SPELLBOOK_DETECT_OBJECTS) = ""
@@ -135045,11 +137313,11 @@
 	else {
 		ioriginalnameref(ITEM_ID_SPELLBOOK_DETECT_OBJECTS) = "detect objects"
 		ioriginalnameref2(ITEM_ID_SPELLBOOK_DETECT_OBJECTS) = "spellbook"
 	}
 	ipicref(ITEM_ID_SPELLBOOK_DETECT_OBJECTS) = xy2pic(0, 13)
-	p = (ITEM_ID_SPELLBOOK_DETECT_OBJECTS + gdata(GDATA_RAND_SEED_A)) \ 6
+	p = (410 + gdata(GDATA_RAND_SEED_A)) \ 6
 	iknownnameref(ITEM_ID_SPELLBOOK_DETECT_OBJECTS) = _namespellbook(p) + strblank + strspellbook
 	icolref(ITEM_ID_SPELLBOOK_DETECT_OBJECTS) = _randcolor(p)
 	irandomname(ITEM_ID_SPELLBOOK_DETECT_OBJECTS) = 1
 	ilight(ITEM_ID_CARGO_INNER_TUBE) = LIGHT_TYPE_NONE
 	ialphanameref(ITEM_ID_CARGO_INNER_TUBE) = ""
@@ -135203,11 +137471,11 @@
 	else {
 		ioriginalnameref(ITEM_ID_SCROLL_KNOWLEDGE) = "knowledge"
 		ioriginalnameref2(ITEM_ID_SCROLL_KNOWLEDGE) = "scroll"
 	}
 	ipicref(ITEM_ID_SCROLL_KNOWLEDGE) = xy2pic(8, 14)
-	p = (ITEM_ID_SCROLL_KNOWLEDGE + gdata(GDATA_RAND_SEED_A)) \ 6
+	p = (398 + gdata(GDATA_RAND_SEED_A)) \ 6
 	iknownnameref(ITEM_ID_SCROLL_KNOWLEDGE) = _namescroll(p) + strblank + strscroll
 	icolref(ITEM_ID_SCROLL_KNOWLEDGE) = _randcolor(p)
 	irandomname(ITEM_ID_SCROLL_KNOWLEDGE) = 1
 	ilight(ITEM_ID_SPELLBOOK_KNOWLEDGE) = LIGHT_TYPE_NONE
 	ialphanameref(ITEM_ID_SPELLBOOK_KNOWLEDGE) = ""
@@ -135218,11 +137486,11 @@
 	else {
 		ioriginalnameref(ITEM_ID_SPELLBOOK_KNOWLEDGE) = "knowledge"
 		ioriginalnameref2(ITEM_ID_SPELLBOOK_KNOWLEDGE) = "spellbook"
 	}
 	ipicref(ITEM_ID_SPELLBOOK_KNOWLEDGE) = xy2pic(0, 13)
-	p = (ITEM_ID_SPELLBOOK_KNOWLEDGE + gdata(GDATA_RAND_SEED_A)) \ 6
+	p = (397 + gdata(GDATA_RAND_SEED_A)) \ 6
 	iknownnameref(ITEM_ID_SPELLBOOK_KNOWLEDGE) = _namespellbook(p) + strblank + strspellbook
 	icolref(ITEM_ID_SPELLBOOK_KNOWLEDGE) = _randcolor(p)
 	irandomname(ITEM_ID_SPELLBOOK_KNOWLEDGE) = 1
 	ilight(ITEM_ID_SPELLBOOK_NIGHTMARE) = LIGHT_TYPE_NONE
 	ialphanameref(ITEM_ID_SPELLBOOK_NIGHTMARE) = ""
@@ -135233,11 +137501,11 @@
 	else {
 		ioriginalnameref(ITEM_ID_SPELLBOOK_NIGHTMARE) = "nightmare"
 		ioriginalnameref2(ITEM_ID_SPELLBOOK_NIGHTMARE) = "spellbook"
 	}
 	ipicref(ITEM_ID_SPELLBOOK_NIGHTMARE) = xy2pic(0, 13)
-	p = (ITEM_ID_SPELLBOOK_NIGHTMARE + gdata(GDATA_RAND_SEED_A)) \ 6
+	p = (396 + gdata(GDATA_RAND_SEED_A)) \ 6
 	iknownnameref(ITEM_ID_SPELLBOOK_NIGHTMARE) = _namespellbook(p) + strblank + strspellbook
 	icolref(ITEM_ID_SPELLBOOK_NIGHTMARE) = _randcolor(p)
 	irandomname(ITEM_ID_SPELLBOOK_NIGHTMARE) = 1
 	ilight(ITEM_ID_SCROLL_GAIN_MATERIAL) = LIGHT_TYPE_NONE
 	ialphanameref(ITEM_ID_SCROLL_GAIN_MATERIAL) = ""
@@ -135248,11 +137516,11 @@
 	else {
 		ioriginalnameref(ITEM_ID_SCROLL_GAIN_MATERIAL) = "gain material"
 		ioriginalnameref2(ITEM_ID_SCROLL_GAIN_MATERIAL) = "scroll"
 	}
 	ipicref(ITEM_ID_SCROLL_GAIN_MATERIAL) = xy2pic(8, 14)
-	p = (ITEM_ID_SCROLL_GAIN_MATERIAL + gdata(GDATA_RAND_SEED_A)) \ 6
+	p = (395 + gdata(GDATA_RAND_SEED_A)) \ 6
 	iknownnameref(ITEM_ID_SCROLL_GAIN_MATERIAL) = _namescroll(p) + strblank + strscroll
 	icolref(ITEM_ID_SCROLL_GAIN_MATERIAL) = _randcolor(p)
 	irandomname(ITEM_ID_SCROLL_GAIN_MATERIAL) = 1
 	ilight(ITEM_ID_MATERIAL_BOX) = LIGHT_TYPE_NONE
 	ialphanameref(ITEM_ID_MATERIAL_BOX) = ""
@@ -135307,11 +137575,11 @@
 	else {
 		ioriginalnameref(ITEM_ID_ROD_MANA) = "mana"
 		ioriginalnameref2(ITEM_ID_ROD_MANA) = "rod"
 	}
 	ipicref(ITEM_ID_ROD_MANA) = xy2pic(9, 14)
-	p = (ITEM_ID_ROD_MANA + gdata(GDATA_RAND_SEED_A)) \ 6
+	p = (391 + gdata(GDATA_RAND_SEED_A)) \ 6
 	iknownnameref(ITEM_ID_ROD_MANA) = _namestaff(p) + strblank + strstaff
 	icolref(ITEM_ID_ROD_MANA) = _randcolor(p)
 	irandomname(ITEM_ID_ROD_MANA) = 1
 	ilight(ITEM_ID_SCROLL_MANA) = LIGHT_TYPE_NONE
 	ialphanameref(ITEM_ID_SCROLL_MANA) = ""
@@ -135322,11 +137590,11 @@
 	else {
 		ioriginalnameref(ITEM_ID_SCROLL_MANA) = "mana"
 		ioriginalnameref2(ITEM_ID_SCROLL_MANA) = "scroll"
 	}
 	ipicref(ITEM_ID_SCROLL_MANA) = xy2pic(8, 14)
-	p = (ITEM_ID_SCROLL_MANA + gdata(GDATA_RAND_SEED_A)) \ 6
+	p = (390 + gdata(GDATA_RAND_SEED_A)) \ 6
 	iknownnameref(ITEM_ID_SCROLL_MANA) = _namescroll(p) + strblank + strscroll
 	icolref(ITEM_ID_SCROLL_MANA) = _randcolor(p)
 	irandomname(ITEM_ID_SCROLL_MANA) = 1
 	ilight(ITEM_ID_SCROLL_HOLY_RAIN) = LIGHT_TYPE_NONE
 	ialphanameref(ITEM_ID_SCROLL_HOLY_RAIN) = ""
@@ -135337,11 +137605,11 @@
 	else {
 		ioriginalnameref(ITEM_ID_SCROLL_HOLY_RAIN) = "holy rain"
 		ioriginalnameref2(ITEM_ID_SCROLL_HOLY_RAIN) = "scroll"
 	}
 	ipicref(ITEM_ID_SCROLL_HOLY_RAIN) = xy2pic(8, 14)
-	p = (ITEM_ID_SCROLL_HOLY_RAIN + gdata(GDATA_RAND_SEED_A)) \ 6
+	p = (389 + gdata(GDATA_RAND_SEED_A)) \ 6
 	iknownnameref(ITEM_ID_SCROLL_HOLY_RAIN) = _namescroll(p) + strblank + strscroll
 	icolref(ITEM_ID_SCROLL_HOLY_RAIN) = _randcolor(p)
 	irandomname(ITEM_ID_SCROLL_HOLY_RAIN) = 1
 	ilight(ITEM_ID_SCROLL_HOLY_LIGHT) = LIGHT_TYPE_NONE
 	ialphanameref(ITEM_ID_SCROLL_HOLY_LIGHT) = ""
@@ -135352,11 +137620,11 @@
 	else {
 		ioriginalnameref(ITEM_ID_SCROLL_HOLY_LIGHT) = "holy light"
 		ioriginalnameref2(ITEM_ID_SCROLL_HOLY_LIGHT) = "scroll"
 	}
 	ipicref(ITEM_ID_SCROLL_HOLY_LIGHT) = xy2pic(8, 14)
-	p = (ITEM_ID_SCROLL_HOLY_LIGHT + gdata(GDATA_RAND_SEED_A)) \ 6
+	p = (388 + gdata(GDATA_RAND_SEED_A)) \ 6
 	iknownnameref(ITEM_ID_SCROLL_HOLY_LIGHT) = _namescroll(p) + strblank + strscroll
 	icolref(ITEM_ID_SCROLL_HOLY_LIGHT) = _randcolor(p)
 	irandomname(ITEM_ID_SCROLL_HOLY_LIGHT) = 1
 	ilight(ITEM_ID_SPELLBOOK_HOLY_RAIN) = LIGHT_TYPE_NONE
 	ialphanameref(ITEM_ID_SPELLBOOK_HOLY_RAIN) = ""
@@ -135367,11 +137635,11 @@
 	else {
 		ioriginalnameref(ITEM_ID_SPELLBOOK_HOLY_RAIN) = "holy rain"
 		ioriginalnameref2(ITEM_ID_SPELLBOOK_HOLY_RAIN) = "spellbook"
 	}
 	ipicref(ITEM_ID_SPELLBOOK_HOLY_RAIN) = xy2pic(0, 13)
-	p = (ITEM_ID_SPELLBOOK_HOLY_RAIN + gdata(GDATA_RAND_SEED_A)) \ 6
+	p = (387 + gdata(GDATA_RAND_SEED_A)) \ 6
 	iknownnameref(ITEM_ID_SPELLBOOK_HOLY_RAIN) = _namespellbook(p) + strblank + strspellbook
 	icolref(ITEM_ID_SPELLBOOK_HOLY_RAIN) = _randcolor(p)
 	irandomname(ITEM_ID_SPELLBOOK_HOLY_RAIN) = 1
 	ilight(ITEM_ID_SPELLBOOK_HOLY_LIGHT) = LIGHT_TYPE_NONE
 	ialphanameref(ITEM_ID_SPELLBOOK_HOLY_LIGHT) = ""
@@ -135382,11 +137650,11 @@
 	else {
 		ioriginalnameref(ITEM_ID_SPELLBOOK_HOLY_LIGHT) = "holy light"
 		ioriginalnameref2(ITEM_ID_SPELLBOOK_HOLY_LIGHT) = "spellbook"
 	}
 	ipicref(ITEM_ID_SPELLBOOK_HOLY_LIGHT) = xy2pic(0, 13)
-	p = (ITEM_ID_SPELLBOOK_HOLY_LIGHT + gdata(GDATA_RAND_SEED_A)) \ 6
+	p = (386 + gdata(GDATA_RAND_SEED_A)) \ 6
 	iknownnameref(ITEM_ID_SPELLBOOK_HOLY_LIGHT) = _namespellbook(p) + strblank + strspellbook
 	icolref(ITEM_ID_SPELLBOOK_HOLY_LIGHT) = _randcolor(p)
 	irandomname(ITEM_ID_SPELLBOOK_HOLY_LIGHT) = 1
 	ilight(ITEM_ID_ROD_HOLY_LIGHT) = LIGHT_TYPE_NONE
 	ialphanameref(ITEM_ID_ROD_HOLY_LIGHT) = ""
@@ -135397,11 +137665,11 @@
 	else {
 		ioriginalnameref(ITEM_ID_ROD_HOLY_LIGHT) = "holy light"
 		ioriginalnameref2(ITEM_ID_ROD_HOLY_LIGHT) = "rod"
 	}
 	ipicref(ITEM_ID_ROD_HOLY_LIGHT) = xy2pic(9, 14)
-	p = (ITEM_ID_ROD_HOLY_LIGHT + gdata(GDATA_RAND_SEED_A)) \ 6
+	p = (385 + gdata(GDATA_RAND_SEED_A)) \ 6
 	iknownnameref(ITEM_ID_ROD_HOLY_LIGHT) = _namestaff(p) + strblank + strstaff
 	icolref(ITEM_ID_ROD_HOLY_LIGHT) = _randcolor(p)
 	irandomname(ITEM_ID_ROD_HOLY_LIGHT) = 1
 	ilight(ITEM_ID_SCROLL_HOLY_VEIL) = LIGHT_TYPE_NONE
 	ialphanameref(ITEM_ID_SCROLL_HOLY_VEIL) = ""
@@ -135412,11 +137680,11 @@
 	else {
 		ioriginalnameref(ITEM_ID_SCROLL_HOLY_VEIL) = "holy veil"
 		ioriginalnameref2(ITEM_ID_SCROLL_HOLY_VEIL) = "scroll"
 	}
 	ipicref(ITEM_ID_SCROLL_HOLY_VEIL) = xy2pic(8, 14)
-	p = (ITEM_ID_SCROLL_HOLY_VEIL + gdata(GDATA_RAND_SEED_A)) \ 6
+	p = (384 + gdata(GDATA_RAND_SEED_A)) \ 6
 	iknownnameref(ITEM_ID_SCROLL_HOLY_VEIL) = _namescroll(p) + strblank + strscroll
 	icolref(ITEM_ID_SCROLL_HOLY_VEIL) = _randcolor(p)
 	irandomname(ITEM_ID_SCROLL_HOLY_VEIL) = 1
 	ilight(ITEM_ID_SPELLBOOK_HOLY_VEIL) = LIGHT_TYPE_NONE
 	ialphanameref(ITEM_ID_SPELLBOOK_HOLY_VEIL) = ""
@@ -135427,11 +137695,11 @@
 	else {
 		ioriginalnameref(ITEM_ID_SPELLBOOK_HOLY_VEIL) = "holy veil"
 		ioriginalnameref2(ITEM_ID_SPELLBOOK_HOLY_VEIL) = "spellbook"
 	}
 	ipicref(ITEM_ID_SPELLBOOK_HOLY_VEIL) = xy2pic(0, 13)
-	p = (ITEM_ID_SPELLBOOK_HOLY_VEIL + gdata(GDATA_RAND_SEED_A)) \ 6
+	p = (383 + gdata(GDATA_RAND_SEED_A)) \ 6
 	iknownnameref(ITEM_ID_SPELLBOOK_HOLY_VEIL) = _namespellbook(p) + strblank + strspellbook
 	icolref(ITEM_ID_SPELLBOOK_HOLY_VEIL) = _randcolor(p)
 	irandomname(ITEM_ID_SPELLBOOK_HOLY_VEIL) = 1
 	ilight(ITEM_ID_POTION_WEAKNESS) = LIGHT_TYPE_NONE
 	ialphanameref(ITEM_ID_POTION_WEAKNESS) = ""
@@ -135442,11 +137710,11 @@
 	else {
 		ioriginalnameref(ITEM_ID_POTION_WEAKNESS) = "weakness"
 		ioriginalnameref2(ITEM_ID_POTION_WEAKNESS) = "potion"
 	}
 	ipicref(ITEM_ID_POTION_WEAKNESS) = xy2pic(24, 10)
-	p = (ITEM_ID_POTION_WEAKNESS + gdata(GDATA_RAND_SEED_A)) \ 6
+	p = (382 + gdata(GDATA_RAND_SEED_A)) \ 6
 	iknownnameref(ITEM_ID_POTION_WEAKNESS) = _namepotion(p) + strblank + strpotion
 	icolref(ITEM_ID_POTION_WEAKNESS) = _randcolor(p)
 	irandomname(ITEM_ID_POTION_WEAKNESS) = 1
 	ilight(ITEM_ID_SPELLBOOK_ELEMENTAL_SCAR) = LIGHT_TYPE_NONE
 	ialphanameref(ITEM_ID_SPELLBOOK_ELEMENTAL_SCAR) = ""
@@ -135457,11 +137725,11 @@
 	else {
 		ioriginalnameref(ITEM_ID_SPELLBOOK_ELEMENTAL_SCAR) = "elemental scar"
 		ioriginalnameref2(ITEM_ID_SPELLBOOK_ELEMENTAL_SCAR) = "spellbook"
 	}
 	ipicref(ITEM_ID_SPELLBOOK_ELEMENTAL_SCAR) = xy2pic(0, 13)
-	p = (ITEM_ID_SPELLBOOK_ELEMENTAL_SCAR + gdata(GDATA_RAND_SEED_A)) \ 6
+	p = (381 + gdata(GDATA_RAND_SEED_A)) \ 6
 	iknownnameref(ITEM_ID_SPELLBOOK_ELEMENTAL_SCAR) = _namespellbook(p) + strblank + strspellbook
 	icolref(ITEM_ID_SPELLBOOK_ELEMENTAL_SCAR) = _randcolor(p)
 	irandomname(ITEM_ID_SPELLBOOK_ELEMENTAL_SCAR) = 1
 	ilight(ITEM_ID_SPELLBOOK_WEAKNESS) = LIGHT_TYPE_NONE
 	ialphanameref(ITEM_ID_SPELLBOOK_WEAKNESS) = ""
@@ -135472,11 +137740,11 @@
 	else {
 		ioriginalnameref(ITEM_ID_SPELLBOOK_WEAKNESS) = "weakness"
 		ioriginalnameref2(ITEM_ID_SPELLBOOK_WEAKNESS) = "spellbook"
 	}
 	ipicref(ITEM_ID_SPELLBOOK_WEAKNESS) = xy2pic(0, 13)
-	p = (ITEM_ID_SPELLBOOK_WEAKNESS + gdata(GDATA_RAND_SEED_A)) \ 6
+	p = (380 + gdata(GDATA_RAND_SEED_A)) \ 6
 	iknownnameref(ITEM_ID_SPELLBOOK_WEAKNESS) = _namespellbook(p) + strblank + strspellbook
 	icolref(ITEM_ID_SPELLBOOK_WEAKNESS) = _randcolor(p)
 	irandomname(ITEM_ID_SPELLBOOK_WEAKNESS) = 1
 	ilight(ITEM_ID_POTION_HERO) = LIGHT_TYPE_NONE
 	ialphanameref(ITEM_ID_POTION_HERO) = ""
@@ -135487,11 +137755,11 @@
 	else {
 		ioriginalnameref(ITEM_ID_POTION_HERO) = "hero"
 		ioriginalnameref2(ITEM_ID_POTION_HERO) = "potion"
 	}
 	ipicref(ITEM_ID_POTION_HERO) = xy2pic(24, 10)
-	p = (ITEM_ID_POTION_HERO + gdata(GDATA_RAND_SEED_A)) \ 6
+	p = (379 + gdata(GDATA_RAND_SEED_A)) \ 6
 	iknownnameref(ITEM_ID_POTION_HERO) = _namepotion(p) + strblank + strpotion
 	icolref(ITEM_ID_POTION_HERO) = _randcolor(p)
 	irandomname(ITEM_ID_POTION_HERO) = 1
 	ilight(ITEM_ID_SPELLBOOK_HERO) = LIGHT_TYPE_NONE
 	ialphanameref(ITEM_ID_SPELLBOOK_HERO) = ""
@@ -135502,11 +137770,11 @@
 	else {
 		ioriginalnameref(ITEM_ID_SPELLBOOK_HERO) = "hero"
 		ioriginalnameref2(ITEM_ID_SPELLBOOK_HERO) = "spellbook"
 	}
 	ipicref(ITEM_ID_SPELLBOOK_HERO) = xy2pic(0, 13)
-	p = (ITEM_ID_SPELLBOOK_HERO + gdata(GDATA_RAND_SEED_A)) \ 6
+	p = (378 + gdata(GDATA_RAND_SEED_A)) \ 6
 	iknownnameref(ITEM_ID_SPELLBOOK_HERO) = _namespellbook(p) + strblank + strspellbook
 	icolref(ITEM_ID_SPELLBOOK_HERO) = _randcolor(p)
 	irandomname(ITEM_ID_SPELLBOOK_HERO) = 1
 	ilight(ITEM_ID_ROD_SPEED) = LIGHT_TYPE_NONE
 	ialphanameref(ITEM_ID_ROD_SPEED) = ""
@@ -135517,11 +137785,11 @@
 	else {
 		ioriginalnameref(ITEM_ID_ROD_SPEED) = "speed"
 		ioriginalnameref2(ITEM_ID_ROD_SPEED) = "rod"
 	}
 	ipicref(ITEM_ID_ROD_SPEED) = xy2pic(9, 14)
-	p = (ITEM_ID_ROD_SPEED + gdata(GDATA_RAND_SEED_A)) \ 6
+	p = (377 + gdata(GDATA_RAND_SEED_A)) \ 6
 	iknownnameref(ITEM_ID_ROD_SPEED) = _namestaff(p) + strblank + strstaff
 	icolref(ITEM_ID_ROD_SPEED) = _randcolor(p)
 	irandomname(ITEM_ID_ROD_SPEED) = 1
 	ilight(ITEM_ID_POTION_SLOW) = LIGHT_TYPE_NONE
 	ialphanameref(ITEM_ID_POTION_SLOW) = ""
@@ -135532,11 +137800,11 @@
 	else {
 		ioriginalnameref(ITEM_ID_POTION_SLOW) = "slow"
 		ioriginalnameref2(ITEM_ID_POTION_SLOW) = "potion"
 	}
 	ipicref(ITEM_ID_POTION_SLOW) = xy2pic(24, 10)
-	p = (ITEM_ID_POTION_SLOW + gdata(GDATA_RAND_SEED_A)) \ 6
+	p = (376 + gdata(GDATA_RAND_SEED_A)) \ 6
 	iknownnameref(ITEM_ID_POTION_SLOW) = _namepotion(p) + strblank + strpotion
 	icolref(ITEM_ID_POTION_SLOW) = _randcolor(p)
 	irandomname(ITEM_ID_POTION_SLOW) = 1
 	ilight(ITEM_ID_POTION_SPEED) = LIGHT_TYPE_NONE
 	ialphanameref(ITEM_ID_POTION_SPEED) = ""
@@ -135547,11 +137815,11 @@
 	else {
 		ioriginalnameref(ITEM_ID_POTION_SPEED) = "speed"
 		ioriginalnameref2(ITEM_ID_POTION_SPEED) = "potion"
 	}
 	ipicref(ITEM_ID_POTION_SPEED) = xy2pic(24, 10)
-	p = (ITEM_ID_POTION_SPEED + gdata(GDATA_RAND_SEED_A)) \ 6
+	p = (375 + gdata(GDATA_RAND_SEED_A)) \ 6
 	iknownnameref(ITEM_ID_POTION_SPEED) = _namepotion(p) + strblank + strpotion
 	icolref(ITEM_ID_POTION_SPEED) = _randcolor(p)
 	irandomname(ITEM_ID_POTION_SPEED) = 1
 	ilight(ITEM_ID_SPELLBOOK_SLOW) = LIGHT_TYPE_NONE
 	ialphanameref(ITEM_ID_SPELLBOOK_SLOW) = ""
@@ -135562,11 +137830,11 @@
 	else {
 		ioriginalnameref(ITEM_ID_SPELLBOOK_SLOW) = "slow"
 		ioriginalnameref2(ITEM_ID_SPELLBOOK_SLOW) = "spellbook"
 	}
 	ipicref(ITEM_ID_SPELLBOOK_SLOW) = xy2pic(0, 13)
-	p = (ITEM_ID_SPELLBOOK_SLOW + gdata(GDATA_RAND_SEED_A)) \ 6
+	p = (374 + gdata(GDATA_RAND_SEED_A)) \ 6
 	iknownnameref(ITEM_ID_SPELLBOOK_SLOW) = _namespellbook(p) + strblank + strspellbook
 	icolref(ITEM_ID_SPELLBOOK_SLOW) = _randcolor(p)
 	irandomname(ITEM_ID_SPELLBOOK_SLOW) = 1
 	ilight(ITEM_ID_SPELLBOOK_SPEED) = LIGHT_TYPE_NONE
 	ialphanameref(ITEM_ID_SPELLBOOK_SPEED) = ""
@@ -135577,11 +137845,11 @@
 	else {
 		ioriginalnameref(ITEM_ID_SPELLBOOK_SPEED) = "speed"
 		ioriginalnameref2(ITEM_ID_SPELLBOOK_SPEED) = "spellbook"
 	}
 	ipicref(ITEM_ID_SPELLBOOK_SPEED) = xy2pic(0, 13)
-	p = (ITEM_ID_SPELLBOOK_SPEED + gdata(GDATA_RAND_SEED_A)) \ 6
+	p = (373 + gdata(GDATA_RAND_SEED_A)) \ 6
 	iknownnameref(ITEM_ID_SPELLBOOK_SPEED) = _namespellbook(p) + strblank + strspellbook
 	icolref(ITEM_ID_SPELLBOOK_SPEED) = _randcolor(p)
 	irandomname(ITEM_ID_SPELLBOOK_SPEED) = 1
 	ilight(ITEM_ID_POTION_RESISTANCE) = LIGHT_TYPE_NONE
 	ialphanameref(ITEM_ID_POTION_RESISTANCE) = ""
@@ -135592,11 +137860,11 @@
 	else {
 		ioriginalnameref(ITEM_ID_POTION_RESISTANCE) = "resistance"
 		ioriginalnameref2(ITEM_ID_POTION_RESISTANCE) = "potion"
 	}
 	ipicref(ITEM_ID_POTION_RESISTANCE) = xy2pic(24, 10)
-	p = (ITEM_ID_POTION_RESISTANCE + gdata(GDATA_RAND_SEED_A)) \ 6
+	p = (372 + gdata(GDATA_RAND_SEED_A)) \ 6
 	iknownnameref(ITEM_ID_POTION_RESISTANCE) = _namepotion(p) + strblank + strpotion
 	icolref(ITEM_ID_POTION_RESISTANCE) = _randcolor(p)
 	irandomname(ITEM_ID_POTION_RESISTANCE) = 1
 	ilight(ITEM_ID_SPELLBOOK_RESISTANCE) = LIGHT_TYPE_NONE
 	ialphanameref(ITEM_ID_SPELLBOOK_RESISTANCE) = ""
@@ -135607,11 +137875,11 @@
 	else {
 		ioriginalnameref(ITEM_ID_SPELLBOOK_RESISTANCE) = "resistance"
 		ioriginalnameref2(ITEM_ID_SPELLBOOK_RESISTANCE) = "spellbook"
 	}
 	ipicref(ITEM_ID_SPELLBOOK_RESISTANCE) = xy2pic(0, 13)
-	p = (ITEM_ID_SPELLBOOK_RESISTANCE + gdata(GDATA_RAND_SEED_A)) \ 6
+	p = (371 + gdata(GDATA_RAND_SEED_A)) \ 6
 	iknownnameref(ITEM_ID_SPELLBOOK_RESISTANCE) = _namespellbook(p) + strblank + strspellbook
 	icolref(ITEM_ID_SPELLBOOK_RESISTANCE) = _randcolor(p)
 	irandomname(ITEM_ID_SPELLBOOK_RESISTANCE) = 1
 	ilight(ITEM_ID_POTION_TROLL_BLOOD) = LIGHT_TYPE_NONE
 	ialphanameref(ITEM_ID_POTION_TROLL_BLOOD) = ""
@@ -135622,11 +137890,11 @@
 	else {
 		ioriginalnameref(ITEM_ID_POTION_TROLL_BLOOD) = "troll blood"
 		ioriginalnameref2(ITEM_ID_POTION_TROLL_BLOOD) = "potion"
 	}
 	ipicref(ITEM_ID_POTION_TROLL_BLOOD) = xy2pic(24, 10)
-	p = (ITEM_ID_POTION_TROLL_BLOOD + gdata(GDATA_RAND_SEED_A)) \ 6
+	p = (370 + gdata(GDATA_RAND_SEED_A)) \ 6
 	iknownnameref(ITEM_ID_POTION_TROLL_BLOOD) = _namepotion(p) + strblank + strpotion
 	icolref(ITEM_ID_POTION_TROLL_BLOOD) = _randcolor(p)
 	irandomname(ITEM_ID_POTION_TROLL_BLOOD) = 1
 	ilight(ITEM_ID_SPELLBOOK_REGENERATION) = LIGHT_TYPE_NONE
 	ialphanameref(ITEM_ID_SPELLBOOK_REGENERATION) = ""
@@ -135637,11 +137905,11 @@
 	else {
 		ioriginalnameref(ITEM_ID_SPELLBOOK_REGENERATION) = "regeneration"
 		ioriginalnameref2(ITEM_ID_SPELLBOOK_REGENERATION) = "spellbook"
 	}
 	ipicref(ITEM_ID_SPELLBOOK_REGENERATION) = xy2pic(0, 13)
-	p = (ITEM_ID_SPELLBOOK_REGENERATION + gdata(GDATA_RAND_SEED_A)) \ 6
+	p = (369 + gdata(GDATA_RAND_SEED_A)) \ 6
 	iknownnameref(ITEM_ID_SPELLBOOK_REGENERATION) = _namespellbook(p) + strblank + strspellbook
 	icolref(ITEM_ID_SPELLBOOK_REGENERATION) = _randcolor(p)
 	irandomname(ITEM_ID_SPELLBOOK_REGENERATION) = 1
 	ilight(ITEM_ID_POTION_SILENCE) = LIGHT_TYPE_NONE
 	ialphanameref(ITEM_ID_POTION_SILENCE) = ""
@@ -135652,11 +137920,11 @@
 	else {
 		ioriginalnameref(ITEM_ID_POTION_SILENCE) = "silence"
 		ioriginalnameref2(ITEM_ID_POTION_SILENCE) = "potion"
 	}
 	ipicref(ITEM_ID_POTION_SILENCE) = xy2pic(24, 10)
-	p = (ITEM_ID_POTION_SILENCE + gdata(GDATA_RAND_SEED_A)) \ 6
+	p = (368 + gdata(GDATA_RAND_SEED_A)) \ 6
 	iknownnameref(ITEM_ID_POTION_SILENCE) = _namepotion(p) + strblank + strpotion
 	icolref(ITEM_ID_POTION_SILENCE) = _randcolor(p)
 	irandomname(ITEM_ID_POTION_SILENCE) = 1
 	ilight(ITEM_ID_SPELLBOOK_SILENCE) = LIGHT_TYPE_NONE
 	ialphanameref(ITEM_ID_SPELLBOOK_SILENCE) = ""
@@ -135667,11 +137935,11 @@
 	else {
 		ioriginalnameref(ITEM_ID_SPELLBOOK_SILENCE) = "silence"
 		ioriginalnameref2(ITEM_ID_SPELLBOOK_SILENCE) = "spellbook"
 	}
 	ipicref(ITEM_ID_SPELLBOOK_SILENCE) = xy2pic(0, 13)
-	p = (ITEM_ID_SPELLBOOK_SILENCE + gdata(GDATA_RAND_SEED_A)) \ 6
+	p = (367 + gdata(GDATA_RAND_SEED_A)) \ 6
 	iknownnameref(ITEM_ID_SPELLBOOK_SILENCE) = _namespellbook(p) + strblank + strspellbook
 	icolref(ITEM_ID_SPELLBOOK_SILENCE) = _randcolor(p)
 	irandomname(ITEM_ID_SPELLBOOK_SILENCE) = 1
 	ilight(ITEM_ID_ROD_SILENCE) = LIGHT_TYPE_NONE
 	ialphanameref(ITEM_ID_ROD_SILENCE) = ""
@@ -135682,11 +137950,11 @@
 	else {
 		ioriginalnameref(ITEM_ID_ROD_SILENCE) = "silence"
 		ioriginalnameref2(ITEM_ID_ROD_SILENCE) = "rod"
 	}
 	ipicref(ITEM_ID_ROD_SILENCE) = xy2pic(9, 14)
-	p = (ITEM_ID_ROD_SILENCE + gdata(GDATA_RAND_SEED_A)) \ 6
+	p = (366 + gdata(GDATA_RAND_SEED_A)) \ 6
 	iknownnameref(ITEM_ID_ROD_SILENCE) = _namestaff(p) + strblank + strstaff
 	icolref(ITEM_ID_ROD_SILENCE) = _randcolor(p)
 	irandomname(ITEM_ID_ROD_SILENCE) = 1
 	ilight(ITEM_ID_SPELLBOOK_HOLY_SHIELD) = LIGHT_TYPE_NONE
 	ialphanameref(ITEM_ID_SPELLBOOK_HOLY_SHIELD) = ""
@@ -135697,11 +137965,11 @@
 	else {
 		ioriginalnameref(ITEM_ID_SPELLBOOK_HOLY_SHIELD) = "holy shield"
 		ioriginalnameref2(ITEM_ID_SPELLBOOK_HOLY_SHIELD) = "spellbook"
 	}
 	ipicref(ITEM_ID_SPELLBOOK_HOLY_SHIELD) = xy2pic(0, 13)
-	p = (ITEM_ID_SPELLBOOK_HOLY_SHIELD + gdata(GDATA_RAND_SEED_A)) \ 6
+	p = (365 + gdata(GDATA_RAND_SEED_A)) \ 6
 	iknownnameref(ITEM_ID_SPELLBOOK_HOLY_SHIELD) = _namespellbook(p) + strblank + strspellbook
 	icolref(ITEM_ID_SPELLBOOK_HOLY_SHIELD) = _randcolor(p)
 	irandomname(ITEM_ID_SPELLBOOK_HOLY_SHIELD) = 1
 	ilight(ITEM_ID_POTION_DEFENDER) = LIGHT_TYPE_NONE
 	ialphanameref(ITEM_ID_POTION_DEFENDER) = ""
@@ -135712,11 +137980,11 @@
 	else {
 		ioriginalnameref(ITEM_ID_POTION_DEFENDER) = "defender"
 		ioriginalnameref2(ITEM_ID_POTION_DEFENDER) = "potion"
 	}
 	ipicref(ITEM_ID_POTION_DEFENDER) = xy2pic(24, 10)
-	p = (ITEM_ID_POTION_DEFENDER + gdata(GDATA_RAND_SEED_A)) \ 6
+	p = (364 + gdata(GDATA_RAND_SEED_A)) \ 6
 	iknownnameref(ITEM_ID_POTION_DEFENDER) = _namepotion(p) + strblank + strpotion
 	icolref(ITEM_ID_POTION_DEFENDER) = _randcolor(p)
 	irandomname(ITEM_ID_POTION_DEFENDER) = 1
 	ilight(ITEM_ID_SCROLL_VANISH_CURSE) = LIGHT_TYPE_NONE
 	ialphanameref(ITEM_ID_SCROLL_VANISH_CURSE) = ""
@@ -135727,11 +137995,11 @@
 	else {
 		ioriginalnameref(ITEM_ID_SCROLL_VANISH_CURSE) = "vanish curse"
 		ioriginalnameref2(ITEM_ID_SCROLL_VANISH_CURSE) = "scroll"
 	}
 	ipicref(ITEM_ID_SCROLL_VANISH_CURSE) = xy2pic(8, 14)
-	p = (ITEM_ID_SCROLL_VANISH_CURSE + gdata(GDATA_RAND_SEED_A)) \ 6
+	p = (363 + gdata(GDATA_RAND_SEED_A)) \ 6
 	iknownnameref(ITEM_ID_SCROLL_VANISH_CURSE) = _namescroll(p) + strblank + strscroll
 	icolref(ITEM_ID_SCROLL_VANISH_CURSE) = _randcolor(p)
 	irandomname(ITEM_ID_SCROLL_VANISH_CURSE) = 1
 	ilight(ITEM_ID_SCROLL_GREATER_IDENTIFY) = LIGHT_TYPE_NONE
 	ialphanameref(ITEM_ID_SCROLL_GREATER_IDENTIFY) = ""
@@ -135742,11 +138010,11 @@
 	else {
 		ioriginalnameref(ITEM_ID_SCROLL_GREATER_IDENTIFY) = "greater identify"
 		ioriginalnameref2(ITEM_ID_SCROLL_GREATER_IDENTIFY) = "scroll"
 	}
 	ipicref(ITEM_ID_SCROLL_GREATER_IDENTIFY) = xy2pic(8, 14)
-	p = (ITEM_ID_SCROLL_GREATER_IDENTIFY + gdata(GDATA_RAND_SEED_A)) \ 6
+	p = (362 + gdata(GDATA_RAND_SEED_A)) \ 6
 	iknownnameref(ITEM_ID_SCROLL_GREATER_IDENTIFY) = _namescroll(p) + strblank + strscroll
 	icolref(ITEM_ID_SCROLL_GREATER_IDENTIFY) = _randcolor(p)
 	irandomname(ITEM_ID_SCROLL_GREATER_IDENTIFY) = 1
 	ilight(ITEM_ID_SHOPKEEPERS_TRUNK) = LIGHT_TYPE_NONE
 	ialphanameref(ITEM_ID_SHOPKEEPERS_TRUNK) = ""
@@ -136667,11 +138935,11 @@
 	iorgweight(ITEM_ID_RACK_ACCESSORIES) = 7500
 	if ( jp ) {
 		ioriginalnameref(ITEM_ID_RACK_ACCESSORIES) = "装飾品の棚"
 	}
 	else {
-		ioriginalnameref(ITEM_ID_RACK_ACCESSORIES) = "accessories"
+		ioriginalnameref(ITEM_ID_RACK_ACCESSORIES) = "accessaries"
 		ioriginalnameref2(ITEM_ID_RACK_ACCESSORIES) = "rack"
 	}
 	ipicref(ITEM_ID_RACK_ACCESSORIES) = xy2pic(26, 7)
 	iknownnameref(ITEM_ID_RACK_ACCESSORIES) = ioriginalnameref(ITEM_ID_RACK_ACCESSORIES)
 	icolref(ITEM_ID_RACK_ACCESSORIES) = COLOR_DEFAULT
@@ -136680,11 +138948,11 @@
 	iorgweight(ITEM_ID_RACK_GOODS) = 6800
 	if ( jp ) {
 		ioriginalnameref(ITEM_ID_RACK_GOODS) = "日用品の棚"
 	}
 	else {
-		ioriginalnameref(ITEM_ID_RACK_GOODS) = "goods"
+		ioriginalnameref(ITEM_ID_RACK_GOODS) = "good"
 		ioriginalnameref2(ITEM_ID_RACK_GOODS) = "rack"
 	}
 	ipicref(ITEM_ID_RACK_GOODS) = xy2pic(25, 7)
 	iknownnameref(ITEM_ID_RACK_GOODS) = ioriginalnameref(ITEM_ID_RACK_GOODS)
 	icolref(ITEM_ID_RACK_GOODS) = COLOR_DEFAULT
@@ -136710,11 +138978,11 @@
 	else {
 		ioriginalnameref(ITEM_ID_ROD_WISHING) = "wishing"
 		ioriginalnameref2(ITEM_ID_ROD_WISHING) = "rod"
 	}
 	ipicref(ITEM_ID_ROD_WISHING) = xy2pic(9, 14)
-	p = (ITEM_ID_ROD_WISHING + gdata(GDATA_RAND_SEED_A)) \ 6
+	p = (290 + gdata(GDATA_RAND_SEED_A)) \ 6
 	iknownnameref(ITEM_ID_ROD_WISHING) = _namestaff(p) + strblank + strstaff
 	icolref(ITEM_ID_ROD_WISHING) = _randcolor(p)
 	irandomname(ITEM_ID_ROD_WISHING) = 1
 	ilight(ITEM_ID_SPELLBOOK_WISHING) = LIGHT_TYPE_NONE
 	ialphanameref(ITEM_ID_SPELLBOOK_WISHING) = ""
@@ -136725,11 +138993,11 @@
 	else {
 		ioriginalnameref(ITEM_ID_SPELLBOOK_WISHING) = "wishing"
 		ioriginalnameref2(ITEM_ID_SPELLBOOK_WISHING) = "spellbook"
 	}
 	ipicref(ITEM_ID_SPELLBOOK_WISHING) = xy2pic(0, 13)
-	p = (ITEM_ID_SPELLBOOK_WISHING + gdata(GDATA_RAND_SEED_A)) \ 6
+	p = (289 + gdata(GDATA_RAND_SEED_A)) \ 6
 	iknownnameref(ITEM_ID_SPELLBOOK_WISHING) = _namespellbook(p) + strblank + strspellbook
 	icolref(ITEM_ID_SPELLBOOK_WISHING) = _randcolor(p)
 	irandomname(ITEM_ID_SPELLBOOK_WISHING) = 1
 	ilight(ITEM_ID_SCROLL_CURSE) = LIGHT_TYPE_NONE
 	ialphanameref(ITEM_ID_SCROLL_CURSE) = ""
@@ -136740,11 +139008,11 @@
 	else {
 		ioriginalnameref(ITEM_ID_SCROLL_CURSE) = "curse"
 		ioriginalnameref2(ITEM_ID_SCROLL_CURSE) = "scroll"
 	}
 	ipicref(ITEM_ID_SCROLL_CURSE) = xy2pic(8, 14)
-	p = (ITEM_ID_SCROLL_CURSE + gdata(GDATA_RAND_SEED_A)) \ 6
+	p = (288 + gdata(GDATA_RAND_SEED_A)) \ 6
 	iknownnameref(ITEM_ID_SCROLL_CURSE) = _namescroll(p) + strblank + strscroll
 	icolref(ITEM_ID_SCROLL_CURSE) = _randcolor(p)
 	irandomname(ITEM_ID_SCROLL_CURSE) = 1
 	ilight(ITEM_ID_POTION_POTENTIAL) = LIGHT_TYPE_NONE
 	ialphanameref(ITEM_ID_POTION_POTENTIAL) = ""
@@ -136755,11 +139023,11 @@
 	else {
 		ioriginalnameref(ITEM_ID_POTION_POTENTIAL) = "potential"
 		ioriginalnameref2(ITEM_ID_POTION_POTENTIAL) = "potion"
 	}
 	ipicref(ITEM_ID_POTION_POTENTIAL) = xy2pic(24, 10)
-	p = (ITEM_ID_POTION_POTENTIAL + gdata(GDATA_RAND_SEED_A)) \ 6
+	p = (287 + gdata(GDATA_RAND_SEED_A)) \ 6
 	iknownnameref(ITEM_ID_POTION_POTENTIAL) = _namepotion(p) + strblank + strpotion
 	icolref(ITEM_ID_POTION_POTENTIAL) = _randcolor(p)
 	irandomname(ITEM_ID_POTION_POTENTIAL) = 1
 	ilight(ITEM_ID_POTION_RESTORE_SPIRIT) = LIGHT_TYPE_NONE
 	ialphanameref(ITEM_ID_POTION_RESTORE_SPIRIT) = ""
@@ -136770,11 +139038,11 @@
 	else {
 		ioriginalnameref(ITEM_ID_POTION_RESTORE_SPIRIT) = "restore spirit"
 		ioriginalnameref2(ITEM_ID_POTION_RESTORE_SPIRIT) = "potion"
 	}
 	ipicref(ITEM_ID_POTION_RESTORE_SPIRIT) = xy2pic(24, 10)
-	p = (ITEM_ID_POTION_RESTORE_SPIRIT + gdata(GDATA_RAND_SEED_A)) \ 6
+	p = (286 + gdata(GDATA_RAND_SEED_A)) \ 6
 	iknownnameref(ITEM_ID_POTION_RESTORE_SPIRIT) = _namepotion(p) + strblank + strpotion
 	icolref(ITEM_ID_POTION_RESTORE_SPIRIT) = _randcolor(p)
 	irandomname(ITEM_ID_POTION_RESTORE_SPIRIT) = 1
 	ilight(ITEM_ID_POTION_RESTORE_BODY) = LIGHT_TYPE_NONE
 	ialphanameref(ITEM_ID_POTION_RESTORE_BODY) = ""
@@ -136785,11 +139053,11 @@
 	else {
 		ioriginalnameref(ITEM_ID_POTION_RESTORE_BODY) = "restore body"
 		ioriginalnameref2(ITEM_ID_POTION_RESTORE_BODY) = "potion"
 	}
 	ipicref(ITEM_ID_POTION_RESTORE_BODY) = xy2pic(24, 10)
-	p = (ITEM_ID_POTION_RESTORE_BODY + gdata(GDATA_RAND_SEED_A)) \ 6
+	p = (285 + gdata(GDATA_RAND_SEED_A)) \ 6
 	iknownnameref(ITEM_ID_POTION_RESTORE_BODY) = _namepotion(p) + strblank + strpotion
 	icolref(ITEM_ID_POTION_RESTORE_BODY) = _randcolor(p)
 	irandomname(ITEM_ID_POTION_RESTORE_BODY) = 1
 	ilight(ITEM_ID_WALLET) = LIGHT_TYPE_NONE
 	ialphanameref(ITEM_ID_WALLET) = ""
@@ -136952,90 +139220,90 @@
 	iorgweight(ITEM_ID_SPELLBOOK_CHAOS_BALL) = 380
 	if ( jp ) {
 		ioriginalnameref(ITEM_ID_SPELLBOOK_CHAOS_BALL) = "混沌の渦の魔法書"
 	}
 	else {
-		ioriginalnameref(ITEM_ID_SPELLBOOK_CHAOS_BALL) = "chaos ball"
+		ioriginalnameref(ITEM_ID_SPELLBOOK_CHAOS_BALL) = "chaos vortex"
 		ioriginalnameref2(ITEM_ID_SPELLBOOK_CHAOS_BALL) = "spellbook"
 	}
 	ipicref(ITEM_ID_SPELLBOOK_CHAOS_BALL) = xy2pic(0, 13)
-	p = (ITEM_ID_SPELLBOOK_CHAOS_BALL + gdata(GDATA_RAND_SEED_A)) \ 6
+	p = (272 + gdata(GDATA_RAND_SEED_A)) \ 6
 	iknownnameref(ITEM_ID_SPELLBOOK_CHAOS_BALL) = _namespellbook(p) + strblank + strspellbook
 	icolref(ITEM_ID_SPELLBOOK_CHAOS_BALL) = _randcolor(p)
 	irandomname(ITEM_ID_SPELLBOOK_CHAOS_BALL) = 1
 	ilight(ITEM_ID_SPELLBOOK_SOUND_BALL) = LIGHT_TYPE_NONE
 	ialphanameref(ITEM_ID_SPELLBOOK_SOUND_BALL) = ""
 	iorgweight(ITEM_ID_SPELLBOOK_SOUND_BALL) = 380
 	if ( jp ) {
 		ioriginalnameref(ITEM_ID_SPELLBOOK_SOUND_BALL) = "轟音の波動の魔法書"
 	}
 	else {
-		ioriginalnameref(ITEM_ID_SPELLBOOK_SOUND_BALL) = "sound ball"
+		ioriginalnameref(ITEM_ID_SPELLBOOK_SOUND_BALL) = "howling wave"
 		ioriginalnameref2(ITEM_ID_SPELLBOOK_SOUND_BALL) = "spellbook"
 	}
 	ipicref(ITEM_ID_SPELLBOOK_SOUND_BALL) = xy2pic(0, 13)
-	p = (ITEM_ID_SPELLBOOK_SOUND_BALL + gdata(GDATA_RAND_SEED_A)) \ 6
+	p = (271 + gdata(GDATA_RAND_SEED_A)) \ 6
 	iknownnameref(ITEM_ID_SPELLBOOK_SOUND_BALL) = _namespellbook(p) + strblank + strspellbook
 	icolref(ITEM_ID_SPELLBOOK_SOUND_BALL) = _randcolor(p)
 	irandomname(ITEM_ID_SPELLBOOK_SOUND_BALL) = 1
 	ilight(ITEM_ID_SPELLBOOK_FIRE_BALL) = LIGHT_TYPE_NONE
 	ialphanameref(ITEM_ID_SPELLBOOK_FIRE_BALL) = ""
 	iorgweight(ITEM_ID_SPELLBOOK_FIRE_BALL) = 380
 	if ( jp ) {
 		ioriginalnameref(ITEM_ID_SPELLBOOK_FIRE_BALL) = "灼熱の嵐の魔法書"
 	}
 	else {
-		ioriginalnameref(ITEM_ID_SPELLBOOK_FIRE_BALL) = "fire ball"
+		ioriginalnameref(ITEM_ID_SPELLBOOK_FIRE_BALL) = "burning storm"
 		ioriginalnameref2(ITEM_ID_SPELLBOOK_FIRE_BALL) = "spellbook"
 	}
 	ipicref(ITEM_ID_SPELLBOOK_FIRE_BALL) = xy2pic(0, 13)
-	p = (ITEM_ID_SPELLBOOK_FIRE_BALL + gdata(GDATA_RAND_SEED_A)) \ 6
+	p = (270 + gdata(GDATA_RAND_SEED_A)) \ 6
 	iknownnameref(ITEM_ID_SPELLBOOK_FIRE_BALL) = _namespellbook(p) + strblank + strspellbook
 	icolref(ITEM_ID_SPELLBOOK_FIRE_BALL) = _randcolor(p)
 	irandomname(ITEM_ID_SPELLBOOK_FIRE_BALL) = 1
 	ilight(ITEM_ID_SPELLBOOK_ICE_BALL) = LIGHT_TYPE_NONE
 	ialphanameref(ITEM_ID_SPELLBOOK_ICE_BALL) = ""
 	iorgweight(ITEM_ID_SPELLBOOK_ICE_BALL) = 380
 	if ( jp ) {
 		ioriginalnameref(ITEM_ID_SPELLBOOK_ICE_BALL) = "氷結の波動の魔法書"
 	}
 	else {
-		ioriginalnameref(ITEM_ID_SPELLBOOK_ICE_BALL) = "ice ball"
+		ioriginalnameref(ITEM_ID_SPELLBOOK_ICE_BALL) = "freezing wave"
 		ioriginalnameref2(ITEM_ID_SPELLBOOK_ICE_BALL) = "spellbook"
 	}
 	ipicref(ITEM_ID_SPELLBOOK_ICE_BALL) = xy2pic(0, 13)
-	p = (ITEM_ID_SPELLBOOK_ICE_BALL + gdata(GDATA_RAND_SEED_A)) \ 6
+	p = (269 + gdata(GDATA_RAND_SEED_A)) \ 6
 	iknownnameref(ITEM_ID_SPELLBOOK_ICE_BALL) = _namespellbook(p) + strblank + strspellbook
 	icolref(ITEM_ID_SPELLBOOK_ICE_BALL) = _randcolor(p)
 	irandomname(ITEM_ID_SPELLBOOK_ICE_BALL) = 1
 	ilight(ITEM_ID_SPELLBOOK_ILLUSION_BEAM) = LIGHT_TYPE_NONE
 	ialphanameref(ITEM_ID_SPELLBOOK_ILLUSION_BEAM) = ""
 	iorgweight(ITEM_ID_SPELLBOOK_ILLUSION_BEAM) = 380
 	if ( jp ) {
 		ioriginalnameref(ITEM_ID_SPELLBOOK_ILLUSION_BEAM) = "マインドボルトの魔法書"
 	}
 	else {
-		ioriginalnameref(ITEM_ID_SPELLBOOK_ILLUSION_BEAM) = "illusion beam"
+		ioriginalnameref(ITEM_ID_SPELLBOOK_ILLUSION_BEAM) = "mind bolt"
 		ioriginalnameref2(ITEM_ID_SPELLBOOK_ILLUSION_BEAM) = "spellbook"
 	}
 	ipicref(ITEM_ID_SPELLBOOK_ILLUSION_BEAM) = xy2pic(0, 13)
-	p = (ITEM_ID_SPELLBOOK_ILLUSION_BEAM + gdata(GDATA_RAND_SEED_A)) \ 6
+	p = (268 + gdata(GDATA_RAND_SEED_A)) \ 6
 	iknownnameref(ITEM_ID_SPELLBOOK_ILLUSION_BEAM) = _namespellbook(p) + strblank + strspellbook
 	icolref(ITEM_ID_SPELLBOOK_ILLUSION_BEAM) = _randcolor(p)
 	irandomname(ITEM_ID_SPELLBOOK_ILLUSION_BEAM) = 1
 	ilight(ITEM_ID_SPELLBOOK_DARKNESS_BEAM) = LIGHT_TYPE_NONE
 	ialphanameref(ITEM_ID_SPELLBOOK_DARKNESS_BEAM) = ""
 	iorgweight(ITEM_ID_SPELLBOOK_DARKNESS_BEAM) = 380
 	if ( jp ) {
 		ioriginalnameref(ITEM_ID_SPELLBOOK_DARKNESS_BEAM) = "ダークネスボルトの魔法書"
 	}
 	else {
-		ioriginalnameref(ITEM_ID_SPELLBOOK_DARKNESS_BEAM) = "darkness beam"
+		ioriginalnameref(ITEM_ID_SPELLBOOK_DARKNESS_BEAM) = "darkness bolt"
 		ioriginalnameref2(ITEM_ID_SPELLBOOK_DARKNESS_BEAM) = "spellbook"
 	}
 	ipicref(ITEM_ID_SPELLBOOK_DARKNESS_BEAM) = xy2pic(0, 13)
-	p = (ITEM_ID_SPELLBOOK_DARKNESS_BEAM + gdata(GDATA_RAND_SEED_A)) \ 6
+	p = (267 + gdata(GDATA_RAND_SEED_A)) \ 6
 	iknownnameref(ITEM_ID_SPELLBOOK_DARKNESS_BEAM) = _namespellbook(p) + strblank + strspellbook
 	icolref(ITEM_ID_SPELLBOOK_DARKNESS_BEAM) = _randcolor(p)
 	irandomname(ITEM_ID_SPELLBOOK_DARKNESS_BEAM) = 1
 	ilight(ITEM_ID_WAKIZASHI) = LIGHT_TYPE_NONE
 	ialphanameref(ITEM_ID_WAKIZASHI) = "ニンジャソード"
@@ -137052,18 +139320,18 @@
 	icolref(ITEM_ID_WAKIZASHI) = COLOR_DEFAULT
 	ilight(ITEM_ID_SPELLBOOK_NERVE_EYE) = LIGHT_TYPE_NONE
 	ialphanameref(ITEM_ID_SPELLBOOK_NERVE_EYE) = ""
 	iorgweight(ITEM_ID_SPELLBOOK_NERVE_EYE) = 380
 	if ( jp ) {
-		ioriginalnameref(ITEM_ID_SPELLBOOK_NERVE_EYE) = "麻痺の矢の魔法書"
+		ioriginalnameref(ITEM_ID_SPELLBOOK_NERVE_EYE) = "神経の針の魔法書"
 	}
 	else {
-		ioriginalnameref(ITEM_ID_SPELLBOOK_NERVE_EYE) = "nerve eye"
+		ioriginalnameref(ITEM_ID_SPELLBOOK_NERVE_EYE) = "nerve needle"
 		ioriginalnameref2(ITEM_ID_SPELLBOOK_NERVE_EYE) = "spellbook"
 	}
 	ipicref(ITEM_ID_SPELLBOOK_NERVE_EYE) = xy2pic(0, 13)
-	p = (ITEM_ID_SPELLBOOK_NERVE_EYE + gdata(GDATA_RAND_SEED_A)) \ 6
+	p = (265 + gdata(GDATA_RAND_SEED_A)) \ 6
 	iknownnameref(ITEM_ID_SPELLBOOK_NERVE_EYE) = _namespellbook(p) + strblank + strspellbook
 	icolref(ITEM_ID_SPELLBOOK_NERVE_EYE) = _randcolor(p)
 	irandomname(ITEM_ID_SPELLBOOK_NERVE_EYE) = 1
 	ilight(ITEM_ID_SPELLBOOK_CHAOS_EYE) = LIGHT_TYPE_NONE
 	ialphanameref(ITEM_ID_SPELLBOOK_CHAOS_EYE) = ""
@@ -137074,26 +139342,26 @@
 	else {
 		ioriginalnameref(ITEM_ID_SPELLBOOK_CHAOS_EYE) = "chaos eye"
 		ioriginalnameref2(ITEM_ID_SPELLBOOK_CHAOS_EYE) = "spellbook"
 	}
 	ipicref(ITEM_ID_SPELLBOOK_CHAOS_EYE) = xy2pic(0, 13)
-	p = (ITEM_ID_SPELLBOOK_CHAOS_EYE + gdata(GDATA_RAND_SEED_A)) \ 6
+	p = (264 + gdata(GDATA_RAND_SEED_A)) \ 6
 	iknownnameref(ITEM_ID_SPELLBOOK_CHAOS_EYE) = _namespellbook(p) + strblank + strspellbook
 	icolref(ITEM_ID_SPELLBOOK_CHAOS_EYE) = _randcolor(p)
 	irandomname(ITEM_ID_SPELLBOOK_CHAOS_EYE) = 1
 	ilight(ITEM_ID_SPELLBOOK_NETHER_EYE) = LIGHT_TYPE_NONE
 	ialphanameref(ITEM_ID_SPELLBOOK_NETHER_EYE) = ""
 	iorgweight(ITEM_ID_SPELLBOOK_NETHER_EYE) = 380
 	if ( jp ) {
 		ioriginalnameref(ITEM_ID_SPELLBOOK_NETHER_EYE) = "地獄の吐息の魔法書"
 	}
 	else {
-		ioriginalnameref(ITEM_ID_SPELLBOOK_NETHER_EYE) = "nether eye"
+		ioriginalnameref(ITEM_ID_SPELLBOOK_NETHER_EYE) = "nether sigh"
 		ioriginalnameref2(ITEM_ID_SPELLBOOK_NETHER_EYE) = "spellbook"
 	}
 	ipicref(ITEM_ID_SPELLBOOK_NETHER_EYE) = xy2pic(0, 13)
-	p = (ITEM_ID_SPELLBOOK_NETHER_EYE + gdata(GDATA_RAND_SEED_A)) \ 6
+	p = (263 + gdata(GDATA_RAND_SEED_A)) \ 6
 	iknownnameref(ITEM_ID_SPELLBOOK_NETHER_EYE) = _namespellbook(p) + strblank + strspellbook
 	icolref(ITEM_ID_SPELLBOOK_NETHER_EYE) = _randcolor(p)
 	irandomname(ITEM_ID_SPELLBOOK_NETHER_EYE) = 1
 	ilight(ITEM_ID_POISON) = LIGHT_TYPE_NONE
 	ialphanameref(ITEM_ID_POISON) = ""
@@ -137104,11 +139372,11 @@
 	else {
 		ioriginalnameref(ITEM_ID_POISON) = "poison"
 		ioriginalnameref2(ITEM_ID_POISON) = ""
 	}
 	ipicref(ITEM_ID_POISON) = xy2pic(24, 10)
-	p = (ITEM_ID_POISON + gdata(GDATA_RAND_SEED_A)) \ 6
+	p = (262 + gdata(GDATA_RAND_SEED_A)) \ 6
 	iknownnameref(ITEM_ID_POISON) = _namepotion(p) + strblank + strpotion
 	icolref(ITEM_ID_POISON) = _randcolor(p)
 	irandomname(ITEM_ID_POISON) = 1
 	ilight(ITEM_ID_BOMB_FISH) = LIGHT_TYPE_NONE
 	ialphanameref(ITEM_ID_BOMB_FISH) = ""
@@ -137171,11 +139439,11 @@
 	else {
 		ioriginalnameref(ITEM_ID_SPELLBOOK_MAGIC_ARROW) = "magic arrow"
 		ioriginalnameref2(ITEM_ID_SPELLBOOK_MAGIC_ARROW) = "spellbook"
 	}
 	ipicref(ITEM_ID_SPELLBOOK_MAGIC_ARROW) = xy2pic(0, 13)
-	p = (ITEM_ID_SPELLBOOK_MAGIC_ARROW + gdata(GDATA_RAND_SEED_A)) \ 6
+	p = (257 + gdata(GDATA_RAND_SEED_A)) \ 6
 	iknownnameref(ITEM_ID_SPELLBOOK_MAGIC_ARROW) = _namespellbook(p) + strblank + strspellbook
 	icolref(ITEM_ID_SPELLBOOK_MAGIC_ARROW) = _randcolor(p)
 	irandomname(ITEM_ID_SPELLBOOK_MAGIC_ARROW) = 1
 	ilight(ITEM_ID_PORTABLE_COOKING_TOOL) = LIGHT_TYPE_NONE
 	ialphanameref(ITEM_ID_PORTABLE_COOKING_TOOL) = ""
@@ -137243,11 +139511,11 @@
 	else {
 		ioriginalnameref(ITEM_ID_SPELLBOOK_CURE_JURE) = "cure <Jure>"
 		ioriginalnameref2(ITEM_ID_SPELLBOOK_CURE_JURE) = "spellbook"
 	}
 	ipicref(ITEM_ID_SPELLBOOK_CURE_JURE) = xy2pic(0, 13)
-	p = (ITEM_ID_SPELLBOOK_CURE_JURE + gdata(GDATA_RAND_SEED_A)) \ 6
+	p = (252 + gdata(GDATA_RAND_SEED_A)) \ 6
 	iknownnameref(ITEM_ID_SPELLBOOK_CURE_JURE) = _namespellbook(p) + strblank + strspellbook
 	icolref(ITEM_ID_SPELLBOOK_CURE_JURE) = _randcolor(p)
 	irandomname(ITEM_ID_SPELLBOOK_CURE_JURE) = 1
 	ilight(ITEM_ID_SPELLBOOK_CURE_ERIS) = LIGHT_TYPE_NONE
 	ialphanameref(ITEM_ID_SPELLBOOK_CURE_ERIS) = ""
@@ -137258,11 +139526,11 @@
 	else {
 		ioriginalnameref(ITEM_ID_SPELLBOOK_CURE_ERIS) = "cure <Eris>"
 		ioriginalnameref2(ITEM_ID_SPELLBOOK_CURE_ERIS) = "spellbook"
 	}
 	ipicref(ITEM_ID_SPELLBOOK_CURE_ERIS) = xy2pic(0, 13)
-	p = (ITEM_ID_SPELLBOOK_CURE_ERIS + gdata(GDATA_RAND_SEED_A)) \ 6
+	p = (251 + gdata(GDATA_RAND_SEED_A)) \ 6
 	iknownnameref(ITEM_ID_SPELLBOOK_CURE_ERIS) = _namespellbook(p) + strblank + strspellbook
 	icolref(ITEM_ID_SPELLBOOK_CURE_ERIS) = _randcolor(p)
 	irandomname(ITEM_ID_SPELLBOOK_CURE_ERIS) = 1
 	ilight(ITEM_ID_SPELLBOOK_CURE_CRITICAL_WOUND) = LIGHT_TYPE_NONE
 	ialphanameref(ITEM_ID_SPELLBOOK_CURE_CRITICAL_WOUND) = ""
@@ -137273,11 +139541,11 @@
 	else {
 		ioriginalnameref(ITEM_ID_SPELLBOOK_CURE_CRITICAL_WOUND) = "cure critical wound"
 		ioriginalnameref2(ITEM_ID_SPELLBOOK_CURE_CRITICAL_WOUND) = "spellbook"
 	}
 	ipicref(ITEM_ID_SPELLBOOK_CURE_CRITICAL_WOUND) = xy2pic(0, 13)
-	p = (ITEM_ID_SPELLBOOK_CURE_CRITICAL_WOUND + gdata(GDATA_RAND_SEED_A)) \ 6
+	p = (250 + gdata(GDATA_RAND_SEED_A)) \ 6
 	iknownnameref(ITEM_ID_SPELLBOOK_CURE_CRITICAL_WOUND) = _namespellbook(p) + strblank + strspellbook
 	icolref(ITEM_ID_SPELLBOOK_CURE_CRITICAL_WOUND) = _randcolor(p)
 	irandomname(ITEM_ID_SPELLBOOK_CURE_CRITICAL_WOUND) = 1
 	ilight(ITEM_ID_SPELLBOOK_CURE_MINOR_WOUND) = LIGHT_TYPE_NONE
 	ialphanameref(ITEM_ID_SPELLBOOK_CURE_MINOR_WOUND) = ""
@@ -137288,11 +139556,11 @@
 	else {
 		ioriginalnameref(ITEM_ID_SPELLBOOK_CURE_MINOR_WOUND) = "cure minor wound"
 		ioriginalnameref2(ITEM_ID_SPELLBOOK_CURE_MINOR_WOUND) = "spellbook"
 	}
 	ipicref(ITEM_ID_SPELLBOOK_CURE_MINOR_WOUND) = xy2pic(0, 13)
-	p = (ITEM_ID_SPELLBOOK_CURE_MINOR_WOUND + gdata(GDATA_RAND_SEED_A)) \ 6
+	p = (249 + gdata(GDATA_RAND_SEED_A)) \ 6
 	iknownnameref(ITEM_ID_SPELLBOOK_CURE_MINOR_WOUND) = _namespellbook(p) + strblank + strspellbook
 	icolref(ITEM_ID_SPELLBOOK_CURE_MINOR_WOUND) = _randcolor(p)
 	irandomname(ITEM_ID_SPELLBOOK_CURE_MINOR_WOUND) = 1
 	ilight(ITEM_ID_SPELLBOOK_RETURN) = LIGHT_TYPE_NONE
 	ialphanameref(ITEM_ID_SPELLBOOK_RETURN) = ""
@@ -137303,11 +139571,11 @@
 	else {
 		ioriginalnameref(ITEM_ID_SPELLBOOK_RETURN) = "return"
 		ioriginalnameref2(ITEM_ID_SPELLBOOK_RETURN) = "spellbook"
 	}
 	ipicref(ITEM_ID_SPELLBOOK_RETURN) = xy2pic(0, 13)
-	p = (ITEM_ID_SPELLBOOK_RETURN + gdata(GDATA_RAND_SEED_A)) \ 6
+	p = (248 + gdata(GDATA_RAND_SEED_A)) \ 6
 	iknownnameref(ITEM_ID_SPELLBOOK_RETURN) = _namespellbook(p) + strblank + strspellbook
 	icolref(ITEM_ID_SPELLBOOK_RETURN) = _randcolor(p)
 	irandomname(ITEM_ID_SPELLBOOK_RETURN) = 1
 	ilight(ITEM_ID_SPELLBOOK_ORACLE) = LIGHT_TYPE_NONE
 	ialphanameref(ITEM_ID_SPELLBOOK_ORACLE) = ""
@@ -137318,11 +139586,11 @@
 	else {
 		ioriginalnameref(ITEM_ID_SPELLBOOK_ORACLE) = "oracle"
 		ioriginalnameref2(ITEM_ID_SPELLBOOK_ORACLE) = "spellbook"
 	}
 	ipicref(ITEM_ID_SPELLBOOK_ORACLE) = xy2pic(0, 13)
-	p = (ITEM_ID_SPELLBOOK_ORACLE + gdata(GDATA_RAND_SEED_A)) \ 6
+	p = (247 + gdata(GDATA_RAND_SEED_A)) \ 6
 	iknownnameref(ITEM_ID_SPELLBOOK_ORACLE) = _namespellbook(p) + strblank + strspellbook
 	icolref(ITEM_ID_SPELLBOOK_ORACLE) = _randcolor(p)
 	irandomname(ITEM_ID_SPELLBOOK_ORACLE) = 1
 	ilight(ITEM_ID_SPELLBOOK_MAGIC_MAPPING) = LIGHT_TYPE_NONE
 	ialphanameref(ITEM_ID_SPELLBOOK_MAGIC_MAPPING) = ""
@@ -137333,11 +139601,11 @@
 	else {
 		ioriginalnameref(ITEM_ID_SPELLBOOK_MAGIC_MAPPING) = "magic mapping"
 		ioriginalnameref2(ITEM_ID_SPELLBOOK_MAGIC_MAPPING) = "spellbook"
 	}
 	ipicref(ITEM_ID_SPELLBOOK_MAGIC_MAPPING) = xy2pic(0, 13)
-	p = (ITEM_ID_SPELLBOOK_MAGIC_MAPPING + gdata(GDATA_RAND_SEED_A)) \ 6
+	p = (246 + gdata(GDATA_RAND_SEED_A)) \ 6
 	iknownnameref(ITEM_ID_SPELLBOOK_MAGIC_MAPPING) = _namespellbook(p) + strblank + strspellbook
 	icolref(ITEM_ID_SPELLBOOK_MAGIC_MAPPING) = _randcolor(p)
 	irandomname(ITEM_ID_SPELLBOOK_MAGIC_MAPPING) = 1
 	ilight(ITEM_ID_SCROLL_MINOR_TELEPORTATION) = LIGHT_TYPE_NONE
 	ialphanameref(ITEM_ID_SCROLL_MINOR_TELEPORTATION) = ""
@@ -137348,11 +139616,11 @@
 	else {
 		ioriginalnameref(ITEM_ID_SCROLL_MINOR_TELEPORTATION) = "minor teleportation"
 		ioriginalnameref2(ITEM_ID_SCROLL_MINOR_TELEPORTATION) = "scroll"
 	}
 	ipicref(ITEM_ID_SCROLL_MINOR_TELEPORTATION) = xy2pic(8, 14)
-	p = (ITEM_ID_SCROLL_MINOR_TELEPORTATION + gdata(GDATA_RAND_SEED_A)) \ 6
+	p = (245 + gdata(GDATA_RAND_SEED_A)) \ 6
 	iknownnameref(ITEM_ID_SCROLL_MINOR_TELEPORTATION) = _namescroll(p) + strblank + strscroll
 	icolref(ITEM_ID_SCROLL_MINOR_TELEPORTATION) = _randcolor(p)
 	irandomname(ITEM_ID_SCROLL_MINOR_TELEPORTATION) = 1
 	ilight(ITEM_ID_SCROLL_WONDER) = LIGHT_TYPE_NONE
 	ialphanameref(ITEM_ID_SCROLL_WONDER) = ""
@@ -137363,11 +139631,11 @@
 	else {
 		ioriginalnameref(ITEM_ID_SCROLL_WONDER) = "wonder"
 		ioriginalnameref2(ITEM_ID_SCROLL_WONDER) = "scroll"
 	}
 	ipicref(ITEM_ID_SCROLL_WONDER) = xy2pic(8, 14)
-	p = (ITEM_ID_SCROLL_WONDER + gdata(GDATA_RAND_SEED_A)) \ 6
+	p = (244 + gdata(GDATA_RAND_SEED_A)) \ 6
 	iknownnameref(ITEM_ID_SCROLL_WONDER) = _namescroll(p) + strblank + strscroll
 	icolref(ITEM_ID_SCROLL_WONDER) = _randcolor(p)
 	irandomname(ITEM_ID_SCROLL_WONDER) = 1
 	ilight(ITEM_ID_SCROLL_GAIN_ATTRIBUTE) = LIGHT_TYPE_NONE
 	ialphanameref(ITEM_ID_SCROLL_GAIN_ATTRIBUTE) = ""
@@ -137378,11 +139646,11 @@
 	else {
 		ioriginalnameref(ITEM_ID_SCROLL_GAIN_ATTRIBUTE) = "gain attribute"
 		ioriginalnameref2(ITEM_ID_SCROLL_GAIN_ATTRIBUTE) = "scroll"
 	}
 	ipicref(ITEM_ID_SCROLL_GAIN_ATTRIBUTE) = xy2pic(8, 14)
-	p = (ITEM_ID_SCROLL_GAIN_ATTRIBUTE + gdata(GDATA_RAND_SEED_A)) \ 6
+	p = (243 + gdata(GDATA_RAND_SEED_A)) \ 6
 	iknownnameref(ITEM_ID_SCROLL_GAIN_ATTRIBUTE) = _namescroll(p) + strblank + strscroll
 	icolref(ITEM_ID_SCROLL_GAIN_ATTRIBUTE) = _randcolor(p)
 	irandomname(ITEM_ID_SCROLL_GAIN_ATTRIBUTE) = 1
 	ilight(ITEM_ID_SCROLL_MAGICAL_MAP) = LIGHT_TYPE_NONE
 	ialphanameref(ITEM_ID_SCROLL_MAGICAL_MAP) = ""
@@ -137393,11 +139661,11 @@
 	else {
 		ioriginalnameref(ITEM_ID_SCROLL_MAGICAL_MAP) = "magical map"
 		ioriginalnameref2(ITEM_ID_SCROLL_MAGICAL_MAP) = "scroll"
 	}
 	ipicref(ITEM_ID_SCROLL_MAGICAL_MAP) = xy2pic(8, 14)
-	p = (ITEM_ID_SCROLL_MAGICAL_MAP + gdata(GDATA_RAND_SEED_A)) \ 6
+	p = (242 + gdata(GDATA_RAND_SEED_A)) \ 6
 	iknownnameref(ITEM_ID_SCROLL_MAGICAL_MAP) = _namescroll(p) + strblank + strscroll
 	icolref(ITEM_ID_SCROLL_MAGICAL_MAP) = _randcolor(p)
 	irandomname(ITEM_ID_SCROLL_MAGICAL_MAP) = 1
 	ilight(ITEM_ID_SAFE) = LIGHT_TYPE_ITEM
 	ialphanameref(ITEM_ID_SAFE) = ""
@@ -137473,11 +139741,11 @@
 	else {
 		ioriginalnameref(ITEM_ID_SCROLL_RETURN) = "return"
 		ioriginalnameref2(ITEM_ID_SCROLL_RETURN) = "scroll"
 	}
 	ipicref(ITEM_ID_SCROLL_RETURN) = xy2pic(8, 14)
-	p = (ITEM_ID_SCROLL_RETURN + gdata(GDATA_RAND_SEED_A)) \ 6
+	p = (236 + gdata(GDATA_RAND_SEED_A)) \ 6
 	iknownnameref(ITEM_ID_SCROLL_RETURN) = _namescroll(p) + strblank + strscroll
 	icolref(ITEM_ID_SCROLL_RETURN) = _randcolor(p)
 	irandomname(ITEM_ID_SCROLL_RETURN) = 1
 	ilight(ITEM_ID_HALBERD) = LIGHT_TYPE_NONE
 	ialphanameref(ITEM_ID_HALBERD) = "ハルバード"
@@ -137552,11 +139820,11 @@
 	}
 	else {
 		ioriginalnameref(ITEM_ID_SHORT_BOW) = "short bow"
 		ioriginalnameref2(ITEM_ID_SHORT_BOW) = ""
 	}
-	ipicref(ITEM_ID_SHORT_BOW) = 989
+	ipicref(ITEM_ID_SHORT_BOW) = xy2pic(32, 29)
 	iknownnameref(ITEM_ID_SHORT_BOW) = ioriginalnameref(ITEM_ID_SHORT_BOW)
 	icolref(ITEM_ID_SHORT_BOW) = COLOR_DEFAULT
 	ilight(ITEM_ID_LONG_STAFF) = LIGHT_TYPE_NONE
 	ialphanameref(ITEM_ID_LONG_STAFF) = "ロッド"
 	iorgweight(ITEM_ID_LONG_STAFF) = 800
@@ -137826,11 +140094,11 @@
 	else {
 		ioriginalnameref(ITEM_ID_SCROLL_UNCURSE) = "uncurse"
 		ioriginalnameref2(ITEM_ID_SCROLL_UNCURSE) = "scroll"
 	}
 	ipicref(ITEM_ID_SCROLL_UNCURSE) = xy2pic(8, 14)
-	p = (ITEM_ID_SCROLL_UNCURSE + gdata(GDATA_RAND_SEED_A)) \ 6
+	p = (209 + gdata(GDATA_RAND_SEED_A)) \ 6
 	iknownnameref(ITEM_ID_SCROLL_UNCURSE) = _namescroll(p) + strblank + strscroll
 	icolref(ITEM_ID_SCROLL_UNCURSE) = _randcolor(p)
 	irandomname(ITEM_ID_SCROLL_UNCURSE) = 1
 	ilight(ITEM_ID_WORTHLESS_FAKE_GOLD_BAR) = LIGHT_TYPE_NONE
 	ialphanameref(ITEM_ID_WORTHLESS_FAKE_GOLD_BAR) = ""
@@ -137855,11 +140123,11 @@
 	iorgweight(ITEM_ID_BOW_OF_VINDALE) = 1200
 	if ( jp ) {
 		ioriginalnameref(ITEM_ID_BOW_OF_VINDALE) = "《異形の森の弓》"
 	}
 	else {
-		ioriginalnameref(ITEM_ID_BOW_OF_VINDALE) = "<Bow of Vindale>"
+		ioriginalnameref(ITEM_ID_BOW_OF_VINDALE) = "<Bow of Vinderre>"
 		ioriginalnameref2(ITEM_ID_BOW_OF_VINDALE) = ""
 	}
 	ipicref(ITEM_ID_BOW_OF_VINDALE) = xy2pic(8, 12)
 	if ( jp ) {
 		iknownnameref(ITEM_ID_BOW_OF_VINDALE) = "波動を放つ弓"
@@ -137926,11 +140194,11 @@
 	else {
 		ioriginalnameref(ITEM_ID_ROD_CURE) = "cure"
 		ioriginalnameref2(ITEM_ID_ROD_CURE) = "rod"
 	}
 	ipicref(ITEM_ID_ROD_CURE) = xy2pic(9, 14)
-	p = (ITEM_ID_ROD_CURE + gdata(GDATA_RAND_SEED_A)) \ 6
+	p = (203 + gdata(GDATA_RAND_SEED_A)) \ 6
 	iknownnameref(ITEM_ID_ROD_CURE) = _namestaff(p) + strblank + strstaff
 	icolref(ITEM_ID_ROD_CURE) = _randcolor(p)
 	irandomname(ITEM_ID_ROD_CURE) = 1
 	ilight(ITEM_ID_ROD_MAGIC_MAPPING) = LIGHT_TYPE_NONE
 	ialphanameref(ITEM_ID_ROD_MAGIC_MAPPING) = ""
@@ -137941,11 +140209,11 @@
 	else {
 		ioriginalnameref(ITEM_ID_ROD_MAGIC_MAPPING) = "magic mapping"
 		ioriginalnameref2(ITEM_ID_ROD_MAGIC_MAPPING) = "rod"
 	}
 	ipicref(ITEM_ID_ROD_MAGIC_MAPPING) = xy2pic(9, 14)
-	p = (ITEM_ID_ROD_MAGIC_MAPPING + gdata(GDATA_RAND_SEED_A)) \ 6
+	p = (202 + gdata(GDATA_RAND_SEED_A)) \ 6
 	iknownnameref(ITEM_ID_ROD_MAGIC_MAPPING) = _namestaff(p) + strblank + strstaff
 	icolref(ITEM_ID_ROD_MAGIC_MAPPING) = _randcolor(p)
 	irandomname(ITEM_ID_ROD_MAGIC_MAPPING) = 1
 	ilight(ITEM_ID_LECCHO) = LIGHT_TYPE_NONE
 	ialphanameref(ITEM_ID_LECCHO) = ""
@@ -137975,14 +140243,14 @@
 	icolref(ITEM_ID_MELON) = COLOR_DEFAULT
 	ilight(ITEM_ID_SQUASH) = LIGHT_TYPE_NONE
 	ialphanameref(ITEM_ID_SQUASH) = ""
 	iorgweight(ITEM_ID_SQUASH) = 970
 	if ( jp ) {
-		ioriginalnameref(ITEM_ID_SQUASH) = "カボチャ"
+		ioriginalnameref(ITEM_ID_SQUASH) = "カボチ"
 	}
 	else {
-		ioriginalnameref(ITEM_ID_SQUASH) = "squash"
+		ioriginalnameref(ITEM_ID_SQUASH) = "cbocchi"
 		ioriginalnameref2(ITEM_ID_SQUASH) = ""
 	}
 	ipicref(ITEM_ID_SQUASH) = xy2pic(26, 5)
 	iknownnameref(ITEM_ID_SQUASH) = ioriginalnameref(ITEM_ID_SQUASH)
 	icolref(ITEM_ID_SQUASH) = COLOR_DEFAULT
@@ -138281,11 +140549,11 @@
 	else {
 		ioriginalnameref(ITEM_ID_ROD_SLOW) = "slow"
 		ioriginalnameref2(ITEM_ID_ROD_SLOW) = "rod"
 	}
 	ipicref(ITEM_ID_ROD_SLOW) = xy2pic(9, 14)
-	p = (ITEM_ID_ROD_SLOW + gdata(GDATA_RAND_SEED_A)) \ 6
+	p = (176 + gdata(GDATA_RAND_SEED_A)) \ 6
 	iknownnameref(ITEM_ID_ROD_SLOW) = _namestaff(p) + strblank + strstaff
 	icolref(ITEM_ID_ROD_SLOW) = _randcolor(p)
 	irandomname(ITEM_ID_ROD_SLOW) = 1
 	ilight(ITEM_ID_ROD_LIGHTNING_BOLT) = LIGHT_TYPE_NONE
 	ialphanameref(ITEM_ID_ROD_LIGHTNING_BOLT) = ""
@@ -138296,11 +140564,11 @@
 	else {
 		ioriginalnameref(ITEM_ID_ROD_LIGHTNING_BOLT) = "lightning bolt"
 		ioriginalnameref2(ITEM_ID_ROD_LIGHTNING_BOLT) = "rod"
 	}
 	ipicref(ITEM_ID_ROD_LIGHTNING_BOLT) = xy2pic(9, 14)
-	p = (ITEM_ID_ROD_LIGHTNING_BOLT + gdata(GDATA_RAND_SEED_A)) \ 6
+	p = (175 + gdata(GDATA_RAND_SEED_A)) \ 6
 	iknownnameref(ITEM_ID_ROD_LIGHTNING_BOLT) = _namestaff(p) + strblank + strstaff
 	icolref(ITEM_ID_ROD_LIGHTNING_BOLT) = _randcolor(p)
 	irandomname(ITEM_ID_ROD_LIGHTNING_BOLT) = 1
 	ilight(ITEM_ID_BUNK_BED) = LIGHT_TYPE_NONE
 	ialphanameref(ITEM_ID_BUNK_BED) = ""
@@ -138645,11 +140913,11 @@
 	iorgweight(ITEM_ID_DISORDERLY_BOOKS) = 830
 	if ( jp ) {
 		ioriginalnameref(ITEM_ID_DISORDERLY_BOOKS) = "散らかった本"
 	}
 	else {
-		ioriginalnameref(ITEM_ID_DISORDERLY_BOOKS) = "disorderly books"
+		ioriginalnameref(ITEM_ID_DISORDERLY_BOOKS) = "disorderly book"
 		ioriginalnameref2(ITEM_ID_DISORDERLY_BOOKS) = ""
 	}
 	ipicref(ITEM_ID_DISORDERLY_BOOKS) = xy2pic(8, 4)
 	iknownnameref(ITEM_ID_DISORDERLY_BOOKS) = ioriginalnameref(ITEM_ID_DISORDERLY_BOOKS)
 	icolref(ITEM_ID_DISORDERLY_BOOKS) = COLOR_DEFAULT
@@ -138658,12 +140926,12 @@
 	iorgweight(ITEM_ID_ARMOR_STATUE) = 7500
 	if ( jp ) {
 		ioriginalnameref(ITEM_ID_ARMOR_STATUE) = "鎧の像"
 	}
 	else {
-		ioriginalnameref(ITEM_ID_ARMOR_STATUE) = "armor statue"
-		ioriginalnameref2(ITEM_ID_ARMOR_STATUE) = ""
+		ioriginalnameref(ITEM_ID_ARMOR_STATUE) = "armor"
+		ioriginalnameref2(ITEM_ID_ARMOR_STATUE) = "statue"
 	}
 	ipicref(ITEM_ID_ARMOR_STATUE) = xy2pic(7, 4)
 	iknownnameref(ITEM_ID_ARMOR_STATUE) = ioriginalnameref(ITEM_ID_ARMOR_STATUE)
 	icolref(ITEM_ID_ARMOR_STATUE) = COLOR_RANDOM
 	ilight(ITEM_ID_DECORATED_ARMOR) = LIGHT_TYPE_NONE
@@ -138684,11 +140952,11 @@
 	iorgweight(ITEM_ID_DECORATED_CLOTHING) = 860
 	if ( jp ) {
 		ioriginalnameref(ITEM_ID_DECORATED_CLOTHING) = "飾られた服"
 	}
 	else {
-		ioriginalnameref(ITEM_ID_DECORATED_CLOTHING) = "decorated clothing"
+		ioriginalnameref(ITEM_ID_DECORATED_CLOTHING) = "decorated cloth"
 		ioriginalnameref2(ITEM_ID_DECORATED_CLOTHING) = ""
 	}
 	ipicref(ITEM_ID_DECORATED_CLOTHING) = xy2pic(5, 4)
 	iknownnameref(ITEM_ID_DECORATED_CLOTHING) = ioriginalnameref(ITEM_ID_DECORATED_CLOTHING)
 	icolref(ITEM_ID_DECORATED_CLOTHING) = COLOR_RANDOM
@@ -138749,11 +141017,11 @@
 	iorgweight(ITEM_ID_PAINTING_TOOLS) = 1100
 	if ( jp ) {
 		ioriginalnameref(ITEM_ID_PAINTING_TOOLS) = "絵描き道具"
 	}
 	else {
-		ioriginalnameref(ITEM_ID_PAINTING_TOOLS) = "painting tools"
+		ioriginalnameref(ITEM_ID_PAINTING_TOOLS) = "canvas"
 		ioriginalnameref2(ITEM_ID_PAINTING_TOOLS) = ""
 	}
 	ipicref(ITEM_ID_PAINTING_TOOLS) = xy2pic(0, 4)
 	iknownnameref(ITEM_ID_PAINTING_TOOLS) = ioriginalnameref(ITEM_ID_PAINTING_TOOLS)
 	icolref(ITEM_ID_PAINTING_TOOLS) = COLOR_RANDOM
@@ -138762,11 +141030,11 @@
 	iorgweight(ITEM_ID_FLOWER_ADORNED_PILLAR) = 32000
 	if ( jp ) {
 		ioriginalnameref(ITEM_ID_FLOWER_ADORNED_PILLAR) = "花で飾られた柱"
 	}
 	else {
-		ioriginalnameref(ITEM_ID_FLOWER_ADORNED_PILLAR) = "flower adorned pillar"
+		ioriginalnameref(ITEM_ID_FLOWER_ADORNED_PILLAR) = "statue ornamented with flowers"
 		ioriginalnameref2(ITEM_ID_FLOWER_ADORNED_PILLAR) = ""
 	}
 	ipicref(ITEM_ID_FLOWER_ADORNED_PILLAR) = xy2pic(31, 15)
 	iknownnameref(ITEM_ID_FLOWER_ADORNED_PILLAR) = ioriginalnameref(ITEM_ID_FLOWER_ADORNED_PILLAR)
 	icolref(ITEM_ID_FLOWER_ADORNED_PILLAR) = COLOR_DEFAULT
@@ -138775,11 +141043,11 @@
 	iorgweight(ITEM_ID_PLANT_ADORNED_PILLAR) = 32000
 	if ( jp ) {
 		ioriginalnameref(ITEM_ID_PLANT_ADORNED_PILLAR) = "植物で飾られた柱"
 	}
 	else {
-		ioriginalnameref(ITEM_ID_PLANT_ADORNED_PILLAR) = "plant adorned pillar"
+		ioriginalnameref(ITEM_ID_PLANT_ADORNED_PILLAR) = "statue ornamented with plants"
 		ioriginalnameref2(ITEM_ID_PLANT_ADORNED_PILLAR) = ""
 	}
 	ipicref(ITEM_ID_PLANT_ADORNED_PILLAR) = xy2pic(30, 15)
 	iknownnameref(ITEM_ID_PLANT_ADORNED_PILLAR) = ioriginalnameref(ITEM_ID_PLANT_ADORNED_PILLAR)
 	icolref(ITEM_ID_PLANT_ADORNED_PILLAR) = COLOR_DEFAULT
@@ -138814,11 +141082,11 @@
 	iorgweight(ITEM_ID_ANEMONE) = 300
 	if ( jp ) {
 		ioriginalnameref(ITEM_ID_ANEMONE) = "アネモネの花"
 	}
 	else {
-		ioriginalnameref(ITEM_ID_ANEMONE) = "anemone"
+		ioriginalnameref(ITEM_ID_ANEMONE) = "anemos"
 		ioriginalnameref2(ITEM_ID_ANEMONE) = ""
 	}
 	ipicref(ITEM_ID_ANEMONE) = xy2pic(28, 3)
 	iknownnameref(ITEM_ID_ANEMONE) = ioriginalnameref(ITEM_ID_ANEMONE)
 	icolref(ITEM_ID_ANEMONE) = COLOR_RANDOM
@@ -138866,11 +141134,11 @@
 	iorgweight(ITEM_ID_LARGE_DECORATIVE_PLANT) = 380
 	if ( jp ) {
 		ioriginalnameref(ITEM_ID_LARGE_DECORATIVE_PLANT) = "大きい観葉植物"
 	}
 	else {
-		ioriginalnameref(ITEM_ID_LARGE_DECORATIVE_PLANT) = "large decorative plant"
+		ioriginalnameref(ITEM_ID_LARGE_DECORATIVE_PLANT) = "large foliage plant"
 		ioriginalnameref2(ITEM_ID_LARGE_DECORATIVE_PLANT) = ""
 	}
 	ipicref(ITEM_ID_LARGE_DECORATIVE_PLANT) = xy2pic(24, 3)
 	iknownnameref(ITEM_ID_LARGE_DECORATIVE_PLANT) = ioriginalnameref(ITEM_ID_LARGE_DECORATIVE_PLANT)
 	icolref(ITEM_ID_LARGE_DECORATIVE_PLANT) = COLOR_RANDOM
@@ -138879,11 +141147,11 @@
 	iorgweight(ITEM_ID_BANKS_ROSE) = 400
 	if ( jp ) {
 		ioriginalnameref(ITEM_ID_BANKS_ROSE) = "木香薔薇"
 	}
 	else {
-		ioriginalnameref(ITEM_ID_BANKS_ROSE) = "banks' rose"
+		ioriginalnameref(ITEM_ID_BANKS_ROSE) = "rose"
 		ioriginalnameref2(ITEM_ID_BANKS_ROSE) = ""
 	}
 	ipicref(ITEM_ID_BANKS_ROSE) = xy2pic(23, 3)
 	iknownnameref(ITEM_ID_BANKS_ROSE) = ioriginalnameref(ITEM_ID_BANKS_ROSE)
 	icolref(ITEM_ID_BANKS_ROSE) = COLOR_RANDOM
@@ -138892,11 +141160,11 @@
 	iorgweight(ITEM_ID_SMALL_DECORATIVE_PLANT) = 420
 	if ( jp ) {
 		ioriginalnameref(ITEM_ID_SMALL_DECORATIVE_PLANT) = "小さい観葉植物"
 	}
 	else {
-		ioriginalnameref(ITEM_ID_SMALL_DECORATIVE_PLANT) = "small decorative plant"
+		ioriginalnameref(ITEM_ID_SMALL_DECORATIVE_PLANT) = "small foliage plant"
 		ioriginalnameref2(ITEM_ID_SMALL_DECORATIVE_PLANT) = ""
 	}
 	ipicref(ITEM_ID_SMALL_DECORATIVE_PLANT) = xy2pic(22, 3)
 	iknownnameref(ITEM_ID_SMALL_DECORATIVE_PLANT) = ioriginalnameref(ITEM_ID_SMALL_DECORATIVE_PLANT)
 	icolref(ITEM_ID_SMALL_DECORATIVE_PLANT) = COLOR_RANDOM
@@ -138905,11 +141173,11 @@
 	iorgweight(ITEM_ID_MAGIC_CIRCLE) = 1840
 	if ( jp ) {
 		ioriginalnameref(ITEM_ID_MAGIC_CIRCLE) = "魔法陣"
 	}
 	else {
-		ioriginalnameref(ITEM_ID_MAGIC_CIRCLE) = "magic circle"
+		ioriginalnameref(ITEM_ID_MAGIC_CIRCLE) = "pentagram"
 		ioriginalnameref2(ITEM_ID_MAGIC_CIRCLE) = ""
 	}
 	ipicref(ITEM_ID_MAGIC_CIRCLE) = xy2pic(21, 3)
 	iknownnameref(ITEM_ID_MAGIC_CIRCLE) = ioriginalnameref(ITEM_ID_MAGIC_CIRCLE)
 	icolref(ITEM_ID_MAGIC_CIRCLE) = COLOR_RANDOM
@@ -138918,11 +141186,11 @@
 	iorgweight(ITEM_ID_ALCHEMY_TOOLS) = 900
 	if ( jp ) {
 		ioriginalnameref(ITEM_ID_ALCHEMY_TOOLS) = "錬金術の道具"
 	}
 	else {
-		ioriginalnameref(ITEM_ID_ALCHEMY_TOOLS) = "alchemy tools"
+		ioriginalnameref(ITEM_ID_ALCHEMY_TOOLS) = "alchemy kit"
 		ioriginalnameref2(ITEM_ID_ALCHEMY_TOOLS) = ""
 	}
 	ipicref(ITEM_ID_ALCHEMY_TOOLS) = xy2pic(20, 3)
 	iknownnameref(ITEM_ID_ALCHEMY_TOOLS) = ioriginalnameref(ITEM_ID_ALCHEMY_TOOLS)
 	icolref(ITEM_ID_ALCHEMY_TOOLS) = COLOR_RANDOM
@@ -138944,27 +141212,27 @@
 	iorgweight(ITEM_ID_ROD_LIFE) = 400
 	if ( jp ) {
 		ioriginalnameref(ITEM_ID_ROD_LIFE) = "生命の杖"
 	}
 	else {
-		ioriginalnameref(ITEM_ID_ROD_LIFE) = "life"
+		ioriginalnameref(ITEM_ID_ROD_LIFE) = "heal"
 		ioriginalnameref2(ITEM_ID_ROD_LIFE) = "rod"
 	}
 	ipicref(ITEM_ID_ROD_LIFE) = xy2pic(9, 14)
-	p = (ITEM_ID_ROD_LIFE + gdata(GDATA_RAND_SEED_A)) \ 6
+	p = (125 + gdata(GDATA_RAND_SEED_A)) \ 6
 	iknownnameref(ITEM_ID_ROD_LIFE) = _namestaff(p) + strblank + strstaff
 	icolref(ITEM_ID_ROD_LIFE) = _randcolor(p)
 	irandomname(ITEM_ID_ROD_LIFE) = 1
 	ilight(ITEM_ID_BREAD_DISPLAY) = LIGHT_TYPE_NONE
 	ialphanameref(ITEM_ID_BREAD_DISPLAY) = ""
 	iorgweight(ITEM_ID_BREAD_DISPLAY) = 7800
 	if ( jp ) {
 		ioriginalnameref(ITEM_ID_BREAD_DISPLAY) = "パンの陳列棚"
 	}
 	else {
-		ioriginalnameref(ITEM_ID_BREAD_DISPLAY) = "bread display"
-		ioriginalnameref2(ITEM_ID_BREAD_DISPLAY) = ""
+		ioriginalnameref(ITEM_ID_BREAD_DISPLAY) = "breads"
+		ioriginalnameref2(ITEM_ID_BREAD_DISPLAY) = "show case"
 	}
 	ipicref(ITEM_ID_BREAD_DISPLAY) = xy2pic(17, 3)
 	iknownnameref(ITEM_ID_BREAD_DISPLAY) = ioriginalnameref(ITEM_ID_BREAD_DISPLAY)
 	icolref(ITEM_ID_BREAD_DISPLAY) = COLOR_DEFAULT
 	ilight(ITEM_ID_ROD_FIRE_BOLT) = LIGHT_TYPE_NONE
@@ -138976,11 +141244,11 @@
 	else {
 		ioriginalnameref(ITEM_ID_ROD_FIRE_BOLT) = "fire bolt"
 		ioriginalnameref2(ITEM_ID_ROD_FIRE_BOLT) = "rod"
 	}
 	ipicref(ITEM_ID_ROD_FIRE_BOLT) = xy2pic(9, 14)
-	p = (ITEM_ID_ROD_FIRE_BOLT + gdata(GDATA_RAND_SEED_A)) \ 6
+	p = (123 + gdata(GDATA_RAND_SEED_A)) \ 6
 	iknownnameref(ITEM_ID_ROD_FIRE_BOLT) = _namestaff(p) + strblank + strstaff
 	icolref(ITEM_ID_ROD_FIRE_BOLT) = _randcolor(p)
 	irandomname(ITEM_ID_ROD_FIRE_BOLT) = 1
 	ilight(ITEM_ID_ROD_ICE_BOLT) = LIGHT_TYPE_NONE
 	ialphanameref(ITEM_ID_ROD_ICE_BOLT) = ""
@@ -138991,11 +141259,11 @@
 	else {
 		ioriginalnameref(ITEM_ID_ROD_ICE_BOLT) = "ice bolt"
 		ioriginalnameref2(ITEM_ID_ROD_ICE_BOLT) = "rod"
 	}
 	ipicref(ITEM_ID_ROD_ICE_BOLT) = xy2pic(9, 14)
-	p = (ITEM_ID_ROD_ICE_BOLT + gdata(GDATA_RAND_SEED_A)) \ 6
+	p = (122 + gdata(GDATA_RAND_SEED_A)) \ 6
 	iknownnameref(ITEM_ID_ROD_ICE_BOLT) = _namestaff(p) + strblank + strstaff
 	icolref(ITEM_ID_ROD_ICE_BOLT) = _randcolor(p)
 	irandomname(ITEM_ID_ROD_ICE_BOLT) = 1
 	ilight(ITEM_ID_ROD_SUMMON_MONSTERS) = LIGHT_TYPE_NONE
 	ialphanameref(ITEM_ID_ROD_SUMMON_MONSTERS) = ""
@@ -139006,11 +141274,11 @@
 	else {
 		ioriginalnameref(ITEM_ID_ROD_SUMMON_MONSTERS) = "summon monsters"
 		ioriginalnameref2(ITEM_ID_ROD_SUMMON_MONSTERS) = "rod"
 	}
 	ipicref(ITEM_ID_ROD_SUMMON_MONSTERS) = xy2pic(9, 14)
-	p = (ITEM_ID_ROD_SUMMON_MONSTERS + gdata(GDATA_RAND_SEED_A)) \ 6
+	p = (121 + gdata(GDATA_RAND_SEED_A)) \ 6
 	iknownnameref(ITEM_ID_ROD_SUMMON_MONSTERS) = _namestaff(p) + strblank + strstaff
 	icolref(ITEM_ID_ROD_SUMMON_MONSTERS) = _randcolor(p)
 	irandomname(ITEM_ID_ROD_SUMMON_MONSTERS) = 1
 	ilight(ITEM_ID_ROD_MAGIC_MISSILE) = LIGHT_TYPE_NONE
 	ialphanameref(ITEM_ID_ROD_MAGIC_MISSILE) = ""
@@ -139021,11 +141289,11 @@
 	else {
 		ioriginalnameref(ITEM_ID_ROD_MAGIC_MISSILE) = "magic missile"
 		ioriginalnameref2(ITEM_ID_ROD_MAGIC_MISSILE) = "rod"
 	}
 	ipicref(ITEM_ID_ROD_MAGIC_MISSILE) = xy2pic(9, 14)
-	p = (ITEM_ID_ROD_MAGIC_MISSILE + gdata(GDATA_RAND_SEED_A)) \ 6
+	p = (120 + gdata(GDATA_RAND_SEED_A)) \ 6
 	iknownnameref(ITEM_ID_ROD_MAGIC_MISSILE) = _namestaff(p) + strblank + strstaff
 	icolref(ITEM_ID_ROD_MAGIC_MISSILE) = _randcolor(p)
 	irandomname(ITEM_ID_ROD_MAGIC_MISSILE) = 1
 	ilight(ITEM_ID_ROD_CURE_MINOR_WOUND) = LIGHT_TYPE_NONE
 	ialphanameref(ITEM_ID_ROD_CURE_MINOR_WOUND) = ""
@@ -139036,11 +141304,11 @@
 	else {
 		ioriginalnameref(ITEM_ID_ROD_CURE_MINOR_WOUND) = "cure minor wound"
 		ioriginalnameref2(ITEM_ID_ROD_CURE_MINOR_WOUND) = "rod"
 	}
 	ipicref(ITEM_ID_ROD_CURE_MINOR_WOUND) = xy2pic(9, 14)
-	p = (ITEM_ID_ROD_CURE_MINOR_WOUND + gdata(GDATA_RAND_SEED_A)) \ 6
+	p = (119 + gdata(GDATA_RAND_SEED_A)) \ 6
 	iknownnameref(ITEM_ID_ROD_CURE_MINOR_WOUND) = _namestaff(p) + strblank + strstaff
 	icolref(ITEM_ID_ROD_CURE_MINOR_WOUND) = _randcolor(p)
 	irandomname(ITEM_ID_ROD_CURE_MINOR_WOUND) = 1
 	ilight(ITEM_ID_SPELLBOOK_SUMMON_MONSTERS) = LIGHT_TYPE_NONE
 	ialphanameref(ITEM_ID_SPELLBOOK_SUMMON_MONSTERS) = ""
@@ -139051,11 +141319,11 @@
 	else {
 		ioriginalnameref(ITEM_ID_SPELLBOOK_SUMMON_MONSTERS) = "summon monsters"
 		ioriginalnameref2(ITEM_ID_SPELLBOOK_SUMMON_MONSTERS) = "spellbook"
 	}
 	ipicref(ITEM_ID_SPELLBOOK_SUMMON_MONSTERS) = xy2pic(0, 13)
-	p = (ITEM_ID_SPELLBOOK_SUMMON_MONSTERS + gdata(GDATA_RAND_SEED_A)) \ 6
+	p = (118 + gdata(GDATA_RAND_SEED_A)) \ 6
 	iknownnameref(ITEM_ID_SPELLBOOK_SUMMON_MONSTERS) = _namespellbook(p) + strblank + strspellbook
 	icolref(ITEM_ID_SPELLBOOK_SUMMON_MONSTERS) = _randcolor(p)
 	irandomname(ITEM_ID_SPELLBOOK_SUMMON_MONSTERS) = 1
 	ilight(ITEM_ID_EMPTY_BASKET) = LIGHT_TYPE_NONE
 	ialphanameref(ITEM_ID_EMPTY_BASKET) = ""
@@ -139079,22 +141347,22 @@
 	else {
 		ioriginalnameref(ITEM_ID_SPELLBOOK_MINOR_TELEPORTATION) = "minor teleportation"
 		ioriginalnameref2(ITEM_ID_SPELLBOOK_MINOR_TELEPORTATION) = "spellbook"
 	}
 	ipicref(ITEM_ID_SPELLBOOK_MINOR_TELEPORTATION) = xy2pic(0, 13)
-	p = (ITEM_ID_SPELLBOOK_MINOR_TELEPORTATION + gdata(GDATA_RAND_SEED_A)) \ 6
+	p = (116 + gdata(GDATA_RAND_SEED_A)) \ 6
 	iknownnameref(ITEM_ID_SPELLBOOK_MINOR_TELEPORTATION) = _namespellbook(p) + strblank + strspellbook
 	icolref(ITEM_ID_SPELLBOOK_MINOR_TELEPORTATION) = _randcolor(p)
 	irandomname(ITEM_ID_SPELLBOOK_MINOR_TELEPORTATION) = 1
 	ilight(ITEM_ID_NOTICE_BOARD) = LIGHT_TYPE_NONE
 	ialphanameref(ITEM_ID_NOTICE_BOARD) = ""
 	iorgweight(ITEM_ID_NOTICE_BOARD) = 9500
 	if ( jp ) {
 		ioriginalnameref(ITEM_ID_NOTICE_BOARD) = "掲示板"
 	}
 	else {
-		ioriginalnameref(ITEM_ID_NOTICE_BOARD) = "notice board"
+		ioriginalnameref(ITEM_ID_NOTICE_BOARD) = "board"
 		ioriginalnameref2(ITEM_ID_NOTICE_BOARD) = ""
 	}
 	ipicref(ITEM_ID_NOTICE_BOARD) = xy2pic(18, 11)
 	iknownnameref(ITEM_ID_NOTICE_BOARD) = ioriginalnameref(ITEM_ID_NOTICE_BOARD)
 	icolref(ITEM_ID_NOTICE_BOARD) = COLOR_DEFAULT
@@ -139103,11 +141371,11 @@
 	iorgweight(ITEM_ID_SIGNPOST) = 3500
 	if ( jp ) {
 		ioriginalnameref(ITEM_ID_SIGNPOST) = "道標"
 	}
 	else {
-		ioriginalnameref(ITEM_ID_SIGNPOST) = "signpost"
+		ioriginalnameref(ITEM_ID_SIGNPOST) = "crossroad sign"
 		ioriginalnameref2(ITEM_ID_SIGNPOST) = ""
 	}
 	ipicref(ITEM_ID_SIGNPOST) = xy2pic(7, 3)
 	iknownnameref(ITEM_ID_SIGNPOST) = ioriginalnameref(ITEM_ID_SIGNPOST)
 	icolref(ITEM_ID_SIGNPOST) = COLOR_DEFAULT
@@ -139142,11 +141410,11 @@
 	iorgweight(ITEM_ID_SMELTER) = 45800
 	if ( jp ) {
 		ioriginalnameref(ITEM_ID_SMELTER) = "溶解炉"
 	}
 	else {
-		ioriginalnameref(ITEM_ID_SMELTER) = "smelter"
+		ioriginalnameref(ITEM_ID_SMELTER) = "furnace"
 		ioriginalnameref2(ITEM_ID_SMELTER) = ""
 	}
 	ipicref(ITEM_ID_SMELTER) = xy2pic(4, 3)
 	iknownnameref(ITEM_ID_SMELTER) = ioriginalnameref(ITEM_ID_SMELTER)
 	icolref(ITEM_ID_SMELTER) = COLOR_DEFAULT
@@ -139207,11 +141475,11 @@
 	iorgweight(ITEM_ID_STORAGE_RACK) = 6800
 	if ( jp ) {
 		ioriginalnameref(ITEM_ID_STORAGE_RACK) = "収納棚"
 	}
 	else {
-		ioriginalnameref(ITEM_ID_STORAGE_RACK) = "storage rack"
+		ioriginalnameref(ITEM_ID_STORAGE_RACK) = "closet"
 		ioriginalnameref2(ITEM_ID_STORAGE_RACK) = ""
 	}
 	ipicref(ITEM_ID_STORAGE_RACK) = xy2pic(32, 2)
 	iknownnameref(ITEM_ID_STORAGE_RACK) = ioriginalnameref(ITEM_ID_STORAGE_RACK)
 	icolref(ITEM_ID_STORAGE_RACK) = COLOR_RANDOM
@@ -139220,11 +141488,11 @@
 	iorgweight(ITEM_ID_TIDY_BOOKSHELF) = 7600
 	if ( jp ) {
 		ioriginalnameref(ITEM_ID_TIDY_BOOKSHELF) = "本たてつきの棚"
 	}
 	else {
-		ioriginalnameref(ITEM_ID_TIDY_BOOKSHELF) = "tidy bookshelf"
+		ioriginalnameref(ITEM_ID_TIDY_BOOKSHELF) = "neat shelf"
 		ioriginalnameref2(ITEM_ID_TIDY_BOOKSHELF) = ""
 	}
 	ipicref(ITEM_ID_TIDY_BOOKSHELF) = xy2pic(31, 2)
 	iknownnameref(ITEM_ID_TIDY_BOOKSHELF) = ioriginalnameref(ITEM_ID_TIDY_BOOKSHELF)
 	icolref(ITEM_ID_TIDY_BOOKSHELF) = COLOR_DEFAULT
@@ -139233,11 +141501,11 @@
 	iorgweight(ITEM_ID_SHED) = 8200
 	if ( jp ) {
 		ioriginalnameref(ITEM_ID_SHED) = "物置"
 	}
 	else {
-		ioriginalnameref(ITEM_ID_SHED) = "shed"
+		ioriginalnameref(ITEM_ID_SHED) = "barn"
 		ioriginalnameref2(ITEM_ID_SHED) = ""
 	}
 	ipicref(ITEM_ID_SHED) = xy2pic(30, 2)
 	iknownnameref(ITEM_ID_SHED) = ioriginalnameref(ITEM_ID_SHED)
 	icolref(ITEM_ID_SHED) = COLOR_DEFAULT
@@ -139285,12 +141553,12 @@
 	iorgweight(ITEM_ID_POTION_RACK) = 8000
 	if ( jp ) {
 		ioriginalnameref(ITEM_ID_POTION_RACK) = "ポーションの棚"
 	}
 	else {
-		ioriginalnameref(ITEM_ID_POTION_RACK) = "potion rack"
-		ioriginalnameref2(ITEM_ID_POTION_RACK) = ""
+		ioriginalnameref(ITEM_ID_POTION_RACK) = "potions"
+		ioriginalnameref2(ITEM_ID_POTION_RACK) = "rack"
 	}
 	ipicref(ITEM_ID_POTION_RACK) = xy2pic(19, 17)
 	iknownnameref(ITEM_ID_POTION_RACK) = ioriginalnameref(ITEM_ID_POTION_RACK)
 	icolref(ITEM_ID_POTION_RACK) = COLOR_DEFAULT
 	ilight(ITEM_ID_WRITING_DESK) = LIGHT_TYPE_NONE
@@ -139298,11 +141566,11 @@
 	iorgweight(ITEM_ID_WRITING_DESK) = 4200
 	if ( jp ) {
 		ioriginalnameref(ITEM_ID_WRITING_DESK) = "勉強机"
 	}
 	else {
-		ioriginalnameref(ITEM_ID_WRITING_DESK) = "writing desk"
+		ioriginalnameref(ITEM_ID_WRITING_DESK) = "academic table"
 		ioriginalnameref2(ITEM_ID_WRITING_DESK) = ""
 	}
 	ipicref(ITEM_ID_WRITING_DESK) = xy2pic(25, 2)
 	iknownnameref(ITEM_ID_WRITING_DESK) = ioriginalnameref(ITEM_ID_WRITING_DESK)
 	icolref(ITEM_ID_WRITING_DESK) = COLOR_RANDOM
@@ -139311,11 +141579,11 @@
 	iorgweight(ITEM_ID_OPEN_VASE) = 540
 	if ( jp ) {
 		ioriginalnameref(ITEM_ID_OPEN_VASE) = "開いているつぼ"
 	}
 	else {
-		ioriginalnameref(ITEM_ID_OPEN_VASE) = "open vase"
+		ioriginalnameref(ITEM_ID_OPEN_VASE) = "open pot"
 		ioriginalnameref2(ITEM_ID_OPEN_VASE) = ""
 	}
 	ipicref(ITEM_ID_OPEN_VASE) = xy2pic(24, 2)
 	iknownnameref(ITEM_ID_OPEN_VASE) = ioriginalnameref(ITEM_ID_OPEN_VASE)
 	icolref(ITEM_ID_OPEN_VASE) = COLOR_RANDOM
@@ -139324,11 +141592,11 @@
 	iorgweight(ITEM_ID_SEALED_VASE) = 420
 	if ( jp ) {
 		ioriginalnameref(ITEM_ID_SEALED_VASE) = "密封されたつぼ"
 	}
 	else {
-		ioriginalnameref(ITEM_ID_SEALED_VASE) = "sealed vase"
+		ioriginalnameref(ITEM_ID_SEALED_VASE) = "closed pot"
 		ioriginalnameref2(ITEM_ID_SEALED_VASE) = ""
 	}
 	ipicref(ITEM_ID_SEALED_VASE) = xy2pic(23, 2)
 	iknownnameref(ITEM_ID_SEALED_VASE) = ioriginalnameref(ITEM_ID_SEALED_VASE)
 	icolref(ITEM_ID_SEALED_VASE) = COLOR_RANDOM
@@ -139350,11 +141618,11 @@
 	iorgweight(ITEM_ID_ORNAMENTAL_ARMOR) = 3800
 	if ( jp ) {
 		ioriginalnameref(ITEM_ID_ORNAMENTAL_ARMOR) = "飾り物の鎧"
 	}
 	else {
-		ioriginalnameref(ITEM_ID_ORNAMENTAL_ARMOR) = "ornamental armor"
+		ioriginalnameref(ITEM_ID_ORNAMENTAL_ARMOR) = "decorative armor"
 		ioriginalnameref2(ITEM_ID_ORNAMENTAL_ARMOR) = ""
 	}
 	ipicref(ITEM_ID_ORNAMENTAL_ARMOR) = xy2pic(21, 2)
 	iknownnameref(ITEM_ID_ORNAMENTAL_ARMOR) = ioriginalnameref(ITEM_ID_ORNAMENTAL_ARMOR)
 	icolref(ITEM_ID_ORNAMENTAL_ARMOR) = COLOR_RANDOM
@@ -139376,11 +141644,11 @@
 	iorgweight(ITEM_ID_PICKAXE) = 1200
 	if ( jp ) {
 		ioriginalnameref(ITEM_ID_PICKAXE) = "つるはし"
 	}
 	else {
-		ioriginalnameref(ITEM_ID_PICKAXE) = "pickaxe"
+		ioriginalnameref(ITEM_ID_PICKAXE) = "pick"
 		ioriginalnameref2(ITEM_ID_PICKAXE) = ""
 	}
 	ipicref(ITEM_ID_PICKAXE) = xy2pic(19, 2)
 	iknownnameref(ITEM_ID_PICKAXE) = ioriginalnameref(ITEM_ID_PICKAXE)
 	icolref(ITEM_ID_PICKAXE) = COLOR_RANDOM
@@ -139389,11 +141657,11 @@
 	iorgweight(ITEM_ID_STYLISH_CHAIR) = 1100
 	if ( jp ) {
 		ioriginalnameref(ITEM_ID_STYLISH_CHAIR) = "お洒落な椅子"
 	}
 	else {
-		ioriginalnameref(ITEM_ID_STYLISH_CHAIR) = "stylish chair"
+		ioriginalnameref(ITEM_ID_STYLISH_CHAIR) = "modern chair"
 		ioriginalnameref2(ITEM_ID_STYLISH_CHAIR) = ""
 	}
 	ipicref(ITEM_ID_STYLISH_CHAIR) = xy2pic(18, 2)
 	iknownnameref(ITEM_ID_STYLISH_CHAIR) = ioriginalnameref(ITEM_ID_STYLISH_CHAIR)
 	icolref(ITEM_ID_STYLISH_CHAIR) = COLOR_RANDOM
@@ -139454,12 +141722,12 @@
 	iorgweight(ITEM_ID_VARIOUS_ACCESSORIES) = 750
 	if ( jp ) {
 		ioriginalnameref(ITEM_ID_VARIOUS_ACCESSORIES) = "色とりどりの装飾品"
 	}
 	else {
-		ioriginalnameref(ITEM_ID_VARIOUS_ACCESSORIES) = "various accessories"
-		ioriginalnameref2(ITEM_ID_VARIOUS_ACCESSORIES) = ""
+		ioriginalnameref(ITEM_ID_VARIOUS_ACCESSORIES) = "accessories"
+		ioriginalnameref2(ITEM_ID_VARIOUS_ACCESSORIES) = "lot"
 	}
 	ipicref(ITEM_ID_VARIOUS_ACCESSORIES) = xy2pic(9, 2)
 	iknownnameref(ITEM_ID_VARIOUS_ACCESSORIES) = ioriginalnameref(ITEM_ID_VARIOUS_ACCESSORIES)
 	icolref(ITEM_ID_VARIOUS_ACCESSORIES) = COLOR_RANDOM
 	ilight(ITEM_ID_GOODS) = LIGHT_TYPE_NONE
@@ -139468,11 +141736,11 @@
 	if ( jp ) {
 		ioriginalnameref(ITEM_ID_GOODS) = "たくさんの雑貨"
 	}
 	else {
 		ioriginalnameref(ITEM_ID_GOODS) = "goods"
-		ioriginalnameref2(ITEM_ID_GOODS) = ""
+		ioriginalnameref2(ITEM_ID_GOODS) = "lot"
 	}
 	ipicref(ITEM_ID_GOODS) = xy2pic(8, 2)
 	iknownnameref(ITEM_ID_GOODS) = ioriginalnameref(ITEM_ID_GOODS)
 	icolref(ITEM_ID_GOODS) = COLOR_RANDOM
 	ilight(ITEM_ID_ARMOR) = LIGHT_TYPE_NONE
@@ -139532,11 +141800,11 @@
 	iorgweight(ITEM_ID_PLUSH_DOLL) = 350
 	if ( jp ) {
 		ioriginalnameref(ITEM_ID_PLUSH_DOLL) = "ぬいぐるみ"
 	}
 	else {
-		ioriginalnameref(ITEM_ID_PLUSH_DOLL) = "plush doll"
+		ioriginalnameref(ITEM_ID_PLUSH_DOLL) = "rag doll"
 		ioriginalnameref2(ITEM_ID_PLUSH_DOLL) = ""
 	}
 	ipicref(ITEM_ID_PLUSH_DOLL) = xy2pic(1, 2)
 	iknownnameref(ITEM_ID_PLUSH_DOLL) = ioriginalnameref(ITEM_ID_PLUSH_DOLL)
 	icolref(ITEM_ID_PLUSH_DOLL) = COLOR_RANDOM
@@ -139545,11 +141813,11 @@
 	iorgweight(ITEM_ID_CHEAP_BED) = 15000
 	if ( jp ) {
 		ioriginalnameref(ITEM_ID_CHEAP_BED) = "安物ベッド"
 	}
 	else {
-		ioriginalnameref(ITEM_ID_CHEAP_BED) = "cheap bed"
+		ioriginalnameref(ITEM_ID_CHEAP_BED) = "boring bed"
 		ioriginalnameref2(ITEM_ID_CHEAP_BED) = ""
 	}
 	ipicref(ITEM_ID_CHEAP_BED) = xy2pic(0, 2)
 	iknownnameref(ITEM_ID_CHEAP_BED) = ioriginalnameref(ITEM_ID_CHEAP_BED)
 	icolref(ITEM_ID_CHEAP_BED) = COLOR_RANDOM
@@ -139597,30 +141865,30 @@
 	iorgweight(ITEM_ID_POTION_SACRED_HEALER_JURE) = 120
 	if ( jp ) {
 		ioriginalnameref(ITEM_ID_POTION_SACRED_HEALER_JURE) = "聖なる癒し手ジュアのポーション"
 	}
 	else {
-		ioriginalnameref(ITEM_ID_POTION_SACRED_HEALER_JURE) = "sacred healer <Jure>"
+		ioriginalnameref(ITEM_ID_POTION_SACRED_HEALER_JURE) = "healer <Jure>"
 		ioriginalnameref2(ITEM_ID_POTION_SACRED_HEALER_JURE) = "potion"
 	}
 	ipicref(ITEM_ID_POTION_SACRED_HEALER_JURE) = xy2pic(24, 10)
-	p = (ITEM_ID_POTION_SACRED_HEALER_JURE + gdata(GDATA_RAND_SEED_A)) \ 6
+	p = (76 + gdata(GDATA_RAND_SEED_A)) \ 6
 	iknownnameref(ITEM_ID_POTION_SACRED_HEALER_JURE) = _namepotion(p) + strblank + strpotion
 	icolref(ITEM_ID_POTION_SACRED_HEALER_JURE) = _randcolor(p)
 	irandomname(ITEM_ID_POTION_SACRED_HEALER_JURE) = 1
 	ilight(ITEM_ID_POTION_WHITE_HEALER_ERIS) = LIGHT_TYPE_NONE
 	ialphanameref(ITEM_ID_POTION_WHITE_HEALER_ERIS) = ""
 	iorgweight(ITEM_ID_POTION_WHITE_HEALER_ERIS) = 120
 	if ( jp ) {
 		ioriginalnameref(ITEM_ID_POTION_WHITE_HEALER_ERIS) = "白き癒し手エリスのポーション"
 	}
 	else {
-		ioriginalnameref(ITEM_ID_POTION_WHITE_HEALER_ERIS) = "white healer <Eris>"
+		ioriginalnameref(ITEM_ID_POTION_WHITE_HEALER_ERIS) = "healer <Eris>"
 		ioriginalnameref2(ITEM_ID_POTION_WHITE_HEALER_ERIS) = "potion"
 	}
 	ipicref(ITEM_ID_POTION_WHITE_HEALER_ERIS) = xy2pic(24, 10)
-	p = (ITEM_ID_POTION_WHITE_HEALER_ERIS + gdata(GDATA_RAND_SEED_A)) \ 6
+	p = (75 + gdata(GDATA_RAND_SEED_A)) \ 6
 	iknownnameref(ITEM_ID_POTION_WHITE_HEALER_ERIS) = _namepotion(p) + strblank + strpotion
 	icolref(ITEM_ID_POTION_WHITE_HEALER_ERIS) = _randcolor(p)
 	irandomname(ITEM_ID_POTION_WHITE_HEALER_ERIS) = 1
 	ilight(ITEM_ID_POTION_HEALER_ODINA) = LIGHT_TYPE_NONE
 	ialphanameref(ITEM_ID_POTION_HEALER_ODINA) = ""
@@ -139631,11 +141899,11 @@
 	else {
 		ioriginalnameref(ITEM_ID_POTION_HEALER_ODINA) = "healer <Odina>"
 		ioriginalnameref2(ITEM_ID_POTION_HEALER_ODINA) = "potion"
 	}
 	ipicref(ITEM_ID_POTION_HEALER_ODINA) = xy2pic(24, 10)
-	p = (ITEM_ID_POTION_HEALER_ODINA + gdata(GDATA_RAND_SEED_A)) \ 6
+	p = (74 + gdata(GDATA_RAND_SEED_A)) \ 6
 	iknownnameref(ITEM_ID_POTION_HEALER_ODINA) = _namepotion(p) + strblank + strpotion
 	icolref(ITEM_ID_POTION_HEALER_ODINA) = _randcolor(p)
 	irandomname(ITEM_ID_POTION_HEALER_ODINA) = 1
 	ilight(ITEM_ID_RAGNAROK) = LIGHT_TYPE_ITEM
 	ialphanameref(ITEM_ID_RAGNAROK) = ""
@@ -139664,26 +141932,26 @@
 	else {
 		ioriginalnameref(ITEM_ID_POTION_HEALER) = "healer"
 		ioriginalnameref2(ITEM_ID_POTION_HEALER) = "potion"
 	}
 	ipicref(ITEM_ID_POTION_HEALER) = xy2pic(24, 10)
-	p = (ITEM_ID_POTION_HEALER + gdata(GDATA_RAND_SEED_A)) \ 6
+	p = (72 + gdata(GDATA_RAND_SEED_A)) \ 6
 	iknownnameref(ITEM_ID_POTION_HEALER) = _namepotion(p) + strblank + strpotion
 	icolref(ITEM_ID_POTION_HEALER) = _randcolor(p)
 	irandomname(ITEM_ID_POTION_HEALER) = 1
 	ilight(ITEM_ID_POTION_VITALITY) = LIGHT_TYPE_NONE
 	ialphanameref(ITEM_ID_POTION_VITALITY) = ""
 	iorgweight(ITEM_ID_POTION_VITALITY) = 120
 	if ( jp ) {
 		ioriginalnameref(ITEM_ID_POTION_VITALITY) = "体力回復のポーション"
 	}
 	else {
-		ioriginalnameref(ITEM_ID_POTION_VITALITY) = "vitality"
+		ioriginalnameref(ITEM_ID_POTION_VITALITY) = "healing"
 		ioriginalnameref2(ITEM_ID_POTION_VITALITY) = "potion"
 	}
 	ipicref(ITEM_ID_POTION_VITALITY) = xy2pic(24, 10)
-	p = (ITEM_ID_POTION_VITALITY + gdata(GDATA_RAND_SEED_A)) \ 6
+	p = (71 + gdata(GDATA_RAND_SEED_A)) \ 6
 	iknownnameref(ITEM_ID_POTION_VITALITY) = _namepotion(p) + strblank + strpotion
 	icolref(ITEM_ID_POTION_VITALITY) = _randcolor(p)
 	irandomname(ITEM_ID_POTION_VITALITY) = 1
 	ilight(ITEM_ID_POTION_CURE_CRITICAL_WOUND) = LIGHT_TYPE_NONE
 	ialphanameref(ITEM_ID_POTION_CURE_CRITICAL_WOUND) = ""
@@ -139694,11 +141962,11 @@
 	else {
 		ioriginalnameref(ITEM_ID_POTION_CURE_CRITICAL_WOUND) = "cure critical wound"
 		ioriginalnameref2(ITEM_ID_POTION_CURE_CRITICAL_WOUND) = "potion"
 	}
 	ipicref(ITEM_ID_POTION_CURE_CRITICAL_WOUND) = xy2pic(24, 10)
-	p = (ITEM_ID_POTION_CURE_CRITICAL_WOUND + gdata(GDATA_RAND_SEED_A)) \ 6
+	p = (70 + gdata(GDATA_RAND_SEED_A)) \ 6
 	iknownnameref(ITEM_ID_POTION_CURE_CRITICAL_WOUND) = _namepotion(p) + strblank + strpotion
 	icolref(ITEM_ID_POTION_CURE_CRITICAL_WOUND) = _randcolor(p)
 	irandomname(ITEM_ID_POTION_CURE_CRITICAL_WOUND) = 1
 	ilight(ITEM_ID_POTION_CURE_MAJOR_WOUND) = LIGHT_TYPE_NONE
 	ialphanameref(ITEM_ID_POTION_CURE_MAJOR_WOUND) = ""
@@ -139709,11 +141977,11 @@
 	else {
 		ioriginalnameref(ITEM_ID_POTION_CURE_MAJOR_WOUND) = "cure major wound"
 		ioriginalnameref2(ITEM_ID_POTION_CURE_MAJOR_WOUND) = "potion"
 	}
 	ipicref(ITEM_ID_POTION_CURE_MAJOR_WOUND) = xy2pic(24, 10)
-	p = (ITEM_ID_POTION_CURE_MAJOR_WOUND + gdata(GDATA_RAND_SEED_A)) \ 6
+	p = (69 + gdata(GDATA_RAND_SEED_A)) \ 6
 	iknownnameref(ITEM_ID_POTION_CURE_MAJOR_WOUND) = _namepotion(p) + strblank + strpotion
 	icolref(ITEM_ID_POTION_CURE_MAJOR_WOUND) = _randcolor(p)
 	irandomname(ITEM_ID_POTION_CURE_MAJOR_WOUND) = 1
 	ilight(ITEM_ID_POTION_CURE_MINOR_WOUND) = LIGHT_TYPE_NONE
 	ialphanameref(ITEM_ID_POTION_CURE_MINOR_WOUND) = ""
@@ -139724,11 +141992,11 @@
 	else {
 		ioriginalnameref(ITEM_ID_POTION_CURE_MINOR_WOUND) = "cure minor wound"
 		ioriginalnameref2(ITEM_ID_POTION_CURE_MINOR_WOUND) = "potion"
 	}
 	ipicref(ITEM_ID_POTION_CURE_MINOR_WOUND) = xy2pic(24, 10)
-	p = (ITEM_ID_POTION_CURE_MINOR_WOUND + gdata(GDATA_RAND_SEED_A)) \ 6
+	p = (68 + gdata(GDATA_RAND_SEED_A)) \ 6
 	iknownnameref(ITEM_ID_POTION_CURE_MINOR_WOUND) = _namepotion(p) + strblank + strpotion
 	icolref(ITEM_ID_POTION_CURE_MINOR_WOUND) = _randcolor(p)
 	irandomname(ITEM_ID_POTION_CURE_MINOR_WOUND) = 1
 	ilight(ITEM_ID_DECORATIVE_AMULET) = LIGHT_TYPE_NONE
 	ialphanameref(ITEM_ID_DECORATIVE_AMULET) = "ネックレス"
@@ -139739,11 +142007,11 @@
 	else {
 		ioriginalnameref(ITEM_ID_DECORATIVE_AMULET) = "decorative amulet"
 		ioriginalnameref2(ITEM_ID_DECORATIVE_AMULET) = ""
 	}
 	ipicref(ITEM_ID_DECORATIVE_AMULET) = xy2pic(2, 12)
-	p = (ITEM_ID_DECORATIVE_AMULET + gdata(GDATA_RAND_SEED_A)) \ 6
+	p = (67 + gdata(GDATA_RAND_SEED_A)) \ 6
 	iknownnameref(ITEM_ID_DECORATIVE_AMULET) = _namering(p) + strblank + stramulet
 	icolref(ITEM_ID_DECORATIVE_AMULET) = COLOR_DEFAULT
 	irandomname(ITEM_ID_DECORATIVE_AMULET) = 1
 	ilight(ITEM_ID_GIRDLE) = LIGHT_TYPE_NONE
 	ialphanameref(ITEM_ID_GIRDLE) = "ガードル"
@@ -139794,19 +142062,19 @@
 	iorgweight(ITEM_ID_SCYTHE_OF_THE_VOID) = 9000
 	if ( jp ) {
 		ioriginalnameref(ITEM_ID_SCYTHE_OF_THE_VOID) = "《虚無の大鎌》"
 	}
 	else {
-		ioriginalnameref(ITEM_ID_SCYTHE_OF_THE_VOID) = "<Scythe of the Void>"
+		ioriginalnameref(ITEM_ID_SCYTHE_OF_THE_VOID) = "<Scythe of Void>"
 		ioriginalnameref2(ITEM_ID_SCYTHE_OF_THE_VOID) = ""
 	}
 	ipicref(ITEM_ID_SCYTHE_OF_THE_VOID) = xy2pic(25, 12)
 	if ( jp ) {
 		iknownnameref(ITEM_ID_SCYTHE_OF_THE_VOID) = "死を奏でる大鎌"
 	}
 	else {
-		iknownnameref(ITEM_ID_SCYTHE_OF_THE_VOID) = "scythe that sings death"
+		iknownnameref(ITEM_ID_SCYTHE_OF_THE_VOID) = "sythe that sings death"
 	}
 	icolref(ITEM_ID_SCYTHE_OF_THE_VOID) = COLOR_RED
 	ilight(ITEM_ID_BULLET) = LIGHT_TYPE_NONE
 	ialphanameref(ITEM_ID_BULLET) = "バレット"
 	iorgweight(ITEM_ID_BULLET) = 2400
@@ -139877,11 +142145,11 @@
 	iorgweight(ITEM_ID_ZANTETSUKEN) = 1400
 	if ( jp ) {
 		ioriginalnameref(ITEM_ID_ZANTETSUKEN) = "《斬鉄剣》"
 	}
 	else {
-		ioriginalnameref(ITEM_ID_ZANTETSUKEN) = "<Zantetsuken>"
+		ioriginalnameref(ITEM_ID_ZANTETSUKEN) = "<Zantetsu>"
 		ioriginalnameref2(ITEM_ID_ZANTETSUKEN) = ""
 	}
 	ipicref(ITEM_ID_ZANTETSUKEN) = xy2pic(6, 15)
 	if ( jp ) {
 		iknownnameref(ITEM_ID_ZANTETSUKEN) = "白銀の刀"
@@ -139895,11 +142163,11 @@
 	iorgweight(ITEM_ID_DIABLOS) = 2200
 	if ( jp ) {
 		ioriginalnameref(ITEM_ID_DIABLOS) = "《ディアボロス》"
 	}
 	else {
-		ioriginalnameref(ITEM_ID_DIABLOS) = "<Diablos>"
+		ioriginalnameref(ITEM_ID_DIABLOS) = "<Diablo>"
 		ioriginalnameref2(ITEM_ID_DIABLOS) = ""
 	}
 	ipicref(ITEM_ID_DIABLOS) = xy2pic(9, 12)
 	if ( jp ) {
 		iknownnameref(ITEM_ID_DIABLOS) = "漆黒の剣"
@@ -140004,11 +142272,11 @@
 	iorgweight(ITEM_ID_BRAZIER_STAND) = 3200
 	if ( jp ) {
 		ioriginalnameref(ITEM_ID_BRAZIER_STAND) = "かがり台"
 	}
 	else {
-		ioriginalnameref(ITEM_ID_BRAZIER_STAND) = "brazier stand"
+		ioriginalnameref(ITEM_ID_BRAZIER_STAND) = "bonfire"
 		ioriginalnameref2(ITEM_ID_BRAZIER_STAND) = ""
 	}
 	ipicref(ITEM_ID_BRAZIER_STAND) = xy2pic(11, 7)
 	iknownnameref(ITEM_ID_BRAZIER_STAND) = ioriginalnameref(ITEM_ID_BRAZIER_STAND)
 	icolref(ITEM_ID_BRAZIER_STAND) = COLOR_DEFAULT
@@ -140017,11 +142285,11 @@
 	iorgweight(ITEM_ID_WASHINGS) = 250
 	if ( jp ) {
 		ioriginalnameref(ITEM_ID_WASHINGS) = "洗物"
 	}
 	else {
-		ioriginalnameref(ITEM_ID_WASHINGS) = "washings"
+		ioriginalnameref(ITEM_ID_WASHINGS) = "washing"
 		ioriginalnameref2(ITEM_ID_WASHINGS) = ""
 	}
 	ipicref(ITEM_ID_WASHINGS) = xy2pic(6, 6)
 	iknownnameref(ITEM_ID_WASHINGS) = ioriginalnameref(ITEM_ID_WASHINGS)
 	icolref(ITEM_ID_WASHINGS) = COLOR_DEFAULT
@@ -140069,11 +142337,11 @@
 	iorgweight(ITEM_ID_WOOD_CHIP) = 120
 	if ( jp ) {
 		ioriginalnameref(ITEM_ID_WOOD_CHIP) = "木片"
 	}
 	else {
-		ioriginalnameref(ITEM_ID_WOOD_CHIP) = "wood chip"
+		ioriginalnameref(ITEM_ID_WOOD_CHIP) = "wood piece"
 		ioriginalnameref2(ITEM_ID_WOOD_CHIP) = ""
 	}
 	ipicref(ITEM_ID_WOOD_CHIP) = xy2pic(8, 7)
 	iknownnameref(ITEM_ID_WOOD_CHIP) = ioriginalnameref(ITEM_ID_WOOD_CHIP)
 	icolref(ITEM_ID_WOOD_CHIP) = COLOR_DEFAULT
@@ -140082,12 +142350,12 @@
 	iorgweight(ITEM_ID_RAW_DIAMOND_ORE) = 320
 	if ( jp ) {
 		ioriginalnameref(ITEM_ID_RAW_DIAMOND_ORE) = "ダイヤモンドの原石"
 	}
 	else {
-		ioriginalnameref(ITEM_ID_RAW_DIAMOND_ORE) = "raw diamond ore"
-		ioriginalnameref2(ITEM_ID_RAW_DIAMOND_ORE) = ""
+		ioriginalnameref(ITEM_ID_RAW_DIAMOND_ORE) = "diamond"
+		ioriginalnameref2(ITEM_ID_RAW_DIAMOND_ORE) = "raw ore"
 	}
 	ipicref(ITEM_ID_RAW_DIAMOND_ORE) = xy2pic(15, 6)
 	iknownnameref(ITEM_ID_RAW_DIAMOND_ORE) = ioriginalnameref(ITEM_ID_RAW_DIAMOND_ORE)
 	icolref(ITEM_ID_RAW_DIAMOND_ORE) = COLOR_BLUE
 	ilight(ITEM_ID_RAW_EMERALD_ORE) = LIGHT_TYPE_CRYSTAL
@@ -140095,12 +142363,12 @@
 	iorgweight(ITEM_ID_RAW_EMERALD_ORE) = 380
 	if ( jp ) {
 		ioriginalnameref(ITEM_ID_RAW_EMERALD_ORE) = "エメラルドの原石"
 	}
 	else {
-		ioriginalnameref(ITEM_ID_RAW_EMERALD_ORE) = "raw emerald ore"
-		ioriginalnameref2(ITEM_ID_RAW_EMERALD_ORE) = ""
+		ioriginalnameref(ITEM_ID_RAW_EMERALD_ORE) = "emerald"
+		ioriginalnameref2(ITEM_ID_RAW_EMERALD_ORE) = "raw ore"
 	}
 	ipicref(ITEM_ID_RAW_EMERALD_ORE) = xy2pic(15, 6)
 	iknownnameref(ITEM_ID_RAW_EMERALD_ORE) = ioriginalnameref(ITEM_ID_RAW_EMERALD_ORE)
 	icolref(ITEM_ID_RAW_EMERALD_ORE) = COLOR_GREEN
 	ilight(ITEM_ID_MICA_ORE) = LIGHT_TYPE_NONE
@@ -140108,12 +142376,12 @@
 	iorgweight(ITEM_ID_MICA_ORE) = 70
 	if ( jp ) {
 		ioriginalnameref(ITEM_ID_MICA_ORE) = "ミカ"
 	}
 	else {
-		ioriginalnameref(ITEM_ID_MICA_ORE) = "mica ore"
-		ioriginalnameref2(ITEM_ID_MICA_ORE) = ""
+		ioriginalnameref(ITEM_ID_MICA_ORE) = "mika"
+		ioriginalnameref2(ITEM_ID_MICA_ORE) = "raw ore"
 	}
 	ipicref(ITEM_ID_MICA_ORE) = xy2pic(14, 6)
 	iknownnameref(ITEM_ID_MICA_ORE) = ioriginalnameref(ITEM_ID_MICA_ORE)
 	icolref(ITEM_ID_MICA_ORE) = COLOR_DEFAULT
 	ilight(ITEM_ID_RAW_RUBYNUS_ORE) = LIGHT_TYPE_CRYSTAL
@@ -140121,12 +142389,12 @@
 	iorgweight(ITEM_ID_RAW_RUBYNUS_ORE) = 240
 	if ( jp ) {
 		ioriginalnameref(ITEM_ID_RAW_RUBYNUS_ORE) = "ルビナスの原石"
 	}
 	else {
-		ioriginalnameref(ITEM_ID_RAW_RUBYNUS_ORE) = "raw rubynus ore"
-		ioriginalnameref2(ITEM_ID_RAW_RUBYNUS_ORE) = ""
+		ioriginalnameref(ITEM_ID_RAW_RUBYNUS_ORE) = "rubynus"
+		ioriginalnameref2(ITEM_ID_RAW_RUBYNUS_ORE) = "raw ore"
 	}
 	ipicref(ITEM_ID_RAW_RUBYNUS_ORE) = xy2pic(14, 6)
 	iknownnameref(ITEM_ID_RAW_RUBYNUS_ORE) = ioriginalnameref(ITEM_ID_RAW_RUBYNUS_ORE)
 	icolref(ITEM_ID_RAW_RUBYNUS_ORE) = COLOR_RED
 	ilight(ITEM_ID_GOLD_BAR) = LIGHT_TYPE_CRYSTAL
@@ -140190,11 +142458,11 @@
 	else {
 		ioriginalnameref(ITEM_ID_SPELLBOOK_LIGHTNING_BOLT) = "lightning bolt"
 		ioriginalnameref2(ITEM_ID_SPELLBOOK_LIGHTNING_BOLT) = "spellbook"
 	}
 	ipicref(ITEM_ID_SPELLBOOK_LIGHTNING_BOLT) = xy2pic(0, 13)
-	p = (ITEM_ID_SPELLBOOK_LIGHTNING_BOLT + gdata(GDATA_RAND_SEED_A)) \ 6
+	p = (34 + gdata(GDATA_RAND_SEED_A)) \ 6
 	iknownnameref(ITEM_ID_SPELLBOOK_LIGHTNING_BOLT) = _namespellbook(p) + strblank + strspellbook
 	icolref(ITEM_ID_SPELLBOOK_LIGHTNING_BOLT) = _randcolor(p)
 	irandomname(ITEM_ID_SPELLBOOK_LIGHTNING_BOLT) = 1
 	ilight(ITEM_ID_SPELLBOOK_FIRE_BOLT) = LIGHT_TYPE_NONE
 	ialphanameref(ITEM_ID_SPELLBOOK_FIRE_BOLT) = ""
@@ -140205,11 +142473,11 @@
 	else {
 		ioriginalnameref(ITEM_ID_SPELLBOOK_FIRE_BOLT) = "fire bolt"
 		ioriginalnameref2(ITEM_ID_SPELLBOOK_FIRE_BOLT) = "spellbook"
 	}
 	ipicref(ITEM_ID_SPELLBOOK_FIRE_BOLT) = xy2pic(0, 13)
-	p = (ITEM_ID_SPELLBOOK_FIRE_BOLT + gdata(GDATA_RAND_SEED_A)) \ 6
+	p = (33 + gdata(GDATA_RAND_SEED_A)) \ 6
 	iknownnameref(ITEM_ID_SPELLBOOK_FIRE_BOLT) = _namespellbook(p) + strblank + strspellbook
 	icolref(ITEM_ID_SPELLBOOK_FIRE_BOLT) = _randcolor(p)
 	irandomname(ITEM_ID_SPELLBOOK_FIRE_BOLT) = 1
 	ilight(ITEM_ID_SPELLBOOK_ICE_BOLT) = LIGHT_TYPE_NONE
 	ialphanameref(ITEM_ID_SPELLBOOK_ICE_BOLT) = ""
@@ -140220,11 +142488,11 @@
 	else {
 		ioriginalnameref(ITEM_ID_SPELLBOOK_ICE_BOLT) = "ice bolt"
 		ioriginalnameref2(ITEM_ID_SPELLBOOK_ICE_BOLT) = "spellbook"
 	}
 	ipicref(ITEM_ID_SPELLBOOK_ICE_BOLT) = xy2pic(0, 13)
-	p = (ITEM_ID_SPELLBOOK_ICE_BOLT + gdata(GDATA_RAND_SEED_A)) \ 6
+	p = (32 + gdata(GDATA_RAND_SEED_A)) \ 6
 	iknownnameref(ITEM_ID_SPELLBOOK_ICE_BOLT) = _namespellbook(p) + strblank + strspellbook
 	icolref(ITEM_ID_SPELLBOOK_ICE_BOLT) = _randcolor(p)
 	irandomname(ITEM_ID_SPELLBOOK_ICE_BOLT) = 1
 	ilight(ITEM_ID_BOTTLE_CRIM_ALE) = LIGHT_TYPE_NONE
 	ialphanameref(ITEM_ID_BOTTLE_CRIM_ALE) = ""
@@ -140253,11 +142521,11 @@
 	else {
 		ioriginalnameref(ITEM_ID_SLEEPING_DRUG) = "sleeping drug"
 		ioriginalnameref2(ITEM_ID_SLEEPING_DRUG) = ""
 	}
 	ipicref(ITEM_ID_SLEEPING_DRUG) = xy2pic(24, 10)
-	p = (ITEM_ID_SLEEPING_DRUG + gdata(GDATA_RAND_SEED_A)) \ 6
+	p = (30 + gdata(GDATA_RAND_SEED_A)) \ 6
 	iknownnameref(ITEM_ID_SLEEPING_DRUG) = _namepotion(p) + strblank + strpotion
 	icolref(ITEM_ID_SLEEPING_DRUG) = _randcolor(p)
 	irandomname(ITEM_ID_SLEEPING_DRUG) = 1
 	ilight(ITEM_ID_POTION_PARALYSIS) = LIGHT_TYPE_NONE
 	ialphanameref(ITEM_ID_POTION_PARALYSIS) = ""
@@ -140268,11 +142536,11 @@
 	else {
 		ioriginalnameref(ITEM_ID_POTION_PARALYSIS) = "paralysis"
 		ioriginalnameref2(ITEM_ID_POTION_PARALYSIS) = "potion"
 	}
 	ipicref(ITEM_ID_POTION_PARALYSIS) = xy2pic(24, 10)
-	p = (ITEM_ID_POTION_PARALYSIS + gdata(GDATA_RAND_SEED_A)) \ 6
+	p = (29 + gdata(GDATA_RAND_SEED_A)) \ 6
 	iknownnameref(ITEM_ID_POTION_PARALYSIS) = _namepotion(p) + strblank + strpotion
 	icolref(ITEM_ID_POTION_PARALYSIS) = _randcolor(p)
 	irandomname(ITEM_ID_POTION_PARALYSIS) = 1
 	ilight(ITEM_ID_POTION_CONFUSION) = LIGHT_TYPE_NONE
 	ialphanameref(ITEM_ID_POTION_CONFUSION) = ""
@@ -140283,11 +142551,11 @@
 	else {
 		ioriginalnameref(ITEM_ID_POTION_CONFUSION) = "confusion"
 		ioriginalnameref2(ITEM_ID_POTION_CONFUSION) = "potion"
 	}
 	ipicref(ITEM_ID_POTION_CONFUSION) = xy2pic(24, 10)
-	p = (ITEM_ID_POTION_CONFUSION + gdata(GDATA_RAND_SEED_A)) \ 6
+	p = (28 + gdata(GDATA_RAND_SEED_A)) \ 6
 	iknownnameref(ITEM_ID_POTION_CONFUSION) = _namepotion(p) + strblank + strpotion
 	icolref(ITEM_ID_POTION_CONFUSION) = _randcolor(p)
 	irandomname(ITEM_ID_POTION_CONFUSION) = 1
 	ilight(ITEM_ID_POTION_BLINDNESS) = LIGHT_TYPE_NONE
 	ialphanameref(ITEM_ID_POTION_BLINDNESS) = ""
@@ -140298,11 +142566,11 @@
 	else {
 		ioriginalnameref(ITEM_ID_POTION_BLINDNESS) = "blindness"
 		ioriginalnameref2(ITEM_ID_POTION_BLINDNESS) = "potion"
 	}
 	ipicref(ITEM_ID_POTION_BLINDNESS) = xy2pic(24, 10)
-	p = (ITEM_ID_POTION_BLINDNESS + gdata(GDATA_RAND_SEED_A)) \ 6
+	p = (27 + gdata(GDATA_RAND_SEED_A)) \ 6
 	iknownnameref(ITEM_ID_POTION_BLINDNESS) = _namepotion(p) + strblank + strpotion
 	icolref(ITEM_ID_POTION_BLINDNESS) = _randcolor(p)
 	irandomname(ITEM_ID_POTION_BLINDNESS) = 1
 	ilight(ITEM_ID_BOTTLE_DIRTY_WATER) = LIGHT_TYPE_NONE
 	ialphanameref(ITEM_ID_BOTTLE_DIRTY_WATER) = ""
@@ -140385,11 +142653,11 @@
 	else {
 		ioriginalnameref(ITEM_ID_SPELLBOOK_UNCURSE) = "uncurse"
 		ioriginalnameref2(ITEM_ID_SPELLBOOK_UNCURSE) = "spellbook"
 	}
 	ipicref(ITEM_ID_SPELLBOOK_UNCURSE) = xy2pic(0, 13)
-	p = (ITEM_ID_SPELLBOOK_UNCURSE + gdata(GDATA_RAND_SEED_A)) \ 6
+	p = (22 + gdata(GDATA_RAND_SEED_A)) \ 6
 	iknownnameref(ITEM_ID_SPELLBOOK_UNCURSE) = _namespellbook(p) + strblank + strspellbook
 	icolref(ITEM_ID_SPELLBOOK_UNCURSE) = _randcolor(p)
 	irandomname(ITEM_ID_SPELLBOOK_UNCURSE) = 1
 	ilight(ITEM_ID_SPELLBOOK_IDENTIFY) = LIGHT_TYPE_NONE
 	ialphanameref(ITEM_ID_SPELLBOOK_IDENTIFY) = ""
@@ -140400,11 +142668,11 @@
 	else {
 		ioriginalnameref(ITEM_ID_SPELLBOOK_IDENTIFY) = "identify"
 		ioriginalnameref2(ITEM_ID_SPELLBOOK_IDENTIFY) = "spellbook"
 	}
 	ipicref(ITEM_ID_SPELLBOOK_IDENTIFY) = xy2pic(0, 13)
-	p = (ITEM_ID_SPELLBOOK_IDENTIFY + gdata(GDATA_RAND_SEED_A)) \ 6
+	p = (21 + gdata(GDATA_RAND_SEED_A)) \ 6
 	iknownnameref(ITEM_ID_SPELLBOOK_IDENTIFY) = _namespellbook(p) + strblank + strspellbook
 	icolref(ITEM_ID_SPELLBOOK_IDENTIFY) = _randcolor(p)
 	irandomname(ITEM_ID_SPELLBOOK_IDENTIFY) = 1
 	ilight(ITEM_ID_SPELLBOOK_TELEPORTATION) = LIGHT_TYPE_NONE
 	ialphanameref(ITEM_ID_SPELLBOOK_TELEPORTATION) = ""
@@ -140415,11 +142683,11 @@
 	else {
 		ioriginalnameref(ITEM_ID_SPELLBOOK_TELEPORTATION) = "teleportation"
 		ioriginalnameref2(ITEM_ID_SPELLBOOK_TELEPORTATION) = "spellbook"
 	}
 	ipicref(ITEM_ID_SPELLBOOK_TELEPORTATION) = xy2pic(0, 13)
-	p = (ITEM_ID_SPELLBOOK_TELEPORTATION + gdata(GDATA_RAND_SEED_A)) \ 6
+	p = (20 + gdata(GDATA_RAND_SEED_A)) \ 6
 	iknownnameref(ITEM_ID_SPELLBOOK_TELEPORTATION) = _namespellbook(p) + strblank + strspellbook
 	icolref(ITEM_ID_SPELLBOOK_TELEPORTATION) = _randcolor(p)
 	irandomname(ITEM_ID_SPELLBOOK_TELEPORTATION) = 1
 	ilight(ITEM_ID_ROD_TELEPORTATION) = LIGHT_TYPE_NONE
 	ialphanameref(ITEM_ID_ROD_TELEPORTATION) = ""
@@ -140430,11 +142698,11 @@
 	else {
 		ioriginalnameref(ITEM_ID_ROD_TELEPORTATION) = "teleportation"
 		ioriginalnameref2(ITEM_ID_ROD_TELEPORTATION) = "rod"
 	}
 	ipicref(ITEM_ID_ROD_TELEPORTATION) = xy2pic(9, 14)
-	p = (ITEM_ID_ROD_TELEPORTATION + gdata(GDATA_RAND_SEED_A)) \ 6
+	p = (19 + gdata(GDATA_RAND_SEED_A)) \ 6
 	iknownnameref(ITEM_ID_ROD_TELEPORTATION) = _namestaff(p) + strblank + strstaff
 	icolref(ITEM_ID_ROD_TELEPORTATION) = _randcolor(p)
 	irandomname(ITEM_ID_ROD_TELEPORTATION) = 1
 	ilight(ITEM_ID_ROD_IDENTIFY) = LIGHT_TYPE_NONE
 	ialphanameref(ITEM_ID_ROD_IDENTIFY) = ""
@@ -140445,11 +142713,11 @@
 	else {
 		ioriginalnameref(ITEM_ID_ROD_IDENTIFY) = "identify"
 		ioriginalnameref2(ITEM_ID_ROD_IDENTIFY) = "rod"
 	}
 	ipicref(ITEM_ID_ROD_IDENTIFY) = xy2pic(9, 14)
-	p = (ITEM_ID_ROD_IDENTIFY + gdata(GDATA_RAND_SEED_A)) \ 6
+	p = (18 + gdata(GDATA_RAND_SEED_A)) \ 6
 	iknownnameref(ITEM_ID_ROD_IDENTIFY) = _namestaff(p) + strblank + strstaff
 	icolref(ITEM_ID_ROD_IDENTIFY) = _randcolor(p)
 	irandomname(ITEM_ID_ROD_IDENTIFY) = 1
 	ilight(ITEM_ID_SCROLL_INCOGNITO) = LIGHT_TYPE_NONE
 	ialphanameref(ITEM_ID_SCROLL_INCOGNITO) = ""
@@ -140460,11 +142728,11 @@
 	else {
 		ioriginalnameref(ITEM_ID_SCROLL_INCOGNITO) = "incognito"
 		ioriginalnameref2(ITEM_ID_SCROLL_INCOGNITO) = "scroll"
 	}
 	ipicref(ITEM_ID_SCROLL_INCOGNITO) = xy2pic(8, 14)
-	p = (ITEM_ID_SCROLL_INCOGNITO + gdata(GDATA_RAND_SEED_A)) \ 6
+	p = (17 + gdata(GDATA_RAND_SEED_A)) \ 6
 	iknownnameref(ITEM_ID_SCROLL_INCOGNITO) = _namescroll(p) + strblank + strscroll
 	icolref(ITEM_ID_SCROLL_INCOGNITO) = _randcolor(p)
 	irandomname(ITEM_ID_SCROLL_INCOGNITO) = 1
 	ilight(ITEM_ID_SCROLL_TELEPORTATION) = LIGHT_TYPE_NONE
 	ialphanameref(ITEM_ID_SCROLL_TELEPORTATION) = ""
@@ -140475,11 +142743,11 @@
 	else {
 		ioriginalnameref(ITEM_ID_SCROLL_TELEPORTATION) = "teleportation"
 		ioriginalnameref2(ITEM_ID_SCROLL_TELEPORTATION) = "scroll"
 	}
 	ipicref(ITEM_ID_SCROLL_TELEPORTATION) = xy2pic(8, 14)
-	p = (ITEM_ID_SCROLL_TELEPORTATION + gdata(GDATA_RAND_SEED_A)) \ 6
+	p = (16 + gdata(GDATA_RAND_SEED_A)) \ 6
 	iknownnameref(ITEM_ID_SCROLL_TELEPORTATION) = _namescroll(p) + strblank + strscroll
 	icolref(ITEM_ID_SCROLL_TELEPORTATION) = _randcolor(p)
 	irandomname(ITEM_ID_SCROLL_TELEPORTATION) = 1
 	ilight(ITEM_ID_SCROLL_ORACLE) = LIGHT_TYPE_NONE
 	ialphanameref(ITEM_ID_SCROLL_ORACLE) = ""
@@ -140490,11 +142758,11 @@
 	else {
 		ioriginalnameref(ITEM_ID_SCROLL_ORACLE) = "oracle"
 		ioriginalnameref2(ITEM_ID_SCROLL_ORACLE) = "scroll"
 	}
 	ipicref(ITEM_ID_SCROLL_ORACLE) = xy2pic(8, 14)
-	p = (ITEM_ID_SCROLL_ORACLE + gdata(GDATA_RAND_SEED_A)) \ 6
+	p = (15 + gdata(GDATA_RAND_SEED_A)) \ 6
 	iknownnameref(ITEM_ID_SCROLL_ORACLE) = _namescroll(p) + strblank + strscroll
 	icolref(ITEM_ID_SCROLL_ORACLE) = _randcolor(p)
 	irandomname(ITEM_ID_SCROLL_ORACLE) = 1
 	ilight(ITEM_ID_SCROLL_IDENTIFY) = LIGHT_TYPE_NONE
 	ialphanameref(ITEM_ID_SCROLL_IDENTIFY) = ""
@@ -140505,11 +142773,11 @@
 	else {
 		ioriginalnameref(ITEM_ID_SCROLL_IDENTIFY) = "identify"
 		ioriginalnameref2(ITEM_ID_SCROLL_IDENTIFY) = "scroll"
 	}
 	ipicref(ITEM_ID_SCROLL_IDENTIFY) = xy2pic(8, 14)
-	p = (ITEM_ID_SCROLL_IDENTIFY + gdata(GDATA_RAND_SEED_A)) \ 6
+	p = (14 + gdata(GDATA_RAND_SEED_A)) \ 6
 	iknownnameref(ITEM_ID_SCROLL_IDENTIFY) = _namescroll(p) + strblank + strscroll
 	icolref(ITEM_ID_SCROLL_IDENTIFY) = _randcolor(p)
 	irandomname(ITEM_ID_SCROLL_IDENTIFY) = 1
 	ilight(ITEM_ID_DECORATIVE_RING) = LIGHT_TYPE_NONE
 	ialphanameref(ITEM_ID_DECORATIVE_RING) = "デコレートリング"
@@ -140520,11 +142788,11 @@
 	else {
 		ioriginalnameref(ITEM_ID_DECORATIVE_RING) = "decorative ring"
 		ioriginalnameref2(ITEM_ID_DECORATIVE_RING) = ""
 	}
 	ipicref(ITEM_ID_DECORATIVE_RING) = xy2pic(11, 12)
-	p = (ITEM_ID_DECORATIVE_RING + gdata(GDATA_RAND_SEED_A)) \ 6
+	p = (13 + gdata(GDATA_RAND_SEED_A)) \ 6
 	iknownnameref(ITEM_ID_DECORATIVE_RING) = _namering(p) + strblank + strring
 	icolref(ITEM_ID_DECORATIVE_RING) = COLOR_DEFAULT
 	irandomname(ITEM_ID_DECORATIVE_RING) = 1
 	ilight(ITEM_ID_COMPOSITE_BOOTS) = LIGHT_TYPE_NONE
 	ialphanameref(ITEM_ID_COMPOSITE_BOOTS) = "コンポジットブーツ"
@@ -140693,489 +142961,489 @@
 		ioriginalnameref2(ITEM_ID_DUMMY) = ""
 	}
 	ipicref(ITEM_ID_DUMMY) = xy2pic(0, 1)
 	iknownnameref(ITEM_ID_DUMMY) = ioriginalnameref(ITEM_ID_DUMMY)
 	icolref(ITEM_ID_DUMMY) = COLOR_DEFAULT
-	maxitemid = MAX_ITEM_ID
+	maxitemid = 1250
 	return
-
+	goto *recipe_ref
 #deffunc calcweaponfix int calcweaponfix_itemid
 	pierce = 0
 	rangemap = 100, 20, 20, 20, 20, 20, 20, 20, 20, 20
 	if ( calcweaponfix_itemid == ITEM_ID_RAVENBRAND ) {
 		pierce = 15
-		rangemap = 50, 80, 60
+		rangemap = 50, 80, 60, 30, 20, 20, 20, 20, 20
 		return 1
 	}
 	if ( calcweaponfix_itemid == ITEM_ID_BAMBNIR ) {
 		pierce = 25
-		rangemap = 50, 80, 60
+		rangemap = 50, 80, 60, 30, 20, 20, 20, 20, 20
 		return 1
 	}
 	if ( calcweaponfix_itemid == ITEM_ID_KALPA_HAND ) {
 		pierce = 60
-		rangemap = 50, 80, 60
+		rangemap = 50, 80, 60, 30, 20, 20, 20, 20, 20
 		return 1
 	}
 	if ( calcweaponfix_itemid == ITEM_ID_FRIGHT_PRAWN ) {
 		pierce = 0
-		rangemap = 90, 100, 80
+		rangemap = 90, 100, 80, 70, 20, 20, 20, 20, 20
 		return 1
 	}
 	if ( calcweaponfix_itemid == ITEM_ID_ANNINDOFU_LIKE_A_LIGHTSABRE ) {
 		pierce = 90
-		rangemap = 50, 80, 60
+		rangemap = 50, 80, 60, 30, 20, 20, 20, 20, 20
 		return 1
 	}
 	if ( calcweaponfix_itemid == ITEM_ID_KANI_KAMA ) {
 		pierce = 0
-		rangemap = 50, 80, 60
+		rangemap = 50, 80, 60, 30, 20, 20, 20, 20, 20
 		return 1
 	}
 	if ( calcweaponfix_itemid == ITEM_ID_GO_RENGE ) {
 		pierce = 0
-		rangemap = 90, 100, 80
+		rangemap = 90, 100, 80, 70, 20, 20, 20, 20, 20
 		return 1
 	}
 	if ( calcweaponfix_itemid == ITEM_ID_EPECLAIR ) {
 		pierce = 80
-		rangemap = 50, 80, 60
+		rangemap = 50, 80, 60, 30, 20, 20, 20, 20, 20
 		return 1
 	}
 	if ( calcweaponfix_itemid == ITEM_ID_GOUTEN ) {
 		pierce = 15
-		rangemap = 50, 80, 60
+		rangemap = 50, 80, 60, 30, 20, 20, 20, 20, 20
 		return 1
 	}
 	if ( calcweaponfix_itemid == ITEM_ID_DGT_101 ) {
 		pierce = 5
-		rangemap = 90, 100, 80
+		rangemap = 90, 100, 80, 70, 20, 20, 20, 20, 20
 		return 1
 	}
 	if ( calcweaponfix_itemid == ITEM_ID_NUMENIUS ) {
 		pierce = 0
-		rangemap = 50, 80, 60
+		rangemap = 50, 80, 60, 30, 20, 20, 20, 20, 20
 		return 1
 	}
 	if ( calcweaponfix_itemid == ITEM_ID_ENGOKU ) {
 		pierce = 10
-		rangemap = 50, 80, 60
+		rangemap = 50, 80, 60, 30, 20, 20, 20, 20, 20
 		return 1
 	}
 	if ( calcweaponfix_itemid == ITEM_ID_POWER_TRIANGLE ) {
 		pierce = 0
-		rangemap = 50, 80, 60
+		rangemap = 50, 80, 60, 30, 20, 20, 20, 20, 20
 		return 1
 	}
 	if ( calcweaponfix_itemid == ITEM_ID_CROSS_RAIL ) {
 		pierce = 10
-		rangemap = 80, 100, 90, 80, 70, 60, 50
+		rangemap = 80, 100, 90, 80, 70, 60, 50, 40, 20
 		return 1
 	}
 	if ( calcweaponfix_itemid == ITEM_ID_NAZUNAS_SOX ) {
 		pierce = 0
-		rangemap = 50, 80, 60
+		rangemap = 50, 80, 60, 30, 20, 20, 20, 20, 20
 		return 1
 	}
 	if ( calcweaponfix_itemid == ITEM_ID_SCORPIERCE ) {
 		pierce = 50
 		rangemap = 70, 80, 90, 100, 100, 90, 90, 80, 80
 		return 1
 	}
 	if ( calcweaponfix_itemid == ITEM_ID_YOMI_TO ) {
 		pierce = 0
-		rangemap = 90, 100, 80
+		rangemap = 90, 100, 80, 70, 20, 20, 20, 20, 20
 		return 1
 	}
 	if ( calcweaponfix_itemid == ITEM_ID_RINKHALS ) {
 		pierce = 5
-		rangemap = 80, 100, 90, 80, 70, 60, 50
+		rangemap = 80, 100, 90, 80, 70, 60, 50, 40, 20
 		return 1
 	}
 	if ( calcweaponfix_itemid == ITEM_ID_LINGS_BOW ) {
 		pierce = 15
-		rangemap = 90, 100, 100, 80, 60
+		rangemap = 90, 100, 100, 80, 60, 40, 20, 20, 20
 		return 1
 	}
 	if ( calcweaponfix_itemid == ITEM_ID_KUNAI ) {
 		pierce = 0
-		rangemap = 90, 100, 80
+		rangemap = 90, 100, 80, 70, 20, 20, 20, 20, 20
 		return 1
 	}
 	if ( calcweaponfix_itemid == ITEM_ID_FLEURE ) {
 		pierce = 80
-		rangemap = 50, 80, 60
+		rangemap = 50, 80, 60, 30, 20, 20, 20, 20, 20
 		return 1
 	}
 	if ( calcweaponfix_itemid == ITEM_ID_DRILL ) {
 		pierce = 15
-		rangemap = 50, 80, 60
+		rangemap = 50, 80, 60, 30, 20, 20, 20, 20, 20
 		return 1
 	}
 	if ( calcweaponfix_itemid == ITEM_ID_LANCE ) {
 		pierce = 60
-		rangemap = 50, 80, 60
+		rangemap = 50, 80, 60, 30, 20, 20, 20, 20, 20
 		return 1
 	}
 	if ( calcweaponfix_itemid == ITEM_ID_TOMAHAWK ) {
 		pierce = 5
-		rangemap = 90, 100, 80
+		rangemap = 90, 100, 80, 70, 20, 20, 20, 20, 20
 		return 1
 	}
 	if ( calcweaponfix_itemid == ITEM_ID_CHAINSAW ) {
 		pierce = 0
-		rangemap = 50, 80, 60
+		rangemap = 50, 80, 60, 30, 20, 20, 20, 20, 20
 		return 1
 	}
 	if ( calcweaponfix_itemid == ITEM_ID_SCISSORS ) {
 		pierce = 0
-		rangemap = 50, 80, 60
+		rangemap = 50, 80, 60, 30, 20, 20, 20, 20, 20
 		return 1
 	}
 	if ( calcweaponfix_itemid == ITEM_ID_BONE_SCYTHE ) {
 		pierce = 15
-		rangemap = 50, 80, 60
+		rangemap = 50, 80, 60, 30, 20, 20, 20, 20, 20
 		return 1
 	}
 	if ( calcweaponfix_itemid == ITEM_ID_WAR_HAMMER ) {
 		pierce = 0
-		rangemap = 50, 80, 60
+		rangemap = 50, 80, 60, 30, 20, 20, 20, 20, 20
 		return 1
 	}
 	if ( calcweaponfix_itemid == ITEM_ID_STAR_HAMMER ) {
 		pierce = 0
-		rangemap = 50, 80, 60
+		rangemap = 50, 80, 60, 30, 20, 20, 20, 20, 20
 		return 1
 	}
 	if ( calcweaponfix_itemid == ITEM_ID_SHAKUJO ) {
 		pierce = 10
-		rangemap = 50, 80, 60
+		rangemap = 50, 80, 60, 30, 20, 20, 20, 20, 20
 		return 1
 	}
 	if ( calcweaponfix_itemid == ITEM_ID_NUNCHAKU ) {
 		pierce = 0
-		rangemap = 50, 80, 60
+		rangemap = 50, 80, 60, 30, 20, 20, 20, 20, 20
 		return 1
 	}
 	if ( calcweaponfix_itemid == ITEM_ID_BLADE_BOW ) {
 		pierce = 15
-		rangemap = 90, 100, 100, 80, 60
+		rangemap = 90, 100, 100, 80, 60, 40, 20, 20, 20
 		return 1
 	}
 	if ( calcweaponfix_itemid == ITEM_ID_CROSSFIRE ) {
 		pierce = 10
-		rangemap = 80, 100, 90, 80, 70, 60, 50
+		rangemap = 80, 100, 90, 80, 70, 60, 50, 40, 20
 		return 1
 	}
 	if ( calcweaponfix_itemid == ITEM_ID_GUN_PAIR ) {
 		pierce = 20
-		rangemap = 90, 100, 80, 60
+		rangemap = 90, 100, 80, 60, 30, 20, 20, 20, 20
 		return 1
 	}
 	if ( calcweaponfix_itemid == ITEM_ID_GRAVITAIL ) {
 		pierce = 0
-		rangemap = 50, 80, 60
+		rangemap = 50, 80, 60, 30, 20, 20, 20, 20, 20
 		return 1
 	}
 	if ( calcweaponfix_itemid == ITEM_ID_BEETLE_CYBORG ) {
 		pierce = 10
-		rangemap = 90, 100, 80
+		rangemap = 90, 100, 80, 70, 20, 20, 20, 20, 20
 		return 1
 	}
 	if ( calcweaponfix_itemid == ITEM_ID_GOD_BINDER ) {
 		pierce = 0
-		rangemap = 50, 80, 60
+		rangemap = 50, 80, 60, 30, 20, 20, 20, 20, 20
 		return 1
 	}
 	if ( calcweaponfix_itemid == ITEM_ID_CROWN_POINT ) {
 		pierce = 0
-		rangemap = 50, 80, 60
+		rangemap = 50, 80, 60, 30, 20, 20, 20, 20, 20
 		return 1
 	}
 	if ( calcweaponfix_itemid == ITEM_ID_YOHUALLI_TEZCATL ) {
 		pierce = 0
-		rangemap = 50, 80, 60
+		rangemap = 50, 80, 60, 30, 20, 20, 20, 20, 20
 		return 1
 	}
 	if ( calcweaponfix_itemid == ITEM_ID_GULIWELZEN ) {
 		pierce = 0
-		rangemap = 50, 80, 60
+		rangemap = 50, 80, 60, 30, 20, 20, 20, 20, 20
 		return 1
 	}
 	if ( calcweaponfix_itemid == ITEM_ID_NECROMANTIS ) {
 		pierce = 5
-		rangemap = 50, 80, 60
+		rangemap = 50, 80, 60, 30, 20, 20, 20, 20, 20
 		return 1
 	}
 	if ( calcweaponfix_itemid == ITEM_ID_ZUGAIKURAI ) {
 		pierce = 0
-		rangemap = 50, 80, 60
+		rangemap = 50, 80, 60, 30, 20, 20, 20, 20, 20
 		return 1
 	}
 	if ( calcweaponfix_itemid == ITEM_ID_DOKURO_MIKADUKI ) {
 		pierce = 15
-		rangemap = 60, 90, 100, 100, 80, 60
+		rangemap = 60, 90, 100, 100, 80, 60, 40, 20, 20
 		return 1
 	}
 	if ( calcweaponfix_itemid == ITEM_ID_HELTIARRE ) {
 		pierce = 15
-		rangemap = 90, 100, 100, 80, 60
+		rangemap = 90, 100, 100, 80, 60, 40, 20, 20, 20
 		return 1
 	}
 	if ( calcweaponfix_itemid == ITEM_ID_SASANQUA_SICKLE ) {
 		pierce = 0
-		rangemap = 50, 80, 60
+		rangemap = 50, 80, 60, 30, 20, 20, 20, 20, 20
 		return 1
 	}
 	if ( calcweaponfix_itemid == ITEM_ID_BLOOD_ROD ) {
 		pierce = 0
-		rangemap = 50, 80, 60
+		rangemap = 50, 80, 60, 30, 20, 20, 20, 20, 20
 		return 1
 	}
 	if ( calcweaponfix_itemid == ITEM_ID_THE_WHITE_HAWK ) {
 		pierce = 10
-		rangemap = 50, 80, 60
+		rangemap = 50, 80, 60, 30, 20, 20, 20, 20, 20
 		return 1
 	}
 	if ( calcweaponfix_itemid == ITEM_ID_ION_CAKRAM ) {
 		pierce = 30
-		rangemap = 90, 100, 80
+		rangemap = 90, 100, 80, 70, 20, 20, 20, 20, 20
 		return 1
 	}
 	if ( calcweaponfix_itemid == ITEM_ID_SPADILLE ) {
 		pierce = 30
-		rangemap = 50, 80, 60
+		rangemap = 50, 80, 60, 30, 20, 20, 20, 20, 20
 		return 1
 	}
 	if ( calcweaponfix_itemid == ITEM_ID_HL_KRSW ) {
 		pierce = 5
-		rangemap = 100, 100, 100, 100, 100, 100, 100
+		rangemap = 100, 100, 100, 100, 100, 100, 100, 50, 20
 		return 1
 	}
 	if ( calcweaponfix_itemid == ITEM_ID_LUCKY_ALMONDS ) {
 		pierce = 0
-		rangemap = 50, 80, 60
+		rangemap = 50, 80, 60, 30, 20, 20, 20, 20, 20
 		return 1
 	}
 	if ( calcweaponfix_itemid == ITEM_ID_BLOODY_TEARS ) {
 		pierce = 30
-		rangemap = 50, 80, 60
+		rangemap = 50, 80, 60, 30, 20, 20, 20, 20, 20
 		return 1
 	}
 	if ( calcweaponfix_itemid == ITEM_ID_IVY_SPINE ) {
 		pierce = 0
-		rangemap = 50, 80, 60
+		rangemap = 50, 80, 60, 30, 20, 20, 20, 20, 20
 		return 1
 	}
 	if ( calcweaponfix_itemid == ITEM_ID_MELODYUS ) {
 		pierce = 10
-		rangemap = 50, 80, 60
+		rangemap = 50, 80, 60, 30, 20, 20, 20, 20, 20
 		return 1
 	}
 	if ( calcweaponfix_itemid == ITEM_ID_GRANDEL ) {
 		pierce = 0
-		rangemap = 50, 80, 60
+		rangemap = 50, 80, 60, 30, 20, 20, 20, 20, 20
 		return 1
 	}
 	if ( calcweaponfix_itemid == ITEM_ID_WHIP ) {
 		pierce = 0
-		rangemap = 50, 80, 60
+		rangemap = 50, 80, 60, 30, 20, 20, 20, 20, 20
 		return 1
 	}
 	if ( calcweaponfix_itemid == ITEM_ID_SOCKS ) {
 		pierce = 0
-		rangemap = 50, 80, 60
+		rangemap = 50, 80, 60, 30, 20, 20, 20, 20, 20
 		return 1
 	}
 	if ( calcweaponfix_itemid == ITEM_ID_CHAINSICKLE ) {
 		pierce = 0
-		rangemap = 50, 80, 60
+		rangemap = 50, 80, 60, 30, 20, 20, 20, 20, 20
 		return 1
 	}
 	if ( calcweaponfix_itemid == ITEM_ID_BALLISTA ) {
 		pierce = 40
-		rangemap = 80, 100, 90, 80, 70, 60, 50
+		rangemap = 80, 100, 90, 80, 70, 60, 50, 40, 20
 		return 1
 	}
 	if ( calcweaponfix_itemid == ITEM_ID_N97_CANNON ) {
 		pierce = 0
 		rangemap = 70, 80, 90, 100, 100, 90, 90, 80, 80
 		return 1
 	}
 	if ( calcweaponfix_itemid == ITEM_ID_TRISHULA ) {
 		pierce = 25
-		rangemap = 50, 80, 60
+		rangemap = 50, 80, 60, 30, 20, 20, 20, 20, 20
 		return 1
 	}
 	if ( calcweaponfix_itemid == ITEM_ID_HOUSENKA ) {
 		pierce = 0
-		rangemap = 50, 80, 60
+		rangemap = 50, 80, 60, 30, 20, 20, 20, 20, 20
 		return 1
 	}
 	if ( calcweaponfix_itemid == ITEM_ID_OTOGIRI ) {
 		pierce = 0
-		rangemap = 50, 80, 60
+		rangemap = 50, 80, 60, 30, 20, 20, 20, 20, 20
 		return 1
 	}
 	if ( calcweaponfix_itemid == ITEM_ID_ROCK ) {
 		pierce = 0
-		rangemap = 90, 100, 80
+		rangemap = 90, 100, 80, 70, 20, 20, 20, 20, 20
 		return 1
 	}
 	if ( calcweaponfix_itemid == ITEM_ID_CLAW ) {
 		pierce = 0
-		rangemap = 50, 80, 60
+		rangemap = 50, 80, 60, 30, 20, 20, 20, 20, 20
 		return 1
 	}
 	if ( calcweaponfix_itemid == ITEM_ID_REPEATING_BOW ) {
 		pierce = 5
-		rangemap = 80, 100, 90, 80, 70, 60, 50
+		rangemap = 80, 100, 90, 80, 70, 60, 50, 40, 20
 		return 1
 	}
 	if ( calcweaponfix_itemid == ITEM_ID_GUR_BAGH_NAKH ) {
 		pierce = 0
-		rangemap = 50, 80, 60
+		rangemap = 50, 80, 60, 30, 20, 20, 20, 20, 20
 		return 1
 	}
 	if ( calcweaponfix_itemid == ITEM_ID_ASTRAL_SICKLE ) {
 		pierce = 5
-		rangemap = 50, 80, 60
+		rangemap = 50, 80, 60, 30, 20, 20, 20, 20, 20
 		return 1
 	}
 	if ( calcweaponfix_itemid == ITEM_ID_VICE_STAFF ) {
 		pierce = 20
-		rangemap = 50, 80, 60
+		rangemap = 50, 80, 60, 30, 20, 20, 20, 20, 20
 		return 1
 	}
 	if ( calcweaponfix_itemid == ITEM_ID_GRAVITY_AXE ) {
 		pierce = 0
-		rangemap = 50, 80, 60
+		rangemap = 50, 80, 60, 30, 20, 20, 20, 20, 20
 		return 1
 	}
 	if ( calcweaponfix_itemid == ITEM_ID_DRAKE_ROD ) {
 		pierce = 0
-		rangemap = 50, 80, 60
+		rangemap = 50, 80, 60, 30, 20, 20, 20, 20, 20
 		return 1
 	}
 	if ( calcweaponfix_itemid == ITEM_ID_SONIC_TONFA ) {
 		pierce = 0
-		rangemap = 50, 80, 60
+		rangemap = 50, 80, 60, 30, 20, 20, 20, 20, 20
 		return 1
 	}
 	if ( calcweaponfix_itemid == ITEM_ID_SABER_TONFA ) {
 		pierce = 0
-		rangemap = 50, 80, 60
+		rangemap = 50, 80, 60, 30, 20, 20, 20, 20, 20
 		return 1
 	}
 	if ( calcweaponfix_itemid == ITEM_ID_SMASH_TONFA ) {
 		pierce = 0
-		rangemap = 50, 80, 60
+		rangemap = 50, 80, 60, 30, 20, 20, 20, 20, 20
 		return 1
 	}
 	if ( calcweaponfix_itemid == ITEM_ID_SHIELD_TONFA ) {
 		pierce = 0
-		rangemap = 50, 80, 60
+		rangemap = 50, 80, 60, 30, 20, 20, 20, 20, 20
 		return 1
 	}
 	if ( calcweaponfix_itemid == ITEM_ID_SACRIFICE_TONFA ) {
 		pierce = 0
-		rangemap = 50, 80, 60
+		rangemap = 50, 80, 60, 30, 20, 20, 20, 20, 20
 		return 1
 	}
 	if ( calcweaponfix_itemid == ITEM_ID_GRIFFON ) {
 		pierce = 20
-		rangemap = 90, 100, 80, 60
+		rangemap = 90, 100, 80, 60, 30, 20, 20, 20, 20
 		return 1
 	}
 	if ( calcweaponfix_itemid == ITEM_ID_MOONLIGHT ) {
 		pierce = 100
-		rangemap = 50, 80, 60
+		rangemap = 50, 80, 60, 30, 20, 20, 20, 20, 20
 		return 1
 	}
 	if ( calcweaponfix_itemid == ITEM_ID_AA_12_ADVANCE ) {
 		pierce = 25
-		rangemap = 100, 80
+		rangemap = 100, 80, 50, 20, 20, 20, 20, 20, 20
 		return 1
 	}
 	if ( calcweaponfix_itemid == ITEM_ID_SLASH_JOKER ) {
 		pierce = 0
-		rangemap = 90, 100, 80
+		rangemap = 90, 100, 80, 70, 20, 20, 20, 20, 20
 		return 1
 	}
 	if ( calcweaponfix_itemid == ITEM_ID_RAINBOW ) {
 		pierce = 20
 		rangemap = 50, 90, 100, 90, 80, 80, 70, 60, 50
 		return 1
 	}
 	if ( calcweaponfix_itemid == ITEM_ID_FLASH_CROSSBOW ) {
 		pierce = 25
-		rangemap = 80, 100, 90, 80, 70, 60, 50
+		rangemap = 80, 100, 90, 80, 70, 60, 50, 40, 20
 		return 1
 	}
 	if ( calcweaponfix_itemid == ITEM_ID_UNICORN_DRILL ) {
 		pierce = 60
-		rangemap = 50, 80, 60
+		rangemap = 50, 80, 60, 30, 20, 20, 20, 20, 20
 		return 1
 	}
 	if ( calcweaponfix_itemid == ITEM_ID_NOVA_GRENADE ) {
 		pierce = 0
-		rangemap = 90, 100, 80
+		rangemap = 90, 100, 80, 70, 20, 20, 20, 20, 20
 		return 1
 	}
 	if ( calcweaponfix_itemid == ITEM_ID_FLAME_EDGE ) {
 		pierce = 0
-		rangemap = 50, 80, 60
+		rangemap = 50, 80, 60, 30, 20, 20, 20, 20, 20
 		return 1
 	}
 	if ( calcweaponfix_itemid == ITEM_ID_ZWIEBEL ) {
 		pierce = 0
-		rangemap = 50, 80, 60
+		rangemap = 50, 80, 60, 30, 20, 20, 20, 20, 20
 		return 1
 	}
 	if ( calcweaponfix_itemid == ITEM_ID_SEALED_SHIELD ) {
 		pierce = 0
-		rangemap = 50, 80, 60
+		rangemap = 50, 80, 60, 30, 20, 20, 20, 20, 20
 		return 1
 	}
 	if ( calcweaponfix_itemid == ITEM_ID_VITAL_FLAYER ) {
 		pierce = 0
-		rangemap = 50, 80, 60
+		rangemap = 50, 80, 60, 30, 20, 20, 20, 20, 20
 		return 1
 	}
 	if ( calcweaponfix_itemid == ITEM_ID_NAIL_STRADIVARIUS ) {
 		pierce = 0
-		rangemap = 50, 80, 60
+		rangemap = 50, 80, 60, 30, 20, 20, 20, 20, 20
 		return 1
 	}
 	if ( calcweaponfix_itemid == ITEM_ID_GERBERA_CROSS ) {
 		pierce = 15
-		rangemap = 90, 100, 80
+		rangemap = 90, 100, 80, 70, 20, 20, 20, 20, 20
 		return 1
 	}
 	if ( calcweaponfix_itemid == ITEM_ID_NIGHTMARE ) {
 		pierce = 0
-		rangemap = 100, 100, 100, 100, 100, 100, 100
+		rangemap = 100, 100, 100, 100, 100, 100, 100, 100, 20
 		return 1
 	}
 	if ( calcweaponfix_itemid == ITEM_ID_BUSTER_BOOK ) {
 		pierce = 65
-		rangemap = 50, 80, 60
+		rangemap = 50, 80, 60, 30, 20, 20, 20, 20, 20
 		return 1
 	}
 	if ( calcweaponfix_itemid == ITEM_ID_STONE_COIN ) {
 		pierce = 65
-		rangemap = 90, 100, 80
+		rangemap = 90, 100, 80, 70, 20, 20, 20, 20, 20
 		return 1
 	}
 	if ( calcweaponfix_itemid == ITEM_ID_BLACK_MONKSHOOD ) {
 		pierce = 5
-		rangemap = 50, 80, 60
+		rangemap = 50, 80, 60, 30, 20, 20, 20, 20, 20
 		return 1
 	}
 	if ( calcweaponfix_itemid == ITEM_ID_SASUMATA ) {
 		pierce = 0
-		rangemap = 50, 80, 60
+		rangemap = 50, 80, 60, 30, 20, 20, 20, 20, 20
 		return 1
 	}
 	if ( calcweaponfix_itemid == ITEM_ID_SNIPER_RIFLE ) {
 		pierce = 0
 		rangemap = 70, 80, 90, 100, 100, 90, 90, 80, 80
@@ -141186,425 +143454,424 @@
 		rangemap = 70, 80, 90, 100, 100, 90, 90, 80, 80
 		return 1
 	}
 	if ( calcweaponfix_itemid == ITEM_ID_SOLAR_CANE ) {
 		pierce = 100
-		rangemap = 50, 80, 60
+		rangemap = 50, 80, 60, 30, 20, 20, 20, 20, 20
 		return 1
 	}
 	if ( calcweaponfix_itemid == ITEM_ID_STORM_BRINGER ) {
 		pierce = 15
-		rangemap = 50, 80, 60
+		rangemap = 50, 80, 60, 30, 20, 20, 20, 20, 20
 		return 1
 	}
 	if ( calcweaponfix_itemid == ITEM_ID_KINDNESS_BLADE ) {
 		pierce = 65
-		rangemap = 50, 80, 60
+		rangemap = 50, 80, 60, 30, 20, 20, 20, 20, 20
 		return 1
 	}
 	if ( calcweaponfix_itemid == ITEM_ID_DREADNOUGHT ) {
 		pierce = 65
-		rangemap = 80, 100, 90, 80, 70, 60, 50
+		rangemap = 80, 100, 90, 80, 70, 60, 50, 40, 20
 		return 1
 	}
 	if ( calcweaponfix_itemid == ITEM_ID_G3_EXA ) {
 		pierce = 65
-		rangemap = 80, 100, 100, 90, 80, 70
+		rangemap = 80, 100, 100, 90, 80, 70, 40, 20, 20
 		return 1
 	}
 	if ( calcweaponfix_itemid == ITEM_ID_GOD_BREAKER ) {
 		pierce = 65
-		rangemap = 50, 80, 60
+		rangemap = 50, 80, 60, 30, 20, 20, 20, 20, 20
 		return 1
 	}
 	if ( calcweaponfix_itemid == ITEM_ID_BEAST_SICKLE ) {
 		pierce = 65
-		rangemap = 50, 80, 60
+		rangemap = 50, 80, 60, 30, 20, 20, 20, 20, 20
 		return 1
 	}
 	if ( calcweaponfix_itemid == ITEM_ID_GEMINI ) {
 		pierce = 20
-		rangemap = 90, 100, 80, 60
+		rangemap = 90, 100, 80, 60, 30, 20, 20, 20, 20
 		return 1
 	}
 	if ( calcweaponfix_itemid == ITEM_ID_OTI_TUBAKI ) {
 		pierce = 40
-		rangemap = 50, 80, 60
+		rangemap = 50, 80, 60, 30, 20, 20, 20, 20, 20
 		return 1
 	}
 	if ( calcweaponfix_itemid == ITEM_ID_DYNAMIC_SABER ) {
 		pierce = 10
-		rangemap = 50, 80, 60
+		rangemap = 50, 80, 60, 30, 20, 20, 20, 20, 20
 		return 1
 	}
 	if ( calcweaponfix_itemid == ITEM_ID_KANEITUUHOU ) {
 		pierce = 100
-		rangemap = 90, 100, 80
+		rangemap = 90, 100, 80, 70, 20, 20, 20, 20, 20
 		return 1
 	}
 	if ( calcweaponfix_itemid == ITEM_ID_GAU_17_CUSTOM ) {
 		pierce = 0
-		rangemap = 80, 100, 100, 90, 80, 70
+		rangemap = 80, 100, 100, 90, 80, 70, 40, 20, 20
 		return 1
 	}
 	if ( calcweaponfix_itemid == ITEM_ID_NEGATIVE_EDGE ) {
 		pierce = 0
-		rangemap = 50, 80, 60
+		rangemap = 50, 80, 60, 30, 20, 20, 20, 20, 20
 		return 1
 	}
 	if ( calcweaponfix_itemid == ITEM_ID_PILE_DRIVER ) {
 		pierce = 50
-		rangemap = 50, 80, 60
+		rangemap = 50, 80, 60, 30, 20, 20, 20, 20, 20
 		return 1
 	}
 	if ( calcweaponfix_itemid == ITEM_ID_DRAGON_SLAYER ) {
 		pierce = 0
-		rangemap = 50, 80, 60
+		rangemap = 50, 80, 60, 30, 20, 20, 20, 20, 20
 		return 1
 	}
 	if ( calcweaponfix_itemid == ITEM_ID_SKULL_BOW ) {
 		pierce = 15
-		rangemap = 60, 90, 100, 100, 80, 60
+		rangemap = 60, 90, 100, 100, 80, 60, 40, 20, 20
 		return 1
 	}
 	if ( calcweaponfix_itemid == ITEM_ID_KITCHEN_KNIFE ) {
 		pierce = 40
-		rangemap = 50, 80, 60
+		rangemap = 50, 80, 60, 30, 20, 20, 20, 20, 20
 		return 1
 	}
 	if ( calcweaponfix_itemid == ITEM_ID_LIGHTSABRE ) {
 		pierce = 100
-		rangemap = 50, 80, 60
+		rangemap = 50, 80, 60, 30, 20, 20, 20, 20, 20
 		return 1
 	}
 	if ( calcweaponfix_itemid == ITEM_ID_MAUSER_C96_CUSTOM ) {
 		pierce = 35
-		rangemap = 90, 100, 80, 60
+		rangemap = 90, 100, 80, 60, 30, 20, 20, 20, 20
 		return 1
 	}
 	if ( calcweaponfix_itemid == ITEM_ID_CARNEADES_PLANK ) {
 		pierce = 0
-		rangemap = 50, 80, 60
+		rangemap = 50, 80, 60, 30, 20, 20, 20, 20, 20
 		return 1
 	}
 	if ( calcweaponfix_itemid == ITEM_ID_HIRYU_TO ) {
 		pierce = 20
-		rangemap = 50, 80, 60
+		rangemap = 50, 80, 60, 30, 20, 20, 20, 20, 20
 		return 1
 	}
 	if ( calcweaponfix_itemid == ITEM_ID_FRISIAS_TAIL ) {
 		pierce = 65
-		rangemap = 50, 80, 60
+		rangemap = 50, 80, 60, 30, 20, 20, 20, 20, 20
 		return 1
 	}
 	if ( calcweaponfix_itemid == ITEM_ID_SCYTHE ) {
 		pierce = 5
-		rangemap = 50, 80, 60
+		rangemap = 50, 80, 60, 30, 20, 20, 20, 20, 20
 		return 1
 	}
 	if ( calcweaponfix_itemid == ITEM_ID_SHIELD_OF_THORNS ) {
 		pierce = 0
-		rangemap = 50, 80, 60
+		rangemap = 50, 80, 60, 30, 20, 20, 20, 20, 20
 		return 1
 	}
 	if ( calcweaponfix_itemid == ITEM_ID_ALUD ) {
 		pierce = 0
-		rangemap = 50, 80, 60
+		rangemap = 50, 80, 60, 30, 20, 20, 20, 20, 20
 		return 1
 	}
 	if ( calcweaponfix_itemid == ITEM_ID_KILL_KILL_PIANO ) {
 		pierce = 0
-		rangemap = 90, 100, 80
+		rangemap = 90, 100, 80, 70, 20, 20, 20, 20, 20
 		return 1
 	}
 	if ( calcweaponfix_itemid == ITEM_ID_CLAYMORE2 ) {
 		pierce = 0
-		rangemap = 50, 80, 60
+		rangemap = 50, 80, 60, 30, 20, 20, 20, 20, 20
 		return 1
 	}
 	if ( calcweaponfix_itemid == ITEM_ID_SHENAS_PANTY ) {
 		pierce = 5
-		rangemap = 90, 100, 80
+		rangemap = 90, 100, 80, 70, 20, 20, 20, 20, 20
 		return 1
 	}
 	if ( calcweaponfix_itemid == ITEM_ID_VANILLA_ROCK ) {
 		pierce = 50
-		rangemap = 90, 100, 80
+		rangemap = 90, 100, 80, 70, 20, 20, 20, 20, 20
 		return 1
 	}
 	if ( calcweaponfix_itemid == ITEM_ID_GRENADE ) {
 		pierce = 0
-		rangemap = 90, 100, 80
+		rangemap = 90, 100, 80, 70, 20, 20, 20, 20, 20
 		return 1
 	}
 	if ( calcweaponfix_itemid == ITEM_ID_SHURIKEN ) {
 		pierce = 15
-		rangemap = 90, 100, 80
+		rangemap = 90, 100, 80, 70, 20, 20, 20, 20, 20
 		return 1
 	}
 	if ( calcweaponfix_itemid == ITEM_ID_AXE_OF_DESTRUCTION ) {
 		pierce = 0
-		rangemap = 50, 80, 60
+		rangemap = 50, 80, 60, 30, 20, 20, 20, 20, 20
 		return 1
 	}
 	if ( calcweaponfix_itemid == ITEM_ID_GAIA_HAMMER ) {
 		pierce = 0
-		rangemap = 50, 80, 60
+		rangemap = 50, 80, 60, 30, 20, 20, 20, 20, 20
 		return 1
 	}
 	if ( calcweaponfix_itemid == ITEM_ID_LUCKY_DAGGER ) {
 		pierce = 10
-		rangemap = 50, 80, 60
+		rangemap = 50, 80, 60, 30, 20, 20, 20, 20, 20
 		return 1
 	}
 	if ( calcweaponfix_itemid == ITEM_ID_HOLY_LANCE ) {
 		pierce = 30
-		rangemap = 50, 80, 60
+		rangemap = 50, 80, 60, 30, 20, 20, 20, 20, 20
 		return 1
 	}
 	if ( calcweaponfix_itemid == ITEM_ID_ELEMENTAL_STAFF ) {
 		pierce = 0
-		rangemap = 50, 80, 60
+		rangemap = 50, 80, 60, 30, 20, 20, 20, 20, 20
 		return 1
 	}
 	if ( calcweaponfix_itemid == ITEM_ID_KUMIROMI_SCYTHE ) {
 		pierce = 15
-		rangemap = 50, 80, 60
+		rangemap = 50, 80, 60, 30, 20, 20, 20, 20, 20
 		return 1
 	}
 	if ( calcweaponfix_itemid == ITEM_ID_WINCHESTER_PREMIUM ) {
 		pierce = 30
-		rangemap = 100, 80
+		rangemap = 100, 80, 50, 20, 20, 20, 20, 20, 20
 		return 1
 	}
 	if ( calcweaponfix_itemid == ITEM_ID_WIND_BOW ) {
 		pierce = 20
 		rangemap = 50, 90, 100, 90, 80, 80, 70, 60, 50
 		return 1
 	}
 	if ( calcweaponfix_itemid == ITEM_ID_PANTY ) {
 		pierce = 5
-		rangemap = 90, 100, 80
+		rangemap = 90, 100, 80, 70, 20, 20, 20, 20, 20
 		return 1
 	}
 	if ( calcweaponfix_itemid == ITEM_ID_RAIL_GUN ) {
 		pierce = 5
 		rangemap = 70, 80, 90, 100, 100, 90, 90, 80, 80
 		return 1
 	}
 	if ( calcweaponfix_itemid == ITEM_ID_LASER_GUN ) {
 		pierce = 5
-		rangemap = 100, 100, 100, 100, 100, 100, 100
+		rangemap = 100, 100, 100, 100, 100, 100, 100, 50, 20
 		return 1
 	}
 	if ( calcweaponfix_itemid == ITEM_ID_SHOT_GUN ) {
 		pierce = 30
-		rangemap = 100, 80
+		rangemap = 100, 80, 50, 20, 20, 20, 20, 20, 20
 		return 1
 	}
 	if ( calcweaponfix_itemid == ITEM_ID_CROSSBOW ) {
 		pierce = 25
-		rangemap = 80, 100, 90, 80, 70, 60, 50
+		rangemap = 80, 100, 90, 80, 70, 60, 50, 40, 20
 		return 1
 	}
 	if ( calcweaponfix_itemid == ITEM_ID_TOWER_SHIELD ) {
 		pierce = 0
-		rangemap = 50, 80, 60
+		rangemap = 50, 80, 60, 30, 20, 20, 20, 20, 20
 		return 1
 	}
 	if ( calcweaponfix_itemid == ITEM_ID_KITE_SHIELD ) {
 		pierce = 0
-		rangemap = 50, 80, 60
+		rangemap = 50, 80, 60, 30, 20, 20, 20, 20, 20
 		return 1
 	}
 	if ( calcweaponfix_itemid == ITEM_ID_LARGE_SHIELD ) {
 		pierce = 0
-		rangemap = 50, 80, 60
+		rangemap = 50, 80, 60, 30, 20, 20, 20, 20, 20
 		return 1
 	}
 	if ( calcweaponfix_itemid == ITEM_ID_SHIELD ) {
 		pierce = 0
-		rangemap = 50, 80, 60
+		rangemap = 50, 80, 60, 30, 20, 20, 20, 20, 20
 		return 1
 	}
 	if ( calcweaponfix_itemid == ITEM_ID_ROUND_SHIELD ) {
 		pierce = 0
-		rangemap = 50, 80, 60
+		rangemap = 50, 80, 60, 30, 20, 20, 20, 20, 20
 		return 1
 	}
 	if ( calcweaponfix_itemid == ITEM_ID_SMALL_SHIELD ) {
 		pierce = 0
-		rangemap = 50, 80, 60
+		rangemap = 50, 80, 60, 30, 20, 20, 20, 20, 20
 		return 1
 	}
 	if ( calcweaponfix_itemid == ITEM_ID_RANKIS ) {
 		pierce = 40
-		rangemap = 50, 80, 60
+		rangemap = 50, 80, 60, 30, 20, 20, 20, 20, 20
 		return 1
 	}
 	if ( calcweaponfix_itemid == ITEM_ID_STAFF_OF_INSANITY ) {
 		pierce = 0
-		rangemap = 50, 80, 60
+		rangemap = 50, 80, 60, 30, 20, 20, 20, 20, 20
 		return 1
 	}
 	if ( calcweaponfix_itemid == ITEM_ID_BLOOD_MOON ) {
 		pierce = 0
-		rangemap = 50, 80, 60
+		rangemap = 50, 80, 60, 30, 20, 20, 20, 20, 20
 		return 1
 	}
 	if ( calcweaponfix_itemid == ITEM_ID_WAKIZASHI ) {
 		pierce = 5
-		rangemap = 50, 80, 60
+		rangemap = 50, 80, 60, 30, 20, 20, 20, 20, 20
 		return 1
 	}
 	if ( calcweaponfix_itemid == ITEM_ID_HALBERD ) {
 		pierce = 40
-		rangemap = 50, 80, 60
+		rangemap = 50, 80, 60, 30, 20, 20, 20, 20, 20
 		return 1
 	}
 	if ( calcweaponfix_itemid == ITEM_ID_BARDISH ) {
 		pierce = 0
-		rangemap = 50, 80, 60
+		rangemap = 50, 80, 60, 30, 20, 20, 20, 20, 20
 		return 1
 	}
 	if ( calcweaponfix_itemid == ITEM_ID_CLAYMORE ) {
 		pierce = 0
-		rangemap = 50, 80, 60
+		rangemap = 50, 80, 60, 30, 20, 20, 20, 20, 20
 		return 1
 	}
 	if ( calcweaponfix_itemid == ITEM_ID_MACHINE_GUN ) {
 		pierce = 0
-		rangemap = 80, 100, 100, 90, 80, 70
+		rangemap = 80, 100, 100, 90, 80, 70, 40, 20, 20
 		return 1
 	}
 	if ( calcweaponfix_itemid == ITEM_ID_SHORT_BOW ) {
 		pierce = 15
-		rangemap = 90, 100, 100, 80, 60
+		rangemap = 90, 100, 100, 80, 60, 40, 20, 20, 20
 		return 1
 	}
 	if ( calcweaponfix_itemid == ITEM_ID_LONG_STAFF ) {
 		pierce = 0
-		rangemap = 50, 80, 60
+		rangemap = 50, 80, 60, 30, 20, 20, 20, 20, 20
 		return 1
 	}
 	if ( calcweaponfix_itemid == ITEM_ID_TRIDENT ) {
 		pierce = 25
-		rangemap = 50, 80, 60
+		rangemap = 50, 80, 60, 30, 20, 20, 20, 20, 20
 		return 1
 	}
 	if ( calcweaponfix_itemid == ITEM_ID_HAMMER ) {
 		pierce = 0
-		rangemap = 50, 80, 60
+		rangemap = 50, 80, 60, 30, 20, 20, 20, 20, 20
 		return 1
 	}
 	if ( calcweaponfix_itemid == ITEM_ID_BATTLE_AXE ) {
 		pierce = 0
-		rangemap = 50, 80, 60
+		rangemap = 50, 80, 60, 30, 20, 20, 20, 20, 20
 		return 1
 	}
 	if ( calcweaponfix_itemid == ITEM_ID_SCIMITAR ) {
 		pierce = 10
-		rangemap = 50, 80, 60
+		rangemap = 50, 80, 60, 30, 20, 20, 20, 20, 20
 		return 1
 	}
 	if ( calcweaponfix_itemid == ITEM_ID_KATANA ) {
 		pierce = 20
-		rangemap = 50, 80, 60
+		rangemap = 50, 80, 60, 30, 20, 20, 20, 20, 20
 		return 1
 	}
 	if ( calcweaponfix_itemid == ITEM_ID_SPEAR ) {
 		pierce = 25
-		rangemap = 50, 80, 60
+		rangemap = 50, 80, 60, 30, 20, 20, 20, 20, 20
 		return 1
 	}
 	if ( calcweaponfix_itemid == ITEM_ID_STAFF ) {
 		pierce = 0
-		rangemap = 50, 80, 60
+		rangemap = 50, 80, 60, 30, 20, 20, 20, 20, 20
 		return 1
 	}
 	if ( calcweaponfix_itemid == ITEM_ID_SICKLE ) {
 		pierce = 5
-		rangemap = 50, 80, 60
+		rangemap = 50, 80, 60, 30, 20, 20, 20, 20, 20
 		return 1
 	}
 	if ( calcweaponfix_itemid == ITEM_ID_STONE ) {
 		pierce = 5
-		rangemap = 90, 100, 80
+		rangemap = 90, 100, 80, 70, 20, 20, 20, 20, 20
 		return 1
 	}
 	if ( calcweaponfix_itemid == ITEM_ID_BOW_OF_VINDALE ) {
 		pierce = 20
 		rangemap = 50, 90, 100, 90, 80, 80, 70, 60, 50
 		return 1
 	}
 	if ( calcweaponfix_itemid == ITEM_ID_ETHER_DAGGER ) {
 		pierce = 20
-		rangemap = 50, 80, 60
+		rangemap = 50, 80, 60, 30, 20, 20, 20, 20, 20
 		return 1
 	}
 	if ( calcweaponfix_itemid == ITEM_ID_RAGNAROK ) {
 		pierce = 20
-		rangemap = 50, 80, 60
+		rangemap = 50, 80, 60, 30, 20, 20, 20, 20, 20
 		return 1
 	}
 	if ( calcweaponfix_itemid == ITEM_ID_MOURNBLADE ) {
 		pierce = 15
-		rangemap = 50, 80, 60
+		rangemap = 50, 80, 60, 30, 20, 20, 20, 20, 20
 		return 1
 	}
 	if ( calcweaponfix_itemid == ITEM_ID_SCYTHE_OF_THE_VOID ) {
 		pierce = 15
-		rangemap = 50, 80, 60
+		rangemap = 50, 80, 60, 30, 20, 20, 20, 20, 20
 		return 1
 	}
 	if ( calcweaponfix_itemid == ITEM_ID_PISTOL ) {
 		pierce = 10
-		rangemap = 90, 100, 80, 60
+		rangemap = 90, 100, 80, 60, 30, 20, 20, 20, 20
 		return 1
 	}
 	if ( calcweaponfix_itemid == ITEM_ID_KNIGHT_SHIELD ) {
 		pierce = 0
-		rangemap = 50, 80, 60
+		rangemap = 50, 80, 60, 30, 20, 20, 20, 20, 20
 		return 1
 	}
 	if ( calcweaponfix_itemid == ITEM_ID_LONG_BOW ) {
 		pierce = 20
 		rangemap = 50, 90, 100, 90, 80, 80, 70, 60, 50
 		return 1
 	}
 	if ( calcweaponfix_itemid == ITEM_ID_ZANTETSUKEN ) {
 		pierce = 25
-		rangemap = 50, 80, 60
+		rangemap = 50, 80, 60, 30, 20, 20, 20, 20, 20
 		return 1
 	}
 	if ( calcweaponfix_itemid == ITEM_ID_DIABLOS ) {
 		pierce = 10
-		rangemap = 50, 80, 60
+		rangemap = 50, 80, 60, 30, 20, 20, 20, 20, 20
 		return 1
 	}
 	if ( calcweaponfix_itemid == ITEM_ID_CLUB ) {
 		pierce = 0
-		rangemap = 50, 80, 60
+		rangemap = 50, 80, 60, 30, 20, 20, 20, 20, 20
 		return 1
 	}
 	if ( calcweaponfix_itemid == ITEM_ID_HAND_AXE ) {
 		pierce = 0
-		rangemap = 50, 80, 60
+		rangemap = 50, 80, 60, 30, 20, 20, 20, 20, 20
 		return 1
 	}
 	if ( calcweaponfix_itemid == ITEM_ID_DAGGER ) {
 		pierce = 10
-		rangemap = 50, 80, 60
+		rangemap = 50, 80, 60, 30, 20, 20, 20, 20, 20
 		return 1
 	}
 	if ( calcweaponfix_itemid == ITEM_ID_LONG_SWORD ) {
 		pierce = 5
-		rangemap = 50, 80, 60
+		rangemap = 50, 80, 60, 30, 20, 20, 20, 20, 20
 		return 1
 	}
 	return 0
-
 *recipe_ref
 	matneed = -1, -1, -1, -1, -1, -1, -1, -1, -1, -1
 	if ( matid == ITEM_ID_SHARP_HIGH_MATERIUM ) {
 		matval = SKILL_NORMAL_CARPENTRY, 35, 100
 		matneed = MATERIAL_FAIRY_DUST, 3, MATERIAL_DISCHARGING_STONE, 2
@@ -142014,6 +144281,6 @@
 		matval = SKILL_NORMAL_JEWELER, 1, 100
 		matneed = MATERIAL_PAPER, 2, MATERIAL_MEMORY_FRAGMENT, 1
 		return 1
 	}
 	return -1
-
+	goto *label_3493
